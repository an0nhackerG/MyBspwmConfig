"use strict";(globalThis.webpackChunk_dashlane_leeloo=globalThis.webpackChunk_dashlane_leeloo||[]).push([[849],{995544:(e,t,a)=>{a.d(t,{B:()=>r});var n=a(696832);const r=()=>{const[e,t]=n.useState(""),[a,r]=n.useState(!1),i=()=>{r(!1)};return n.useEffect((()=>{if(!a)return;const e=setTimeout(i,5e3);return()=>clearTimeout(e)}),[a,e]),{isAlertVisible:a,alertMessage:e,setAlertMessage:t,hide:i,show:()=>{r(!0)}}}},257958:(e,t,a)=>{a.r(t),a.d(t,{PaymentCardEditPanel:()=>N});var n=a(696832),r=a(526849),i=a(238250),s=a(441217),o=a(592233),l=a(448430),c=a(382706),m=a(799852),d=a(787268),u=a(201389),_=a(66941),p=a(635164),C=a(62429),g=a(60043),h=a(950586),y=a(175730),S=a(878681),b=a(995544),f=a(461201),E=a(796446),w=a(702394),D=a(889483),A=a(264980);const L=({item:e})=>{const{translate:t}=(0,u.Z)(),{routes:a}=(0,g.Xo)(),l=(0,d.V)(),c=(0,b.B)(),{protectedItemsUnlockerShown:m}=(0,D.tY)(),[L,N]=n.useState(!1),[k,T]=n.useState(!1),[P,v]=n.useState(),[B,I]=n.useState(!1),[V,Z]=n.useState(e),J=()=>{l.showAlert(t("_common_generic_error"),s.BLW.ERROR)};n.useEffect((()=>{(0,C.Nc)(o.PageView.ItemCreditCardDetails)}),[]);const R=n.useCallback((()=>{(0,C.Nc)(o.PageView.ItemPaymentList),(0,p.uX)(a.userPayments)}),[a]),U=n.useCallback((t=>{N(!(0,r.equals)(t,e)),Z(t)}),[e]),G=e?.itemName||t("payments_header_add_payment_card"),M=t("webapp_payment_edition_delete_text"),W={confirmDeleteConfirm:t("webapp_payment_edition_delete_confirm"),confirmDeleteDismiss:t("webapp_payment_edition_delete_dismiss"),confirmDeleteSubtitle:M,confirmDeleteTitle:t("webapp_payment_edition_delete_header")};return n.createElement(E.zI,{isViewingExistingItem:!0,itemHasBeenEdited:L,onNavigateOut:R,onSubmit:async()=>{if(!k&&e){T(!0);try{const a=await _.C.updatePaymentCard({...V,color:A.M[V.color],name:V.itemName,personalNote:V.note,id:e.id});if(a.success){const e=V?.itemName||"",a=""===e?t("webapp_payment_edition_generic_update_alert"):t("webapp_payment_edition_name_update_alert",{paymentCard:e});l.showAlert(a,s.BLW.SUCCESS),R()}else T(!1),a.error?.code===i.PaymentCardSaveResultErrorCode.EMPTY_CARD_NUMBER_AND_SECURITY_CODE?v(new Set(["cardNumber","securityCode"])):J()}catch(e){T(!1),J()}}},onClickDelete:()=>I(!0),ignoreCloseOnEscape:B||m,formId:"edit_paymentcard_panel",header:n.createElement(E.V9,{icon:n.createElement(h.Z,{paymentCardColor:V.color,iconSize:"large"}),iconBackgroundColor:(0,S.Z)(V.color),title:G})},V&&e?n.createElement(n.Fragment,null,n.createElement(y.g,{itemId:e.id,errors:P,paymentCardContent:V,signalEditedValues:U,showCopyAlert:e=>{c.setAlertMessage(e),c.show()}}),B&&n.createElement(w.h,{closeConfirmDeleteDialog:()=>I(!1),onDeleteConfirm:async()=>{if(e)if((await _.C.deletePaymentCard({id:e.id})).success){const a=""===e.itemName?t("webapp_payment_edition_generic_delete_alert"):t("webapp_payment_edition_name_delete_alert",{paymentCard:e.itemName});l.showAlert(a,s.BLW.SUBTLE)}else J();R()},translations:W})):null,c.isAlertVisible&&n.createElement("div",{className:f.Z.alertWrapper},n.createElement(s.bZj,{size:s.k3y.SMALL,severity:s.BLW.SUCCESS,closeIconName:t("_common_alert_dismiss_button"),onClose:()=>{c.hide()}},c.alertMessage)))},N=({match:e})=>{const{data:t}=(0,m.k)(l.L,"query",{vaultItemTypes:[c.U.PaymentCard],ids:[`{${e.params.uuid}}`]});return t?.paymentCardsResult.items.length?n.createElement(L,{item:t.paymentCardsResult.items[0]}):null}},702394:(e,t,a)=>{a.d(t,{Z:()=>m,h:()=>c});var n=a(696832),r=a(111768),i=a(159515),s=a(151796),o=a(201389),l=a(177704);const c=({closeConfirmDeleteDialog:e,onDeleteConfirm:t,translations:a})=>{const{translate:i}=(0,o.Z)(),{confirmDeleteSubtitle:s,confirmDeleteTitle:c,confirmDeleteDismiss:m,confirmDeleteConfirm:d}=a;return n.createElement(r.Vq,{title:c,onClose:e,isOpen:!0,dialogClassName:l.Ht,closeActionLabel:i("_common_dialog_dismiss_button"),isDestructive:!0,actions:{primary:{children:d,onClick:t,id:"deletion-dialog-confirm-button"},secondary:{children:m,onClick:e,autoFocus:!0,id:"deletion-dialog-dismiss-button"}}},s)},m=({reason:e,translations:t,goToSharingAccess:a,closeCantDeleteDialog:l})=>{const{translate:c}=(0,o.Z)(),m=((e,t)=>{const{groupSharingTitle:a,lastAdminTitle:n,genericErrorTitle:r}=e;switch(t){case i.J.LastAdmin:return n;case i.J.GroupSharing:return a;case i.J.Generic:return r;default:return(0,s.U)(t)}})(t,e),d=((e,t)=>{const{groupSharingSubtitle:a,lastAdminSubtitle:n,genericErrorSubtitle:r}=e;switch(t){case i.J.LastAdmin:return n;case i.J.GroupSharing:return a;case i.J.Generic:return r;default:return(0,s.U)(t)}})(t,e);return n.createElement(r.Vq,{isOpen:!0,onClose:l,title:null!=m?m:"",closeActionLabel:c("_common_dialog_dismiss_button"),actions:e===i.J.LastAdmin?{primary:{children:t.lastAdminActionLabel,onClick:a}}:void 0},d)}},159515:(e,t,a)=>{let n;a.d(t,{J:()=>n}),function(e){e[e.LastAdmin=0]="LastAdmin",e[e.GroupSharing=1]="GroupSharing",e[e.Generic=2]="Generic"}(n||(n={}))},461201:(e,t,a)=>{a.d(t,{Z:()=>n});const n={alertWrapper:"alertWrapper--JLZLLWrHCo"}}}]);