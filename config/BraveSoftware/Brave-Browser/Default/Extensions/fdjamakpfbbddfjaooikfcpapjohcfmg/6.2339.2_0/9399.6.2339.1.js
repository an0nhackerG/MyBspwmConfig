"use strict";(globalThis.webpackChunk_dashlane_leeloo=globalThis.webpackChunk_dashlane_leeloo||[]).push([[9399],{619733:(e,t,n)=>{n.d(t,{N:()=>l});var a=n(696832),i=n(383849),s=n.n(i);const l=({disableHover:e=!1,...t})=>{const[n,i]=a.useState(!1),{children:[l,...o]=[]}=t;return a.createElement("div",{className:"buttonsContainer--TiPIoxROXR",onMouseEnter:()=>i(!0),onMouseLeave:()=>i(!1)},l,t.enabled&&a.createElement("span",{className:s()("buttons--p98QFrEo3f",{"visible--aWYlZRshE_":e||n})},o))}},313661:(e,t,n)=>{n.d(t,{Z:()=>_});var a=n(696832),i=n(554712),s=n(383849),l=n.n(s),o=n(526849),r=n(769183),d=n(317894),c=n.n(d),p=n(111768),u=n(654),m=n(83126);const h=e=>{navigator.clipboard.writeText(e.replaceAll(" ",""))};class _ extends a.Component{constructor(e){super(e),this.field=void 0,this.handleChange=e=>{this.setState({selectionRangeStart:e.target.selectionStart,selectionRangeEnd:e.target.selectionEnd}),this.props.onChange&&this.props.onChange(e)},this.state={fieldHtmlId:(0,r.Z)(),selectionRangeStart:null,selectionRangeEnd:null}}componentDidUpdate(){null!==this.state.selectionRangeStart&&null!==this.state.selectionRangeEnd&&this.field.setSelectionRange(this.state.selectionRangeStart,this.state.selectionRangeEnd)}shouldComponentUpdate(e,t){return!((0,o.equals)(this.props.value,e.value)&&(0,o.equals)(this.props.error,e.error)&&(0,o.equals)(this.props.mask,e.mask)&&(0,o.equals)(this.props.label,e.label)&&(0,o.equals)(this.state.selectionRangeStart,t.selectionRangeStart)&&(0,o.equals)(this.state.selectionRangeEnd,t.selectionRangeEnd))}getValue(){return this.field.value}focus(){this.field.focus()}getTextarea(){var e;return(0,p.tZ)(i.Z,{inputRef:e=>{this.field=e},id:this.state.fieldHtmlId,disabled:this.props.disabled,value:null!=(e=this.props.value)?e:"",name:this.props.name,"data-name":this.props.dataName,sx:{borderColor:this.props.error&&"ds.border.danger.standard.idle"},className:m.Z.textarea,placeholder:this.props.placeholder,onBlur:this.props.handleFieldBlur,onKeyDown:this.props.onFieldKeyDown,onChange:this.handleChange})}getInput(){var e;const t={onBlur:this.props.handleFieldBlur,onChange:this.handleChange,disabled:this.props.disabled,readOnly:this.props.readOnly,value:null!=(e=this.props.value)?e:""},n={ref:e=>{this.field=e},id:this.state.fieldHtmlId,autoComplete:"off",className:l()(m.Z.input,{[m.Z.error]:Boolean(this.props.error)}),sx:{...this.props.error&&{"::placeholder":{color:"ds.text.danger.quiet"},minWidth:"fit-content"},border:"1px solid",borderColor:this.props.error?"ds.border.danger.standard.idle":"transparent"},name:this.props.name,"data-name":this.props.dataName,type:this.props.type||"text",placeholder:this.props.placeholder,onKeyDown:this.props.onFieldKeyDown};return this.props.mask?(0,p.tZ)(c(),{...t,...this.props.maskProps,mask:this.props.mask,onCopy:()=>h(t.value),onCut:()=>h(t.value)},(e=>(0,p.tZ)("input",{...n,...e}))):(0,p.tZ)("div",{className:m.Z.inputRow},(0,p.tZ)("input",{...n,...t}),(0,p.tZ)("div",{hidden:!this.props.error||"string"!=typeof this.props.error,sx:{color:"ds.text.danger.quiet"},className:m.Z.errorMessage},this.props.error))}render(){const e="password"!==this.props.type?this.props.value||this.props.placeholder:"";return(0,p.tZ)("div",{className:l()(m.Z.container,this.props.multiLine?m.Z.containerMultiLine:null)},this.props.label&&(0,p.tZ)("label",{className:m.Z.label,sx:{color:"ds.text.neutral.catchy"},htmlFor:this.state.fieldHtmlId},(0,p.tZ)("span",{className:m.Z.text,title:this.props.label},this.props.label)),(0,p.tZ)(u.Z,{tooltipText:e,className:l()(m.Z.value,{[m.Z.placeholder]:!this.props.value,[m.Z.multiline]:this.props.multiLine})},this.props.multiLine?this.getTextarea():this.getInput()))}}_.defaultProps={maskProps:{maskChar:""}}},849399:(e,t,n)=>{n.d(t,{S:()=>_t});var a=n(696832),i=n(592233),s=n(441217),l=n(164718),o=n(787268),r=n(66941),d=n(619733),c=n(313661),p=n(83126),u=n(201389),m=n(62429),h=n(526849);let _;!function(e){e[e.SECONDARY_LOGIN=0]="SECONDARY_LOGIN",e[e.OTP_CODE=1]="OTP_CODE"}(_||(_={}));const b=e=>Boolean(e.otpUrl)||Boolean(e.otpSecret),g=e=>{const{login:t,secondaryLogin:n}=e;return Boolean(t)||Boolean(n)};var f=n(488856),w=n(839434),v=n(889483),y=n(826771),C=n(694802);const k=e=>{const{requiresMasterPassword:t,credentialId:n,...i}=e,{areProtectedItemsUnlocked:l,openProtectedItemsUnlocker:o}=(0,v.tY)(),r=a.useCallback((e=>e&&!l&&t&&n?new Promise(((e,t)=>{o({action:y.P.Show,itemType:y.R.Password,showNeverAskOption:!0,credentialId:n,successCallback:e,cancelCallback:t})})):Promise.resolve()),[l,n,o,t]);return a.createElement(s.WUg,{...i,onPasswordVisibilityChangeRequest:r})};var Z,x=n(5727),I=n(895692),E=n(111768),P=n(65255),W=n(915970),S=n(562150),T=n.n(S);const{black:L,midGreen00:D,white:R}=s.colors,N={backgroundColor:R,borderRadius:"4px",display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center"},O={display:"flex",flexWrap:"wrap",maxWidth:"20ch",wordWrap:"break-word",fontFamily:T()["--dashlane-fontfamily-mono"],fontSize:T()["--password-font-size"],lineHeight:T()["--password-line-height"],fontWeight:T()["--dashlane-font-weight-regular"],letterSpacing:T()["--password-letter-spacing"],fontVariantLigatures:"none",fontFeatureSettings:'"calt" 0'},B={base:{display:"flex"},numbers:{color:"#3366ff"},symbols:{color:"#c15315"},letters:{color:L}},V=({password:e,onRefreshPassword:t})=>{const{translate:n}=(0,u.Z)(),i=e=>"0123456789".includes(e)?B.numbers:"&@$!#?".includes(e)?B.symbols:B.letters,l=(0,a.useMemo)((()=>e.split("").map(((e,t)=>(0,x.tZ)("span",{key:`char-${t}`,sx:{...B.base,...i(e)}},e)))),[e]);return(0,x.tZ)("div",{sx:N},(0,x.tZ)("div",{sx:{...O,transition:"opacity 0.1s ease"}},l),(0,x.tZ)(s.zxk,{sx:{minWidth:"auto",padding:"4px",marginRight:"0"},size:"small","aria-label":n("webapp_credential_edition_field_generator_refresh"),type:"button",nature:"ghost",onClick:t},Z||(Z=(0,x.tZ)(s.DuK,{hoverColor:D}))))},F="qwertyuiopasdfghjklzxcvbnmQWERTYUIOPASDFGHJKLZXCVBNM1234567890!@#$&?";function M(e=0,t=1){return Math.floor(Math.random()*(t-e))+e}function q(){return F.substr(M(0,F.length-1),1)}function z(e){return F.substr(0,e).split("").map((()=>q())).join("")}function U(e,t=M(0,e.length)){return e.substr(0,t)+q()+e.substr(t+1)}const A={0:"too_guessable",1:"very_guessable",2:"somewhat_guessable",3:"safely_unguessable",4:"very_unguessable"};function H(e){return e>=100?4:e>=75?3:e>=50?2:e>=25?1:e>=0?0:void 0}const{midGreen03:G,white:Y}=s.colors,K={margin:0,borderRadius:"4px",padding:"10px",boxSizing:"border-box",color:Y,display:"flex",flexDirection:"column",justifyContent:"space-between"},X={boxSizing:"border-box",display:"flex",flexDirection:"column",justifyContent:"center"},j=({isLoading:e,generatedPassword:t,passwordLength:n,onRefreshPassword:i,strength:l})=>{const{translate:o}=(0,u.Z)(),r=(0,W.w)(P.w.WebplatformWebPrideColors),d=(0,a.useMemo)((()=>function(e){return`webapp_credential_edition_field_generator_strength/${function(e){const t=H(e);return t?A[t]:""}(e)||"none"}`}(l)),[l]),c=(0,a.useMemo)((()=>H(l)),[l]),{shuffledPassword:p,isPasswordShuffling:m}=function({shouldShuffle:e,passwordLength:t}){const n=(0,a.useRef)(null),[i,s]=(0,a.useState)(z(t)),l=(0,a.useCallback)((()=>{let e=U(i);const t=e.length/6;for(let n=0;n<t;n++)e=U(e);s(e)}),[i]),[o,r]=(0,a.useState)(e);return(0,a.useEffect)((()=>{let t;return e?r(!0):t=window.setTimeout((()=>{r(!1)}),150),()=>window.clearTimeout(t)}),[e]),(0,a.useEffect)((()=>(i.length!==t&&s(z(t)),o?n.current=window.setInterval(l,10):n.current&&window.clearInterval(n.current),()=>{n.current&&window.clearInterval(n.current)})),[o,t,l,i]),{shuffledPassword:i,isPasswordShuffling:o}}({shouldShuffle:e,passwordLength:n}),h=m?p:t;return(0,x.tZ)("div",{sx:K},(0,x.tZ)("div",{sx:X},(0,x.tZ)(V,{onRefreshPassword:i,password:h}),(0,x.tZ)("div",{sx:{marginTop:"4px"}},(0,x.tZ)(s.YVT,{score:c,showAdditionalText:!0,additionalText:o(d),backgroundColor:G,showQueerColors:r}))))},{grey00:J}=s.colors,$=({options:e,onOptionsChanged:t})=>{const{translate:n}=(0,u.Z)(),i=(0,a.useCallback)((n=>{const a=n.currentTarget.checked;t({...e,digits:a})}),[t,e]),l=(0,a.useCallback)((n=>{const a=n.currentTarget.checked;t({...e,letters:a})}),[t,e]),o=(0,a.useCallback)((n=>{const a=n.currentTarget.checked;t({...e,symbols:a})}),[t,e]),r=(0,a.useCallback)((n=>{const a=n.currentTarget.checked;t({...e,avoidAmbiguous:!a})}),[t,e]),d=(0,a.useCallback)((e=>{const t=n(e),a=t.search(/(\(.*\))$/);if(-1===a)return t;const i=t.substring(0,a),l=t.substring(a);return(0,x.tZ)(s.nvN,{size:"small"},i,(0,x.tZ)("span",{sx:{color:J}},l))}),[n]);return(0,x.tZ)(s.T5p,{justifyItems:"left",gap:"10px",sx:{paddingBottom:"10px"}},(0,x.tZ)(s.XZJ,{label:d("webapp_credential_edition_field_generator_use_letters"),onChange:l,checked:e.letters,disabled:e.letters&&!e.digits}),(0,x.tZ)(s.XZJ,{label:d("webapp_credential_edition_field_generator_use_digits"),onChange:i,checked:e.digits,disabled:e.digits&&!e.letters}),(0,x.tZ)(s.XZJ,{label:d("webapp_credential_edition_field_generator_use_symbols"),onChange:o,checked:e.symbols}),(0,x.tZ)(s.XZJ,{label:d("webapp_credential_edition_field_generator_similar_characters"),onChange:r,checked:!e.avoidAmbiguous}))},Q=({length:e,onLengthChanged:t})=>{const{translate:n}=(0,u.Z)(),[i,l]=(0,a.useState)(e);return(0,x.tZ)("div",{"aria-label":n("webapp_credential_edition_field_generator_min_max_a11y",{min:4,max:40})},(0,x.tZ)(s.iRW,{label:n("webapp_credential_edition_field_generator_password_length",{length:i}),min:4,max:40,step:1,onChange:e=>{l(e)},onChangeComplete:t,value:i}))},{dashGreen05:ee,dashGreen06:te}=s.colors,ne=({options:e,handleSettingsChange:t,handleUsePassword:n})=>{const{translate:a}=(0,u.Z)();return(0,x.tZ)(s.T5p,{gap:"10px",sx:{padding:"10px"}},(0,x.tZ)(s.T5p,{gap:"10px",sx:{textAlign:"left",padding:"10px",backgroundColor:te,borderRadius:"4px"}},(0,x.tZ)(Q,{length:e.length,onLengthChanged:n=>{t({...e,length:n})}}),(0,x.tZ)("hr",{sx:{border:"none",borderBottom:`solid 1px ${ee}`,margin:"10px 0"}}),(0,x.tZ)($,{onOptionsChanged:e=>{t(e)},options:e})),(0,x.tZ)(s.zxk,{sx:{mx:0},type:"button",nature:"primary",size:"small",onClick:n},a("webapp_credential_edition_field_generator_use_password_button")))};var ae,ie,se;const{white:le,dashGreen06:oe}=s.colors,re={length:16,digits:!0,letters:!0,symbols:!0,avoidAmbiguous:!0},de="webapp_credential_edition_field_generator_generate_tooltip",ce=({credential:e,handleChangePassword:t})=>{const[n,l]=(0,a.useState)(!1),[o,d]=(0,a.useState)(re),{translate:c}=(0,u.Z)();(0,a.useEffect)((()=>{r.C.getPasswordGenerationSettings().then((e=>{d(e)}))}),[]);const[p,h]=(0,a.useState)(!0),[_,b]=(0,a.useState)(""),[g,f]=(0,a.useState)(25),w=e=>{h(!0),r.C.generatePassword({settings:e}).then((e=>{e.success&&(b(e.password),f(e.strength))})).finally((()=>{(0,m.Kz)(new i.UserGeneratePasswordEvent({hasDigits:e.digits,hasLetters:e.letters,hasSymbols:e.symbols,hasSimilar:!e.avoidAmbiguous,length:e.length})),h(!1)}))};return(0,x.tZ)(s.ua7,{sx:{width:"300px",backgroundColor:le,padding:"0",borderRadius:"4px"},offset:[0,0],trigger:"persist",placement:"left",passThrough:!n,arrowSize:0,content:(0,x.tZ)(I.Y,{onClickOutside:()=>l(!1),autoFocus:!1},(0,x.tZ)(s.T5p,{sx:{bg:oe}},(0,x.tZ)(s.dDn,{justifySelf:"end","aria-label":c("_common_dialog_dismiss_button"),as:s.hU,icon:ae||(ae=(0,x.tZ)(s.Two,null)),onClick:()=>l(!1)},ie||(ie=(0,x.tZ)(s.Two,null)))),(0,x.tZ)(s.T5p,{sx:{padding:"4px"}},(0,x.tZ)(j,{onRefreshPassword:()=>{w(o)},isLoading:p,passwordLength:o.length,generatedPassword:_,strength:g}),(0,x.tZ)(ne,{options:o,handleSettingsChange:e=>{d(e),w(e)},handleUsePassword:()=>{t(_),l(!1)}})))},(0,x.tZ)("div",null,(0,x.tZ)(s.ua7,{placement:"top",content:c(de)},(0,x.tZ)(s.zxk,{"aria-label":c(de),nature:"secondary",type:"button",onClick:()=>{n||w(o),l(!n)},disabled:e.limitedPermissions,sx:{border:"none",minWidth:"fit-content",padding:"10px"}},se||(se=(0,x.tZ)(E.JO,{name:"FeaturePasswordGeneratorOutlined",color:"ds.oddity.brand"}))))))};var pe=n(148038),ue=n(846658);const me={title:"webapp_lock_items_require_master_password_for_credential_title_on",subtitle:"webapp_lock_items_require_master_password_for_credential_subtitle_on",confirm:"webapp_lock_items_require_master_password_confirm_on_for_credential"},he={title:"webapp_lock_items_require_master_password_for_credential_title_off",subtitle:"webapp_lock_items_require_master_password_for_credential_subtitle_off",confirm:"webapp_lock_items_require_master_password_confirm_off_for_credential"},_e=({name:e,title:t,description:n,setValue:i,isMpProtected:l=!1,value:o,disabled:r=!1})=>{const{areProtectedItemsUnlocked:d,openProtectedItemsUnlocker:c}=(0,v.tY)(),p=(0,a.useCallback)((e=>{const t=e.target.checked,n=async()=>{await i(t)};return l&&!d?((0,ue.jF)(),c({itemType:y.R.SecuritySettings,options:{fieldsKeys:t?me:he,translated:!1},successCallback:n})):n()}),[d,l,c,i]),u=`setting-${e}`;return(0,x.tZ)(s.Ejs,{sx:{marginTop:"-0.5em"}},(0,x.tZ)(E.XZ,{label:t,description:n,checked:o,onChange:p,id:u,disabled:r}))};var be=n(985102),ge=n(749446),fe=n(364776);const we="webapp_credential_edition_field_options_always_log_me",ve="webapp_credential_edition_field_options_always_log_me_details",ye="webapp_credential_edition_field_options_added_by_user_only",Ce="webapp_credential_edition_field_options_added_by_user_only_details",ke="webapp_credential_edition_field_options_always_require_master_password",Ze="webapp_credential_edition_field_options_always_require_master_password_details",xe="webapp_credential_edition_field_options_always_require_master_password_disable_feedback_markup",Ie=({credentialPreferences:e,isNewCredential:t,url:n,update:i})=>{const l=(0,be.q)(),o=(0,a.useMemo)((()=>{if(!n)return!1;try{return new URL(n),!0}catch(e){try{return new URL("https://"+n),!0}catch(e){return!1}}}),[n]),{translate:r}=(0,u.Z)(),d=(0,ge.F)(),c=(0,fe.Z)(),p=!d&&!c,m=t=>i({...e,requiresMp:t});return(0,x.tZ)(s.T5p,{gridTemplateColumns:"173px 1fr",alignItems:"flex-start",justifyItems:"flex-end"},(0,x.tZ)(s.nvN,{sx:{fontWeight:600,paddingRight:"24px"}},r("webapp_credential_edition_field_options")),(0,x.tZ)(s.Ejs,{gap:"24px"},o?null:(0,x.tZ)(s.vDh,{severity:"warning",size:"small",title:r("webapp_credential_edition_field_options_no_url_warning")}),(0,x.tZ)(_e,{name:"autoLogin",description:r(ve),isMpProtected:!1,title:r(we),setValue:t=>i({...e,autoLogin:t}),value:e.autoLogin,disabled:!o}),(0,x.tZ)(_e,{name:"fixedDomain",isMpProtected:!1,title:r(ye),description:r(Ce),setValue:t=>i({...e,subDomainOnly:t}),value:e.subDomainOnly,disabled:!o}),p?l.status===pe.rq.Success?(0,x.tZ)(_e,{name:"requireMP",isMpProtected:!t,title:r(ke),description:(0,x.tZ)("div",null,l.data?(0,x.tZ)("div",{sx:{marginBottom:"8px",color:s.colors.midGreen00}},r.markup(xe)):null,(0,x.tZ)("span",null,r(Ze))),setValue:m,value:!!l.data||e.requiresMp,disabled:!o||l.data}):(0,x.tZ)(_e,{name:"requireMP",isMpProtected:!t,title:r(ke),description:r(Ze),setValue:m,value:e.requiresMp,disabled:!o}):null))};var Ee=n(755502),Pe=n(949603),We=n(170044);const Se=(0,a.createContext)({}),Te=(0,a.createContext)({}),Le=({children:e,vaultItemId:t,vaultItemTitle:n,spaceId:s,signalEditedValues:l,setHasOpenedDialogs:o})=>{const[r,d]=(0,a.useState)(""),[c,p]=(0,a.useState)(!1),{allCollections:u}=(0,Ee.b)(),[h,_]=(0,a.useState)((()=>""===t?[]:u.flatMap((e=>e.vaultItems.some((e=>e.id===t))?{...e,initiallyExisting:!0,hasBeenDeleted:!1}:[])))),b=(0,a.useMemo)((()=>h.filter((e=>!e.hasBeenDeleted))),[h]),g=(0,a.useMemo)((()=>u.filter((e=>!b.some((t=>t.id===e.id))))),[u,b]),f={setInput:d,setIsInputVisible:p,onSubmit:(e=r)=>{if((e=e.trim()).length<=0)return;const t=h.findIndex((t=>t.name===e));if(-1===t)_((t=>{var n;const a=[...t],i=u.find((t=>t.name===e&&t.spaceId===s));return a.push({id:null!=(n=i?.id)?n:"",name:e,spaceId:s,isShared:i?.isShared,vaultItems:[],initiallyExisting:!1,hasBeenDeleted:!1}),(0,We.p)(a)}));else{const e=h[t];e.initiallyExisting&&e.hasBeenDeleted&&_((e=>{const n=[...e];return n[t].hasBeenDeleted=!1,n}))}l?.(!0),d("")},onDelete:e=>{const t=h.findIndex((t=>t.name===e));if(-1===t)return;const n=h[t];_((e=>{const a=[...e];return n.initiallyExisting?a[t].hasBeenDeleted=!0:a.splice(t,1),a})),(0,m.Nc)(i.PageView.CollectionDelete),l?.(!0)},clearVaultItemCollections:()=>_((e=>e.flatMap((e=>e.initiallyExisting?{...e,hasBeenDeleted:!0}:[]))))};return a.createElement(Se.Provider,{value:{input:r,isInputVisible:c,filteredCollections:g,vaultItemCollections:h,vaultItemCollectionsToDisplay:b,vaultItemId:t,vaultItemTitle:n,setHasOpenedDialogs:o,spaceId:s}},a.createElement(Te.Provider,{value:f},e))},De=()=>(0,a.useContext)(Se),Re=()=>(0,a.useContext)(Te);var Ne,Oe=n(22393),Be=n(971380);const Ve=({id:e,hasCollections:t,vaultItemTitle:n,setHasOpenedDialogs:i})=>{const{translate:l}=(0,u.Z)(),o=(0,a.useRef)(null),{isInputVisible:r,filteredCollections:d,input:c,spaceId:p}=De(),{openDialog:m,closeDialog:h}=(0,Oe.R)(),{setInput:_,setIsInputVisible:b,onSubmit:g}=Re(),f=e=>{g(e),h(),i?.(!1),o.current?.focus()},w=()=>{h(),i?.(!1)};return r?(0,E.tZ)(Pe.x5,{collections:d,id:e,input:c,inputRef:o,spaceId:p,selectionAsDropdown:!0,onSubmit:e=>{const t=d.find((t=>t.name===e&&t.spaceId===p));t?.isShared?(m((0,E.tZ)(Be.B,{onSubmit:f,onClose:w,itemTitle:n,collectionName:t.name})),i?.(!0)):f(e)},setInput:_,onBlur:e=>{e.currentTarget.contains(e.relatedTarget)||window.setTimeout((()=>{b(!1)}),100)}}):(0,E.tZ)(E.zx,{sx:{margin:"4px 0"},onClick:()=>b(!0),icon:Ne||(Ne=(0,E.tZ)(s.dtP,null)),layout:"iconLeading",intensity:"supershy"},l(t?"webapp_collections_input_placeholder_add_another":"webapp_collections_input_placeholder_add_new"))},Fe=e=>(0,E.tZ)("div",{sx:{flex:"1",display:"flex",flexDirection:"column"},...e});var Me,qe=n(761753);const ze=({hasMultipleCollections:e,...t})=>{const{spaceId:n}=De(),i=(0,qe.b)(n),{translate:s}=(0,u.Z)();return(0,E.tZ)("label",{sx:{display:"flex",width:"149px",justifyContent:"flex-end",fontWeight:"600",textAlign:"right"},...t},(0,E.tZ)("span",{sx:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},i&&(0,E.tZ)(a.Fragment,null,`${i}`,Me||(Me=(0,E.tZ)("br",null))),s(e?"webapp_credentials_header_row_category":"webapp_credential_edition_field_category")))},Ue=e=>(0,E.tZ)("div",{sx:{display:"flex",flexDirection:"row"},...e}),Ae="collectionsFieldId",He=(0,a.forwardRef)(((e,t)=>{const{vaultItemCollections:n,vaultItemCollectionsToDisplay:i,vaultItemTitle:s,setHasOpenedDialogs:l}=De(),{onDelete:o,clearVaultItemCollections:r}=Re(),d=i?.length>0;return(0,a.useImperativeHandle)(t,(()=>({getVaultItemCollections:()=>n,clearVaultItemCollections:r}))),(0,E.tZ)(Ue,{sx:{gap:"24px",alignItems:!d&&"center"}},(0,E.tZ)(ze,{hasMultipleCollections:i?.length>1,htmlFor:Ae,sx:{marginTop:d&&"15px"}}),(0,E.tZ)(Fe,{sx:{...d&&{gap:"8px",marginTop:"10px"}}},(0,E.tZ)(Pe.zT,{sx:{marginLeft:"16px"},collectionListItems:i.map((e=>(0,E.tZ)(Pe.cF,{key:`collections_field_li_${e.name}`},(0,E.tZ)(Pe.KH,{onDismiss:()=>o(e.name),isShared:e.isShared},e.name))))}),(0,E.tZ)(Ve,{id:Ae,hasCollections:d,vaultItemTitle:s,setHasOpenedDialogs:l})))})),Ge=(0,a.forwardRef)((({vaultItemId:e,vaultItemTitle:t,spaceId:n,signalEditedValues:a,setHasOpenedDialogs:i},s)=>{const{isCollectionsLoading:l}=(0,Ee.b)();return l?null:(0,E.tZ)(Le,{vaultItemId:e,vaultItemTitle:t,spaceId:n,signalEditedValues:a,setHasOpenedDialogs:i},(0,E.tZ)(He,{ref:s}))}));var Ye=n(383849),Ke=n.n(Ye),Xe=n(788933),je=n(799852);const Je=({credentialId:e,onCopy:t})=>{const{translate:n}=(0,u.Z)(),a=function(e){return(0,je.k)(Xe.i,"otpCode",{credentialId:e})}(e);if(a.status!==pe.rq.Success||void 0===a.data||null===a.data)return null;const[i,l,o]=a.status===pe.rq.Success&&a.data?[a.data.code,a.data.validityTime,a.data.validityEndDate]:[null,3e4,1/0];return(0,x.tZ)(d.N,{enabled:a.status===pe.rq.Success,disableHover:!0},(0,x.tZ)(s.Ejs,{alignItems:"center",sx:{paddingRight:"18px"}},(0,x.tZ)("label",{id:"otp-label",className:Ke()([p.Z.label,p.Z.text])},n("webapp_credential_edition_field_security_code")),(0,x.tZ)(s.CnT,{alertThreshold:5e3,"aria-labelledby":"otp-label",clockSize:18,code:i,sx:{marginLeft:"18px",width:"184px"},validityPeriod:l,validityEndDate:o})),(0,x.tZ)(C.m,{data:null!=i?i:"",onCopy:t,disabled:a.status!==pe.rq.Success}))};var $e=n(447725),Qe=n(950468),et=n(139378);const tt=e=>{(0,Qe.k)(e),(0,$e.Yo)(e.url)};var nt,at=n(281086);const it=(0,a.memo)((({credential:e})=>{const{translate:t}=(0,u.Z)(),[n,i]=(0,a.useState)(null),l=(0,a.useCallback)((e=>i(e)),[]),o=(0,a.useCallback)((()=>i(null)),[]);return(0,E.tZ)(a.Fragment,null,(0,E.tZ)(s.ua7,{placement:"top",content:t("webapp_credential_edition_autochange")},(0,E.tZ)(E.zx,{mood:"neutral",intensity:"supershy",onClick:()=>l(e.id),disabled:e.limitedPermissions,sx:{border:"none",minWidth:"fit-content",padding:"10px"}},nt||(nt=(0,E.tZ)(s.HfT,null)))),n&&(0,E.tZ)(at.R,{credentialId:n,dismissCallback:o}))}));var st=n(38069),lt=n(449354);const ot=({children:e,url:t,hasUrlError:n,limitedPermissions:i,editViewButtonEnabled:s,handleMainWebsiteChange:l,handleGoToWebsite:o})=>a.createElement("div",{className:f.Z.containerBlock},a.createElement(lt.d,{url:t,hasUrlError:n,editViewButtonEnabled:s,limitedPermissions:i,handleChange:l,handleGoToWebsite:o}),e),rt=({url:e,hasUrlError:t,linkedWebsites:n,handleMainWebsiteChange:i,handleChanges:s,handleGoToWebsite:l})=>{const[o,r]=a.useState(!1),[d,c]=a.useState([]);return a.useEffect((()=>{d.length&&r(!0),s({linkedWebsites:{...n,addedByUser:d}})}),[d]),a.createElement(ot,{url:e,hasUrlError:t,limitedPermissions:!1,editViewButtonEnabled:!1,handleMainWebsiteChange:i,handleGoToWebsite:l},a.createElement(st.a,{linkedWebsitesList:d,areItemsLocked:!1,credentialId:"",isListEditable:!0,isEditing:o,showUrlProtocol:!0,updateLinkedWebsitesList:c}))};var dt,ct=n(159713);const pt=({linkedWebsitesAddedByUser:e,dashlaneDefinedLinkedWebsites:t,handleOnClickLinkedWebsitesCount:n})=>{const{translate:i}=(0,u.Z)(),l=e.length,o=(t&&t.length>1?t.length:0)+l;return o>0?a.createElement("button",{type:"button",className:ct.Z.linkedWebsitesDetails,onClick:n},i("webapp_credential_edition_linked_websites_title_with_count",{count:o}),dt||(dt=a.createElement(s.XCv,{size:12}))):null};var ut=n(288330);const mt=({url:e,linkedWebsitesAddedByUser:t,dashlaneDefinedLinkedWebsites:n,hasUrlError:i,editViewButtonEnabled:s,limitedPermissions:l=!1,handleChange:o,handleGoToWebsite:r,onClickAddNewWebsite:d,onClickLinkedWebsitesCount:c})=>a.createElement(ot,{url:e,hasUrlError:i,limitedPermissions:l,editViewButtonEnabled:s,handleMainWebsiteChange:o,handleGoToWebsite:r},a.createElement("div",{className:"linkedWebsitesContainer--xiS0SFSZB2"},c?a.createElement(pt,{linkedWebsitesAddedByUser:t,dashlaneDefinedLinkedWebsites:n,handleOnClickLinkedWebsitesCount:c}):null,d&&!l?a.createElement(ut.E,{handleOnClickAddLinkedWebsiteButton:d}):null)),ht="webapp_credential_edition_field_password",_t=(0,a.forwardRef)((({values:e,signalEditedValues:t,additionalProps:n,isNewItem:Z},x)=>{var I,E,P,W,S;const[T,L]=(0,a.useState)(e),[D,R]=(0,a.useState)({activeSpaces:n?.activeSpaces,showingPassword:!1,credentialsGloballyRequireMP:!1,defaultSpaceId:null!=(I=e.spaceId)?I:""}),{translate:N}=(0,u.Z)(),O=(0,a.useRef)(null),B=(0,o.V)();(0,a.useImperativeHandle)(x,(()=>({getState:()=>T,isFormValid:()=>!0,getVaultItemCollections:()=>O.current?.getVaultItemCollections()})));const V=(e,t="")=>{if(e instanceof Event&&t)throw new Error("handleChange was called with both a ChangeEvent and key.");if(!T.limitedPermissions||"spaceId"===t){const n=e?.target?{[e.target.dataset.name]:e.target.value}:{[t]:e},a=Object.keys(n)[0];L({...T,[a]:n[a]})}};let F=T.spaceId;T.forceCategorizedSpace?.details?.teamName&&(F=T.forceCategorizedSpace?.teamId);const M=D.activeSpaces?.find((e=>e.teamId===F)),q=null!=(E=M?.teamName)?E:"webapp_credential_edition_field_space_personal",z=e=>{T.spaceId!==e&&(R((t=>({...t,defaultSpaceId:e}))),O.current?.clearVaultItemCollections(),V(e,"spaceId"))},U=e=>{if(D.activeSpaces&&D.activeSpaces.length>0&&D.activeSpaces[0].info?.teamAdmins?.length>0)for(const n of D.activeSpaces[0].info.teamAdmins)if(e.target.value.includes(n)){var t;R({...D,defaultSpaceId:null!=(t=D.activeSpaces?.[0].teamId)?t:""});break}},A=e=>{L({...T,...e})},H=()=>!!T.password&&(void 0!==n?.areProtectedItemsUnlocked?!n.areProtectedItemsUnlocked&&(T.autoProtected||D.credentialsGloballyRequireMP):void 0),G=(e=>{const t={[_.OTP_CODE]:b(e),[_.SECONDARY_LOGIN]:g(e)};return(e,n)=>t[e]||!!n})(e);(0,a.useEffect)((()=>{t&&t(!(0,h.equals)(T,e))}),[T]),(0,a.useEffect)((()=>{var e;z(null!=(e=D.defaultSpaceId)?e:"")}),[D]),(0,a.useEffect)((()=>{r.C.arePasswordsProtected().then((e=>{R({...D,credentialsGloballyRequireMP:e})}))}),[]);const Y=async(e,t)=>{const n=new l.Y(T.url).getRootDomain();(0,m.Kz)(new i.UserCopyVaultItemFieldEvent({itemType:i.ItemType.Credential,field:e,itemId:T.id,isProtected:!(e!==i.Field.Password||!T.autoProtected&&!D.credentialsGloballyRequireMP)})),(0,m.Kz)(new i.AnonymousCopyVaultItemFieldEvent({itemType:i.ItemType.Credential,field:e,domain:{id:await(0,i.hashDomain)(n),type:i.DomainType.Web}})),t||B.showAlert(N("_common_generic_error"),s.BLW.ERROR)},K=Y.bind(void 0,i.Field.Email),X=Y.bind(void 0,i.Field.Login),j=Y.bind(void 0,i.Field.OtpCode),J=Y.bind(void 0,i.Field.Password),$=Y.bind(void 0,i.Field.SecondaryLogin),Q=Boolean(O.current?.getVaultItemCollections()?.some((e=>e.isShared))),ee=Boolean(T.forceCategorizedSpace)||Q;return a.createElement(a.Fragment,null,a.createElement("div",{className:f.Z.containerBlock},Z&&a.createElement(rt,{url:T.url,hasUrlError:!1,linkedWebsites:T.linkedWebsites,handleMainWebsiteChange:V,handleChanges:A,handleGoToWebsite:()=>tt(T)}),!Z&&a.createElement(d.N,{enabled:Boolean(T.email),disableHover:!0},a.createElement(c.Z,{label:N("webapp_credential_edition_field_email"),placeholder:N("webapp_credential_edition_field_placeholder_no_email"),dataName:"email",readOnly:T.limitedPermissions,value:T.email,onChange:e=>{V(e),U(e)}}),a.createElement(C.m,{data:T.email,onCopy:K})),a.createElement(d.N,{enabled:!Z&&Boolean(T.login),disableHover:!0},a.createElement(c.Z,{label:N("webapp_credential_edition_field_login"),placeholder:N("webapp_credential_edition_field_placeholder_no_login"),dataName:"login",readOnly:T.limitedPermissions,value:T.login,onChange:e=>{V(e),U(e)}}),a.createElement(C.m,{data:T.login,onCopy:X})),G(_.SECONDARY_LOGIN,T.secondaryLogin)&&a.createElement(d.N,{enabled:Boolean(T.secondaryLogin),disableHover:!0},a.createElement(c.Z,{label:N("webapp_credential_edition_field_secondary_login"),placeholder:N("webapp_credential_edition_field_placeholder_no_secondary_login"),dataName:"secondaryLogin",value:T.secondaryLogin,readOnly:T.limitedPermissions,onChange:V}),a.createElement(C.m,{data:T.secondaryLogin,onCopy:$})),a.createElement(d.N,{enabled:!0,disableHover:!0},a.createElement("div",{className:"centeredFieldContainer--hqprAHIrBT"},a.createElement("label",{className:p.Z.label,htmlFor:"password"},a.createElement("span",{className:p.Z.text,title:N(ht)},N(ht))),a.createElement(k,{key:"password",className:"passwordInput--hOFtro6yVO",id:"password",requiresMasterPassword:!Z&&H(),credentialId:T.id,value:T.limitedPermissions?"••••••••••••":T.password,placeholder:N("webapp_credential_edition_field_placeholder_no_password"),hidePasswordTooltipText:N("webapp_credential_edition_field_password_action_hide"),showPasswordTooltipText:N("webapp_credential_edition_field_password_action_show"),disabled:!Z&&T.limitedPermissions,readOnly:!Z&&H(),onFocus:e=>{if(!Z&&H()&&!D.showingPassword){const{currentTarget:t}=e,a=()=>{t?.focus()};n?.openProtectedItemsUnlocker({action:v.P7.Show,itemType:y.R.Password,showNeverAskOption:!0,credentialId:T.id,successCallback:a})}},onChange:e=>V(e.target.value,"password"),onPasswordVisibilityChanged:e=>{R({...D,showingPassword:e}),e&&(async(e,t,n,a)=>{const s=new l.Y(e).getRootDomain(),o=!!n||!!a;t&&((0,m.Kz)(new i.UserRevealVaultItemFieldEvent({field:i.Field.Password,isProtected:o,itemId:t,itemType:i.ItemType.Credential})),(0,m.Kz)(new i.AnonymousRevealVaultItemFieldEvent({field:i.Field.Password,itemType:i.ItemType.Credential,domain:{id:await(0,i.hashDomain)(s),type:i.DomainType.Web}})))})(T.url,T.id,T.autoProtected,D.credentialsGloballyRequireMP)},style:{width:"240px"}})),a.createElement("div",{className:"passwordButtonsActions--sHufzyFHxV"},Z||T.limitedPermissions||!T.password?null:a.createElement(a.Fragment,null,a.createElement(C.m,{itemId:T.id,disabled:void 0===H(),data:T.password,checkProtected:H,onCopy:J}),a.createElement(it,{credential:T})),T.password?null:a.createElement(ce,{handleChangePassword:e=>V(e,"password"),credential:T}))),G(_.OTP_CODE)?a.createElement(Je,{credentialId:T.id,onCopy:j}):null),Z?null:a.createElement(mt,{url:T.url,linkedWebsitesAddedByUser:T.linkedWebsites.addedByUser,dashlaneDefinedLinkedWebsites:n?.dashlaneDefinedLinkedWebsites,hasUrlError:!1,editViewButtonEnabled:!Z&&Boolean(T.url),limitedPermissions:T.limitedPermissions,handleChange:V,handleGoToWebsite:()=>tt(T),onClickAddNewWebsite:n?.onClickAddNewWebsite,onClickLinkedWebsitesCount:n?.onClickLinkedWebsitesCount}),a.createElement("div",{className:f.Z.containerBlock},a.createElement(c.Z,{label:N("webapp_credential_edition_field_name"),placeholder:N("webapp_credential_edition_field_placeholder_no_title"),dataName:"title",value:T.title||(te=T.url,(0,et.capitalize)(new l.Y(te).getRootDomain())),readOnly:T.limitedPermissions,onChange:V}),a.createElement(s.ua7,{content:N("webapp_credential_edition_field_force_categorized",{space:q}),passThrough:!ee},a.createElement("div",null,a.createElement(w.M,{labelSx:w.e,spaceId:null!=(P=T.spaceId)?P:"",isDisabled:ee,onChange:z,defaultSpaceId:null!=(W=D.defaultSpaceId)?W:""}))),a.createElement(Ge,{selectedCategoryId:T.category,spaceId:null!=(S=T.spaceId)?S:"",vaultItemId:T.id,vaultItemTitle:T.title,ref:O,signalEditedValues:t,setHasOpenedDialogs:n?.setHasOpenedDialogs}),a.createElement(c.Z,{label:N("webapp_credential_edition_field_note"),placeholder:N("webapp_credential_edition_field_placeholder_no_note"),dataName:"note",value:T.note,disabled:T.limitedPermissions,onChange:V,multiLine:!0,testId:"credential_edit_note_value"})),a.createElement(Ie,{isNewCredential:!!Z,credentialPreferences:{autoLogin:T.autoLogin,requiresMp:!!T.autoProtected,subDomainOnly:!!T.onlyForThisSubdomain},update:e=>(A({autoLogin:e.autoLogin,autoProtected:e.requiresMp,protectWithMasterPassword:e.requiresMp,onlyForThisSubdomain:e.subDomainOnly}),Promise.resolve()),url:T.url}));var te}));_t.displayName="CredentialForm"},449354:(e,t,n)=>{n.d(t,{d:()=>p}),n(696832);var a,i=n(111768),s=n(5727),l=n(441217),o=n(619733),r=n(313661),d=n(201389);const c="webapp_credential_edition_field_website_action_goto",p=({url:e,hasUrlError:t,editViewButtonEnabled:n,limitedPermissions:p=!1,handleChange:u,handleGoToWebsite:m})=>{const{translate:h}=(0,d.Z)();return(0,s.tZ)(o.N,{enabled:n,disableHover:!0},(0,s.tZ)(r.Z,{label:h("webapp_credential_edition_field_website"),placeholder:h("webapp_credential_edition_field_placeholder_no_url"),dataName:"url",value:e,error:t,readOnly:p,onChange:u}),(0,s.tZ)(l.ua7,{placement:"top",content:h(c)},(0,s.tZ)(i.zx,{mood:"neutral",intensity:"supershy",type:"button",onClick:m,sx:{border:"none",minWidth:"fit-content",padding:"10px"},role:"link","aria-label":h(c)},a||(a=(0,s.tZ)(l.RTC,null)))))}},288330:(e,t,n)=>{n.d(t,{E:()=>l});var a=n(696832),i=n(111768),s=n(201389);const l=({disabled:e=!1,handleOnClickAddLinkedWebsiteButton:t})=>{const{translate:n}=(0,s.Z)();return a.createElement(i.zx,{layout:"iconLeading",icon:"ActionAddOutlined",onClick:t,disabled:e,mood:"neutral",intensity:"supershy"},n("webapp_credential_edition_linked_websites_add_website"))}},38069:(e,t,n)=>{n.d(t,{a:()=>v});var a,i,s=n(696832),l=n(139378),o=n.n(l),r=n(441217),d=n(201389),c=n(313661),p=n(288330),u=n(592233),m=n(164718),h=n(62429),_=n(447725);const b="webapp_credential_linked_websites_action_delete",g="webapp_credential_linked_websites_action_goto",f=({linkedWebsite:e,credentialId:t,onRemoveItem:n})=>{const{translate:l}=(0,d.Z)();return s.createElement(s.Fragment,null,e.trim()?s.createElement(r.ua7,{placement:"top",content:l(g)},s.createElement(r.zxk,{nature:"secondary",type:"button",onClick:(o=e,async()=>{const e=new m.Y(o);(0,h.Kz)(new u.UserOpenExternalVaultItemLinkEvent({domainType:u.DomainType.Web,itemId:t,itemType:u.ItemTypeWithLink.Credential})),(0,h.Kz)(new u.AnonymousOpenExternalVaultItemLinkEvent({itemType:u.ItemTypeWithLink.Credential,domain:{id:await(0,u.hashDomain)(e.getRootDomain()),type:u.DomainType.Web}})),(0,_.Yo)(e.getUrlWithFallbackHttpsProtocol())}),style:{border:"none",minWidth:"fit-content",padding:"10px"},role:"link",name:"hiddenAction","aria-label":l(g),"data-testid":"open_linked_website"},a||(a=s.createElement(r.RTC,null)))):null,n?s.createElement(r.ua7,{placement:"top",content:l(b)},s.createElement(r.zxk,{nature:"secondary",type:"button",onClick:n,style:{border:"none",minWidth:"fit-content",padding:"10px"},name:"hiddenAction","aria-label":l(b)},i||(i=s.createElement(r.XHJ,null)))):null);var o};var w=n(159713);const v=s.memo((({label:e,linkedWebsitesList:t,areItemsLocked:n,credentialId:a,isListEditable:i=!1,isEditing:l=!1,showUrlProtocol:u=!1,updateLinkedWebsitesList:m})=>{const{translate:h}=(0,d.Z)(),_=s.useRef(null),[b,g]=s.useState(!1),[v,y]=s.useState(t.length),[C,k]=s.useState(t.map(((e,t)=>({linkedWebsite:e,id:t})))),Z=e=>{g(!0);const t=v+1;k([...C,{linkedWebsite:"",id:t}]),y(t),e?.preventDefault(),e?.stopPropagation()},x=e=>{const{name:t,value:n}=e.target,a=Number(t),i=C.findIndex((e=>e.id===a));if(-1!==i){const e=o().cloneDeep(C);e[i].linkedWebsite=n,k(e)}},I=e=>{"Enter"===e.key&&(e.preventDefault(),e.stopPropagation(),Z())};return s.useEffect((()=>{l&&Z()}),[]),s.useEffect((()=>{v!==t.length&&_.current?.focus()}),[v]),s.useEffect((()=>{m?.(C.map((({linkedWebsite:e})=>e))),(e=>{e.every((e=>e.linkedWebsite))?g(!1):g(!0)})(C)}),[m,JSON.stringify(C)]),s.createElement("div",{className:w.Z.listContainer},s.createElement("div",{className:w.Z.label},n?s.createElement(r.UnL,{height:12,sx:{paddingTop:"3px"}}):null,e?` ${h(e)}`:null),s.createElement("div",{className:w.Z.addUrlContainer},i?s.createElement("div",{className:w.Z.linkedWebsitesList},C.map((({linkedWebsite:e,id:t})=>s.createElement("div",{className:w.Z.linkedWebsitesRow,key:t},s.createElement(c.Z,{placeholder:h("webapp_credential_linked_websites_new_website_placeholder"),ref:_,onChange:x,onFieldKeyDown:I,value:e,name:t.toString()}),s.createElement(f,{linkedWebsite:e,credentialId:a,onRemoveItem:()=>(e=>{k(C.filter((t=>t.id!==e)))})(t)})))),s.createElement(p.E,{disabled:b,handleOnClickAddLinkedWebsiteButton:Z})):s.createElement("div",{className:w.Z.linkedWebsitesList},C.map((({linkedWebsite:e,id:t})=>s.createElement("div",{className:w.Z.linkedWebsitesRow,key:t},s.createElement("div",{className:w.Z.linkedWebsitesLockedItem},u?e:(e=>{const t=e.match(/^(?:\w+:\/\/)?(.*)$/);return t&&t.length>=2?t[1]:e})(e)),s.createElement(f,{linkedWebsite:e,credentialId:a})))))))}))},83126:(e,t,n)=>{n.d(t,{Z:()=>a});const a={container:"container--Qypu77vxOn",containerMultiLine:"containerMultiLine--ncWYFwQEnR",_field:"_field--KII5X4xmLN",input:"input--Iq10hxAz32 _field--KII5X4xmLN",inputRow:"inputRow--gdD_j5S1R8",textarea:"textarea--VpIWTZemV2 _field--KII5X4xmLN",label:"label--Ww_r49kt_J",text:"text--oXyCzpUMwG",value:"value--aD7nWEqBIq",multiline:"multiline--fdPM1KFHPT"}},159713:(e,t,n)=>{n.d(t,{Z:()=>a});const a={header:"header--GePOOHOBzn",backButton:"backButton--ApWZZ3esh6",listContainer:"listContainer--njknVVuG8n",label:"label--ERiGGqtKHY",linkedWebsitesList:"linkedWebsitesList--ZSuJnbXQxS",linkedWebsitesRow:"linkedWebsitesRow--WfdNXmrkL4",linkedWebsitesEditableItem:"linkedWebsitesEditableItem--Ns6V467EzV",linkedWebsitesLockedItem:"linkedWebsitesLockedItem--RYRFapL_Jw",addUrlContainer:"addUrlContainer--OJSLm0uPSs",linkedWebsitesDetails:"linkedWebsitesDetails--uaFRgv0zeT",addButton:"addButton--z1WN5Nny3_"}},488856:(e,t,n)=>{n.d(t,{Z:()=>a});const a={container:"container--BvfulnQcuP",containerBlock:"containerBlock--lIB_8rMAqf",horizontalContainerBlock:"horizontalContainerBlock--XzyL0HxXte",secondItem:"secondItem--YxYGi1WTY5"}}}]);