"use strict";(globalThis.webpackChunk_dashlane_leeloo=globalThis.webpackChunk_dashlane_leeloo||[]).push([[7906],{335396:(e,t,a)=>{a.d(t,{R:()=>X});var n=a(896259),o=a(453576),s=a(464850),i=a(526645),c=a(51119),u=a(593856),r=a(990373),d=a(788933),l=a(886025),g=a(769569),h=a(707839),m=a(277007),w=a(460384),f=a(247159),L=a(929986),P=a(406218),b=a(611433),v=a(184185),p=a(924942),x=a(815036),k=a(816189),y=a(715403),E=a(845714),j=a(238554),C=a(569029),O=a(592018),R=a(846097),N=a(448430),S=a(573883),T=a(299074),F=a(722499),_=a(191235),A=a(764130),D=a(589193),I=a(351055),q=a(59110),M=a(925930),J=a(57904),K=a(515714),V=a(481030),Y=a(433940),B=a(571669),U=a(885575),z=a(520587),G=a(970493),H=a(918007);const Q="background",X=(0,n.t)(Q,[]).with({module:o.carbonLegacyApi,on:Q}).with({module:s.H,on:Q}).with({module:i.M,on:Q}).with({module:m.S,on:Q}).with({module:w.y,on:Q}).with({module:f.m,on:Q}).with({module:c.d,on:Q}).with({module:l.a,on:Q}).with({module:g.X,on:Q}).with({module:L.V,on:Q}).with({module:P.F,on:Q}).with({module:b.i,on:Q}).with({module:y.c,on:Q}).with({module:E._,on:Q}).with({module:j.V,on:Q}).with({module:C.I,on:Q}).with({module:O.Y,on:Q}).with({module:R.G,on:Q}).with({module:h.t,on:Q}).with({module:H.J,on:Q}).with({module:k.r,on:Q}).with({module:u.f,on:Q}).with({module:N.L,on:Q}).with({module:S.R,on:Q}).with({module:T.v,on:Q}).with({module:F.e,on:Q}).with({module:D.g,on:Q}).with({module:r.J,on:Q}).with({module:d.i,on:Q}).with({module:Y.J,on:Q}).with({module:_.D,on:Q}).with({module:A.j,on:Q}).with({module:z.Yu,on:Q}).with({module:v.Q,on:Q}).with({module:I.L,on:Q}).with({module:q.o,on:Q}).with({module:M.a,on:Q}).with({module:G.cV,on:Q}).with({module:U.B,on:Q}).with({module:p.v,on:Q}).with({module:J.h,on:Q}).with({module:K.t,on:Q}).with({module:V.B,on:Q}).with({module:B.y,on:Q}).with({module:x.Y,on:Q}).define()},148038:(e,t,a)=>{a.d(t,{A0:()=>g,Cc:()=>L,K_:()=>m,ae:()=>n,iD:()=>l,lU:()=>r,qr:()=>w,rq:()=>d,wz:()=>u});var n,o=a(58138),s=a(696832),i=a(71796);!function(e){e.KILLED="killed"}(n||(n={}));const c=s.createContext({addLifecycleEventListener:e=>{},removeLifecycleEventListener:e=>{}}),u=e=>{const[t,a]=s.useState([]),i=s.useCallback((e=>{t.forEach((t=>{t(e)}))}),[t]),{channel:u}=e;return s.useEffect((()=>(u&&u.onDisconnect((()=>i(n.KILLED))),()=>{})),[i,u]),(0,o.jsx)(c.Provider,Object.assign({value:{addLifecycleEventListener:e=>{t.push(e),a(t)},removeLifecycleEventListener:e=>{t.splice(t.findIndex((t=>e===t))),a(t)}}},{children:e.children}))},r=(e,t)=>{const{addLifecycleEventListener:a,removeLifecycleEventListener:n}=s.useContext(c);s.useEffect((()=>(a(e),()=>{n(e)})),[e,a,n,...null!=t?t:[]])};var d,l;function g(e,t){const a=s.useRef(!0);s.useEffect((()=>()=>{a.current=!1}),[]);const[n,o]=s.useState({status:d.Loading}),i=s.useCallback((e=>{a.current&&o({data:e,status:d.Success})}),[]),c=s.useCallback((e=>{a.current&&o({error:e,status:d.Error})}),[]);return s.useEffect((()=>{o({status:d.Loading});const t=null!==(a=e.queryParam)&&void 0!==a?a:null;var a;e.query(t).then(i).catch(c)}),t),n}!function(e){e.Success="success",e.Loading="loading",e.Error="error"}(d||(d={})),function(e){e.Received="received",e.NotReceived="notReceived"}(l||(l={}));const h={status:l.NotReceived};function m(e,t){const a=s.useRef(null),[n,o]=s.useState(h),c=s.useCallback((e=>{o({status:l.Received,data:e})}),[]),u=s.useCallback((()=>{a.current&&a.current(),a.current=null}),[]);return s.useEffect((()=>{return o(h),e?(u(),a.current=e.live.on(void 0===(t=e.liveParam)?i.DEFAULT_PARAM:t,c),u):u;var t}),t),n}function w({queryConfig:e,liveConfig:t},a){const n=g(e,a),o=m(t,a);return o.status===l.NotReceived||n.status!==d.Success?n:Object.assign(Object.assign({},n),{data:o.data})}function f(e,t){switch(t.type){case"firstPageLoaded":return{status:d.Success,data:Object.assign(Object.assign({},e),{items:new Map([[t.firstPageToken,t.firstPage.batch]]),hasNextPage:!!t.firstPage.nextToken,isNextPageLoading:!1})};case"firstPageLoading":return{status:d.Loading};case"nextPageLoading":return e.status!==d.Success?e:Object.assign(Object.assign({},e),{data:Object.assign(Object.assign({},e.data),{isNextPageLoading:!0})});case"nextPageLoaded":return e.status!==d.Success?e:Object.assign(Object.assign({},e),{data:Object.assign(Object.assign({},e.data),{isNextPageLoading:!1,hasNextPage:!!t.nextPage.nextToken,items:new Map([...e.data.items,[t.nextPageToken,t.nextPage.batch]])})});case"pageChanged":return e.status!==d.Success?e:Object.assign(Object.assign({},e),{data:Object.assign(Object.assign({},e.data),{items:new Map([...e.data.items,[t.pageToken,t.pageItems]])})});case"firstPageFetchFailed":case"nextPageFetchFailed":return{status:d.Error,error:t.error}}}const L=({pageEndpoint:e,tokenEndpoint:t,tokenEndpointParam:a,batchLiveEndpoint:n},o)=>{const[i,c]=s.useReducer(f,{status:d.Loading}),u=s.useRef(void 0),r=s.useRef([]),l=s.useCallback((e=>{const t=n.on(e,(t=>{c({type:"pageChanged",pageItems:t,pageToken:e})}));r.current.push(t)}),[n]),g=s.useCallback((()=>{r.current.forEach((e=>e()))}),[]),h=s.useCallback((async()=>{const t=u.current;if(t){c({type:"nextPageLoading"});try{const a=await e(t);u.current=a.nextToken,c({type:"nextPageLoaded",nextPage:a,nextPageToken:t}),l(t)}catch(e){c({type:"nextPageFetchFailed",error:e})}}}),[e,l]),m=s.useCallback((async()=>{c({type:"firstPageLoading"}),u.current=void 0;try{const n=await t(a),o=await e(n);u.current=o.nextToken,c({type:"firstPageLoaded",firstPage:o,firstPageToken:n}),l(n)}catch(e){c({type:"firstPageFetchFailed",error:e})}}),[e,l,t,a]);return s.useEffect((()=>(m(),g)),o),i.status===d.Success?{status:d.Success,data:{hasNextPage:i.data.hasNextPage,isNextPageLoading:i.data.isNextPageLoading,items:Array.from(i.data.items).reduce(((e,[,t])=>e.concat(t)),[]),loadNextPage:()=>{h()}}}:i}}}]);