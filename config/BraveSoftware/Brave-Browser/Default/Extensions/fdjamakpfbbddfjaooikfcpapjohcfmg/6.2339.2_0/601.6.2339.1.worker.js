/*! For license information please see 601.6.2339.1.worker.js.LICENSE.txt */
(self.webpackChunk_dashlane_leeloo=self.webpackChunk_dashlane_leeloo||[]).push([[601],{44015:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseXml=t.atom=t.toXml=t.isKWXMLElement=void 0;var n=r(61465),o=r(42541),i={ROOT:"root",DATAITEM:"KWDataItem",DATACOLLECTION:"KWDataCollection",DATALIST:"KWDataList",SIMPLECHOICE:"KWAnalyzeSimpleChoice",CONDITIONALCHOICE:"KWAnalyzeConditionalChoice",NAMECONDITION:"KWNameCondition"},a=/^-?\d+(\.\d+)?$/i;function s(e){return 0===e.indexOf("__")}function c(e){return e instanceof Object}function u(e){return e instanceof Array}function d(e,t){if(null==e)throw new Error("Undefined input data");if("string"==typeof e)return t(i.DATAITEM).cdata(e);if("boolean"==typeof e||"number"==typeof e)return t(i.DATAITEM).cdata(e.toString());if(u(e)){var r=t(i.DATALIST);return e.forEach((function(e){return d(e,r.ele.bind(r))})),r}if(c(e)&&e.__type__===i.NAMECONDITION)return t(i.NAMECONDITION).cdata(e.__text__);if(c(e)&&function(e){return e.__type__===i.CONDITIONALCHOICE}(e)){var n=t(i.CONDITIONALCHOICE);if(n.att("conditional",e.conditional),n.att("score",e.score),e.lang&&n.att("lang",e.lang),!e.__children__)throw new Error("ConditionalChoice has no chidlren");return e.__children__.forEach((function(e){return d(e,n.ele.bind(n))})),n}if(c(e)&&e.__type__===i.SIMPLECHOICE){var o=t(i.SIMPLECHOICE);for(var a in e)s(a)||o.att(a,e[a]);return o}if(c(e)){var l=t(e.__type__||i.DATACOLLECTION);for(var a in e)s(a)||(null==e[a]&&console.error("Undefined value for key %s",a),d(e[a],l.ele.bind(l)).att("key",a));if(e.__children__&&e.__children__.forEach((function(e){return d(e,l.ele.bind(l))})),e.__attributes__)for(var p in e.__attributes__)Object.prototype.hasOwnProperty.call(e.__attributes__,p)&&l.att(p,e.__attributes__[p]);return l}}function l(e){if(a.test(e)){var t=parseFloat(e);if(isNaN(t))throw new Error("Number format string could not be parsed as float!");return t}switch(e.toLowerCase()){case"true":return!0;case"false":return!1;default:return e}}t.isKWXMLElement=c,t.toXml=function(e,t){try{var r=o.create("root",{version:"1.0",encoding:"UTF-8"}),n=d(e,r.ele.bind(r)),i={pretty:!t||void 0===t.pretty||t.pretty,indent:" ",newline:"\r\n",allowEmpty:!(!t||void 0===t.allowEmpty)&&t.allowEmpty};return(t&&t.omitRoot?n.toString(i):r.end(i)).replace(/[\s\n]+<!\[CDATA\[/g,"<![CDATA[").replace(/\]\]>[\s\n]+/g,"]]>")}catch(e){throw new Error("[kwXml] - toXml: something went wrong.")}},t.atom=l,t.parseXml=function(e,t,r){void 0===r&&(r={fixType:!0});var o=n.parser(!0,{}),a=[],s=!1;o.onerror=function(t){var r=new Error("[kwXml] - parseXml: something went wrong.");e(r,null)},o.onopentag=function(e){if(e.name!==i.ROOT){var t={};a.length||(t.__first__=!0);var r=e.attributes.key;if(r&&"string"==typeof r&&(t.__key__=r,delete e.attributes.key),(e.name!==i.DATACOLLECTION||Object.keys(e.attributes).length>0)&&(t.__type__=e.name),e.name===i.SIMPLECHOICE||e.name===i.CONDITIONALCHOICE)for(var n in e.attributes)if("score"===n)t[n]=parseFloat(e.attributes[n]);else{var o=e.attributes[n];"string"==typeof o&&(t[n]=o)}else Object.keys(e.attributes).length&&(t.__attributes__=e.attributes);e.name!==i.DATAITEM&&e.name!==i.NAMECONDITION?t.__children__=[]:t.__text__="",a.push(t)}},o.oncdata=function(e){if(!a.length)throw new Error("Invalid stack length "+a.length);var t=a[a.length-1];if(!c(t))throw new Error("Invalid top type, expected KWXMLElement: "+t);if(!t||t.__type__!==i.DATAITEM&&t.__type__!==i.NAMECONDITION)throw new Error("Invalid stack top ("+(t?t.__type__:"EMPTY")+")");t.__text__+=e},o.ontext=function(e){if(""!==e&&e.replace(/\s/g,"").length&&a.length){var t=a[a.length-1];if(!c(t))throw new Error("[onText] : Invalid open tag type expecting KWXMLElement");t.__value__=e}},o.onclosetag=function(t){if(t!==i.ROOT){var n=a.pop(),o=null;if(a.length)o=a[a.length-1];else if(c(n)){if(!n.__first__)throw new Error("Invalid first node");delete n.__first__}var d=c(n)&&n.__key__;if(c(n)&&d&&delete n.__key__,c(n)&&n.__type__===i.DATAITEM?n=r.fixType?l(n.__text__):n.__text__:c(n)&&n.__type__===i.DATALIST&&!n.__attributes__&&(n=n.__children__),c(n)&&n.__children__&&!n.__children__.length&&"KWDataList"!==n.__type__&&(n.__type__===i.CONDITIONALCHOICE?console.error("Empty ConditionalChoice"):delete n.__children__),null===o){if(s)throw new Error("Callback was called once already. Document malformed?");e(null,n),s=!0}else if(c(o)&&o.__type__===i.DATALIST){if(d)throw new Error("Item in KWDataList has a key");u(n)||o.__children__.push(n)}else d?o[d]=n:c(o)&&!u(n)&&o.__children__.push(n)}},o.onend=function(){if(0!==a.length)throw new Error("Invalid stack depth");if(!s)throw new Error("Callback was never called")},o.write(t).close()}},57579:(e,t,r)=>{"use strict";var n=r(73656);function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}var i,a,s=r(79171).codes,c=s.ERR_AMBIGUOUS_ARGUMENT,u=s.ERR_INVALID_ARG_TYPE,d=s.ERR_INVALID_ARG_VALUE,l=s.ERR_INVALID_RETURN_VALUE,p=s.ERR_MISSING_ARGS,m=r(2839),g=r(80911).inspect,f=r(80911).types,S=f.isPromise,h=f.isRegExp,y=Object.assign?Object.assign:r(69626).assign,v=Object.is?Object.is:r(42641);function E(){var e=r(38603);i=e.isDeepEqual,a=e.isDeepStrictEqual}new Map;var A=!1,_=e.exports=w,T={};function I(e){if(e.message instanceof Error)throw e.message;throw new m(e)}function b(e,t,r,n){if(!r){var o=!1;if(0===t)o=!0,n="No value argument passed to `assert.ok()`";else if(n instanceof Error)throw n;var i=new m({actual:r,expected:!0,message:n,operator:"==",stackStartFn:e});throw i.generatedMessage=o,i}}function w(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];b.apply(void 0,[w,t.length].concat(t))}_.fail=function e(t,r,o,i,a){var s,c=arguments.length;if(0===c?s="Failed":1===c?(o=t,t=void 0):(!1===A&&(A=!0,(n.emitWarning?n.emitWarning:console.warn.bind(console))("assert.fail() with more than one argument is deprecated. Please use assert.strictEqual() instead or only pass a message.","DeprecationWarning","DEP0094")),2===c&&(i="!=")),o instanceof Error)throw o;var u={actual:t,expected:r,operator:void 0===i?"fail":i,stackStartFn:a||e};void 0!==o&&(u.message=o);var d=new m(u);throw s&&(d.message=s,d.generatedMessage=!0),d},_.AssertionError=m,_.ok=w,_.equal=function e(t,r,n){if(arguments.length<2)throw new p("actual","expected");t!=r&&I({actual:t,expected:r,message:n,operator:"==",stackStartFn:e})},_.notEqual=function e(t,r,n){if(arguments.length<2)throw new p("actual","expected");t==r&&I({actual:t,expected:r,message:n,operator:"!=",stackStartFn:e})},_.deepEqual=function e(t,r,n){if(arguments.length<2)throw new p("actual","expected");void 0===i&&E(),i(t,r)||I({actual:t,expected:r,message:n,operator:"deepEqual",stackStartFn:e})},_.notDeepEqual=function e(t,r,n){if(arguments.length<2)throw new p("actual","expected");void 0===i&&E(),i(t,r)&&I({actual:t,expected:r,message:n,operator:"notDeepEqual",stackStartFn:e})},_.deepStrictEqual=function e(t,r,n){if(arguments.length<2)throw new p("actual","expected");void 0===i&&E(),a(t,r)||I({actual:t,expected:r,message:n,operator:"deepStrictEqual",stackStartFn:e})},_.notDeepStrictEqual=function e(t,r,n){if(arguments.length<2)throw new p("actual","expected");void 0===i&&E(),a(t,r)&&I({actual:t,expected:r,message:n,operator:"notDeepStrictEqual",stackStartFn:e})},_.strictEqual=function e(t,r,n){if(arguments.length<2)throw new p("actual","expected");v(t,r)||I({actual:t,expected:r,message:n,operator:"strictEqual",stackStartFn:e})},_.notStrictEqual=function e(t,r,n){if(arguments.length<2)throw new p("actual","expected");v(t,r)&&I({actual:t,expected:r,message:n,operator:"notStrictEqual",stackStartFn:e})};var C=function e(t,r,n){var o=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),r.forEach((function(e){e in t&&(void 0!==n&&"string"==typeof n[e]&&h(t[e])&&t[e].test(n[e])?o[e]=n[e]:o[e]=t[e])}))};function D(e,t,r,n){if("function"!=typeof t){if(h(t))return t.test(e);if(2===arguments.length)throw new u("expected",["Function","RegExp"],t);if("object"!==o(e)||null===e){var s=new m({actual:e,expected:t,message:r,operator:"deepStrictEqual",stackStartFn:n});throw s.operator=n.name,s}var c=Object.keys(t);if(t instanceof Error)c.push("name","message");else if(0===c.length)throw new d("error",t,"may not be an empty object");return void 0===i&&E(),c.forEach((function(o){"string"==typeof e[o]&&h(t[o])&&t[o].test(e[o])||function(e,t,r,n,o,i){if(!(r in e)||!a(e[r],t[r])){if(!n){var s=new C(e,o),c=new C(t,o,e),u=new m({actual:s,expected:c,operator:"deepStrictEqual",stackStartFn:i});throw u.actual=e,u.expected=t,u.operator=i.name,u}I({actual:e,expected:t,message:n,operator:i.name,stackStartFn:i})}}(e,t,o,r,c,n)})),!0}return void 0!==t.prototype&&e instanceof t||!Error.isPrototypeOf(t)&&!0===t.call({},e)}function O(e){if("function"!=typeof e)throw new u("fn","Function",e);try{e()}catch(e){return e}return T}function P(e){return S(e)||null!==e&&"object"===o(e)&&"function"==typeof e.then&&"function"==typeof e.catch}function N(e){return Promise.resolve().then((function(){var t;if("function"==typeof e){if(!P(t=e()))throw new l("instance of Promise","promiseFn",t)}else{if(!P(e))throw new u("promiseFn",["Function","Promise"],e);t=e}return Promise.resolve().then((function(){return t})).then((function(){return T})).catch((function(e){return e}))}))}function R(e,t,r,n){if("string"==typeof r){if(4===arguments.length)throw new u("error",["Object","Error","Function","RegExp"],r);if("object"===o(t)&&null!==t){if(t.message===r)throw new c("error/message",'The error message "'.concat(t.message,'" is identical to the message.'))}else if(t===r)throw new c("error/message",'The error "'.concat(t,'" is identical to the message.'));n=r,r=void 0}else if(null!=r&&"object"!==o(r)&&"function"!=typeof r)throw new u("error",["Object","Error","Function","RegExp"],r);if(t===T){var i="";r&&r.name&&(i+=" (".concat(r.name,")")),i+=n?": ".concat(n):".";var a="rejects"===e.name?"rejection":"exception";I({actual:void 0,expected:r,operator:e.name,message:"Missing expected ".concat(a).concat(i),stackStartFn:e})}if(r&&!D(t,r,n,e))throw t}function M(e,t,r,n){if(t!==T){if("string"==typeof r&&(n=r,r=void 0),!r||D(t,r)){var o=n?": ".concat(n):".",i="doesNotReject"===e.name?"rejection":"exception";I({actual:t,expected:r,operator:e.name,message:"Got unwanted ".concat(i).concat(o,"\n")+'Actual message: "'.concat(t&&t.message,'"'),stackStartFn:e})}throw t}}function L(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];b.apply(void 0,[L,t.length].concat(t))}_.throws=function e(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];R.apply(void 0,[e,O(t)].concat(n))},_.rejects=function e(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];return N(t).then((function(t){return R.apply(void 0,[e,t].concat(n))}))},_.doesNotThrow=function e(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];M.apply(void 0,[e,O(t)].concat(n))},_.doesNotReject=function e(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];return N(t).then((function(t){return M.apply(void 0,[e,t].concat(n))}))},_.ifError=function e(t){if(null!=t){var r="ifError got unwanted exception: ";"object"===o(t)&&"string"==typeof t.message?0===t.message.length&&t.constructor?r+=t.constructor.name:r+=t.message:r+=g(t);var n=new m({actual:t,expected:null,operator:"ifError",message:r,stackStartFn:e}),i=t.stack;if("string"==typeof i){var a=i.split("\n");a.shift();for(var s=n.stack.split("\n"),c=0;c<a.length;c++){var u=s.indexOf(a[c]);if(-1!==u){s=s.slice(0,u);break}}n.stack="".concat(s.join("\n"),"\n").concat(a.join("\n"))}throw n}},_.strict=y(L,_,{equal:_.strictEqual,deepEqual:_.deepStrictEqual,notEqual:_.notStrictEqual,notDeepEqual:_.notDeepStrictEqual}),_.strict.strict=_.strict},2839:(e,t,r)=>{"use strict";var n=r(73656);function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t){return!t||"object"!==p(t)&&"function"!=typeof t?s(e):t}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e){var t="function"==typeof Map?new Map:void 0;return c=function(e){if(null===e||(r=e,-1===Function.toString.call(r).indexOf("[native code]")))return e;var r;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return u(e,arguments,l(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),d(n,e)},c(e)}function u(e,t,r){return u=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}()?Reflect.construct:function(e,t,r){var n=[null];n.push.apply(n,t);var o=new(Function.bind.apply(e,n));return r&&d(o,r.prototype),o},u.apply(null,arguments)}function d(e,t){return d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},d(e,t)}function l(e){return l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},l(e)}function p(e){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}var m=r(80911).inspect,g=r(79171).codes.ERR_INVALID_ARG_TYPE;function f(e,t,r){return(void 0===r||r>e.length)&&(r=e.length),e.substring(r-t.length,r)===t}var S="",h="",y="",v="",E={deepStrictEqual:"Expected values to be strictly deep-equal:",strictEqual:"Expected values to be strictly equal:",strictEqualObject:'Expected "actual" to be reference-equal to "expected":',deepEqual:"Expected values to be loosely deep-equal:",equal:"Expected values to be loosely equal:",notDeepStrictEqual:'Expected "actual" not to be strictly deep-equal to:',notStrictEqual:'Expected "actual" to be strictly unequal to:',notStrictEqualObject:'Expected "actual" not to be reference-equal to "expected":',notDeepEqual:'Expected "actual" not to be loosely deep-equal to:',notEqual:'Expected "actual" to be loosely unequal to:',notIdentical:"Values identical but not reference-equal:"},A=10;function _(e){var t=Object.keys(e),r=Object.create(Object.getPrototypeOf(e));return t.forEach((function(t){r[t]=e[t]})),Object.defineProperty(r,"message",{value:e.message}),r}function T(e){return m(e,{compact:!1,customInspect:!1,depth:1e3,maxArrayLength:1/0,showHidden:!1,breakLength:1/0,showProxy:!1,sorted:!0,getters:!0})}function I(e,t,r){var o="",i="",a=0,s="",c=!1,u=T(e),d=u.split("\n"),l=T(t).split("\n"),m=0,g="";if("strictEqual"===r&&"object"===p(e)&&"object"===p(t)&&null!==e&&null!==t&&(r="strictEqualObject"),1===d.length&&1===l.length&&d[0]!==l[0]){var _=d[0].length+l[0].length;if(_<=A){if(!("object"===p(e)&&null!==e||"object"===p(t)&&null!==t||0===e&&0===t))return"".concat(E[r],"\n\n")+"".concat(d[0]," !== ").concat(l[0],"\n")}else if("strictEqualObject"!==r&&_<(n.stderr&&n.stderr.isTTY?n.stderr.columns:80)){for(;d[0][m]===l[0][m];)m++;m>2&&(g="\n  ".concat(function(e,t){if(t=Math.floor(t),0==e.length||0==t)return"";var r=e.length*t;for(t=Math.floor(Math.log(t)/Math.log(2));t;)e+=e,t--;return e+e.substring(0,r-e.length)}(" ",m),"^"),m=0)}}for(var I=d[d.length-1],b=l[l.length-1];I===b&&(m++<2?s="\n  ".concat(I).concat(s):o=I,d.pop(),l.pop(),0!==d.length&&0!==l.length);)I=d[d.length-1],b=l[l.length-1];var w=Math.max(d.length,l.length);if(0===w){var C=u.split("\n");if(C.length>30)for(C[26]="".concat(S,"...").concat(v);C.length>27;)C.pop();return"".concat(E.notIdentical,"\n\n").concat(C.join("\n"),"\n")}m>3&&(s="\n".concat(S,"...").concat(v).concat(s),c=!0),""!==o&&(s="\n  ".concat(o).concat(s),o="");var D=0,O=E[r]+"\n".concat(h,"+ actual").concat(v," ").concat(y,"- expected").concat(v),P=" ".concat(S,"...").concat(v," Lines skipped");for(m=0;m<w;m++){var N=m-a;if(d.length<m+1)N>1&&m>2&&(N>4?(i+="\n".concat(S,"...").concat(v),c=!0):N>3&&(i+="\n  ".concat(l[m-2]),D++),i+="\n  ".concat(l[m-1]),D++),a=m,o+="\n".concat(y,"-").concat(v," ").concat(l[m]),D++;else if(l.length<m+1)N>1&&m>2&&(N>4?(i+="\n".concat(S,"...").concat(v),c=!0):N>3&&(i+="\n  ".concat(d[m-2]),D++),i+="\n  ".concat(d[m-1]),D++),a=m,i+="\n".concat(h,"+").concat(v," ").concat(d[m]),D++;else{var R=l[m],M=d[m],L=M!==R&&(!f(M,",")||M.slice(0,-1)!==R);L&&f(R,",")&&R.slice(0,-1)===M&&(L=!1,M+=","),L?(N>1&&m>2&&(N>4?(i+="\n".concat(S,"...").concat(v),c=!0):N>3&&(i+="\n  ".concat(d[m-2]),D++),i+="\n  ".concat(d[m-1]),D++),a=m,i+="\n".concat(h,"+").concat(v," ").concat(M),o+="\n".concat(y,"-").concat(v," ").concat(R),D+=2):(i+=o,o="",1!==N&&0!==m||(i+="\n  ".concat(M),D++))}if(D>20&&m<w-2)return"".concat(O).concat(P,"\n").concat(i,"\n").concat(S,"...").concat(v).concat(o,"\n")+"".concat(S,"...").concat(v)}return"".concat(O).concat(c?P:"","\n").concat(i).concat(o).concat(s).concat(g)}var b=function(e){function t(e){var r;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),"object"!==p(e)||null===e)throw new g("options","Object",e);var o=e.message,i=e.operator,c=e.stackStartFn,u=e.actual,d=e.expected,m=Error.stackTraceLimit;if(Error.stackTraceLimit=0,null!=o)r=a(this,l(t).call(this,String(o)));else if(n.stderr&&n.stderr.isTTY&&(n.stderr&&n.stderr.getColorDepth&&1!==n.stderr.getColorDepth()?(S="[34m",h="[32m",v="[39m",y="[31m"):(S="",h="",v="",y="")),"object"===p(u)&&null!==u&&"object"===p(d)&&null!==d&&"stack"in u&&u instanceof Error&&"stack"in d&&d instanceof Error&&(u=_(u),d=_(d)),"deepStrictEqual"===i||"strictEqual"===i)r=a(this,l(t).call(this,I(u,d,i)));else if("notDeepStrictEqual"===i||"notStrictEqual"===i){var f=E[i],A=T(u).split("\n");if("notStrictEqual"===i&&"object"===p(u)&&null!==u&&(f=E.notStrictEqualObject),A.length>30)for(A[26]="".concat(S,"...").concat(v);A.length>27;)A.pop();r=1===A.length?a(this,l(t).call(this,"".concat(f," ").concat(A[0]))):a(this,l(t).call(this,"".concat(f,"\n\n").concat(A.join("\n"),"\n")))}else{var b=T(u),w="",C=E[i];"notDeepEqual"===i||"notEqual"===i?(b="".concat(E[i],"\n\n").concat(b)).length>1024&&(b="".concat(b.slice(0,1021),"...")):(w="".concat(T(d)),b.length>512&&(b="".concat(b.slice(0,509),"...")),w.length>512&&(w="".concat(w.slice(0,509),"...")),"deepEqual"===i||"equal"===i?b="".concat(C,"\n\n").concat(b,"\n\nshould equal\n\n"):w=" ".concat(i," ").concat(w)),r=a(this,l(t).call(this,"".concat(b).concat(w)))}return Error.stackTraceLimit=m,r.generatedMessage=!o,Object.defineProperty(s(r),"name",{value:"AssertionError [ERR_ASSERTION]",enumerable:!1,writable:!0,configurable:!0}),r.code="ERR_ASSERTION",r.actual=u,r.expected=d,r.operator=i,Error.captureStackTrace&&Error.captureStackTrace(s(r),c),r.stack,r.name="AssertionError",a(r)}var r,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(t,e),r=t,c=[{key:"toString",value:function(){return"".concat(this.name," [").concat(this.code,"]: ").concat(this.message)}},{key:m.custom,value:function(e,t){return m(this,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){o(e,t,r[t])}))}return e}({},t,{customInspect:!1,depth:0}))}}],c&&i(r.prototype,c),t}(c(Error));e.exports=b},79171:(e,t,r)=>{"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function i(e){return i=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},i(e)}function a(e,t){return a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},a(e,t)}var s,c,u={};function d(e,t,r){r||(r=Error);var n=function(r){function n(r,a,s){var c;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),c=o(this,i(n).call(this,function(e,r,n){return"string"==typeof t?t:t(e,r,n)}(r,a,s))),c.code=e,c}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(n,r),n}(r);u[e]=n}function l(e,t){if(Array.isArray(e)){var r=e.length;return e=e.map((function(e){return String(e)})),r>2?"one of ".concat(t," ").concat(e.slice(0,r-1).join(", "),", or ")+e[r-1]:2===r?"one of ".concat(t," ").concat(e[0]," or ").concat(e[1]):"of ".concat(t," ").concat(e[0])}return"of ".concat(t," ").concat(String(e))}d("ERR_AMBIGUOUS_ARGUMENT",'The "%s" argument is ambiguous. %s',TypeError),d("ERR_INVALID_ARG_TYPE",(function(e,t,o){var i,a,c;if(void 0===s&&(s=r(57579)),s("string"==typeof e,"'name' must be a string"),"string"==typeof t&&(a="not ",t.substr(0,a.length)===a)?(i="must not be",t=t.replace(/^not /,"")):i="must be",function(e,t,r){return(void 0===r||r>e.length)&&(r=e.length),e.substring(r-t.length,r)===t}(e," argument"))c="The ".concat(e," ").concat(i," ").concat(l(t,"type"));else{var u=function(e,t,r){return"number"!=typeof r&&(r=0),!(r+".".length>e.length)&&-1!==e.indexOf(".",r)}(e)?"property":"argument";c='The "'.concat(e,'" ').concat(u," ").concat(i," ").concat(l(t,"type"))}return c+". Received type ".concat(n(o))}),TypeError),d("ERR_INVALID_ARG_VALUE",(function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"is invalid";void 0===c&&(c=r(80911));var o=c.inspect(t);return o.length>128&&(o="".concat(o.slice(0,128),"...")),"The argument '".concat(e,"' ").concat(n,". Received ").concat(o)}),TypeError,RangeError),d("ERR_INVALID_RETURN_VALUE",(function(e,t,r){var o;return o=r&&r.constructor&&r.constructor.name?"instance of ".concat(r.constructor.name):"type ".concat(n(r)),"Expected ".concat(e,' to be returned from the "').concat(t,'"')+" function but got ".concat(o,".")}),TypeError),d("ERR_MISSING_ARGS",(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];void 0===s&&(s=r(57579)),s(t.length>0,"At least one arg needs to be specified");var o="The ",i=t.length;switch(t=t.map((function(e){return'"'.concat(e,'"')})),i){case 1:o+="".concat(t[0]," argument");break;case 2:o+="".concat(t[0]," and ").concat(t[1]," arguments");break;default:o+=t.slice(0,i-1).join(", "),o+=", and ".concat(t[i-1]," arguments")}return"".concat(o," must be specified")}),TypeError),e.exports.codes=u},38603:(e,t,r)=>{"use strict";function n(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=[],n=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{n||null==s.return||s.return()}finally{if(o)throw i}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}var i=void 0!==/a/g.flags,a=function(e){var t=[];return e.forEach((function(e){return t.push(e)})),t},s=function(e){var t=[];return e.forEach((function(e,r){return t.push([r,e])})),t},c=Object.is?Object.is:r(42641),u=Object.getOwnPropertySymbols?Object.getOwnPropertySymbols:function(){return[]},d=Number.isNaN?Number.isNaN:r(29736);function l(e){return e.call.bind(e)}var p=l(Object.prototype.hasOwnProperty),m=l(Object.prototype.propertyIsEnumerable),g=l(Object.prototype.toString),f=r(80911).types,S=f.isAnyArrayBuffer,h=f.isArrayBufferView,y=f.isDate,v=f.isMap,E=f.isRegExp,A=f.isSet,_=f.isNativeError,T=f.isBoxedPrimitive,I=f.isNumberObject,b=f.isStringObject,w=f.isBooleanObject,C=f.isBigIntObject,D=f.isSymbolObject,O=f.isFloat32Array,P=f.isFloat64Array;function N(e){if(0===e.length||e.length>10)return!0;for(var t=0;t<e.length;t++){var r=e.charCodeAt(t);if(r<48||r>57)return!0}return 10===e.length&&e>=Math.pow(2,32)}function R(e){return Object.keys(e).filter(N).concat(u(e).filter(Object.prototype.propertyIsEnumerable.bind(e)))}function M(e,t){if(e===t)return 0;for(var r=e.length,n=t.length,o=0,i=Math.min(r,n);o<i;++o)if(e[o]!==t[o]){r=e[o],n=t[o];break}return r<n?-1:n<r?1:0}var L=0,U=1,k=2,F=3;function B(e,t,r,n){if(e===t)return 0!==e||!r||c(e,t);if(r){if("object"!==o(e))return"number"==typeof e&&d(e)&&d(t);if("object"!==o(t)||null===e||null===t)return!1;if(Object.getPrototypeOf(e)!==Object.getPrototypeOf(t))return!1}else{if(null===e||"object"!==o(e))return(null===t||"object"!==o(t))&&e==t;if(null===t||"object"!==o(t))return!1}var a,s,u,l,p=g(e);if(p!==g(t))return!1;if(Array.isArray(e)){if(e.length!==t.length)return!1;var m=R(e),f=R(t);return m.length===f.length&&x(e,t,r,n,U,m)}if("[object Object]"===p&&(!v(e)&&v(t)||!A(e)&&A(t)))return!1;if(y(e)){if(!y(t)||Date.prototype.getTime.call(e)!==Date.prototype.getTime.call(t))return!1}else if(E(e)){if(!E(t)||(u=e,l=t,!(i?u.source===l.source&&u.flags===l.flags:RegExp.prototype.toString.call(u)===RegExp.prototype.toString.call(l))))return!1}else if(_(e)||e instanceof Error){if(e.message!==t.message||e.name!==t.name)return!1}else{if(h(e)){if(r||!O(e)&&!P(e)){if(!function(e,t){return e.byteLength===t.byteLength&&0===M(new Uint8Array(e.buffer,e.byteOffset,e.byteLength),new Uint8Array(t.buffer,t.byteOffset,t.byteLength))}(e,t))return!1}else if(!function(e,t){if(e.byteLength!==t.byteLength)return!1;for(var r=0;r<e.byteLength;r++)if(e[r]!==t[r])return!1;return!0}(e,t))return!1;var N=R(e),B=R(t);return N.length===B.length&&x(e,t,r,n,L,N)}if(A(e))return!(!A(t)||e.size!==t.size)&&x(e,t,r,n,k);if(v(e))return!(!v(t)||e.size!==t.size)&&x(e,t,r,n,F);if(S(e)){if(s=t,(a=e).byteLength!==s.byteLength||0!==M(new Uint8Array(a),new Uint8Array(s)))return!1}else if(T(e)&&!function(e,t){return I(e)?I(t)&&c(Number.prototype.valueOf.call(e),Number.prototype.valueOf.call(t)):b(e)?b(t)&&String.prototype.valueOf.call(e)===String.prototype.valueOf.call(t):w(e)?w(t)&&Boolean.prototype.valueOf.call(e)===Boolean.prototype.valueOf.call(t):C(e)?C(t)&&BigInt.prototype.valueOf.call(e)===BigInt.prototype.valueOf.call(t):D(t)&&Symbol.prototype.valueOf.call(e)===Symbol.prototype.valueOf.call(t)}(e,t))return!1}return x(e,t,r,n,L)}function G(e,t){return t.filter((function(t){return m(e,t)}))}function x(e,t,r,i,c,d){if(5===arguments.length){d=Object.keys(e);var l=Object.keys(t);if(d.length!==l.length)return!1}for(var g=0;g<d.length;g++)if(!p(t,d[g]))return!1;if(r&&5===arguments.length){var f=u(e);if(0!==f.length){var S=0;for(g=0;g<f.length;g++){var h=f[g];if(m(e,h)){if(!m(t,h))return!1;d.push(h),S++}else if(m(t,h))return!1}var y=u(t);if(f.length!==y.length&&G(t,y).length!==S)return!1}else{var v=u(t);if(0!==v.length&&0!==G(t,v).length)return!1}}if(0===d.length&&(c===L||c===U&&0===e.length||0===e.size))return!0;if(void 0===i)i={val1:new Map,val2:new Map,position:0};else{var E=i.val1.get(e);if(void 0!==E){var A=i.val2.get(t);if(void 0!==A)return E===A}i.position++}i.val1.set(e,i.position),i.val2.set(t,i.position);var _=function(e,t,r,i,c,u){var d=0;if(u===k){if(!function(e,t,r,n){for(var i=null,s=a(e),c=0;c<s.length;c++){var u=s[c];if("object"===o(u)&&null!==u)null===i&&(i=new Set),i.add(u);else if(!t.has(u)){if(r)return!1;if(!K(e,t,u))return!1;null===i&&(i=new Set),i.add(u)}}if(null!==i){for(var d=a(t),l=0;l<d.length;l++){var p=d[l];if("object"===o(p)&&null!==p){if(!$(i,p,r,n))return!1}else if(!r&&!e.has(p)&&!$(i,p,r,n))return!1}return 0===i.size}return!0}(e,t,r,c))return!1}else if(u===F){if(!function(e,t,r,i){for(var a=null,c=s(e),u=0;u<c.length;u++){var d=n(c[u],2),l=d[0],p=d[1];if("object"===o(l)&&null!==l)null===a&&(a=new Set),a.add(l);else{var m=t.get(l);if(void 0===m&&!t.has(l)||!B(p,m,r,i)){if(r)return!1;if(!V(e,t,l,p,i))return!1;null===a&&(a=new Set),a.add(l)}}}if(null!==a){for(var g=s(t),f=0;f<g.length;f++){var S=n(g[f],2),h=(l=S[0],S[1]);if("object"===o(l)&&null!==l){if(!H(a,e,l,h,r,i))return!1}else if(!(r||e.has(l)&&B(e.get(l),h,!1,i)||H(a,e,l,h,!1,i)))return!1}return 0===a.size}return!0}(e,t,r,c))return!1}else if(u===U)for(;d<e.length;d++){if(!p(e,d)){if(p(t,d))return!1;for(var l=Object.keys(e);d<l.length;d++){var m=l[d];if(!p(t,m)||!B(e[m],t[m],r,c))return!1}return l.length===Object.keys(t).length}if(!p(t,d)||!B(e[d],t[d],r,c))return!1}for(d=0;d<i.length;d++){var g=i[d];if(!B(e[g],t[g],r,c))return!1}return!0}(e,t,r,d,i,c);return i.val1.delete(e),i.val2.delete(t),_}function $(e,t,r,n){for(var o=a(e),i=0;i<o.length;i++){var s=o[i];if(B(t,s,r,n))return e.delete(s),!0}return!1}function j(e){switch(o(e)){case"undefined":return null;case"object":return;case"symbol":return!1;case"string":e=+e;case"number":if(d(e))return!1}return!0}function K(e,t,r){var n=j(r);return null!=n?n:t.has(n)&&!e.has(n)}function V(e,t,r,n,o){var i=j(r);if(null!=i)return i;var a=t.get(i);return!(void 0===a&&!t.has(i)||!B(n,a,!1,o))&&!e.has(i)&&B(n,a,!1,o)}function H(e,t,r,n,o,i){for(var s=a(e),c=0;c<s.length;c++){var u=s[c];if(B(r,u,o,i)&&B(n,t.get(u),o,i))return e.delete(u),!0}return!1}e.exports={isDeepEqual:function(e,t){return B(e,t,false)},isDeepStrictEqual:function(e,t){return B(e,t,true)}}},93513:function(e,t,r){var n;e=r.nmd(e),function(o){var i=(e&&e.exports,"object"==typeof r.g&&r.g);i.global!==i&&i.window;var a=function(e){this.message=e};(a.prototype=new Error).name="InvalidCharacterError";var s=function(e){throw new a(e)},c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",u=/[\t\n\f\r ]/g,d={encode:function(e){e=String(e),/[^\0-\xFF]/.test(e)&&s("The string to be encoded contains characters outside of the Latin1 range.");for(var t,r,n,o,i=e.length%3,a="",u=-1,d=e.length-i;++u<d;)t=e.charCodeAt(u)<<16,r=e.charCodeAt(++u)<<8,n=e.charCodeAt(++u),a+=c.charAt((o=t+r+n)>>18&63)+c.charAt(o>>12&63)+c.charAt(o>>6&63)+c.charAt(63&o);return 2==i?(t=e.charCodeAt(u)<<8,r=e.charCodeAt(++u),a+=c.charAt((o=t+r)>>10)+c.charAt(o>>4&63)+c.charAt(o<<2&63)+"="):1==i&&(o=e.charCodeAt(u),a+=c.charAt(o>>2)+c.charAt(o<<4&63)+"=="),a},decode:function(e){var t=(e=String(e).replace(u,"")).length;t%4==0&&(t=(e=e.replace(/==?$/,"")).length),(t%4==1||/[^+a-zA-Z0-9/]/.test(e))&&s("Invalid character: the string to be decoded is not correctly encoded.");for(var r,n,o=0,i="",a=-1;++a<t;)n=c.indexOf(e.charAt(a)),r=o%4?64*r+n:n,o++%4&&(i+=String.fromCharCode(255&r>>(-2*o&6)));return i},version:"0.1.0"};void 0===(n=function(){return d}.call(t,r,t,e))||(e.exports=n)}()},40229:(e,t,r)=>{"use strict";var n=r(15313).Buffer,o=r(73656),i=r(57579),a=r(24104),s=r(63172),c=r(86919),u=r(6857);for(var d in u)t[d]=u[d];function l(e){if("number"!=typeof e||e<t.DEFLATE||e>t.UNZIP)throw new TypeError("Bad argument");this.dictionary=null,this.err=0,this.flush=0,this.init_done=!1,this.level=0,this.memLevel=0,this.mode=e,this.strategy=0,this.windowBits=0,this.write_in_progress=!1,this.pending_close=!1,this.gzip_id_bytes_read=0}t.NONE=0,t.DEFLATE=1,t.INFLATE=2,t.GZIP=3,t.GUNZIP=4,t.DEFLATERAW=5,t.INFLATERAW=6,t.UNZIP=7,l.prototype.close=function(){this.write_in_progress?this.pending_close=!0:(this.pending_close=!1,i(this.init_done,"close before init"),i(this.mode<=t.UNZIP),this.mode===t.DEFLATE||this.mode===t.GZIP||this.mode===t.DEFLATERAW?s.deflateEnd(this.strm):this.mode!==t.INFLATE&&this.mode!==t.GUNZIP&&this.mode!==t.INFLATERAW&&this.mode!==t.UNZIP||c.inflateEnd(this.strm),this.mode=t.NONE,this.dictionary=null)},l.prototype.write=function(e,t,r,n,o,i,a){return this._write(!0,e,t,r,n,o,i,a)},l.prototype.writeSync=function(e,t,r,n,o,i,a){return this._write(!1,e,t,r,n,o,i,a)},l.prototype._write=function(e,r,a,s,c,u,d,l){if(i.equal(arguments.length,8),i(this.init_done,"write before init"),i(this.mode!==t.NONE,"already finalized"),i.equal(!1,this.write_in_progress,"write already in progress"),i.equal(!1,this.pending_close,"close is pending"),this.write_in_progress=!0,i.equal(!1,void 0===r,"must provide flush value"),this.write_in_progress=!0,r!==t.Z_NO_FLUSH&&r!==t.Z_PARTIAL_FLUSH&&r!==t.Z_SYNC_FLUSH&&r!==t.Z_FULL_FLUSH&&r!==t.Z_FINISH&&r!==t.Z_BLOCK)throw new Error("Invalid flush value");if(null==a&&(a=n.alloc(0),c=0,s=0),this.strm.avail_in=c,this.strm.input=a,this.strm.next_in=s,this.strm.avail_out=l,this.strm.output=u,this.strm.next_out=d,this.flush=r,!e)return this._process(),this._checkError()?this._afterSync():void 0;var p=this;return o.nextTick((function(){p._process(),p._after()})),this},l.prototype._afterSync=function(){var e=this.strm.avail_out,t=this.strm.avail_in;return this.write_in_progress=!1,[t,e]},l.prototype._process=function(){var e=null;switch(this.mode){case t.DEFLATE:case t.GZIP:case t.DEFLATERAW:this.err=s.deflate(this.strm,this.flush);break;case t.UNZIP:switch(this.strm.avail_in>0&&(e=this.strm.next_in),this.gzip_id_bytes_read){case 0:if(null===e)break;if(31!==this.strm.input[e]){this.mode=t.INFLATE;break}if(this.gzip_id_bytes_read=1,e++,1===this.strm.avail_in)break;case 1:if(null===e)break;139===this.strm.input[e]?(this.gzip_id_bytes_read=2,this.mode=t.GUNZIP):this.mode=t.INFLATE;break;default:throw new Error("invalid number of gzip magic number bytes read")}case t.INFLATE:case t.GUNZIP:case t.INFLATERAW:for(this.err=c.inflate(this.strm,this.flush),this.err===t.Z_NEED_DICT&&this.dictionary&&(this.err=c.inflateSetDictionary(this.strm,this.dictionary),this.err===t.Z_OK?this.err=c.inflate(this.strm,this.flush):this.err===t.Z_DATA_ERROR&&(this.err=t.Z_NEED_DICT));this.strm.avail_in>0&&this.mode===t.GUNZIP&&this.err===t.Z_STREAM_END&&0!==this.strm.next_in[0];)this.reset(),this.err=c.inflate(this.strm,this.flush);break;default:throw new Error("Unknown mode "+this.mode)}},l.prototype._checkError=function(){switch(this.err){case t.Z_OK:case t.Z_BUF_ERROR:if(0!==this.strm.avail_out&&this.flush===t.Z_FINISH)return this._error("unexpected end of file"),!1;break;case t.Z_STREAM_END:break;case t.Z_NEED_DICT:return null==this.dictionary?this._error("Missing dictionary"):this._error("Bad dictionary"),!1;default:return this._error("Zlib error"),!1}return!0},l.prototype._after=function(){if(this._checkError()){var e=this.strm.avail_out,t=this.strm.avail_in;this.write_in_progress=!1,this.callback(t,e),this.pending_close&&this.close()}},l.prototype._error=function(e){this.strm.msg&&(e=this.strm.msg),this.onerror(e,this.err),this.write_in_progress=!1,this.pending_close&&this.close()},l.prototype.init=function(e,r,n,o,a){i(4===arguments.length||5===arguments.length,"init(windowBits, level, memLevel, strategy, [dictionary])"),i(e>=8&&e<=15,"invalid windowBits"),i(r>=-1&&r<=9,"invalid compression level"),i(n>=1&&n<=9,"invalid memlevel"),i(o===t.Z_FILTERED||o===t.Z_HUFFMAN_ONLY||o===t.Z_RLE||o===t.Z_FIXED||o===t.Z_DEFAULT_STRATEGY,"invalid strategy"),this._init(r,e,n,o,a),this._setDictionary()},l.prototype.params=function(){throw new Error("deflateParams Not supported")},l.prototype.reset=function(){this._reset(),this._setDictionary()},l.prototype._init=function(e,r,n,o,i){switch(this.level=e,this.windowBits=r,this.memLevel=n,this.strategy=o,this.flush=t.Z_NO_FLUSH,this.err=t.Z_OK,this.mode!==t.GZIP&&this.mode!==t.GUNZIP||(this.windowBits+=16),this.mode===t.UNZIP&&(this.windowBits+=32),this.mode!==t.DEFLATERAW&&this.mode!==t.INFLATERAW||(this.windowBits=-1*this.windowBits),this.strm=new a,this.mode){case t.DEFLATE:case t.GZIP:case t.DEFLATERAW:this.err=s.deflateInit2(this.strm,this.level,t.Z_DEFLATED,this.windowBits,this.memLevel,this.strategy);break;case t.INFLATE:case t.GUNZIP:case t.INFLATERAW:case t.UNZIP:this.err=c.inflateInit2(this.strm,this.windowBits);break;default:throw new Error("Unknown mode "+this.mode)}this.err!==t.Z_OK&&this._error("Init error"),this.dictionary=i,this.write_in_progress=!1,this.init_done=!0},l.prototype._setDictionary=function(){if(null!=this.dictionary){switch(this.err=t.Z_OK,this.mode){case t.DEFLATE:case t.DEFLATERAW:this.err=s.deflateSetDictionary(this.strm,this.dictionary)}this.err!==t.Z_OK&&this._error("Failed to set dictionary")}},l.prototype._reset=function(){switch(this.err=t.Z_OK,this.mode){case t.DEFLATE:case t.DEFLATERAW:case t.GZIP:this.err=s.deflateReset(this.strm);break;case t.INFLATE:case t.INFLATERAW:case t.GUNZIP:this.err=c.inflateReset(this.strm)}this.err!==t.Z_OK&&this._error("Failed to reset stream")},t.Zlib=l},62802:(e,t,r)=>{"use strict";var n=r(73656),o=r(15313).Buffer,i=r(96704).Transform,a=r(40229),s=r(80911),c=r(57579).ok,u=r(15313).kMaxLength,d="Cannot create final Buffer. It would be larger than 0x"+u.toString(16)+" bytes";a.Z_MIN_WINDOWBITS=8,a.Z_MAX_WINDOWBITS=15,a.Z_DEFAULT_WINDOWBITS=15,a.Z_MIN_CHUNK=64,a.Z_MAX_CHUNK=1/0,a.Z_DEFAULT_CHUNK=16384,a.Z_MIN_MEMLEVEL=1,a.Z_MAX_MEMLEVEL=9,a.Z_DEFAULT_MEMLEVEL=8,a.Z_MIN_LEVEL=-1,a.Z_MAX_LEVEL=9,a.Z_DEFAULT_LEVEL=a.Z_DEFAULT_COMPRESSION;for(var l=Object.keys(a),p=0;p<l.length;p++){var m=l[p];m.match(/^Z/)&&Object.defineProperty(t,m,{enumerable:!0,value:a[m],writable:!1})}for(var g={Z_OK:a.Z_OK,Z_STREAM_END:a.Z_STREAM_END,Z_NEED_DICT:a.Z_NEED_DICT,Z_ERRNO:a.Z_ERRNO,Z_STREAM_ERROR:a.Z_STREAM_ERROR,Z_DATA_ERROR:a.Z_DATA_ERROR,Z_MEM_ERROR:a.Z_MEM_ERROR,Z_BUF_ERROR:a.Z_BUF_ERROR,Z_VERSION_ERROR:a.Z_VERSION_ERROR},f=Object.keys(g),S=0;S<f.length;S++){var h=f[S];g[g[h]]=h}function y(e,t,r){var n=[],i=0;function a(){for(var t;null!==(t=e.read());)n.push(t),i+=t.length;e.once("readable",a)}function s(){var t,a=null;i>=u?a=new RangeError(d):t=o.concat(n,i),n=[],e.close(),r(a,t)}e.on("error",(function(t){e.removeListener("end",s),e.removeListener("readable",a),r(t)})),e.on("end",s),e.end(t),a()}function v(e,t){if("string"==typeof t&&(t=o.from(t)),!o.isBuffer(t))throw new TypeError("Not a string or buffer");var r=e._finishFlushFlag;return e._processChunk(t,r)}function E(e){if(!(this instanceof E))return new E(e);D.call(this,e,a.DEFLATE)}function A(e){if(!(this instanceof A))return new A(e);D.call(this,e,a.INFLATE)}function _(e){if(!(this instanceof _))return new _(e);D.call(this,e,a.GZIP)}function T(e){if(!(this instanceof T))return new T(e);D.call(this,e,a.GUNZIP)}function I(e){if(!(this instanceof I))return new I(e);D.call(this,e,a.DEFLATERAW)}function b(e){if(!(this instanceof b))return new b(e);D.call(this,e,a.INFLATERAW)}function w(e){if(!(this instanceof w))return new w(e);D.call(this,e,a.UNZIP)}function C(e){return e===a.Z_NO_FLUSH||e===a.Z_PARTIAL_FLUSH||e===a.Z_SYNC_FLUSH||e===a.Z_FULL_FLUSH||e===a.Z_FINISH||e===a.Z_BLOCK}function D(e,r){var n=this;if(this._opts=e=e||{},this._chunkSize=e.chunkSize||t.Z_DEFAULT_CHUNK,i.call(this,e),e.flush&&!C(e.flush))throw new Error("Invalid flush flag: "+e.flush);if(e.finishFlush&&!C(e.finishFlush))throw new Error("Invalid flush flag: "+e.finishFlush);if(this._flushFlag=e.flush||a.Z_NO_FLUSH,this._finishFlushFlag=void 0!==e.finishFlush?e.finishFlush:a.Z_FINISH,e.chunkSize&&(e.chunkSize<t.Z_MIN_CHUNK||e.chunkSize>t.Z_MAX_CHUNK))throw new Error("Invalid chunk size: "+e.chunkSize);if(e.windowBits&&(e.windowBits<t.Z_MIN_WINDOWBITS||e.windowBits>t.Z_MAX_WINDOWBITS))throw new Error("Invalid windowBits: "+e.windowBits);if(e.level&&(e.level<t.Z_MIN_LEVEL||e.level>t.Z_MAX_LEVEL))throw new Error("Invalid compression level: "+e.level);if(e.memLevel&&(e.memLevel<t.Z_MIN_MEMLEVEL||e.memLevel>t.Z_MAX_MEMLEVEL))throw new Error("Invalid memLevel: "+e.memLevel);if(e.strategy&&e.strategy!=t.Z_FILTERED&&e.strategy!=t.Z_HUFFMAN_ONLY&&e.strategy!=t.Z_RLE&&e.strategy!=t.Z_FIXED&&e.strategy!=t.Z_DEFAULT_STRATEGY)throw new Error("Invalid strategy: "+e.strategy);if(e.dictionary&&!o.isBuffer(e.dictionary))throw new Error("Invalid dictionary: it should be a Buffer instance");this._handle=new a.Zlib(r);var s=this;this._hadError=!1,this._handle.onerror=function(e,r){O(s),s._hadError=!0;var n=new Error(e);n.errno=r,n.code=t.codes[r],s.emit("error",n)};var c=t.Z_DEFAULT_COMPRESSION;"number"==typeof e.level&&(c=e.level);var u=t.Z_DEFAULT_STRATEGY;"number"==typeof e.strategy&&(u=e.strategy),this._handle.init(e.windowBits||t.Z_DEFAULT_WINDOWBITS,c,e.memLevel||t.Z_DEFAULT_MEMLEVEL,u,e.dictionary),this._buffer=o.allocUnsafe(this._chunkSize),this._offset=0,this._level=c,this._strategy=u,this.once("end",this.close),Object.defineProperty(this,"_closed",{get:function(){return!n._handle},configurable:!0,enumerable:!0})}function O(e,t){t&&n.nextTick(t),e._handle&&(e._handle.close(),e._handle=null)}function P(e){e.emit("close")}Object.defineProperty(t,"codes",{enumerable:!0,value:Object.freeze(g),writable:!1}),t.Deflate=E,t.Inflate=A,t.Gzip=_,t.Gunzip=T,t.DeflateRaw=I,t.InflateRaw=b,t.Unzip=w,t.createDeflate=function(e){return new E(e)},t.createInflate=function(e){return new A(e)},t.createDeflateRaw=function(e){return new I(e)},t.createInflateRaw=function(e){return new b(e)},t.createGzip=function(e){return new _(e)},t.createGunzip=function(e){return new T(e)},t.createUnzip=function(e){return new w(e)},t.deflate=function(e,t,r){return"function"==typeof t&&(r=t,t={}),y(new E(t),e,r)},t.deflateSync=function(e,t){return v(new E(t),e)},t.gzip=function(e,t,r){return"function"==typeof t&&(r=t,t={}),y(new _(t),e,r)},t.gzipSync=function(e,t){return v(new _(t),e)},t.deflateRaw=function(e,t,r){return"function"==typeof t&&(r=t,t={}),y(new I(t),e,r)},t.deflateRawSync=function(e,t){return v(new I(t),e)},t.unzip=function(e,t,r){return"function"==typeof t&&(r=t,t={}),y(new w(t),e,r)},t.unzipSync=function(e,t){return v(new w(t),e)},t.inflate=function(e,t,r){return"function"==typeof t&&(r=t,t={}),y(new A(t),e,r)},t.inflateSync=function(e,t){return v(new A(t),e)},t.gunzip=function(e,t,r){return"function"==typeof t&&(r=t,t={}),y(new T(t),e,r)},t.gunzipSync=function(e,t){return v(new T(t),e)},t.inflateRaw=function(e,t,r){return"function"==typeof t&&(r=t,t={}),y(new b(t),e,r)},t.inflateRawSync=function(e,t){return v(new b(t),e)},s.inherits(D,i),D.prototype.params=function(e,r,o){if(e<t.Z_MIN_LEVEL||e>t.Z_MAX_LEVEL)throw new RangeError("Invalid compression level: "+e);if(r!=t.Z_FILTERED&&r!=t.Z_HUFFMAN_ONLY&&r!=t.Z_RLE&&r!=t.Z_FIXED&&r!=t.Z_DEFAULT_STRATEGY)throw new TypeError("Invalid strategy: "+r);if(this._level!==e||this._strategy!==r){var i=this;this.flush(a.Z_SYNC_FLUSH,(function(){c(i._handle,"zlib binding closed"),i._handle.params(e,r),i._hadError||(i._level=e,i._strategy=r,o&&o())}))}else n.nextTick(o)},D.prototype.reset=function(){return c(this._handle,"zlib binding closed"),this._handle.reset()},D.prototype._flush=function(e){this._transform(o.alloc(0),"",e)},D.prototype.flush=function(e,t){var r=this,i=this._writableState;("function"==typeof e||void 0===e&&!t)&&(t=e,e=a.Z_FULL_FLUSH),i.ended?t&&n.nextTick(t):i.ending?t&&this.once("end",t):i.needDrain?t&&this.once("drain",(function(){return r.flush(e,t)})):(this._flushFlag=e,this.write(o.alloc(0),"",t))},D.prototype.close=function(e){O(this,e),n.nextTick(P,this)},D.prototype._transform=function(e,t,r){var n,i=this._writableState,s=(i.ending||i.ended)&&(!e||i.length===e.length);return null===e||o.isBuffer(e)?this._handle?(s?n=this._finishFlushFlag:(n=this._flushFlag,e.length>=i.length&&(this._flushFlag=this._opts.flush||a.Z_NO_FLUSH)),void this._processChunk(e,n,r)):r(new Error("zlib binding closed")):r(new Error("invalid input"))},D.prototype._processChunk=function(e,t,r){var n=e&&e.length,i=this._chunkSize-this._offset,a=0,s=this,l="function"==typeof r;if(!l){var p,m=[],g=0;this.on("error",(function(e){p=e})),c(this._handle,"zlib binding closed");do{var f=this._handle.writeSync(t,e,a,n,this._buffer,this._offset,i)}while(!this._hadError&&y(f[0],f[1]));if(this._hadError)throw p;if(g>=u)throw O(this),new RangeError(d);var S=o.concat(m,g);return O(this),S}c(this._handle,"zlib binding closed");var h=this._handle.write(t,e,a,n,this._buffer,this._offset,i);function y(u,d){if(this&&(this.buffer=null,this.callback=null),!s._hadError){var p=i-d;if(c(p>=0,"have should not go down"),p>0){var f=s._buffer.slice(s._offset,s._offset+p);s._offset+=p,l?s.push(f):(m.push(f),g+=f.length)}if((0===d||s._offset>=s._chunkSize)&&(i=s._chunkSize,s._offset=0,s._buffer=o.allocUnsafe(s._chunkSize)),0===d){if(a+=n-u,n=u,!l)return!0;var S=s._handle.write(t,e,a,n,s._buffer,s._offset,s._chunkSize);return S.callback=y,void(S.buffer=e)}if(!l)return!1;r()}}h.buffer=e,h.callback=y},s.inherits(E,D),s.inherits(A,D),s.inherits(_,D),s.inherits(T,D),s.inherits(I,D),s.inherits(b,D),s.inherits(w,D)},77672:(e,t,r)=>{"use strict";r.r(t),r.d(t,{add:()=>c,addBusinessDays:()=>p,addDays:()=>a,addHours:()=>f,addISOWeekYears:()=>_,addMilliseconds:()=>m.Z,addMinutes:()=>I,addMonths:()=>s,addQuarters:()=>b,addSeconds:()=>w,addWeeks:()=>C,addYears:()=>D,areIntervalsOverlapping:()=>O,clamp:()=>R,closestIndexTo:()=>M,closestTo:()=>L,compareAsc:()=>U,compareDesc:()=>k,daysInWeek:()=>F,daysToWeeks:()=>Y,differenceInBusinessDays:()=>J,differenceInCalendarDays:()=>E.Z,differenceInCalendarISOWeekYears:()=>ee,differenceInCalendarISOWeeks:()=>ne,differenceInCalendarMonths:()=>oe,differenceInCalendarQuarters:()=>ae,differenceInCalendarWeeks:()=>ce,differenceInCalendarYears:()=>ue,differenceInDays:()=>le,differenceInHours:()=>Se,differenceInISOWeekYears:()=>ye,differenceInMilliseconds:()=>pe,differenceInMinutes:()=>ve,differenceInMonths:()=>Te,differenceInQuarters:()=>Ie,differenceInSeconds:()=>be,differenceInWeeks:()=>we,differenceInYears:()=>Ce,eachDayOfInterval:()=>De,eachHourOfInterval:()=>Oe,eachMinuteOfInterval:()=>Ne,eachMonthOfInterval:()=>Re,eachQuarterOfInterval:()=>Le,eachWeekOfInterval:()=>Ue,eachWeekendOfInterval:()=>ke,eachWeekendOfMonth:()=>Be,eachWeekendOfYear:()=>$e,eachYearOfInterval:()=>je,endOfDay:()=>Ee,endOfDecade:()=>Ke,endOfHour:()=>Ve,endOfISOWeek:()=>We,endOfISOWeekYear:()=>ze,endOfMinute:()=>qe,endOfMonth:()=>Ae,endOfQuarter:()=>Ye,endOfSecond:()=>Ze,endOfToday:()=>Qe,endOfTomorrow:()=>Xe,endOfWeek:()=>He,endOfYear:()=>xe,endOfYesterday:()=>Je,format:()=>et.Z,formatDistance:()=>ct,formatDistanceStrict:()=>mt,formatDistanceToNow:()=>gt,formatDistanceToNowStrict:()=>ft,formatDuration:()=>ht,formatISO:()=>vt,formatISO9075:()=>Et,formatISODuration:()=>At,formatRFC3339:()=>_t,formatRFC7231:()=>bt,formatRelative:()=>Ct,fromUnixTime:()=>Dt.Z,getDate:()=>Ot,getDay:()=>Pt,getDayOfYear:()=>Nt,getDaysInMonth:()=>Rt,getDaysInYear:()=>Lt,getDecade:()=>Ut,getHours:()=>kt,getISODay:()=>Ft,getISOWeek:()=>Gt,getISOWeekYear:()=>y,getISOWeeksInYear:()=>$t,getMilliseconds:()=>jt,getMinutes:()=>Kt,getMonth:()=>Vt,getOverlappingDaysInIntervals:()=>Wt,getQuarter:()=>ie,getSeconds:()=>zt,getTime:()=>qt,getUnixTime:()=>Yt,getWeek:()=>Jt,getWeekOfMonth:()=>er,getWeekYear:()=>Zt,getWeeksInMonth:()=>rr,getYear:()=>nr,hoursToMilliseconds:()=>or,hoursToMinutes:()=>ir,hoursToSeconds:()=>ar,intervalToDuration:()=>dr,intlFormat:()=>lr,isAfter:()=>pr,isBefore:()=>mr,isDate:()=>gr.Z,isEqual:()=>fr,isExists:()=>Sr,isFirstDayOfMonth:()=>hr,isFriday:()=>yr,isFuture:()=>vr,isLastDayOfMonth:()=>_e,isLeapYear:()=>Mt,isMatch:()=>Ar,isMonday:()=>_r,isPast:()=>Tr,isSameDay:()=>X,isSameHour:()=>br,isSameISOWeek:()=>Cr,isSameISOWeekYear:()=>Dr,isSameMinute:()=>Or,isSameMonth:()=>Pr,isSameQuarter:()=>Nr,isSameSecond:()=>Mr,isSameWeek:()=>wr,isSameYear:()=>Lr,isSaturday:()=>l,isSunday:()=>d,isThisHour:()=>Ur,isThisISOWeek:()=>kr,isThisMinute:()=>Fr,isThisMonth:()=>Br,isThisQuarter:()=>Gr,isThisSecond:()=>xr,isThisWeek:()=>$r,isThisYear:()=>jr,isThursday:()=>Kr,isToday:()=>Vr,isTomorrow:()=>Hr,isTuesday:()=>Wr,isValid:()=>Z.Z,isWednesday:()=>zr,isWeekend:()=>u,isWithinInterval:()=>qr,isYesterday:()=>Yr,lastDayOfDecade:()=>Zr,lastDayOfISOWeek:()=>Xr,lastDayOfISOWeekYear:()=>Jr,lastDayOfMonth:()=>tr,lastDayOfQuarter:()=>en,lastDayOfWeek:()=>Qr,lastDayOfYear:()=>tn,lightFormat:()=>cn,max:()=>P,maxTime:()=>B,milliseconds:()=>dn,millisecondsInHour:()=>x,millisecondsInMinute:()=>G,millisecondsInSecond:()=>$,millisecondsToHours:()=>ln,millisecondsToMinutes:()=>pn,millisecondsToSeconds:()=>mn,min:()=>N,minTime:()=>j,minutesInHour:()=>K,minutesToHours:()=>gn,minutesToMilliseconds:()=>fn,minutesToSeconds:()=>Sn,monthsInQuarter:()=>V,monthsInYear:()=>H,monthsToQuarters:()=>hn,monthsToYears:()=>yn,nextDay:()=>vn,nextFriday:()=>En,nextMonday:()=>An,nextSaturday:()=>_n,nextSunday:()=>Tn,nextThursday:()=>In,nextTuesday:()=>bn,nextWednesday:()=>wn,parse:()=>Er.Z,parseISO:()=>Ln,parseJSON:()=>Gn,previousDay:()=>xn,previousFriday:()=>$n,previousMonday:()=>jn,previousSaturday:()=>Kn,previousSunday:()=>Vn,previousThursday:()=>Hn,previousTuesday:()=>Wn,previousWednesday:()=>zn,quartersInYear:()=>W,quartersToMonths:()=>qn,quartersToYears:()=>Yn,roundToNearestMinutes:()=>Zn,secondsInHour:()=>z,secondsInMinute:()=>q,secondsToHours:()=>Qn,secondsToMilliseconds:()=>Xn,secondsToMinutes:()=>Jn,set:()=>to,setDate:()=>ro,setDay:()=>no,setDayOfYear:()=>oo,setHours:()=>io,setISODay:()=>ao,setISOWeek:()=>so,setISOWeekYear:()=>A,setMilliseconds:()=>co,setMinutes:()=>uo,setMonth:()=>eo,setQuarter:()=>lo,setSeconds:()=>po,setWeek:()=>mo,setWeekYear:()=>go,setYear:()=>fo,startOfDay:()=>Q.Z,startOfDecade:()=>So,startOfHour:()=>Ir,startOfISOWeek:()=>h,startOfISOWeekYear:()=>v,startOfMinute:()=>Pe,startOfMonth:()=>Fe,startOfQuarter:()=>Me,startOfSecond:()=>Rr,startOfToday:()=>ho,startOfTomorrow:()=>yo,startOfWeek:()=>S,startOfWeekYear:()=>Qt,startOfYear:()=>Ge,startOfYesterday:()=>vo,sub:()=>ur,subBusinessDays:()=>Eo,subDays:()=>sr,subHours:()=>Ao,subISOWeekYears:()=>he,subMilliseconds:()=>wt.Z,subMinutes:()=>_o,subMonths:()=>cr,subQuarters:()=>To,subSeconds:()=>Io,subWeeks:()=>bo,subYears:()=>wo,toDate:()=>o.Z,weeksToDays:()=>Co,yearsToMonths:()=>Do,yearsToQuarters:()=>Oo});var n=r(60530),o=r(77872),i=r(29119);function a(e,t){(0,i.Z)(2,arguments);var r=(0,o.Z)(e),a=(0,n.Z)(t);return isNaN(a)?new Date(NaN):a?(r.setDate(r.getDate()+a),r):r}function s(e,t){(0,i.Z)(2,arguments);var r=(0,o.Z)(e),a=(0,n.Z)(t);if(isNaN(a))return new Date(NaN);if(!a)return r;var s=r.getDate(),c=new Date(r.getTime());return c.setMonth(r.getMonth()+a+1,0),s>=c.getDate()?c:(r.setFullYear(c.getFullYear(),c.getMonth(),s),r)}function c(e,t){if((0,i.Z)(2,arguments),!t||"object"!=typeof t)return new Date(NaN);var r=t.years?(0,n.Z)(t.years):0,c=t.months?(0,n.Z)(t.months):0,u=t.weeks?(0,n.Z)(t.weeks):0,d=t.days?(0,n.Z)(t.days):0,l=t.hours?(0,n.Z)(t.hours):0,p=t.minutes?(0,n.Z)(t.minutes):0,m=t.seconds?(0,n.Z)(t.seconds):0,g=(0,o.Z)(e),f=c||r?s(g,c+12*r):g,S=d||u?a(f,d+7*u):f,h=1e3*(m+60*(p+60*l));return new Date(S.getTime()+h)}function u(e){(0,i.Z)(1,arguments);var t=(0,o.Z)(e).getDay();return 0===t||6===t}function d(e){return(0,i.Z)(1,arguments),0===(0,o.Z)(e).getDay()}function l(e){return(0,i.Z)(1,arguments),6===(0,o.Z)(e).getDay()}function p(e,t){(0,i.Z)(2,arguments);var r=(0,o.Z)(e),a=u(r),s=(0,n.Z)(t);if(isNaN(s))return new Date(NaN);var c=r.getHours(),p=s<0?-1:1,m=(0,n.Z)(s/5);r.setDate(r.getDate()+7*m);for(var g=Math.abs(s%5);g>0;)r.setDate(r.getDate()+p),u(r)||(g-=1);return a&&u(r)&&0!==s&&(l(r)&&r.setDate(r.getDate()+(p<0?2:-1)),d(r)&&r.setDate(r.getDate()+(p<0?1:-2))),r.setHours(c),r}var m=r(8636),g=36e5;function f(e,t){(0,i.Z)(2,arguments);var r=(0,n.Z)(t);return(0,m.Z)(e,r*g)}function S(e,t){(0,i.Z)(1,arguments);var r=t||{},a=r.locale,s=a&&a.options&&a.options.weekStartsOn,c=null==s?0:(0,n.Z)(s),u=null==r.weekStartsOn?c:(0,n.Z)(r.weekStartsOn);if(!(u>=0&&u<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var d=(0,o.Z)(e),l=d.getDay(),p=(l<u?7:0)+l-u;return d.setDate(d.getDate()-p),d.setHours(0,0,0,0),d}function h(e){return(0,i.Z)(1,arguments),S(e,{weekStartsOn:1})}function y(e){(0,i.Z)(1,arguments);var t=(0,o.Z)(e),r=t.getFullYear(),n=new Date(0);n.setFullYear(r+1,0,4),n.setHours(0,0,0,0);var a=h(n),s=new Date(0);s.setFullYear(r,0,4),s.setHours(0,0,0,0);var c=h(s);return t.getTime()>=a.getTime()?r+1:t.getTime()>=c.getTime()?r:r-1}function v(e){(0,i.Z)(1,arguments);var t=y(e),r=new Date(0);return r.setFullYear(t,0,4),r.setHours(0,0,0,0),h(r)}var E=r(50793);function A(e,t){(0,i.Z)(2,arguments);var r=(0,o.Z)(e),a=(0,n.Z)(t),s=(0,E.Z)(r,v(r)),c=new Date(0);return c.setFullYear(a,0,4),c.setHours(0,0,0,0),(r=v(c)).setDate(r.getDate()+s),r}function _(e,t){(0,i.Z)(2,arguments);var r=(0,n.Z)(t);return A(e,y(e)+r)}var T=6e4;function I(e,t){(0,i.Z)(2,arguments);var r=(0,n.Z)(t);return(0,m.Z)(e,r*T)}function b(e,t){return(0,i.Z)(2,arguments),s(e,3*(0,n.Z)(t))}function w(e,t){(0,i.Z)(2,arguments);var r=(0,n.Z)(t);return(0,m.Z)(e,1e3*r)}function C(e,t){return(0,i.Z)(2,arguments),a(e,7*(0,n.Z)(t))}function D(e,t){return(0,i.Z)(2,arguments),s(e,12*(0,n.Z)(t))}function O(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{inclusive:!1};(0,i.Z)(2,arguments);var n=e||{},a=t||{},s=(0,o.Z)(n.start).getTime(),c=(0,o.Z)(n.end).getTime(),u=(0,o.Z)(a.start).getTime(),d=(0,o.Z)(a.end).getTime();if(!(s<=c&&u<=d))throw new RangeError("Invalid interval");return r.inclusive?s<=d&&u<=c:s<d&&u<c}function P(e){var t,r;if((0,i.Z)(1,arguments),e&&"function"==typeof e.forEach)t=e;else{if("object"!=typeof e||null===e)return new Date(NaN);t=Array.prototype.slice.call(e)}return t.forEach((function(e){var t=(0,o.Z)(e);(void 0===r||r<t||isNaN(Number(t)))&&(r=t)})),r||new Date(NaN)}function N(e){var t,r;if((0,i.Z)(1,arguments),e&&"function"==typeof e.forEach)t=e;else{if("object"!=typeof e||null===e)return new Date(NaN);t=Array.prototype.slice.call(e)}return t.forEach((function(e){var t=(0,o.Z)(e);(void 0===r||r>t||isNaN(t.getDate()))&&(r=t)})),r||new Date(NaN)}function R(e,t){var r=t.start,n=t.end;return(0,i.Z)(2,arguments),N([P([e,r]),n])}function M(e,t){(0,i.Z)(2,arguments);var r=(0,o.Z)(e);if(isNaN(r))return NaN;var n,a,s=r.getTime();return(null==t?[]:"function"==typeof t.forEach?t:Array.prototype.slice.call(t)).forEach((function(e,t){var r=(0,o.Z)(e);if(isNaN(r))return n=NaN,void(a=NaN);var i=Math.abs(s-r.getTime());(null==n||i<a)&&(n=t,a=i)})),n}function L(e,t){(0,i.Z)(2,arguments);var r=(0,o.Z)(e);if(isNaN(r))return new Date(NaN);var n,a,s=r.getTime();return(null==t?[]:"function"==typeof t.forEach?t:Array.prototype.slice.call(t)).forEach((function(e){var t=(0,o.Z)(e);if(isNaN(t))return n=new Date(NaN),void(a=NaN);var r=Math.abs(s-t.getTime());(null==n||r<a)&&(n=t,a=r)})),n}function U(e,t){(0,i.Z)(2,arguments);var r=(0,o.Z)(e),n=(0,o.Z)(t),a=r.getTime()-n.getTime();return a<0?-1:a>0?1:a}function k(e,t){(0,i.Z)(2,arguments);var r=(0,o.Z)(e),n=(0,o.Z)(t),a=r.getTime()-n.getTime();return a>0?-1:a<0?1:a}var F=7,B=24*Math.pow(10,8)*60*60*1e3,G=6e4,x=36e5,$=1e3,j=-B,K=60,V=3,H=12,W=4,z=3600,q=60;function Y(e){(0,i.Z)(1,arguments);var t=e/F;return Math.floor(t)}var Z=r(35813),Q=r(11615);function X(e,t){(0,i.Z)(2,arguments);var r=(0,Q.Z)(e),n=(0,Q.Z)(t);return r.getTime()===n.getTime()}function J(e,t){(0,i.Z)(2,arguments);var r=(0,o.Z)(e),s=(0,o.Z)(t);if(!(0,Z.Z)(r)||!(0,Z.Z)(s))return NaN;var c=(0,E.Z)(r,s),d=c<0?-1:1,l=(0,n.Z)(c/7),p=5*l;for(s=a(s,7*l);!X(r,s);)p+=u(s)?0:d,s=a(s,d);return 0===p?0:p}function ee(e,t){return(0,i.Z)(2,arguments),y(e)-y(t)}var te=r(33306),re=6048e5;function ne(e,t){(0,i.Z)(2,arguments);var r=h(e),n=h(t),o=r.getTime()-(0,te.Z)(r),a=n.getTime()-(0,te.Z)(n);return Math.round((o-a)/re)}function oe(e,t){(0,i.Z)(2,arguments);var r=(0,o.Z)(e),n=(0,o.Z)(t);return 12*(r.getFullYear()-n.getFullYear())+(r.getMonth()-n.getMonth())}function ie(e){(0,i.Z)(1,arguments);var t=(0,o.Z)(e);return Math.floor(t.getMonth()/3)+1}function ae(e,t){(0,i.Z)(2,arguments);var r=(0,o.Z)(e),n=(0,o.Z)(t);return 4*(r.getFullYear()-n.getFullYear())+(ie(r)-ie(n))}var se=6048e5;function ce(e,t,r){(0,i.Z)(2,arguments);var n=S(e,r),o=S(t,r),a=n.getTime()-(0,te.Z)(n),s=o.getTime()-(0,te.Z)(o);return Math.round((a-s)/se)}function ue(e,t){(0,i.Z)(2,arguments);var r=(0,o.Z)(e),n=(0,o.Z)(t);return r.getFullYear()-n.getFullYear()}function de(e,t){var r=e.getFullYear()-t.getFullYear()||e.getMonth()-t.getMonth()||e.getDate()-t.getDate()||e.getHours()-t.getHours()||e.getMinutes()-t.getMinutes()||e.getSeconds()-t.getSeconds()||e.getMilliseconds()-t.getMilliseconds();return r<0?-1:r>0?1:r}function le(e,t){(0,i.Z)(2,arguments);var r=(0,o.Z)(e),n=(0,o.Z)(t),a=de(r,n),s=Math.abs((0,E.Z)(r,n));r.setDate(r.getDate()-a*s);var c=a*(s-Number(de(r,n)===-a));return 0===c?0:c}function pe(e,t){return(0,i.Z)(2,arguments),(0,o.Z)(e).getTime()-(0,o.Z)(t).getTime()}var me={ceil:Math.ceil,round:Math.round,floor:Math.floor,trunc:function(e){return e<0?Math.ceil(e):Math.floor(e)}},ge="trunc";function fe(e){return e?me[e]:me[ge]}function Se(e,t,r){(0,i.Z)(2,arguments);var n=pe(e,t)/x;return fe(null==r?void 0:r.roundingMethod)(n)}function he(e,t){return(0,i.Z)(2,arguments),_(e,-(0,n.Z)(t))}function ye(e,t){(0,i.Z)(2,arguments);var r=(0,o.Z)(e),n=(0,o.Z)(t),a=U(r,n),s=Math.abs(ee(r,n));r=he(r,a*s);var c=a*(s-Number(U(r,n)===-a));return 0===c?0:c}function ve(e,t,r){(0,i.Z)(2,arguments);var n=pe(e,t)/G;return fe(null==r?void 0:r.roundingMethod)(n)}function Ee(e){(0,i.Z)(1,arguments);var t=(0,o.Z)(e);return t.setHours(23,59,59,999),t}function Ae(e){(0,i.Z)(1,arguments);var t=(0,o.Z)(e),r=t.getMonth();return t.setFullYear(t.getFullYear(),r+1,0),t.setHours(23,59,59,999),t}function _e(e){(0,i.Z)(1,arguments);var t=(0,o.Z)(e);return Ee(t).getTime()===Ae(t).getTime()}function Te(e,t){(0,i.Z)(2,arguments);var r,n=(0,o.Z)(e),a=(0,o.Z)(t),s=U(n,a),c=Math.abs(oe(n,a));if(c<1)r=0;else{1===n.getMonth()&&n.getDate()>27&&n.setDate(30),n.setMonth(n.getMonth()-s*c);var u=U(n,a)===-s;_e((0,o.Z)(e))&&1===c&&1===U(e,a)&&(u=!1),r=s*(c-Number(u))}return 0===r?0:r}function Ie(e,t,r){(0,i.Z)(2,arguments);var n=Te(e,t)/3;return fe(null==r?void 0:r.roundingMethod)(n)}function be(e,t,r){(0,i.Z)(2,arguments);var n=pe(e,t)/1e3;return fe(null==r?void 0:r.roundingMethod)(n)}function we(e,t,r){(0,i.Z)(2,arguments);var n=le(e,t)/7;return fe(null==r?void 0:r.roundingMethod)(n)}function Ce(e,t){(0,i.Z)(2,arguments);var r=(0,o.Z)(e),n=(0,o.Z)(t),a=U(r,n),s=Math.abs(ue(r,n));r.setFullYear(1584),n.setFullYear(1584);var c=U(r,n)===-a,u=a*(s-Number(c));return 0===u?0:u}function De(e,t){(0,i.Z)(1,arguments);var r=e||{},n=(0,o.Z)(r.start),a=(0,o.Z)(r.end).getTime();if(!(n.getTime()<=a))throw new RangeError("Invalid interval");var s=[],c=n;c.setHours(0,0,0,0);var u=t&&"step"in t?Number(t.step):1;if(u<1||isNaN(u))throw new RangeError("`options.step` must be a number greater than 1");for(;c.getTime()<=a;)s.push((0,o.Z)(c)),c.setDate(c.getDate()+u),c.setHours(0,0,0,0);return s}function Oe(e,t){(0,i.Z)(1,arguments);var r=e||{},n=(0,o.Z)(r.start),a=(0,o.Z)(r.end),s=n.getTime(),c=a.getTime();if(!(s<=c))throw new RangeError("Invalid interval");var u=[],d=n;d.setMinutes(0,0,0);var l=t&&"step"in t?Number(t.step):1;if(l<1||isNaN(l))throw new RangeError("`options.step` must be a number greater than 1");for(;d.getTime()<=c;)u.push((0,o.Z)(d)),d=f(d,l);return u}function Pe(e){(0,i.Z)(1,arguments);var t=(0,o.Z)(e);return t.setSeconds(0,0),t}function Ne(e,t){(0,i.Z)(1,arguments);var r=Pe((0,o.Z)(e.start)),n=Pe((0,o.Z)(e.end)),a=r.getTime(),s=n.getTime();if(a>=s)throw new RangeError("Invalid interval");var c=[],u=r,d=t&&"step"in t?Number(t.step):1;if(d<1||isNaN(d))throw new RangeError("`options.step` must be a number equal or greater than 1");for(;u.getTime()<=s;)c.push((0,o.Z)(u)),u=I(u,d);return c}function Re(e){(0,i.Z)(1,arguments);var t=e||{},r=(0,o.Z)(t.start),n=(0,o.Z)(t.end).getTime(),a=[];if(!(r.getTime()<=n))throw new RangeError("Invalid interval");var s=r;for(s.setHours(0,0,0,0),s.setDate(1);s.getTime()<=n;)a.push((0,o.Z)(s)),s.setMonth(s.getMonth()+1);return a}function Me(e){(0,i.Z)(1,arguments);var t=(0,o.Z)(e),r=t.getMonth(),n=r-r%3;return t.setMonth(n,1),t.setHours(0,0,0,0),t}function Le(e){(0,i.Z)(1,arguments);var t=e||{},r=(0,o.Z)(t.start),n=(0,o.Z)(t.end),a=n.getTime();if(!(r.getTime()<=a))throw new RangeError("Invalid interval");var s=Me(r);a=Me(n).getTime();for(var c=[],u=s;u.getTime()<=a;)c.push((0,o.Z)(u)),u=b(u,1);return c}function Ue(e,t){(0,i.Z)(1,arguments);var r=e||{},n=(0,o.Z)(r.start),a=(0,o.Z)(r.end),s=a.getTime();if(!(n.getTime()<=s))throw new RangeError("Invalid interval");var c=S(n,t),u=S(a,t);c.setHours(15),u.setHours(15),s=u.getTime();for(var d=[],l=c;l.getTime()<=s;)l.setHours(0),d.push((0,o.Z)(l)),(l=C(l,1)).setHours(15);return d}function ke(e){(0,i.Z)(1,arguments);for(var t=De(e),r=[],n=0;n<t.length;){var o=t[n++];u(o)&&(r.push(o),d(o)&&(n+=5))}return r}function Fe(e){(0,i.Z)(1,arguments);var t=(0,o.Z)(e);return t.setDate(1),t.setHours(0,0,0,0),t}function Be(e){(0,i.Z)(1,arguments);var t=Fe(e);if(isNaN(t.getTime()))throw new RangeError("The passed date is invalid");return ke({start:t,end:Ae(e)})}function Ge(e){(0,i.Z)(1,arguments);var t=(0,o.Z)(e),r=new Date(0);return r.setFullYear(t.getFullYear(),0,1),r.setHours(0,0,0,0),r}function xe(e){(0,i.Z)(1,arguments);var t=(0,o.Z)(e),r=t.getFullYear();return t.setFullYear(r+1,0,0),t.setHours(23,59,59,999),t}function $e(e){(0,i.Z)(1,arguments);var t=Ge(e);if(isNaN(t))throw new RangeError("The passed date is invalid");return ke({start:t,end:xe(e)})}function je(e){(0,i.Z)(1,arguments);var t=e||{},r=(0,o.Z)(t.start),n=(0,o.Z)(t.end).getTime();if(!(r.getTime()<=n))throw new RangeError("Invalid interval");var a=[],s=r;for(s.setHours(0,0,0,0),s.setMonth(0,1);s.getTime()<=n;)a.push((0,o.Z)(s)),s.setFullYear(s.getFullYear()+1);return a}function Ke(e){(0,i.Z)(1,arguments);var t=(0,o.Z)(e),r=t.getFullYear(),n=9+10*Math.floor(r/10);return t.setFullYear(n,11,31),t.setHours(23,59,59,999),t}function Ve(e){(0,i.Z)(1,arguments);var t=(0,o.Z)(e);return t.setMinutes(59,59,999),t}function He(e,t){(0,i.Z)(1,arguments);var r=t||{},a=r.locale,s=a&&a.options&&a.options.weekStartsOn,c=null==s?0:(0,n.Z)(s),u=null==r.weekStartsOn?c:(0,n.Z)(r.weekStartsOn);if(!(u>=0&&u<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var d=(0,o.Z)(e),l=d.getDay(),p=6+(l<u?-7:0)-(l-u);return d.setDate(d.getDate()+p),d.setHours(23,59,59,999),d}function We(e){return(0,i.Z)(1,arguments),He(e,{weekStartsOn:1})}function ze(e){(0,i.Z)(1,arguments);var t=y(e),r=new Date(0);r.setFullYear(t+1,0,4),r.setHours(0,0,0,0);var n=h(r);return n.setMilliseconds(n.getMilliseconds()-1),n}function qe(e){(0,i.Z)(1,arguments);var t=(0,o.Z)(e);return t.setSeconds(59,999),t}function Ye(e){(0,i.Z)(1,arguments);var t=(0,o.Z)(e),r=t.getMonth(),n=r-r%3+3;return t.setMonth(n,0),t.setHours(23,59,59,999),t}function Ze(e){(0,i.Z)(1,arguments);var t=(0,o.Z)(e);return t.setMilliseconds(999),t}function Qe(){return Ee(Date.now())}function Xe(){var e=new Date,t=e.getFullYear(),r=e.getMonth(),n=e.getDate(),o=new Date(0);return o.setFullYear(t,r,n+1),o.setHours(23,59,59,999),o}function Je(){var e=new Date,t=e.getFullYear(),r=e.getMonth(),n=e.getDate(),o=new Date(0);return o.setFullYear(t,r,n-1),o.setHours(23,59,59,999),o}var et=r(92481),tt=r(96925),rt=r(22533);function nt(e){return(0,rt.Z)({},e)}var ot=1440,it=2520,at=43200,st=86400;function ct(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};(0,i.Z)(2,arguments);var n=r.locale||tt.Z;if(!n.formatDistance)throw new RangeError("locale must contain formatDistance property");var a=U(e,t);if(isNaN(a))throw new RangeError("Invalid time value");var s,c,u=nt(r);u.addSuffix=Boolean(r.addSuffix),u.comparison=a,a>0?(s=(0,o.Z)(t),c=(0,o.Z)(e)):(s=(0,o.Z)(e),c=(0,o.Z)(t));var d,l=be(c,s),p=((0,te.Z)(c)-(0,te.Z)(s))/1e3,m=Math.round((l-p)/60);if(m<2)return r.includeSeconds?l<5?n.formatDistance("lessThanXSeconds",5,u):l<10?n.formatDistance("lessThanXSeconds",10,u):l<20?n.formatDistance("lessThanXSeconds",20,u):l<40?n.formatDistance("halfAMinute",null,u):l<60?n.formatDistance("lessThanXMinutes",1,u):n.formatDistance("xMinutes",1,u):0===m?n.formatDistance("lessThanXMinutes",1,u):n.formatDistance("xMinutes",m,u);if(m<45)return n.formatDistance("xMinutes",m,u);if(m<90)return n.formatDistance("aboutXHours",1,u);if(m<ot){var g=Math.round(m/60);return n.formatDistance("aboutXHours",g,u)}if(m<it)return n.formatDistance("xDays",1,u);if(m<at){var f=Math.round(m/ot);return n.formatDistance("xDays",f,u)}if(m<st)return d=Math.round(m/at),n.formatDistance("aboutXMonths",d,u);if((d=Te(c,s))<12){var S=Math.round(m/at);return n.formatDistance("xMonths",S,u)}var h=d%12,y=Math.floor(d/12);return h<3?n.formatDistance("aboutXYears",y,u):h<9?n.formatDistance("overXYears",y,u):n.formatDistance("almostXYears",y+1,u)}var ut=6e4,dt=1440,lt=30*dt,pt=365*dt;function mt(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};(0,i.Z)(2,arguments);var n=r.locale||tt.Z;if(!n.formatDistance)throw new RangeError("locale must contain localize.formatDistance property");var a=U(e,t);if(isNaN(a))throw new RangeError("Invalid time value");var s,c,u=nt(r);u.addSuffix=Boolean(r.addSuffix),u.comparison=a,a>0?(s=(0,o.Z)(t),c=(0,o.Z)(e)):(s=(0,o.Z)(e),c=(0,o.Z)(t));var d,l=null==r.roundingMethod?"round":String(r.roundingMethod);if("floor"===l)d=Math.floor;else if("ceil"===l)d=Math.ceil;else{if("round"!==l)throw new RangeError("roundingMethod must be 'floor', 'ceil' or 'round'");d=Math.round}var p,m=c.getTime()-s.getTime(),g=m/ut,f=(m-((0,te.Z)(c)-(0,te.Z)(s)))/ut;if("second"===(p=null==r.unit?g<1?"second":g<60?"minute":g<dt?"hour":f<lt?"day":f<pt?"month":"year":String(r.unit))){var S=d(m/1e3);return n.formatDistance("xSeconds",S,u)}if("minute"===p){var h=d(g);return n.formatDistance("xMinutes",h,u)}if("hour"===p){var y=d(g/60);return n.formatDistance("xHours",y,u)}if("day"===p){var v=d(f/dt);return n.formatDistance("xDays",v,u)}if("month"===p){var E=d(f/lt);return 12===E&&"month"!==r.unit?n.formatDistance("xYears",1,u):n.formatDistance("xMonths",E,u)}if("year"===p){var A=d(f/pt);return n.formatDistance("xYears",A,u)}throw new RangeError("unit must be 'second', 'minute', 'hour', 'day', 'month' or 'year'")}function gt(e,t){return(0,i.Z)(1,arguments),ct(e,Date.now(),t)}function ft(e,t){return(0,i.Z)(1,arguments),mt(e,Date.now(),t)}var St=["years","months","weeks","days","hours","minutes","seconds"];function ht(e,t){if(arguments.length<1)throw new TypeError("1 argument required, but only ".concat(arguments.length," present"));var r=(null==t?void 0:t.format)||St,n=(null==t?void 0:t.locale)||tt.Z,o=(null==t?void 0:t.zero)||!1,i=(null==t?void 0:t.delimiter)||" ";return r.reduce((function(t,r){var i="x".concat(r.replace(/(^.)/,(function(e){return e.toUpperCase()})));return"number"==typeof e[r]&&(o||e[r])?t.concat(n.formatDistance(i,e[r])):t}),[]).join(i)}var yt=r(70086);function vt(e,t){if(arguments.length<1)throw new TypeError("1 argument required, but only ".concat(arguments.length," present"));var r=(0,o.Z)(e);if(!(0,Z.Z)(r))throw new RangeError("Invalid time value");var n=t||{},i=null==n.format?"extended":String(n.format),a=null==n.representation?"complete":String(n.representation);if("extended"!==i&&"basic"!==i)throw new RangeError("format must be 'extended' or 'basic'");if("date"!==a&&"time"!==a&&"complete"!==a)throw new RangeError("representation must be 'date', 'time', or 'complete'");var s="",c="",u="extended"===i?"-":"",d="extended"===i?":":"";if("time"!==a){var l=(0,yt.Z)(r.getDate(),2),p=(0,yt.Z)(r.getMonth()+1,2),m=(0,yt.Z)(r.getFullYear(),4);s="".concat(m).concat(u).concat(p).concat(u).concat(l)}if("date"!==a){var g=r.getTimezoneOffset();if(0!==g){var f=Math.abs(g),S=(0,yt.Z)(Math.floor(f/60),2),h=(0,yt.Z)(f%60,2);c="".concat(g<0?"+":"-").concat(S,":").concat(h)}else c="Z";var y=""===s?"":"T",v=[(0,yt.Z)(r.getHours(),2),(0,yt.Z)(r.getMinutes(),2),(0,yt.Z)(r.getSeconds(),2)].join(d);s="".concat(s).concat(y).concat(v).concat(c)}return s}function Et(e,t){if(arguments.length<1)throw new TypeError("1 argument required, but only ".concat(arguments.length," present"));var r=(0,o.Z)(e);if(!(0,Z.Z)(r))throw new RangeError("Invalid time value");var n=t||{},i=null==n.format?"extended":String(n.format),a=null==n.representation?"complete":String(n.representation);if("extended"!==i&&"basic"!==i)throw new RangeError("format must be 'extended' or 'basic'");if("date"!==a&&"time"!==a&&"complete"!==a)throw new RangeError("representation must be 'date', 'time', or 'complete'");var s="",c="extended"===i?"-":"",u="extended"===i?":":"";if("time"!==a){var d=(0,yt.Z)(r.getDate(),2),l=(0,yt.Z)(r.getMonth()+1,2),p=(0,yt.Z)(r.getFullYear(),4);s="".concat(p).concat(c).concat(l).concat(c).concat(d)}if("date"!==a){var m=(0,yt.Z)(r.getHours(),2),g=(0,yt.Z)(r.getMinutes(),2),f=(0,yt.Z)(r.getSeconds(),2),S=""===s?"":" ";s="".concat(s).concat(S).concat(m).concat(u).concat(g).concat(u).concat(f)}return s}function At(e){if((0,i.Z)(1,arguments),"object"!=typeof e)throw new Error("Duration must be an object");var t=e.years,r=void 0===t?0:t,n=e.months,o=void 0===n?0:n,a=e.days,s=void 0===a?0:a,c=e.hours,u=void 0===c?0:c,d=e.minutes,l=void 0===d?0:d,p=e.seconds,m=void 0===p?0:p;return"P".concat(r,"Y").concat(o,"M").concat(s,"DT").concat(u,"H").concat(l,"M").concat(m,"S")}function _t(e,t){if(arguments.length<1)throw new TypeError("1 arguments required, but only ".concat(arguments.length," present"));var r=(0,o.Z)(e);if(!(0,Z.Z)(r))throw new RangeError("Invalid time value");var i=(t||{}).fractionDigits,a=void 0===i?0:i;if(!(a>=0&&a<=3))throw new RangeError("fractionDigits must be between 0 and 3 inclusively");var s=(0,yt.Z)(r.getDate(),2),c=(0,yt.Z)(r.getMonth()+1,2),u=r.getFullYear(),d=(0,yt.Z)(r.getHours(),2),l=(0,yt.Z)(r.getMinutes(),2),p=(0,yt.Z)(r.getSeconds(),2),m="";if(a>0){var g=r.getMilliseconds(),f=Math.floor(g*Math.pow(10,a-3));m="."+(0,yt.Z)(f,a)}var S="",h=r.getTimezoneOffset();if(0!==h){var y=Math.abs(h),v=(0,yt.Z)((0,n.Z)(y/60),2),E=(0,yt.Z)(y%60,2);S="".concat(h<0?"+":"-").concat(v,":").concat(E)}else S="Z";return"".concat(u,"-").concat(c,"-").concat(s,"T").concat(d,":").concat(l,":").concat(p).concat(m).concat(S)}var Tt=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],It=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function bt(e){if(arguments.length<1)throw new TypeError("1 arguments required, but only ".concat(arguments.length," present"));var t=(0,o.Z)(e);if(!(0,Z.Z)(t))throw new RangeError("Invalid time value");var r=Tt[t.getUTCDay()],n=(0,yt.Z)(t.getUTCDate(),2),i=It[t.getUTCMonth()],a=t.getUTCFullYear(),s=(0,yt.Z)(t.getUTCHours(),2),c=(0,yt.Z)(t.getUTCMinutes(),2),u=(0,yt.Z)(t.getUTCSeconds(),2);return"".concat(r,", ").concat(n," ").concat(i," ").concat(a," ").concat(s,":").concat(c,":").concat(u," GMT")}var wt=r(19777);function Ct(e,t,r){(0,i.Z)(2,arguments);var n=(0,o.Z)(e),a=(0,o.Z)(t),s=r||{},c=s.locale,u=void 0===c?tt.Z:c,d=s.weekStartsOn,l=void 0===d?0:d;if(!u.localize)throw new RangeError("locale must contain localize property");if(!u.formatLong)throw new RangeError("locale must contain formatLong property");if(!u.formatRelative)throw new RangeError("locale must contain formatRelative property");var p,m=(0,E.Z)(n,a);if(isNaN(m))throw new RangeError("Invalid time value");p=m<-6?"other":m<-1?"lastWeek":m<0?"yesterday":m<1?"today":m<2?"tomorrow":m<7?"nextWeek":"other";var g=(0,wt.Z)(n,(0,te.Z)(n)),f=(0,wt.Z)(a,(0,te.Z)(a)),S=u.formatRelative(p,g,f,{locale:u,weekStartsOn:l});return(0,et.Z)(n,S,{locale:u,weekStartsOn:l})}var Dt=r(10994);function Ot(e){return(0,i.Z)(1,arguments),(0,o.Z)(e).getDate()}function Pt(e){return(0,i.Z)(1,arguments),(0,o.Z)(e).getDay()}function Nt(e){(0,i.Z)(1,arguments);var t=(0,o.Z)(e);return(0,E.Z)(t,Ge(t))+1}function Rt(e){(0,i.Z)(1,arguments);var t=(0,o.Z)(e),r=t.getFullYear(),n=t.getMonth(),a=new Date(0);return a.setFullYear(r,n+1,0),a.setHours(0,0,0,0),a.getDate()}function Mt(e){(0,i.Z)(1,arguments);var t=(0,o.Z)(e).getFullYear();return t%400==0||t%4==0&&t%100!=0}function Lt(e){(0,i.Z)(1,arguments);var t=(0,o.Z)(e);return"Invalid Date"===String(new Date(t))?NaN:Mt(t)?366:365}function Ut(e){(0,i.Z)(1,arguments);var t=(0,o.Z)(e).getFullYear();return 10*Math.floor(t/10)}function kt(e){return(0,i.Z)(1,arguments),(0,o.Z)(e).getHours()}function Ft(e){(0,i.Z)(1,arguments);var t=(0,o.Z)(e).getDay();return 0===t&&(t=7),t}var Bt=6048e5;function Gt(e){(0,i.Z)(1,arguments);var t=(0,o.Z)(e),r=h(t).getTime()-v(t).getTime();return Math.round(r/Bt)+1}var xt=6048e5;function $t(e){(0,i.Z)(1,arguments);var t=v(e),r=v(C(t,60)).valueOf()-t.valueOf();return Math.round(r/xt)}function jt(e){return(0,i.Z)(1,arguments),(0,o.Z)(e).getMilliseconds()}function Kt(e){return(0,i.Z)(1,arguments),(0,o.Z)(e).getMinutes()}function Vt(e){return(0,i.Z)(1,arguments),(0,o.Z)(e).getMonth()}var Ht=864e5;function Wt(e,t){(0,i.Z)(2,arguments);var r=e||{},n=t||{},a=(0,o.Z)(r.start).getTime(),s=(0,o.Z)(r.end).getTime(),c=(0,o.Z)(n.start).getTime(),u=(0,o.Z)(n.end).getTime();if(!(a<=s&&c<=u))throw new RangeError("Invalid interval");if(!(a<u&&c<s))return 0;var d=(u>s?s:u)-(c<a?a:c);return Math.ceil(d/Ht)}function zt(e){return(0,i.Z)(1,arguments),(0,o.Z)(e).getSeconds()}function qt(e){return(0,i.Z)(1,arguments),(0,o.Z)(e).getTime()}function Yt(e){return(0,i.Z)(1,arguments),Math.floor(qt(e)/1e3)}function Zt(e,t){var r,a;(0,i.Z)(1,arguments);var s=(0,o.Z)(e),c=s.getFullYear(),u=null==t||null===(r=t.locale)||void 0===r||null===(a=r.options)||void 0===a?void 0:a.firstWeekContainsDate,d=null==u?1:(0,n.Z)(u),l=null==(null==t?void 0:t.firstWeekContainsDate)?d:(0,n.Z)(t.firstWeekContainsDate);if(!(l>=1&&l<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var p=new Date(0);p.setFullYear(c+1,0,l),p.setHours(0,0,0,0);var m=S(p,t),g=new Date(0);g.setFullYear(c,0,l),g.setHours(0,0,0,0);var f=S(g,t);return s.getTime()>=m.getTime()?c+1:s.getTime()>=f.getTime()?c:c-1}function Qt(e,t){(0,i.Z)(1,arguments);var r=t||{},o=r.locale,a=o&&o.options&&o.options.firstWeekContainsDate,s=null==a?1:(0,n.Z)(a),c=null==r.firstWeekContainsDate?s:(0,n.Z)(r.firstWeekContainsDate),u=Zt(e,t),d=new Date(0);return d.setFullYear(u,0,c),d.setHours(0,0,0,0),S(d,t)}var Xt=6048e5;function Jt(e,t){(0,i.Z)(1,arguments);var r=(0,o.Z)(e),n=S(r,t).getTime()-Qt(r,t).getTime();return Math.round(n/Xt)+1}function er(e,t){(0,i.Z)(1,arguments);var r=t||{},o=r.locale,a=o&&o.options&&o.options.weekStartsOn,s=null==a?0:(0,n.Z)(a),c=null==r.weekStartsOn?s:(0,n.Z)(r.weekStartsOn);if(!(c>=0&&c<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var u=Ot(e);if(isNaN(u))return u;var d,l=Pt(Fe(e)),p=1;if(u>(d=l>=c?c+7-l:c-l)){var m=u-d;p+=Math.ceil(m/7)}return p}function tr(e){(0,i.Z)(1,arguments);var t=(0,o.Z)(e),r=t.getMonth();return t.setFullYear(t.getFullYear(),r+1,0),t.setHours(0,0,0,0),t}function rr(e,t){return(0,i.Z)(1,arguments),ce(tr(e),Fe(e),t)+1}function nr(e){return(0,i.Z)(1,arguments),(0,o.Z)(e).getFullYear()}function or(e){return(0,i.Z)(1,arguments),Math.floor(e*x)}function ir(e){return(0,i.Z)(1,arguments),Math.floor(e*K)}function ar(e){return(0,i.Z)(1,arguments),Math.floor(e*z)}function sr(e,t){return(0,i.Z)(2,arguments),a(e,-(0,n.Z)(t))}function cr(e,t){return(0,i.Z)(2,arguments),s(e,-(0,n.Z)(t))}function ur(e,t){if((0,i.Z)(2,arguments),!t||"object"!=typeof t)return new Date(NaN);var r=t.years?(0,n.Z)(t.years):0,o=t.months?(0,n.Z)(t.months):0,a=t.weeks?(0,n.Z)(t.weeks):0,s=t.days?(0,n.Z)(t.days):0,c=t.hours?(0,n.Z)(t.hours):0,u=t.minutes?(0,n.Z)(t.minutes):0,d=t.seconds?(0,n.Z)(t.seconds):0,l=sr(cr(e,o+12*r),s+7*a),p=1e3*(d+60*(u+60*c));return new Date(l.getTime()-p)}function dr(e){var t=e.start,r=e.end;(0,i.Z)(1,arguments);var n=(0,o.Z)(t),a=(0,o.Z)(r);if(!(0,Z.Z)(n))throw new RangeError("Start Date is invalid");if(!(0,Z.Z)(a))throw new RangeError("End Date is invalid");var s={years:0,months:0,days:0,hours:0,minutes:0,seconds:0},c=U(n,a);s.years=Math.abs(Ce(n,a));var u=ur(n,{years:c*s.years});s.months=Math.abs(Te(u,a));var d=ur(u,{months:c*s.months});s.days=Math.abs(le(d,a));var l=ur(d,{days:c*s.days});s.hours=Math.abs(Se(l,a));var p=ur(l,{hours:c*s.hours});s.minutes=Math.abs(ve(p,a));var m=ur(p,{minutes:c*s.minutes});return s.seconds=Math.abs(be(m,a)),s}function lr(e,t,r){var n,o,a;return(0,i.Z)(1,arguments),void 0===(a=t)||"locale"in a?r=t:o=t,new Intl.DateTimeFormat(null===(n=r)||void 0===n?void 0:n.locale,o).format(e)}function pr(e,t){(0,i.Z)(2,arguments);var r=(0,o.Z)(e),n=(0,o.Z)(t);return r.getTime()>n.getTime()}function mr(e,t){(0,i.Z)(2,arguments);var r=(0,o.Z)(e),n=(0,o.Z)(t);return r.getTime()<n.getTime()}var gr=r(99479);function fr(e,t){(0,i.Z)(2,arguments);var r=(0,o.Z)(e),n=(0,o.Z)(t);return r.getTime()===n.getTime()}function Sr(e,t,r){if(arguments.length<3)throw new TypeError("3 argument required, but only "+arguments.length+" present");var n=new Date(e,t,r);return n.getFullYear()===e&&n.getMonth()===t&&n.getDate()===r}function hr(e){return(0,i.Z)(1,arguments),1===(0,o.Z)(e).getDate()}function yr(e){return(0,i.Z)(1,arguments),5===(0,o.Z)(e).getDay()}function vr(e){return(0,i.Z)(1,arguments),(0,o.Z)(e).getTime()>Date.now()}var Er=r(95557);function Ar(e,t,r){return(0,i.Z)(2,arguments),(0,Z.Z)((0,Er.Z)(e,t,new Date,r))}function _r(e){return(0,i.Z)(1,arguments),1===(0,o.Z)(e).getDay()}function Tr(e){return(0,i.Z)(1,arguments),(0,o.Z)(e).getTime()<Date.now()}function Ir(e){(0,i.Z)(1,arguments);var t=(0,o.Z)(e);return t.setMinutes(0,0,0),t}function br(e,t){(0,i.Z)(2,arguments);var r=Ir(e),n=Ir(t);return r.getTime()===n.getTime()}function wr(e,t,r){(0,i.Z)(2,arguments);var n=S(e,r),o=S(t,r);return n.getTime()===o.getTime()}function Cr(e,t){return(0,i.Z)(2,arguments),wr(e,t,{weekStartsOn:1})}function Dr(e,t){(0,i.Z)(2,arguments);var r=v(e),n=v(t);return r.getTime()===n.getTime()}function Or(e,t){(0,i.Z)(2,arguments);var r=Pe(e),n=Pe(t);return r.getTime()===n.getTime()}function Pr(e,t){(0,i.Z)(2,arguments);var r=(0,o.Z)(e),n=(0,o.Z)(t);return r.getFullYear()===n.getFullYear()&&r.getMonth()===n.getMonth()}function Nr(e,t){(0,i.Z)(2,arguments);var r=Me(e),n=Me(t);return r.getTime()===n.getTime()}function Rr(e){(0,i.Z)(1,arguments);var t=(0,o.Z)(e);return t.setMilliseconds(0),t}function Mr(e,t){(0,i.Z)(2,arguments);var r=Rr(e),n=Rr(t);return r.getTime()===n.getTime()}function Lr(e,t){(0,i.Z)(2,arguments);var r=(0,o.Z)(e),n=(0,o.Z)(t);return r.getFullYear()===n.getFullYear()}function Ur(e){return(0,i.Z)(1,arguments),br(Date.now(),e)}function kr(e){return(0,i.Z)(1,arguments),Cr(e,Date.now())}function Fr(e){return(0,i.Z)(1,arguments),Or(Date.now(),e)}function Br(e){return(0,i.Z)(1,arguments),Pr(Date.now(),e)}function Gr(e){return(0,i.Z)(1,arguments),Nr(Date.now(),e)}function xr(e){return(0,i.Z)(1,arguments),Mr(Date.now(),e)}function $r(e,t){return(0,i.Z)(1,arguments),wr(e,Date.now(),t)}function jr(e){return(0,i.Z)(1,arguments),Lr(e,Date.now())}function Kr(e){return(0,i.Z)(1,arguments),4===(0,o.Z)(e).getDay()}function Vr(e){return(0,i.Z)(1,arguments),X(e,Date.now())}function Hr(e){return(0,i.Z)(1,arguments),X(e,a(Date.now(),1))}function Wr(e){return(0,i.Z)(1,arguments),2===(0,o.Z)(e).getDay()}function zr(e){return(0,i.Z)(1,arguments),3===(0,o.Z)(e).getDay()}function qr(e,t){(0,i.Z)(2,arguments);var r=(0,o.Z)(e).getTime(),n=(0,o.Z)(t.start).getTime(),a=(0,o.Z)(t.end).getTime();if(!(n<=a))throw new RangeError("Invalid interval");return r>=n&&r<=a}function Yr(e){return(0,i.Z)(1,arguments),X(e,sr(Date.now(),1))}function Zr(e){(0,i.Z)(1,arguments);var t=(0,o.Z)(e),r=t.getFullYear(),n=9+10*Math.floor(r/10);return t.setFullYear(n+1,0,0),t.setHours(0,0,0,0),t}function Qr(e,t){(0,i.Z)(1,arguments);var r=t||{},a=r.locale,s=a&&a.options&&a.options.weekStartsOn,c=null==s?0:(0,n.Z)(s),u=null==r.weekStartsOn?c:(0,n.Z)(r.weekStartsOn);if(!(u>=0&&u<=6))throw new RangeError("weekStartsOn must be between 0 and 6");var d=(0,o.Z)(e),l=d.getDay(),p=6+(l<u?-7:0)-(l-u);return d.setHours(0,0,0,0),d.setDate(d.getDate()+p),d}function Xr(e){return(0,i.Z)(1,arguments),Qr(e,{weekStartsOn:1})}function Jr(e){(0,i.Z)(1,arguments);var t=y(e),r=new Date(0);r.setFullYear(t+1,0,4),r.setHours(0,0,0,0);var n=h(r);return n.setDate(n.getDate()-1),n}function en(e){(0,i.Z)(1,arguments);var t=(0,o.Z)(e),r=t.getMonth(),n=r-r%3+3;return t.setMonth(n,0),t.setHours(0,0,0,0),t}function tn(e){(0,i.Z)(1,arguments);var t=(0,o.Z)(e),r=t.getFullYear();return t.setFullYear(r+1,0,0),t.setHours(0,0,0,0),t}var rn=r(20419),nn=/(\w)\1*|''|'(''|[^'])+('|$)|./g,on=/^'([^]*?)'?$/,an=/''/g,sn=/[a-zA-Z]/;function cn(e,t){(0,i.Z)(2,arguments);var r=(0,o.Z)(e);if(!(0,Z.Z)(r))throw new RangeError("Invalid time value");var n=(0,te.Z)(r),a=(0,wt.Z)(r,n),s=t.match(nn);return s?s.map((function(e){if("''"===e)return"'";var t=e[0];if("'"===t)return function(e){var t=e.match(on);return t?t[1].replace(an,"'"):e}(e);var r=rn.Z[t];if(r)return r(a,e);if(t.match(sn))throw new RangeError("Format string contains an unescaped latin alphabet character `"+t+"`");return e})).join(""):""}var un=365.2425;function dn(e){var t=e.years,r=e.months,n=e.weeks,o=e.days,a=e.hours,s=e.minutes,c=e.seconds;(0,i.Z)(1,arguments);var u=0;t&&(u+=t*un),r&&(u+=r*(un/12)),n&&(u+=7*n),o&&(u+=o);var d=24*u*60*60;return a&&(d+=60*a*60),s&&(d+=60*s),c&&(d+=c),Math.round(1e3*d)}function ln(e){(0,i.Z)(1,arguments);var t=e/x;return Math.floor(t)}function pn(e){(0,i.Z)(1,arguments);var t=e/G;return Math.floor(t)}function mn(e){(0,i.Z)(1,arguments);var t=e/$;return Math.floor(t)}function gn(e){(0,i.Z)(1,arguments);var t=e/K;return Math.floor(t)}function fn(e){return(0,i.Z)(1,arguments),Math.floor(e*G)}function Sn(e){return(0,i.Z)(1,arguments),Math.floor(e*q)}function hn(e){(0,i.Z)(1,arguments);var t=e/V;return Math.floor(t)}function yn(e){(0,i.Z)(1,arguments);var t=e/H;return Math.floor(t)}function vn(e,t){(0,i.Z)(2,arguments);var r=t-Pt(e);return r<=0&&(r+=7),a(e,r)}function En(e){return(0,i.Z)(1,arguments),vn((0,o.Z)(e),5)}function An(e){return(0,i.Z)(1,arguments),vn((0,o.Z)(e),1)}function _n(e){return(0,i.Z)(1,arguments),vn((0,o.Z)(e),6)}function Tn(e){return(0,i.Z)(1,arguments),vn((0,o.Z)(e),0)}function In(e){return(0,i.Z)(1,arguments),vn((0,o.Z)(e),4)}function bn(e){return(0,i.Z)(1,arguments),vn((0,o.Z)(e),2)}function wn(e){return(0,i.Z)(1,arguments),vn((0,o.Z)(e),3)}var Cn=36e5,Dn=6e4,On=2,Pn={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},Nn=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,Rn=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,Mn=/^([+-])(\d{2})(?::?(\d{2}))?$/;function Ln(e,t){(0,i.Z)(1,arguments);var r=t||{},o=null==r.additionalDigits?On:(0,n.Z)(r.additionalDigits);if(2!==o&&1!==o&&0!==o)throw new RangeError("additionalDigits must be 0, 1 or 2");if("string"!=typeof e&&"[object String]"!==Object.prototype.toString.call(e))return new Date(NaN);var a,s=function(e){var t,r={},n=e.split(Pn.dateTimeDelimiter);if(n.length>2)return r;if(/:/.test(n[0])?(r.date=null,t=n[0]):(r.date=n[0],t=n[1],Pn.timeZoneDelimiter.test(r.date)&&(r.date=e.split(Pn.timeZoneDelimiter)[0],t=e.substr(r.date.length,e.length))),t){var o=Pn.timezone.exec(t);o?(r.time=t.replace(o[1],""),r.timezone=o[1]):r.time=t}return r}(e);if(s.date){var c=function(e,t){var r=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),n=e.match(r);if(!n)return{year:null};var o=n[1]&&parseInt(n[1]),i=n[2]&&parseInt(n[2]);return{year:null==i?o:100*i,restDateString:e.slice((n[1]||n[2]).length)}}(s.date,o);a=function(e,t){if(null===t)return null;var r=e.match(Nn);if(!r)return null;var n=!!r[4],o=Un(r[1]),i=Un(r[2])-1,a=Un(r[3]),s=Un(r[4]),c=Un(r[5])-1;if(n)return function(e,t,r){return t>=1&&t<=53&&r>=0&&r<=6}(0,s,c)?function(e,t,r){var n=new Date(0);n.setUTCFullYear(e,0,4);var o=7*(t-1)+r+1-(n.getUTCDay()||7);return n.setUTCDate(n.getUTCDate()+o),n}(t,s,c):new Date(NaN);var u=new Date(0);return function(e,t,r){return t>=0&&t<=11&&r>=1&&r<=(Fn[t]||(Bn(e)?29:28))}(t,i,a)&&function(e,t){return t>=1&&t<=(Bn(e)?366:365)}(t,o)?(u.setUTCFullYear(t,i,Math.max(o,a)),u):new Date(NaN)}(c.restDateString,c.year)}if(isNaN(a)||!a)return new Date(NaN);var u,d=a.getTime(),l=0;if(s.time&&(l=function(e){var t=e.match(Rn);if(!t)return null;var r=kn(t[1]),n=kn(t[2]),o=kn(t[3]);return function(e,t,r){return 24===e?0===t&&0===r:r>=0&&r<60&&t>=0&&t<60&&e>=0&&e<25}(r,n,o)?r*Cn+n*Dn+1e3*o:NaN}(s.time),isNaN(l)||null===l))return new Date(NaN);if(!s.timezone){var p=new Date(d+l),m=new Date(0);return m.setFullYear(p.getUTCFullYear(),p.getUTCMonth(),p.getUTCDate()),m.setHours(p.getUTCHours(),p.getUTCMinutes(),p.getUTCSeconds(),p.getUTCMilliseconds()),m}return u=function(e){if("Z"===e)return 0;var t=e.match(Mn);if(!t)return 0;var r="+"===t[1]?-1:1,n=parseInt(t[2]),o=t[3]&&parseInt(t[3])||0;return function(e,t){return t>=0&&t<=59}(0,o)?r*(n*Cn+o*Dn):NaN}(s.timezone),isNaN(u)?new Date(NaN):new Date(d+l+u)}function Un(e){return e?parseInt(e):1}function kn(e){return e&&parseFloat(e.replace(",","."))||0}var Fn=[31,null,31,30,31,30,31,31,30,31,30,31];function Bn(e){return e%400==0||e%4==0&&e%100}function Gn(e){if((0,i.Z)(1,arguments),"string"==typeof e){var t=e.match(/(\d{4})-(\d{2})-(\d{2})[T ](\d{2}):(\d{2}):(\d{2})(?:\.(\d{0,7}))?(?:Z|(.)(\d{2}):?(\d{2})?)?/);return t?new Date(Date.UTC(+t[1],+t[2]-1,+t[3],+t[4]-(+t[9]||0)*("-"==t[8]?-1:1),+t[5]-(+t[10]||0)*("-"==t[8]?-1:1),+t[6],+((t[7]||"0")+"00").substring(0,3))):new Date(NaN)}return(0,o.Z)(e)}function xn(e,t){(0,i.Z)(2,arguments);var r=Pt(e)-t;return r<=0&&(r+=7),sr(e,r)}function $n(e){return(0,i.Z)(1,arguments),xn(e,5)}function jn(e){return(0,i.Z)(1,arguments),xn(e,1)}function Kn(e){return(0,i.Z)(1,arguments),xn(e,6)}function Vn(e){return(0,i.Z)(1,arguments),xn(e,0)}function Hn(e){return(0,i.Z)(1,arguments),xn(e,4)}function Wn(e){return(0,i.Z)(1,arguments),xn(e,2)}function zn(e){return(0,i.Z)(1,arguments),xn(e,3)}function qn(e){return(0,i.Z)(1,arguments),Math.floor(e*V)}function Yn(e){(0,i.Z)(1,arguments);var t=e/W;return Math.floor(t)}function Zn(e,t){if(arguments.length<1)throw new TypeError("1 argument required, but only none provided present");var r=t&&"nearestTo"in t?(0,n.Z)(t.nearestTo):1;if(r<1||r>30)throw new RangeError("`options.nearestTo` must be between 1 and 30");var i=(0,o.Z)(e),a=i.getSeconds(),s=i.getMinutes()+a/60,c=Math.floor(s/r)*r,u=s%r,d=Math.round(u/r)*r;return new Date(i.getFullYear(),i.getMonth(),i.getDate(),i.getHours(),c+d)}function Qn(e){(0,i.Z)(1,arguments);var t=e/z;return Math.floor(t)}function Xn(e){return(0,i.Z)(1,arguments),e*$}function Jn(e){(0,i.Z)(1,arguments);var t=e/q;return Math.floor(t)}function eo(e,t){(0,i.Z)(2,arguments);var r=(0,o.Z)(e),a=(0,n.Z)(t),s=r.getFullYear(),c=r.getDate(),u=new Date(0);u.setFullYear(s,a,15),u.setHours(0,0,0,0);var d=Rt(u);return r.setMonth(a,Math.min(c,d)),r}function to(e,t){if((0,i.Z)(2,arguments),"object"!=typeof t||null===t)throw new RangeError("values parameter must be an object");var r=(0,o.Z)(e);return isNaN(r.getTime())?new Date(NaN):(null!=t.year&&r.setFullYear(t.year),null!=t.month&&(r=eo(r,t.month)),null!=t.date&&r.setDate((0,n.Z)(t.date)),null!=t.hours&&r.setHours((0,n.Z)(t.hours)),null!=t.minutes&&r.setMinutes((0,n.Z)(t.minutes)),null!=t.seconds&&r.setSeconds((0,n.Z)(t.seconds)),null!=t.milliseconds&&r.setMilliseconds((0,n.Z)(t.milliseconds)),r)}function ro(e,t){(0,i.Z)(2,arguments);var r=(0,o.Z)(e),a=(0,n.Z)(t);return r.setDate(a),r}function no(e,t,r){(0,i.Z)(2,arguments);var s=r||{},c=s.locale,u=c&&c.options&&c.options.weekStartsOn,d=null==u?0:(0,n.Z)(u),l=null==s.weekStartsOn?d:(0,n.Z)(s.weekStartsOn);if(!(l>=0&&l<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var p=(0,o.Z)(e),m=(0,n.Z)(t),g=p.getDay(),f=7-l;return a(p,m<0||m>6?m-(g+f)%7:((m%7+7)%7+f)%7-(g+f)%7)}function oo(e,t){(0,i.Z)(2,arguments);var r=(0,o.Z)(e),a=(0,n.Z)(t);return r.setMonth(0),r.setDate(a),r}function io(e,t){(0,i.Z)(2,arguments);var r=(0,o.Z)(e),a=(0,n.Z)(t);return r.setHours(a),r}function ao(e,t){(0,i.Z)(2,arguments);var r=(0,o.Z)(e);return a(r,(0,n.Z)(t)-Ft(r))}function so(e,t){(0,i.Z)(2,arguments);var r=(0,o.Z)(e),a=(0,n.Z)(t),s=Gt(r)-a;return r.setDate(r.getDate()-7*s),r}function co(e,t){(0,i.Z)(2,arguments);var r=(0,o.Z)(e),a=(0,n.Z)(t);return r.setMilliseconds(a),r}function uo(e,t){(0,i.Z)(2,arguments);var r=(0,o.Z)(e),a=(0,n.Z)(t);return r.setMinutes(a),r}function lo(e,t){(0,i.Z)(2,arguments);var r=(0,o.Z)(e),a=(0,n.Z)(t)-(Math.floor(r.getMonth()/3)+1);return eo(r,r.getMonth()+3*a)}function po(e,t){(0,i.Z)(2,arguments);var r=(0,o.Z)(e),a=(0,n.Z)(t);return r.setSeconds(a),r}function mo(e,t,r){(0,i.Z)(2,arguments);var a=(0,o.Z)(e),s=(0,n.Z)(t),c=Jt(a,r)-s;return a.setDate(a.getDate()-7*c),a}function go(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};(0,i.Z)(2,arguments);var a=r.locale,s=a&&a.options&&a.options.firstWeekContainsDate,c=null==s?1:(0,n.Z)(s),u=null==r.firstWeekContainsDate?c:(0,n.Z)(r.firstWeekContainsDate),d=(0,o.Z)(e),l=(0,n.Z)(t),p=(0,E.Z)(d,Qt(d,r)),m=new Date(0);return m.setFullYear(l,0,u),m.setHours(0,0,0,0),(d=Qt(m,r)).setDate(d.getDate()+p),d}function fo(e,t){(0,i.Z)(2,arguments);var r=(0,o.Z)(e),a=(0,n.Z)(t);return isNaN(r.getTime())?new Date(NaN):(r.setFullYear(a),r)}function So(e){(0,i.Z)(1,arguments);var t=(0,o.Z)(e),r=t.getFullYear(),n=10*Math.floor(r/10);return t.setFullYear(n,0,1),t.setHours(0,0,0,0),t}function ho(){return(0,Q.Z)(Date.now())}function yo(){var e=new Date,t=e.getFullYear(),r=e.getMonth(),n=e.getDate(),o=new Date(0);return o.setFullYear(t,r,n+1),o.setHours(0,0,0,0),o}function vo(){var e=new Date,t=e.getFullYear(),r=e.getMonth(),n=e.getDate(),o=new Date(0);return o.setFullYear(t,r,n-1),o.setHours(0,0,0,0),o}function Eo(e,t){return(0,i.Z)(2,arguments),p(e,-(0,n.Z)(t))}function Ao(e,t){return(0,i.Z)(2,arguments),f(e,-(0,n.Z)(t))}function _o(e,t){return(0,i.Z)(2,arguments),I(e,-(0,n.Z)(t))}function To(e,t){return(0,i.Z)(2,arguments),b(e,-(0,n.Z)(t))}function Io(e,t){return(0,i.Z)(2,arguments),w(e,-(0,n.Z)(t))}function bo(e,t){return(0,i.Z)(2,arguments),C(e,-(0,n.Z)(t))}function wo(e,t){return(0,i.Z)(2,arguments),D(e,-(0,n.Z)(t))}function Co(e){return(0,i.Z)(1,arguments),Math.floor(e*F)}function Do(e){return(0,i.Z)(1,arguments),Math.floor(e*H)}function Oo(e){return(0,i.Z)(1,arguments),Math.floor(e*W)}},65140:e=>{"use strict";var t="%[a-f0-9]{2}",r=new RegExp("("+t+")|([^%]+?)","gi"),n=new RegExp("("+t+")+","gi");function o(e,t){try{return[decodeURIComponent(e.join(""))]}catch(e){}if(1===e.length)return e;t=t||1;var r=e.slice(0,t),n=e.slice(t);return Array.prototype.concat.call([],o(r),o(n))}function i(e){try{return decodeURIComponent(e)}catch(i){for(var t=e.match(r)||[],n=1;n<t.length;n++)t=(e=o(t,n).join("")).match(r)||[];return e}}e.exports=function(e){if("string"!=typeof e)throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof e+"`");try{return e=e.replace(/\+/g," "),decodeURIComponent(e)}catch(t){return function(e){for(var t={"%FE%FF":"��","%FF%FE":"��"},r=n.exec(e);r;){try{t[r[0]]=decodeURIComponent(r[0])}catch(e){var o=i(r[0]);o!==r[0]&&(t[r[0]]=o)}r=n.exec(e)}t["%C2"]="�";for(var a=Object.keys(t),s=0;s<a.length;s++){var c=a[s];e=e.replace(new RegExp(c,"g"),t[c])}return e}(e)}}},6648:(e,t,r)=>{"use strict";var n=r(53571),o="function"==typeof Symbol&&"symbol"==typeof Symbol("foo"),i=Object.prototype.toString,a=Array.prototype.concat,s=Object.defineProperty,c=r(70138)(),u=s&&c,d=function(e,t,r,n){if(t in e)if(!0===n){if(e[t]===r)return}else if("function"!=typeof(o=n)||"[object Function]"!==i.call(o)||!n())return;var o;u?s(e,t,{configurable:!0,enumerable:!1,value:r,writable:!0}):e[t]=r},l=function(e,t){var r=arguments.length>2?arguments[2]:{},i=n(t);o&&(i=a.call(i,Object.getOwnPropertySymbols(t)));for(var s=0;s<i.length;s+=1)d(e,i[s],t[i[s]],r[i[s]])};l.supportsDescriptors=!!u,e.exports=l},69626:e=>{"use strict";function t(e,t){if(null==e)throw new TypeError("Cannot convert first argument to object");for(var r=Object(e),n=1;n<arguments.length;n++){var o=arguments[n];if(null!=o)for(var i=Object.keys(Object(o)),a=0,s=i.length;a<s;a++){var c=i[a],u=Object.getOwnPropertyDescriptor(o,c);void 0!==u&&u.enumerable&&(r[c]=o[c])}}return r}e.exports={assign:t,polyfill:function(){Object.assign||Object.defineProperty(Object,"assign",{enumerable:!1,configurable:!0,writable:!0,value:t})}}},70138:(e,t,r)=>{"use strict";var n=r(71013)("%Object.defineProperty%",!0),o=function(){if(n)try{return n({},"a",{value:1}),!0}catch(e){return!1}return!1};o.hasArrayLengthDefineBug=function(){if(!o())return null;try{return 1!==n([],"length",{value:1}).length}catch(e){return!0}},e.exports=o},49029:e=>{"use strict";e.exports=function(e){return e!=e}},29736:(e,t,r)=>{"use strict";var n=r(25592),o=r(6648),i=r(49029),a=r(46240),s=r(24645),c=n(a(),Number);o(c,{getPolyfill:a,implementation:i,shim:s}),e.exports=c},46240:(e,t,r)=>{"use strict";var n=r(49029);e.exports=function(){return Number.isNaN&&Number.isNaN(NaN)&&!Number.isNaN("a")?Number.isNaN:n}},24645:(e,t,r)=>{"use strict";var n=r(6648),o=r(46240);e.exports=function(){var e=o();return n(Number,{isNaN:e},{isNaN:function(){return Number.isNaN!==e}}),e}},33321:(e,t,r)=>{"use strict";r.r(t),r.d(t,{AsYouType:()=>Kr,AsYouTypeCustom:()=>jr,DIGITS:()=>V,DIGIT_PLACEHOLDER:()=>Ar,Metadata:()=>Yr,ParseError:()=>p,PhoneNumberMatcher:()=>yr,PhoneNumberSearch:()=>Cn,PhoneNumberSearchCustom:()=>_n,default:()=>Ve,findNumbers:()=>ar,findPhoneNumbers:()=>bn,findPhoneNumbersCustom:()=>Tn,findPhoneNumbersInText:()=>fr,format:()=>an,formatCustom:()=>nn,formatIncompletePhoneNumber:()=>Jr,formatNumber:()=>an,formatRFC3966:()=>te,getCountries:()=>Wr,getCountryCallingCode:()=>zr,getCountryCallingCodeCustom:()=>N,getExampleNumber:()=>Qr,getExtPrefix:()=>qr,getNumberType:()=>ln,getNumberTypeCustom:()=>cn,getPhoneCode:()=>zr,getPhoneCodeCustom:()=>N,isPossibleNumber:()=>mn,isPossiblePhoneNumber:()=>Ze,isSupportedCountry:()=>Vr,isValidNumber:()=>fn,isValidNumberCustom:()=>gn,isValidNumberForRegion:()=>hn,isValidPhoneNumber:()=>ze,parse:()=>tn,parseCustom:()=>en,parseDigits:()=>W,parseIncompletePhoneNumber:()=>z,parseNumber:()=>tn,parsePhoneNumber:()=>xe,parsePhoneNumberCharacter:()=>q,parsePhoneNumberFromString:()=>Ve,parsePhoneNumberWithError:()=>xe,parseRFC3966:()=>ee,searchNumbers:()=>cr,searchPhoneNumbers:()=>wn,searchPhoneNumbersCustom:()=>In,searchPhoneNumbersInText:()=>hr,validatePhoneNumberLength:()=>Je});const n={version:4,country_calling_codes:{1:["US","AG","AI","AS","BB","BM","BS","CA","DM","DO","GD","GU","JM","KN","KY","LC","MP","MS","PR","SX","TC","TT","VC","VG","VI"],7:["RU","KZ"],20:["EG"],27:["ZA"],30:["GR"],31:["NL"],32:["BE"],33:["FR"],34:["ES"],36:["HU"],39:["IT","VA"],40:["RO"],41:["CH"],43:["AT"],44:["GB","GG","IM","JE"],45:["DK"],46:["SE"],47:["NO","SJ"],48:["PL"],49:["DE"],51:["PE"],52:["MX"],53:["CU"],54:["AR"],55:["BR"],56:["CL"],57:["CO"],58:["VE"],60:["MY"],61:["AU","CC","CX"],62:["ID"],63:["PH"],64:["NZ"],65:["SG"],66:["TH"],81:["JP"],82:["KR"],84:["VN"],86:["CN"],90:["TR"],91:["IN"],92:["PK"],93:["AF"],94:["LK"],95:["MM"],98:["IR"],211:["SS"],212:["MA","EH"],213:["DZ"],216:["TN"],218:["LY"],220:["GM"],221:["SN"],222:["MR"],223:["ML"],224:["GN"],225:["CI"],226:["BF"],227:["NE"],228:["TG"],229:["BJ"],230:["MU"],231:["LR"],232:["SL"],233:["GH"],234:["NG"],235:["TD"],236:["CF"],237:["CM"],238:["CV"],239:["ST"],240:["GQ"],241:["GA"],242:["CG"],243:["CD"],244:["AO"],245:["GW"],246:["IO"],247:["AC"],248:["SC"],249:["SD"],250:["RW"],251:["ET"],252:["SO"],253:["DJ"],254:["KE"],255:["TZ"],256:["UG"],257:["BI"],258:["MZ"],260:["ZM"],261:["MG"],262:["RE","YT"],263:["ZW"],264:["NA"],265:["MW"],266:["LS"],267:["BW"],268:["SZ"],269:["KM"],290:["SH","TA"],291:["ER"],297:["AW"],298:["FO"],299:["GL"],350:["GI"],351:["PT"],352:["LU"],353:["IE"],354:["IS"],355:["AL"],356:["MT"],357:["CY"],358:["FI","AX"],359:["BG"],370:["LT"],371:["LV"],372:["EE"],373:["MD"],374:["AM"],375:["BY"],376:["AD"],377:["MC"],378:["SM"],380:["UA"],381:["RS"],382:["ME"],383:["XK"],385:["HR"],386:["SI"],387:["BA"],389:["MK"],420:["CZ"],421:["SK"],423:["LI"],500:["FK"],501:["BZ"],502:["GT"],503:["SV"],504:["HN"],505:["NI"],506:["CR"],507:["PA"],508:["PM"],509:["HT"],590:["GP","BL","MF"],591:["BO"],592:["GY"],593:["EC"],594:["GF"],595:["PY"],596:["MQ"],597:["SR"],598:["UY"],599:["CW","BQ"],670:["TL"],672:["NF"],673:["BN"],674:["NR"],675:["PG"],676:["TO"],677:["SB"],678:["VU"],679:["FJ"],680:["PW"],681:["WF"],682:["CK"],683:["NU"],685:["WS"],686:["KI"],687:["NC"],688:["TV"],689:["PF"],690:["TK"],691:["FM"],692:["MH"],850:["KP"],852:["HK"],853:["MO"],855:["KH"],856:["LA"],880:["BD"],886:["TW"],960:["MV"],961:["LB"],962:["JO"],963:["SY"],964:["IQ"],965:["KW"],966:["SA"],967:["YE"],968:["OM"],970:["PS"],971:["AE"],972:["IL"],973:["BH"],974:["QA"],975:["BT"],976:["MN"],977:["NP"],992:["TJ"],993:["TM"],994:["AZ"],995:["GE"],996:["KG"],998:["UZ"]},countries:{AC:["247","00","(?:[01589]\\d|[46])\\d{4}",[5,6]],AD:["376","00","(?:1|6\\d)\\d{7}|[135-9]\\d{5}",[6,8,9],[["(\\d{3})(\\d{3})","$1 $2",["[135-9]"]],["(\\d{4})(\\d{4})","$1 $2",["1"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["6"]]]],AE:["971","00","(?:[4-7]\\d|9[0-689])\\d{7}|800\\d{2,9}|[2-4679]\\d{7}",[5,6,7,8,9,10,11,12],[["(\\d{3})(\\d{2,9})","$1 $2",["60|8"]],["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["[236]|[479][2-8]"],"0$1"],["(\\d{3})(\\d)(\\d{5})","$1 $2 $3",["[479]"]],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["5"],"0$1"]],"0"],AF:["93","00","[2-7]\\d{8}",[9],[["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[2-7]"],"0$1"]],"0"],AG:["1","011","(?:268|[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"1|([457]\\d{6})$","268$1",0,"268"],AI:["1","011","(?:264|[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"1|([2457]\\d{6})$","264$1",0,"264"],AL:["355","00","(?:700\\d\\d|900)\\d{3}|8\\d{5,7}|(?:[2-5]|6\\d)\\d{7}",[6,7,8,9],[["(\\d{3})(\\d{3,4})","$1 $2",["80|9"],"0$1"],["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["4[2-6]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[2358][2-5]|4"],"0$1"],["(\\d{3})(\\d{5})","$1 $2",["[23578]"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["6"],"0$1"]],"0"],AM:["374","00","(?:[1-489]\\d|55|60|77)\\d{6}",[8],[["(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3",["[89]0"],"0 $1"],["(\\d{3})(\\d{5})","$1 $2",["2|3[12]"],"(0$1)"],["(\\d{2})(\\d{6})","$1 $2",["1|47"],"(0$1)"],["(\\d{2})(\\d{6})","$1 $2",["[3-9]"],"0$1"]],"0"],AO:["244","00","[29]\\d{8}",[9],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[29]"]]]],AR:["54","00","(?:11|[89]\\d\\d)\\d{8}|[2368]\\d{9}",[10,11],[["(\\d{4})(\\d{2})(\\d{4})","$1 $2-$3",["2(?:2[024-9]|3[0-59]|47|6[245]|9[02-8])|3(?:3[28]|4[03-9]|5[2-46-8]|7[1-578]|8[2-9])","2(?:[23]02|6(?:[25]|4[6-8])|9(?:[02356]|4[02568]|72|8[23]))|3(?:3[28]|4(?:[04679]|3[5-8]|5[4-68]|8[2379])|5(?:[2467]|3[237]|8[2-5])|7[1-578]|8(?:[2469]|3[2578]|5[4-8]|7[36-8]|8[5-8]))|2(?:2[24-9]|3[1-59]|47)","2(?:[23]02|6(?:[25]|4(?:64|[78]))|9(?:[02356]|4(?:[0268]|5[2-6])|72|8[23]))|3(?:3[28]|4(?:[04679]|3[78]|5(?:4[46]|8)|8[2379])|5(?:[2467]|3[237]|8[23])|7[1-578]|8(?:[2469]|3[278]|5[56][46]|86[3-6]))|2(?:2[24-9]|3[1-59]|47)|38(?:[58][78]|7[378])|3(?:4[35][56]|58[45]|8(?:[38]5|54|76))[4-6]","2(?:[23]02|6(?:[25]|4(?:64|[78]))|9(?:[02356]|4(?:[0268]|5[2-6])|72|8[23]))|3(?:3[28]|4(?:[04679]|3(?:5(?:4[0-25689]|[56])|[78])|58|8[2379])|5(?:[2467]|3[237]|8(?:[23]|4(?:[45]|60)|5(?:4[0-39]|5|64)))|7[1-578]|8(?:[2469]|3[278]|54(?:4|5[13-7]|6[89])|86[3-6]))|2(?:2[24-9]|3[1-59]|47)|38(?:[58][78]|7[378])|3(?:454|85[56])[46]|3(?:4(?:36|5[56])|8(?:[38]5|76))[4-6]"],"0$1",1],["(\\d{2})(\\d{4})(\\d{4})","$1 $2-$3",["1"],"0$1",1],["(\\d{3})(\\d{3})(\\d{4})","$1-$2-$3",["[68]"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2-$3",["[23]"],"0$1",1],["(\\d)(\\d{4})(\\d{2})(\\d{4})","$2 15-$3-$4",["9(?:2[2-469]|3[3-578])","9(?:2(?:2[024-9]|3[0-59]|47|6[245]|9[02-8])|3(?:3[28]|4[03-9]|5[2-46-8]|7[1-578]|8[2-9]))","9(?:2(?:[23]02|6(?:[25]|4[6-8])|9(?:[02356]|4[02568]|72|8[23]))|3(?:3[28]|4(?:[04679]|3[5-8]|5[4-68]|8[2379])|5(?:[2467]|3[237]|8[2-5])|7[1-578]|8(?:[2469]|3[2578]|5[4-8]|7[36-8]|8[5-8])))|92(?:2[24-9]|3[1-59]|47)","9(?:2(?:[23]02|6(?:[25]|4(?:64|[78]))|9(?:[02356]|4(?:[0268]|5[2-6])|72|8[23]))|3(?:3[28]|4(?:[04679]|3[78]|5(?:4[46]|8)|8[2379])|5(?:[2467]|3[237]|8[23])|7[1-578]|8(?:[2469]|3[278]|5(?:[56][46]|[78])|7[378]|8(?:6[3-6]|[78]))))|92(?:2[24-9]|3[1-59]|47)|93(?:4[35][56]|58[45]|8(?:[38]5|54|76))[4-6]","9(?:2(?:[23]02|6(?:[25]|4(?:64|[78]))|9(?:[02356]|4(?:[0268]|5[2-6])|72|8[23]))|3(?:3[28]|4(?:[04679]|3(?:5(?:4[0-25689]|[56])|[78])|5(?:4[46]|8)|8[2379])|5(?:[2467]|3[237]|8(?:[23]|4(?:[45]|60)|5(?:4[0-39]|5|64)))|7[1-578]|8(?:[2469]|3[278]|5(?:4(?:4|5[13-7]|6[89])|[56][46]|[78])|7[378]|8(?:6[3-6]|[78]))))|92(?:2[24-9]|3[1-59]|47)|93(?:4(?:36|5[56])|8(?:[38]5|76))[4-6]"],"0$1",0,"$1 $2 $3-$4"],["(\\d)(\\d{2})(\\d{4})(\\d{4})","$2 15-$3-$4",["91"],"0$1",0,"$1 $2 $3-$4"],["(\\d{3})(\\d{3})(\\d{5})","$1-$2-$3",["8"],"0$1"],["(\\d)(\\d{3})(\\d{3})(\\d{4})","$2 15-$3-$4",["9"],"0$1",0,"$1 $2 $3-$4"]],"0",0,"0?(?:(11|2(?:2(?:02?|[13]|2[13-79]|4[1-6]|5[2457]|6[124-8]|7[1-4]|8[13-6]|9[1267])|3(?:02?|1[467]|2[03-6]|3[13-8]|[49][2-6]|5[2-8]|[67])|4(?:7[3-578]|9)|6(?:[0136]|2[24-6]|4[6-8]?|5[15-8])|80|9(?:0[1-3]|[19]|2\\d|3[1-6]|4[02568]?|5[2-4]|6[2-46]|72?|8[23]?))|3(?:3(?:2[79]|6|8[2578])|4(?:0[0-24-9]|[12]|3[5-8]?|4[24-7]|5[4-68]?|6[02-9]|7[126]|8[2379]?|9[1-36-8])|5(?:1|2[1245]|3[237]?|4[1-46-9]|6[2-4]|7[1-6]|8[2-5]?)|6[24]|7(?:[069]|1[1568]|2[15]|3[145]|4[13]|5[14-8]|7[2-57]|8[126])|8(?:[01]|2[15-7]|3[2578]?|4[13-6]|5[4-8]?|6[1-357-9]|7[36-8]?|8[5-8]?|9[124])))15)?","9$1"],AS:["1","011","(?:[58]\\d\\d|684|900)\\d{7}",[10],0,"1",0,"1|([267]\\d{6})$","684$1",0,"684"],AT:["43","00","1\\d{3,12}|2\\d{6,12}|43(?:(?:0\\d|5[02-9])\\d{3,9}|2\\d{4,5}|[3467]\\d{4}|8\\d{4,6}|9\\d{4,7})|5\\d{4,12}|8\\d{7,12}|9\\d{8,12}|(?:[367]\\d|4[0-24-9])\\d{4,11}",[4,5,6,7,8,9,10,11,12,13],[["(\\d)(\\d{3,12})","$1 $2",["1(?:11|[2-9])"],"0$1"],["(\\d{3})(\\d{2})","$1 $2",["517"],"0$1"],["(\\d{2})(\\d{3,5})","$1 $2",["5[079]"],"0$1"],["(\\d{3})(\\d{3,10})","$1 $2",["(?:31|4)6|51|6(?:5[0-3579]|[6-9])|7(?:20|32|8)|[89]"],"0$1"],["(\\d{4})(\\d{3,9})","$1 $2",["[2-467]|5[2-6]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["5"],"0$1"],["(\\d{2})(\\d{4})(\\d{4,7})","$1 $2 $3",["5"],"0$1"]],"0"],AU:["61","001[14-689]|14(?:1[14]|34|4[17]|[56]6|7[47]|88)0011","1(?:[0-79]\\d{7,8}|8[0-24-9]\\d{7})|[2-478]\\d{8}|1\\d{4,7}",[5,6,7,8,9,10],[["(\\d{2})(\\d{3,4})","$1 $2",["16"],"0$1"],["(\\d{2})(\\d{3})(\\d{2,4})","$1 $2 $3",["16"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["14|4"],"0$1"],["(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["[2378]"],"(0$1)"],["(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["1(?:30|[89])"]]],"0",0,"0|(183[12])",0,0,0,[["(?:(?:2(?:[0-26-9]\\d|3[0-8]|4[02-9]|5[0135-9])|3(?:[0-3589]\\d|4[0-578]|6[1-9]|7[0-35-9])|7(?:[013-57-9]\\d|2[0-8]))\\d{3}|8(?:51(?:0(?:0[03-9]|[12479]\\d|3[2-9]|5[0-8]|6[1-9]|8[0-7])|1(?:[0235689]\\d|1[0-69]|4[0-589]|7[0-47-9])|2(?:0[0-79]|[18][13579]|2[14-9]|3[0-46-9]|[4-6]\\d|7[89]|9[0-4]))|(?:6[0-8]|[78]\\d)\\d{3}|9(?:[02-9]\\d{3}|1(?:(?:[0-58]\\d|6[0135-9])\\d|7(?:0[0-24-9]|[1-9]\\d)|9(?:[0-46-9]\\d|5[0-79])))))\\d{3}",[9]],["4(?:83[0-38]|93[0-4])\\d{5}|4(?:[0-3]\\d|4[047-9]|5[0-25-9]|6[06-9]|7[02-9]|8[0-24-9]|9[0-27-9])\\d{6}",[9]],["180(?:0\\d{3}|2)\\d{3}",[7,10]],["190[0-26]\\d{6}",[10]],0,0,0,["163\\d{2,6}",[5,6,7,8,9]],["14(?:5(?:1[0458]|[23][458])|71\\d)\\d{4}",[9]],["13(?:00\\d{3}|45[0-4])\\d{3}|13\\d{4}",[6,8,10]]],"0011"],AW:["297","00","(?:[25-79]\\d\\d|800)\\d{4}",[7],[["(\\d{3})(\\d{4})","$1 $2",["[25-9]"]]]],AX:["358","00|99(?:[01469]|5(?:[14]1|3[23]|5[59]|77|88|9[09]))","2\\d{4,9}|35\\d{4,5}|(?:60\\d\\d|800)\\d{4,6}|7\\d{5,11}|(?:[14]\\d|3[0-46-9]|50)\\d{4,8}",[5,6,7,8,9,10,11,12],0,"0",0,0,0,0,"18",0,"00"],AZ:["994","00","365\\d{6}|(?:[124579]\\d|60|88)\\d{7}",[9],[["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["90"],"0$1"],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["1[28]|2|365|46","1[28]|2|365|46","1[28]|2|365(?:[0-46-9]|5[0-35-9])|46"],"(0$1)"],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[13-9]"],"0$1"]],"0"],BA:["387","00","6\\d{8}|(?:[35689]\\d|49|70)\\d{6}",[8,9],[["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["6[1-3]|[7-9]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2-$3",["[3-5]|6[56]"],"0$1"],["(\\d{2})(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3 $4",["6"],"0$1"]],"0"],BB:["1","011","(?:246|[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"1|([2-9]\\d{6})$","246$1",0,"246"],BD:["880","00","1\\d{9}|2\\d{7,8}|88\\d{4,6}|(?:8[0-79]|9\\d)\\d{4,8}|(?:[346]\\d|[57])\\d{5,8}",[6,7,8,9,10],[["(\\d{2})(\\d{4,6})","$1-$2",["31[5-8]|[459]1"],"0$1"],["(\\d{3})(\\d{3,7})","$1-$2",["3(?:[67]|8[013-9])|4(?:6[168]|7|[89][18])|5(?:6[128]|9)|6(?:28|4[14]|5)|7[2-589]|8(?:0[014-9]|[12])|9[358]|(?:3[2-5]|4[235]|5[2-578]|6[0389]|76|8[3-7]|9[24])1|(?:44|66)[01346-9]"],"0$1"],["(\\d{4})(\\d{3,6})","$1-$2",["[13-9]"],"0$1"],["(\\d)(\\d{7,8})","$1-$2",["2"],"0$1"]],"0"],BE:["32","00","4\\d{8}|[1-9]\\d{7}",[8,9],[["(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3",["(?:80|9)0"],"0$1"],["(\\d)(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[239]|4[23]"],"0$1"],["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[15-8]"],"0$1"],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["4"],"0$1"]],"0"],BF:["226","00","[025-7]\\d{7}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[025-7]"]]]],BG:["359","00","[2-7]\\d{6,7}|[89]\\d{6,8}|2\\d{5}",[6,7,8,9],[["(\\d)(\\d)(\\d{2})(\\d{2})","$1 $2 $3 $4",["2"],"0$1"],["(\\d{3})(\\d{4})","$1 $2",["43[1-6]|70[1-9]"],"0$1"],["(\\d)(\\d{3})(\\d{3,4})","$1 $2 $3",["2"],"0$1"],["(\\d{2})(\\d{3})(\\d{2,3})","$1 $2 $3",["[356]|4[124-7]|7[1-9]|8[1-6]|9[1-7]"],"0$1"],["(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3",["(?:70|8)0"],"0$1"],["(\\d{3})(\\d{3})(\\d{2})","$1 $2 $3",["43[1-7]|7"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[48]|9[08]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["9"],"0$1"]],"0"],BH:["973","00","[136-9]\\d{7}",[8],[["(\\d{4})(\\d{4})","$1 $2",["[13679]|8[047]"]]]],BI:["257","00","(?:[267]\\d|31)\\d{6}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[2367]"]]]],BJ:["229","00","[25689]\\d{7}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[25689]"]]]],BL:["590","00","(?:590|(?:69|80)\\d|976)\\d{6}",[9],0,"0",0,0,0,0,0,[["590(?:2[7-9]|5[12]|87)\\d{4}"],["69(?:0\\d\\d|1(?:2[2-9]|3[0-5]))\\d{4}"],["80[0-5]\\d{6}"],0,0,0,0,0,["976[01]\\d{5}"]]],BM:["1","011","(?:441|[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"1|([2-8]\\d{6})$","441$1",0,"441"],BN:["673","00","[2-578]\\d{6}",[7],[["(\\d{3})(\\d{4})","$1 $2",["[2-578]"]]]],BO:["591","00(?:1\\d)?","(?:[2-467]\\d\\d|8001)\\d{5}",[8,9],[["(\\d)(\\d{7})","$1 $2",["[23]|4[46]"]],["(\\d{8})","$1",["[67]"]],["(\\d{3})(\\d{2})(\\d{4})","$1 $2 $3",["8"]]],"0",0,"0(1\\d)?"],BQ:["599","00","(?:[34]1|7\\d)\\d{5}",[7],0,0,0,0,0,0,"[347]"],BR:["55","00(?:1[245]|2[1-35]|31|4[13]|[56]5|99)","(?:[1-46-9]\\d\\d|5(?:[0-46-9]\\d|5[0-24679]))\\d{8}|[1-9]\\d{9}|[3589]\\d{8}|[34]\\d{7}",[8,9,10,11],[["(\\d{4})(\\d{4})","$1-$2",["300|4(?:0[02]|37)","4(?:02|37)0|[34]00"]],["(\\d{3})(\\d{2,3})(\\d{4})","$1 $2 $3",["(?:[358]|90)0"],"0$1"],["(\\d{2})(\\d{4})(\\d{4})","$1 $2-$3",["(?:[14689][1-9]|2[12478]|3[1-578]|5[13-5]|7[13-579])[2-57]"],"($1)"],["(\\d{2})(\\d{5})(\\d{4})","$1 $2-$3",["[16][1-9]|[2-57-9]"],"($1)"]],"0",0,"(?:0|90)(?:(1[245]|2[1-35]|31|4[13]|[56]5|99)(\\d{10,11}))?","$2"],BS:["1","011","(?:242|[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"1|([3-8]\\d{6})$","242$1",0,"242"],BT:["975","00","[17]\\d{7}|[2-8]\\d{6}",[7,8],[["(\\d)(\\d{3})(\\d{3})","$1 $2 $3",["[2-68]|7[246]"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["1[67]|7"]]]],BW:["267","00","(?:0800|(?:[37]|800)\\d)\\d{6}|(?:[2-6]\\d|90)\\d{5}",[7,8,10],[["(\\d{2})(\\d{5})","$1 $2",["90"]],["(\\d{3})(\\d{4})","$1 $2",["[24-6]|3[15-79]"]],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[37]"]],["(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["0"]],["(\\d{3})(\\d{4})(\\d{3})","$1 $2 $3",["8"]]]],BY:["375","810","(?:[12]\\d|33|44|902)\\d{7}|8(?:0[0-79]\\d{5,7}|[1-7]\\d{9})|8(?:1[0-489]|[5-79]\\d)\\d{7}|8[1-79]\\d{6,7}|8[0-79]\\d{5}|8\\d{5}",[6,7,8,9,10,11],[["(\\d{3})(\\d{3})","$1 $2",["800"],"8 $1"],["(\\d{3})(\\d{2})(\\d{2,4})","$1 $2 $3",["800"],"8 $1"],["(\\d{4})(\\d{2})(\\d{3})","$1 $2-$3",["1(?:5[169]|6[3-5]|7[179])|2(?:1[35]|2[34]|3[3-5])","1(?:5[169]|6(?:3[1-3]|4|5[125])|7(?:1[3-9]|7[0-24-6]|9[2-7]))|2(?:1[35]|2[34]|3[3-5])"],"8 0$1"],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2-$3-$4",["1(?:[56]|7[467])|2[1-3]"],"8 0$1"],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2-$3-$4",["[1-4]"],"8 0$1"],["(\\d{3})(\\d{3,4})(\\d{4})","$1 $2 $3",["[89]"],"8 $1"]],"8",0,"0|80?",0,0,0,0,"8~10"],BZ:["501","00","(?:0800\\d|[2-8])\\d{6}",[7,11],[["(\\d{3})(\\d{4})","$1-$2",["[2-8]"]],["(\\d)(\\d{3})(\\d{4})(\\d{3})","$1-$2-$3-$4",["0"]]]],CA:["1","011","(?:[2-8]\\d|90)\\d{8}",[10],0,"1",0,0,0,0,0,[["(?:2(?:04|[23]6|[48]9|50)|3(?:06|43|6[578])|4(?:03|1[68]|3[178]|50|74)|5(?:06|1[49]|48|79|8[17])|6(?:04|13|39|47|72)|7(?:0[59]|78|8[02])|8(?:[06]7|19|25|73)|90[25])[2-9]\\d{6}"],[""],["8(?:00|33|44|55|66|77|88)[2-9]\\d{6}"],["900[2-9]\\d{6}"],["52(?:3(?:[2-46-9][02-9]\\d|5(?:[02-46-9]\\d|5[0-46-9]))|4(?:[2-478][02-9]\\d|5(?:[034]\\d|2[024-9]|5[0-46-9])|6(?:0[1-9]|[2-9]\\d)|9(?:[05-9]\\d|2[0-5]|49)))\\d{4}|52[34][2-9]1[02-9]\\d{4}|(?:5(?:00|2[12]|33|44|66|77|88)|622)[2-9]\\d{6}"],0,0,0,["600[2-9]\\d{6}"]]],CC:["61","001[14-689]|14(?:1[14]|34|4[17]|[56]6|7[47]|88)0011","1(?:[0-79]\\d|8[0-24-9])\\d{7}|[148]\\d{8}|1\\d{5,7}",[6,7,8,9,10],0,"0",0,"0|([59]\\d{7})$","8$1",0,0,[["8(?:51(?:0(?:02|31|60|89)|1(?:18|76)|223)|91(?:0(?:1[0-2]|29)|1(?:[28]2|50|79)|2(?:10|64)|3(?:[06]8|22)|4[29]8|62\\d|70[23]|959))\\d{3}",[9]],["4(?:83[0-38]|93[0-4])\\d{5}|4(?:[0-3]\\d|4[047-9]|5[0-25-9]|6[06-9]|7[02-9]|8[0-24-9]|9[0-27-9])\\d{6}",[9]],["180(?:0\\d{3}|2)\\d{3}",[7,10]],["190[0-26]\\d{6}",[10]],0,0,0,0,["14(?:5(?:1[0458]|[23][458])|71\\d)\\d{4}",[9]],["13(?:00\\d{3}|45[0-4])\\d{3}|13\\d{4}",[6,8,10]]],"0011"],CD:["243","00","[189]\\d{8}|[1-68]\\d{6}",[7,9],[["(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3",["88"],"0$1"],["(\\d{2})(\\d{5})","$1 $2",["[1-6]"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["1"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[89]"],"0$1"]],"0"],CF:["236","00","(?:[27]\\d{3}|8776)\\d{4}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[278]"]]]],CG:["242","00","(?:0\\d\\d|222|800)\\d{6}",[9],[["(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["8"]],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[02]"]]]],CH:["41","00","8\\d{11}|[2-9]\\d{8}",[9],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["8[047]|90"],"0$1"],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[2-79]|81"],"0$1"],["(\\d{3})(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4 $5",["8"],"0$1"]],"0"],CI:["225","00","[02]\\d{9}",[10],[["(\\d{2})(\\d{2})(\\d)(\\d{5})","$1 $2 $3 $4",["2"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{4})","$1 $2 $3 $4",["0"]]]],CK:["682","00","[2-578]\\d{4}",[5],[["(\\d{2})(\\d{3})","$1 $2",["[2-578]"]]]],CL:["56","(?:0|1(?:1[0-69]|2[02-5]|5[13-58]|69|7[0167]|8[018]))0","12300\\d{6}|6\\d{9,10}|[2-9]\\d{8}",[9,10,11],[["(\\d{5})(\\d{4})","$1 $2",["219","2196"],"($1)"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["44"]],["(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["2[1-3]"],"($1)"],["(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["9[2-9]"]],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["3[2-5]|[47]|5[1-3578]|6[13-57]|8(?:0[1-9]|[1-9])"],"($1)"],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["60|8"]],["(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["1"]],["(\\d{3})(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3 $4",["60"]]]],CM:["237","00","[26]\\d{8}|88\\d{6,7}",[8,9],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["88"]],["(\\d)(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4 $5",["[26]|88"]]]],CN:["86","00|1(?:[12]\\d|79)\\d\\d00","1[127]\\d{8,9}|2\\d{9}(?:\\d{2})?|[12]\\d{6,7}|86\\d{6}|(?:1[03-689]\\d|6)\\d{7,9}|(?:[3-579]\\d|8[0-57-9])\\d{6,9}",[7,8,9,10,11,12],[["(\\d{2})(\\d{5,6})","$1 $2",["(?:10|2[0-57-9])[19]","(?:10|2[0-57-9])(?:10|9[56])","(?:10|2[0-57-9])(?:100|9[56])"],"0$1"],["(\\d{3})(\\d{5,6})","$1 $2",["3(?:[157]|35|49|9[1-68])|4(?:[17]|2[179]|6[47-9]|8[23])|5(?:[1357]|2[37]|4[36]|6[1-46]|80)|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[1579]|2[248]|3[014-9]|4[3-6]|6[023689])|8(?:1[236-8]|2[5-7]|[37]|8[36-8]|9[1-8])|9(?:0[1-3689]|1[1-79]|[379]|4[13]|5[1-5])|(?:4[35]|59|85)[1-9]","(?:3(?:[157]\\d|35|49|9[1-68])|4(?:[17]\\d|2[179]|[35][1-9]|6[47-9]|8[23])|5(?:[1357]\\d|2[37]|4[36]|6[1-46]|80|9[1-9])|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[1579]\\d|2[248]|3[014-9]|4[3-6]|6[023689])|8(?:1[236-8]|2[5-7]|[37]\\d|5[1-9]|8[36-8]|9[1-8])|9(?:0[1-3689]|1[1-79]|[379]\\d|4[13]|5[1-5]))[19]","85[23](?:10|95)|(?:3(?:[157]\\d|35|49|9[1-68])|4(?:[17]\\d|2[179]|[35][1-9]|6[47-9]|8[23])|5(?:[1357]\\d|2[37]|4[36]|6[1-46]|80|9[1-9])|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[1579]\\d|2[248]|3[014-9]|4[3-6]|6[023689])|8(?:1[236-8]|2[5-7]|[37]\\d|5[14-9]|8[36-8]|9[1-8])|9(?:0[1-3689]|1[1-79]|[379]\\d|4[13]|5[1-5]))(?:10|9[56])","85[23](?:100|95)|(?:3(?:[157]\\d|35|49|9[1-68])|4(?:[17]\\d|2[179]|[35][1-9]|6[47-9]|8[23])|5(?:[1357]\\d|2[37]|4[36]|6[1-46]|80|9[1-9])|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[1579]\\d|2[248]|3[014-9]|4[3-6]|6[023689])|8(?:1[236-8]|2[5-7]|[37]\\d|5[14-9]|8[36-8]|9[1-8])|9(?:0[1-3689]|1[1-79]|[379]\\d|4[13]|5[1-5]))(?:100|9[56])"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["(?:4|80)0"]],["(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["10|2(?:[02-57-9]|1[1-9])","10|2(?:[02-57-9]|1[1-9])","10[0-79]|2(?:[02-57-9]|1[1-79])|(?:10|21)8(?:0[1-9]|[1-9])"],"0$1",1],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["3(?:[3-59]|7[02-68])|4(?:[26-8]|3[3-9]|5[2-9])|5(?:3[03-9]|[468]|7[028]|9[2-46-9])|6|7(?:[0-247]|3[04-9]|5[0-4689]|6[2368])|8(?:[1-358]|9[1-7])|9(?:[013479]|5[1-5])|(?:[34]1|55|79|87)[02-9]"],"0$1",1],["(\\d{3})(\\d{7,8})","$1 $2",["9"]],["(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["80"],"0$1",1],["(\\d{3})(\\d{4})(\\d{4})","$1 $2 $3",["[3-578]"],"0$1",1],["(\\d{3})(\\d{4})(\\d{4})","$1 $2 $3",["1[3-9]"]],["(\\d{2})(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3 $4",["[12]"],"0$1",1]],"0",0,"0|(1(?:[12]\\d|79)\\d\\d)",0,0,0,0,"00"],CO:["57","00(?:4(?:[14]4|56)|[579])","(?:(?:1\\d|[36])\\d{3}|9101)\\d{6}|[124-8]\\d{7}",[8,10,11],[["(\\d)(\\d{7})","$1 $2",["[146][2-9]|[2578]"],"($1)"],["(\\d{3})(\\d{7})","$1 $2",["6"],"($1)"],["(\\d{3})(\\d{7})","$1 $2",["[39]"]],["(\\d)(\\d{3})(\\d{7})","$1-$2-$3",["1"],"0$1",0,"$1 $2 $3"]],"0",0,"0([3579]|4(?:[14]4|56))?"],CR:["506","00","(?:8\\d|90)\\d{8}|(?:[24-8]\\d{3}|3005)\\d{4}",[8,10],[["(\\d{4})(\\d{4})","$1 $2",["[2-7]|8[3-9]"]],["(\\d{3})(\\d{3})(\\d{4})","$1-$2-$3",["[89]"]]],0,0,"(19(?:0[0-2468]|1[09]|20|66|77|99))"],CU:["53","119","[27]\\d{6,7}|[34]\\d{5,7}|(?:5|8\\d\\d)\\d{7}",[6,7,8,10],[["(\\d{2})(\\d{4,6})","$1 $2",["2[1-4]|[34]"],"(0$1)"],["(\\d)(\\d{6,7})","$1 $2",["7"],"(0$1)"],["(\\d)(\\d{7})","$1 $2",["5"],"0$1"],["(\\d{3})(\\d{7})","$1 $2",["8"],"0$1"]],"0"],CV:["238","0","(?:[2-59]\\d\\d|800)\\d{4}",[7],[["(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3",["[2-589]"]]]],CW:["599","00","(?:[34]1|60|(?:7|9\\d)\\d)\\d{5}",[7,8],[["(\\d{3})(\\d{4})","$1 $2",["[3467]"]],["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["9[4-8]"]]],0,0,0,0,0,"[69]"],CX:["61","001[14-689]|14(?:1[14]|34|4[17]|[56]6|7[47]|88)0011","1(?:[0-79]\\d|8[0-24-9])\\d{7}|[148]\\d{8}|1\\d{5,7}",[6,7,8,9,10],0,"0",0,"0|([59]\\d{7})$","8$1",0,0,[["8(?:51(?:0(?:01|30|59|88)|1(?:17|46|75)|2(?:22|35))|91(?:00[6-9]|1(?:[28]1|49|78)|2(?:09|63)|3(?:12|26|75)|4(?:56|97)|64\\d|7(?:0[01]|1[0-2])|958))\\d{3}",[9]],["4(?:83[0-38]|93[0-4])\\d{5}|4(?:[0-3]\\d|4[047-9]|5[0-25-9]|6[06-9]|7[02-9]|8[0-24-9]|9[0-27-9])\\d{6}",[9]],["180(?:0\\d{3}|2)\\d{3}",[7,10]],["190[0-26]\\d{6}",[10]],0,0,0,0,["14(?:5(?:1[0458]|[23][458])|71\\d)\\d{4}",[9]],["13(?:00\\d{3}|45[0-4])\\d{3}|13\\d{4}",[6,8,10]]],"0011"],CY:["357","00","(?:[279]\\d|[58]0)\\d{6}",[8],[["(\\d{2})(\\d{6})","$1 $2",["[257-9]"]]]],CZ:["420","00","(?:[2-578]\\d|60)\\d{7}|9\\d{8,11}",[9],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[2-8]|9[015-7]"]],["(\\d{2})(\\d{3})(\\d{3})(\\d{2})","$1 $2 $3 $4",["96"]],["(\\d{2})(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3 $4",["9"]],["(\\d{3})(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3 $4",["9"]]]],DE:["49","00","[2579]\\d{5,14}|49(?:[34]0|69|8\\d)\\d\\d?|49(?:37|49|60|7[089]|9\\d)\\d{1,3}|49(?:[12]\\d|3[2-689]|7[1-7])\\d{1,8}|(?:1|[368]\\d|4[0-8])\\d{3,13}|49(?:[05]\\d|31|[46][1-8])\\d{1,9}",[4,5,6,7,8,9,10,11,12,13,14,15],[["(\\d{2})(\\d{3,13})","$1 $2",["3[02]|40|[68]9"],"0$1"],["(\\d{3})(\\d{3,12})","$1 $2",["2(?:0[1-389]|1[124]|2[18]|3[14])|3(?:[35-9][15]|4[015])|906|(?:2[4-9]|4[2-9]|[579][1-9]|[68][1-8])1","2(?:0[1-389]|12[0-8])|3(?:[35-9][15]|4[015])|906|2(?:[13][14]|2[18])|(?:2[4-9]|4[2-9]|[579][1-9]|[68][1-8])1"],"0$1"],["(\\d{4})(\\d{2,11})","$1 $2",["[24-6]|3(?:[3569][02-46-9]|4[2-4679]|7[2-467]|8[2-46-8])|70[2-8]|8(?:0[2-9]|[1-8])|90[7-9]|[79][1-9]","[24-6]|3(?:3(?:0[1-467]|2[127-9]|3[124578]|7[1257-9]|8[1256]|9[145])|4(?:2[135]|4[13578]|9[1346])|5(?:0[14]|2[1-3589]|6[1-4]|7[13468]|8[13568])|6(?:2[1-489]|3[124-6]|6[13]|7[12579]|8[1-356]|9[135])|7(?:2[1-7]|4[145]|6[1-5]|7[1-4])|8(?:21|3[1468]|6|7[1467]|8[136])|9(?:0[12479]|2[1358]|4[134679]|6[1-9]|7[136]|8[147]|9[1468]))|70[2-8]|8(?:0[2-9]|[1-8])|90[7-9]|[79][1-9]|3[68]4[1347]|3(?:47|60)[1356]|3(?:3[46]|46|5[49])[1246]|3[4579]3[1357]"],"0$1"],["(\\d{3})(\\d{4})","$1 $2",["138"],"0$1"],["(\\d{5})(\\d{2,10})","$1 $2",["3"],"0$1"],["(\\d{3})(\\d{5,11})","$1 $2",["181"],"0$1"],["(\\d{3})(\\d)(\\d{4,10})","$1 $2 $3",["1(?:3|80)|9"],"0$1"],["(\\d{3})(\\d{7,8})","$1 $2",["1[67]"],"0$1"],["(\\d{3})(\\d{7,12})","$1 $2",["8"],"0$1"],["(\\d{5})(\\d{6})","$1 $2",["185","1850","18500"],"0$1"],["(\\d{3})(\\d{4})(\\d{4})","$1 $2 $3",["7"],"0$1"],["(\\d{4})(\\d{7})","$1 $2",["18[68]"],"0$1"],["(\\d{5})(\\d{6})","$1 $2",["15[0568]"],"0$1"],["(\\d{4})(\\d{7})","$1 $2",["15[1279]"],"0$1"],["(\\d{3})(\\d{8})","$1 $2",["18"],"0$1"],["(\\d{3})(\\d{2})(\\d{7,8})","$1 $2 $3",["1(?:6[023]|7)"],"0$1"],["(\\d{4})(\\d{2})(\\d{7})","$1 $2 $3",["15[279]"],"0$1"],["(\\d{3})(\\d{2})(\\d{8})","$1 $2 $3",["15"],"0$1"]],"0"],DJ:["253","00","(?:2\\d|77)\\d{6}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[27]"]]]],DK:["45","00","[2-9]\\d{7}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[2-9]"]]]],DM:["1","011","(?:[58]\\d\\d|767|900)\\d{7}",[10],0,"1",0,"1|([2-7]\\d{6})$","767$1",0,"767"],DO:["1","011","(?:[58]\\d\\d|900)\\d{7}",[10],0,"1",0,0,0,0,"8001|8[024]9"],DZ:["213","00","(?:[1-4]|[5-79]\\d|80)\\d{7}",[8,9],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[1-4]"],"0$1"],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["9"],"0$1"],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[5-8]"],"0$1"]],"0"],EC:["593","00","1\\d{9,10}|(?:[2-7]|9\\d)\\d{7}",[8,9,10,11],[["(\\d)(\\d{3})(\\d{4})","$1 $2-$3",["[2-7]"],"(0$1)",0,"$1-$2-$3"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["9"],"0$1"],["(\\d{4})(\\d{3})(\\d{3,4})","$1 $2 $3",["1"]]],"0"],EE:["372","00","8\\d{9}|[4578]\\d{7}|(?:[3-8]\\d|90)\\d{5}",[7,8,10],[["(\\d{3})(\\d{4})","$1 $2",["[369]|4[3-8]|5(?:[0-2]|5[0-478]|6[45])|7[1-9]|88","[369]|4[3-8]|5(?:[02]|1(?:[0-8]|95)|5[0-478]|6(?:4[0-4]|5[1-589]))|7[1-9]|88"]],["(\\d{4})(\\d{3,4})","$1 $2",["[45]|8(?:00|[1-49])","[45]|8(?:00[1-9]|[1-49])"]],["(\\d{2})(\\d{2})(\\d{4})","$1 $2 $3",["7"]],["(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["8"]]]],EG:["20","00","[189]\\d{8,9}|[24-6]\\d{8}|[135]\\d{7}",[8,9,10],[["(\\d)(\\d{7,8})","$1 $2",["[23]"],"0$1"],["(\\d{2})(\\d{6,7})","$1 $2",["1[35]|[4-6]|8[2468]|9[235-7]"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["[189]"],"0$1"]],"0"],EH:["212","00","[5-8]\\d{8}",[9],0,"0",0,0,0,0,"528[89]"],ER:["291","00","[178]\\d{6}",[7],[["(\\d)(\\d{3})(\\d{3})","$1 $2 $3",["[178]"],"0$1"]],"0"],ES:["34","00","[5-9]\\d{8}",[9],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[89]00"]],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[5-9]"]]]],ET:["251","00","(?:11|[2-59]\\d)\\d{7}",[9],[["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[1-59]"],"0$1"]],"0"],FI:["358","00|99(?:[01469]|5(?:[14]1|3[23]|5[59]|77|88|9[09]))","[1-35689]\\d{4}|7\\d{10,11}|(?:[124-7]\\d|3[0-46-9])\\d{8}|[1-9]\\d{5,8}",[5,6,7,8,9,10,11,12],[["(\\d)(\\d{4,9})","$1 $2",["[2568][1-8]|3(?:0[1-9]|[1-9])|9"],"0$1"],["(\\d{3})(\\d{3,7})","$1 $2",["[12]00|[368]|70[07-9]"],"0$1"],["(\\d{2})(\\d{4,8})","$1 $2",["[1245]|7[135]"],"0$1"],["(\\d{2})(\\d{6,10})","$1 $2",["7"],"0$1"]],"0",0,0,0,0,"1[03-79]|[2-9]",0,"00"],FJ:["679","0(?:0|52)","45\\d{5}|(?:0800\\d|[235-9])\\d{6}",[7,11],[["(\\d{3})(\\d{4})","$1 $2",["[235-9]|45"]],["(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["0"]]],0,0,0,0,0,0,0,"00"],FK:["500","00","[2-7]\\d{4}",[5]],FM:["691","00","(?:[39]\\d\\d|820)\\d{4}",[7],[["(\\d{3})(\\d{4})","$1 $2",["[389]"]]]],FO:["298","00","[2-9]\\d{5}",[6],[["(\\d{6})","$1",["[2-9]"]]],0,0,"(10(?:01|[12]0|88))"],FR:["33","00","[1-9]\\d{8}",[9],[["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["8"],"0 $1"],["(\\d)(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4 $5",["[1-79]"],"0$1"]],"0"],GA:["241","00","(?:[067]\\d|11)\\d{6}|[2-7]\\d{6}",[7,8],[["(\\d)(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[2-7]"],"0$1"],["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["11|[67]"],"0$1"],["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["0"]]],0,0,"0(11\\d{6}|6[256]\\d{6}|7[47]\\d{6})","$1"],GB:["44","00","[1-357-9]\\d{9}|[18]\\d{8}|8\\d{6}",[7,9,10],[["(\\d{3})(\\d{4})","$1 $2",["800","8001","80011","800111","8001111"],"0$1"],["(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3",["845","8454","84546","845464"],"0$1"],["(\\d{3})(\\d{6})","$1 $2",["800"],"0$1"],["(\\d{5})(\\d{4,5})","$1 $2",["1(?:38|5[23]|69|76|94)","1(?:(?:38|69)7|5(?:24|39)|768|946)","1(?:3873|5(?:242|39[4-6])|(?:697|768)[347]|9467)"],"0$1"],["(\\d{4})(\\d{5,6})","$1 $2",["1(?:[2-69][02-9]|[78])"],"0$1"],["(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["[25]|7(?:0|6[02-9])","[25]|7(?:0|6(?:[03-9]|2[356]))"],"0$1"],["(\\d{4})(\\d{6})","$1 $2",["7"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["[1389]"],"0$1"]],"0",0,0,0,0,0,[["(?:1(?:1(?:3(?:[0-58]\\d\\d|73[0235])|4(?:[0-5]\\d\\d|69[7-9]|70[0359])|(?:5[0-26-9]|[78][0-49])\\d\\d|6(?:[0-4]\\d\\d|50[02459]))|2(?:(?:0[024-9]|2[3-9]|3[3-79]|4[1-689]|[58][02-9]|6[0-47-9]|7[013-9]|9\\d)\\d\\d|1(?:[0-7]\\d\\d|8(?:[02]\\d|1[0-278])))|(?:3(?:0\\d|1[0-8]|[25][02-9]|3[02-579]|[468][0-46-9]|7[1-35-79]|9[2-578])|4(?:0[03-9]|[137]\\d|[28][02-57-9]|4[02-69]|5[0-8]|[69][0-79])|5(?:0[1-35-9]|[16]\\d|2[024-9]|3[015689]|4[02-9]|5[03-9]|7[0-35-9]|8[0-468]|9[0-57-9])|6(?:0[034689]|1\\d|2[0-35689]|[38][013-9]|4[1-467]|5[0-69]|6[13-9]|7[0-8]|9[0-24578])|7(?:0[0246-9]|2\\d|3[0236-8]|4[03-9]|5[0-46-9]|6[013-9]|7[0-35-9]|8[024-9]|9[02-9])|8(?:0[35-9]|2[1-57-9]|3[02-578]|4[0-578]|5[124-9]|6[2-69]|7\\d|8[02-9]|9[02569])|9(?:0[02-589]|[18]\\d|2[02-689]|3[1-57-9]|4[2-9]|5[0-579]|6[2-47-9]|7[0-24578]|9[2-57]))\\d\\d)|2(?:0[013478]|3[0189]|4[017]|8[0-46-9]|9[0-2])\\d{3})\\d{4}|1(?:2(?:0(?:46[1-4]|87[2-9])|545[1-79]|76(?:2\\d|3[1-8]|6[1-6])|9(?:7(?:2[0-4]|3[2-5])|8(?:2[2-8]|7[0-47-9]|8[3-5])))|3(?:6(?:38[2-5]|47[23])|8(?:47[04-9]|64[0157-9]))|4(?:044[1-7]|20(?:2[23]|8\\d)|6(?:0(?:30|5[2-57]|6[1-8]|7[2-8])|140)|8(?:052|87[1-3]))|5(?:2(?:4(?:3[2-79]|6\\d)|76\\d)|6(?:26[06-9]|686))|6(?:06(?:4\\d|7[4-79])|295[5-7]|35[34]\\d|47(?:24|61)|59(?:5[08]|6[67]|74)|9(?:55[0-4]|77[23]))|7(?:26(?:6[13-9]|7[0-7])|(?:442|688)\\d|50(?:2[0-3]|[3-68]2|76))|8(?:27[56]\\d|37(?:5[2-5]|8[239])|843[2-58])|9(?:0(?:0(?:6[1-8]|85)|52\\d)|3583|4(?:66[1-8]|9(?:2[01]|81))|63(?:23|3[1-4])|9561))\\d{3}",[9,10]],["7(?:457[0-57-9]|700[01]|911[028])\\d{5}|7(?:[1-3]\\d\\d|4(?:[0-46-9]\\d|5[0-689])|5(?:0[0-8]|[13-9]\\d|2[0-35-9])|7(?:0[1-9]|[1-7]\\d|8[02-9]|9[0-689])|8(?:[014-9]\\d|[23][0-8])|9(?:[024-9]\\d|1[02-9]|3[0-689]))\\d{6}",[10]],["80[08]\\d{7}|800\\d{6}|8001111"],["(?:8(?:4[2-5]|7[0-3])|9(?:[01]\\d|8[2-49]))\\d{7}|845464\\d",[7,10]],["70\\d{8}",[10]],0,["(?:3[0347]|55)\\d{8}",[10]],["76(?:464|652)\\d{5}|76(?:0[0-2]|2[356]|34|4[01347]|5[49]|6[0-369]|77|81|9[139])\\d{6}",[10]],["56\\d{8}",[10]]],0," x"],GD:["1","011","(?:473|[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"1|([2-9]\\d{6})$","473$1",0,"473"],GE:["995","00","(?:[3-57]\\d\\d|800)\\d{6}",[9],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["70"],"0$1"],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["32"],"0$1"],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[57]"]],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[348]"],"0$1"]],"0"],GF:["594","00","(?:[56]94|80\\d|976)\\d{6}",[9],[["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[569]"],"0$1"],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["8"],"0$1"]],"0"],GG:["44","00","(?:1481|[357-9]\\d{3})\\d{6}|8\\d{6}(?:\\d{2})?",[7,9,10],0,"0",0,"0|([25-9]\\d{5})$","1481$1",0,0,[["1481[25-9]\\d{5}",[10]],["7(?:(?:781|839)\\d|911[17])\\d{5}",[10]],["80[08]\\d{7}|800\\d{6}|8001111"],["(?:8(?:4[2-5]|7[0-3])|9(?:[01]\\d|8[0-3]))\\d{7}|845464\\d",[7,10]],["70\\d{8}",[10]],0,["(?:3[0347]|55)\\d{8}",[10]],["76(?:464|652)\\d{5}|76(?:0[0-2]|2[356]|34|4[01347]|5[49]|6[0-369]|77|81|9[139])\\d{6}",[10]],["56\\d{8}",[10]]]],GH:["233","00","(?:[235]\\d{3}|800)\\d{5}",[8,9],[["(\\d{3})(\\d{5})","$1 $2",["8"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[235]"],"0$1"]],"0"],GI:["350","00","(?:[25]\\d\\d|606)\\d{5}",[8],[["(\\d{3})(\\d{5})","$1 $2",["2"]]]],GL:["299","00","(?:19|[2-689]\\d|70)\\d{4}",[6],[["(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3",["19|[2-9]"]]]],GM:["220","00","[2-9]\\d{6}",[7],[["(\\d{3})(\\d{4})","$1 $2",["[2-9]"]]]],GN:["224","00","722\\d{6}|(?:3|6\\d)\\d{7}",[8,9],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["3"]],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[67]"]]]],GP:["590","00","(?:590|(?:69|80)\\d|976)\\d{6}",[9],[["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[569]"],"0$1"],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["8"],"0$1"]],"0",0,0,0,0,0,[["590(?:0[1-68]|1[0-2]|2[0-68]|3[1289]|4[0-24-9]|5[3-579]|6[0189]|7[08]|8[0-689]|9\\d)\\d{4}"],["69(?:0\\d\\d|1(?:2[2-9]|3[0-5]))\\d{4}"],["80[0-5]\\d{6}"],0,0,0,0,0,["976[01]\\d{5}"]]],GQ:["240","00","222\\d{6}|(?:3\\d|55|[89]0)\\d{7}",[9],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[235]"]],["(\\d{3})(\\d{6})","$1 $2",["[89]"]]]],GR:["30","00","5005000\\d{3}|8\\d{9,11}|(?:[269]\\d|70)\\d{8}",[10,11,12],[["(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["21|7"]],["(\\d{4})(\\d{6})","$1 $2",["2(?:2|3[2-57-9]|4[2-469]|5[2-59]|6[2-9]|7[2-69]|8[2-49])|5"]],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["[2689]"]],["(\\d{3})(\\d{3,4})(\\d{5})","$1 $2 $3",["8"]]]],GT:["502","00","(?:1\\d{3}|[2-7])\\d{7}",[8,11],[["(\\d{4})(\\d{4})","$1 $2",["[2-7]"]],["(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["1"]]]],GU:["1","011","(?:[58]\\d\\d|671|900)\\d{7}",[10],0,"1",0,"1|([3-9]\\d{6})$","671$1",0,"671"],GW:["245","00","[49]\\d{8}|4\\d{6}",[7,9],[["(\\d{3})(\\d{4})","$1 $2",["40"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[49]"]]]],GY:["592","001","(?:862\\d|9008)\\d{3}|(?:[2-46]\\d|77)\\d{5}",[7],[["(\\d{3})(\\d{4})","$1 $2",["[2-46-9]"]]]],HK:["852","00(?:30|5[09]|[126-9]?)","8[0-46-9]\\d{6,7}|9\\d{4}(?:\\d(?:\\d(?:\\d{4})?)?)?|(?:[235-79]\\d|46)\\d{6}",[5,6,7,8,9,11],[["(\\d{3})(\\d{2,5})","$1 $2",["900","9003"]],["(\\d{4})(\\d{4})","$1 $2",["[2-7]|8[1-4]|9(?:0[1-9]|[1-8])"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["8"]],["(\\d{3})(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3 $4",["9"]]],0,0,0,0,0,0,0,"00"],HN:["504","00","8\\d{10}|[237-9]\\d{7}",[8,11],[["(\\d{4})(\\d{4})","$1-$2",["[237-9]"]]]],HR:["385","00","(?:[24-69]\\d|3[0-79])\\d{7}|80\\d{5,7}|[1-79]\\d{7}|6\\d{5,6}",[6,7,8,9],[["(\\d{2})(\\d{2})(\\d{2,3})","$1 $2 $3",["6[01]"],"0$1"],["(\\d{3})(\\d{2})(\\d{2,3})","$1 $2 $3",["8"],"0$1"],["(\\d)(\\d{4})(\\d{3})","$1 $2 $3",["1"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[67]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["9"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[2-5]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["8"],"0$1"]],"0"],HT:["509","00","[2-489]\\d{7}",[8],[["(\\d{2})(\\d{2})(\\d{4})","$1 $2 $3",["[2-489]"]]]],HU:["36","00","[235-7]\\d{8}|[1-9]\\d{7}",[8,9],[["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["1"],"(06 $1)"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[27][2-9]|3[2-7]|4[24-9]|5[2-79]|6|8[2-57-9]|9[2-69]"],"(06 $1)"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[2-9]"],"06 $1"]],"06"],ID:["62","00[89]","(?:(?:00[1-9]|8\\d)\\d{4}|[1-36])\\d{6}|00\\d{10}|[1-9]\\d{8,10}|[2-9]\\d{7}",[7,8,9,10,11,12,13],[["(\\d)(\\d{3})(\\d{3})","$1 $2 $3",["15"]],["(\\d{2})(\\d{5,9})","$1 $2",["2[124]|[36]1"],"(0$1)"],["(\\d{3})(\\d{5,7})","$1 $2",["800"],"0$1"],["(\\d{3})(\\d{5,8})","$1 $2",["[2-79]"],"(0$1)"],["(\\d{3})(\\d{3,4})(\\d{3})","$1-$2-$3",["8[1-35-9]"],"0$1"],["(\\d{3})(\\d{6,8})","$1 $2",["1"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["804"],"0$1"],["(\\d{3})(\\d)(\\d{3})(\\d{3})","$1 $2 $3 $4",["80"],"0$1"],["(\\d{3})(\\d{4})(\\d{4,5})","$1-$2-$3",["8"],"0$1"]],"0"],IE:["353","00","(?:1\\d|[2569])\\d{6,8}|4\\d{6,9}|7\\d{8}|8\\d{8,9}",[7,8,9,10],[["(\\d{2})(\\d{5})","$1 $2",["2[24-9]|47|58|6[237-9]|9[35-9]"],"(0$1)"],["(\\d{3})(\\d{5})","$1 $2",["[45]0"],"(0$1)"],["(\\d)(\\d{3,4})(\\d{4})","$1 $2 $3",["1"],"(0$1)"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[2569]|4[1-69]|7[14]"],"(0$1)"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["70"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["81"],"(0$1)"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[78]"],"0$1"],["(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["1"]],["(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["4"],"(0$1)"],["(\\d{2})(\\d)(\\d{3})(\\d{4})","$1 $2 $3 $4",["8"],"0$1"]],"0"],IL:["972","0(?:0|1[2-9])","1\\d{6}(?:\\d{3,5})?|[57]\\d{8}|[1-489]\\d{7}",[7,8,9,10,11,12],[["(\\d{4})(\\d{3})","$1-$2",["125"]],["(\\d{4})(\\d{2})(\\d{2})","$1-$2-$3",["121"]],["(\\d)(\\d{3})(\\d{4})","$1-$2-$3",["[2-489]"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1-$2-$3",["[57]"],"0$1"],["(\\d{4})(\\d{3})(\\d{3})","$1-$2-$3",["12"]],["(\\d{4})(\\d{6})","$1-$2",["159"]],["(\\d)(\\d{3})(\\d{3})(\\d{3})","$1-$2-$3-$4",["1[7-9]"]],["(\\d{3})(\\d{1,2})(\\d{3})(\\d{4})","$1-$2 $3-$4",["15"]]],"0"],IM:["44","00","1624\\d{6}|(?:[3578]\\d|90)\\d{8}",[10],0,"0",0,"0|([25-8]\\d{5})$","1624$1",0,"74576|(?:16|7[56])24"],IN:["91","00","(?:000800|[2-9]\\d\\d)\\d{7}|1\\d{7,12}",[8,9,10,11,12,13],[["(\\d{8})","$1",["5(?:0|2[23]|3[03]|[67]1|88)","5(?:0|2(?:21|3)|3(?:0|3[23])|616|717|888)","5(?:0|2(?:21|3)|3(?:0|3[23])|616|717|8888)"],0,1],["(\\d{4})(\\d{4,5})","$1 $2",["180","1800"],0,1],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["140"],0,1],["(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["11|2[02]|33|4[04]|79[1-7]|80[2-46]","11|2[02]|33|4[04]|79(?:[1-6]|7[19])|80(?:[2-4]|6[0-589])","11|2[02]|33|4[04]|79(?:[124-6]|3(?:[02-9]|1[0-24-9])|7(?:1|9[1-6]))|80(?:[2-4]|6[0-589])"],"0$1",1],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["1(?:2[0-249]|3[0-25]|4[145]|[68]|7[1257])|2(?:1[257]|3[013]|4[01]|5[0137]|6[0158]|78|8[1568])|3(?:26|4[1-3]|5[34]|6[01489]|7[02-46]|8[159])|4(?:1[36]|2[1-47]|5[12]|6[0-26-9]|7[0-24-9]|8[013-57]|9[014-7])|5(?:1[025]|22|[36][25]|4[28]|5[12]|[78]1)|6(?:12|[2-4]1|5[17]|6[13]|80)|7(?:12|3[134]|4[47]|61|88)|8(?:16|2[014]|3[126]|6[136]|7[078]|8[34]|91)|(?:43|59|75)[15]|(?:1[59]|29|67|72)[14]","1(?:2[0-24]|3[0-25]|4[145]|[59][14]|6[1-9]|7[1257]|8[1-57-9])|2(?:1[257]|3[013]|4[01]|5[0137]|6[058]|78|8[1568]|9[14])|3(?:26|4[1-3]|5[34]|6[01489]|7[02-46]|8[159])|4(?:1[36]|2[1-47]|3[15]|5[12]|6[0-26-9]|7[0-24-9]|8[013-57]|9[014-7])|5(?:1[025]|22|[36][25]|4[28]|[578]1|9[15])|674|7(?:(?:2[14]|3[34]|5[15])[2-6]|61[346]|88[0-8])|8(?:70[2-6]|84[235-7]|91[3-7])|(?:1(?:29|60|8[06])|261|552|6(?:12|[2-47]1|5[17]|6[13]|80)|7(?:12|31|4[47])|8(?:16|2[014]|3[126]|6[136]|7[78]|83))[2-7]","1(?:2[0-24]|3[0-25]|4[145]|[59][14]|6[1-9]|7[1257]|8[1-57-9])|2(?:1[257]|3[013]|4[01]|5[0137]|6[058]|78|8[1568]|9[14])|3(?:26|4[1-3]|5[34]|6[01489]|7[02-46]|8[159])|4(?:1[36]|2[1-47]|3[15]|5[12]|6[0-26-9]|7[0-24-9]|8[013-57]|9[014-7])|5(?:1[025]|22|[36][25]|4[28]|[578]1|9[15])|6(?:12(?:[2-6]|7[0-8])|74[2-7])|7(?:(?:2[14]|5[15])[2-6]|3171|61[346]|88(?:[2-7]|82))|8(?:70[2-6]|84(?:[2356]|7[19])|91(?:[3-6]|7[19]))|73[134][2-6]|(?:74[47]|8(?:16|2[014]|3[126]|6[136]|7[78]|83))(?:[2-6]|7[19])|(?:1(?:29|60|8[06])|261|552|6(?:[2-4]1|5[17]|6[13]|7(?:1|4[0189])|80)|7(?:12|88[01]))[2-7]"],"0$1",1],["(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["1(?:[2-479]|5[0235-9])|[2-5]|6(?:1[1358]|2[2457-9]|3[2-5]|4[235-7]|5[2-689]|6[24578]|7[235689]|8[1-6])|7(?:1[013-9]|28|3[129]|4[1-35689]|5[29]|6[02-5]|70)|807","1(?:[2-479]|5[0235-9])|[2-5]|6(?:1[1358]|2(?:[2457]|84|95)|3(?:[2-4]|55)|4[235-7]|5[2-689]|6[24578]|7[235689]|8[1-6])|7(?:1(?:[013-8]|9[6-9])|28[6-8]|3(?:17|2[0-49]|9[2-57])|4(?:1[2-4]|[29][0-7]|3[0-8]|[56]|8[0-24-7])|5(?:2[1-3]|9[0-6])|6(?:0[5689]|2[5-9]|3[02-8]|4|5[0-367])|70[13-7])|807[19]","1(?:[2-479]|5(?:[0236-9]|5[013-9]))|[2-5]|6(?:2(?:84|95)|355|83)|73179|807(?:1|9[1-3])|(?:1552|6(?:1[1358]|2[2457]|3[2-4]|4[235-7]|5[2-689]|6[24578]|7[235689]|8[124-6])\\d|7(?:1(?:[013-8]\\d|9[6-9])|28[6-8]|3(?:2[0-49]|9[2-57])|4(?:1[2-4]|[29][0-7]|3[0-8]|[56]\\d|8[0-24-7])|5(?:2[1-3]|9[0-6])|6(?:0[5689]|2[5-9]|3[02-8]|4\\d|5[0-367])|70[13-7]))[2-7]"],"0$1",1],["(\\d{5})(\\d{5})","$1 $2",["[6-9]"],"0$1",1],["(\\d{4})(\\d{2,4})(\\d{4})","$1 $2 $3",["1(?:6|8[06])","1(?:6|8[06]0)"],0,1],["(\\d{4})(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3 $4",["18"],0,1]],"0"],IO:["246","00","3\\d{6}",[7],[["(\\d{3})(\\d{4})","$1 $2",["3"]]]],IQ:["964","00","(?:1|7\\d\\d)\\d{7}|[2-6]\\d{7,8}",[8,9,10],[["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["1"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[2-6]"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["7"],"0$1"]],"0"],IR:["98","00","[1-9]\\d{9}|(?:[1-8]\\d\\d|9)\\d{3,4}",[4,5,6,7,10],[["(\\d{4,5})","$1",["96"],"0$1"],["(\\d{2})(\\d{4,5})","$1 $2",["(?:1[137]|2[13-68]|3[1458]|4[145]|5[1468]|6[16]|7[1467]|8[13467])[12689]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["9"],"0$1"],["(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["[1-8]"],"0$1"]],"0"],IS:["354","00|1(?:0(?:01|[12]0)|100)","(?:38\\d|[4-9])\\d{6}",[7,9],[["(\\d{3})(\\d{4})","$1 $2",["[4-9]"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["3"]]],0,0,0,0,0,0,0,"00"],IT:["39","00","0\\d{5,10}|3[0-8]\\d{7,10}|55\\d{8}|8\\d{5}(?:\\d{2,4})?|(?:1\\d|39)\\d{7,8}",[6,7,8,9,10,11],[["(\\d{2})(\\d{4,6})","$1 $2",["0[26]"]],["(\\d{3})(\\d{3,6})","$1 $2",["0[13-57-9][0159]|8(?:03|4[17]|9[245])","0[13-57-9][0159]|8(?:03|4[17]|9(?:2|[45][0-4]))"]],["(\\d{4})(\\d{2,6})","$1 $2",["0(?:[13-579][2-46-8]|8[236-8])"]],["(\\d{4})(\\d{4})","$1 $2",["894"]],["(\\d{2})(\\d{3,4})(\\d{4})","$1 $2 $3",["0[26]|5"]],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["1[4679]|[38]"]],["(\\d{3})(\\d{3,4})(\\d{4})","$1 $2 $3",["0[13-57-9][0159]"]],["(\\d{2})(\\d{4})(\\d{5})","$1 $2 $3",["0[26]"]],["(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["0"]],["(\\d{3})(\\d{4})(\\d{4,5})","$1 $2 $3",["3"]]],0,0,0,0,0,0,[["0669[0-79]\\d{1,6}|0(?:1(?:[0159]\\d|[27][1-5]|31|4[1-4]|6[1356]|8[2-57])|2\\d\\d|3(?:[0159]\\d|2[1-4]|3[12]|[48][1-6]|6[2-59]|7[1-7])|4(?:[0159]\\d|[23][1-9]|4[245]|6[1-5]|7[1-4]|81)|5(?:[0159]\\d|2[1-5]|3[2-6]|4[1-79]|6[4-6]|7[1-578]|8[3-8])|6(?:[0-57-9]\\d|6[0-8])|7(?:[0159]\\d|2[12]|3[1-7]|4[2-46]|6[13569]|7[13-6]|8[1-59])|8(?:[0159]\\d|2[3-578]|3[1-356]|[6-8][1-5])|9(?:[0159]\\d|[238][1-5]|4[12]|6[1-8]|7[1-6]))\\d{2,7}"],["3[1-9]\\d{8}|3[2-9]\\d{7}",[9,10]],["80(?:0\\d{3}|3)\\d{3}",[6,9]],["(?:0878\\d\\d|89(?:2|4[5-9]\\d))\\d{3}|89[45][0-4]\\d\\d|(?:1(?:44|6[346])|89(?:5[5-9]|9))\\d{6}",[6,8,9,10]],["1(?:78\\d|99)\\d{6}",[9,10]],0,0,0,["55\\d{8}",[10]],["84(?:[08]\\d{3}|[17])\\d{3}",[6,9]]]],JE:["44","00","1534\\d{6}|(?:[3578]\\d|90)\\d{8}",[10],0,"0",0,"0|([0-24-8]\\d{5})$","1534$1",0,0,[["1534[0-24-8]\\d{5}"],["7(?:(?:(?:50|82)9|937)\\d|7(?:00[378]|97[7-9]))\\d{5}"],["80(?:07(?:35|81)|8901)\\d{4}"],["(?:8(?:4(?:4(?:4(?:05|42|69)|703)|5(?:041|800))|7(?:0002|1206))|90(?:066[59]|1810|71(?:07|55)))\\d{4}"],["701511\\d{4}"],0,["(?:3(?:0(?:07(?:35|81)|8901)|3\\d{4}|4(?:4(?:4(?:05|42|69)|703)|5(?:041|800))|7(?:0002|1206))|55\\d{4})\\d{4}"],["76(?:464|652)\\d{5}|76(?:0[0-2]|2[356]|34|4[01347]|5[49]|6[0-369]|77|81|9[139])\\d{6}"],["56\\d{8}"]]],JM:["1","011","(?:[58]\\d\\d|658|900)\\d{7}",[10],0,"1",0,0,0,0,"658|876"],JO:["962","00","(?:(?:[2689]|7\\d)\\d|32|53)\\d{6}",[8,9],[["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["[2356]|87"],"(0$1)"],["(\\d{3})(\\d{5,6})","$1 $2",["[89]"],"0$1"],["(\\d{2})(\\d{7})","$1 $2",["70"],"0$1"],["(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["7"],"0$1"]],"0"],JP:["81","010","00[1-9]\\d{6,14}|[257-9]\\d{9}|(?:00|[1-9]\\d\\d)\\d{6}",[8,9,10,11,12,13,14,15,16,17],[["(\\d{3})(\\d{3})(\\d{3})","$1-$2-$3",["(?:12|57|99)0"],"0$1"],["(\\d{4})(\\d)(\\d{4})","$1-$2-$3",["1(?:26|3[79]|4[56]|5[4-68]|6[3-5])|499|5(?:76|97)|746|8(?:3[89]|47|51|63)|9(?:49|80|9[16])","1(?:267|3(?:7[247]|9[278])|466|5(?:47|58|64)|6(?:3[245]|48|5[4-68]))|499[2468]|5(?:76|97)9|7468|8(?:3(?:8[7-9]|96)|477|51[2-9]|636)|9(?:496|802|9(?:1[23]|69))|1(?:45|58)[67]","1(?:267|3(?:7[247]|9[278])|466|5(?:47|58|64)|6(?:3[245]|48|5[4-68]))|499[2468]|5(?:769|979[2-69])|7468|8(?:3(?:8[7-9]|96[2457-9])|477|51[2-9]|636[457-9])|9(?:496|802|9(?:1[23]|69))|1(?:45|58)[67]"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1-$2-$3",["60"],"0$1"],["(\\d)(\\d{4})(\\d{4})","$1-$2-$3",["[36]|4(?:2[09]|7[01])","[36]|4(?:2(?:0|9[02-69])|7(?:0[019]|1))"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1-$2-$3",["1(?:1|5[45]|77|88|9[69])|2(?:2[1-37]|3[0-269]|4[59]|5|6[24]|7[1-358]|8[1369]|9[0-38])|4(?:[28][1-9]|3[0-57]|[45]|6[248]|7[2-579]|9[29])|5(?:2|3[045]|4[0-369]|5[29]|8[02389]|9[0-389])|7(?:2[02-46-9]|34|[58]|6[0249]|7[57]|9[2-6])|8(?:2[124589]|3[27-9]|49|51|6|7[0-468]|8[68]|9[019])|9(?:[23][1-9]|4[15]|5[138]|6[1-3]|7[156]|8[189]|9[1-489])","1(?:1|5(?:4[018]|5[017])|77|88|9[69])|2(?:2(?:[127]|3[014-9])|3[0-269]|4[59]|5(?:[1-3]|5[0-69]|9[19])|62|7(?:[1-35]|8[0189])|8(?:[16]|3[0134]|9[0-5])|9(?:[028]|17))|4(?:2(?:[13-79]|8[014-6])|3[0-57]|[45]|6[248]|7[2-47]|8[1-9])|5(?:2|3[045]|4[0-369]|8[02389]|9[0-3])|7(?:2[02-46-9]|34|[58]|6[0249]|7[57]|9(?:[23]|4[0-59]|5[01569]|6[0167]))|8(?:2(?:[1258]|4[0-39]|9[0-2469])|49|51|6(?:[0-24]|36|5[0-3589]|72|9[01459])|7[0-468]|8[68])|9(?:[23][1-9]|4[15]|5[138]|6[1-3]|7[156]|8[189]|9(?:[1289]|3[34]|4[0178]))|(?:49|55|83)[29]|(?:264|837)[016-9]|2(?:57|93)[015-9]|(?:25[0468]|422|838)[01]|(?:47[59]|59[89]|8(?:6[68]|9))[019]","1(?:1|5(?:4[018]|5[017])|77|88|9[69])|2(?:2[127]|3[0-269]|4[59]|5(?:[1-3]|5[0-69]|9(?:17|99))|6(?:2|4[016-9])|7(?:[1-35]|8[0189])|8(?:[16]|3[0134]|9[0-5])|9(?:[028]|17))|4(?:2(?:[13-79]|8[014-6])|3[0-57]|[45]|6[248]|7[2-47]|9[29])|5(?:2|3[045]|4[0-369]|5[29]|8[02389]|9[0-3])|7(?:2[02-46-9]|34|[58]|6[0249]|7[57]|9(?:[23]|4[0-59]|5[01569]|6[0167]))|8(?:2(?:[1258]|4[0-39]|9[0169])|3(?:[29]|7(?:[017-9]|6[6-8]))|49|51|6(?:[0-24]|36[23]|5(?:[0-389]|5[23])|6(?:[01]|9[178])|72|9[0145])|7[0-468]|8[68])|9(?:4[15]|5[138]|7[156]|8[189]|9(?:[1289]|3(?:31|4[357])|4[0178]))|(?:8294|96)[1-3]|2(?:57|93)[015-9]|(?:223|8699)[014-9]|(?:25[0468]|422|838)[01]|(?:48|8292|9[23])[1-9]|(?:47[59]|59[89]|8(?:68|9))[019]","1(?:1|5(?:4[018]|5[017])|77|88|9[69])|2(?:2[127]|3[0-269]|4[59]|5(?:[1-3]|5[0-69]|7[015-9]|9(?:17|99))|6(?:2|4[016-9])|7(?:[1-35]|8[0189])|8(?:[16]|3[0134]|9[0-5])|9(?:[028]|17|3[015-9]))|4(?:2(?:[13-79]|8[014-6])|3[0-57]|[45]|6[248]|7[2-47]|9[29])|5(?:2|3[045]|4[0-369]|5[29]|8[02389]|9[0-3])|7(?:2[02-46-9]|34|[58]|6[0249]|7[57]|9(?:[23]|4[0-59]|5[01569]|6[0167]))|8(?:2(?:[1258]|4[0-39]|9(?:[019]|4[1-3]|6(?:[0-47-9]|5[01346-9])))|3(?:[29]|7(?:[017-9]|6[6-8]))|49|51|6(?:[0-24]|36[23]|5(?:[0-389]|5[23])|6(?:[01]|9[178])|72|9[0145])|7[0-468]|8[68])|9(?:4[15]|5[138]|6[1-3]|7[156]|8[189]|9(?:[1289]|3(?:31|4[357])|4[0178]))|(?:223|8699)[014-9]|(?:25[0468]|422|838)[01]|(?:48|829(?:2|66)|9[23])[1-9]|(?:47[59]|59[89]|8(?:68|9))[019]"],"0$1"],["(\\d{3})(\\d{2})(\\d{4})","$1-$2-$3",["[14]|[289][2-9]|5[3-9]|7[2-4679]"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1-$2-$3",["800"],"0$1"],["(\\d{2})(\\d{4})(\\d{4})","$1-$2-$3",["[257-9]"],"0$1"]],"0"],KE:["254","000","(?:[17]\\d\\d|900)\\d{6}|(?:2|80)0\\d{6,7}|[4-6]\\d{6,8}",[7,8,9,10],[["(\\d{2})(\\d{5,7})","$1 $2",["[24-6]"],"0$1"],["(\\d{3})(\\d{6})","$1 $2",["[17]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["[89]"],"0$1"]],"0"],KG:["996","00","8\\d{9}|(?:[235-8]\\d|99)\\d{7}",[9,10],[["(\\d{4})(\\d{5})","$1 $2",["3(?:1[346]|[24-79])"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[235-79]|88"],"0$1"],["(\\d{3})(\\d{3})(\\d)(\\d{2,3})","$1 $2 $3 $4",["8"],"0$1"]],"0"],KH:["855","00[14-9]","1\\d{9}|[1-9]\\d{7,8}",[8,9,10],[["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[1-9]"],"0$1"],["(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["1"]]],"0"],KI:["686","00","(?:[37]\\d|6[0-79])\\d{6}|(?:[2-48]\\d|50)\\d{3}",[5,8],0,"0"],KM:["269","00","[3478]\\d{6}",[7],[["(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3",["[3478]"]]]],KN:["1","011","(?:[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"1|([2-7]\\d{6})$","869$1",0,"869"],KP:["850","00|99","85\\d{6}|(?:19\\d|[2-7])\\d{7}",[8,10],[["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["8"],"0$1"],["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["[2-7]"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["1"],"0$1"]],"0"],KR:["82","00(?:[125689]|3(?:[46]5|91)|7(?:00|27|3|55|6[126]))","00[1-9]\\d{8,11}|(?:[12]|5\\d{3})\\d{7}|[13-6]\\d{9}|(?:[1-6]\\d|80)\\d{7}|[3-6]\\d{4,5}|(?:00|7)0\\d{8}",[5,6,8,9,10,11,12,13,14],[["(\\d{2})(\\d{3,4})","$1-$2",["(?:3[1-3]|[46][1-4]|5[1-5])1"],"0$1"],["(\\d{4})(\\d{4})","$1-$2",["1"]],["(\\d)(\\d{3,4})(\\d{4})","$1-$2-$3",["2"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1-$2-$3",["60|8"],"0$1"],["(\\d{2})(\\d{3,4})(\\d{4})","$1-$2-$3",["[1346]|5[1-5]"],"0$1"],["(\\d{2})(\\d{4})(\\d{4})","$1-$2-$3",["[57]"],"0$1"],["(\\d{2})(\\d{5})(\\d{4})","$1-$2-$3",["5"],"0$1"]],"0",0,"0(8(?:[1-46-8]|5\\d\\d))?"],KW:["965","00","(?:18|[2569]\\d\\d)\\d{5}",[7,8],[["(\\d{4})(\\d{3,4})","$1 $2",["[169]|2(?:[235]|4[1-35-9])|52"]],["(\\d{3})(\\d{5})","$1 $2",["[25]"]]]],KY:["1","011","(?:345|[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"1|([2-9]\\d{6})$","345$1",0,"345"],KZ:["7","810","(?:33622|8\\d{8})\\d{5}|[78]\\d{9}",[10,14],0,"8",0,0,0,0,"33|7",0,"8~10"],LA:["856","00","[23]\\d{9}|3\\d{8}|(?:[235-8]\\d|41)\\d{6}",[8,9,10],[["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["2[13]|3[14]|[4-8]"],"0$1"],["(\\d{2})(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3 $4",["30[013-9]"],"0$1"],["(\\d{2})(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3 $4",["[23]"],"0$1"]],"0"],LB:["961","00","[27-9]\\d{7}|[13-9]\\d{6}",[7,8],[["(\\d)(\\d{3})(\\d{3})","$1 $2 $3",["[13-69]|7(?:[2-57]|62|8[0-7]|9[04-9])|8[02-9]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[27-9]"]]],"0"],LC:["1","011","(?:[58]\\d\\d|758|900)\\d{7}",[10],0,"1",0,"1|([2-8]\\d{6})$","758$1",0,"758"],LI:["423","00","90\\d{5}|(?:[2378]|6\\d\\d)\\d{6}",[7,9],[["(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3",["[237-9]"]],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["69"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["6"]]],"0",0,"0|(1001)"],LK:["94","00","[1-9]\\d{8}",[9],[["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["7"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[1-689]"],"0$1"]],"0"],LR:["231","00","(?:2|33|5\\d|77|88)\\d{7}|[4-6]\\d{6}",[7,8,9],[["(\\d)(\\d{3})(\\d{3})","$1 $2 $3",["[4-6]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["2"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[3578]"],"0$1"]],"0"],LS:["266","00","(?:[256]\\d\\d|800)\\d{5}",[8],[["(\\d{4})(\\d{4})","$1 $2",["[2568]"]]]],LT:["370","00","(?:[3469]\\d|52|[78]0)\\d{6}",[8],[["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["52[0-7]"],"(8-$1)",1],["(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3",["[7-9]"],"8 $1",1],["(\\d{2})(\\d{6})","$1 $2",["37|4(?:[15]|6[1-8])"],"(8-$1)",1],["(\\d{3})(\\d{5})","$1 $2",["[3-6]"],"(8-$1)",1]],"8",0,"[08]"],LU:["352","00","35[013-9]\\d{4,8}|6\\d{8}|35\\d{2,4}|(?:[2457-9]\\d|3[0-46-9])\\d{2,9}",[4,5,6,7,8,9,10,11],[["(\\d{2})(\\d{3})","$1 $2",["2(?:0[2-689]|[2-9])|[3-57]|8(?:0[2-9]|[13-9])|9(?:0[89]|[2-579])"]],["(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3",["2(?:0[2-689]|[2-9])|[3-57]|8(?:0[2-9]|[13-9])|9(?:0[89]|[2-579])"]],["(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3",["20[2-689]"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{1,2})","$1 $2 $3 $4",["2(?:[0367]|4[3-8])"]],["(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3",["80[01]|90[015]"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3 $4",["20"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["6"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{2})(\\d{1,2})","$1 $2 $3 $4 $5",["2(?:[0367]|4[3-8])"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{1,5})","$1 $2 $3 $4",["[3-57]|8[13-9]|9(?:0[89]|[2-579])|(?:2|80)[2-9]"]]],0,0,"(15(?:0[06]|1[12]|[35]5|4[04]|6[26]|77|88|99)\\d)"],LV:["371","00","(?:[268]\\d|90)\\d{6}",[8],[["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[269]|8[01]"]]]],LY:["218","00","[2-9]\\d{8}",[9],[["(\\d{2})(\\d{7})","$1-$2",["[2-9]"],"0$1"]],"0"],MA:["212","00","[5-8]\\d{8}",[9],[["(\\d{5})(\\d{4})","$1-$2",["5(?:29|38)","5(?:29|38)[89]","5(?:29|38)[89]0"],"0$1"],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["5[45]"],"0$1"],["(\\d{4})(\\d{5})","$1-$2",["5(?:2[2-489]|3[5-9]|9)|892","5(?:2(?:[2-49]|8[235-9])|3[5-9]|9)|892"],"0$1"],["(\\d{2})(\\d{7})","$1-$2",["8"],"0$1"],["(\\d{3})(\\d{6})","$1-$2",["[5-7]"],"0$1"]],"0",0,0,0,0,0,[["5(?:29(?:[189][05]|2[29]|3[01])|38[89][05])\\d{4}|5(?:2(?:[0-25-7]\\d|3[1-578]|4[02-46-8]|8[0235-7]|90)|3(?:[0-47]\\d|5[02-9]|6[02-8]|80|9[3-9])|(?:4[067]|5[03])\\d)\\d{5}"],["(?:6(?:[0-79]\\d|8[0-247-9])|7(?:0\\d|1[0-3]|6[1267]|7[0-57]))\\d{6}"],["80\\d{7}"],["89\\d{7}"],0,0,0,0,["592(?:4[0-2]|93)\\d{4}"]]],MC:["377","00","(?:[3489]|6\\d)\\d{7}",[8,9],[["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["4"],"0$1"],["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[389]"]],["(\\d)(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4 $5",["6"],"0$1"]],"0"],MD:["373","00","(?:[235-7]\\d|[89]0)\\d{6}",[8],[["(\\d{3})(\\d{5})","$1 $2",["[89]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["22|3"],"0$1"],["(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3",["[25-7]"],"0$1"]],"0"],ME:["382","00","(?:20|[3-79]\\d)\\d{6}|80\\d{6,7}",[8,9],[["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[2-9]"],"0$1"]],"0"],MF:["590","00","(?:590|(?:69|80)\\d|976)\\d{6}",[9],0,"0",0,0,0,0,0,[["590(?:0[079]|[14]3|[27][79]|30|5[0-268]|87)\\d{4}"],["69(?:0\\d\\d|1(?:2[2-9]|3[0-5]))\\d{4}"],["80[0-5]\\d{6}"],0,0,0,0,0,["976[01]\\d{5}"]]],MG:["261","00","[23]\\d{8}",[9],[["(\\d{2})(\\d{2})(\\d{3})(\\d{2})","$1 $2 $3 $4",["[23]"],"0$1"]],"0",0,"0|([24-9]\\d{6})$","20$1"],MH:["692","011","329\\d{4}|(?:[256]\\d|45)\\d{5}",[7],[["(\\d{3})(\\d{4})","$1-$2",["[2-6]"]]],"1"],MK:["389","00","[2-578]\\d{7}",[8],[["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["2"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[347]"],"0$1"],["(\\d{3})(\\d)(\\d{2})(\\d{2})","$1 $2 $3 $4",["[58]"],"0$1"]],"0"],ML:["223","00","[24-9]\\d{7}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[24-9]"]]]],MM:["95","00","1\\d{5,7}|95\\d{6}|(?:[4-7]|9[0-46-9])\\d{6,8}|(?:2|8\\d)\\d{5,8}",[6,7,8,9,10],[["(\\d)(\\d{2})(\\d{3})","$1 $2 $3",["16|2"],"0$1"],["(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3",["[45]|6(?:0[23]|[1-689]|7[235-7])|7(?:[0-4]|5[2-7])|8[1-6]"],"0$1"],["(\\d)(\\d{3})(\\d{3,4})","$1 $2 $3",["[12]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[4-7]|8[1-35]"],"0$1"],["(\\d)(\\d{3})(\\d{4,6})","$1 $2 $3",["9(?:2[0-4]|[35-9]|4[137-9])"],"0$1"],["(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["2"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["8"],"0$1"],["(\\d)(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3 $4",["92"],"0$1"],["(\\d)(\\d{5})(\\d{4})","$1 $2 $3",["9"],"0$1"]],"0"],MN:["976","001","[12]\\d{7,9}|[57-9]\\d{7}",[8,9,10],[["(\\d{2})(\\d{2})(\\d{4})","$1 $2 $3",["[12]1"],"0$1"],["(\\d{4})(\\d{4})","$1 $2",["[57-9]"]],["(\\d{3})(\\d{5,6})","$1 $2",["[12]2[1-3]"],"0$1"],["(\\d{4})(\\d{5,6})","$1 $2",["[12](?:27|3[2-8]|4[2-68]|5[1-4689])","[12](?:27|3[2-8]|4[2-68]|5[1-4689])[0-3]"],"0$1"],["(\\d{5})(\\d{4,5})","$1 $2",["[12]"],"0$1"]],"0"],MO:["853","00","0800\\d{3}|(?:28|[68]\\d)\\d{6}",[7,8],[["(\\d{4})(\\d{3})","$1 $2",["0"]],["(\\d{4})(\\d{4})","$1 $2",["[268]"]]]],MP:["1","011","[58]\\d{9}|(?:67|90)0\\d{7}",[10],0,"1",0,"1|([2-9]\\d{6})$","670$1",0,"670"],MQ:["596","00","(?:69|80)\\d{7}|(?:59|97)6\\d{6}",[9],[["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[569]"],"0$1"],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["8"],"0$1"]],"0"],MR:["222","00","(?:[2-4]\\d\\d|800)\\d{5}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[2-48]"]]]],MS:["1","011","(?:[58]\\d\\d|664|900)\\d{7}",[10],0,"1",0,"1|([34]\\d{6})$","664$1",0,"664"],MT:["356","00","3550\\d{4}|(?:[2579]\\d\\d|800)\\d{5}",[8],[["(\\d{4})(\\d{4})","$1 $2",["[2357-9]"]]]],MU:["230","0(?:0|[24-7]0|3[03])","(?:5|8\\d\\d)\\d{7}|[2-468]\\d{6}",[7,8,10],[["(\\d{3})(\\d{4})","$1 $2",["[2-46]|8[013]"]],["(\\d{4})(\\d{4})","$1 $2",["5"]],["(\\d{5})(\\d{5})","$1 $2",["8"]]],0,0,0,0,0,0,0,"020"],MV:["960","0(?:0|19)","(?:800|9[0-57-9]\\d)\\d{7}|[34679]\\d{6}",[7,10],[["(\\d{3})(\\d{4})","$1-$2",["[3467]|9[13-9]"]],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["[89]"]]],0,0,0,0,0,0,0,"00"],MW:["265","00","(?:[19]\\d|[23]1|77|88)\\d{7}|1\\d{6}",[7,9],[["(\\d)(\\d{3})(\\d{3})","$1 $2 $3",["1[2-9]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["2"],"0$1"],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[137-9]"],"0$1"]],"0"],MX:["52","0[09]","1(?:65[0-689]|99[1-9])\\d{7}|(?:1(?:[0147]\\d|[235][1-9]|6[0-46-9]|8[1-79]|9[1-8])|[2-9]\\d)\\d{8}",[10,11],[["(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["33|5[56]|81"],0,1],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["[2-9]"],0,1],["(\\d)(\\d{2})(\\d{4})(\\d{4})","$2 $3 $4",["1(?:33|5[56]|81)"],0,1],["(\\d)(\\d{3})(\\d{3})(\\d{4})","$2 $3 $4",["1"],0,1]],"01",0,"0(?:[12]|4[45])|1",0,0,0,0,"00"],MY:["60","00","1\\d{8,9}|(?:3\\d|[4-9])\\d{7}",[8,9,10],[["(\\d)(\\d{3})(\\d{4})","$1-$2 $3",["[4-79]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1-$2 $3",["1(?:[02469]|[378][1-9])|8"],"0$1"],["(\\d)(\\d{4})(\\d{4})","$1-$2 $3",["3"],"0$1"],["(\\d)(\\d{3})(\\d{2})(\\d{4})","$1-$2-$3-$4",["1[36-8]"]],["(\\d{3})(\\d{3})(\\d{4})","$1-$2 $3",["15"],"0$1"],["(\\d{2})(\\d{4})(\\d{4})","$1-$2 $3",["1"],"0$1"]],"0"],MZ:["258","00","(?:2|8\\d)\\d{7}",[8,9],[["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["2|8[2-79]"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["8"]]]],NA:["264","00","[68]\\d{7,8}",[8,9],[["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["88"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["6"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["87"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["8"],"0$1"]],"0"],NC:["687","00","[2-57-9]\\d{5}",[6],[["(\\d{2})(\\d{2})(\\d{2})","$1.$2.$3",["[2-57-9]"]]]],NE:["227","00","[027-9]\\d{7}",[8],[["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["08"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[089]|2[013]|7[04]"]]]],NF:["672","00","[13]\\d{5}",[6],[["(\\d{2})(\\d{4})","$1 $2",["1[0-3]"]],["(\\d)(\\d{5})","$1 $2",["[13]"]]],0,0,"([0-258]\\d{4})$","3$1"],NG:["234","009","(?:[124-7]|9\\d{3})\\d{6}|[1-9]\\d{7}|[78]\\d{9,13}",[7,8,10,11,12,13,14],[["(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3",["78"],"0$1"],["(\\d)(\\d{3})(\\d{3,4})","$1 $2 $3",["[12]|9(?:0[3-9]|[1-9])"],"0$1"],["(\\d{2})(\\d{3})(\\d{2,3})","$1 $2 $3",["[3-7]|8[2-9]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["[7-9]"],"0$1"],["(\\d{3})(\\d{4})(\\d{4,5})","$1 $2 $3",["[78]"],"0$1"],["(\\d{3})(\\d{5})(\\d{5,6})","$1 $2 $3",["[78]"],"0$1"]],"0"],NI:["505","00","(?:1800|[25-8]\\d{3})\\d{4}",[8],[["(\\d{4})(\\d{4})","$1 $2",["[125-8]"]]]],NL:["31","00","(?:[124-7]\\d\\d|3(?:[02-9]\\d|1[0-8]))\\d{6}|[89]\\d{6,9}|1\\d{4,5}",[5,6,7,8,9,10],[["(\\d{3})(\\d{4,7})","$1 $2",["[89]0"],"0$1"],["(\\d{2})(\\d{7})","$1 $2",["66"],"0$1"],["(\\d)(\\d{8})","$1 $2",["6"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["1[16-8]|2[259]|3[124]|4[17-9]|5[124679]"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[1-57-9]"],"0$1"]],"0"],NO:["47","00","(?:0|[2-9]\\d{3})\\d{4}",[5,8],[["(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3",["[489]|59"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[235-7]"]]],0,0,0,0,0,"[02-689]|7[0-8]"],NP:["977","00","(?:1\\d|9)\\d{9}|[1-9]\\d{7}",[8,10,11],[["(\\d)(\\d{7})","$1-$2",["1[2-6]"],"0$1"],["(\\d{2})(\\d{6})","$1-$2",["1[01]|[2-8]|9(?:[1-579]|6[2-6])"],"0$1"],["(\\d{3})(\\d{7})","$1-$2",["9"]]],"0"],NR:["674","00","(?:444|(?:55|8\\d)\\d|666)\\d{4}",[7],[["(\\d{3})(\\d{4})","$1 $2",["[4-68]"]]]],NU:["683","00","(?:[47]|888\\d)\\d{3}",[4,7],[["(\\d{3})(\\d{4})","$1 $2",["8"]]]],NZ:["64","0(?:0|161)","[29]\\d{7,9}|50\\d{5}(?:\\d{2,3})?|6[0-35-9]\\d{6}|7\\d{7,8}|8\\d{4,9}|(?:11\\d|[34])\\d{7}",[5,6,7,8,9,10],[["(\\d{2})(\\d{3,8})","$1 $2",["8[1-579]"],"0$1"],["(\\d{3})(\\d{2})(\\d{2,3})","$1 $2 $3",["50[036-8]|[89]0","50(?:[0367]|88)|[89]0"],"0$1"],["(\\d)(\\d{3})(\\d{4})","$1-$2 $3",["24|[346]|7[2-57-9]|9[2-9]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["2(?:10|74)|[59]|80"],"0$1"],["(\\d{2})(\\d{3,4})(\\d{4})","$1 $2 $3",["1|2[028]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,5})","$1 $2 $3",["2(?:[169]|7[0-35-9])|7|86"],"0$1"]],"0",0,0,0,0,0,0,"00"],OM:["968","00","(?:1505|[279]\\d{3}|500)\\d{4}|800\\d{5,6}",[7,8,9],[["(\\d{3})(\\d{4,6})","$1 $2",["[58]"]],["(\\d{2})(\\d{6})","$1 $2",["2"]],["(\\d{4})(\\d{4})","$1 $2",["[179]"]]]],PA:["507","00","(?:00800|8\\d{3})\\d{6}|[68]\\d{7}|[1-57-9]\\d{6}",[7,8,10,11],[["(\\d{3})(\\d{4})","$1-$2",["[1-57-9]"]],["(\\d{4})(\\d{4})","$1-$2",["[68]"]],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["8"]]]],PE:["51","19(?:1[124]|77|90)00","(?:[14-8]|9\\d)\\d{7}",[8,9],[["(\\d{3})(\\d{5})","$1 $2",["80"],"(0$1)"],["(\\d)(\\d{7})","$1 $2",["1"],"(0$1)"],["(\\d{2})(\\d{6})","$1 $2",["[4-8]"],"(0$1)"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["9"]]],"0",0,0,0,0,0,0,0," Anexo "],PF:["689","00","4\\d{5}(?:\\d{2})?|8\\d{7,8}",[6,8,9],[["(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3",["44"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["4|8[7-9]"]],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["8"]]]],PG:["675","00|140[1-3]","(?:180|[78]\\d{3})\\d{4}|(?:[2-589]\\d|64)\\d{5}",[7,8],[["(\\d{3})(\\d{4})","$1 $2",["18|[2-69]|85"]],["(\\d{4})(\\d{4})","$1 $2",["[78]"]]],0,0,0,0,0,0,0,"00"],PH:["63","00","(?:[2-7]|9\\d)\\d{8}|2\\d{5}|(?:1800|8)\\d{7,9}",[6,8,9,10,11,12,13],[["(\\d)(\\d{5})","$1 $2",["2"],"(0$1)"],["(\\d{4})(\\d{4,6})","$1 $2",["3(?:23|39|46)|4(?:2[3-6]|[35]9|4[26]|76)|544|88[245]|(?:52|64|86)2","3(?:230|397|461)|4(?:2(?:35|[46]4|51)|396|4(?:22|63)|59[347]|76[15])|5(?:221|446)|642[23]|8(?:622|8(?:[24]2|5[13]))"],"(0$1)"],["(\\d{5})(\\d{4})","$1 $2",["346|4(?:27|9[35])|883","3469|4(?:279|9(?:30|56))|8834"],"(0$1)"],["(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["2"],"(0$1)"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[3-7]|8[2-8]"],"(0$1)"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["[89]"],"0$1"],["(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["1"]],["(\\d{4})(\\d{1,2})(\\d{3})(\\d{4})","$1 $2 $3 $4",["1"]]],"0"],PK:["92","00","122\\d{6}|[24-8]\\d{10,11}|9(?:[013-9]\\d{8,10}|2(?:[01]\\d\\d|2(?:[06-8]\\d|1[01]))\\d{7})|(?:[2-8]\\d{3}|92(?:[0-7]\\d|8[1-9]))\\d{6}|[24-9]\\d{8}|[89]\\d{7}",[8,9,10,11,12],[["(\\d{3})(\\d{3})(\\d{2,7})","$1 $2 $3",["[89]0"],"0$1"],["(\\d{4})(\\d{5})","$1 $2",["1"]],["(\\d{3})(\\d{6,7})","$1 $2",["2(?:3[2358]|4[2-4]|9[2-8])|45[3479]|54[2-467]|60[468]|72[236]|8(?:2[2-689]|3[23578]|4[3478]|5[2356])|9(?:2[2-8]|3[27-9]|4[2-6]|6[3569]|9[25-8])","9(?:2[3-8]|98)|(?:2(?:3[2358]|4[2-4]|9[2-8])|45[3479]|54[2-467]|60[468]|72[236]|8(?:2[2-689]|3[23578]|4[3478]|5[2356])|9(?:22|3[27-9]|4[2-6]|6[3569]|9[25-7]))[2-9]"],"(0$1)"],["(\\d{2})(\\d{7,8})","$1 $2",["(?:2[125]|4[0-246-9]|5[1-35-7]|6[1-8]|7[14]|8[16]|91)[2-9]"],"(0$1)"],["(\\d{5})(\\d{5})","$1 $2",["58"],"(0$1)"],["(\\d{3})(\\d{7})","$1 $2",["3"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3 $4",["2[125]|4[0-246-9]|5[1-35-7]|6[1-8]|7[14]|8[16]|91"],"(0$1)"],["(\\d{3})(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3 $4",["[24-9]"],"(0$1)"]],"0"],PL:["48","00","6\\d{5}(?:\\d{2})?|8\\d{9}|[1-9]\\d{6}(?:\\d{2})?",[6,7,8,9,10],[["(\\d{5})","$1",["19"]],["(\\d{3})(\\d{3})","$1 $2",["11|64"]],["(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3",["(?:1[2-8]|2[2-69]|3[2-4]|4[1-468]|5[24-689]|6[1-3578]|7[14-7]|8[1-79]|9[145])1","(?:1[2-8]|2[2-69]|3[2-4]|4[1-468]|5[24-689]|6[1-3578]|7[14-7]|8[1-79]|9[145])19"]],["(\\d{3})(\\d{2})(\\d{2,3})","$1 $2 $3",["64"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["21|39|45|5[0137]|6[0469]|7[02389]|8(?:0[14]|8)"]],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["1[2-8]|[2-7]|8[1-79]|9[145]"]],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["8"]]]],PM:["508","00","(?:[45]|80\\d\\d)\\d{5}",[6,9],[["(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3",["[45]"],"0$1"],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["8"],"0$1"]],"0"],PR:["1","011","(?:[589]\\d\\d|787)\\d{7}",[10],0,"1",0,0,0,0,"787|939"],PS:["970","00","[2489]2\\d{6}|(?:1\\d|5)\\d{8}",[8,9,10],[["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["[2489]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["5"],"0$1"],["(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["1"]]],"0"],PT:["351","00","1693\\d{5}|(?:[26-9]\\d|30)\\d{7}",[9],[["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["2[12]"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["16|[236-9]"]]]],PW:["680","01[12]","(?:[24-8]\\d\\d|345|900)\\d{4}",[7],[["(\\d{3})(\\d{4})","$1 $2",["[2-9]"]]]],PY:["595","00","59\\d{4,6}|9\\d{5,10}|(?:[2-46-8]\\d|5[0-8])\\d{4,7}",[6,7,8,9,10,11],[["(\\d{3})(\\d{3,6})","$1 $2",["[2-9]0"],"0$1"],["(\\d{2})(\\d{5})","$1 $2",["[26]1|3[289]|4[1246-8]|7[1-3]|8[1-36]"],"(0$1)"],["(\\d{3})(\\d{4,5})","$1 $2",["2[279]|3[13-5]|4[359]|5|6(?:[34]|7[1-46-8])|7[46-8]|85"],"(0$1)"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["2[14-68]|3[26-9]|4[1246-8]|6(?:1|75)|7[1-35]|8[1-36]"],"(0$1)"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["87"]],["(\\d{3})(\\d{6})","$1 $2",["9(?:[5-79]|8[1-6])"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[2-8]"],"0$1"],["(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["9"]]],"0"],QA:["974","00","[2-7]\\d{7}|800\\d{4}(?:\\d{2})?|2\\d{6}",[7,8,9],[["(\\d{3})(\\d{4})","$1 $2",["2[126]|8"]],["(\\d{4})(\\d{4})","$1 $2",["[2-7]"]]]],RE:["262","00","9769\\d{5}|(?:26|[68]\\d)\\d{7}",[9],[["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[2689]"],"0$1"]],"0",0,0,0,0,"26[23]|69|[89]"],RO:["40","00","(?:[237]\\d|[89]0)\\d{7}|[23]\\d{5}",[6,9],[["(\\d{3})(\\d{3})","$1 $2",["2[3-6]","2[3-6]\\d9"],"0$1"],["(\\d{2})(\\d{4})","$1 $2",["219|31"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[23]1"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[237-9]"],"0$1"]],"0",0,0,0,0,0,0,0," int "],RS:["381","00","38[02-9]\\d{6,9}|6\\d{7,9}|90\\d{4,8}|38\\d{5,6}|(?:7\\d\\d|800)\\d{3,9}|(?:[12]\\d|3[0-79])\\d{5,10}",[6,7,8,9,10,11,12],[["(\\d{3})(\\d{3,9})","$1 $2",["(?:2[389]|39)0|[7-9]"],"0$1"],["(\\d{2})(\\d{5,10})","$1 $2",["[1-36]"],"0$1"]],"0"],RU:["7","810","8\\d{13}|[347-9]\\d{9}",[10,14],[["(\\d{4})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["7(?:1[0-8]|2[1-9])","7(?:1(?:[0-6]2|7|8[27])|2(?:1[23]|[2-9]2))","7(?:1(?:[0-6]2|7|8[27])|2(?:13[03-69]|62[013-9]))|72[1-57-9]2"],"8 ($1)",1],["(\\d{5})(\\d)(\\d{2})(\\d{2})","$1 $2 $3 $4",["7(?:1[0-68]|2[1-9])","7(?:1(?:[06][3-6]|[18]|2[35]|[3-5][3-5])|2(?:[13][3-5]|[24-689]|7[457]))","7(?:1(?:0(?:[356]|4[023])|[18]|2(?:3[013-9]|5)|3[45]|43[013-79]|5(?:3[1-8]|4[1-7]|5)|6(?:3[0-35-9]|[4-6]))|2(?:1(?:3[178]|[45])|[24-689]|3[35]|7[457]))|7(?:14|23)4[0-8]|71(?:33|45)[1-79]"],"8 ($1)",1],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["7"],"8 ($1)",1],["(\\d{3})(\\d{3})(\\d{2})(\\d{2})","$1 $2-$3-$4",["[349]|8(?:[02-7]|1[1-8])"],"8 ($1)",1],["(\\d{4})(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3 $4",["8"],"8 ($1)"]],"8",0,0,0,0,"3[04-689]|[489]",0,"8~10"],RW:["250","00","(?:06|[27]\\d\\d|[89]00)\\d{6}",[8,9],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["0"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[7-9]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["2"]]],"0"],SA:["966","00","92\\d{7}|(?:[15]|8\\d)\\d{8}",[9,10],[["(\\d{4})(\\d{5})","$1 $2",["9"]],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["1"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["5"],"0$1"],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["81"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["8"]]],"0"],SB:["677","0[01]","(?:[1-6]|[7-9]\\d\\d)\\d{4}",[5,7],[["(\\d{2})(\\d{5})","$1 $2",["7|8[4-9]|9(?:[1-8]|9[0-8])"]]]],SC:["248","010|0[0-2]","8000\\d{3}|(?:[249]\\d|64)\\d{5}",[7],[["(\\d)(\\d{3})(\\d{3})","$1 $2 $3",["[246]|9[57]"]]],0,0,0,0,0,0,0,"00"],SD:["249","00","[19]\\d{8}",[9],[["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[19]"],"0$1"]],"0"],SE:["46","00","(?:[26]\\d\\d|9)\\d{9}|[1-9]\\d{8}|[1-689]\\d{7}|[1-4689]\\d{6}|2\\d{5}",[6,7,8,9,10],[["(\\d{2})(\\d{2,3})(\\d{2})","$1-$2 $3",["20"],"0$1",0,"$1 $2 $3"],["(\\d{3})(\\d{4})","$1-$2",["9(?:00|39|44)"],"0$1",0,"$1 $2"],["(\\d{2})(\\d{3})(\\d{2})","$1-$2 $3",["[12][136]|3[356]|4[0246]|6[03]|90[1-9]"],"0$1",0,"$1 $2 $3"],["(\\d)(\\d{2,3})(\\d{2})(\\d{2})","$1-$2 $3 $4",["8"],"0$1",0,"$1 $2 $3 $4"],["(\\d{3})(\\d{2,3})(\\d{2})","$1-$2 $3",["1[2457]|2(?:[247-9]|5[0138])|3[0247-9]|4[1357-9]|5[0-35-9]|6(?:[125689]|4[02-57]|7[0-2])|9(?:[125-8]|3[02-5]|4[0-3])"],"0$1",0,"$1 $2 $3"],["(\\d{3})(\\d{2,3})(\\d{3})","$1-$2 $3",["9(?:00|39|44)"],"0$1",0,"$1 $2 $3"],["(\\d{2})(\\d{2,3})(\\d{2})(\\d{2})","$1-$2 $3 $4",["1[13689]|2[0136]|3[1356]|4[0246]|54|6[03]|90[1-9]"],"0$1",0,"$1 $2 $3 $4"],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1-$2 $3 $4",["10|7"],"0$1",0,"$1 $2 $3 $4"],["(\\d)(\\d{3})(\\d{3})(\\d{2})","$1-$2 $3 $4",["8"],"0$1",0,"$1 $2 $3 $4"],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1-$2 $3 $4",["[13-5]|2(?:[247-9]|5[0138])|6(?:[124-689]|7[0-2])|9(?:[125-8]|3[02-5]|4[0-3])"],"0$1",0,"$1 $2 $3 $4"],["(\\d{3})(\\d{2})(\\d{2})(\\d{3})","$1-$2 $3 $4",["9"],"0$1",0,"$1 $2 $3 $4"],["(\\d{3})(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1-$2 $3 $4 $5",["[26]"],"0$1",0,"$1 $2 $3 $4 $5"]],"0"],SG:["65","0[0-3]\\d","(?:(?:1\\d|8)\\d\\d|7000)\\d{7}|[3689]\\d{7}",[8,10,11],[["(\\d{4})(\\d{4})","$1 $2",["[369]|8(?:0[1-4]|[1-9])"]],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["8"]],["(\\d{4})(\\d{4})(\\d{3})","$1 $2 $3",["7"]],["(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["1"]]]],SH:["290","00","(?:[256]\\d|8)\\d{3}",[4,5],0,0,0,0,0,0,"[256]"],SI:["386","00|10(?:22|66|88|99)","[1-7]\\d{7}|8\\d{4,7}|90\\d{4,6}",[5,6,7,8],[["(\\d{2})(\\d{3,6})","$1 $2",["8[09]|9"],"0$1"],["(\\d{3})(\\d{5})","$1 $2",["59|8"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[37][01]|4[0139]|51|6"],"0$1"],["(\\d)(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[1-57]"],"(0$1)"]],"0",0,0,0,0,0,0,"00"],SJ:["47","00","0\\d{4}|(?:[489]\\d|[57]9)\\d{6}",[5,8],0,0,0,0,0,0,"79"],SK:["421","00","[2-689]\\d{8}|[2-59]\\d{6}|[2-5]\\d{5}",[6,7,9],[["(\\d)(\\d{2})(\\d{3,4})","$1 $2 $3",["21"],"0$1"],["(\\d{2})(\\d{2})(\\d{2,3})","$1 $2 $3",["[3-5][1-8]1","[3-5][1-8]1[67]"],"0$1"],["(\\d)(\\d{3})(\\d{3})(\\d{2})","$1/$2 $3 $4",["2"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[689]"],"0$1"],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1/$2 $3 $4",["[3-5]"],"0$1"]],"0"],SL:["232","00","(?:[237-9]\\d|66)\\d{6}",[8],[["(\\d{2})(\\d{6})","$1 $2",["[236-9]"],"(0$1)"]],"0"],SM:["378","00","(?:0549|[5-7]\\d)\\d{6}",[8,10],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[5-7]"]],["(\\d{4})(\\d{6})","$1 $2",["0"]]],0,0,"([89]\\d{5})$","0549$1"],SN:["221","00","(?:[378]\\d|93)\\d{7}",[9],[["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["8"]],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[379]"]]]],SO:["252","00","[346-9]\\d{8}|[12679]\\d{7}|[1-5]\\d{6}|[1348]\\d{5}",[6,7,8,9],[["(\\d{2})(\\d{4})","$1 $2",["8[125]"]],["(\\d{6})","$1",["[134]"]],["(\\d)(\\d{6})","$1 $2",["[15]|2[0-79]|3[0-46-8]|4[0-7]"]],["(\\d)(\\d{7})","$1 $2",["24|[67]"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[3478]|64|90"]],["(\\d{2})(\\d{5,7})","$1 $2",["1|28|6(?:0[5-7]|[1-35-9])|9[2-9]"]]],"0"],SR:["597","00","(?:[2-5]|68|[78]\\d)\\d{5}",[6,7],[["(\\d{2})(\\d{2})(\\d{2})","$1-$2-$3",["56"]],["(\\d{3})(\\d{3})","$1-$2",["[2-5]"]],["(\\d{3})(\\d{4})","$1-$2",["[6-8]"]]]],SS:["211","00","[19]\\d{8}",[9],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[19]"],"0$1"]],"0"],ST:["239","00","(?:22|9\\d)\\d{5}",[7],[["(\\d{3})(\\d{4})","$1 $2",["[29]"]]]],SV:["503","00","[267]\\d{7}|[89]00\\d{4}(?:\\d{4})?",[7,8,11],[["(\\d{3})(\\d{4})","$1 $2",["[89]"]],["(\\d{4})(\\d{4})","$1 $2",["[267]"]],["(\\d{3})(\\d{4})(\\d{4})","$1 $2 $3",["[89]"]]]],SX:["1","011","7215\\d{6}|(?:[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"1|(5\\d{6})$","721$1",0,"721"],SY:["963","00","[1-39]\\d{8}|[1-5]\\d{7}",[8,9],[["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[1-5]"],"0$1",1],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["9"],"0$1",1]],"0"],SZ:["268","00","0800\\d{4}|(?:[237]\\d|900)\\d{6}",[8,9],[["(\\d{4})(\\d{4})","$1 $2",["[0237]"]],["(\\d{5})(\\d{4})","$1 $2",["9"]]]],TA:["290","00","8\\d{3}",[4],0,0,0,0,0,0,"8"],TC:["1","011","(?:[58]\\d\\d|649|900)\\d{7}",[10],0,"1",0,"1|([2-479]\\d{6})$","649$1",0,"649"],TD:["235","00|16","(?:22|[69]\\d|77)\\d{6}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[2679]"]]],0,0,0,0,0,0,0,"00"],TG:["228","00","[279]\\d{7}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[279]"]]]],TH:["66","00[1-9]","(?:001800|[2-57]|[689]\\d)\\d{7}|1\\d{7,9}",[8,9,10,13],[["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["2"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[13-9]"],"0$1"],["(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["1"]]],"0"],TJ:["992","810","(?:00|11|[2-57-9]\\d)\\d{7}",[9],[["(\\d{6})(\\d)(\\d{2})","$1 $2 $3",["331","3317"],0,1],["(\\d{3})(\\d{2})(\\d{4})","$1 $2 $3",["[34]7|91[78]"],0,1],["(\\d{4})(\\d)(\\d{4})","$1 $2 $3",["3[1-5]"],0,1],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[02-57-9]|11"],0,1]],"8",0,0,0,0,0,0,"8~10"],TK:["690","00","[2-47]\\d{3,6}",[4,5,6,7]],TL:["670","00","7\\d{7}|(?:[2-47]\\d|[89]0)\\d{5}",[7,8],[["(\\d{3})(\\d{4})","$1 $2",["[2-489]|70"]],["(\\d{4})(\\d{4})","$1 $2",["7"]]]],TM:["993","810","[1-6]\\d{7}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2-$3-$4",["12"],"(8 $1)"],["(\\d{3})(\\d)(\\d{2})(\\d{2})","$1 $2-$3-$4",["[1-5]"],"(8 $1)"],["(\\d{2})(\\d{6})","$1 $2",["6"],"8 $1"]],"8",0,0,0,0,0,0,"8~10"],TN:["216","00","[2-57-9]\\d{7}",[8],[["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[2-57-9]"]]]],TO:["676","00","(?:0800|(?:[5-8]\\d\\d|999)\\d)\\d{3}|[2-8]\\d{4}",[5,7],[["(\\d{2})(\\d{3})","$1-$2",["[2-4]|50|6[09]|7[0-24-69]|8[05]"]],["(\\d{4})(\\d{3})","$1 $2",["0"]],["(\\d{3})(\\d{4})","$1 $2",["[5-9]"]]]],TR:["90","00","4\\d{6}|8\\d{11,12}|(?:[2-58]\\d\\d|900)\\d{7}",[7,10,12,13],[["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["512|8[01589]|90"],"0$1",1],["(\\d{3})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["5(?:[0-59]|61)","5(?:[0-59]|616)","5(?:[0-59]|6161)"],"0$1",1],["(\\d{3})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[24][1-8]|3[1-9]"],"(0$1)",1],["(\\d{3})(\\d{3})(\\d{6,7})","$1 $2 $3",["80"],"0$1",1]],"0"],TT:["1","011","(?:[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"1|([2-46-8]\\d{6})$","868$1",0,"868"],TV:["688","00","(?:2|7\\d\\d|90)\\d{4}",[5,6,7],[["(\\d{2})(\\d{3})","$1 $2",["2"]],["(\\d{2})(\\d{4})","$1 $2",["90"]],["(\\d{2})(\\d{5})","$1 $2",["7"]]]],TW:["886","0(?:0[25-79]|19)","[2-689]\\d{8}|7\\d{9,10}|[2-8]\\d{7}|2\\d{6}",[7,8,9,10,11],[["(\\d{2})(\\d)(\\d{4})","$1 $2 $3",["202"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[258]0"],"0$1"],["(\\d)(\\d{3,4})(\\d{4})","$1 $2 $3",["[23568]|4(?:0[02-48]|[1-47-9])|7[1-9]","[23568]|4(?:0[2-48]|[1-47-9])|(?:400|7)[1-9]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[49]"],"0$1"],["(\\d{2})(\\d{4})(\\d{4,5})","$1 $2 $3",["7"],"0$1"]],"0",0,0,0,0,0,0,0,"#"],TZ:["255","00[056]","(?:[26-8]\\d|41|90)\\d{7}",[9],[["(\\d{3})(\\d{2})(\\d{4})","$1 $2 $3",["[89]"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[24]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[67]"],"0$1"]],"0"],UA:["380","00","[89]\\d{9}|[3-9]\\d{8}",[9,10],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["6[12][29]|(?:3[1-8]|4[136-8]|5[12457]|6[49])2|(?:56|65)[24]","6[12][29]|(?:35|4[1378]|5[12457]|6[49])2|(?:56|65)[24]|(?:3[1-46-8]|46)2[013-9]"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["4[45][0-5]|5(?:0|6[37])|6(?:[12][018]|[36-8])|7|89|9[1-9]|(?:48|57)[0137-9]","4[45][0-5]|5(?:0|6(?:3[14-7]|7))|6(?:[12][018]|[36-8])|7|89|9[1-9]|(?:48|57)[0137-9]"],"0$1"],["(\\d{4})(\\d{5})","$1 $2",["[3-6]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["[89]"],"0$1"]],"0",0,0,0,0,0,0,"0~0"],UG:["256","00[057]","800\\d{6}|(?:[29]0|[347]\\d)\\d{7}",[9],[["(\\d{4})(\\d{5})","$1 $2",["202","2024"],"0$1"],["(\\d{3})(\\d{6})","$1 $2",["[27-9]|4(?:6[45]|[7-9])"],"0$1"],["(\\d{2})(\\d{7})","$1 $2",["[34]"],"0$1"]],"0"],US:["1","011","[2-9]\\d{9}",[10],[["(\\d{3})(\\d{3})(\\d{4})","($1) $2-$3",["[2-9]"],0,1,"$1-$2-$3"]],"1",0,0,0,0,0,[["5(?:05(?:[2-57-9]\\d\\d|6(?:[0-35-9]\\d|44))|82(?:2(?:0[0-2]|[28]2)|3(?:0[02]|33)|4(?:00|4[24]|65|82)|5(?:00|29|83)|6(?:00|66|82)|777|8(?:00|88)|9(?:00|9[89])))\\d{4}|(?:2(?:0[1-35-9]|1[02-9]|2[03-589]|3[149]|4[08]|5[1-46]|6[0279]|7[0269]|8[13])|3(?:0[1-57-9]|1[02-9]|2[01356]|3[0-24679]|4[167]|5[12]|6[014]|8[056])|4(?:0[124-9]|1[02-579]|2[3-5]|3[0245]|4[023578]|58|6[39]|7[0589]|8[04])|5(?:0[1-47-9]|1[0235-8]|20|3[0149]|4[01]|5[19]|6[1-47]|7[0-5]|8[056])|6(?:0[1-35-9]|1[024-9]|2[03689]|[34][016]|5[0179]|6[0-279]|78|8[0-29])|7(?:0[1-46-8]|1[2-9]|2[04-7]|3[1247]|4[037]|5[47]|6[02359]|7[0-59]|8[156])|8(?:0[1-68]|1[02-8]|2[08]|3[0-289]|4[03578]|5[046-9]|6[02-5]|7[028])|9(?:0[1346-9]|1[02-9]|2[0589]|3[0146-8]|4[01579]|5[12469]|7[0-389]|8[04-69]))[2-9]\\d{6}"],[""],["8(?:00|33|44|55|66|77|88)[2-9]\\d{6}"],["900[2-9]\\d{6}"],["52(?:3(?:[2-46-9][02-9]\\d|5(?:[02-46-9]\\d|5[0-46-9]))|4(?:[2-478][02-9]\\d|5(?:[034]\\d|2[024-9]|5[0-46-9])|6(?:0[1-9]|[2-9]\\d)|9(?:[05-9]\\d|2[0-5]|49)))\\d{4}|52[34][2-9]1[02-9]\\d{4}|5(?:00|2[12]|33|44|66|77|88)[2-9]\\d{6}"]]],UY:["598","0(?:0|1[3-9]\\d)","4\\d{9}|[249]\\d{7}|(?:[49]\\d|80)\\d{5}",[7,8,10],[["(\\d{3})(\\d{4})","$1 $2",["405|8|90"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["9"],"0$1"],["(\\d{4})(\\d{4})","$1 $2",["[24]"]],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["4"],"0$1"]],"0",0,0,0,0,0,0,"00"," int. "],UZ:["998","810","(?:33|55|[679]\\d|88)\\d{7}",[9],[["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[35-9]"],"8 $1"]],"8",0,0,0,0,0,0,"8~10"],VA:["39","00","0\\d{5,10}|3[0-8]\\d{7,10}|55\\d{8}|8\\d{5}(?:\\d{2,4})?|(?:1\\d|39)\\d{7,8}",[6,7,8,9,10,11],0,0,0,0,0,0,"06698"],VC:["1","011","(?:[58]\\d\\d|784|900)\\d{7}",[10],0,"1",0,"1|([2-7]\\d{6})$","784$1",0,"784"],VE:["58","00","[68]00\\d{7}|(?:[24]\\d|[59]0)\\d{8}",[10],[["(\\d{3})(\\d{7})","$1-$2",["[24-689]"],"0$1"]],"0"],VG:["1","011","(?:284|[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"1|([2-578]\\d{6})$","284$1",0,"284"],VI:["1","011","[58]\\d{9}|(?:34|90)0\\d{7}",[10],0,"1",0,"1|([2-9]\\d{6})$","340$1",0,"340"],VN:["84","00","[12]\\d{9}|[135-9]\\d{8}|[16]\\d{7}|[16-8]\\d{6}",[7,8,9,10],[["(\\d{2})(\\d{5})","$1 $2",["80"],"0$1",1],["(\\d{4})(\\d{4,6})","$1 $2",["1"],0,1],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[69]"],"0$1",1],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[3578]"],"0$1",1],["(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["2[48]"],"0$1",1],["(\\d{3})(\\d{4})(\\d{3})","$1 $2 $3",["2"],"0$1",1]],"0"],VU:["678","00","[57-9]\\d{6}|(?:[238]\\d|48)\\d{3}",[5,7],[["(\\d{3})(\\d{4})","$1 $2",["[57-9]"]]]],WF:["681","00","(?:40|72)\\d{4}|8\\d{5}(?:\\d{3})?",[6,9],[["(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3",["[478]"]],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["8"]]]],WS:["685","0","(?:[2-6]|8\\d{5})\\d{4}|[78]\\d{6}|[68]\\d{5}",[5,6,7,10],[["(\\d{5})","$1",["[2-5]|6[1-9]"]],["(\\d{3})(\\d{3,7})","$1 $2",["[68]"]],["(\\d{2})(\\d{5})","$1 $2",["7"]]]],XK:["383","00","[23]\\d{7,8}|(?:4\\d\\d|[89]00)\\d{5}",[8,9],[["(\\d{3})(\\d{5})","$1 $2",["[89]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[2-4]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[23]"],"0$1"]],"0"],YE:["967","00","(?:1|7\\d)\\d{7}|[1-7]\\d{6}",[7,8,9],[["(\\d)(\\d{3})(\\d{3,4})","$1 $2 $3",["[1-6]|7[24-68]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["7"],"0$1"]],"0"],YT:["262","00","80\\d{7}|(?:26|63)9\\d{6}",[9],0,"0",0,0,0,0,"269|63"],ZA:["27","00","[1-79]\\d{8}|8\\d{4,9}",[5,6,7,8,9,10],[["(\\d{2})(\\d{3,4})","$1 $2",["8[1-4]"],"0$1"],["(\\d{2})(\\d{3})(\\d{2,3})","$1 $2 $3",["8[1-4]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["860"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[1-9]"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["8"],"0$1"]],"0"],ZM:["260","00","(?:63|80)0\\d{6}|(?:21|[79]\\d)\\d{7}",[9],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[28]"],"0$1"],["(\\d{2})(\\d{7})","$1 $2",["[79]"],"0$1"]],"0"],ZW:["263","00","2(?:[0-57-9]\\d{6,8}|6[0-24-9]\\d{6,7})|[38]\\d{9}|[35-8]\\d{8}|[3-6]\\d{7}|[1-689]\\d{6}|[1-3569]\\d{5}|[1356]\\d{4}",[5,6,7,8,9,10],[["(\\d{3})(\\d{3,5})","$1 $2",["2(?:0[45]|2[278]|[49]8)|3(?:[09]8|17)|6(?:[29]8|37|75)|[23][78]|(?:33|5[15]|6[68])[78]"],"0$1"],["(\\d)(\\d{3})(\\d{2,4})","$1 $2 $3",["[49]"],"0$1"],["(\\d{3})(\\d{4})","$1 $2",["80"],"0$1"],["(\\d{2})(\\d{7})","$1 $2",["24|8[13-59]|(?:2[05-79]|39|5[45]|6[15-8])2","2(?:02[014]|4|[56]20|[79]2)|392|5(?:42|525)|6(?:[16-8]21|52[013])|8[13-59]"],"(0$1)"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["7"],"0$1"],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["2(?:1[39]|2[0157]|[378]|[56][14])|3(?:12|29)","2(?:1[39]|2[0157]|[378]|[56][14])|3(?:123|29)"],"0$1"],["(\\d{4})(\\d{6})","$1 $2",["8"],"0$1"],["(\\d{2})(\\d{3,5})","$1 $2",["1|2(?:0[0-36-9]|12|29|[56])|3(?:1[0-689]|[24-6])|5(?:[0236-9]|1[2-4])|6(?:[013-59]|7[0-46-9])|(?:33|55|6[68])[0-69]|(?:29|3[09]|62)[0-79]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["29[013-9]|39|54"],"0$1"],["(\\d{4})(\\d{3,5})","$1 $2",["(?:25|54)8","258|5483"],"0$1"]],"0"]},nonGeographic:{800:["800",0,"(?:005|[1-9]\\d\\d)\\d{5}",[8],[["(\\d{4})(\\d{4})","$1 $2",["\\d"]]],0,0,0,0,0,0,[0,0,["(?:005|[1-9]\\d\\d)\\d{5}"]]],808:["808",0,"[1-9]\\d{7}",[8],[["(\\d{4})(\\d{4})","$1 $2",["[1-9]"]]],0,0,0,0,0,0,[0,0,0,0,0,0,0,0,0,["[1-9]\\d{7}"]]],870:["870",0,"7\\d{11}|[35-7]\\d{8}",[9,12],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[35-7]"]]],0,0,0,0,0,0,[0,["(?:[356]|774[45])\\d{8}|7[6-8]\\d{7}"]]],878:["878",0,"10\\d{10}",[12],[["(\\d{2})(\\d{5})(\\d{5})","$1 $2 $3",["1"]]],0,0,0,0,0,0,[0,0,0,0,0,0,0,0,["10\\d{10}"]]],881:["881",0,"[0-36-9]\\d{8}",[9],[["(\\d)(\\d{3})(\\d{5})","$1 $2 $3",["[0-36-9]"]]],0,0,0,0,0,0,[0,["[0-36-9]\\d{8}"]]],882:["882",0,"[13]\\d{6}(?:\\d{2,5})?|285\\d{9}|(?:[19]\\d|49)\\d{6}",[7,8,9,10,11,12],[["(\\d{2})(\\d{5})","$1 $2",["16|342"]],["(\\d{2})(\\d{6})","$1 $2",["4"]],["(\\d{2})(\\d{2})(\\d{4})","$1 $2 $3",["[19]"]],["(\\d{2})(\\d{4})(\\d{3})","$1 $2 $3",["3[23]"]],["(\\d{2})(\\d{3,4})(\\d{4})","$1 $2 $3",["1"]],["(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["34[57]"]],["(\\d{3})(\\d{4})(\\d{4})","$1 $2 $3",["34"]],["(\\d{2})(\\d{4,5})(\\d{5})","$1 $2 $3",["[1-3]"]]],0,0,0,0,0,0,[0,["342\\d{4}|(?:337|49)\\d{6}|3(?:2|47|7\\d{3})\\d{7}",[7,8,9,10,12]],0,0,0,0,0,0,["1(?:3(?:0[0347]|[13][0139]|2[035]|4[013568]|6[0459]|7[06]|8[15-8]|9[0689])\\d{4}|6\\d{5,10})|(?:(?:285\\d\\d|3(?:45|[69]\\d{3}))\\d|9[89])\\d{6}"]]],883:["883",0,"210\\d{7}|51\\d{7}(?:\\d{3})?",[9,10,12],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["510"]],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["2"]],["(\\d{3})(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3 $4",["510"]],["(\\d{4})(\\d{4})(\\d{4})","$1 $2 $3",["5"]]],0,0,0,0,0,0,[0,0,0,0,0,0,0,0,["(?:210|51[013]0\\d)\\d{7}|5100\\d{5}"]]],888:["888",0,"\\d{11}",[11],[["(\\d{3})(\\d{3})(\\d{5})","$1 $2 $3"]],0,0,0,0,0,0,[0,0,0,0,0,0,["\\d{11}"]]],979:["979",0,"[1359]\\d{8}",[9],[["(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["[1359]"]]],0,0,0,0,0,0,[0,0,0,["[1359]\\d{8}"]]]}},o=n;function i(e,t){var r=Array.prototype.slice.call(t);return r.push(n),e.apply(this,r)}var a=2,s=17,c=3,u="0-9０-９٠-٩۰-۹",d="  ­​⁠　",l="".concat("-‐-―−ー－").concat("／/").concat("．.").concat(d).concat("()（）［］\\[\\]").concat("~⁓∼～"),p=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.name=this.constructor.name,this.message=t,this.stack=new Error(t).stack};function m(e,t){e=e.split("-"),t=t.split("-");for(var r=e[0].split("."),n=t[0].split("."),o=0;o<3;o++){var i=Number(r[o]),a=Number(n[o]);if(i>a)return 1;if(a>i)return-1;if(!isNaN(i)&&isNaN(a))return 1;if(isNaN(i)&&!isNaN(a))return-1}return e[1]&&t[1]?e[1]>t[1]?1:e[1]<t[1]?-1:0:!e[1]&&t[1]?1:e[1]&&!t[1]?-1:0}function g(e){return g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},g(e)}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function S(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function h(e,t,r){return t&&S(e.prototype,t),r&&S(e,r),e}p.prototype=Object.create(Error.prototype),p.prototype.constructor=p;var y="1.2.0",v="1.7.35",E=" ext. ",A=/^\d+$/,_=function(){function e(t){f(this,e),function(e){if(!e)throw new Error("[libphonenumber-js] `metadata` argument not passed. Check your arguments.");if(!D(e)||!D(e.countries))throw new Error("[libphonenumber-js] `metadata` argument was passed but it's not a valid metadata. Must be an object having `.countries` child object property. Got ".concat(D(e)?"an object of shape: { "+Object.keys(e).join(", ")+" }":"a "+O(e)+": "+e,"."))}(t),this.metadata=t,M.call(this,t)}return h(e,[{key:"getCountries",value:function(){return Object.keys(this.metadata.countries).filter((function(e){return"001"!==e}))}},{key:"getCountryMetadata",value:function(e){return this.metadata.countries[e]}},{key:"nonGeographic",value:function(){if(!(this.v1||this.v2||this.v3))return this.metadata.nonGeographic||this.metadata.nonGeographical}},{key:"hasCountry",value:function(e){return void 0!==this.getCountryMetadata(e)}},{key:"hasCallingCode",value:function(e){if(this.getCountryCodesForCallingCode(e))return!0;if(this.nonGeographic()){if(this.nonGeographic()[e])return!0}else{var t=this.countryCallingCodes()[e];if(t&&1===t.length&&"001"===t[0])return!0}}},{key:"isNonGeographicCallingCode",value:function(e){return this.nonGeographic()?!!this.nonGeographic()[e]:!this.getCountryCodesForCallingCode(e)}},{key:"country",value:function(e){return this.selectNumberingPlan(e)}},{key:"selectNumberingPlan",value:function(e,t){if(e&&A.test(e)&&(t=e,e=null),e&&"001"!==e){if(!this.hasCountry(e))throw new Error("Unknown country: ".concat(e));this.numberingPlan=new T(this.getCountryMetadata(e),this)}else if(t){if(!this.hasCallingCode(t))throw new Error("Unknown calling code: ".concat(t));this.numberingPlan=new T(this.getNumberingPlanMetadata(t),this)}else this.numberingPlan=void 0;return this}},{key:"getCountryCodesForCallingCode",value:function(e){var t=this.countryCallingCodes()[e];if(t){if(1===t.length&&3===t[0].length)return;return t}}},{key:"getCountryCodeForCallingCode",value:function(e){var t=this.getCountryCodesForCallingCode(e);if(t)return t[0]}},{key:"getNumberingPlanMetadata",value:function(e){var t=this.getCountryCodeForCallingCode(e);if(t)return this.getCountryMetadata(t);if(this.nonGeographic()){var r=this.nonGeographic()[e];if(r)return r}else{var n=this.countryCallingCodes()[e];if(n&&1===n.length&&"001"===n[0])return this.metadata.countries["001"]}}},{key:"countryCallingCode",value:function(){return this.numberingPlan.callingCode()}},{key:"IDDPrefix",value:function(){return this.numberingPlan.IDDPrefix()}},{key:"defaultIDDPrefix",value:function(){return this.numberingPlan.defaultIDDPrefix()}},{key:"nationalNumberPattern",value:function(){return this.numberingPlan.nationalNumberPattern()}},{key:"possibleLengths",value:function(){return this.numberingPlan.possibleLengths()}},{key:"formats",value:function(){return this.numberingPlan.formats()}},{key:"nationalPrefixForParsing",value:function(){return this.numberingPlan.nationalPrefixForParsing()}},{key:"nationalPrefixTransformRule",value:function(){return this.numberingPlan.nationalPrefixTransformRule()}},{key:"leadingDigits",value:function(){return this.numberingPlan.leadingDigits()}},{key:"hasTypes",value:function(){return this.numberingPlan.hasTypes()}},{key:"type",value:function(e){return this.numberingPlan.type(e)}},{key:"ext",value:function(){return this.numberingPlan.ext()}},{key:"countryCallingCodes",value:function(){return this.v1?this.metadata.country_phone_code_to_countries:this.metadata.country_calling_codes}},{key:"chooseCountryByCountryCallingCode",value:function(e){return this.selectNumberingPlan(e)}},{key:"hasSelectedNumberingPlan",value:function(){return void 0!==this.numberingPlan}}]),e}(),T=function(){function e(t,r){f(this,e),this.globalMetadataObject=r,this.metadata=t,M.call(this,r.metadata)}return h(e,[{key:"callingCode",value:function(){return this.metadata[0]}},{key:"getDefaultCountryMetadataForRegion",value:function(){return this.globalMetadataObject.getNumberingPlanMetadata(this.callingCode())}},{key:"IDDPrefix",value:function(){if(!this.v1&&!this.v2)return this.metadata[1]}},{key:"defaultIDDPrefix",value:function(){if(!this.v1&&!this.v2)return this.metadata[12]}},{key:"nationalNumberPattern",value:function(){return this.v1||this.v2?this.metadata[1]:this.metadata[2]}},{key:"possibleLengths",value:function(){if(!this.v1)return this.metadata[this.v2?2:3]}},{key:"_getFormats",value:function(e){return e[this.v1?2:this.v2?3:4]}},{key:"formats",value:function(){var e=this;return(this._getFormats(this.metadata)||this._getFormats(this.getDefaultCountryMetadataForRegion())||[]).map((function(t){return new I(t,e)}))}},{key:"nationalPrefix",value:function(){return this.metadata[this.v1?3:this.v2?4:5]}},{key:"_getNationalPrefixFormattingRule",value:function(e){return e[this.v1?4:this.v2?5:6]}},{key:"nationalPrefixFormattingRule",value:function(){return this._getNationalPrefixFormattingRule(this.metadata)||this._getNationalPrefixFormattingRule(this.getDefaultCountryMetadataForRegion())}},{key:"_nationalPrefixForParsing",value:function(){return this.metadata[this.v1?5:this.v2?6:7]}},{key:"nationalPrefixForParsing",value:function(){return this._nationalPrefixForParsing()||this.nationalPrefix()}},{key:"nationalPrefixTransformRule",value:function(){return this.metadata[this.v1?6:this.v2?7:8]}},{key:"_getNationalPrefixIsOptionalWhenFormatting",value:function(){return!!this.metadata[this.v1?7:this.v2?8:9]}},{key:"nationalPrefixIsOptionalWhenFormattingInNationalFormat",value:function(){return this._getNationalPrefixIsOptionalWhenFormatting(this.metadata)||this._getNationalPrefixIsOptionalWhenFormatting(this.getDefaultCountryMetadataForRegion())}},{key:"leadingDigits",value:function(){return this.metadata[this.v1?8:this.v2?9:10]}},{key:"types",value:function(){return this.metadata[this.v1?9:this.v2?10:11]}},{key:"hasTypes",value:function(){return!(this.types()&&0===this.types().length||!this.types())}},{key:"type",value:function(e){if(this.hasTypes()&&C(this.types(),e))return new w(C(this.types(),e),this)}},{key:"ext",value:function(){return this.v1||this.v2?E:this.metadata[13]||E}}]),e}(),I=function(){function e(t,r){f(this,e),this._format=t,this.metadata=r}return h(e,[{key:"pattern",value:function(){return this._format[0]}},{key:"format",value:function(){return this._format[1]}},{key:"leadingDigitsPatterns",value:function(){return this._format[2]||[]}},{key:"nationalPrefixFormattingRule",value:function(){return this._format[3]||this.metadata.nationalPrefixFormattingRule()}},{key:"nationalPrefixIsOptionalWhenFormattingInNationalFormat",value:function(){return!!this._format[4]||this.metadata.nationalPrefixIsOptionalWhenFormattingInNationalFormat()}},{key:"nationalPrefixIsMandatoryWhenFormattingInNationalFormat",value:function(){return this.usesNationalPrefix()&&!this.nationalPrefixIsOptionalWhenFormattingInNationalFormat()}},{key:"usesNationalPrefix",value:function(){return!(!this.nationalPrefixFormattingRule()||b.test(this.nationalPrefixFormattingRule()))}},{key:"internationalFormat",value:function(){return this._format[5]||this.format()}}]),e}(),b=/^\(?\$1\)?$/,w=function(){function e(t,r){f(this,e),this.type=t,this.metadata=r}return h(e,[{key:"pattern",value:function(){return this.metadata.v1?this.type:this.type[0]}},{key:"possibleLengths",value:function(){if(!this.metadata.v1)return this.type[1]||this.metadata.possibleLengths()}}]),e}();function C(e,t){switch(t){case"FIXED_LINE":return e[0];case"MOBILE":return e[1];case"TOLL_FREE":return e[2];case"PREMIUM_RATE":return e[3];case"PERSONAL_NUMBER":return e[4];case"VOICEMAIL":return e[5];case"UAN":return e[6];case"PAGER":return e[7];case"VOIP":return e[8];case"SHARED_COST":return e[9]}}var D=function(e){return"object"===g(e)},O=function(e){return g(e)};function P(e,t){return(t=new _(t)).hasCountry(e)?t.country(e).ext():E}function N(e,t){if((t=new _(t)).hasCountry(e))return t.country(e).countryCallingCode();throw new Error("Unknown country: ".concat(e))}function R(e,t){return void 0!==t.countries[e]}function M(e){var t=e.version;"number"==typeof t?(this.v1=1===t,this.v2=2===t,this.v3=3===t,this.v4=4===t):t?-1===m(t,y)?this.v2=!0:-1===m(t,v)?this.v3=!0:this.v4=!0:this.v1=!0}var L=";ext=",U=function(e){return"([".concat(u,"]{1,").concat(e,"})")};function k(e){var t="[  \\t,]*",r="[:\\.．]?[  \\t,-]*",n="#?",o="[  \\t]*";return L+U("20")+"|"+t+"(?:e?xt(?:ensi(?:ó?|ó))?n?|ｅ?ｘｔｎ?|доб|anexo)"+r+U("20")+"#?|"+t+"(?:[xｘ#＃~～]|int|ｉｎｔ)"+r+U("9")+"#?|[- ]+"+U("6")+"#|"+o+"(?:,{2}|;)"+r+U("15")+"#?|"+o+"(?:,)+"+r+U("9")+n}var F="["+u+"]{"+a+"}",B="[+＋]{0,1}(?:["+l+"]*["+u+"]){3,}["+l+u+"]*",G=new RegExp("^[+＋]{0,1}(?:["+l+"]*["+u+"]){1,2}$","i"),x=B+"(?:"+k()+")?",$=new RegExp("^"+F+"$|^"+x+"$","i");function j(e){return e.length>=a&&$.test(e)}var K=new RegExp("(?:"+k()+")$","i"),V={0:"0",1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9","０":"0","１":"1","２":"2","３":"3","４":"4","５":"5","６":"6","７":"7","８":"8","９":"9","٠":"0","١":"1","٢":"2","٣":"3","٤":"4","٥":"5","٦":"6","٧":"7","٨":"8","٩":"9","۰":"0","۱":"1","۲":"2","۳":"3","۴":"4","۵":"5","۶":"6","۷":"7","۸":"8","۹":"9"};function H(e){return V[e]}function W(e){var t="",r=e.split(""),n=Array.isArray(r),o=0;for(r=n?r:r[Symbol.iterator]();;){var i;if(n){if(o>=r.length)break;i=r[o++]}else{if((o=r.next()).done)break;i=o.value}var a=H(i);a&&(t+=a)}return t}function z(e){var t="",r=e.split(""),n=Array.isArray(r),o=0;for(r=n?r:r[Symbol.iterator]();;){var i;if(n){if(o>=r.length)break;i=r[o++]}else{if((o=r.next()).done)break;i=o.value}t+=q(i,t)||""}return t}function q(e,t){if("+"===e){if(t)return;return"+"}return H(e)}function Y(e,t){return Z(e,void 0,t)}function Z(e,t,r){var n=r.type(t),o=n&&n.possibleLengths()||r.possibleLengths();if(!o)return"IS_POSSIBLE";if("FIXED_LINE_OR_MOBILE"===t){if(!r.type("FIXED_LINE"))return Z(e,"MOBILE",r);var i=r.type("MOBILE");i&&(o=function(e,t){var r=e.slice(),n=t,o=Array.isArray(n),i=0;for(n=o?n:n[Symbol.iterator]();;){var a;if(o){if(i>=n.length)break;a=n[i++]}else{if((i=n.next()).done)break;a=i.value}var s=a;e.indexOf(s)<0&&r.push(s)}return r.sort((function(e,t){return e-t}))}(o,i.possibleLengths()))}else if(t&&!n)return"INVALID_LENGTH";var a=e.length,s=o[0];return s===a?"IS_POSSIBLE":s>a?"TOO_SHORT":o[o.length-1]<a?"TOO_LONG":o.indexOf(a,1)>=0?"IS_POSSIBLE":"INVALID_LENGTH"}function Q(e,t,r){if(void 0===t&&(t={}),r=new _(r),t.v2){if(!e.countryCallingCode)throw new Error("Invalid phone number object passed");r.selectNumberingPlan(e.countryCallingCode)}else{if(!e.phone)return!1;if(e.country){if(!r.hasCountry(e.country))throw new Error("Unknown country: ".concat(e.country));r.country(e.country)}else{if(!e.countryCallingCode)throw new Error("Invalid phone number object passed");r.selectNumberingPlan(e.countryCallingCode)}}if(r.possibleLengths())return X(e.phone||e.nationalNumber,r);if(e.countryCallingCode&&r.isNonGeographicCallingCode(e.countryCallingCode))return!0;throw new Error('Missing "possibleLengths" in metadata. Perhaps the metadata has been generated before v1.0.18.')}function X(e,t){return"IS_POSSIBLE"===Y(e,t)}function J(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=[],n=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{n||null==s.return||s.return()}finally{if(o)throw i}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function ee(e){var t,r,n=(e=e.replace(/^tel:/,"tel=")).split(";"),o=Array.isArray(n),i=0;for(n=o?n:n[Symbol.iterator]();;){var a;if(o){if(i>=n.length)break;a=n[i++]}else{if((i=n.next()).done)break;a=i.value}var s=J(a.split("="),2),c=s[0],u=s[1];switch(c){case"tel":t=u;break;case"ext":r=u;break;case"phone-context":"+"===u[0]&&(t=u+t)}}if(!j(t))return{};var d={number:t};return r&&(d.ext=r),d}function te(e){var t=e.number,r=e.ext;if(!t)return"";if("+"!==t[0])throw new Error('"formatRFC3966()" expects "number" to be in E.164 format.');return"tel:".concat(t).concat(r?";ext="+r:"")}function re(e,t){return e=e||"",new RegExp("^(?:"+t+")$").test(e)}var ne=["MOBILE","PREMIUM_RATE","TOLL_FREE","SHARED_COST","VOIP","PERSONAL_NUMBER","PAGER","UAN","VOICEMAIL"];function oe(e,t,r){if(t=t||{},e.country){(r=new _(r)).selectNumberingPlan(e.country,e.countryCallingCode);var n=t.v2?e.nationalNumber:e.phone;if(re(n,r.nationalNumberPattern())){if(ie(n,"FIXED_LINE",r))return r.type("MOBILE")&&""===r.type("MOBILE").pattern()?"FIXED_LINE_OR_MOBILE":r.type("MOBILE")?ie(n,"MOBILE",r)?"FIXED_LINE_OR_MOBILE":"FIXED_LINE":"FIXED_LINE_OR_MOBILE";for(var o=0,i=ne;o<i.length;o++){var a=i[o];if(ie(n,a,r))return a}}}}function ie(e,t,r){return!(!(t=r.type(t))||!t.pattern())&&!(t.possibleLengths()&&t.possibleLengths().indexOf(e.length)<0)&&re(e,t.pattern())}function ae(e,t,r){return t=t||{},r=new _(r),!!e.country&&(r.selectNumberingPlan(e.country,e.countryCallingCode),r.hasTypes()?void 0!==oe(e,t,r.metadata):re(t.v2?e.nationalNumber:e.phone,r.nationalNumberPattern()))}function se(e){return e.replace(new RegExp("[".concat(l,"]+"),"g")," ").trim()}var ce=/(\$\d)/;function ue(e,t,r){var n=r.useInternationalFormat,o=r.withNationalPrefix,i=(r.carrierCode,r.metadata,e.replace(new RegExp(t.pattern()),n?t.internationalFormat():o&&t.nationalPrefixFormattingRule()?t.format().replace(ce,t.nationalPrefixFormattingRule()):t.format()));return n?se(i):i}var de=/^[\d]+(?:[~\u2053\u223C\uFF5E][\d]+)?$/;function le(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var pe={formatExtension:function(e,t,r){return"".concat(e).concat(r.ext()).concat(t)}};function me(e,t,r,n){if(r=r?function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){le(e,t,r[t])}))}return e}({},pe,r):pe,n=new _(n),e.country&&"001"!==e.country){if(!n.hasCountry(e.country))throw new Error("Unknown country: ".concat(e.country));n.country(e.country)}else{if(!e.countryCallingCode)return e.phone||"";n.selectNumberingPlan(e.countryCallingCode)}var o,i=n.countryCallingCode(),a=r.v2?e.nationalNumber:e.phone;switch(t){case"NATIONAL":return a?fe(o=ge(a,e.carrierCode,"NATIONAL",n,r),e.ext,n,r.formatExtension):"";case"INTERNATIONAL":return a?(o=ge(a,null,"INTERNATIONAL",n,r),fe(o="+".concat(i," ").concat(o),e.ext,n,r.formatExtension)):"+".concat(i);case"E.164":return"+".concat(i).concat(a);case"RFC3966":return te({number:"+".concat(i).concat(a),ext:e.ext});case"IDD":if(!r.fromCountry)return;var s=function(e,t,r,n,o){if(N(n,o.metadata)===r){var i=ge(e,t,"NATIONAL",o);return"1"===r?r+" "+i:i}var a=function(e,t,r){var n=new _(r);return n.selectNumberingPlan(e,void 0),n.defaultIDDPrefix()?n.defaultIDDPrefix():de.test(n.IDDPrefix())?n.IDDPrefix():void 0}(n,0,o.metadata);if(a)return"".concat(a," ").concat(r," ").concat(ge(e,null,"INTERNATIONAL",o))}(a,e.carrierCode,i,r.fromCountry,n);return fe(s,e.ext,n,r.formatExtension);default:throw new Error('Unknown "format" argument passed to "formatNumber()": "'.concat(t,'"'))}}function ge(e,t,r,n,o){var i=function(e,t){var r=e,n=Array.isArray(r),o=0;for(r=n?r:r[Symbol.iterator]();;){var i;if(n){if(o>=r.length)break;i=r[o++]}else{if((o=r.next()).done)break;i=o.value}var a=i;if(a.leadingDigitsPatterns().length>0){var s=a.leadingDigitsPatterns()[a.leadingDigitsPatterns().length-1];if(0!==t.search(s))continue}if(re(t,a.pattern()))return a}}(n.formats(),e);return i?ue(e,i,{useInternationalFormat:"INTERNATIONAL"===r,withNationalPrefix:!i.nationalPrefixIsOptionalWhenFormattingInNationalFormat()||!o||!1!==o.nationalPrefix,carrierCode:t,metadata:n}):e}function fe(e,t,r,n){return t?n(e,t,r):e}function Se(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function he(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var ye=function(){function e(t,r,n){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),!t)throw new TypeError("`country` or `countryCallingCode` not passed");if(!r)throw new TypeError("`nationalNumber` not passed");if(!n)throw new TypeError("`metadata` not passed");var o=new _(n);ve(t)&&(this.country=t,o.country(t),t=o.countryCallingCode()),this.countryCallingCode=t,this.nationalNumber=r,this.number="+"+this.countryCallingCode+this.nationalNumber,this.metadata=n}var t,r;return t=e,r=[{key:"setExt",value:function(e){this.ext=e}},{key:"isPossible",value:function(){return Q(this,{v2:!0},this.metadata)}},{key:"isValid",value:function(){return ae(this,{v2:!0},this.metadata)}},{key:"isNonGeographic",value:function(){return new _(this.metadata).isNonGeographicCallingCode(this.countryCallingCode)}},{key:"isEqual",value:function(e){return this.number===e.number&&this.ext===e.ext}},{key:"getType",value:function(){return oe(this,{v2:!0},this.metadata)}},{key:"format",value:function(e,t){return me(this,e,t?function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){Se(e,t,r[t])}))}return e}({},t,{v2:!0}):{v2:!0},this.metadata)}},{key:"formatNational",value:function(e){return this.format("NATIONAL",e)}},{key:"formatInternational",value:function(e){return this.format("INTERNATIONAL",e)}},{key:"getURI",value:function(e){return this.format("RFC3966",e)}}],r&&he(t.prototype,r),e}(),ve=function(e){return/^[A-Z]{2}$/.test(e)},Ee=new RegExp("(["+u+"])");function Ae(e,t,r,n){if(t){var o=new _(n);o.selectNumberingPlan(t,r);var i=new RegExp(o.IDDPrefix());if(0===e.search(i)){var a=(e=e.slice(e.match(i)[0].length)).match(Ee);if(!(a&&null!=a[1]&&a[1].length>0&&"0"===a[1]))return e}}}function _e(e,t){if(e&&t.numberingPlan.nationalPrefixForParsing()){var r=new RegExp("^(?:"+t.numberingPlan.nationalPrefixForParsing()+")"),n=r.exec(e);if(n){var o,i,a,s=n.length-1,c=s>0&&n[s];if(t.nationalPrefixTransformRule()&&c)o=e.replace(r,t.nationalPrefixTransformRule()),s>1&&(i=n[1]);else{var u=n[0];o=e.slice(u.length),c&&(i=n[1])}if(c){var d=e.indexOf(n[1]);e.slice(0,d)===t.numberingPlan.nationalPrefix()&&(a=t.numberingPlan.nationalPrefix())}else a=n[0];return{nationalNumber:o,nationalPrefix:a,carrierCode:i}}}return{nationalNumber:e}}function Te(e,t){var r=_e(e,t),n=r.nationalNumber,o=r.carrierCode;if(!function(e,t,r){return!(re(e,r.nationalNumberPattern())&&!re(t,r.nationalNumberPattern()))}(e,n,t))return{nationalNumber:e};if(e.length!==n.length+(o?o.length:0)&&t.possibleLengths())switch(Y(n,t)){case"TOO_SHORT":case"INVALID_LENGTH":return{nationalNumber:e}}return{nationalNumber:n,carrierCode:o}}function Ie(e,t,r,n){var o=t?N(t,n):r;if(0===e.indexOf(o)){(n=new _(n)).selectNumberingPlan(t,r);var i=e.slice(o.length),a=Te(i,n).nationalNumber,s=Te(e,n).nationalNumber;if(!re(s,n.nationalNumberPattern())&&re(a,n.nationalNumberPattern())||"TOO_LONG"===Y(s,n))return{countryCallingCode:o,number:i}}return{number:e}}function be(e,t,r,n){if(!e)return{};if("+"!==e[0]){var o=Ae(e,t,r,n);if(!o||o===e){if(t||r){var i=Ie(e,t,r,n),a=i.countryCallingCode,s=i.number;if(a)return{countryCallingCode:a,number:s}}return{number:e}}e="+"+o}if("0"===e[1])return{};n=new _(n);for(var u=2;u-1<=c&&u<=e.length;){var d=e.slice(1,u);if(n.hasCallingCode(d))return n.selectNumberingPlan(d),{countryCallingCode:d,number:e.slice(u)};u++}return{}}var we=!1;function Ce(e,t,r){if(we&&r.isNonGeographicCallingCode(e))return"001";var n=r.getCountryCodesForCallingCode(e);return n?1===n.length?n[0]:function(e,t,r){r=new _(r);var n=e,o=Array.isArray(n),i=0;for(n=o?n:n[Symbol.iterator]();;){var a;if(o){if(i>=n.length)break;a=n[i++]}else{if((i=n.next()).done)break;a=i.value}var s=a;if(r.country(s),r.leadingDigits()){if(t&&0===t.search(r.leadingDigits()))return s}else if(oe({phone:t,country:s},void 0,r.metadata))return s}}(n,t,r.metadata):void 0}var De=250,Oe=new RegExp("[+＋"+u+"]"),Pe=new RegExp("[^"+u+"#]+$"),Ne=!1;function Re(e,t,r){if(t=t||{},r=new _(r),t.defaultCountry&&!r.hasCountry(t.defaultCountry)){if(t.v2)throw new p("INVALID_COUNTRY");throw new Error("Unknown country: ".concat(t.defaultCountry))}var n=function(e,t,r){if(e&&0===e.indexOf("tel:"))return ee(e);var n=function(e,t,r){if(e)if(e.length>De){if(r)throw new p("TOO_LONG")}else{if(!1===t)return e;var n=e.search(Oe);if(!(n<0))return e.slice(n).replace(Pe,"")}}(e,r,t);if(!n)return{};if(!j(n))return function(e){return G.test(e)}(n)?{error:"TOO_SHORT"}:{};var o=function(e){var t=e.search(K);if(t<0)return{};for(var r=e.slice(0,t),n=e.match(K),o=1;o<n.length;){if(n[o])return{number:r,ext:n[o]};o++}}(n);return o.ext?o:{number:n}}(e,t.v2,t.extract),o=n.number,i=n.ext,c=n.error;if(!o){if(t.v2){if("TOO_SHORT"===c)throw new p("TOO_SHORT");throw new p("NOT_A_NUMBER")}return{}}var u=function(e,t,r,n){var o,i=be(z(e),t,r,n.metadata),a=i.countryCallingCode,s=i.number;if(a)n.selectNumberingPlan(a);else{if(!s||!t&&!r)return{};n.selectNumberingPlan(t,r),t?o=t:Ne&&n.isNonGeographicCallingCode(r)&&(o="001"),a=r||N(t,n.metadata)}if(!s)return{countryCallingCode:a};var c=Te(z(s),n),u=c.nationalNumber,d=c.carrierCode,l=Ce(a,u,n);return l&&(o=l,"001"===l||n.country(o)),{country:o,countryCallingCode:a,nationalNumber:u,carrierCode:d}}(o,t.defaultCountry,t.defaultCallingCode,r),d=u.country,l=u.nationalNumber,m=u.countryCallingCode,g=u.carrierCode;if(!r.hasSelectedNumberingPlan()){if(t.v2)throw new p("INVALID_COUNTRY");return{}}if(!l||l.length<a){if(t.v2)throw new p("TOO_SHORT");return{}}if(l.length>s){if(t.v2)throw new p("TOO_LONG");return{}}if(t.v2){var f=new ye(m,l,r.metadata);return d&&(f.country=d),g&&(f.carrierCode=g),i&&(f.ext=i),f}var S=!!(t.extended?r.hasSelectedNumberingPlan():d)&&re(l,r.nationalNumberPattern());return t.extended?{country:d,countryCallingCode:m,carrierCode:g,valid:S,possible:!!S||!(!0!==t.extended||!r.possibleLengths()||!X(l,r)),phone:l,ext:i}:S?function(e,t,r){var n={country:e,phone:t};return r&&(n.ext=r),n}(d,l,i):{}}function Me(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Le(e,t,r){return Re(e,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){Me(e,t,r[t])}))}return e}({},t,{v2:!0}),r)}function Ue(e){return Ue="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ue(e)}function ke(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Fe(){var e=Be(arguments);return Le(e.text,e.options,e.metadata)}function Be(e){var t,r,n,o=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=[],n=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{n||null==s.return||s.return()}finally{if(o)throw i}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}(Array.prototype.slice.call(e),4),i=o[0],a=o[1],s=o[2],c=o[3];if("string"!=typeof i)throw new TypeError("A text for parsing must be a string.");if(t=i,a&&"string"!=typeof a){if(!Ge(a))throw new Error("Invalid second argument: ".concat(a));s?(r=a,n=s):n=a}else c?(r=s,n=c):(r=void 0,n=s),a&&(r=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){ke(e,t,r[t])}))}return e}({defaultCountry:a},r));return{text:t,options:r,metadata:n}}var Ge=function(e){return"object"===Ue(e)};function xe(){return i(Fe,arguments)}function $e(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function je(e,t,r){t&&t.defaultCountry&&!R(t.defaultCountry,r)&&(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){$e(e,t,r[t])}))}return e}({},t,{defaultCountry:void 0}));try{return Le(e,t,r)}catch(e){if(!(e instanceof p))throw e}}function Ke(){var e=Be(arguments);return je(e.text,e.options,e.metadata)}function Ve(){return i(Ke,arguments)}function He(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function We(){var e=Be(arguments),t=e.text,r=e.options,n=e.metadata;r=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){He(e,t,r[t])}))}return e}({},r,{extract:!1});var o=je(t,r,n);return o&&o.isValid()||!1}function ze(){return i(We,arguments)}function qe(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ye(){var e=Be(arguments),t=e.text,r=e.options,n=e.metadata;r=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){qe(e,t,r[t])}))}return e}({},r,{extract:!1});var o=je(t,r,n);return o&&o.isPossible()||!1}function Ze(){return i(Ye,arguments)}function Qe(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Xe(){var e=Be(arguments),t=e.text,r=e.options,n=e.metadata;r=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){Qe(e,t,r[t])}))}return e}({},r,{extract:!1});try{var o=Le(t,r,n);(n=new _(n)).selectNumberingPlan(o.countryCallingCode);var i=Y(o.nationalNumber,n);if("IS_POSSIBLE"!==i)return i}catch(e){if(e instanceof p)return e.message;throw e}}function Je(){return i(Xe,arguments)}function et(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function tt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var rt=function e(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;tt(this,e),this.key=t,this.value=r,this.next=n,this.prev=o},nt=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;tt(this,e),this.size=0,this.limit=t,this.head=null,this.tail=null,this.cache={}}var t,r;return t=e,(r=[{key:"put",value:function(e,t){if(this.ensureLimit(),this.head){var r=new rt(e,t,this.head);this.head.prev=r,this.head=r}else this.head=this.tail=new rt(e,t);this.cache[e]=this.head,this.size++}},{key:"get",value:function(e){if(this.cache[e]){var t=this.cache[e].value;return this.remove(e),this.put(e,t),t}console.log("Item not available in cache for key ".concat(e))}},{key:"ensureLimit",value:function(){this.size===this.limit&&this.remove(this.tail.key)}},{key:"remove",value:function(e){var t=this.cache[e];null!==t.prev?t.prev.next=t.next:this.head=t.next,null!==t.next?t.next.prev=t.prev:this.tail=t.prev,delete this.cache[e],this.size--}},{key:"clear",value:function(){this.head=null,this.tail=null,this.size=0,this.cache={}}}])&&et(t.prototype,r),e}();function ot(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var it=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.cache=new nt(t)}var t,r;return t=e,(r=[{key:"getPatternForRegExp",value:function(e){var t=this.cache.get(e);return t||(t=new RegExp("^"+e),this.cache.put(e,t)),t}}])&&ot(t.prototype,r),e}();function at(e,t){if(e<0||t<=0||t<e)throw new TypeError;return"{".concat(e,",").concat(t,"}")}function st(e,t){var r=t.search(e);return r>=0?t.slice(0,r):t}var ct="   ᠎ - \u2028\u2029  　",ut="[".concat(ct,"]"),dt="[^".concat(ct,"]"),lt="[".concat("0-9٠-٩۰-۹߀-߉०-९০-৯੦-੯૦-૯୦-୯௦-௯౦-౯೦-೯൦-൯๐-๙໐-໙༠-༩၀-၉႐-႙០-៩᠐-᠙᥆-᥏᧐-᧙᪀-᪉᪐-᪙᭐-᭙᮰-᮹᱀-᱉᱐-᱙꘠-꘩꣐-꣙꤀-꤉꧐-꧙꩐-꩙꯰-꯹０-９","]"),pt="A-Za-zªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԧԱ-Ֆՙա-ևא-תװ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࢠࢢ-ࢬऄ-हऽॐक़-ॡॱ-ॷॹ-ॿঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-ళవ-హఽౘౙౠౡಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൠൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡷᢀ-ᢨᢪᢰ-ᣵᤀ-ᤜᥐ-ᥭᥰ-ᥴᦀ-ᦫᧁ-ᧇᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᳩ-ᳬᳮ-ᳱᳵᳶᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎↃↄⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⸯ々〆〱-〵〻〼ぁ-ゖゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿌ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚗꚠ-ꛥꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐ-ꞓꞠ-Ɦꟸ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꪀ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꯀ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ",mt="[".concat(pt,"]"),gt=new RegExp(mt),ft="[".concat("$¢-¥֏؋৲৳৻૱௹฿៛₠-₹꠸﷼﹩＄￠￡￥￦","]"),St=new RegExp(ft),ht="[".concat("̀-ͯ҃-֑҇-ׇֽֿׁׂׅׄؐ-ًؚ-ٰٟۖ-ۜ۟-۪ۤۧۨ-ܑۭܰ-݊ަ-ް߫-߳ࠖ-࠙ࠛ-ࠣࠥ-ࠧࠩ-࡙࠭-࡛ࣤ-ࣾऀ-ंऺ़ु-ै्॑-ॗॢॣঁ়ু-ৄ্ৢৣਁਂ਼ੁੂੇੈੋ-੍ੑੰੱੵઁં઼ુ-ૅેૈ્ૢૣଁ଼ିୁ-ୄ୍ୖୢୣஂீ்ా-ీె-ైొ-్ౕౖౢౣ಼ಿೆೌ್ೢೣു-ൄ്ൢൣ්ි-ුූัิ-ฺ็-๎ັິ-ູົຼ່-ໍཱ༹༘༙༵༷-ཾྀ-྄྆྇ྍ-ྗྙ-ྼ࿆ိ-ူဲ-့္်ွှၘၙၞ-ၠၱ-ၴႂႅႆႍႝ፝-፟ᜒ-᜔ᜲ-᜴ᝒᝓᝲᝳ឴឵ិ-ួំ៉-៓៝᠋-᠍ᢩᤠ-ᤢᤧᤨᤲ᤹-᤻ᨘᨗᩖᩘ-ᩞ᩠ᩢᩥ-ᩬᩳ-᩿᩼ᬀ-ᬃ᬴ᬶ-ᬺᬼᭂ᭫-᭳ᮀᮁᮢ-ᮥᮨᮩ᯦᮫ᯨᯩᯭᯯ-ᯱᰬ-ᰳᰶ᰷᳐-᳔᳒-᳢᳠-᳨᳭᳴᷀-ᷦ᷼-᷿⃐-⃥⃜⃡-⃰⳯-⵿⳱ⷠ-〪ⷿ-゙゚〭꙯ꙴ-꙽ꚟ꛰꛱ꠂ꠆ꠋꠥꠦ꣄꣠-꣱ꤦ-꤭ꥇ-ꥑꦀ-ꦂ꦳ꦶ-ꦹꦼꨩ-ꨮꨱꨲꨵꨶꩃꩌꪰꪲ-ꪴꪷꪸꪾ꪿꫁ꫬꫭ꫶ꯥꯨ꯭ﬞ︀-️︠-︦","]"),yt=new RegExp(ht),vt=new RegExp("[\0--ÿĀ-ſḀ-ỿƀ-ɏ̀-ͯ]");function Et(e){return!(!gt.test(e)&&!yt.test(e))&&vt.test(e)}function At(e){return"%"===e||St.test(e)}const _t={POSSIBLE:function(e,t,r){return!0},VALID:function(e,t,r){return!(!ae(e,void 0,r)||!Tt(e,t.toString(),r))},STRICT_GROUPING:function(e,t,r,n){var o=t.toString();return!(!ae(e,void 0,r)||!Tt(e,o,r)||bt(e,o)||!It(e,r))&&wt(e,t,r,Ot,n)},EXACT_GROUPING:function(e,t,r,n){var o=t.toString();return!(!ae(e,void 0,r)||!Tt(e,o,r)||bt(e,o)||!It(e,r))&&wt(e,t,r,Dt,n)}};function Tt(e,t,r){for(var n=0;n<t.length-1;n++){var o=t.charAt(n);if("x"===o||"X"===o){var i=t.charAt(n+1);if("x"===i||"X"===i){if(n++,util.isNumberMatch(e,t.substring(n))!=MatchType.NSN_MATCH)return!1}else if(W(t.substring(n))!==e.ext)return!1}}return!0}function It(e,t){if("FROM_DEFAULT_COUNTRY"!=e.getCountryCodeSource())return!0;var r=util.getRegionCodeForCountryCode(e.getCountryCode()),n=util.getMetadataForRegion(r);if(null==n)return!0;var o=util.getNationalSignificantNumber(e),i=util.chooseFormattingPatternForNumber(n.numberFormats(),o);if(i&&i.getNationalPrefixFormattingRule().length>0){if(i.getNationalPrefixOptionalWhenFormatting())return!0;if(PhoneNumberUtil.formattingRuleHasFirstGroupOnly(i.getNationalPrefixFormattingRule()))return!0;var a=PhoneNumberUtil.normalizeDigitsOnly(e.getRawInput());return util.maybeStripNationalPrefixAndCarrierCode(a,n,null)}return!0}function bt(e,t){var r=t.indexOf("/");if(r<0)return!1;var n=t.indexOf("/",r+1);return!(n<0)&&(!(e.getCountryCodeSource()===CountryCodeSource.FROM_NUMBER_WITH_PLUS_SIGN||e.getCountryCodeSource()===CountryCodeSource.FROM_NUMBER_WITHOUT_PLUS_SIGN)||PhoneNumberUtil.normalizeDigitsOnly(t.substring(0,r))!==String(e.getCountryCode())||t.slice(n+1).indexOf("/")>=0)}function wt(e,t,r,n,o){var i=normalizeDigits(t,!0),a=Ct(r,e,null);if(n(r,e,i,a))return!0;var s=MetadataManager.getAlternateFormatsForCountry(e.getCountryCode()),c=util.getNationalSignificantNumber(e);if(s){var u=s.numberFormats(),d=Array.isArray(u),l=0;for(u=d?u:u[Symbol.iterator]();;){var p;if(d){if(l>=u.length)break;p=u[l++]}else{if((l=u.next()).done)break;p=l.value}var m=p;if((!(m.leadingDigitsPatterns().length>0)||o.getPatternForRegExp("^"+m.leadingDigitsPatterns()[0]).test(c))&&n(r,e,i,a=Ct(r,e,m)))return!0}}return!1}function Ct(e,t,r){if(r){var n=util.getNationalSignificantNumber(t);return util.formatNsnUsingPattern(n,r,"RFC3966",e).split("-")}var o=formatNumber(t,"RFC3966",e),i=o.indexOf(";");i<0&&(i=o.length);var a=o.indexOf("-")+1;return o.slice(a,i).split("-")}function Dt(e,t,r,n){var o=r.split(NON_DIGITS_PATTERN),i=t.hasExtension()?o.length-2:o.length-1;if(1==o.length||o[i].contains(util.getNationalSignificantNumber(t)))return!0;for(var a,s,c=n.length-1;c>0&&i>=0;){if(o[i]!==n[c])return!1;c--,i--}return i>=0&&(a=o[i],s=n[0],a.indexOf(s,a.length-s.length)===a.length-s.length)}function Ot(e,t,r,n){var o,i=0;if(t.getCountryCodeSource()!==CountryCodeSource.FROM_DEFAULT_COUNTRY){var a=String(t.getCountryCode());i=r.indexOf(a)+a.length()}for(var s=0;s<n.length;s++){if((i=r.indexOf(n[s],i))<0)return!1;if(i+=n[s].length(),0==s&&i<r.length()){var c=util.getRegionCodeForCountryCode(t.getCountryCode());if(null!=util.getNddPrefixForRegion(c,!0)&&Character.isDigit(r.charAt(i)))return o=util.getNationalSignificantNumber(t),0===r.slice(i-n[s].length).indexOf(o)}}return r.slice(i).contains(t.getExtension())}var Pt=/[\\/] *x/;function Nt(e){return st(Pt,e)}var Rt=/(?:(?:[0-3]?\d\/[01]?\d)|(?:[01]?\d\/[0-3]?\d))\/(?:[12]\d)?\d{2}/,Mt=/[12]\d{3}[-/]?[01]\d[-/]?[0-3]\d +[0-2]\d$/,Lt=/^:[0-5]\d/;function Ut(e,t,r){if(Rt.test(e))return!1;if(Mt.test(e)){var n=r.slice(t+e.length);if(Lt.test(n))return!1}return!0}var kt="(\\[（［",Ft=")\\]）］",Bt="[^".concat(kt).concat(Ft,"]"),Gt="[".concat(kt).concat("+＋","]"),xt=new RegExp("^"+Gt),$t=at(0,3),jt=new RegExp("^(?:[(\\[（［])?(?:"+Bt+"+["+Ft+"])?"+Bt+"+(?:["+kt+"]"+Bt+"+["+Ft+"])"+$t+Bt+"*$"),Kt=/\d{1,5}-+\d{1,5}\s{0,4}\(\d{1,4}/;function Vt(e,t,r,n){if(jt.test(e)&&!Kt.test(e)){if("POSSIBLE"!==n){if(t>0&&!xt.test(e)){var o=r[t-1];if(At(o)||Et(o))return!1}var i=t+e.length;if(i<r.length){var a=r[i];if(At(a)||Et(a))return!1}}return!0}}function Ht(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Wt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var zt=k(),qt=["\\/+(.*)/","(\\([^(]*)","(?:".concat(ut,"-|-").concat(ut,")").concat(ut,"*(.+)"),"[‒-―－]".concat(ut,"*(.+)"),"\\.+".concat(ut,"*([^.]+)"),"".concat(ut,"+(").concat(dt,"+)")],Yt=at(0,2),Zt=at(0,4),Qt=s+c,Xt=at(0,Qt),Jt="[".concat(l,"]")+Zt,er=lt+at(1,Qt),tr="(?:"+Gt+Jt+")"+Yt+er+"(?:"+Jt+er+")"+Xt+"(?:"+zt+")?",rr=new RegExp("[^".concat("0-9²³¹¼-¾٠-٩۰-۹߀-߉०-९০-৯৴-৹੦-੯૦-૯୦-୯୲-୷௦-௲౦-౯౸-౾೦-೯൦-൵๐-๙໐-໙༠-༳၀-၉႐-႙፩-፼ᛮ-ᛰ០-៩៰-៹᠐-᠙᥆-᥏᧐-᧚᪀-᪉᪐-᪙᭐-᭙᮰-᮹᱀-᱉᱐-᱙⁰⁴-⁹₀-₉⅐-ↂↅ-↉①-⒛⓪-⓿❶-➓⳽〇〡-〩〸-〺㆒-㆕㈠-㈩㉈-㉏㉑-㉟㊀-㊉㊱-㊿꘠-꘩ꛦ-ꛯ꠰-꠵꣐-꣙꤀-꤉꧐-꧙꩐-꩙꯰-꯹０-９").concat(pt,"#]+$")),nr=Number.MAX_SAFE_INTEGER||Math.pow(2,53)-1,or=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Wt(this,"state","NOT_READY"),Wt(this,"searchIndex",0),Wt(this,"regExpCache",new it(32)),r=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){Wt(e,t,r[t])}))}return e}({},r,{defaultCallingCode:r.defaultCallingCode,defaultCountry:r.defaultCountry&&R(r.defaultCountry,n)?r.defaultCountry:void 0,leniency:r.leniency||r.extended?"POSSIBLE":"VALID",maxTries:r.maxTries||nr}),!r.leniency)throw new TypeError("`Leniency` not supplied");if(r.maxTries<0)throw new TypeError("`maxTries` not supplied");if(this.text=t,this.options=r,this.metadata=n,this.leniency=_t[r.leniency],!this.leniency)throw new TypeError("Unknown leniency: ".concat(r.leniency,"."));this.maxTries=r.maxTries,this.PATTERN=new RegExp(tr,"ig")}var t,r;return t=e,r=[{key:"find",value:function(){for(var e;this.maxTries>0&&null!==(e=this.PATTERN.exec(this.text));){var t=e[0],r=e.index;if(Ut(t=Nt(t),r,this.text)){var n=this.parseAndVerify(t,r,this.text)||this.extractInnerMatch(t,r,this.text);if(n){if(this.options.v2){var o=new ye(n.country||n.countryCallingCode,n.phone,this.metadata);return n.ext&&(o.ext=n.ext),{startsAt:n.startsAt,endsAt:n.endsAt,number:o}}return n}}this.maxTries--}}},{key:"extractInnerMatch",value:function(e,t,r){for(var n=0,o=qt;n<o.length;n++)for(var i=!0,a=void 0,s=new RegExp(o[n],"g");this.maxTries>0&&null!==(a=s.exec(e));){if(i){var c=st(rr,e.slice(0,a.index)),u=this.parseAndVerify(c,t,r);if(u)return u;this.maxTries--,i=!1}var d=st(rr,a[1]),l=e.indexOf(d,a.index),p=this.parseAndVerify(d,t+l,r);if(p)return p;this.maxTries--}}},{key:"parseAndVerify",value:function(e,t,r){if(Vt(e,t,r,this.options.leniency)){var n=Re(e,{extended:!0,defaultCountry:this.options.defaultCountry,defaultCallingCode:this.options.defaultCallingCode},this.metadata);if(n.possible&&this.leniency(n,e,this.metadata,this.regExpCache)){var o={startsAt:t,endsAt:t+e.length,phone:n.phone};return n.country&&"001"!==n.country?o.country=n.country:o.countryCallingCode=n.countryCallingCode,n.ext&&(o.ext=n.ext),o}}}},{key:"hasNext",value:function(){return"NOT_READY"===this.state&&(this.lastMatch=this.find(),this.lastMatch?this.state="READY":this.state="DONE"),"READY"===this.state}},{key:"next",value:function(){if(!this.hasNext())throw new Error("No next element");var e=this.lastMatch;return this.lastMatch=null,this.state="NOT_READY",e}}],r&&Ht(t.prototype,r),e}();function ir(){var e=Be(arguments);return function(e,t,r){for(var n=new or(e,t,r),o=[];n.hasNext();)o.push(n.next());return o}(e.text,e.options,e.metadata)}function ar(){return i(ir,arguments)}function sr(){var e,t,r,n=Be(arguments),o=n.text,i=n.options,a=n.metadata,s=new or(o,i,a);return e={},r=function(){return{next:function(){return s.hasNext()?{done:!1,value:s.next()}:{done:!0}}}},(t=Symbol.iterator)in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function cr(){return i(sr,arguments)}function ur(e){return ur="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ur(e)}function dr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){lr(e,t,r[t])}))}return e}function lr(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function pr(e,t,r,n){var o=mr(t,r,n);return ir(e,o.options,o.metadata)}function mr(e,t,r){return r?e&&(t=dr({},t,{defaultCountry:e})):t?(r=t,t=e?gr(e)?e:{defaultCountry:e}:void 0):(r=e,t=void 0),{options:dr({},t,{v2:!0}),metadata:r}}var gr=function(e){return"object"===ur(e)};function fr(){return i(pr,arguments)}function Sr(e,t,r,n){var o=mr(t,r,n);return sr(e,o.options,o.metadata)}function hr(){return i(Sr,arguments)}function yr(e,t){return or.call(this,e,t,o)}function vr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}yr.prototype=Object.create(or.prototype,{}),yr.prototype.constructor=yr;var Er=function(){function e(t){var r,n,o=this,i=t.onCountryChange,a=t.onCallingCodeChange;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),n=function(e){for(var t=0,r=Object.keys(e);t<r.length;t++){var n=r[t];o[n]=e[n]}},(r="update")in this?Object.defineProperty(this,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):this[r]=n,this.onCountryChange=i,this.onCallingCodeChange=a}var t,r;return t=e,(r=[{key:"reset",value:function(e,t){this.international=!1,this.IDDPrefix=void 0,this.missingPlus=void 0,this.callingCode=void 0,this.digits="",this.resetNationalSignificantNumber(),this.initCountryAndCallingCode(e,t)}},{key:"resetNationalSignificantNumber",value:function(){this.nationalSignificantNumber=this.getNationalDigits(),this.nationalSignificantNumberMatchesInput=!0,this.nationalPrefix=void 0,this.carrierCode=void 0,this.complexPrefixBeforeNationalSignificantNumber=void 0}},{key:"initCountryAndCallingCode",value:function(e,t){this.setCountry(e),this.setCallingCode(t)}},{key:"setCountry",value:function(e){this.country=e,this.onCountryChange(e)}},{key:"setCallingCode",value:function(e){return this.callingCode=e,this.onCallingCodeChange(this.country,e)}},{key:"startInternationalNumber",value:function(){this.international=!0,this.initCountryAndCallingCode()}},{key:"appendDigits",value:function(e){this.digits+=e}},{key:"appendNationalSignificantNumberDigits",value:function(e){this.nationalSignificantNumber+=e}},{key:"getNationalDigits",value:function(){return this.international?this.digits.slice((this.IDDPrefix?this.IDDPrefix.length:0)+(this.callingCode?this.callingCode.length:0)):this.digits}},{key:"getDigitsWithoutInternationalPrefix",value:function(){return this.international&&this.IDDPrefix?this.digits.slice(this.IDDPrefix.length):this.digits}}])&&vr(t.prototype,r),e}(),Ar="x",_r=new RegExp(Ar);function Tr(e,t){if(t<1)return"";for(var r="";t>1;)1&t&&(r+=e),t>>=1,e+=e;return r+e}function Ir(e,t){return")"===e[t]&&t++,function(e){for(var t=[],r=0;r<e.length;)"("===e[r]?t.push(r):")"===e[r]&&t.pop(),r++;var n=0,o="";t.push(e.length);for(var i=0,a=t;i<a.length;i++){var s=a[i];o+=e.slice(n,s),n=s+1}return o}(e.slice(0,t))}function br(e,t,r){var n=r.metadata,o=r.shouldTryNationalPrefixFormattingRule,i=r.getSeparatorAfterNationalPrefix;if(new RegExp("^(?:".concat(t.pattern(),")$")).test(e.nationalSignificantNumber))return function(e,t,r){var n=r.metadata,o=r.shouldTryNationalPrefixFormattingRule,i=r.getSeparatorAfterNationalPrefix;if(e.nationalSignificantNumber,e.international,e.nationalPrefix,e.carrierCode,o(t)){var a=wr(e,t,{useNationalPrefixFormattingRule:!0,getSeparatorAfterNationalPrefix:i,metadata:n});if(a)return a}return wr(e,t,{useNationalPrefixFormattingRule:!1,getSeparatorAfterNationalPrefix:i,metadata:n})}(e,t,{metadata:n,shouldTryNationalPrefixFormattingRule:o,getSeparatorAfterNationalPrefix:i})}function wr(e,t,r){var n=r.metadata,o=r.useNationalPrefixFormattingRule,i=r.getSeparatorAfterNationalPrefix,a=ue(e.nationalSignificantNumber,t,{carrierCode:e.carrierCode,useInternationalFormat:e.international,withNationalPrefix:o,metadata:n});if(o||(e.nationalPrefix?a=e.nationalPrefix+i(t)+a:e.complexPrefixBeforeNationalSignificantNumber&&(a=e.complexPrefixBeforeNationalSignificantNumber+" "+a)),function(e,t){return W(e)===t.getNationalDigits()}(a,e))return a}function Cr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Dr(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Or=Tr("9",15),Pr=/[- ]/,Nr=new RegExp("^["+l+"]*(\\$\\d["+l+"]*)+$"),Rr=function(){function e(t){var r=this,n=(t.state,t.metadata);!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Dr(this,"getSeparatorAfterNationalPrefix",(function(e){return r.isNANP||e&&e.nationalPrefixFormattingRule()&&Pr.test(e.nationalPrefixFormattingRule())?" ":""})),Dr(this,"shouldTryNationalPrefixFormattingRule",(function(e,t){var r=t.international,n=t.nationalPrefix;if(e.nationalPrefixFormattingRule()){var o=e.usesNationalPrefix();if(o&&n||!o&&!r)return!0}})),this.metadata=n,this.resetFormat()}var t,r;return t=e,r=[{key:"resetFormat",value:function(){this.chosenFormat=void 0,this.template=void 0,this.nationalNumberTemplate=void 0,this.populatedNationalNumberTemplate=void 0,this.populatedNationalNumberTemplatePosition=-1}},{key:"reset",value:function(e,t){this.resetFormat(),e?(this.isNANP="1"===e.callingCode(),this.matchingFormats=e.formats(),t.nationalSignificantNumber&&this.narrowDownMatchingFormats(t)):(this.isNANP=void 0,this.matchingFormats=[])}},{key:"format",value:function(e,t){var r=this;if(function(e,t){return"IS_POSSIBLE"===Y(e,t)}(t.nationalSignificantNumber,this.metadata)){var n=this.matchingFormats,o=Array.isArray(n),i=0;for(n=o?n:n[Symbol.iterator]();;){var a;if(o){if(i>=n.length)break;a=n[i++]}else{if((i=n.next()).done)break;a=i.value}var s=a,c=br(t,s,{metadata:this.metadata,shouldTryNationalPrefixFormattingRule:function(e){return r.shouldTryNationalPrefixFormattingRule(e,{international:t.international,nationalPrefix:t.nationalPrefix})},getSeparatorAfterNationalPrefix:this.getSeparatorAfterNationalPrefix});if(c)return this.resetFormat(),this.chosenFormat=s,this.setNationalNumberTemplate(c.replace(/\d/g,Ar),t),this.populatedNationalNumberTemplate=c,this.populatedNationalNumberTemplatePosition=this.template.lastIndexOf(Ar),c}}return this.formatNationalNumberWithNextDigits(e,t)}},{key:"formatNationalNumberWithNextDigits",value:function(e,t){var r=this.chosenFormat,n=this.chooseFormat(t);if(n)return n===r?this.formatNextNationalNumberDigits(e):this.formatNextNationalNumberDigits(t.getNationalDigits())}},{key:"narrowDownMatchingFormats",value:function(e){var t=this,r=e.nationalSignificantNumber,n=e.nationalPrefix,o=e.international,i=r,a=i.length-3;a<0&&(a=0),this.matchingFormats=this.matchingFormats.filter((function(e){return t.formatSuits(e,o,n)&&t.formatMatches(e,i,a)})),this.chosenFormat&&-1===this.matchingFormats.indexOf(this.chosenFormat)&&this.resetFormat()}},{key:"formatSuits",value:function(e,t,r){return!(r&&!e.usesNationalPrefix()&&!e.nationalPrefixIsOptionalWhenFormattingInNationalFormat()||!t&&!r&&e.nationalPrefixIsMandatoryWhenFormattingInNationalFormat())}},{key:"formatMatches",value:function(e,t,r){var n=e.leadingDigitsPatterns().length;if(0===n)return!0;if(t.length<3)return!0;r=Math.min(r,n-1);var o=e.leadingDigitsPatterns()[r];return new RegExp("^(".concat(o,")")).test(t)}},{key:"getFormatFormat",value:function(e,t){return t?e.internationalFormat():e.format()}},{key:"chooseFormat",value:function(e){var t=this,r=function(){if(o){if(i>=n.length)return"break";a=n[i++]}else{if((i=n.next()).done)return"break";a=i.value}var r=a;return t.chosenFormat===r?"break":Nr.test(t.getFormatFormat(r,e.international))?t.createTemplateForFormat(r,e)?(t.chosenFormat=r,"break"):(t.matchingFormats=t.matchingFormats.filter((function(e){return e!==r})),"continue"):"continue"},n=this.matchingFormats.slice(),o=Array.isArray(n),i=0;e:for(n=o?n:n[Symbol.iterator]();;){var a;switch(r()){case"break":break e;case"continue":continue}}return this.chosenFormat||this.resetFormat(),this.chosenFormat}},{key:"createTemplateForFormat",value:function(e,t){if(!(e.pattern().indexOf("|")>=0)){var r=this.getTemplateForFormat(e,t);return r?(this.setNationalNumberTemplate(r,t),!0):void 0}}},{key:"getInternationalPrefixBeforeCountryCallingCode",value:function(e,t){var r=e.IDDPrefix,n=e.missingPlus;return r?t&&!1===t.spacing?r:r+" ":n?"":"+"}},{key:"getTemplate",value:function(e){if(this.template){for(var t=-1,r=0,n=e.international?this.getInternationalPrefixBeforeCountryCallingCode(e,{spacing:!1}):"";r<n.length+e.getDigitsWithoutInternationalPrefix().length;)t=this.template.indexOf(Ar,t+1),r++;return Ir(this.template,t+1)}}},{key:"setNationalNumberTemplate",value:function(e,t){this.nationalNumberTemplate=e,this.populatedNationalNumberTemplate=e,this.populatedNationalNumberTemplatePosition=-1,t.international?this.template=this.getInternationalPrefixBeforeCountryCallingCode(t).replace(/[\d\+]/g,Ar)+Tr(Ar,t.callingCode.length)+" "+e:this.template=e}},{key:"getTemplateForFormat",value:function(e,t){var r=t.nationalSignificantNumber,n=t.international,o=t.nationalPrefix,i=t.complexPrefixBeforeNationalSignificantNumber,a=e.pattern();a=a.replace(/\[([^\[\]])*\]/g,"\\d").replace(/\d(?=[^,}][^,}])/g,"\\d");var s=Or.match(a)[0];if(!(r.length>s.length)){var c=new RegExp("^"+a+"$"),u=r.replace(/\d/g,"9");c.test(u)&&(s=u);var d,l=this.getFormatFormat(e,n);if(this.shouldTryNationalPrefixFormattingRule(e,{international:n,nationalPrefix:o})){var p=l.replace(ce,e.nationalPrefixFormattingRule());if(W(e.nationalPrefixFormattingRule())===(o||"")+W("$1")&&(l=p,d=!0,o))for(var m=o.length;m>0;)l=l.replace(/\d/,Ar),m--}var g=s.replace(new RegExp(a),l).replace(new RegExp("9","g"),Ar);return d||(i?g=Tr(Ar,i.length)+" "+g:o&&(g=Tr(Ar,o.length)+this.getSeparatorAfterNationalPrefix(e)+g)),n&&(g=se(g)),g}}},{key:"formatNextNationalNumberDigits",value:function(e){var t=function(e,t,r){var n=r.split(""),o=Array.isArray(n),i=0;for(n=o?n:n[Symbol.iterator]();;){var a;if(o){if(i>=n.length)break;a=n[i++]}else{if((i=n.next()).done)break;a=i.value}var s=a;if(e.slice(t+1).search(_r)<0)return;t=e.search(_r),e=e.replace(_r,s)}return[e,t]}(this.populatedNationalNumberTemplate,this.populatedNationalNumberTemplatePosition,e);if(t)return this.populatedNationalNumberTemplate=t[0],this.populatedNationalNumberTemplatePosition=t[1],Ir(this.populatedNationalNumberTemplate,this.populatedNationalNumberTemplatePosition+1);this.resetFormat()}}],r&&Cr(t.prototype,r),e}();function Mr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=[],n=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{n||null==s.return||s.return()}finally{if(o)throw i}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function Lr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Ur=new RegExp("^["+l+u+"]+$","i"),kr="(?:[+＋]["+l+u+"]*|["+l+u+"]+)",Fr=new RegExp("[^"+l+u+"]+.*$"),Br=/[^\d\[\]]/,Gr=function(){function e(t){var r=t.defaultCountry,n=t.defaultCallingCode,o=t.metadata,i=t.onNationalSignificantNumberChange;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.defaultCountry=r,this.defaultCallingCode=n,this.metadata=o,this.onNationalSignificantNumberChange=i}var t,r;return t=e,(r=[{key:"input",value:function(e,t){var r,n=function(e){var t=function(e){var t=function(e){var t,r=e.search(kr);if(!(r<0))return"+"===(e=e.slice(r))[0]&&(t=!0,e=e.slice("+".length)),e=e.replace(Fr,""),t&&(e="+"+e),e}(e)||"";return"+"===t[0]?[t.slice("+".length),!0]:[t]}(e),r=Mr(t,2),n=r[0],o=r[1];return Ur.test(n)||(n=""),[n,o]}(e),o=Mr(n,2),i=o[0],a=o[1],s=W(i);return a&&(t.digits||(t.startInternationalNumber(),s||(r=!0))),s&&this.inputDigits(s,t),{digits:s,justLeadingPlus:r}}},{key:"inputDigits",value:function(e,t){var r=t.digits,n=r.length<3&&r.length+e.length>=3;if(t.appendDigits(e),n&&this.extractIddPrefix(t),this.isWaitingForCountryCallingCode(t)){if(!this.extractCountryCallingCode(t))return}else t.appendNationalSignificantNumberDigits(e);t.international||this.hasExtractedNationalSignificantNumber||this.extractNationalSignificantNumber(t.getNationalDigits(),t.update)}},{key:"isWaitingForCountryCallingCode",value:function(e){var t=e.international,r=e.callingCode;return t&&!r}},{key:"extractCountryCallingCode",value:function(e){var t=be("+"+e.getDigitsWithoutInternationalPrefix(),this.defaultCountry,this.defaultCallingCode,this.metadata.metadata),r=t.countryCallingCode,n=t.number;if(r)return e.setCallingCode(r),e.update({nationalSignificantNumber:n}),!0}},{key:"reset",value:function(e){if(e){this.hasSelectedNumberingPlan=!0;var t=e._nationalPrefixForParsing();this.couldPossiblyExtractAnotherNationalSignificantNumber=t&&Br.test(t)}else this.hasSelectedNumberingPlan=void 0,this.couldPossiblyExtractAnotherNationalSignificantNumber=void 0}},{key:"extractNationalSignificantNumber",value:function(e,t){if(this.hasSelectedNumberingPlan){var r=_e(e,this.metadata),n=r.nationalPrefix,o=r.nationalNumber,i=r.carrierCode;if(o!==e)return this.onExtractedNationalNumber(n,i,o,e,t),!0}}},{key:"extractAnotherNationalSignificantNumber",value:function(e,t,r){if(!this.hasExtractedNationalSignificantNumber)return this.extractNationalSignificantNumber(e,r);if(this.couldPossiblyExtractAnotherNationalSignificantNumber){var n=_e(e,this.metadata),o=n.nationalPrefix,i=n.nationalNumber,a=n.carrierCode;if(i!==t)return this.onExtractedNationalNumber(o,a,i,e,r),!0}}},{key:"onExtractedNationalNumber",value:function(e,t,r,n,o){var i,a,s=n.lastIndexOf(r);if(s>=0&&s===n.length-r.length){a=!0;var c=n.slice(0,s);c!==e&&(i=c)}o({nationalPrefix:e,carrierCode:t,nationalSignificantNumber:r,nationalSignificantNumberMatchesInput:a,complexPrefixBeforeNationalSignificantNumber:i}),this.hasExtractedNationalSignificantNumber=!0,this.onNationalSignificantNumberChange()}},{key:"reExtractNationalSignificantNumber",value:function(e){return!!this.extractAnotherNationalSignificantNumber(e.getNationalDigits(),e.nationalSignificantNumber,e.update)||(this.extractIddPrefix(e)||this.fixMissingPlus(e)?(this.extractCallingCodeAndNationalSignificantNumber(e),!0):void 0)}},{key:"extractIddPrefix",value:function(e){var t=e.international,r=e.IDDPrefix,n=e.digits;if(e.nationalSignificantNumber,!t&&!r){var o=Ae(n,this.defaultCountry,this.defaultCallingCode,this.metadata.metadata);return void 0!==o&&o!==n?(e.update({IDDPrefix:n.slice(0,n.length-o.length)}),this.startInternationalNumber(e),!0):void 0}}},{key:"fixMissingPlus",value:function(e){if(!e.international){var t=Ie(e.digits,this.defaultCountry,this.defaultCallingCode,this.metadata.metadata),r=t.countryCallingCode;if(t.number,r)return e.update({missingPlus:!0}),this.startInternationalNumber(e),!0}}},{key:"startInternationalNumber",value:function(e){e.startInternationalNumber(),e.nationalSignificantNumber&&(e.resetNationalSignificantNumber(),this.onNationalSignificantNumberChange(),this.hasExtractedNationalSignificantNumber=void 0)}},{key:"extractCallingCodeAndNationalSignificantNumber",value:function(e){this.extractCountryCallingCode(e)&&this.extractNationalSignificantNumber(e.getNationalDigits(),e.update)}}])&&Lr(t.prototype,r),e}();function xr(e){return xr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xr(e)}function $r(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var jr=function(){function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.metadata=new _(r);var n=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=[],n=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{n||null==s.return||s.return()}finally{if(o)throw i}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}(this.getCountryAndCallingCode(t),2),o=n[0],i=n[1];this.defaultCountry=o,this.defaultCallingCode=i,this.reset()}var t,r;return t=e,(r=[{key:"getCountryAndCallingCode",value:function(e){var t,r;return e&&("object"===xr(e)?(t=e.defaultCountry,r=e.defaultCallingCode):t=e),t&&!this.metadata.hasCountry(t)&&(t=void 0),[t,r]}},{key:"input",value:function(e){var t=this.parser.input(e,this.state),r=t.digits;if(t.justLeadingPlus)this.formattedOutput="+";else if(r){var n;if(this.determineTheCountryIfNeeded(),this.state.nationalSignificantNumber&&this.formatter.narrowDownMatchingFormats(this.state),this.metadata.hasSelectedNumberingPlan()&&(n=this.formatter.format(r,this.state)),void 0===n&&this.parser.reExtractNationalSignificantNumber(this.state)){this.determineTheCountryIfNeeded();var o=this.state.getNationalDigits();o&&(n=this.formatter.format(o,this.state))}this.formattedOutput=n?this.getFullNumber(n):this.getNonFormattedNumber()}return this.formattedOutput}},{key:"reset",value:function(){var e=this;return this.state=new Er({onCountryChange:function(t){e.country=t},onCallingCodeChange:function(t,r){e.metadata.selectNumberingPlan(t,r),e.formatter.reset(e.metadata.numberingPlan,e.state),e.parser.reset(e.metadata.numberingPlan)}}),this.formatter=new Rr({state:this.state,metadata:this.metadata}),this.parser=new Gr({defaultCountry:this.defaultCountry,defaultCallingCode:this.defaultCallingCode,metadata:this.metadata,state:this.state,onNationalSignificantNumberChange:function(){e.determineTheCountryIfNeeded(),e.formatter.reset(e.metadata.numberingPlan,e.state)}}),this.state.reset(this.defaultCountry,this.defaultCallingCode),this.formattedOutput="",this}},{key:"isInternational",value:function(){return this.state.international}},{key:"getCallingCode",value:function(){return this.state.callingCode}},{key:"getCountryCallingCode",value:function(){return this.getCallingCode()}},{key:"getCountry",value:function(){var e=this.state,t=e.digits,r=e.country;if(t)return r}},{key:"determineTheCountryIfNeeded",value:function(){this.state.country&&!this.isCountryCallingCodeAmbiguous()||this.determineTheCountry()}},{key:"getFullNumber",value:function(e){var t=this;if(this.isInternational()){var r=this.state.callingCode;return function(e){return t.formatter.getInternationalPrefixBeforeCountryCallingCode(t.state,{spacing:!!e})+e}(r?e?"".concat(r," ").concat(e):r:"".concat(this.state.getDigitsWithoutInternationalPrefix()))}return e}},{key:"getNonFormattedNationalNumberWithPrefix",value:function(){var e=this.state,t=e.nationalSignificantNumber,r=e.complexPrefixBeforeNationalSignificantNumber,n=e.nationalPrefix,o=t,i=r||n;return i&&(o=i+o),o}},{key:"getNonFormattedNumber",value:function(){var e=this.state.nationalSignificantNumberMatchesInput;return this.getFullNumber(e?this.getNonFormattedNationalNumberWithPrefix():this.state.getNationalDigits())}},{key:"getNonFormattedTemplate",value:function(){var e=this.getNonFormattedNumber();if(e)return e.replace(/[\+\d]/g,Ar)}},{key:"isCountryCallingCodeAmbiguous",value:function(){var e=this.state.callingCode,t=this.metadata.getCountryCodesForCallingCode(e);return t&&t.length>1}},{key:"determineTheCountry",value:function(){this.state.setCountry(Ce(this.isInternational()?this.state.callingCode:this.defaultCallingCode,this.state.nationalSignificantNumber,this.metadata))}},{key:"getNumber",value:function(){var e=this.state,t=e.nationalSignificantNumber,r=e.carrierCode;if(this.isInternational()){if(!this.state.callingCode)return}else if(!this.state.country&&!this.defaultCallingCode)return;if(t){var n=this.getCountry(),o=this.getCountryCallingCode()||this.defaultCallingCode,i=new ye(n||o,t,this.metadata.metadata);return r&&(i.carrierCode=r),i}}},{key:"isPossible",value:function(){var e=this.getNumber();return!!e&&e.isPossible()}},{key:"isValid",value:function(){var e=this.getNumber();return!!e&&e.isValid()}},{key:"getNationalNumber",value:function(){return this.state.nationalSignificantNumber}},{key:"getChars",value:function(){return(this.state.international?"+":"")+this.state.digits}},{key:"getTemplate",value:function(){return this.formatter.getTemplate(this.state)||this.getNonFormattedTemplate()||""}}])&&$r(t.prototype,r),e}();function Kr(e){return jr.call(this,e,o)}function Vr(){return i(R,arguments)}function Hr(e){return new _(e).getCountries()}function Wr(){return i(Hr,arguments)}function zr(){return i(N,arguments)}function qr(){return i(P,arguments)}function Yr(){return _.call(this,o)}function Zr(e,t,r){if(t[e])return new ye(e,t[e],r)}function Qr(){return i(Zr,arguments)}function Xr(e,t,r){return r||(r=t,t=void 0),new jr(t,r).input(e)}function Jr(){return i(Xr,arguments)}function en(){var e=Be(arguments);return Re(e.text,e.options,e.metadata)}function tn(){return i(en,arguments)}function rn(e){return rn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},rn(e)}function nn(){var e=function(e){var t,r,n,o,i=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=[],n=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{n||null==s.return||s.return()}finally{if(o)throw i}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}(Array.prototype.slice.call(e),5),a=i[0],s=i[1],c=i[2],u=i[3],d=i[4];if("string"==typeof a)if("string"==typeof c)r=c,d?(n=u,o=d):o=u,t=Re(a,{defaultCountry:s,extended:!0},o);else{if("string"!=typeof s)throw new Error("`format` argument not passed to `formatNumber(number, format)`");r=s,u?(n=c,o=u):o=c,t=Re(a,{extended:!0},o)}else{if(!on(a))throw new TypeError("A phone number must either be a string or an object of shape { phone, [country] }.");t=a,r=s,u?(n=c,o=u):o=c}return"International"===r?r="INTERNATIONAL":"National"===r&&(r="NATIONAL"),{input:t,format:r,options:n,metadata:o}}(arguments);return me(e.input,e.format,e.options,e.metadata)}Kr.prototype=Object.create(jr.prototype,{}),Kr.prototype.constructor=Kr,Yr.prototype=Object.create(_.prototype,{}),Yr.prototype.constructor=Yr;var on=function(e){return"object"===rn(e)};function an(){return i(nn,arguments)}function sn(e){return sn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},sn(e)}function cn(){var e=un(arguments);return oe(e.input,e.options,e.metadata)}function un(e){var t,r,n=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=[],n=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{n||null==s.return||s.return()}finally{if(o)throw i}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}(Array.prototype.slice.call(e),4),o=n[0],i=n[1],a=n[2],s=n[3],c={};if("string"==typeof o)"object"!==sn(i)?(s?(c=a,r=s):r=a,t=j(o)?Re(o,{defaultCountry:i},r):{}):(a?(c=i,r=a):r=i,t=j(o)?Re(o,void 0,r):{});else{if(!dn(o))throw new TypeError("A phone number must either be a string or an object of shape { phone, [country] }.");t=o,a?(c=i,r=a):r=i}return{input:t,options:c,metadata:r}}var dn=function(e){return"object"===sn(e)};function ln(){return i(cn,arguments)}function pn(){var e=un(arguments);return Q(e.input,e.options,e.metadata)}function mn(){return i(pn,arguments)}function gn(){var e=un(arguments);return ae(e.input,e.options,e.metadata)}function fn(){return i(gn,arguments)}function Sn(e,t,r){if("string"!=typeof e)throw new TypeError("number must be a string");if("string"!=typeof t)throw new TypeError("country must be a string");return function(e,t,r,n){return r=r||{},e.country===t&&ae(e,r,n)}(j(e)?Re(e,{defaultCountry:t},r):{},t,void 0,r)}function hn(){return i(Sn,arguments)}function yn(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function vn(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}k();var En=new RegExp("^["+d+"]+"),An=new RegExp("["+l+"]+$"),_n=function(){function e(t,r,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),vn(this,"state","NOT_READY"),this.text=t,this.options=r||{},this.metadata=n,this.regexp=new RegExp(x,"ig")}var t,r;return t=e,r=[{key:"find",value:function(){var e=this.regexp.exec(this.text);if(e){var t=e[0],r=e.index;return t=t.replace(En,""),r+=e[0].length-t.length,t=Nt(t=t.replace(An,"")),this.parseCandidate(t,r)||this.find()}}},{key:"parseCandidate",value:function(e,t){if(Ut(e,t,this.text)&&Vt(e,t,this.text,this.options.extended?"POSSIBLE":"VALID")){var r=Re(e,this.options,this.metadata);if(r.phone)return r.startsAt=t,r.endsAt=t+e.length,r}}},{key:"hasNext",value:function(){return"NOT_READY"===this.state&&(this.last_match=this.find(),this.last_match?this.state="READY":this.state="DONE"),"READY"===this.state}},{key:"next",value:function(){if(!this.hasNext())throw new Error("No next element");var e=this.last_match;return this.last_match=null,this.state="NOT_READY",e}}],r&&yn(t.prototype,r),e}();function Tn(){var e=Be(arguments);return function(e,t,r){void 0===t&&(t={});for(var n=new _n(e,t,r),o=[];n.hasNext();)o.push(n.next());return o}(e.text,e.options,e.metadata)}function In(){var e=Be(arguments);return function(e,t,r){void 0===t&&(t={});var n=new _n(e,t,r);return vn({},Symbol.iterator,(function(){return{next:function(){return n.hasNext()?{done:!1,value:n.next()}:{done:!0}}}}))}(e.text,e.options,e.metadata)}function bn(){return i(Tn,arguments)}function wn(){return i(In,arguments)}function Cn(e,t){_n.call(this,e,t,o)}Cn.prototype=Object.create(_n.prototype,{}),Cn.prototype.constructor=Cn},80022:(e,t,r)=>{e=r.nmd(e);var n="__lodash_hash_undefined__",o=9007199254740991,i="[object Arguments]",a="[object Boolean]",s="[object Date]",c="[object Function]",u="[object GeneratorFunction]",d="[object Map]",l="[object Number]",p="[object Object]",m="[object Promise]",g="[object RegExp]",f="[object Set]",S="[object String]",h="[object Symbol]",y="[object WeakMap]",v="[object ArrayBuffer]",E="[object DataView]",A="[object Float32Array]",_="[object Float64Array]",T="[object Int8Array]",I="[object Int16Array]",b="[object Int32Array]",w="[object Uint8Array]",C="[object Uint8ClampedArray]",D="[object Uint16Array]",O="[object Uint32Array]",P=/\w*$/,N=/^\[object .+?Constructor\]$/,R=/^(?:0|[1-9]\d*)$/,M={};M[i]=M["[object Array]"]=M[v]=M[E]=M[a]=M[s]=M[A]=M[_]=M[T]=M[I]=M[b]=M[d]=M[l]=M[p]=M[g]=M[f]=M[S]=M[h]=M[w]=M[C]=M[D]=M[O]=!0,M["[object Error]"]=M[c]=M[y]=!1;var L="object"==typeof r.g&&r.g&&r.g.Object===Object&&r.g,U="object"==typeof self&&self&&self.Object===Object&&self,k=L||U||Function("return this")(),F=t&&!t.nodeType&&t,B=F&&e&&!e.nodeType&&e,G=B&&B.exports===F;function x(e,t){return e.set(t[0],t[1]),e}function $(e,t){return e.add(t),e}function j(e,t,r,n){var o=-1,i=e?e.length:0;for(n&&i&&(r=e[++o]);++o<i;)r=t(r,e[o],o,e);return r}function K(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}function V(e){var t=-1,r=Array(e.size);return e.forEach((function(e,n){r[++t]=[n,e]})),r}function H(e,t){return function(r){return e(t(r))}}function W(e){var t=-1,r=Array(e.size);return e.forEach((function(e){r[++t]=e})),r}var z,q=Array.prototype,Y=Function.prototype,Z=Object.prototype,Q=k["__core-js_shared__"],X=(z=/[^.]+$/.exec(Q&&Q.keys&&Q.keys.IE_PROTO||""))?"Symbol(src)_1."+z:"",J=Y.toString,ee=Z.hasOwnProperty,te=Z.toString,re=RegExp("^"+J.call(ee).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ne=G?k.Buffer:void 0,oe=k.Symbol,ie=k.Uint8Array,ae=H(Object.getPrototypeOf,Object),se=Object.create,ce=Z.propertyIsEnumerable,ue=q.splice,de=Object.getOwnPropertySymbols,le=ne?ne.isBuffer:void 0,pe=H(Object.keys,Object),me=ke(k,"DataView"),ge=ke(k,"Map"),fe=ke(k,"Promise"),Se=ke(k,"Set"),he=ke(k,"WeakMap"),ye=ke(Object,"create"),ve=$e(me),Ee=$e(ge),Ae=$e(fe),_e=$e(Se),Te=$e(he),Ie=oe?oe.prototype:void 0,be=Ie?Ie.valueOf:void 0;function we(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function Ce(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function De(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function Oe(e){this.__data__=new Ce(e)}function Pe(e,t,r){var n=e[t];ee.call(e,t)&&je(n,r)&&(void 0!==r||t in e)||(e[t]=r)}function Ne(e,t){for(var r=e.length;r--;)if(je(e[r][0],t))return r;return-1}function Re(e,t,r,n,o,m,y){var N;if(n&&(N=m?n(e,o,m,y):n(e)),void 0!==N)return N;if(!ze(e))return e;var R=Ke(e);if(R){if(N=function(e){var t=e.length,r=e.constructor(t);return t&&"string"==typeof e[0]&&ee.call(e,"index")&&(r.index=e.index,r.input=e.input),r}(e),!t)return function(e,t){var r=-1,n=e.length;for(t||(t=Array(n));++r<n;)t[r]=e[r];return t}(e,N)}else{var L=Be(e),U=L==c||L==u;if(He(e))return function(e,t){if(t)return e.slice();var r=new e.constructor(e.length);return e.copy(r),r}(e,t);if(L==p||L==i||U&&!m){if(K(e))return m?e:{};if(N=function(e){return"function"!=typeof e.constructor||xe(e)?{}:ze(t=ae(e))?se(t):{};var t}(U?{}:e),!t)return function(e,t){return Le(e,Fe(e),t)}(e,function(e,t){return e&&Le(t,qe(t),e)}(N,e))}else{if(!M[L])return m?e:{};N=function(e,t,r,n){var o,i=e.constructor;switch(t){case v:return Me(e);case a:case s:return new i(+e);case E:return function(e,t){var r=t?Me(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)}(e,n);case A:case _:case T:case I:case b:case w:case C:case D:case O:return function(e,t){var r=t?Me(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}(e,n);case d:return function(e,t,r){return j(t?r(V(e),!0):V(e),x,new e.constructor)}(e,n,r);case l:case S:return new i(e);case g:return function(e){var t=new e.constructor(e.source,P.exec(e));return t.lastIndex=e.lastIndex,t}(e);case f:return function(e,t,r){return j(t?r(W(e),!0):W(e),$,new e.constructor)}(e,n,r);case h:return o=e,be?Object(be.call(o)):{}}}(e,L,Re,t)}}y||(y=new Oe);var k=y.get(e);if(k)return k;if(y.set(e,N),!R)var F=r?function(e){return function(e,t,r){var n=t(e);return Ke(e)?n:function(e,t){for(var r=-1,n=t.length,o=e.length;++r<n;)e[o+r]=t[r];return e}(n,r(e))}(e,qe,Fe)}(e):qe(e);return function(e,t){for(var r=-1,n=e?e.length:0;++r<n&&!1!==t(e[r],r););}(F||e,(function(o,i){F&&(o=e[i=o]),Pe(N,i,Re(o,t,r,n,i,e,y))})),N}function Me(e){var t=new e.constructor(e.byteLength);return new ie(t).set(new ie(e)),t}function Le(e,t,r,n){r||(r={});for(var o=-1,i=t.length;++o<i;){var a=t[o],s=n?n(r[a],e[a],a,r,e):void 0;Pe(r,a,void 0===s?e[a]:s)}return r}function Ue(e,t){var r,n,o=e.__data__;return("string"==(n=typeof(r=t))||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==r:null===r)?o["string"==typeof t?"string":"hash"]:o.map}function ke(e,t){var r=function(e,t){return null==e?void 0:e[t]}(e,t);return function(e){return!(!ze(e)||(t=e,X&&X in t))&&(We(e)||K(e)?re:N).test($e(e));var t}(r)?r:void 0}we.prototype.clear=function(){this.__data__=ye?ye(null):{}},we.prototype.delete=function(e){return this.has(e)&&delete this.__data__[e]},we.prototype.get=function(e){var t=this.__data__;if(ye){var r=t[e];return r===n?void 0:r}return ee.call(t,e)?t[e]:void 0},we.prototype.has=function(e){var t=this.__data__;return ye?void 0!==t[e]:ee.call(t,e)},we.prototype.set=function(e,t){return this.__data__[e]=ye&&void 0===t?n:t,this},Ce.prototype.clear=function(){this.__data__=[]},Ce.prototype.delete=function(e){var t=this.__data__,r=Ne(t,e);return!(r<0||(r==t.length-1?t.pop():ue.call(t,r,1),0))},Ce.prototype.get=function(e){var t=this.__data__,r=Ne(t,e);return r<0?void 0:t[r][1]},Ce.prototype.has=function(e){return Ne(this.__data__,e)>-1},Ce.prototype.set=function(e,t){var r=this.__data__,n=Ne(r,e);return n<0?r.push([e,t]):r[n][1]=t,this},De.prototype.clear=function(){this.__data__={hash:new we,map:new(ge||Ce),string:new we}},De.prototype.delete=function(e){return Ue(this,e).delete(e)},De.prototype.get=function(e){return Ue(this,e).get(e)},De.prototype.has=function(e){return Ue(this,e).has(e)},De.prototype.set=function(e,t){return Ue(this,e).set(e,t),this},Oe.prototype.clear=function(){this.__data__=new Ce},Oe.prototype.delete=function(e){return this.__data__.delete(e)},Oe.prototype.get=function(e){return this.__data__.get(e)},Oe.prototype.has=function(e){return this.__data__.has(e)},Oe.prototype.set=function(e,t){var r=this.__data__;if(r instanceof Ce){var n=r.__data__;if(!ge||n.length<199)return n.push([e,t]),this;r=this.__data__=new De(n)}return r.set(e,t),this};var Fe=de?H(de,Object):function(){return[]},Be=function(e){return te.call(e)};function Ge(e,t){return!!(t=t??o)&&("number"==typeof e||R.test(e))&&e>-1&&e%1==0&&e<t}function xe(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||Z)}function $e(e){if(null!=e){try{return J.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function je(e,t){return e===t||e!=e&&t!=t}(me&&Be(new me(new ArrayBuffer(1)))!=E||ge&&Be(new ge)!=d||fe&&Be(fe.resolve())!=m||Se&&Be(new Se)!=f||he&&Be(new he)!=y)&&(Be=function(e){var t=te.call(e),r=t==p?e.constructor:void 0,n=r?$e(r):void 0;if(n)switch(n){case ve:return E;case Ee:return d;case Ae:return m;case _e:return f;case Te:return y}return t});var Ke=Array.isArray;function Ve(e){return null!=e&&function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=o}(e.length)&&!We(e)}var He=le||function(){return!1};function We(e){var t=ze(e)?te.call(e):"";return t==c||t==u}function ze(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function qe(e){return Ve(e)?function(e,t){var r=Ke(e)||function(e){return function(e){return function(e){return!!e&&"object"==typeof e}(e)&&Ve(e)}(e)&&ee.call(e,"callee")&&(!ce.call(e,"callee")||te.call(e)==i)}(e)?function(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}(e.length,String):[],n=r.length,o=!!n;for(var a in e)!t&&!ee.call(e,a)||o&&("length"==a||Ge(a,n))||r.push(a);return r}(e):function(e){if(!xe(e))return pe(e);var t=[];for(var r in Object(e))ee.call(e,r)&&"constructor"!=r&&t.push(r);return t}(e)}e.exports=function(e){return Re(e,!0,!0)}},56358:e=>{var t=9007199254740991,r="[object Arguments]",n="[object Function]",o="[object GeneratorFunction]",i=/^(?:0|[1-9]\d*)$/,a=Object.prototype,s=a.hasOwnProperty,c=a.toString,u=a.propertyIsEnumerable;function d(e,r){return!!(r=r??t)&&("number"==typeof e||i.test(e))&&e>-1&&e%1==0&&e<r}var l=Array.isArray;function p(e){return null!=e&&function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=t}(e.length)&&!function(e){var t=m(e)?c.call(e):"";return t==n||t==o}(e)}function m(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function g(e){return p(e)?function(e,t){var n=l(e)||function(e){return function(e){return function(e){return!!e&&"object"==typeof e}(e)&&p(e)}(e)&&s.call(e,"callee")&&(!u.call(e,"callee")||c.call(e)==r)}(e)?function(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}(e.length,String):[],o=n.length,i=!!o;for(var a in e)!t&&!s.call(e,a)||i&&("length"==a||d(a,o))||n.push(a);return n}(e,!0):function(e){if(!m(e))return function(e){var t=[];if(null!=e)for(var r in Object(e))t.push(r);return t}(e);var t,r,n=(r=(t=e)&&t.constructor,t===("function"==typeof r&&r.prototype||a)),o=[];for(var i in e)("constructor"!=i||!n&&s.call(e,i))&&o.push(i);return o}(e)}function f(e){return e}e.exports=function(e,t){return null==e?e:function(e,t,r){for(var n=-1,o=Object(e),i=r(e),a=i.length;a--;){var s=i[++n];if(!1===t(o[s],s,o))break}return e}(e,"function"==typeof t?t:f,g)}},56325:(e,t,r)=>{var n,o="Expected a function",i="__lodash_hash_undefined__",a=1/0,s="[object Function]",c="[object GeneratorFunction]",u="[object Symbol]",d=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,l=/^\w*$/,p=/^\./,m=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,g=/\\(\\)?/g,f=/^\[object .+?Constructor\]$/,S="object"==typeof r.g&&r.g&&r.g.Object===Object&&r.g,h="object"==typeof self&&self&&self.Object===Object&&self,y=S||h||Function("return this")(),v=Array.prototype,E=Function.prototype,A=Object.prototype,_=y["__core-js_shared__"],T=(n=/[^.]+$/.exec(_&&_.keys&&_.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"",I=E.toString,b=A.hasOwnProperty,w=A.toString,C=RegExp("^"+I.call(b).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),D=y.Symbol,O=v.splice,P=G(y,"Map"),N=G(Object,"create"),R=D?D.prototype:void 0,M=R?R.toString:void 0;function L(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function U(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function k(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function F(e,t){for(var r,n,o=e.length;o--;)if((r=e[o][0])===(n=t)||r!=r&&n!=n)return o;return-1}function B(e,t){var r,n,o=e.__data__;return("string"==(n=typeof(r=t))||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==r:null===r)?o["string"==typeof t?"string":"hash"]:o.map}function G(e,t){var r=function(e,t){return null==e?void 0:e[t]}(e,t);return function(e){if(!V(e)||T&&T in e)return!1;var t=function(e){var t=V(e)?w.call(e):"";return t==s||t==c}(e)||function(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}(e)?C:f;return t.test(function(e){if(null!=e){try{return I.call(e)}catch(e){}try{return e+""}catch(e){}}return""}(e))}(r)?r:void 0}L.prototype.clear=function(){this.__data__=N?N(null):{}},L.prototype.delete=function(e){return this.has(e)&&delete this.__data__[e]},L.prototype.get=function(e){var t=this.__data__;if(N){var r=t[e];return r===i?void 0:r}return b.call(t,e)?t[e]:void 0},L.prototype.has=function(e){var t=this.__data__;return N?void 0!==t[e]:b.call(t,e)},L.prototype.set=function(e,t){return this.__data__[e]=N&&void 0===t?i:t,this},U.prototype.clear=function(){this.__data__=[]},U.prototype.delete=function(e){var t=this.__data__,r=F(t,e);return!(r<0||(r==t.length-1?t.pop():O.call(t,r,1),0))},U.prototype.get=function(e){var t=this.__data__,r=F(t,e);return r<0?void 0:t[r][1]},U.prototype.has=function(e){return F(this.__data__,e)>-1},U.prototype.set=function(e,t){var r=this.__data__,n=F(r,e);return n<0?r.push([e,t]):r[n][1]=t,this},k.prototype.clear=function(){this.__data__={hash:new L,map:new(P||U),string:new L}},k.prototype.delete=function(e){return B(this,e).delete(e)},k.prototype.get=function(e){return B(this,e).get(e)},k.prototype.has=function(e){return B(this,e).has(e)},k.prototype.set=function(e,t){return B(this,e).set(e,t),this};var x=j((function(e){var t;e=null==(t=e)?"":function(e){if("string"==typeof e)return e;if(H(e))return M?M.call(e):"";var t=e+"";return"0"==t&&1/e==-a?"-0":t}(t);var r=[];return p.test(e)&&r.push(""),e.replace(m,(function(e,t,n,o){r.push(n?o.replace(g,"$1"):t||e)})),r}));function $(e){if("string"==typeof e||H(e))return e;var t=e+"";return"0"==t&&1/e==-a?"-0":t}function j(e,t){if("function"!=typeof e||t&&"function"!=typeof t)throw new TypeError(o);var r=function(){var n=arguments,o=t?t.apply(this,n):n[0],i=r.cache;if(i.has(o))return i.get(o);var a=e.apply(this,n);return r.cache=i.set(o,a),a};return r.cache=new(j.Cache||k),r}j.Cache=k;var K=Array.isArray;function V(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function H(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&w.call(e)==u}e.exports=function(e,t,r){var n=null==e?void 0:function(e,t){var r;t=function(e,t){if(K(e))return!1;var r=typeof e;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=e&&!H(e))||l.test(e)||!d.test(e)||null!=t&&e in Object(t)}(t,e)?[t]:K(r=t)?r:x(r);for(var n=0,o=t.length;null!=e&&n<o;)e=e[$(t[n++])];return n&&n==o?e:void 0}(e,t);return void 0===n?r:n}},38582:(e,t,r)=>{e=r.nmd(e);var n,o,i,a=9007199254740991,s="[object Arguments]",c="[object Function]",u="[object GeneratorFunction]",d="[object Map]",l="[object Promise]",p="[object Set]",m="[object WeakMap]",g="[object DataView]",f=/^\[object .+?Constructor\]$/,S="object"==typeof r.g&&r.g&&r.g.Object===Object&&r.g,h="object"==typeof self&&self&&self.Object===Object&&self,y=S||h||Function("return this")(),v=t&&!t.nodeType&&t,E=v&&e&&!e.nodeType&&e,A=E&&E.exports===v,_=Function.prototype,T=Object.prototype,I=y["__core-js_shared__"],b=(n=/[^.]+$/.exec(I&&I.keys&&I.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"",w=_.toString,C=T.hasOwnProperty,D=T.toString,O=RegExp("^"+w.call(C).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),P=A?y.Buffer:void 0,N=T.propertyIsEnumerable,R=P?P.isBuffer:void 0,M=(o=Object.keys,i=Object,function(e){return o(i(e))}),L=H(y,"DataView"),U=H(y,"Map"),k=H(y,"Promise"),F=H(y,"Set"),B=H(y,"WeakMap"),G=!N.call({valueOf:1},"valueOf"),x=z(L),$=z(U),j=z(k),K=z(F),V=z(B);function H(e,t){var r=function(e,t){return null==e?void 0:e[t]}(e,t);return function(e){if(!X(e)||function(e){return!!b&&b in e}(e))return!1;var t=Q(e)||function(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}(e)?O:f;return t.test(z(e))}(r)?r:void 0}var W=function(e){return D.call(e)};function z(e){if(null!=e){try{return w.call(e)}catch(e){}try{return e+""}catch(e){}}return""}(L&&W(new L(new ArrayBuffer(1)))!=g||U&&W(new U)!=d||k&&W(k.resolve())!=l||F&&W(new F)!=p||B&&W(new B)!=m)&&(W=function(e){var t=D.call(e),r="[object Object]"==t?e.constructor:void 0,n=r?z(r):void 0;if(n)switch(n){case x:return g;case $:return d;case j:return l;case K:return p;case V:return m}return t});var q=Array.isArray;function Y(e){return null!=e&&function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=a}(e.length)&&!Q(e)}var Z=R||function(){return!1};function Q(e){var t=X(e)?D.call(e):"";return t==c||t==u}function X(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}e.exports=function(e){if(Y(e)&&(q(e)||"string"==typeof e||"function"==typeof e.splice||Z(e)||function(e){return function(e){return function(e){return!!e&&"object"==typeof e}(e)&&Y(e)}(e)&&C.call(e,"callee")&&(!N.call(e,"callee")||D.call(e)==s)}(e)))return!e.length;var t=W(e);if(t==d||t==p)return!e.size;if(G||function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||T)}(e))return!M(e).length;for(var r in e)if(C.call(e,r))return!1;return!0}},86328:(e,t,r)=>{e=r.nmd(e);var n="Expected a function",o="__lodash_hash_undefined__",i=1,a=2,s=1/0,c=9007199254740991,u="[object Arguments]",d="[object Array]",l="[object Boolean]",p="[object Date]",m="[object Error]",g="[object Function]",f="[object GeneratorFunction]",S="[object Map]",h="[object Number]",y="[object Object]",v="[object Promise]",E="[object RegExp]",A="[object Set]",_="[object String]",T="[object Symbol]",I="[object WeakMap]",b="[object ArrayBuffer]",w="[object DataView]",C=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,D=/^\w*$/,O=/^\./,P=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,N=/\\(\\)?/g,R=/^\[object .+?Constructor\]$/,M=/^(?:0|[1-9]\d*)$/,L={};L["[object Float32Array]"]=L["[object Float64Array]"]=L["[object Int8Array]"]=L["[object Int16Array]"]=L["[object Int32Array]"]=L["[object Uint8Array]"]=L["[object Uint8ClampedArray]"]=L["[object Uint16Array]"]=L["[object Uint32Array]"]=!0,L[u]=L[d]=L[b]=L[l]=L[w]=L[p]=L[m]=L[g]=L[S]=L[h]=L[y]=L[E]=L[A]=L[_]=L[I]=!1;var U="object"==typeof r.g&&r.g&&r.g.Object===Object&&r.g,k="object"==typeof self&&self&&self.Object===Object&&self,F=U||k||Function("return this")(),B=t&&!t.nodeType&&t,G=B&&e&&!e.nodeType&&e,x=G&&G.exports===B&&U.process,$=function(){try{return x&&x.binding("util")}catch(e){}}(),j=$&&$.isTypedArray;function K(e,t){for(var r=-1,n=t.length,o=e.length;++r<n;)e[o+r]=t[r];return e}function V(e,t){for(var r=-1,n=e?e.length:0;++r<n;)if(t(e[r],r,e))return!0;return!1}function H(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}function W(e){var t=-1,r=Array(e.size);return e.forEach((function(e,n){r[++t]=[n,e]})),r}function z(e,t){return function(r){return e(t(r))}}function q(e){var t=-1,r=Array(e.size);return e.forEach((function(e){r[++t]=e})),r}var Y,Z=Array.prototype,Q=Function.prototype,X=Object.prototype,J=F["__core-js_shared__"],ee=(Y=/[^.]+$/.exec(J&&J.keys&&J.keys.IE_PROTO||""))?"Symbol(src)_1."+Y:"",te=Q.toString,re=X.hasOwnProperty,ne=X.toString,oe=RegExp("^"+te.call(re).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ie=F.Symbol,ae=F.Uint8Array,se=z(Object.getPrototypeOf,Object),ce=X.propertyIsEnumerable,ue=Z.splice,de=Object.getOwnPropertySymbols,le=z(Object.keys,Object),pe=Ge(F,"DataView"),me=Ge(F,"Map"),ge=Ge(F,"Promise"),fe=Ge(F,"Set"),Se=Ge(F,"WeakMap"),he=Ge(Object,"create"),ye=Ze(pe),ve=Ze(me),Ee=Ze(ge),Ae=Ze(fe),_e=Ze(Se),Te=ie?ie.prototype:void 0,Ie=Te?Te.valueOf:void 0,be=Te?Te.toString:void 0;function we(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function Ce(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function De(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function Oe(e){var t=-1,r=e?e.length:0;for(this.__data__=new De;++t<r;)this.add(e[t])}function Pe(e){this.__data__=new Ce(e)}function Ne(e,t){var r=et(e)||Je(e)?function(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}(e.length,String):[],n=r.length,o=!!n;for(var i in e)!t&&!re.call(e,i)||o&&("length"==i||Ke(i,n))||r.push(i);return r}function Re(e,t){for(var r=e.length;r--;)if(Xe(e[r][0],t))return r;return-1}function Me(e,t){for(var r=0,n=(t=Ve(t,e)?[t]:ke(t)).length;null!=e&&r<n;)e=e[Ye(t[r++])];return r&&r==n?e:void 0}function Le(e,t){return null!=e&&t in Object(e)}function Ue(e,t,r,n,o){return e===t||(null==e||null==t||!ot(e)&&!it(t)?e!=e&&t!=t:function(e,t,r,n,o,s){var c=et(e),g=et(t),f=d,v=d;c||(f=(f=je(e))==u?y:f),g||(v=(v=je(t))==u?y:v);var I=f==y&&!H(e),C=v==y&&!H(t),D=f==v;if(D&&!I)return s||(s=new Pe),c||ct(e)?Fe(e,t,r,n,o,s):function(e,t,r,n,o,s,c){switch(r){case w:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case b:return!(e.byteLength!=t.byteLength||!n(new ae(e),new ae(t)));case l:case p:case h:return Xe(+e,+t);case m:return e.name==t.name&&e.message==t.message;case E:case _:return e==t+"";case S:var u=W;case A:var d=s&a;if(u||(u=q),e.size!=t.size&&!d)return!1;var g=c.get(e);if(g)return g==t;s|=i,c.set(e,t);var f=Fe(u(e),u(t),n,o,s,c);return c.delete(e),f;case T:if(Ie)return Ie.call(e)==Ie.call(t)}return!1}(e,t,f,r,n,o,s);if(!(o&a)){var O=I&&re.call(e,"__wrapped__"),P=C&&re.call(t,"__wrapped__");if(O||P){var N=O?e.value():e,R=P?t.value():t;return s||(s=new Pe),r(N,R,n,o,s)}}return!!D&&(s||(s=new Pe),function(e,t,r,n,o,i){var s=o&a,c=ut(e),u=c.length;if(u!=ut(t).length&&!s)return!1;for(var d=u;d--;){var l=c[d];if(!(s?l in t:re.call(t,l)))return!1}var p=i.get(e);if(p&&i.get(t))return p==t;var m=!0;i.set(e,t),i.set(t,e);for(var g=s;++d<u;){var f=e[l=c[d]],S=t[l];if(n)var h=s?n(S,f,l,t,e,i):n(f,S,l,e,t,i);if(!(void 0===h?f===S||r(f,S,n,o,i):h)){m=!1;break}g||(g="constructor"==l)}if(m&&!g){var y=e.constructor,v=t.constructor;y==v||!("constructor"in e)||!("constructor"in t)||"function"==typeof y&&y instanceof y&&"function"==typeof v&&v instanceof v||(m=!1)}return i.delete(e),i.delete(t),m}(e,t,r,n,o,s))}(e,t,Ue,r,n,o))}function ke(e){return et(e)?e:qe(e)}function Fe(e,t,r,n,o,s){var c=o&a,u=e.length,d=t.length;if(u!=d&&!(c&&d>u))return!1;var l=s.get(e);if(l&&s.get(t))return l==t;var p=-1,m=!0,g=o&i?new Oe:void 0;for(s.set(e,t),s.set(t,e);++p<u;){var f=e[p],S=t[p];if(n)var h=c?n(S,f,p,t,e,s):n(f,S,p,e,t,s);if(void 0!==h){if(h)continue;m=!1;break}if(g){if(!V(t,(function(e,t){if(!g.has(t)&&(f===e||r(f,e,n,o,s)))return g.add(t)}))){m=!1;break}}else if(f!==S&&!r(f,S,n,o,s)){m=!1;break}}return s.delete(e),s.delete(t),m}function Be(e,t){var r,n,o=e.__data__;return("string"==(n=typeof(r=t))||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==r:null===r)?o["string"==typeof t?"string":"hash"]:o.map}function Ge(e,t){var r=function(e,t){return null==e?void 0:e[t]}(e,t);return function(e){return!(!ot(e)||(t=e,ee&&ee in t))&&(rt(e)||H(e)?oe:R).test(Ze(e));var t}(r)?r:void 0}we.prototype.clear=function(){this.__data__=he?he(null):{}},we.prototype.delete=function(e){return this.has(e)&&delete this.__data__[e]},we.prototype.get=function(e){var t=this.__data__;if(he){var r=t[e];return r===o?void 0:r}return re.call(t,e)?t[e]:void 0},we.prototype.has=function(e){var t=this.__data__;return he?void 0!==t[e]:re.call(t,e)},we.prototype.set=function(e,t){return this.__data__[e]=he&&void 0===t?o:t,this},Ce.prototype.clear=function(){this.__data__=[]},Ce.prototype.delete=function(e){var t=this.__data__,r=Re(t,e);return!(r<0||(r==t.length-1?t.pop():ue.call(t,r,1),0))},Ce.prototype.get=function(e){var t=this.__data__,r=Re(t,e);return r<0?void 0:t[r][1]},Ce.prototype.has=function(e){return Re(this.__data__,e)>-1},Ce.prototype.set=function(e,t){var r=this.__data__,n=Re(r,e);return n<0?r.push([e,t]):r[n][1]=t,this},De.prototype.clear=function(){this.__data__={hash:new we,map:new(me||Ce),string:new we}},De.prototype.delete=function(e){return Be(this,e).delete(e)},De.prototype.get=function(e){return Be(this,e).get(e)},De.prototype.has=function(e){return Be(this,e).has(e)},De.prototype.set=function(e,t){return Be(this,e).set(e,t),this},Oe.prototype.add=Oe.prototype.push=function(e){return this.__data__.set(e,o),this},Oe.prototype.has=function(e){return this.__data__.has(e)},Pe.prototype.clear=function(){this.__data__=new Ce},Pe.prototype.delete=function(e){return this.__data__.delete(e)},Pe.prototype.get=function(e){return this.__data__.get(e)},Pe.prototype.has=function(e){return this.__data__.has(e)},Pe.prototype.set=function(e,t){var r=this.__data__;if(r instanceof Ce){var n=r.__data__;if(!me||n.length<199)return n.push([e,t]),this;r=this.__data__=new De(n)}return r.set(e,t),this};var xe=de?z(de,Object):pt,$e=de?function(e){for(var t=[];e;)K(t,xe(e)),e=se(e);return t}:pt,je=function(e){return ne.call(e)};function Ke(e,t){return!!(t=t??c)&&("number"==typeof e||M.test(e))&&e>-1&&e%1==0&&e<t}function Ve(e,t){if(et(e))return!1;var r=typeof e;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=e&&!at(e))||D.test(e)||!C.test(e)||null!=t&&e in Object(t)}function He(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||X)}function We(e){return e==e&&!ot(e)}function ze(e,t){return function(r){return null!=r&&r[e]===t&&(void 0!==t||e in Object(r))}}(pe&&je(new pe(new ArrayBuffer(1)))!=w||me&&je(new me)!=S||ge&&je(ge.resolve())!=v||fe&&je(new fe)!=A||Se&&je(new Se)!=I)&&(je=function(e){var t=ne.call(e),r=t==y?e.constructor:void 0,n=r?Ze(r):void 0;if(n)switch(n){case ye:return w;case ve:return S;case Ee:return v;case Ae:return A;case _e:return I}return t});var qe=Qe((function(e){var t;e=null==(t=e)?"":function(e){if("string"==typeof e)return e;if(at(e))return be?be.call(e):"";var t=e+"";return"0"==t&&1/e==-s?"-0":t}(t);var r=[];return O.test(e)&&r.push(""),e.replace(P,(function(e,t,n,o){r.push(n?o.replace(N,"$1"):t||e)})),r}));function Ye(e){if("string"==typeof e||at(e))return e;var t=e+"";return"0"==t&&1/e==-s?"-0":t}function Ze(e){if(null!=e){try{return te.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function Qe(e,t){if("function"!=typeof e||t&&"function"!=typeof t)throw new TypeError(n);var r=function(){var n=arguments,o=t?t.apply(this,n):n[0],i=r.cache;if(i.has(o))return i.get(o);var a=e.apply(this,n);return r.cache=i.set(o,a),a};return r.cache=new(Qe.Cache||De),r}function Xe(e,t){return e===t||e!=e&&t!=t}function Je(e){return function(e){return it(e)&&tt(e)}(e)&&re.call(e,"callee")&&(!ce.call(e,"callee")||ne.call(e)==u)}Qe.Cache=De;var et=Array.isArray;function tt(e){return null!=e&&nt(e.length)&&!rt(e)}function rt(e){var t=ot(e)?ne.call(e):"";return t==g||t==f}function nt(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=c}function ot(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function it(e){return!!e&&"object"==typeof e}function at(e){return"symbol"==typeof e||it(e)&&ne.call(e)==T}var st,ct=j?(st=j,function(e){return st(e)}):function(e){return it(e)&&nt(e.length)&&!!L[ne.call(e)]};function ut(e){return tt(e)?Ne(e):function(e){if(!He(e))return le(e);var t=[];for(var r in Object(e))re.call(e,r)&&"constructor"!=r&&t.push(r);return t}(e)}function dt(e){return tt(e)?Ne(e,!0):function(e){if(!ot(e))return function(e){var t=[];if(null!=e)for(var r in Object(e))t.push(r);return t}(e);var t=He(e),r=[];for(var n in e)("constructor"!=n||!t&&re.call(e,n))&&r.push(n);return r}(e)}function lt(e){return e}function pt(){return[]}e.exports=function(e,t){return null==e?{}:function(e,t,r){for(var n=-1,o=t.length,i={};++n<o;){var a=t[n],s=e[a];r(s,a)&&(i[a]=s)}return i}(e,function(e){return function(e,t,r){var n=t(e);return et(e)?n:K(n,r(e))}(e,dt,$e)}(e),function(e){return"function"==typeof e?e:null==e?lt:"object"==typeof e?et(e)?function(e,t){return Ve(e)&&We(t)?ze(Ye(e),t):function(r){var n=function(e,t,r){var n=null==e?void 0:Me(e,t);return void 0===n?void 0:n}(r,e);return void 0===n&&n===t?function(e,t){return null!=e&&function(e,t,r){for(var n,o=-1,i=(t=Ve(t,e)?[t]:ke(t)).length;++o<i;){var a=Ye(t[o]);if(!(n=null!=e&&r(e,a)))break;e=e[a]}return n||!!(i=e?e.length:0)&&nt(i)&&Ke(a,i)&&(et(e)||Je(e))}(e,t,Le)}(r,e):Ue(t,n,void 0,i|a)}}(e[0],e[1]):function(e){var t=function(e){for(var t=ut(e),r=t.length;r--;){var n=t[r],o=e[n];t[r]=[n,o,We(o)]}return t}(e);return 1==t.length&&t[0][2]?ze(t[0][0],t[0][1]):function(r){return r===e||function(e,t,r,n){var o=r.length,s=o;if(null==e)return!s;for(e=Object(e);o--;){var c=r[o];if(c[2]?c[1]!==e[c[0]]:!(c[0]in e))return!1}for(;++o<s;){var u=(c=r[o])[0],d=e[u],l=c[1];if(c[2]){if(void 0===d&&!(u in e))return!1}else{var p,m=new Pe;if(!(void 0===p?Ue(l,d,n,i|a,m):p))return!1}}return!0}(r,0,t)}}(e):Ve(t=e)?(r=Ye(t),function(e){return null==e?void 0:e[r]}):function(e){return function(t){return Me(t,e)}}(t);var t,r}(t))}},49345:(e,t,r)=>{var n,o="Expected a function",i="__lodash_hash_undefined__",a=1/0,s=9007199254740991,c="[object Function]",u="[object GeneratorFunction]",d="[object Symbol]",l=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,p=/^\w*$/,m=/^\./,g=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,f=/\\(\\)?/g,S=/^\[object .+?Constructor\]$/,h=/^(?:0|[1-9]\d*)$/,y="object"==typeof r.g&&r.g&&r.g.Object===Object&&r.g,v="object"==typeof self&&self&&self.Object===Object&&self,E=y||v||Function("return this")(),A=Array.prototype,_=Function.prototype,T=Object.prototype,I=E["__core-js_shared__"],b=(n=/[^.]+$/.exec(I&&I.keys&&I.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"",w=_.toString,C=T.hasOwnProperty,D=T.toString,O=RegExp("^"+w.call(C).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),P=E.Symbol,N=A.splice,R=j(E,"Map"),M=j(Object,"create"),L=P?P.prototype:void 0,U=L?L.toString:void 0;function k(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function F(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function B(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function G(e,t,r){var n=e[t];C.call(e,t)&&z(n,r)&&(void 0!==r||t in e)||(e[t]=r)}function x(e,t){for(var r=e.length;r--;)if(z(e[r][0],t))return r;return-1}function $(e,t){var r,n,o=e.__data__;return("string"==(n=typeof(r=t))||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==r:null===r)?o["string"==typeof t?"string":"hash"]:o.map}function j(e,t){var r=function(e,t){return null==e?void 0:e[t]}(e,t);return function(e){if(!Y(e)||b&&b in e)return!1;var t=function(e){var t=Y(e)?D.call(e):"";return t==c||t==u}(e)||function(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}(e)?O:S;return t.test(function(e){if(null!=e){try{return w.call(e)}catch(e){}try{return e+""}catch(e){}}return""}(e))}(r)?r:void 0}function K(e,t){return!!(t=t??s)&&("number"==typeof e||h.test(e))&&e>-1&&e%1==0&&e<t}k.prototype.clear=function(){this.__data__=M?M(null):{}},k.prototype.delete=function(e){return this.has(e)&&delete this.__data__[e]},k.prototype.get=function(e){var t=this.__data__;if(M){var r=t[e];return r===i?void 0:r}return C.call(t,e)?t[e]:void 0},k.prototype.has=function(e){var t=this.__data__;return M?void 0!==t[e]:C.call(t,e)},k.prototype.set=function(e,t){return this.__data__[e]=M&&void 0===t?i:t,this},F.prototype.clear=function(){this.__data__=[]},F.prototype.delete=function(e){var t=this.__data__,r=x(t,e);return!(r<0||(r==t.length-1?t.pop():N.call(t,r,1),0))},F.prototype.get=function(e){var t=this.__data__,r=x(t,e);return r<0?void 0:t[r][1]},F.prototype.has=function(e){return x(this.__data__,e)>-1},F.prototype.set=function(e,t){var r=this.__data__,n=x(r,e);return n<0?r.push([e,t]):r[n][1]=t,this},B.prototype.clear=function(){this.__data__={hash:new k,map:new(R||F),string:new k}},B.prototype.delete=function(e){return $(this,e).delete(e)},B.prototype.get=function(e){return $(this,e).get(e)},B.prototype.has=function(e){return $(this,e).has(e)},B.prototype.set=function(e,t){return $(this,e).set(e,t),this};var V=W((function(e){var t;e=null==(t=e)?"":function(e){if("string"==typeof e)return e;if(Z(e))return U?U.call(e):"";var t=e+"";return"0"==t&&1/e==-a?"-0":t}(t);var r=[];return m.test(e)&&r.push(""),e.replace(g,(function(e,t,n,o){r.push(n?o.replace(f,"$1"):t||e)})),r}));function H(e){if("string"==typeof e||Z(e))return e;var t=e+"";return"0"==t&&1/e==-a?"-0":t}function W(e,t){if("function"!=typeof e||t&&"function"!=typeof t)throw new TypeError(o);var r=function(){var n=arguments,o=t?t.apply(this,n):n[0],i=r.cache;if(i.has(o))return i.get(o);var a=e.apply(this,n);return r.cache=i.set(o,a),a};return r.cache=new(W.Cache||B),r}function z(e,t){return e===t||e!=e&&t!=t}W.Cache=B;var q=Array.isArray;function Y(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function Z(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&D.call(e)==d}e.exports=function(e,t,r){return null==e?e:function(e,t,r,n){if(!Y(e))return e;t=function(e,t){if(q(e))return!1;var r=typeof e;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=e&&!Z(e))||p.test(e)||!l.test(e)||null!=t&&e in Object(t)}(t,e)?[t]:function(e){return q(e)?e:V(e)}(t);for(var o=-1,i=t.length,a=i-1,s=e;null!=s&&++o<i;){var c=H(t[o]),u=r;if(o!=a){var d=s[c];void 0===(u=n?n(d,c,s):void 0)&&(u=Y(d)?d:K(t[o+1])?[]:{})}G(s,c,u),s=s[c]}return e}(e,t,r)}},72291:(e,t,r)=>{var n,o="Expected a function",i="__lodash_hash_undefined__",a=1/0,s="[object Function]",c="[object GeneratorFunction]",u="[object Symbol]",d=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,l=/^\w*$/,p=/^\./,m=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,g=/\\(\\)?/g,f=/^\[object .+?Constructor\]$/,S="object"==typeof r.g&&r.g&&r.g.Object===Object&&r.g,h="object"==typeof self&&self&&self.Object===Object&&self,y=S||h||Function("return this")(),v=Array.prototype,E=Function.prototype,A=Object.prototype,_=y["__core-js_shared__"],T=(n=/[^.]+$/.exec(_&&_.keys&&_.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"",I=E.toString,b=A.hasOwnProperty,w=A.toString,C=RegExp("^"+I.call(b).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),D=y.Symbol,O=v.splice,P=x(y,"Map"),N=x(Object,"create"),R=D?D.prototype:void 0,M=R?R.toString:void 0;function L(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function U(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function k(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function F(e,t){for(var r,n,o=e.length;o--;)if((r=e[o][0])===(n=t)||r!=r&&n!=n)return o;return-1}function B(e){return H(e)?e:j(e)}function G(e,t){var r,n,o=e.__data__;return("string"==(n=typeof(r=t))||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==r:null===r)?o["string"==typeof t?"string":"hash"]:o.map}function x(e,t){var r=function(e,t){return null==e?void 0:e[t]}(e,t);return function(e){if(!W(e)||T&&T in e)return!1;var t=function(e){var t=W(e)?w.call(e):"";return t==s||t==c}(e)||function(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}(e)?C:f;return t.test(function(e){if(null!=e){try{return I.call(e)}catch(e){}try{return e+""}catch(e){}}return""}(e))}(r)?r:void 0}function $(e,t){if(H(e))return!1;var r=typeof e;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=e&&!z(e))||l.test(e)||!d.test(e)||null!=t&&e in Object(t)}L.prototype.clear=function(){this.__data__=N?N(null):{}},L.prototype.delete=function(e){return this.has(e)&&delete this.__data__[e]},L.prototype.get=function(e){var t=this.__data__;if(N){var r=t[e];return r===i?void 0:r}return b.call(t,e)?t[e]:void 0},L.prototype.has=function(e){var t=this.__data__;return N?void 0!==t[e]:b.call(t,e)},L.prototype.set=function(e,t){return this.__data__[e]=N&&void 0===t?i:t,this},U.prototype.clear=function(){this.__data__=[]},U.prototype.delete=function(e){var t=this.__data__,r=F(t,e);return!(r<0||(r==t.length-1?t.pop():O.call(t,r,1),0))},U.prototype.get=function(e){var t=this.__data__,r=F(t,e);return r<0?void 0:t[r][1]},U.prototype.has=function(e){return F(this.__data__,e)>-1},U.prototype.set=function(e,t){var r=this.__data__,n=F(r,e);return n<0?r.push([e,t]):r[n][1]=t,this},k.prototype.clear=function(){this.__data__={hash:new L,map:new(P||U),string:new L}},k.prototype.delete=function(e){return G(this,e).delete(e)},k.prototype.get=function(e){return G(this,e).get(e)},k.prototype.has=function(e){return G(this,e).has(e)},k.prototype.set=function(e,t){return G(this,e).set(e,t),this};var j=V((function(e){var t;e=null==(t=e)?"":function(e){if("string"==typeof e)return e;if(z(e))return M?M.call(e):"";var t=e+"";return"0"==t&&1/e==-a?"-0":t}(t);var r=[];return p.test(e)&&r.push(""),e.replace(m,(function(e,t,n,o){r.push(n?o.replace(g,"$1"):t||e)})),r}));function K(e){if("string"==typeof e||z(e))return e;var t=e+"";return"0"==t&&1/e==-a?"-0":t}function V(e,t){if("function"!=typeof e||t&&"function"!=typeof t)throw new TypeError(o);var r=function(){var n=arguments,o=t?t.apply(this,n):n[0],i=r.cache;if(i.has(o))return i.get(o);var a=e.apply(this,n);return r.cache=i.set(o,a),a};return r.cache=new(V.Cache||k),r}V.Cache=k;var H=Array.isArray;function W(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function z(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&w.call(e)==u}e.exports=function(e,t){return null==e||function(e,t){e=function(e,t){return 1==t.length?e:function(e,t){for(var r=0,n=(t=$(t,e)?[t]:B(t)).length;null!=e&&r<n;)e=e[K(t[r++])];return r&&r==n?e:void 0}(e,function(e,t,r){var n=-1,o=e.length;t<0&&(t=-t>o?0:o+t),(r=r>o?o:r)<0&&(r+=o),o=t>r?0:r-t>>>0,t>>>=0;for(var i=Array(o);++n<o;)i[n]=e[n+t];return i}(t,0,-1))}(e,t=$(t,e)?[t]:B(t));var r,n,o=K((n=(r=t)?r.length:0)?r[n-1]:void 0);return!(null!=e&&b.call(e,o))||delete e[o]}(e,t)}},28255:(e,t,r)=>{"use strict";var n=r(73656),o=function(e){if("function"!=typeof e)throw new TypeError(e+" is not a function");return e},i=function(e){var t,r,n=document.createTextNode(""),i=0;return new e((function(){var e;if(t)r&&(t=r.concat(t));else{if(!r)return;t=r}if(r=t,t=null,"function"==typeof r)return e=r,r=null,void e();for(n.data=i=++i%2;r;)e=r.shift(),r.length||(r=null),e()})).observe(n,{characterData:!0}),function(e){o(e),t?"function"==typeof t?t=[t,e]:t.push(e):(t=e,n.data=i=++i%2)}};e.exports=function(){if("object"==typeof n&&n&&"function"==typeof n.nextTick)return n.nextTick;if("function"==typeof queueMicrotask)return function(e){queueMicrotask(o(e))};if("object"==typeof document&&document){if("function"==typeof MutationObserver)return i(MutationObserver);if("function"==typeof WebKitMutationObserver)return i(WebKitMutationObserver)}return"function"==typeof setImmediate?function(e){setImmediate(o(e))}:"function"==typeof setTimeout||"object"==typeof setTimeout?function(e){setTimeout(o(e),0)}:null}()},52458:e=>{"use strict";var t=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable;e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},r=0;r<10;r++)t["_"+String.fromCharCode(r)]=r;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach((function(e){n[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},n)).join("")}catch(e){return!1}}()?Object.assign:function(e,o){for(var i,a,s=function(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(e),c=1;c<arguments.length;c++){for(var u in i=Object(arguments[c]))r.call(i,u)&&(s[u]=i[u]);if(t){a=t(i);for(var d=0;d<a.length;d++)n.call(i,a[d])&&(s[a[d]]=i[a[d]])}}return s}},86434:e=>{"use strict";var t=function(e){return e!=e};e.exports=function(e,r){return 0===e&&0===r?1/e==1/r:e===r||!(!t(e)||!t(r))}},42641:(e,t,r)=>{"use strict";var n=r(6648),o=r(25592),i=r(86434),a=r(65669),s=r(39525),c=o(a(),Object);n(c,{getPolyfill:a,implementation:i,shim:s}),e.exports=c},65669:(e,t,r)=>{"use strict";var n=r(86434);e.exports=function(){return"function"==typeof Object.is?Object.is:n}},39525:(e,t,r)=>{"use strict";var n=r(65669),o=r(6648);e.exports=function(){var e=n();return o(Object,{is:e},{is:function(){return Object.is!==e}}),e}},3032:(e,t,r)=>{"use strict";var n;if(!Object.keys){var o=Object.prototype.hasOwnProperty,i=Object.prototype.toString,a=r(49473),s=Object.prototype.propertyIsEnumerable,c=!s.call({toString:null},"toString"),u=s.call((function(){}),"prototype"),d=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],l=function(e){var t=e.constructor;return t&&t.prototype===e},p={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},m=function(){if("undefined"==typeof window)return!1;for(var e in window)try{if(!p["$"+e]&&o.call(window,e)&&null!==window[e]&&"object"==typeof window[e])try{l(window[e])}catch(e){return!0}}catch(e){return!0}return!1}();n=function(e){var t=null!==e&&"object"==typeof e,r="[object Function]"===i.call(e),n=a(e),s=t&&"[object String]"===i.call(e),p=[];if(!t&&!r&&!n)throw new TypeError("Object.keys called on a non-object");var g=u&&r;if(s&&e.length>0&&!o.call(e,0))for(var f=0;f<e.length;++f)p.push(String(f));if(n&&e.length>0)for(var S=0;S<e.length;++S)p.push(String(S));else for(var h in e)g&&"prototype"===h||!o.call(e,h)||p.push(String(h));if(c)for(var y=function(e){if("undefined"==typeof window||!m)return l(e);try{return l(e)}catch(e){return!1}}(e),v=0;v<d.length;++v)y&&"constructor"===d[v]||!o.call(e,d[v])||p.push(d[v]);return p}}e.exports=n},53571:(e,t,r)=>{"use strict";var n=Array.prototype.slice,o=r(49473),i=Object.keys,a=i?function(e){return i(e)}:r(3032),s=Object.keys;a.shim=function(){if(Object.keys){var e=function(){var e=Object.keys(arguments);return e&&e.length===arguments.length}(1,2);e||(Object.keys=function(e){return o(e)?s(n.call(e)):s(e)})}else Object.keys=a;return Object.keys||a},e.exports=a},49473:e=>{"use strict";var t=Object.prototype.toString;e.exports=function(e){var r=t.call(e),n="[object Arguments]"===r;return n||(n="[object Array]"!==r&&null!==e&&"object"==typeof e&&"number"==typeof e.length&&e.length>=0&&"[object Function]"===t.call(e.callee)),n}},27377:function(e,t,r){var n;e=r.nmd(e),function(o){t&&t.nodeType,e&&e.nodeType;var i="object"==typeof r.g&&r.g;i.global!==i&&i.window!==i&&i.self;var a,s=2147483647,c=36,u=1,d=26,l=38,p=700,m=72,g=128,f="-",S=/^xn--/,h=/[^\x20-\x7E]/,y=/[\x2E\u3002\uFF0E\uFF61]/g,v={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},E=c-u,A=Math.floor,_=String.fromCharCode;function T(e){throw RangeError(v[e])}function I(e,t){for(var r=e.length,n=[];r--;)n[r]=t(e[r]);return n}function b(e,t){var r=e.split("@"),n="";return r.length>1&&(n=r[0]+"@",e=r[1]),n+I((e=e.replace(y,".")).split("."),t).join(".")}function w(e){for(var t,r,n=[],o=0,i=e.length;o<i;)(t=e.charCodeAt(o++))>=55296&&t<=56319&&o<i?56320==(64512&(r=e.charCodeAt(o++)))?n.push(((1023&t)<<10)+(1023&r)+65536):(n.push(t),o--):n.push(t);return n}function C(e){return I(e,(function(e){var t="";return e>65535&&(t+=_((e-=65536)>>>10&1023|55296),e=56320|1023&e),t+_(e)})).join("")}function D(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function O(e,t,r){var n=0;for(e=r?A(e/p):e>>1,e+=A(e/t);e>E*d>>1;n+=c)e=A(e/E);return A(n+(E+1)*e/(e+l))}function P(e){var t,r,n,o,i,a,l,p,S,h,y,v=[],E=e.length,_=0,I=g,b=m;for((r=e.lastIndexOf(f))<0&&(r=0),n=0;n<r;++n)e.charCodeAt(n)>=128&&T("not-basic"),v.push(e.charCodeAt(n));for(o=r>0?r+1:0;o<E;){for(i=_,a=1,l=c;o>=E&&T("invalid-input"),((p=(y=e.charCodeAt(o++))-48<10?y-22:y-65<26?y-65:y-97<26?y-97:c)>=c||p>A((s-_)/a))&&T("overflow"),_+=p*a,!(p<(S=l<=b?u:l>=b+d?d:l-b));l+=c)a>A(s/(h=c-S))&&T("overflow"),a*=h;b=O(_-i,t=v.length+1,0==i),A(_/t)>s-I&&T("overflow"),I+=A(_/t),_%=t,v.splice(_++,0,I)}return C(v)}function N(e){var t,r,n,o,i,a,l,p,S,h,y,v,E,I,b,C=[];for(v=(e=w(e)).length,t=g,r=0,i=m,a=0;a<v;++a)(y=e[a])<128&&C.push(_(y));for(n=o=C.length,o&&C.push(f);n<v;){for(l=s,a=0;a<v;++a)(y=e[a])>=t&&y<l&&(l=y);for(l-t>A((s-r)/(E=n+1))&&T("overflow"),r+=(l-t)*E,t=l,a=0;a<v;++a)if((y=e[a])<t&&++r>s&&T("overflow"),y==t){for(p=r,S=c;!(p<(h=S<=i?u:S>=i+d?d:S-i));S+=c)b=p-h,I=c-h,C.push(_(D(h+b%I,0))),p=A(b/I);C.push(_(D(p,0))),i=O(r,E,n==o),r=0,++n}++r,++t}return C.join("")}a={version:"1.3.2",ucs2:{decode:w,encode:C},decode:P,encode:N,toASCII:function(e){return b(e,(function(e){return h.test(e)?"xn--"+N(e):e}))},toUnicode:function(e){return b(e,(function(e){return S.test(e)?P(e.slice(4).toLowerCase()):e}))}},void 0===(n=function(){return a}.call(t,r,t,e))||(e.exports=n)}()},66319:(e,t,r)=>{"use strict";var n=r(79112),o=r(52458),i=r(65140);function a(e,t){return t.encode?t.strict?n(e):encodeURIComponent(e):e}function s(e){return Array.isArray(e)?e.sort():"object"==typeof e?s(Object.keys(e)).sort((function(e,t){return Number(e)-Number(t)})).map((function(t){return e[t]})):e}function c(e){var t=e.indexOf("?");return-1===t?"":e.slice(t+1)}function u(e,t){var r=function(e){var t;switch(e.arrayFormat){case"index":return function(e,r,n){t=/\[(\d*)\]$/.exec(e),e=e.replace(/\[\d*\]$/,""),t?(void 0===n[e]&&(n[e]={}),n[e][t[1]]=r):n[e]=r};case"bracket":return function(e,r,n){t=/(\[\])$/.exec(e),e=e.replace(/\[\]$/,""),t?void 0!==n[e]?n[e]=[].concat(n[e],r):n[e]=[r]:n[e]=r};default:return function(e,t,r){void 0!==r[e]?r[e]=[].concat(r[e],t):r[e]=t}}}(t=o({arrayFormat:"none"},t)),n=Object.create(null);return"string"!=typeof e?n:(e=e.trim().replace(/^[?#&]/,""))?(e.split("&").forEach((function(e){var t=e.replace(/\+/g," ").split("="),o=t.shift(),a=t.length>0?t.join("="):void 0;a=void 0===a?null:i(a),r(i(o),a,n)})),Object.keys(n).sort().reduce((function(e,t){var r=n[t];return Boolean(r)&&"object"==typeof r&&!Array.isArray(r)?e[t]=s(r):e[t]=r,e}),Object.create(null))):n}t.extract=c,t.parse=u,t.stringify=function(e,t){!1===(t=o({encode:!0,strict:!0,arrayFormat:"none"},t)).sort&&(t.sort=function(){});var r=function(e){switch(e.arrayFormat){case"index":return function(t,r,n){return null===r?[a(t,e),"[",n,"]"].join(""):[a(t,e),"[",a(n,e),"]=",a(r,e)].join("")};case"bracket":return function(t,r){return null===r?a(t,e):[a(t,e),"[]=",a(r,e)].join("")};default:return function(t,r){return null===r?a(t,e):[a(t,e),"=",a(r,e)].join("")}}}(t);return e?Object.keys(e).sort(t.sort).map((function(n){var o=e[n];if(void 0===o)return"";if(null===o)return a(n,t);if(Array.isArray(o)){var i=[];return o.slice().forEach((function(e){void 0!==e&&i.push(r(n,e,i.length))})),i.join("&")}return a(n,t)+"="+a(o,t)})).filter((function(e){return e.length>0})).join("&"):""},t.parseUrl=function(e,t){return{url:e.split("?")[0]||"",query:u(c(e),t)}}},24400:e=>{"use strict";function t(e,t){return Object.prototype.hasOwnProperty.call(e,t)}e.exports=function(e,r,n,o){r=r||"&",n=n||"=";var i={};if("string"!=typeof e||0===e.length)return i;var a=/\+/g;e=e.split(r);var s=1e3;o&&"number"==typeof o.maxKeys&&(s=o.maxKeys);var c=e.length;s>0&&c>s&&(c=s);for(var u=0;u<c;++u){var d,l,p,m,g=e[u].replace(a,"%20"),f=g.indexOf(n);f>=0?(d=g.substr(0,f),l=g.substr(f+1)):(d=g,l=""),p=decodeURIComponent(d),m=decodeURIComponent(l),t(i,p)?Array.isArray(i[p])?i[p].push(m):i[p]=[i[p],m]:i[p]=m}return i}},7433:e=>{"use strict";var t=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};e.exports=function(e,r,n,o){return r=r||"&",n=n||"=",null===e&&(e=void 0),"object"==typeof e?Object.keys(e).map((function(o){var i=encodeURIComponent(t(o))+n;return Array.isArray(e[o])?e[o].map((function(e){return i+encodeURIComponent(t(e))})).join(r):i+encodeURIComponent(t(e[o]))})).join(r):o?encodeURIComponent(t(o))+n+encodeURIComponent(t(e)):""}},3048:(e,t,r)=>{"use strict";t.decode=t.parse=r(24400),t.encode=t.stringify=r(7433)},16516:(e,t,r)=>{"use strict";r.r(t),r.d(t,{F:()=>n,T:()=>o,__:()=>i,add:()=>s,addIndex:()=>g,adjust:()=>S,all:()=>I,allPass:()=>z,always:()=>q,and:()=>Y,andThen:()=>yi,any:()=>X,anyPass:()=>J,ap:()=>ee,aperture:()=>ne,append:()=>oe,apply:()=>ie,applySpec:()=>ue,applyTo:()=>de,ascend:()=>le,assoc:()=>me,assocPath:()=>he,binary:()=>ve,bind:()=>N,both:()=>Te,call:()=>be,chain:()=>De,clamp:()=>Pe,clone:()=>Le,comparator:()=>Ue,complement:()=>Fe,compose:()=>Ve,composeK:()=>He,composeP:()=>qe,composeWith:()=>Je,concat:()=>ft,cond:()=>ht,construct:()=>vt,constructN:()=>yt,contains:()=>Et,converge:()=>At,countBy:()=>It,curry:()=>Ie,curryN:()=>m,dec:()=>bt,defaultTo:()=>wt,descend:()=>Ct,difference:()=>Pt,differenceWith:()=>Rt,dissoc:()=>Lt,dissocPath:()=>Bt,divide:()=>Gt,drop:()=>jt,dropLast:()=>qt,dropLastWhile:()=>Qt,dropRepeats:()=>rr,dropRepeatsWith:()=>tr,dropWhile:()=>ir,either:()=>sr,empty:()=>ur,endsWith:()=>lr,eqBy:()=>pr,eqProps:()=>gr,equals:()=>et.Z,evolve:()=>Sr,filter:()=>lt,find:()=>vr,findIndex:()=>_r,findLast:()=>br,findLastIndex:()=>Dr,flatten:()=>Or,flip:()=>Pr,forEach:()=>Nr,forEachObjIndexed:()=>Rr,fromPairs:()=>Mr,groupBy:()=>Lr,groupWith:()=>Ur,gt:()=>kr,gte:()=>Fr,has:()=>xr,hasIn:()=>jr,hasPath:()=>Br,head:()=>Ye,identical:()=>Vr,identity:()=>Qe,ifElse:()=>Hr,inc:()=>Wr,includes:()=>zr,indexBy:()=>qr,indexOf:()=>Yr,init:()=>Zr,innerJoin:()=>Qr,insert:()=>Xr,insertAll:()=>Jr,intersection:()=>nn,intersperse:()=>on,into:()=>ln,invert:()=>mn,invertObj:()=>fn,invoker:()=>Sn,is:()=>hn,isEmpty:()=>yn,isNil:()=>fe,join:()=>vn,juxt:()=>En,keys:()=>B.Z,keysIn:()=>_n,last:()=>er,lastIndexOf:()=>Tn,length:()=>bn,lens:()=>wn,lensIndex:()=>Cn,lensPath:()=>Dn,lensProp:()=>On,lift:()=>_e,liftN:()=>Ae,lt:()=>Pn,lte:()=>Nn,map:()=>G,mapAccum:()=>Rn,mapAccumRight:()=>Mn,mapObjIndexed:()=>Ln,match:()=>Un,mathMod:()=>kn,max:()=>b,maxBy:()=>Fn,mean:()=>Gn,median:()=>xn,memoizeWith:()=>$n,merge:()=>jn,mergeAll:()=>Kn,mergeDeepLeft:()=>Wn,mergeDeepRight:()=>zn,mergeDeepWith:()=>qn,mergeDeepWithKey:()=>Hn,mergeLeft:()=>Yn,mergeRight:()=>Zn,mergeWith:()=>Qn,mergeWithKey:()=>Vn,min:()=>Xn,minBy:()=>Jn,modulo:()=>eo,move:()=>to,multiply:()=>ro,nAry:()=>ye,negate:()=>no,none:()=>oo,not:()=>ke,nth:()=>$,nthArg:()=>io,o:()=>ao,objOf:()=>sn,of:()=>so,omit:()=>uo,once:()=>lo,or:()=>ar,otherwise:()=>mo,over:()=>So,pair:()=>ho,partial:()=>vo,partialRight:()=>Eo,partition:()=>Ao,path:()=>K,pathEq:()=>_o,pathOr:()=>To,pathSatisfies:()=>Io,paths:()=>j,pick:()=>bo,pickAll:()=>wo,pickBy:()=>Do,pipe:()=>je,pipeK:()=>Oo,pipeP:()=>ze,pipeWith:()=>Xe,pluck:()=>H,prepend:()=>Po,product:()=>No,project:()=>Mo,prop:()=>V,propEq:()=>Lo,propIs:()=>ko,propOr:()=>Fo,propSatisfies:()=>Bo,props:()=>Go,range:()=>xo,reduce:()=>W,reduceBy:()=>Tt,reduceRight:()=>$o,reduceWhile:()=>jo,reduced:()=>Ko,reject:()=>pt,remove:()=>Ut,repeat:()=>Ho,replace:()=>Wo,reverse:()=>Ke,scan:()=>zo,sequence:()=>Yo,set:()=>Qo,slice:()=>xe,sort:()=>Jo,sortBy:()=>ei,sortWith:()=>ti,split:()=>ri,splitAt:()=>ni,splitEvery:()=>oi,splitWhen:()=>ii,startsWith:()=>ai,subtract:()=>si,sum:()=>Bn,symmetricDifference:()=>ci,symmetricDifferenceWith:()=>ui,tail:()=>$e,take:()=>Ht,takeLast:()=>dr,takeLastWhile:()=>di,takeWhile:()=>mi,tap:()=>Si,test:()=>hi,thunkify:()=>aa,times:()=>Vo,toLower:()=>vi,toPairs:()=>Ai,toPairsIn:()=>Ti,toString:()=>gt,toUpper:()=>Ii,transduce:()=>bi,transpose:()=>wi,traverse:()=>Di,trim:()=>Pi,tryCatch:()=>Ni,type:()=>Re.Z,unapply:()=>Ri,unary:()=>Mi,uncurryN:()=>Li,unfold:()=>ki,union:()=>Fi,unionWith:()=>Gi,uniq:()=>rn,uniqBy:()=>tn,uniqWith:()=>Bi,unless:()=>xi,unnest:()=>$i,until:()=>Ki,update:()=>kt,useWith:()=>Ro,values:()=>se,valuesIn:()=>Hi,view:()=>qi,when:()=>Yi,where:()=>Qi,whereEq:()=>Xi,without:()=>Ji,xor:()=>ea,xprod:()=>ta,zip:()=>ra,zipObj:()=>oa,zipWith:()=>ia});const n=function(){return!1},o=function(){return!0},i={"@@functional/placeholder":!0};var a=r(11963);const s=(0,a.Z)((function(e,t){return Number(e)+Number(t)}));function c(e,t){var r;t=t||[];var n=(e=e||[]).length,o=t.length,i=[];for(r=0;r<n;)i[i.length]=e[r],r+=1;for(r=0;r<o;)i[i.length]=t[r],r+=1;return i}var u=r(94005);function d(e,t){switch(e){case 0:return function(){return t.apply(this,arguments)};case 1:return function(e){return t.apply(this,arguments)};case 2:return function(e,r){return t.apply(this,arguments)};case 3:return function(e,r,n){return t.apply(this,arguments)};case 4:return function(e,r,n,o){return t.apply(this,arguments)};case 5:return function(e,r,n,o,i){return t.apply(this,arguments)};case 6:return function(e,r,n,o,i,a){return t.apply(this,arguments)};case 7:return function(e,r,n,o,i,a,s){return t.apply(this,arguments)};case 8:return function(e,r,n,o,i,a,s,c){return t.apply(this,arguments)};case 9:return function(e,r,n,o,i,a,s,c,u){return t.apply(this,arguments)};case 10:return function(e,r,n,o,i,a,s,c,u,d){return t.apply(this,arguments)};default:throw new Error("First argument to _arity must be a non-negative integer no greater than ten")}}var l=r(2457);function p(e,t,r){return function(){for(var n=[],o=0,i=e,a=0;a<t.length||o<arguments.length;){var s;a<t.length&&(!(0,l.Z)(t[a])||o>=arguments.length)?s=t[a]:(s=arguments[o],o+=1),n[a]=s,(0,l.Z)(s)||(i-=1),a+=1}return i<=0?r.apply(this,n):d(i,p(e,n,r))}}const m=(0,a.Z)((function(e,t){return 1===e?(0,u.Z)(t):d(e,p(e,[],t))})),g=(0,u.Z)((function(e){return m(e.length,(function(){var t=0,r=arguments[0],n=arguments[arguments.length-1],o=Array.prototype.slice.call(arguments,0);return o[0]=function(){var e=r.apply(this,c(arguments,[t,n]));return t+=1,e},e.apply(this,o)}))}));function f(e){return function t(r,n,o){switch(arguments.length){case 0:return t;case 1:return(0,l.Z)(r)?t:(0,a.Z)((function(t,n){return e(r,t,n)}));case 2:return(0,l.Z)(r)&&(0,l.Z)(n)?t:(0,l.Z)(r)?(0,a.Z)((function(t,r){return e(t,n,r)})):(0,l.Z)(n)?(0,a.Z)((function(t,n){return e(r,t,n)})):(0,u.Z)((function(t){return e(r,n,t)}));default:return(0,l.Z)(r)&&(0,l.Z)(n)&&(0,l.Z)(o)?t:(0,l.Z)(r)&&(0,l.Z)(n)?(0,a.Z)((function(t,r){return e(t,r,o)})):(0,l.Z)(r)&&(0,l.Z)(o)?(0,a.Z)((function(t,r){return e(t,n,r)})):(0,l.Z)(n)&&(0,l.Z)(o)?(0,a.Z)((function(t,n){return e(r,t,n)})):(0,l.Z)(r)?(0,u.Z)((function(t){return e(t,n,o)})):(0,l.Z)(n)?(0,u.Z)((function(t){return e(r,t,o)})):(0,l.Z)(o)?(0,u.Z)((function(t){return e(r,n,t)})):e(r,n,o)}}}const S=f((function(e,t,r){if(e>=r.length||e<-r.length)return r;var n=(e<0?r.length:0)+e,o=c(r);return o[n]=t(r[n]),o})),h=Array.isArray||function(e){return null!=e&&e.length>=0&&"[object Array]"===Object.prototype.toString.call(e)};function y(e){return null!=e&&"function"==typeof e["@@transducer/step"]}function v(e,t,r){return function(){if(0===arguments.length)return r();var n=Array.prototype.slice.call(arguments,0),o=n.pop();if(!h(o)){for(var i=0;i<e.length;){if("function"==typeof o[e[i]])return o[e[i]].apply(o,n);i+=1}if(y(o))return t.apply(null,n)(o)}return r.apply(this,arguments)}}function E(e){return e&&e["@@transducer/reduced"]?e:{"@@transducer/value":e,"@@transducer/reduced":!0}}const A={init:function(){return this.xf["@@transducer/init"]()},result:function(e){return this.xf["@@transducer/result"](e)}};var _=function(){function e(e,t){this.xf=t,this.f=e,this.all=!0}return e.prototype["@@transducer/init"]=A.init,e.prototype["@@transducer/result"]=function(e){return this.all&&(e=this.xf["@@transducer/step"](e,!0)),this.xf["@@transducer/result"](e)},e.prototype["@@transducer/step"]=function(e,t){return this.f(t)||(this.all=!1,e=E(this.xf["@@transducer/step"](e,!1))),e},e}();const T=(0,a.Z)((function(e,t){return new _(e,t)})),I=(0,a.Z)(v(["all"],T,(function(e,t){for(var r=0;r<t.length;){if(!e(t[r]))return!1;r+=1}return!0}))),b=(0,a.Z)((function(e,t){return t>e?t:e}));function w(e,t){for(var r=0,n=t.length,o=Array(n);r<n;)o[r]=e(t[r]),r+=1;return o}function C(e){return"[object String]"===Object.prototype.toString.call(e)}const D=(0,u.Z)((function(e){return!!h(e)||!!e&&"object"==typeof e&&!C(e)&&(1===e.nodeType?!!e.length:0===e.length||e.length>0&&e.hasOwnProperty(0)&&e.hasOwnProperty(e.length-1))}));var O=function(){function e(e){this.f=e}return e.prototype["@@transducer/init"]=function(){throw new Error("init not implemented on XWrap")},e.prototype["@@transducer/result"]=function(e){return e},e.prototype["@@transducer/step"]=function(e,t){return this.f(e,t)},e}();function P(e){return new O(e)}const N=(0,a.Z)((function(e,t){return d(e.length,(function(){return e.apply(t,arguments)}))}));function R(e,t,r){for(var n=r.next();!n.done;){if((t=e["@@transducer/step"](t,n.value))&&t["@@transducer/reduced"]){t=t["@@transducer/value"];break}n=r.next()}return e["@@transducer/result"](t)}function M(e,t,r,n){return e["@@transducer/result"](r[n](N(e["@@transducer/step"],e),t))}var L="undefined"!=typeof Symbol?Symbol.iterator:"@@iterator";function U(e,t,r){if("function"==typeof e&&(e=P(e)),D(r))return function(e,t,r){for(var n=0,o=r.length;n<o;){if((t=e["@@transducer/step"](t,r[n]))&&t["@@transducer/reduced"]){t=t["@@transducer/value"];break}n+=1}return e["@@transducer/result"](t)}(e,t,r);if("function"==typeof r["fantasy-land/reduce"])return M(e,t,r,"fantasy-land/reduce");if(null!=r[L])return R(e,t,r[L]());if("function"==typeof r.next)return R(e,t,r);if("function"==typeof r.reduce)return M(e,t,r,"reduce");throw new TypeError("reduce: list must be array or iterable")}var k=function(){function e(e,t){this.xf=t,this.f=e}return e.prototype["@@transducer/init"]=A.init,e.prototype["@@transducer/result"]=A.result,e.prototype["@@transducer/step"]=function(e,t){return this.xf["@@transducer/step"](e,this.f(t))},e}();const F=(0,a.Z)((function(e,t){return new k(e,t)}));var B=r(50622);const G=(0,a.Z)(v(["fantasy-land/map","map"],F,(function(e,t){switch(Object.prototype.toString.call(t)){case"[object Function]":return m(t.length,(function(){return e.call(this,t.apply(this,arguments))}));case"[object Object]":return U((function(r,n){return r[n]=e(t[n]),r}),{},(0,B.Z)(t));default:return w(e,t)}}))),x=Number.isInteger||function(e){return e<<0===e},$=(0,a.Z)((function(e,t){var r=e<0?t.length+e:e;return C(t)?t.charAt(r):t[r]})),j=(0,a.Z)((function(e,t){return e.map((function(e){for(var r,n=t,o=0;o<e.length;){if(null==n)return;r=e[o],n=x(r)?$(r,n):n[r],o+=1}return n}))})),K=(0,a.Z)((function(e,t){return j([e],t)[0]})),V=(0,a.Z)((function(e,t){return K([e],t)})),H=(0,a.Z)((function(e,t){return G(V(e),t)})),W=f(U),z=(0,u.Z)((function(e){return m(W(b,0,H("length",e)),(function(){for(var t=0,r=e.length;t<r;){if(!e[t].apply(this,arguments))return!1;t+=1}return!0}))})),q=(0,u.Z)((function(e){return function(){return e}})),Y=(0,a.Z)((function(e,t){return e&&t}));var Z=function(){function e(e,t){this.xf=t,this.f=e,this.any=!1}return e.prototype["@@transducer/init"]=A.init,e.prototype["@@transducer/result"]=function(e){return this.any||(e=this.xf["@@transducer/step"](e,!1)),this.xf["@@transducer/result"](e)},e.prototype["@@transducer/step"]=function(e,t){return this.f(t)&&(this.any=!0,e=E(this.xf["@@transducer/step"](e,!0))),e},e}();const Q=(0,a.Z)((function(e,t){return new Z(e,t)})),X=(0,a.Z)(v(["any"],Q,(function(e,t){for(var r=0;r<t.length;){if(e(t[r]))return!0;r+=1}return!1}))),J=(0,u.Z)((function(e){return m(W(b,0,H("length",e)),(function(){for(var t=0,r=e.length;t<r;){if(e[t].apply(this,arguments))return!0;t+=1}return!1}))})),ee=(0,a.Z)((function(e,t){return"function"==typeof t["fantasy-land/ap"]?t["fantasy-land/ap"](e):"function"==typeof e.ap?e.ap(t):"function"==typeof e?function(r){return e(r)(t(r))}:U((function(e,r){return c(e,G(r,t))}),[],e)}));var te=function(){function e(e,t){this.xf=t,this.pos=0,this.full=!1,this.acc=new Array(e)}return e.prototype["@@transducer/init"]=A.init,e.prototype["@@transducer/result"]=function(e){return this.acc=null,this.xf["@@transducer/result"](e)},e.prototype["@@transducer/step"]=function(e,t){return this.store(t),this.full?this.xf["@@transducer/step"](e,this.getCopy()):e},e.prototype.store=function(e){this.acc[this.pos]=e,this.pos+=1,this.pos===this.acc.length&&(this.pos=0,this.full=!0)},e.prototype.getCopy=function(){return c(Array.prototype.slice.call(this.acc,this.pos),Array.prototype.slice.call(this.acc,0,this.pos))},e}();const re=(0,a.Z)((function(e,t){return new te(e,t)})),ne=(0,a.Z)(v([],re,(function(e,t){for(var r=0,n=t.length-(e-1),o=new Array(n>=0?n:0);r<n;)o[r]=Array.prototype.slice.call(t,r,r+e),r+=1;return o}))),oe=(0,a.Z)((function(e,t){return c(t,[e])})),ie=(0,a.Z)((function(e,t){return e.apply(this,t)}));var ae=(0,u.Z)((function(e){for(var t=(0,B.Z)(e),r=t.length,n=[],o=0;o<r;)n[o]=e[t[o]],o+=1;return n}));const se=ae;function ce(e,t){return(0,B.Z)(t).reduce((function(r,n){return r[n]=e(t[n]),r}),{})}const ue=(0,u.Z)((function e(t){return t=ce((function(t){return"function"==typeof t?t:e(t)}),t),m(W(b,0,H("length",se(t))),(function(){var e=arguments;return ce((function(t){return ie(t,e)}),t)}))})),de=(0,a.Z)((function(e,t){return t(e)})),le=f((function(e,t,r){var n=e(t),o=e(r);return n<o?-1:n>o?1:0}));var pe=f((function(e,t,r){var n={};for(var o in r)n[o]=r[o];return n[e]=t,n}));const me=pe;var ge=r(46861);const fe=(0,u.Z)((function(e){return null==e}));var Se=f((function e(t,r,n){if(0===t.length)return r;var o=t[0];if(t.length>1){var i=!fe(n)&&(0,ge.Z)(o,n)?n[o]:x(t[1])?[]:{};r=e(Array.prototype.slice.call(t,1),r,i)}if(x(o)&&h(n)){var a=[].concat(n);return a[o]=r,a}return me(o,r,n)}));const he=Se,ye=(0,a.Z)((function(e,t){switch(e){case 0:return function(){return t.call(this)};case 1:return function(e){return t.call(this,e)};case 2:return function(e,r){return t.call(this,e,r)};case 3:return function(e,r,n){return t.call(this,e,r,n)};case 4:return function(e,r,n,o){return t.call(this,e,r,n,o)};case 5:return function(e,r,n,o,i){return t.call(this,e,r,n,o,i)};case 6:return function(e,r,n,o,i,a){return t.call(this,e,r,n,o,i,a)};case 7:return function(e,r,n,o,i,a,s){return t.call(this,e,r,n,o,i,a,s)};case 8:return function(e,r,n,o,i,a,s,c){return t.call(this,e,r,n,o,i,a,s,c)};case 9:return function(e,r,n,o,i,a,s,c,u){return t.call(this,e,r,n,o,i,a,s,c,u)};case 10:return function(e,r,n,o,i,a,s,c,u,d){return t.call(this,e,r,n,o,i,a,s,c,u,d)};default:throw new Error("First argument to nAry must be a non-negative integer no greater than ten")}})),ve=(0,u.Z)((function(e){return ye(2,e)}));function Ee(e){var t=Object.prototype.toString.call(e);return"[object Function]"===t||"[object AsyncFunction]"===t||"[object GeneratorFunction]"===t||"[object AsyncGeneratorFunction]"===t}const Ae=(0,a.Z)((function(e,t){var r=m(e,t);return m(e,(function(){return U(ee,G(r,arguments[0]),Array.prototype.slice.call(arguments,1))}))})),_e=(0,u.Z)((function(e){return Ae(e.length,e)})),Te=(0,a.Z)((function(e,t){return Ee(e)?function(){return e.apply(this,arguments)&&t.apply(this,arguments)}:_e(Y)(e,t)})),Ie=(0,u.Z)((function(e){return m(e.length,e)})),be=Ie((function(e){return e.apply(this,Array.prototype.slice.call(arguments,1))}));function we(e){return function t(r){for(var n,o,i,a=[],s=0,c=r.length;s<c;){if(D(r[s]))for(i=0,o=(n=e?t(r[s]):r[s]).length;i<o;)a[a.length]=n[i],i+=1;else a[a.length]=r[s];s+=1}return a}}const Ce=(0,a.Z)((function(e,t){return G(e,function(e){var t=function(e){return{"@@transducer/init":A.init,"@@transducer/result":function(t){return e["@@transducer/result"](t)},"@@transducer/step":function(t,r){var n=e["@@transducer/step"](t,r);return n["@@transducer/reduced"]?{"@@transducer/value":n,"@@transducer/reduced":!0}:n}}}(e);return{"@@transducer/init":A.init,"@@transducer/result":function(e){return t["@@transducer/result"](e)},"@@transducer/step":function(e,r){return D(r)?U(t,e,r):U(t,e,[r])}}}(t))})),De=(0,a.Z)(v(["fantasy-land/chain","chain"],Ce,(function(e,t){return"function"==typeof t?function(r){return e(t(r))(r)}:we(!1)(G(e,t))})));var Oe=f((function(e,t,r){if(e>t)throw new Error("min must not be greater than max in clamp(min, max, value)");return r<e?e:r>t?t:r}));const Pe=Oe;function Ne(e){return new RegExp(e.source,(e.global?"g":"")+(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.sticky?"y":"")+(e.unicode?"u":""))}var Re=r(18208);function Me(e,t,r,n){var o=function(o){for(var i=t.length,a=0;a<i;){if(e===t[a])return r[a];a+=1}for(var s in t[a+1]=e,r[a+1]=o,e)o[s]=n?Me(e[s],t,r,!0):e[s];return o};switch((0,Re.Z)(e)){case"Object":return o({});case"Array":return o([]);case"Date":return new Date(e.valueOf());case"RegExp":return Ne(e);default:return e}}const Le=(0,u.Z)((function(e){return null!=e&&"function"==typeof e.clone?e.clone():Me(e,[],[],!0)})),Ue=(0,u.Z)((function(e){return function(t,r){return e(t,r)?-1:e(r,t)?1:0}})),ke=(0,u.Z)((function(e){return!e})),Fe=_e(ke);function Be(e,t){return function(){return t.call(this,e.apply(this,arguments))}}function Ge(e,t){return function(){var r=arguments.length;if(0===r)return t();var n=arguments[r-1];return h(n)||"function"!=typeof n[e]?t.apply(this,arguments):n[e].apply(n,Array.prototype.slice.call(arguments,0,r-1))}}const xe=f(Ge("slice",(function(e,t,r){return Array.prototype.slice.call(r,e,t)}))),$e=(0,u.Z)(Ge("tail",xe(1,1/0)));function je(){if(0===arguments.length)throw new Error("pipe requires at least one argument");return d(arguments[0].length,W(Be,arguments[0],$e(arguments)))}const Ke=(0,u.Z)((function(e){return C(e)?e.split("").reverse().join(""):Array.prototype.slice.call(e,0).reverse()}));function Ve(){if(0===arguments.length)throw new Error("compose requires at least one argument");return je.apply(this,Ke(arguments))}function He(){if(0===arguments.length)throw new Error("composeK requires at least one argument");var e=Array.prototype.slice.call(arguments),t=e.pop();return Ve(Ve.apply(this,G(De,e)),t)}function We(e,t){return function(){var r=this;return e.apply(r,arguments).then((function(e){return t.call(r,e)}))}}function ze(){if(0===arguments.length)throw new Error("pipeP requires at least one argument");return d(arguments[0].length,W(We,arguments[0],$e(arguments)))}function qe(){if(0===arguments.length)throw new Error("composeP requires at least one argument");return ze.apply(this,Ke(arguments))}const Ye=$(0);function Ze(e){return e}const Qe=(0,u.Z)(Ze),Xe=(0,a.Z)((function(e,t){if(t.length<=0)return Qe;var r=Ye(t),n=$e(t);return d(r.length,(function(){return U((function(t,r){return e.call(this,r,t)}),r.apply(this,arguments),n)}))})),Je=(0,a.Z)((function(e,t){return Xe.apply(this,[e,Ke(t)])}));var et=r(52800);function tt(e,t,r){var n,o;if("function"==typeof e.indexOf)switch(typeof t){case"number":if(0===t){for(n=1/t;r<e.length;){if(0===(o=e[r])&&1/o===n)return r;r+=1}return-1}if(t!=t){for(;r<e.length;){if("number"==typeof(o=e[r])&&o!=o)return r;r+=1}return-1}return e.indexOf(t,r);case"string":case"boolean":case"function":case"undefined":return e.indexOf(t,r);case"object":if(null===t)return e.indexOf(t,r)}for(;r<e.length;){if((0,et.Z)(e[r],t))return r;r+=1}return-1}function rt(e,t){return tt(t,e,0)>=0}function nt(e){return'"'+e.replace(/\\/g,"\\\\").replace(/[\b]/g,"\\b").replace(/\f/g,"\\f").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\t/g,"\\t").replace(/\v/g,"\\v").replace(/\0/g,"\\0").replace(/"/g,'\\"')+'"'}var ot=function(e){return(e<10?"0":"")+e};const it="function"==typeof Date.prototype.toISOString?function(e){return e.toISOString()}:function(e){return e.getUTCFullYear()+"-"+ot(e.getUTCMonth()+1)+"-"+ot(e.getUTCDate())+"T"+ot(e.getUTCHours())+":"+ot(e.getUTCMinutes())+":"+ot(e.getUTCSeconds())+"."+(e.getUTCMilliseconds()/1e3).toFixed(3).slice(2,5)+"Z"};function at(e){return function(){return!e.apply(this,arguments)}}function st(e,t){for(var r=0,n=t.length,o=[];r<n;)e(t[r])&&(o[o.length]=t[r]),r+=1;return o}function ct(e){return"[object Object]"===Object.prototype.toString.call(e)}var ut=function(){function e(e,t){this.xf=t,this.f=e}return e.prototype["@@transducer/init"]=A.init,e.prototype["@@transducer/result"]=A.result,e.prototype["@@transducer/step"]=function(e,t){return this.f(t)?this.xf["@@transducer/step"](e,t):e},e}();const dt=(0,a.Z)((function(e,t){return new ut(e,t)})),lt=(0,a.Z)(v(["filter"],dt,(function(e,t){return ct(t)?U((function(r,n){return e(t[n])&&(r[n]=t[n]),r}),{},(0,B.Z)(t)):st(e,t)}))),pt=(0,a.Z)((function(e,t){return lt(at(e),t)}));function mt(e,t){var r=function(r){var n=t.concat([e]);return rt(r,n)?"<Circular>":mt(r,n)},n=function(e,t){return w((function(t){return nt(t)+": "+r(e[t])}),t.slice().sort())};switch(Object.prototype.toString.call(e)){case"[object Arguments]":return"(function() { return arguments; }("+w(r,e).join(", ")+"))";case"[object Array]":return"["+w(r,e).concat(n(e,pt((function(e){return/^\d+$/.test(e)}),(0,B.Z)(e)))).join(", ")+"]";case"[object Boolean]":return"object"==typeof e?"new Boolean("+r(e.valueOf())+")":e.toString();case"[object Date]":return"new Date("+(isNaN(e.valueOf())?r(NaN):nt(it(e)))+")";case"[object Null]":return"null";case"[object Number]":return"object"==typeof e?"new Number("+r(e.valueOf())+")":1/e==-1/0?"-0":e.toString(10);case"[object String]":return"object"==typeof e?"new String("+r(e.valueOf())+")":nt(e);case"[object Undefined]":return"undefined";default:if("function"==typeof e.toString){var o=e.toString();if("[object Object]"!==o)return o}return"{"+n(e,(0,B.Z)(e)).join(", ")+"}"}}const gt=(0,u.Z)((function(e){return mt(e,[])})),ft=(0,a.Z)((function(e,t){if(h(e)){if(h(t))return e.concat(t);throw new TypeError(gt(t)+" is not an array")}if(C(e)){if(C(t))return e+t;throw new TypeError(gt(t)+" is not a string")}if(null!=e&&Ee(e["fantasy-land/concat"]))return e["fantasy-land/concat"](t);if(null!=e&&Ee(e.concat))return e.concat(t);throw new TypeError(gt(e)+' does not have a method named "concat" or "fantasy-land/concat"')}));var St=(0,u.Z)((function(e){return d(W(b,0,G((function(e){return e[0].length}),e)),(function(){for(var t=0;t<e.length;){if(e[t][0].apply(this,arguments))return e[t][1].apply(this,arguments);t+=1}}))}));const ht=St,yt=(0,a.Z)((function(e,t){if(e>10)throw new Error("Constructor with greater than ten arguments");return 0===e?function(){return new t}:Ie(ye(e,(function(e,r,n,o,i,a,s,c,u,d){switch(arguments.length){case 1:return new t(e);case 2:return new t(e,r);case 3:return new t(e,r,n);case 4:return new t(e,r,n,o);case 5:return new t(e,r,n,o,i);case 6:return new t(e,r,n,o,i,a);case 7:return new t(e,r,n,o,i,a,s);case 8:return new t(e,r,n,o,i,a,s,c);case 9:return new t(e,r,n,o,i,a,s,c,u);case 10:return new t(e,r,n,o,i,a,s,c,u,d)}})))})),vt=(0,u.Z)((function(e){return yt(e.length,e)})),Et=(0,a.Z)(rt),At=(0,a.Z)((function(e,t){return m(W(b,0,H("length",t)),(function(){var r=arguments,n=this;return e.apply(n,w((function(e){return e.apply(n,r)}),t))}))}));var _t=function(){function e(e,t,r,n){this.valueFn=e,this.valueAcc=t,this.keyFn=r,this.xf=n,this.inputs={}}return e.prototype["@@transducer/init"]=A.init,e.prototype["@@transducer/result"]=function(e){var t;for(t in this.inputs)if((0,ge.Z)(t,this.inputs)&&(e=this.xf["@@transducer/step"](e,this.inputs[t]))["@@transducer/reduced"]){e=e["@@transducer/value"];break}return this.inputs=null,this.xf["@@transducer/result"](e)},e.prototype["@@transducer/step"]=function(e,t){var r=this.keyFn(t);return this.inputs[r]=this.inputs[r]||[r,this.valueAcc],this.inputs[r][1]=this.valueFn(this.inputs[r][1],t),e},e}();const Tt=p(4,[],v([],p(4,[],(function(e,t,r,n){return new _t(e,t,r,n)})),(function(e,t,r,n){return U((function(n,o){var i=r(o);return n[i]=e((0,ge.Z)(i,n)?n[i]:Me(t,[],[],!1),o),n}),{},n)}))),It=Tt((function(e,t){return e+1}),0),bt=s(-1),wt=(0,a.Z)((function(e,t){return null==t||t!=t?e:t})),Ct=f((function(e,t,r){var n=e(t),o=e(r);return n>o?-1:n<o?1:0}));function Dt(e,t,r){var n,o=typeof e;switch(o){case"string":case"number":return 0===e&&1/e==-1/0?!!r._items["-0"]||(t&&(r._items["-0"]=!0),!1):null!==r._nativeSet?t?(n=r._nativeSet.size,r._nativeSet.add(e),r._nativeSet.size===n):r._nativeSet.has(e):o in r._items?e in r._items[o]||(t&&(r._items[o][e]=!0),!1):(t&&(r._items[o]={},r._items[o][e]=!0),!1);case"boolean":if(o in r._items){var i=e?1:0;return!!r._items[o][i]||(t&&(r._items[o][i]=!0),!1)}return t&&(r._items[o]=e?[!1,!0]:[!0,!1]),!1;case"function":return null!==r._nativeSet?t?(n=r._nativeSet.size,r._nativeSet.add(e),r._nativeSet.size===n):r._nativeSet.has(e):o in r._items?!!rt(e,r._items[o])||(t&&r._items[o].push(e),!1):(t&&(r._items[o]=[e]),!1);case"undefined":return!!r._items[o]||(t&&(r._items[o]=!0),!1);case"object":if(null===e)return!!r._items.null||(t&&(r._items.null=!0),!1);default:return(o=Object.prototype.toString.call(e))in r._items?!!rt(e,r._items[o])||(t&&r._items[o].push(e),!1):(t&&(r._items[o]=[e]),!1)}}const Ot=function(){function e(){this._nativeSet="function"==typeof Set?new Set:null,this._items={}}return e.prototype.add=function(e){return!Dt(e,!0,this)},e.prototype.has=function(e){return Dt(e,!1,this)},e}(),Pt=(0,a.Z)((function(e,t){for(var r=[],n=0,o=e.length,i=t.length,a=new Ot,s=0;s<i;s+=1)a.add(t[s]);for(;n<o;)a.add(e[n])&&(r[r.length]=e[n]),n+=1;return r}));var Nt=r(34425);const Rt=f((function(e,t,r){for(var n=[],o=0,i=t.length;o<i;)(0,Nt.Z)(e,t[o],r)||(0,Nt.Z)(e,t[o],n)||n.push(t[o]),o+=1;return n}));var Mt=(0,a.Z)((function(e,t){var r={};for(var n in t)r[n]=t[n];return delete r[e],r}));const Lt=Mt,Ut=f((function(e,t,r){var n=Array.prototype.slice.call(r,0);return n.splice(e,t),n})),kt=f((function(e,t,r){return S(e,q(t),r)}));var Ft=(0,a.Z)((function e(t,r){switch(t.length){case 0:return r;case 1:return x(t[0])&&h(r)?Ut(t[0],1,r):Lt(t[0],r);default:var n=t[0],o=Array.prototype.slice.call(t,1);return null==r[n]?r:x(n)&&h(r)?kt(n,e(o,r[n]),r):me(n,e(o,r[n]),r)}}));const Bt=Ft,Gt=(0,a.Z)((function(e,t){return e/t}));var xt=function(){function e(e,t){this.xf=t,this.n=e}return e.prototype["@@transducer/init"]=A.init,e.prototype["@@transducer/result"]=A.result,e.prototype["@@transducer/step"]=function(e,t){return this.n>0?(this.n-=1,e):this.xf["@@transducer/step"](e,t)},e}();const $t=(0,a.Z)((function(e,t){return new xt(e,t)})),jt=(0,a.Z)(v(["drop"],$t,(function(e,t){return xe(Math.max(0,e),1/0,t)})));var Kt=function(){function e(e,t){this.xf=t,this.n=e,this.i=0}return e.prototype["@@transducer/init"]=A.init,e.prototype["@@transducer/result"]=A.result,e.prototype["@@transducer/step"]=function(e,t){this.i+=1;var r=0===this.n?e:this.xf["@@transducer/step"](e,t);return this.n>=0&&this.i>=this.n?E(r):r},e}();const Vt=(0,a.Z)((function(e,t){return new Kt(e,t)})),Ht=(0,a.Z)(v(["take"],Vt,(function(e,t){return xe(0,e<0?1/0:e,t)})));var Wt=function(){function e(e,t){this.xf=t,this.pos=0,this.full=!1,this.acc=new Array(e)}return e.prototype["@@transducer/init"]=A.init,e.prototype["@@transducer/result"]=function(e){return this.acc=null,this.xf["@@transducer/result"](e)},e.prototype["@@transducer/step"]=function(e,t){return this.full&&(e=this.xf["@@transducer/step"](e,this.acc[this.pos])),this.store(t),e},e.prototype.store=function(e){this.acc[this.pos]=e,this.pos+=1,this.pos===this.acc.length&&(this.pos=0,this.full=!0)},e}();const zt=(0,a.Z)((function(e,t){return new Wt(e,t)})),qt=(0,a.Z)(v([],zt,(function(e,t){return Ht(e<t.length?t.length-e:0,t)})));var Yt=function(){function e(e,t){this.f=e,this.retained=[],this.xf=t}return e.prototype["@@transducer/init"]=A.init,e.prototype["@@transducer/result"]=function(e){return this.retained=null,this.xf["@@transducer/result"](e)},e.prototype["@@transducer/step"]=function(e,t){return this.f(t)?this.retain(e,t):this.flush(e,t)},e.prototype.flush=function(e,t){return e=U(this.xf["@@transducer/step"],e,this.retained),this.retained=[],this.xf["@@transducer/step"](e,t)},e.prototype.retain=function(e,t){return this.retained.push(t),e},e}();const Zt=(0,a.Z)((function(e,t){return new Yt(e,t)})),Qt=(0,a.Z)(v([],Zt,(function(e,t){for(var r=t.length-1;r>=0&&e(t[r]);)r-=1;return xe(0,r+1,t)})));var Xt=function(){function e(e,t){this.xf=t,this.pred=e,this.lastValue=void 0,this.seenFirstValue=!1}return e.prototype["@@transducer/init"]=A.init,e.prototype["@@transducer/result"]=A.result,e.prototype["@@transducer/step"]=function(e,t){var r=!1;return this.seenFirstValue?this.pred(this.lastValue,t)&&(r=!0):this.seenFirstValue=!0,this.lastValue=t,r?e:this.xf["@@transducer/step"](e,t)},e}();const Jt=(0,a.Z)((function(e,t){return new Xt(e,t)})),er=$(-1),tr=(0,a.Z)(v([],Jt,(function(e,t){var r=[],n=1,o=t.length;if(0!==o)for(r[0]=t[0];n<o;)e(er(r),t[n])||(r[r.length]=t[n]),n+=1;return r}))),rr=(0,u.Z)(v([],Jt(et.Z),tr(et.Z)));var nr=function(){function e(e,t){this.xf=t,this.f=e}return e.prototype["@@transducer/init"]=A.init,e.prototype["@@transducer/result"]=A.result,e.prototype["@@transducer/step"]=function(e,t){if(this.f){if(this.f(t))return e;this.f=null}return this.xf["@@transducer/step"](e,t)},e}();const or=(0,a.Z)((function(e,t){return new nr(e,t)})),ir=(0,a.Z)(v(["dropWhile"],or,(function(e,t){for(var r=0,n=t.length;r<n&&e(t[r]);)r+=1;return xe(r,1/0,t)}))),ar=(0,a.Z)((function(e,t){return e||t})),sr=(0,a.Z)((function(e,t){return Ee(e)?function(){return e.apply(this,arguments)||t.apply(this,arguments)}:_e(ar)(e,t)}));var cr=r(3405);const ur=(0,u.Z)((function(e){return null!=e&&"function"==typeof e["fantasy-land/empty"]?e["fantasy-land/empty"]():null!=e&&null!=e.constructor&&"function"==typeof e.constructor["fantasy-land/empty"]?e.constructor["fantasy-land/empty"]():null!=e&&"function"==typeof e.empty?e.empty():null!=e&&null!=e.constructor&&"function"==typeof e.constructor.empty?e.constructor.empty():h(e)?[]:C(e)?"":ct(e)?{}:(0,cr.Z)(e)?function(){return arguments}():void 0})),dr=(0,a.Z)((function(e,t){return jt(e>=0?t.length-e:0,t)})),lr=(0,a.Z)((function(e,t){return(0,et.Z)(dr(e.length,t),e)})),pr=f((function(e,t,r){return(0,et.Z)(e(t),e(r))}));var mr=f((function(e,t,r){return(0,et.Z)(t[e],r[e])}));const gr=mr;var fr=(0,a.Z)((function e(t,r){var n,o,i,a=r instanceof Array?[]:{};for(o in r)i=typeof(n=t[o]),a[o]="function"===i?n(r[o]):n&&"object"===i?e(n,r[o]):r[o];return a}));const Sr=fr;var hr=function(){function e(e,t){this.xf=t,this.f=e,this.found=!1}return e.prototype["@@transducer/init"]=A.init,e.prototype["@@transducer/result"]=function(e){return this.found||(e=this.xf["@@transducer/step"](e,void 0)),this.xf["@@transducer/result"](e)},e.prototype["@@transducer/step"]=function(e,t){return this.f(t)&&(this.found=!0,e=E(this.xf["@@transducer/step"](e,t))),e},e}();const yr=(0,a.Z)((function(e,t){return new hr(e,t)})),vr=(0,a.Z)(v(["find"],yr,(function(e,t){for(var r=0,n=t.length;r<n;){if(e(t[r]))return t[r];r+=1}})));var Er=function(){function e(e,t){this.xf=t,this.f=e,this.idx=-1,this.found=!1}return e.prototype["@@transducer/init"]=A.init,e.prototype["@@transducer/result"]=function(e){return this.found||(e=this.xf["@@transducer/step"](e,-1)),this.xf["@@transducer/result"](e)},e.prototype["@@transducer/step"]=function(e,t){return this.idx+=1,this.f(t)&&(this.found=!0,e=E(this.xf["@@transducer/step"](e,this.idx))),e},e}();const Ar=(0,a.Z)((function(e,t){return new Er(e,t)})),_r=(0,a.Z)(v([],Ar,(function(e,t){for(var r=0,n=t.length;r<n;){if(e(t[r]))return r;r+=1}return-1})));var Tr=function(){function e(e,t){this.xf=t,this.f=e}return e.prototype["@@transducer/init"]=A.init,e.prototype["@@transducer/result"]=function(e){return this.xf["@@transducer/result"](this.xf["@@transducer/step"](e,this.last))},e.prototype["@@transducer/step"]=function(e,t){return this.f(t)&&(this.last=t),e},e}();const Ir=(0,a.Z)((function(e,t){return new Tr(e,t)})),br=(0,a.Z)(v([],Ir,(function(e,t){for(var r=t.length-1;r>=0;){if(e(t[r]))return t[r];r-=1}})));var wr=function(){function e(e,t){this.xf=t,this.f=e,this.idx=-1,this.lastIdx=-1}return e.prototype["@@transducer/init"]=A.init,e.prototype["@@transducer/result"]=function(e){return this.xf["@@transducer/result"](this.xf["@@transducer/step"](e,this.lastIdx))},e.prototype["@@transducer/step"]=function(e,t){return this.idx+=1,this.f(t)&&(this.lastIdx=this.idx),e},e}();const Cr=(0,a.Z)((function(e,t){return new wr(e,t)})),Dr=(0,a.Z)(v([],Cr,(function(e,t){for(var r=t.length-1;r>=0;){if(e(t[r]))return r;r-=1}return-1}))),Or=(0,u.Z)(we(!0)),Pr=(0,u.Z)((function(e){return m(e.length,(function(t,r){var n=Array.prototype.slice.call(arguments,0);return n[0]=r,n[1]=t,e.apply(this,n)}))})),Nr=(0,a.Z)(Ge("forEach",(function(e,t){for(var r=t.length,n=0;n<r;)e(t[n]),n+=1;return t}))),Rr=(0,a.Z)((function(e,t){for(var r=(0,B.Z)(t),n=0;n<r.length;){var o=r[n];e(t[o],o,t),n+=1}return t})),Mr=(0,u.Z)((function(e){for(var t={},r=0;r<e.length;)t[e[r][0]]=e[r][1],r+=1;return t})),Lr=(0,a.Z)(Ge("groupBy",Tt((function(e,t){return null==e&&(e=[]),e.push(t),e}),null))),Ur=(0,a.Z)((function(e,t){for(var r=[],n=0,o=t.length;n<o;){for(var i=n+1;i<o&&e(t[i-1],t[i]);)i+=1;r.push(t.slice(n,i)),n=i}return r})),kr=(0,a.Z)((function(e,t){return e>t})),Fr=(0,a.Z)((function(e,t){return e>=t})),Br=(0,a.Z)((function(e,t){if(0===e.length||fe(t))return!1;for(var r=t,n=0;n<e.length;){if(fe(r)||!(0,ge.Z)(e[n],r))return!1;r=r[e[n]],n+=1}return!0}));var Gr=(0,a.Z)((function(e,t){return Br([e],t)}));const xr=Gr;var $r=(0,a.Z)((function(e,t){return e in t}));const jr=$r;var Kr=r(32295);const Vr=(0,a.Z)(Kr.Z),Hr=f((function(e,t,r){return m(Math.max(e.length,t.length,r.length),(function(){return e.apply(this,arguments)?t.apply(this,arguments):r.apply(this,arguments)}))})),Wr=s(1),zr=(0,a.Z)(rt),qr=Tt((function(e,t){return t}),null),Yr=(0,a.Z)((function(e,t){return"function"!=typeof t.indexOf||h(t)?tt(t,e,0):t.indexOf(e)})),Zr=xe(0,-1),Qr=f((function(e,t,r){return st((function(t){return(0,Nt.Z)(e,t,r)}),t)})),Xr=f((function(e,t,r){e=e<r.length&&e>=0?e:r.length;var n=Array.prototype.slice.call(r,0);return n.splice(e,0,t),n})),Jr=f((function(e,t,r){return e=e<r.length&&e>=0?e:r.length,[].concat(Array.prototype.slice.call(r,0,e),t,Array.prototype.slice.call(r,e))}));var en=(0,a.Z)((function(e,t){for(var r,n,o=new Ot,i=[],a=0;a<t.length;)r=e(n=t[a]),o.add(r)&&i.push(n),a+=1;return i}));const tn=en,rn=tn(Qe),nn=(0,a.Z)((function(e,t){var r,n;return e.length>t.length?(r=e,n=t):(r=t,n=e),rn(st(Pr(rt)(r),n))})),on=(0,a.Z)(Ge("intersperse",(function(e,t){for(var r=[],n=0,o=t.length;n<o;)n===o-1?r.push(t[n]):r.push(t[n],e),n+=1;return r}))),an="function"==typeof Object.assign?Object.assign:function(e){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),r=1,n=arguments.length;r<n;){var o=arguments[r];if(null!=o)for(var i in o)(0,ge.Z)(i,o)&&(t[i]=o[i]);r+=1}return t},sn=(0,a.Z)((function(e,t){var r={};return r[e]=t,r}));var cn={"@@transducer/init":Array,"@@transducer/step":function(e,t){return e.push(t),e},"@@transducer/result":Ze},un={"@@transducer/init":String,"@@transducer/step":function(e,t){return e+t},"@@transducer/result":Ze},dn={"@@transducer/init":Object,"@@transducer/step":function(e,t){return an(e,D(t)?sn(t[0],t[1]):t)},"@@transducer/result":Ze};const ln=f((function(e,t,r){return y(e)?U(t(e),e["@@transducer/init"](),r):U(t(function(e){if(y(e))return e;if(D(e))return cn;if("string"==typeof e)return un;if("object"==typeof e)return dn;throw new Error("Cannot create transformer for "+e)}(e)),Me(e,[],[],!1),r)}));var pn=(0,u.Z)((function(e){for(var t=(0,B.Z)(e),r=t.length,n=0,o={};n<r;){var i=t[n],a=e[i],s=(0,ge.Z)(a,o)?o[a]:o[a]=[];s[s.length]=i,n+=1}return o}));const mn=pn;var gn=(0,u.Z)((function(e){for(var t=(0,B.Z)(e),r=t.length,n=0,o={};n<r;){var i=t[n];o[e[i]]=i,n+=1}return o}));const fn=gn,Sn=(0,a.Z)((function(e,t){return m(e+1,(function(){var r=arguments[e];if(null!=r&&Ee(r[t]))return r[t].apply(r,Array.prototype.slice.call(arguments,0,e));throw new TypeError(gt(r)+' does not have a method named "'+t+'"')}))})),hn=(0,a.Z)((function(e,t){return null!=t&&t.constructor===e||t instanceof e})),yn=(0,u.Z)((function(e){return null!=e&&(0,et.Z)(e,ur(e))})),vn=Sn(1,"join"),En=(0,u.Z)((function(e){return At((function(){return Array.prototype.slice.call(arguments,0)}),e)}));var An=(0,u.Z)((function(e){var t,r=[];for(t in e)r[r.length]=t;return r}));const _n=An,Tn=(0,a.Z)((function(e,t){if("function"!=typeof t.lastIndexOf||h(t)){for(var r=t.length-1;r>=0;){if((0,et.Z)(t[r],e))return r;r-=1}return-1}return t.lastIndexOf(e)}));function In(e){return"[object Number]"===Object.prototype.toString.call(e)}const bn=(0,u.Z)((function(e){return null!=e&&In(e.length)?e.length:NaN})),wn=(0,a.Z)((function(e,t){return function(r){return function(n){return G((function(e){return t(e,n)}),r(e(n)))}}})),Cn=(0,u.Z)((function(e){return wn($(e),kt(e))})),Dn=(0,u.Z)((function(e){return wn(K(e),he(e))})),On=(0,u.Z)((function(e){return wn(V(e),me(e))})),Pn=(0,a.Z)((function(e,t){return e<t})),Nn=(0,a.Z)((function(e,t){return e<=t})),Rn=f((function(e,t,r){for(var n=0,o=r.length,i=[],a=[t];n<o;)a=e(a[0],r[n]),i[n]=a[1],n+=1;return[a[0],i]})),Mn=f((function(e,t,r){for(var n=r.length-1,o=[],i=[t];n>=0;)i=e(i[0],r[n]),o[n]=i[1],n-=1;return[i[0],o]})),Ln=(0,a.Z)((function(e,t){return U((function(r,n){return r[n]=e(t[n],n,t),r}),{},(0,B.Z)(t))})),Un=(0,a.Z)((function(e,t){return t.match(e)||[]})),kn=(0,a.Z)((function(e,t){return x(e)?!x(t)||t<1?NaN:(e%t+t)%t:NaN})),Fn=f((function(e,t,r){return e(r)>e(t)?r:t})),Bn=W(s,0),Gn=(0,u.Z)((function(e){return Bn(e)/e.length})),xn=(0,u.Z)((function(e){var t=e.length;if(0===t)return NaN;var r=2-t%2,n=(t-r)/2;return Gn(Array.prototype.slice.call(e,0).sort((function(e,t){return e<t?-1:e>t?1:0})).slice(n,n+r))})),$n=(0,a.Z)((function(e,t){var r={};return d(t.length,(function(){var n=e.apply(this,arguments);return(0,ge.Z)(n,r)||(r[n]=t.apply(this,arguments)),r[n]}))})),jn=(0,a.Z)((function(e,t){return an({},e,t)})),Kn=(0,u.Z)((function(e){return an.apply(null,[{}].concat(e))})),Vn=f((function(e,t,r){var n,o={};for(n in t)(0,ge.Z)(n,t)&&(o[n]=(0,ge.Z)(n,r)?e(n,t[n],r[n]):t[n]);for(n in r)(0,ge.Z)(n,r)&&!(0,ge.Z)(n,o)&&(o[n]=r[n]);return o})),Hn=f((function e(t,r,n){return Vn((function(r,n,o){return ct(n)&&ct(o)?e(t,n,o):t(r,n,o)}),r,n)})),Wn=(0,a.Z)((function(e,t){return Hn((function(e,t,r){return t}),e,t)})),zn=(0,a.Z)((function(e,t){return Hn((function(e,t,r){return r}),e,t)})),qn=f((function(e,t,r){return Hn((function(t,r,n){return e(r,n)}),t,r)})),Yn=(0,a.Z)((function(e,t){return an({},t,e)})),Zn=(0,a.Z)((function(e,t){return an({},e,t)})),Qn=f((function(e,t,r){return Vn((function(t,r,n){return e(r,n)}),t,r)})),Xn=(0,a.Z)((function(e,t){return t<e?t:e})),Jn=f((function(e,t,r){return e(r)<e(t)?r:t})),eo=(0,a.Z)((function(e,t){return e%t})),to=f((function(e,t,r){var n=r.length,o=r.slice(),i=e<0?n+e:e,a=t<0?n+t:t,s=o.splice(i,1);return i<0||i>=r.length||a<0||a>=r.length?r:[].concat(o.slice(0,a)).concat(s).concat(o.slice(a,r.length))})),ro=(0,a.Z)((function(e,t){return e*t})),no=(0,u.Z)((function(e){return-e})),oo=(0,a.Z)((function(e,t){return I(at(e),t)})),io=(0,u.Z)((function(e){return m(e<0?1:e+1,(function(){return $(e,arguments)}))})),ao=f((function(e,t,r){return e(t(r))}));const so=(0,u.Z)((function(e){return[e]}));var co=(0,a.Z)((function(e,t){for(var r={},n={},o=0,i=e.length;o<i;)n[e[o]]=1,o+=1;for(var a in t)n.hasOwnProperty(a)||(r[a]=t[a]);return r}));const uo=co,lo=(0,u.Z)((function(e){var t,r=!1;return d(e.length,(function(){return r?t:(r=!0,t=e.apply(this,arguments))}))}));function po(e,t){if(null==t||!Ee(t.then))throw new TypeError("`"+e+"` expected a Promise, received "+mt(t,[]))}const mo=(0,a.Z)((function(e,t){return po("otherwise",t),t.then(null,e)}));var go=function(e){return{value:e,map:function(t){return go(t(e))}}},fo=f((function(e,t,r){return e((function(e){return go(t(e))}))(r).value}));const So=fo,ho=(0,a.Z)((function(e,t){return[e,t]}));function yo(e){return(0,a.Z)((function(t,r){return d(Math.max(0,t.length-r.length),(function(){return t.apply(this,e(r,arguments))}))}))}const vo=yo(c),Eo=yo(Pr(c)),Ao=En([lt,pt]),_o=f((function(e,t,r){return(0,et.Z)(K(e,r),t)})),To=f((function(e,t,r){return wt(e,K(t,r))})),Io=f((function(e,t,r){return e(K(t,r))})),bo=(0,a.Z)((function(e,t){for(var r={},n=0;n<e.length;)e[n]in t&&(r[e[n]]=t[e[n]]),n+=1;return r})),wo=(0,a.Z)((function(e,t){for(var r={},n=0,o=e.length;n<o;){var i=e[n];r[i]=t[i],n+=1}return r}));var Co=(0,a.Z)((function(e,t){var r={};for(var n in t)e(t[n],n,t)&&(r[n]=t[n]);return r}));const Do=Co;function Oo(){if(0===arguments.length)throw new Error("pipeK requires at least one argument");return He.apply(this,Ke(arguments))}const Po=(0,a.Z)((function(e,t){return c([e],t)})),No=W(ro,1),Ro=(0,a.Z)((function(e,t){return m(t.length,(function(){for(var r=[],n=0;n<t.length;)r.push(t[n].call(this,arguments[n])),n+=1;return e.apply(this,r.concat(Array.prototype.slice.call(arguments,t.length)))}))})),Mo=Ro(w,[wo,Qe]),Lo=f((function(e,t,r){return(0,et.Z)(t,r[e])}));var Uo=f((function(e,t,r){return hn(e,r[t])}));const ko=Uo,Fo=f((function(e,t,r){return To(e,[t],r)})),Bo=f((function(e,t,r){return e(r[t])})),Go=(0,a.Z)((function(e,t){return e.map((function(e){return K([e],t)}))})),xo=(0,a.Z)((function(e,t){if(!In(e)||!In(t))throw new TypeError("Both arguments to range must be numbers");for(var r=[],n=e;n<t;)r.push(n),n+=1;return r})),$o=f((function(e,t,r){for(var n=r.length-1;n>=0;)t=e(r[n],t),n-=1;return t})),jo=p(4,[],(function(e,t,r,n){return U((function(r,n){return e(r,n)?t(r,n):E(r)}),r,n)})),Ko=(0,u.Z)(E),Vo=(0,a.Z)((function(e,t){var r,n=Number(t),o=0;if(n<0||isNaN(n))throw new RangeError("n must be a non-negative number");for(r=new Array(n);o<n;)r[o]=e(o),o+=1;return r})),Ho=(0,a.Z)((function(e,t){return Vo(q(e),t)})),Wo=f((function(e,t,r){return r.replace(e,t)})),zo=f((function(e,t,r){for(var n=0,o=r.length,i=[t];n<o;)t=e(t,r[n]),i[n+1]=t,n+=1;return i}));var qo=(0,a.Z)((function(e,t){return"function"==typeof t.sequence?t.sequence(e):$o((function(e,t){return ee(G(Po,e),t)}),e([]),t)}));const Yo=qo;var Zo=f((function(e,t,r){return So(e,q(t),r)}));const Qo=Zo;var Xo=(0,a.Z)((function(e,t){return Array.prototype.slice.call(t,0).sort(e)}));const Jo=Xo,ei=(0,a.Z)((function(e,t){return Array.prototype.slice.call(t,0).sort((function(t,r){var n=e(t),o=e(r);return n<o?-1:n>o?1:0}))})),ti=(0,a.Z)((function(e,t){return Array.prototype.slice.call(t,0).sort((function(t,r){for(var n=0,o=0;0===n&&o<e.length;)n=e[o](t,r),o+=1;return n}))})),ri=Sn(1,"split"),ni=(0,a.Z)((function(e,t){return[xe(0,e,t),xe(e,bn(t),t)]})),oi=(0,a.Z)((function(e,t){if(e<=0)throw new Error("First argument to splitEvery must be a positive integer");for(var r=[],n=0;n<t.length;)r.push(xe(n,n+=e,t));return r})),ii=(0,a.Z)((function(e,t){for(var r=0,n=t.length,o=[];r<n&&!e(t[r]);)o.push(t[r]),r+=1;return[o,Array.prototype.slice.call(t,r)]})),ai=(0,a.Z)((function(e,t){return(0,et.Z)(Ht(e.length,t),e)})),si=(0,a.Z)((function(e,t){return Number(e)-Number(t)})),ci=(0,a.Z)((function(e,t){return ft(Pt(e,t),Pt(t,e))})),ui=f((function(e,t,r){return ft(Rt(e,t,r),Rt(e,r,t))})),di=(0,a.Z)((function(e,t){for(var r=t.length-1;r>=0&&e(t[r]);)r-=1;return xe(r+1,1/0,t)}));var li=function(){function e(e,t){this.xf=t,this.f=e}return e.prototype["@@transducer/init"]=A.init,e.prototype["@@transducer/result"]=A.result,e.prototype["@@transducer/step"]=function(e,t){return this.f(t)?this.xf["@@transducer/step"](e,t):E(e)},e}();const pi=(0,a.Z)((function(e,t){return new li(e,t)})),mi=(0,a.Z)(v(["takeWhile"],pi,(function(e,t){for(var r=0,n=t.length;r<n&&e(t[r]);)r+=1;return xe(0,r,t)})));var gi=function(){function e(e,t){this.xf=t,this.f=e}return e.prototype["@@transducer/init"]=A.init,e.prototype["@@transducer/result"]=A.result,e.prototype["@@transducer/step"]=function(e,t){return this.f(t),this.xf["@@transducer/step"](e,t)},e}();const fi=(0,a.Z)((function(e,t){return new gi(e,t)})),Si=(0,a.Z)(v([],fi,(function(e,t){return e(t),t}))),hi=(0,a.Z)((function(e,t){if(r=e,"[object RegExp]"!==Object.prototype.toString.call(r))throw new TypeError("‘test’ requires a value of type RegExp as its first argument; received "+gt(e));var r;return Ne(e).test(t)})),yi=(0,a.Z)((function(e,t){return po("andThen",t),t.then(e)})),vi=Sn(0,"toLowerCase");var Ei=(0,u.Z)((function(e){var t=[];for(var r in e)(0,ge.Z)(r,e)&&(t[t.length]=[r,e[r]]);return t}));const Ai=Ei;var _i=(0,u.Z)((function(e){var t=[];for(var r in e)t[t.length]=[r,e[r]];return t}));const Ti=_i,Ii=Sn(0,"toUpperCase"),bi=m(4,(function(e,t,r,n){return U(e("function"==typeof t?P(t):t),r,n)})),wi=(0,u.Z)((function(e){for(var t=0,r=[];t<e.length;){for(var n=e[t],o=0;o<n.length;)void 0===r[o]&&(r[o]=[]),r[o].push(n[o]),o+=1;t+=1}return r}));var Ci=f((function(e,t,r){return"function"==typeof r["fantasy-land/traverse"]?r["fantasy-land/traverse"](t,e):Yo(e,G(t,r))}));const Di=Ci;var Oi="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff";const Pi="function"==typeof String.prototype.trim&&!Oi.trim()&&"​".trim()?(0,u.Z)((function(e){return e.trim()})):(0,u.Z)((function(e){var t=new RegExp("^["+Oi+"]["+Oi+"]*"),r=new RegExp("["+Oi+"]["+Oi+"]*$");return e.replace(t,"").replace(r,"")})),Ni=(0,a.Z)((function(e,t){return d(e.length,(function(){try{return e.apply(this,arguments)}catch(e){return t.apply(this,c([e],arguments))}}))})),Ri=(0,u.Z)((function(e){return function(){return e(Array.prototype.slice.call(arguments,0))}})),Mi=(0,u.Z)((function(e){return ye(1,e)})),Li=(0,a.Z)((function(e,t){return m(e,(function(){for(var r,n=1,o=t,i=0;n<=e&&"function"==typeof o;)r=n===e?arguments.length:i+o.length,o=o.apply(this,Array.prototype.slice.call(arguments,i,r)),n+=1,i=r;return o}))}));var Ui=(0,a.Z)((function(e,t){for(var r=e(t),n=[];r&&r.length;)n[n.length]=r[0],r=e(r[1]);return n}));const ki=Ui,Fi=(0,a.Z)(Ve(rn,c)),Bi=(0,a.Z)((function(e,t){for(var r,n=0,o=t.length,i=[];n<o;)r=t[n],(0,Nt.Z)(e,r,i)||(i[i.length]=r),n+=1;return i})),Gi=f((function(e,t,r){return Bi(e,c(t,r))})),xi=f((function(e,t,r){return e(r)?r:t(r)})),$i=De(Ze);var ji=f((function(e,t,r){for(var n=r;!e(n);)n=t(n);return n}));const Ki=ji;var Vi=(0,u.Z)((function(e){var t,r=[];for(t in e)r[r.length]=e[t];return r}));const Hi=Vi;var Wi=function(e){return{value:e,"fantasy-land/map":function(){return this}}},zi=(0,a.Z)((function(e,t){return e(Wi)(t).value}));const qi=zi,Yi=f((function(e,t,r){return e(r)?t(r):r}));var Zi=(0,a.Z)((function(e,t){for(var r in e)if((0,ge.Z)(r,e)&&!e[r](t[r]))return!1;return!0}));const Qi=Zi,Xi=(0,a.Z)((function(e,t){return Qi(G(et.Z,e),t)})),Ji=(0,a.Z)((function(e,t){return pt(Pr(rt)(e),t)})),ea=(0,a.Z)((function(e,t){return Boolean(!e^!t)})),ta=(0,a.Z)((function(e,t){for(var r,n=0,o=e.length,i=t.length,a=[];n<o;){for(r=0;r<i;)a[a.length]=[e[n],t[r]],r+=1;n+=1}return a})),ra=(0,a.Z)((function(e,t){for(var r=[],n=0,o=Math.min(e.length,t.length);n<o;)r[n]=[e[n],t[n]],n+=1;return r}));var na=(0,a.Z)((function(e,t){for(var r=0,n=Math.min(e.length,t.length),o={};r<n;)o[e[r]]=t[r],r+=1;return o}));const oa=na,ia=f((function(e,t,r){for(var n=[],o=0,i=Math.min(t.length,r.length);o<i;)n[o]=e(t[o],r[o]),o+=1;return n})),aa=(0,u.Z)((function(e){return m(e.length,(function(){var t=arguments;return function(){return e.apply(this,t)}}))}))},84801:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.createFilter=m,t.createWhitelistFilter=function(e,t,r){return m(e,t,r,"whitelist")},t.createBlacklistFilter=function(e,t,r){return m(e,t,r,"blacklist")},t.persistFilter=f;var o=r(44602),i=p(r(56325)),a=p(r(49345)),s=p(r(72291)),c=p(r(86328)),u=p(r(38582)),d=p(r(56358)),l=p(r(80022));function p(e){return e&&e.__esModule?e:{default:e}}function m(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"whitelist";return(0,o.createTransform)((function(e,r){return t?f(e,t,n):e}),(function(e,t){return r?f(e,r,n):e}),{whitelist:[e]})}function g(e,t){var r=e.path,n=e.filterFunction,o=void 0===n?function(){return!0}:n,a=(0,i.default)(t,r,t);return a instanceof Array?a.filter(o):(0,c.default)(a,o)}function f(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"whitelist",o={};return"string"==typeof t&&(t=[t]),"whitelist"===r?t.forEach((function(t){if("object"!==(void 0===t?"undefined":n(t))||t instanceof Array){var r=(0,i.default)(e,t);void 0!==r&&(0,a.default)(o,t,r)}else{var s=g(t,e);(0,u.default)(s)||(0,a.default)(o,t.path,s)}})):"blacklist"===r?(o=(0,l.default)(e),t.forEach((function(t){if("object"!==(void 0===t?"undefined":n(t))||t instanceof Array)void 0!==(0,i.default)(e,t)&&(0,s.default)(o,t);else{var r=g(t,e);(0,u.default)(r)?o=r:r instanceof Array?(0,a.default)(o,t.path,(0,i.default)(o,t.path,o).filter((function(e){return!1}))):(0,d.default)(r,(function(e,r){(0,s.default)(o,t.path+"["+r+"]")}))}}))):o=e,o}t.default=m},44602:(e,t,r)=>{"use strict";r.r(t),r.d(t,{DEFAULT_VERSION:()=>d,FLUSH:()=>o,KEY_PREFIX:()=>n,PAUSE:()=>a,PERSIST:()=>s,PURGE:()=>c,REGISTER:()=>u,REHYDRATE:()=>i,createMigrate:()=>x,createPersistoid:()=>f,createTransform:()=>$,getStoredState:()=>h,persistCombineReducers:()=>R,persistReducer:()=>b,persistStore:()=>G,purgeStoredState:()=>v});var n="persist:",o="persist/FLUSH",i="persist/REHYDRATE",a="persist/PAUSE",s="persist/PERSIST",c="persist/PURGE",u="persist/REGISTER",d=-1;function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function p(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function m(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function g(e,t,r,n){n.debug;var o=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?p(r,!0).forEach((function(t){m(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},r);return e&&"object"===l(e)&&Object.keys(e).forEach((function(n){"_persist"!==n&&t[n]===r[n]&&(o[n]=e[n])})),o}function f(e){var t,r=e.blacklist||null,o=e.whitelist||null,i=e.transforms||[],a=e.throttle||0,s="".concat(void 0!==e.keyPrefix?e.keyPrefix:n).concat(e.key),c=e.storage;t=!1===e.serialize?function(e){return e}:"function"==typeof e.serialize?e.serialize:S;var u=e.writeFailHandler||null,d={},l={},p=[],m=null,g=null;function f(){if(0===p.length)return m&&clearInterval(m),void(m=null);var e=p.shift(),r=i.reduce((function(t,r){return r.in(t,e,d)}),d[e]);if(void 0!==r)try{l[e]=t(r)}catch(e){console.error("redux-persist/createPersistoid: error serializing state",e)}else delete l[e];0===p.length&&(Object.keys(l).forEach((function(e){void 0===d[e]&&delete l[e]})),g=c.setItem(s,t(l)).catch(y))}function h(e){return!(o&&-1===o.indexOf(e)&&"_persist"!==e||r&&-1!==r.indexOf(e))}function y(e){u&&u(e)}return{update:function(e){Object.keys(e).forEach((function(t){h(t)&&d[t]!==e[t]&&-1===p.indexOf(t)&&p.push(t)})),Object.keys(d).forEach((function(t){void 0===e[t]&&h(t)&&-1===p.indexOf(t)&&void 0!==d[t]&&p.push(t)})),null===m&&(m=setInterval(f,a)),d=e},flush:function(){for(;0!==p.length;)f();return g||Promise.resolve()}}}function S(e){return JSON.stringify(e)}function h(e){var t,r=e.transforms||[],o="".concat(void 0!==e.keyPrefix?e.keyPrefix:n).concat(e.key),i=e.storage;return e.debug,t=!1===e.deserialize?function(e){return e}:"function"==typeof e.deserialize?e.deserialize:y,i.getItem(o).then((function(e){if(e)try{var n={},o=t(e);return Object.keys(o).forEach((function(e){n[e]=r.reduceRight((function(t,r){return r.out(t,e,o)}),t(o[e]))})),n}catch(e){throw e}}))}function y(e){return JSON.parse(e)}function v(e){var t=e.storage,r="".concat(void 0!==e.keyPrefix?e.keyPrefix:n).concat(e.key);return t.removeItem(r,E)}function E(e){}function A(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?A(r,!0).forEach((function(t){T(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):A(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function T(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var I=5e3;function b(e,t){var r=void 0!==e.version?e.version:d,n=(e.debug,void 0===e.stateReconciler?g:e.stateReconciler),u=e.getStoredState||h,l=void 0!==e.timeout?e.timeout:I,p=null,m=!1,S=!0,y=function(e){return e._persist.rehydrated&&p&&!S&&p.update(e),e};return function(d,g){var h=d||{},E=h._persist,A=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(h,["_persist"]);if(g.type===s){var T=!1,I=function(t,r){T||(g.rehydrate(e.key,t,r),T=!0)};if(l&&setTimeout((function(){!T&&I(void 0,new Error('redux-persist: persist timed out for persist key "'.concat(e.key,'"')))}),l),S=!1,p||(p=f(e)),E)return _({},t(A,g),{_persist:E});if("function"!=typeof g.rehydrate||"function"!=typeof g.register)throw new Error("redux-persist: either rehydrate or register is not a function on the PERSIST action. This can happen if the action is being replayed. This is an unexplored use case, please open an issue and we will figure out a resolution.");return g.register(e.key),u(e).then((function(t){(e.migrate||function(e,t){return Promise.resolve(e)})(t,r).then((function(e){I(e)}),(function(e){I(void 0,e)}))}),(function(e){I(void 0,e)})),_({},t(A,g),{_persist:{version:r,rehydrated:!1}})}if(g.type===c)return m=!0,g.result(v(e)),_({},t(A,g),{_persist:E});if(g.type===o)return g.result(p&&p.flush()),_({},t(A,g),{_persist:E});if(g.type===a)S=!0;else if(g.type===i){if(m)return _({},A,{_persist:_({},E,{rehydrated:!0})});if(g.key===e.key){var b=t(A,g),w=g.payload,C=_({},!1!==n&&void 0!==w?n(w,d,b,e):b,{_persist:_({},E,{rehydrated:!0})});return y(C)}}if(!E)return t(d,g);var D=t(A,g);return D===A?d:y(_({},D,{_persist:E}))}}var w=r(98160);function C(e){return C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},C(e)}function D(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function O(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?D(r,!0).forEach((function(t){P(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):D(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function P(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function N(e,t,r,n){n.debug;var o=O({},r);return e&&"object"===C(e)&&Object.keys(e).forEach((function(n){var i;"_persist"!==n&&t[n]===r[n]&&(null===(i=r[n])||Array.isArray(i)||"object"!==C(i)?o[n]=e[n]:o[n]=O({},o[n],{},e[n]))})),o}function R(e,t){return e.stateReconciler=void 0===e.stateReconciler?N:e.stateReconciler,b(e,(0,w.combineReducers)(t))}function M(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function L(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function U(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?L(r,!0).forEach((function(t){k(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):L(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function k(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var F={registry:[],bootstrapped:!1},B=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:F,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case u:return U({},e,{registry:[].concat(M(e.registry),[t.key])});case i:var r=e.registry.indexOf(t.key),n=M(e.registry);return n.splice(r,1),U({},e,{registry:n,bootstrapped:0===n.length});default:return e}};function G(e,t,r){var n=r||!1,d=(0,w.createStore)(B,F,t&&t.enhancer?t.enhancer:void 0),l=function(e){d.dispatch({type:u,key:e})},p=function(t,r,o){var a={type:i,payload:r,err:o,key:t};e.dispatch(a),d.dispatch(a),n&&m.getState().bootstrapped&&(n(),n=!1)},m=U({},d,{purge:function(){var t=[];return e.dispatch({type:c,result:function(e){t.push(e)}}),Promise.all(t)},flush:function(){var t=[];return e.dispatch({type:o,result:function(e){t.push(e)}}),Promise.all(t)},pause:function(){e.dispatch({type:a})},persist:function(){e.dispatch({type:s,register:l,rehydrate:p})}});return t&&t.manualPersist||m.persist(),m}function x(e,t){return(t||{}).debug,function(t,r){if(!t)return Promise.resolve(void 0);var n=t._persist&&void 0!==t._persist.version?t._persist.version:d;if(n===r)return Promise.resolve(t);if(n>r)return Promise.resolve(t);var o=Object.keys(e).map((function(e){return parseInt(e)})).filter((function(e){return r>=e&&e>n})).sort((function(e,t){return e-t}));try{var i=o.reduce((function(t,r){return e[r](t)}),t);return Promise.resolve(i)}catch(e){return Promise.reject(e)}}}function $(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.whitelist||null,o=r.blacklist||null;function i(e){return!(!n||-1!==n.indexOf(e))||!(!o||-1===o.indexOf(e))}return{in:function(t,r,n){return!i(r)&&e?e(t,r,n):t},out:function(e,r,n){return!i(r)&&t?t(e,r,n):e}}}},98160:(e,t,r)=>{"use strict";function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){n(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function a(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}r.r(t),r.d(t,{__DO_NOT_USE__ActionTypes:()=>u,applyMiddleware:()=>f,bindActionCreators:()=>m,combineReducers:()=>l,compose:()=>g,createStore:()=>d});var s="function"==typeof Symbol&&Symbol.observable||"@@observable",c=function(){return Math.random().toString(36).substring(7).split("").join(".")},u={INIT:"@@redux/INIT"+c(),REPLACE:"@@redux/REPLACE"+c(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+c()}};function d(e,t,r){var n;if("function"==typeof t&&"function"==typeof r||"function"==typeof r&&"function"==typeof arguments[3])throw new Error(a(0));if("function"==typeof t&&void 0===r&&(r=t,t=void 0),void 0!==r){if("function"!=typeof r)throw new Error(a(1));return r(d)(e,t)}if("function"!=typeof e)throw new Error(a(2));var o=e,i=t,c=[],l=c,p=!1;function m(){l===c&&(l=c.slice())}function g(){if(p)throw new Error(a(3));return i}function f(e){if("function"!=typeof e)throw new Error(a(4));if(p)throw new Error(a(5));var t=!0;return m(),l.push(e),function(){if(t){if(p)throw new Error(a(6));t=!1,m();var r=l.indexOf(e);l.splice(r,1),c=null}}}function S(e){if(!function(e){if("object"!=typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}(e))throw new Error(a(7));if(void 0===e.type)throw new Error(a(8));if(p)throw new Error(a(9));try{p=!0,i=o(i,e)}finally{p=!1}for(var t=c=l,r=0;r<t.length;r++)(0,t[r])();return e}return S({type:u.INIT}),(n={dispatch:S,subscribe:f,getState:g,replaceReducer:function(e){if("function"!=typeof e)throw new Error(a(10));o=e,S({type:u.REPLACE})}})[s]=function(){var e,t=f;return(e={subscribe:function(e){if("object"!=typeof e||null===e)throw new Error(a(11));function r(){e.next&&e.next(g())}return r(),{unsubscribe:t(r)}}})[s]=function(){return this},e},n}function l(e){for(var t=Object.keys(e),r={},n=0;n<t.length;n++){var o=t[n];"function"==typeof e[o]&&(r[o]=e[o])}var i,s=Object.keys(r);try{!function(e){Object.keys(e).forEach((function(t){var r=e[t];if(void 0===r(void 0,{type:u.INIT}))throw new Error(a(12));if(void 0===r(void 0,{type:u.PROBE_UNKNOWN_ACTION()}))throw new Error(a(13))}))}(r)}catch(e){i=e}return function(e,t){if(void 0===e&&(e={}),i)throw i;for(var n=!1,o={},c=0;c<s.length;c++){var u=s[c],d=r[u],l=e[u],p=d(l,t);if(void 0===p)throw t&&t.type,new Error(a(14));o[u]=p,n=n||p!==l}return(n=n||s.length!==Object.keys(e).length)?o:e}}function p(e,t){return function(){return t(e.apply(this,arguments))}}function m(e,t){if("function"==typeof e)return p(e,t);if("object"!=typeof e||null===e)throw new Error(a(16));var r={};for(var n in e){var o=e[n];"function"==typeof o&&(r[n]=p(o,t))}return r}function g(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce((function(e,t){return function(){return e(t.apply(void 0,arguments))}}))}function f(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(e){return function(){var r=e.apply(void 0,arguments),n=function(){throw new Error(a(15))},o={getState:r.getState,dispatch:function(){return n.apply(void 0,arguments)}},s=t.map((function(e){return e(o)}));return n=g.apply(void 0,s)(r.dispatch),i(i({},r),{},{dispatch:n})}}}},32034:(e,t,r)=>{"use strict";function n(e,t){return e===t}function o(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n,r=null,o=null;return function(){return function(e,t,r){if(null===t||null===r||t.length!==r.length)return!1;for(var n=t.length,o=0;o<n;o++)if(!e(t[o],r[o]))return!1;return!0}(t,r,arguments)||(o=e.apply(null,arguments)),r=arguments,o}}function i(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return function(){for(var t=arguments.length,n=Array(t),o=0;o<t;o++)n[o]=arguments[o];var i=0,a=n.pop(),s=function(e){var t=Array.isArray(e[0])?e[0]:e;if(!t.every((function(e){return"function"==typeof e}))){var r=t.map((function(e){return typeof e})).join(", ");throw new Error("Selector creators expect all input-selectors to be functions, instead received the following types: ["+r+"]")}return t}(n),c=e.apply(void 0,[function(){return i++,a.apply(null,arguments)}].concat(r)),u=e((function(){for(var e=[],t=s.length,r=0;r<t;r++)e.push(s[r].apply(null,arguments));return c.apply(null,e)}));return u.resultFunc=a,u.dependencies=s,u.recomputations=function(){return i},u.resetRecomputations=function(){return i=0},u}}r.r(t),r.d(t,{createSelector:()=>a,createSelectorCreator:()=>i,createStructuredSelector:()=>s,defaultMemoize:()=>o});var a=i(o);function s(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a;if("object"!=typeof e)throw new Error("createStructuredSelector expects first argument to be an object where each property is a selector, instead received a "+typeof e);var r=Object.keys(e);return t(r.map((function(t){return e[t]})),(function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((function(e,t,n){return e[r[n]]=t,e}),{})}))}},61465:(e,t,r)=>{var n=r(15313).Buffer;!function(e){e.parser=function(e,t){return new i(e,t)},e.SAXParser=i,e.SAXStream=s,e.createStream=function(e,t){return new s(e,t)},e.MAX_BUFFER_LENGTH=65536;var t,o=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];function i(t,r){if(!(this instanceof i))return new i(t,r);var n=this;!function(e){for(var t=0,r=o.length;t<r;t++)e[o[t]]=""}(n),n.q=n.c="",n.bufferCheckPosition=e.MAX_BUFFER_LENGTH,n.opt=r||{},n.opt.lowercase=n.opt.lowercase||n.opt.lowercasetags,n.looseCase=n.opt.lowercase?"toLowerCase":"toUpperCase",n.tags=[],n.closed=n.closedRoot=n.sawRoot=!1,n.tag=n.error=null,n.strict=!!t,n.noscript=!(!t&&!n.opt.noscript),n.state=b.BEGIN,n.strictEntities=n.opt.strictEntities,n.ENTITIES=n.strictEntities?Object.create(e.XML_ENTITIES):Object.create(e.ENTITIES),n.attribList=[],n.opt.xmlns&&(n.ns=Object.create(p)),n.trackPosition=!1!==n.opt.position,n.trackPosition&&(n.position=n.line=n.column=0),C(n,"onready")}e.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"],Object.create||(Object.create=function(e){function t(){}return t.prototype=e,new t}),Object.keys||(Object.keys=function(e){var t=[];for(var r in e)e.hasOwnProperty(r)&&t.push(r);return t}),i.prototype={end:function(){R(this)},write:function(t){var r=this;if(this.error)throw this.error;if(r.closed)return N(r,"Cannot write after close. Assign an onready handler.");if(null===t)return R(r);"object"==typeof t&&(t=t.toString());for(var n=0,i="";i=$(t,n++),r.c=i,i;)switch(r.trackPosition&&(r.position++,"\n"===i?(r.line++,r.column=0):r.column++),r.state){case b.BEGIN:if(r.state=b.BEGIN_WHITESPACE,"\ufeff"===i)continue;x(r,i);continue;case b.BEGIN_WHITESPACE:x(r,i);continue;case b.TEXT:if(r.sawRoot&&!r.closedRoot){for(var a=n-1;i&&"<"!==i&&"&"!==i;)(i=$(t,n++))&&r.trackPosition&&(r.position++,"\n"===i?(r.line++,r.column=0):r.column++);r.textNode+=t.substring(a,n-1)}"<"!==i||r.sawRoot&&r.closedRoot&&!r.strict?(h(i)||r.sawRoot&&!r.closedRoot||M(r,"Text data outside of root node."),"&"===i?r.state=b.TEXT_ENTITY:r.textNode+=i):(r.state=b.OPEN_WAKA,r.startTagPosition=r.position);continue;case b.SCRIPT:"<"===i?r.state=b.SCRIPT_ENDING:r.script+=i;continue;case b.SCRIPT_ENDING:"/"===i?r.state=b.CLOSE_TAG:(r.script+="<"+i,r.state=b.SCRIPT);continue;case b.OPEN_WAKA:if("!"===i)r.state=b.SGML_DECL,r.sgmlDecl="";else if(h(i));else if(E(m,i))r.state=b.OPEN_TAG,r.tagName=i;else if("/"===i)r.state=b.CLOSE_TAG,r.tagName="";else if("?"===i)r.state=b.PROC_INST,r.procInstName=r.procInstBody="";else{if(M(r,"Unencoded <"),r.startTagPosition+1<r.position){var s=r.position-r.startTagPosition;i=new Array(s).join(" ")+i}r.textNode+="<"+i,r.state=b.TEXT}continue;case b.SGML_DECL:(r.sgmlDecl+i).toUpperCase()===c?(D(r,"onopencdata"),r.state=b.CDATA,r.sgmlDecl="",r.cdata=""):r.sgmlDecl+i==="--"?(r.state=b.COMMENT,r.comment="",r.sgmlDecl=""):(r.sgmlDecl+i).toUpperCase()===u?(r.state=b.DOCTYPE,(r.doctype||r.sawRoot)&&M(r,"Inappropriately located doctype declaration"),r.doctype="",r.sgmlDecl=""):">"===i?(D(r,"onsgmldeclaration",r.sgmlDecl),r.sgmlDecl="",r.state=b.TEXT):y(i)?(r.state=b.SGML_DECL_QUOTED,r.sgmlDecl+=i):r.sgmlDecl+=i;continue;case b.SGML_DECL_QUOTED:i===r.q&&(r.state=b.SGML_DECL,r.q=""),r.sgmlDecl+=i;continue;case b.DOCTYPE:">"===i?(r.state=b.TEXT,D(r,"ondoctype",r.doctype),r.doctype=!0):(r.doctype+=i,"["===i?r.state=b.DOCTYPE_DTD:y(i)&&(r.state=b.DOCTYPE_QUOTED,r.q=i));continue;case b.DOCTYPE_QUOTED:r.doctype+=i,i===r.q&&(r.q="",r.state=b.DOCTYPE);continue;case b.DOCTYPE_DTD:r.doctype+=i,"]"===i?r.state=b.DOCTYPE:y(i)&&(r.state=b.DOCTYPE_DTD_QUOTED,r.q=i);continue;case b.DOCTYPE_DTD_QUOTED:r.doctype+=i,i===r.q&&(r.state=b.DOCTYPE_DTD,r.q="");continue;case b.COMMENT:"-"===i?r.state=b.COMMENT_ENDING:r.comment+=i;continue;case b.COMMENT_ENDING:"-"===i?(r.state=b.COMMENT_ENDED,r.comment=P(r.opt,r.comment),r.comment&&D(r,"oncomment",r.comment),r.comment=""):(r.comment+="-"+i,r.state=b.COMMENT);continue;case b.COMMENT_ENDED:">"!==i?(M(r,"Malformed comment"),r.comment+="--"+i,r.state=b.COMMENT):r.state=b.TEXT;continue;case b.CDATA:"]"===i?r.state=b.CDATA_ENDING:r.cdata+=i;continue;case b.CDATA_ENDING:"]"===i?r.state=b.CDATA_ENDING_2:(r.cdata+="]"+i,r.state=b.CDATA);continue;case b.CDATA_ENDING_2:">"===i?(r.cdata&&D(r,"oncdata",r.cdata),D(r,"onclosecdata"),r.cdata="",r.state=b.TEXT):"]"===i?r.cdata+="]":(r.cdata+="]]"+i,r.state=b.CDATA);continue;case b.PROC_INST:"?"===i?r.state=b.PROC_INST_ENDING:h(i)?r.state=b.PROC_INST_BODY:r.procInstName+=i;continue;case b.PROC_INST_BODY:if(!r.procInstBody&&h(i))continue;"?"===i?r.state=b.PROC_INST_ENDING:r.procInstBody+=i;continue;case b.PROC_INST_ENDING:">"===i?(D(r,"onprocessinginstruction",{name:r.procInstName,body:r.procInstBody}),r.procInstName=r.procInstBody="",r.state=b.TEXT):(r.procInstBody+="?"+i,r.state=b.PROC_INST_BODY);continue;case b.OPEN_TAG:E(g,i)?r.tagName+=i:(L(r),">"===i?F(r):"/"===i?r.state=b.OPEN_TAG_SLASH:(h(i)||M(r,"Invalid character in tag name"),r.state=b.ATTRIB));continue;case b.OPEN_TAG_SLASH:">"===i?(F(r,!0),B(r)):(M(r,"Forward-slash in opening tag not followed by >"),r.state=b.ATTRIB);continue;case b.ATTRIB:if(h(i))continue;">"===i?F(r):"/"===i?r.state=b.OPEN_TAG_SLASH:E(m,i)?(r.attribName=i,r.attribValue="",r.state=b.ATTRIB_NAME):M(r,"Invalid attribute name");continue;case b.ATTRIB_NAME:"="===i?r.state=b.ATTRIB_VALUE:">"===i?(M(r,"Attribute without value"),r.attribValue=r.attribName,k(r),F(r)):h(i)?r.state=b.ATTRIB_NAME_SAW_WHITE:E(g,i)?r.attribName+=i:M(r,"Invalid attribute name");continue;case b.ATTRIB_NAME_SAW_WHITE:if("="===i)r.state=b.ATTRIB_VALUE;else{if(h(i))continue;M(r,"Attribute without value"),r.tag.attributes[r.attribName]="",r.attribValue="",D(r,"onattribute",{name:r.attribName,value:""}),r.attribName="",">"===i?F(r):E(m,i)?(r.attribName=i,r.state=b.ATTRIB_NAME):(M(r,"Invalid attribute name"),r.state=b.ATTRIB)}continue;case b.ATTRIB_VALUE:if(h(i))continue;y(i)?(r.q=i,r.state=b.ATTRIB_VALUE_QUOTED):(M(r,"Unquoted attribute value"),r.state=b.ATTRIB_VALUE_UNQUOTED,r.attribValue=i);continue;case b.ATTRIB_VALUE_QUOTED:if(i!==r.q){"&"===i?r.state=b.ATTRIB_VALUE_ENTITY_Q:r.attribValue+=i;continue}k(r),r.q="",r.state=b.ATTRIB_VALUE_CLOSED;continue;case b.ATTRIB_VALUE_CLOSED:h(i)?r.state=b.ATTRIB:">"===i?F(r):"/"===i?r.state=b.OPEN_TAG_SLASH:E(m,i)?(M(r,"No whitespace between attributes"),r.attribName=i,r.attribValue="",r.state=b.ATTRIB_NAME):M(r,"Invalid attribute name");continue;case b.ATTRIB_VALUE_UNQUOTED:if(!v(i)){"&"===i?r.state=b.ATTRIB_VALUE_ENTITY_U:r.attribValue+=i;continue}k(r),">"===i?F(r):r.state=b.ATTRIB;continue;case b.CLOSE_TAG:if(r.tagName)">"===i?B(r):E(g,i)?r.tagName+=i:r.script?(r.script+="</"+r.tagName,r.tagName="",r.state=b.SCRIPT):(h(i)||M(r,"Invalid tagname in closing tag"),r.state=b.CLOSE_TAG_SAW_WHITE);else{if(h(i))continue;A(m,i)?r.script?(r.script+="</"+i,r.state=b.SCRIPT):M(r,"Invalid tagname in closing tag."):r.tagName=i}continue;case b.CLOSE_TAG_SAW_WHITE:if(h(i))continue;">"===i?B(r):M(r,"Invalid characters in closing tag");continue;case b.TEXT_ENTITY:case b.ATTRIB_VALUE_ENTITY_Q:case b.ATTRIB_VALUE_ENTITY_U:var d,l;switch(r.state){case b.TEXT_ENTITY:d=b.TEXT,l="textNode";break;case b.ATTRIB_VALUE_ENTITY_Q:d=b.ATTRIB_VALUE_QUOTED,l="attribValue";break;case b.ATTRIB_VALUE_ENTITY_U:d=b.ATTRIB_VALUE_UNQUOTED,l="attribValue"}";"===i?(r[l]+=G(r),r.entity="",r.state=d):E(r.entity.length?S:f,i)?r.entity+=i:(M(r,"Invalid character in entity name"),r[l]+="&"+r.entity+i,r.entity="",r.state=d);continue;default:throw new Error(r,"Unknown state: "+r.state)}return r.position>=r.bufferCheckPosition&&function(t){for(var r=Math.max(e.MAX_BUFFER_LENGTH,10),n=0,i=0,a=o.length;i<a;i++){var s=t[o[i]].length;if(s>r)switch(o[i]){case"textNode":O(t);break;case"cdata":D(t,"oncdata",t.cdata),t.cdata="";break;case"script":D(t,"onscript",t.script),t.script="";break;default:N(t,"Max buffer length exceeded: "+o[i])}n=Math.max(n,s)}var c=e.MAX_BUFFER_LENGTH-n;t.bufferCheckPosition=c+t.position}(r),r},resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){var e;O(e=this),""!==e.cdata&&(D(e,"oncdata",e.cdata),e.cdata=""),""!==e.script&&(D(e,"onscript",e.script),e.script="")}};try{t=r(96704).Stream}catch(e){t=function(){}}var a=e.EVENTS.filter((function(e){return"error"!==e&&"end"!==e}));function s(e,r){if(!(this instanceof s))return new s(e,r);t.apply(this),this._parser=new i(e,r),this.writable=!0,this.readable=!0;var n=this;this._parser.onend=function(){n.emit("end")},this._parser.onerror=function(e){n.emit("error",e),n._parser.error=null},this._decoder=null,a.forEach((function(e){Object.defineProperty(n,"on"+e,{get:function(){return n._parser["on"+e]},set:function(t){if(!t)return n.removeAllListeners(e),n._parser["on"+e]=t,t;n.on(e,t)},enumerable:!0,configurable:!1})}))}s.prototype=Object.create(t.prototype,{constructor:{value:s}}),s.prototype.write=function(e){if("function"==typeof n&&"function"==typeof n.isBuffer&&n.isBuffer(e)){if(!this._decoder){var t=r(36835).s;this._decoder=new t("utf8")}e=this._decoder.write(e)}return this._parser.write(e.toString()),this.emit("data",e),!0},s.prototype.end=function(e){return e&&e.length&&this.write(e),this._parser.end(),!0},s.prototype.on=function(e,r){var n=this;return n._parser["on"+e]||-1===a.indexOf(e)||(n._parser["on"+e]=function(){var t=1===arguments.length?[arguments[0]]:Array.apply(null,arguments);t.splice(0,0,e),n.emit.apply(n,t)}),t.prototype.on.call(n,e,r)};var c="[CDATA[",u="DOCTYPE",d="http://www.w3.org/XML/1998/namespace",l="http://www.w3.org/2000/xmlns/",p={xml:d,xmlns:l},m=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,g=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/,f=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,S=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/;function h(e){return" "===e||"\n"===e||"\r"===e||"\t"===e}function y(e){return'"'===e||"'"===e}function v(e){return">"===e||h(e)}function E(e,t){return e.test(t)}function A(e,t){return!E(e,t)}var _,T,I,b=0;for(var w in e.STATE={BEGIN:b++,BEGIN_WHITESPACE:b++,TEXT:b++,TEXT_ENTITY:b++,OPEN_WAKA:b++,SGML_DECL:b++,SGML_DECL_QUOTED:b++,DOCTYPE:b++,DOCTYPE_QUOTED:b++,DOCTYPE_DTD:b++,DOCTYPE_DTD_QUOTED:b++,COMMENT_STARTING:b++,COMMENT:b++,COMMENT_ENDING:b++,COMMENT_ENDED:b++,CDATA:b++,CDATA_ENDING:b++,CDATA_ENDING_2:b++,PROC_INST:b++,PROC_INST_BODY:b++,PROC_INST_ENDING:b++,OPEN_TAG:b++,OPEN_TAG_SLASH:b++,ATTRIB:b++,ATTRIB_NAME:b++,ATTRIB_NAME_SAW_WHITE:b++,ATTRIB_VALUE:b++,ATTRIB_VALUE_QUOTED:b++,ATTRIB_VALUE_CLOSED:b++,ATTRIB_VALUE_UNQUOTED:b++,ATTRIB_VALUE_ENTITY_Q:b++,ATTRIB_VALUE_ENTITY_U:b++,CLOSE_TAG:b++,CLOSE_TAG_SAW_WHITE:b++,SCRIPT:b++,SCRIPT_ENDING:b++},e.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},e.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(e.ENTITIES).forEach((function(t){var r=e.ENTITIES[t],n="number"==typeof r?String.fromCharCode(r):r;e.ENTITIES[t]=n})),e.STATE)e.STATE[e.STATE[w]]=w;function C(e,t,r){e[t]&&e[t](r)}function D(e,t,r){e.textNode&&O(e),C(e,t,r)}function O(e){e.textNode=P(e.opt,e.textNode),e.textNode&&C(e,"ontext",e.textNode),e.textNode=""}function P(e,t){return e.trim&&(t=t.trim()),e.normalize&&(t=t.replace(/\s+/g," ")),t}function N(e,t){return O(e),e.trackPosition&&(t+="\nLine: "+e.line+"\nColumn: "+e.column+"\nChar: "+e.c),t=new Error(t),e.error=t,C(e,"onerror",t),e}function R(e){return e.sawRoot&&!e.closedRoot&&M(e,"Unclosed root tag"),e.state!==b.BEGIN&&e.state!==b.BEGIN_WHITESPACE&&e.state!==b.TEXT&&N(e,"Unexpected end"),O(e),e.c="",e.closed=!0,C(e,"onend"),i.call(e,e.strict,e.opt),e}function M(e,t){if("object"!=typeof e||!(e instanceof i))throw new Error("bad call to strictFail");e.strict&&N(e,t)}function L(e){e.strict||(e.tagName=e.tagName[e.looseCase]());var t=e.tags[e.tags.length-1]||e,r=e.tag={name:e.tagName,attributes:{}};e.opt.xmlns&&(r.ns=t.ns),e.attribList.length=0,D(e,"onopentagstart",r)}function U(e,t){var r=e.indexOf(":")<0?["",e]:e.split(":"),n=r[0],o=r[1];return t&&"xmlns"===e&&(n="xmlns",o=""),{prefix:n,local:o}}function k(e){if(e.strict||(e.attribName=e.attribName[e.looseCase]()),-1!==e.attribList.indexOf(e.attribName)||e.tag.attributes.hasOwnProperty(e.attribName))e.attribName=e.attribValue="";else{if(e.opt.xmlns){var t=U(e.attribName,!0),r=t.prefix,n=t.local;if("xmlns"===r)if("xml"===n&&e.attribValue!==d)M(e,"xml: prefix must be bound to "+d+"\nActual: "+e.attribValue);else if("xmlns"===n&&e.attribValue!==l)M(e,"xmlns: prefix must be bound to "+l+"\nActual: "+e.attribValue);else{var o=e.tag,i=e.tags[e.tags.length-1]||e;o.ns===i.ns&&(o.ns=Object.create(i.ns)),o.ns[n]=e.attribValue}e.attribList.push([e.attribName,e.attribValue])}else e.tag.attributes[e.attribName]=e.attribValue,D(e,"onattribute",{name:e.attribName,value:e.attribValue});e.attribName=e.attribValue=""}}function F(e,t){if(e.opt.xmlns){var r=e.tag,n=U(e.tagName);r.prefix=n.prefix,r.local=n.local,r.uri=r.ns[n.prefix]||"",r.prefix&&!r.uri&&(M(e,"Unbound namespace prefix: "+JSON.stringify(e.tagName)),r.uri=n.prefix);var o=e.tags[e.tags.length-1]||e;r.ns&&o.ns!==r.ns&&Object.keys(r.ns).forEach((function(t){D(e,"onopennamespace",{prefix:t,uri:r.ns[t]})}));for(var i=0,a=e.attribList.length;i<a;i++){var s=e.attribList[i],c=s[0],u=s[1],d=U(c,!0),l=d.prefix,p=d.local,m=""===l?"":r.ns[l]||"",g={name:c,value:u,prefix:l,local:p,uri:m};l&&"xmlns"!==l&&!m&&(M(e,"Unbound namespace prefix: "+JSON.stringify(l)),g.uri=l),e.tag.attributes[c]=g,D(e,"onattribute",g)}e.attribList.length=0}e.tag.isSelfClosing=!!t,e.sawRoot=!0,e.tags.push(e.tag),D(e,"onopentag",e.tag),t||(e.noscript||"script"!==e.tagName.toLowerCase()?e.state=b.TEXT:e.state=b.SCRIPT,e.tag=null,e.tagName=""),e.attribName=e.attribValue="",e.attribList.length=0}function B(e){if(!e.tagName)return M(e,"Weird empty close tag."),e.textNode+="</>",void(e.state=b.TEXT);if(e.script){if("script"!==e.tagName)return e.script+="</"+e.tagName+">",e.tagName="",void(e.state=b.SCRIPT);D(e,"onscript",e.script),e.script=""}var t=e.tags.length,r=e.tagName;e.strict||(r=r[e.looseCase]());for(var n=r;t--&&e.tags[t].name!==n;)M(e,"Unexpected close tag");if(t<0)return M(e,"Unmatched closing tag: "+e.tagName),e.textNode+="</"+e.tagName+">",void(e.state=b.TEXT);e.tagName=r;for(var o=e.tags.length;o-- >t;){var i=e.tag=e.tags.pop();e.tagName=e.tag.name,D(e,"onclosetag",e.tagName);var a={};for(var s in i.ns)a[s]=i.ns[s];var c=e.tags[e.tags.length-1]||e;e.opt.xmlns&&i.ns!==c.ns&&Object.keys(i.ns).forEach((function(t){var r=i.ns[t];D(e,"onclosenamespace",{prefix:t,uri:r})}))}0===t&&(e.closedRoot=!0),e.tagName=e.attribValue=e.attribName="",e.attribList.length=0,e.state=b.TEXT}function G(e){var t,r=e.entity,n=r.toLowerCase(),o="";return e.ENTITIES[r]?e.ENTITIES[r]:e.ENTITIES[n]?e.ENTITIES[n]:("#"===(r=n).charAt(0)&&("x"===r.charAt(1)?(r=r.slice(2),o=(t=parseInt(r,16)).toString(16)):(r=r.slice(1),o=(t=parseInt(r,10)).toString(10))),r=r.replace(/^0+/,""),isNaN(t)||o.toLowerCase()!==r?(M(e,"Invalid character entity"),"&"+e.entity+";"):String.fromCodePoint(t))}function x(e,t){"<"===t?(e.state=b.OPEN_WAKA,e.startTagPosition=e.position):h(t)||(M(e,"Non-whitespace before first tag."),e.textNode=t,e.state=b.TEXT)}function $(e,t){var r="";return t<e.length&&(r=e.charAt(t)),r}b=e.STATE,String.fromCodePoint||(_=String.fromCharCode,T=Math.floor,I=function(){var e,t,r=[],n=-1,o=arguments.length;if(!o)return"";for(var i="";++n<o;){var a=Number(arguments[n]);if(!isFinite(a)||a<0||a>1114111||T(a)!==a)throw RangeError("Invalid code point: "+a);a<=65535?r.push(a):(e=55296+((a-=65536)>>10),t=a%1024+56320,r.push(e,t)),(n+1===o||r.length>16384)&&(i+=_.apply(null,r),r.length=0)}return i},Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:I,configurable:!0,writable:!0}):String.fromCodePoint=I)}(t)},79112:e=>{"use strict";e.exports=function(e){return encodeURIComponent(e).replace(/[!'()*]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()}))}},51121:(e,t,r)=>{"use strict";var n=r(27377),o=r(52239);function i(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}t.parse=v,t.resolve=function(e,t){return v(e,!1,!0).resolve(t)},t.resolveObject=function(e,t){return e?v(e,!1,!0).resolveObject(t):t},t.format=function(e){return o.isString(e)&&(e=v(e)),e instanceof i?e.format():i.prototype.format.call(e)},t.Url=i;var a=/^([a-z0-9.+-]+:)/i,s=/:[0-9]*$/,c=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,u=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),d=["'"].concat(u),l=["%","/","?",";","#"].concat(d),p=["/","?","#"],m=/^[+a-z0-9A-Z_-]{0,63}$/,g=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,f={javascript:!0,"javascript:":!0},S={javascript:!0,"javascript:":!0},h={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},y=r(3048);function v(e,t,r){if(e&&o.isObject(e)&&e instanceof i)return e;var n=new i;return n.parse(e,t,r),n}i.prototype.parse=function(e,t,r){if(!o.isString(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var i=e.indexOf("?"),s=-1!==i&&i<e.indexOf("#")?"?":"#",u=e.split(s);u[0]=u[0].replace(/\\/g,"/");var v=e=u.join(s);if(v=v.trim(),!r&&1===e.split("#").length){var E=c.exec(v);if(E)return this.path=v,this.href=v,this.pathname=E[1],E[2]?(this.search=E[2],this.query=t?y.parse(this.search.substr(1)):this.search.substr(1)):t&&(this.search="",this.query={}),this}var A=a.exec(v);if(A){var _=(A=A[0]).toLowerCase();this.protocol=_,v=v.substr(A.length)}if(r||A||v.match(/^\/\/[^@\/]+@[^@\/]+/)){var T="//"===v.substr(0,2);!T||A&&S[A]||(v=v.substr(2),this.slashes=!0)}if(!S[A]&&(T||A&&!h[A])){for(var I,b,w=-1,C=0;C<p.length;C++)-1!==(D=v.indexOf(p[C]))&&(-1===w||D<w)&&(w=D);for(-1!==(b=-1===w?v.lastIndexOf("@"):v.lastIndexOf("@",w))&&(I=v.slice(0,b),v=v.slice(b+1),this.auth=decodeURIComponent(I)),w=-1,C=0;C<l.length;C++){var D;-1!==(D=v.indexOf(l[C]))&&(-1===w||D<w)&&(w=D)}-1===w&&(w=v.length),this.host=v.slice(0,w),v=v.slice(w),this.parseHost(),this.hostname=this.hostname||"";var O="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!O)for(var P=this.hostname.split(/\./),N=(C=0,P.length);C<N;C++){var R=P[C];if(R&&!R.match(m)){for(var M="",L=0,U=R.length;L<U;L++)R.charCodeAt(L)>127?M+="x":M+=R[L];if(!M.match(m)){var k=P.slice(0,C),F=P.slice(C+1),B=R.match(g);B&&(k.push(B[1]),F.unshift(B[2])),F.length&&(v="/"+F.join(".")+v),this.hostname=k.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),O||(this.hostname=n.toASCII(this.hostname));var G=this.port?":"+this.port:"",x=this.hostname||"";this.host=x+G,this.href+=this.host,O&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==v[0]&&(v="/"+v))}if(!f[_])for(C=0,N=d.length;C<N;C++){var $=d[C];if(-1!==v.indexOf($)){var j=encodeURIComponent($);j===$&&(j=escape($)),v=v.split($).join(j)}}var K=v.indexOf("#");-1!==K&&(this.hash=v.substr(K),v=v.slice(0,K));var V=v.indexOf("?");if(-1!==V?(this.search=v.substr(V),this.query=v.substr(V+1),t&&(this.query=y.parse(this.query)),v=v.slice(0,V)):t&&(this.search="",this.query={}),v&&(this.pathname=v),h[_]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){G=this.pathname||"";var H=this.search||"";this.path=G+H}return this.href=this.format(),this},i.prototype.format=function(){var e=this.auth||"";e&&(e=(e=encodeURIComponent(e)).replace(/%3A/i,":"),e+="@");var t=this.protocol||"",r=this.pathname||"",n=this.hash||"",i=!1,a="";this.host?i=e+this.host:this.hostname&&(i=e+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(i+=":"+this.port)),this.query&&o.isObject(this.query)&&Object.keys(this.query).length&&(a=y.stringify(this.query));var s=this.search||a&&"?"+a||"";return t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||h[t])&&!1!==i?(i="//"+(i||""),r&&"/"!==r.charAt(0)&&(r="/"+r)):i||(i=""),n&&"#"!==n.charAt(0)&&(n="#"+n),s&&"?"!==s.charAt(0)&&(s="?"+s),t+i+(r=r.replace(/[?#]/g,(function(e){return encodeURIComponent(e)})))+(s=s.replace("#","%23"))+n},i.prototype.resolve=function(e){return this.resolveObject(v(e,!1,!0)).format()},i.prototype.resolveObject=function(e){if(o.isString(e)){var t=new i;t.parse(e,!1,!0),e=t}for(var r=new i,n=Object.keys(this),a=0;a<n.length;a++){var s=n[a];r[s]=this[s]}if(r.hash=e.hash,""===e.href)return r.href=r.format(),r;if(e.slashes&&!e.protocol){for(var c=Object.keys(e),u=0;u<c.length;u++){var d=c[u];"protocol"!==d&&(r[d]=e[d])}return h[r.protocol]&&r.hostname&&!r.pathname&&(r.path=r.pathname="/"),r.href=r.format(),r}if(e.protocol&&e.protocol!==r.protocol){if(!h[e.protocol]){for(var l=Object.keys(e),p=0;p<l.length;p++){var m=l[p];r[m]=e[m]}return r.href=r.format(),r}if(r.protocol=e.protocol,e.host||S[e.protocol])r.pathname=e.pathname;else{for(var g=(e.pathname||"").split("/");g.length&&!(e.host=g.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==g[0]&&g.unshift(""),g.length<2&&g.unshift(""),r.pathname=g.join("/")}if(r.search=e.search,r.query=e.query,r.host=e.host||"",r.auth=e.auth,r.hostname=e.hostname||e.host,r.port=e.port,r.pathname||r.search){var f=r.pathname||"",y=r.search||"";r.path=f+y}return r.slashes=r.slashes||e.slashes,r.href=r.format(),r}var v=r.pathname&&"/"===r.pathname.charAt(0),E=e.host||e.pathname&&"/"===e.pathname.charAt(0),A=E||v||r.host&&e.pathname,_=A,T=r.pathname&&r.pathname.split("/")||[],I=(g=e.pathname&&e.pathname.split("/")||[],r.protocol&&!h[r.protocol]);if(I&&(r.hostname="",r.port=null,r.host&&(""===T[0]?T[0]=r.host:T.unshift(r.host)),r.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===g[0]?g[0]=e.host:g.unshift(e.host)),e.host=null),A=A&&(""===g[0]||""===T[0])),E)r.host=e.host||""===e.host?e.host:r.host,r.hostname=e.hostname||""===e.hostname?e.hostname:r.hostname,r.search=e.search,r.query=e.query,T=g;else if(g.length)T||(T=[]),T.pop(),T=T.concat(g),r.search=e.search,r.query=e.query;else if(!o.isNullOrUndefined(e.search))return I&&(r.hostname=r.host=T.shift(),(O=!!(r.host&&r.host.indexOf("@")>0)&&r.host.split("@"))&&(r.auth=O.shift(),r.host=r.hostname=O.shift())),r.search=e.search,r.query=e.query,o.isNull(r.pathname)&&o.isNull(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.href=r.format(),r;if(!T.length)return r.pathname=null,r.search?r.path="/"+r.search:r.path=null,r.href=r.format(),r;for(var b=T.slice(-1)[0],w=(r.host||e.host||T.length>1)&&("."===b||".."===b)||""===b,C=0,D=T.length;D>=0;D--)"."===(b=T[D])?T.splice(D,1):".."===b?(T.splice(D,1),C++):C&&(T.splice(D,1),C--);if(!A&&!_)for(;C--;C)T.unshift("..");!A||""===T[0]||T[0]&&"/"===T[0].charAt(0)||T.unshift(""),w&&"/"!==T.join("/").substr(-1)&&T.push("");var O,P=""===T[0]||T[0]&&"/"===T[0].charAt(0);return I&&(r.hostname=r.host=P?"":T.length?T.shift():"",(O=!!(r.host&&r.host.indexOf("@")>0)&&r.host.split("@"))&&(r.auth=O.shift(),r.host=r.hostname=O.shift())),(A=A||r.host&&T.length)&&!P&&T.unshift(""),T.length?r.pathname=T.join("/"):(r.pathname=null,r.path=null),o.isNull(r.pathname)&&o.isNull(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.auth=e.auth||r.auth,r.slashes=r.slashes||e.slashes,r.href=r.format(),r},i.prototype.parseHost=function(){var e=this.host,t=s.exec(e);t&&(":"!==(t=t[0])&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)}},52239:e=>{"use strict";e.exports={isString:function(e){return"string"==typeof e},isObject:function(e){return"object"==typeof e&&null!==e},isNull:function(e){return null===e},isNullOrUndefined:function(e){return null==e}}},28354:(e,t,r)=>{"use strict";r.r(t),r.d(t,{NIL:()=>C,parse:()=>l,stringify:()=>a.Z,v1:()=>u,v3:()=>_,v4:()=>T.Z,v5:()=>w,validate:()=>d.Z,version:()=>D});var n,o,i=r(16684),a=r(30254),s=0,c=0;const u=function(e,t,r){var u=t&&r||0,d=t||new Array(16),l=(e=e||{}).node||n,p=void 0!==e.clockseq?e.clockseq:o;if(null==l||null==p){var m=e.random||(e.rng||i.Z)();null==l&&(l=n=[1|m[0],m[1],m[2],m[3],m[4],m[5]]),null==p&&(p=o=16383&(m[6]<<8|m[7]))}var g=void 0!==e.msecs?e.msecs:Date.now(),f=void 0!==e.nsecs?e.nsecs:c+1,S=g-s+(f-c)/1e4;if(S<0&&void 0===e.clockseq&&(p=p+1&16383),(S<0||g>s)&&void 0===e.nsecs&&(f=0),f>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");s=g,c=f,o=p;var h=(1e4*(268435455&(g+=122192928e5))+f)%4294967296;d[u++]=h>>>24&255,d[u++]=h>>>16&255,d[u++]=h>>>8&255,d[u++]=255&h;var y=g/4294967296*1e4&268435455;d[u++]=y>>>8&255,d[u++]=255&y,d[u++]=y>>>24&15|16,d[u++]=y>>>16&255,d[u++]=p>>>8|128,d[u++]=255&p;for(var v=0;v<6;++v)d[u+v]=l[v];return t||(0,a.Z)(d)};var d=r(68317);const l=function(e){if(!(0,d.Z)(e))throw TypeError("Invalid UUID");var t,r=new Uint8Array(16);return r[0]=(t=parseInt(e.slice(0,8),16))>>>24,r[1]=t>>>16&255,r[2]=t>>>8&255,r[3]=255&t,r[4]=(t=parseInt(e.slice(9,13),16))>>>8,r[5]=255&t,r[6]=(t=parseInt(e.slice(14,18),16))>>>8,r[7]=255&t,r[8]=(t=parseInt(e.slice(19,23),16))>>>8,r[9]=255&t,r[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,r[11]=t/4294967296&255,r[12]=t>>>24&255,r[13]=t>>>16&255,r[14]=t>>>8&255,r[15]=255&t,r};var p="6ba7b810-9dad-11d1-80b4-00c04fd430c8",m="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function g(e,t,r){function n(e,n,o,i){if("string"==typeof e&&(e=function(e){e=unescape(encodeURIComponent(e));for(var t=[],r=0;r<e.length;++r)t.push(e.charCodeAt(r));return t}(e)),"string"==typeof n&&(n=l(n)),16!==n.length)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var s=new Uint8Array(16+e.length);if(s.set(n),s.set(e,n.length),(s=r(s))[6]=15&s[6]|t,s[8]=63&s[8]|128,o){i=i||0;for(var c=0;c<16;++c)o[i+c]=s[c];return o}return(0,a.Z)(s)}try{n.name=e}catch(e){}return n.DNS=p,n.URL=m,n}function f(e){return 14+(e+64>>>9<<4)+1}function S(e,t){var r=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(r>>16)<<16|65535&r}function h(e,t,r,n,o,i){return S((a=S(S(t,e),S(n,i)))<<(s=o)|a>>>32-s,r);var a,s}function y(e,t,r,n,o,i,a){return h(t&r|~t&n,e,t,o,i,a)}function v(e,t,r,n,o,i,a){return h(t&n|r&~n,e,t,o,i,a)}function E(e,t,r,n,o,i,a){return h(t^r^n,e,t,o,i,a)}function A(e,t,r,n,o,i,a){return h(r^(t|~n),e,t,o,i,a)}const _=g("v3",48,(function(e){if("string"==typeof e){var t=unescape(encodeURIComponent(e));e=new Uint8Array(t.length);for(var r=0;r<t.length;++r)e[r]=t.charCodeAt(r)}return function(e){for(var t=[],r=32*e.length,n="0123456789abcdef",o=0;o<r;o+=8){var i=e[o>>5]>>>o%32&255,a=parseInt(n.charAt(i>>>4&15)+n.charAt(15&i),16);t.push(a)}return t}(function(e,t){e[t>>5]|=128<<t%32,e[f(t)-1]=t;for(var r=1732584193,n=-271733879,o=-1732584194,i=271733878,a=0;a<e.length;a+=16){var s=r,c=n,u=o,d=i;r=y(r,n,o,i,e[a],7,-680876936),i=y(i,r,n,o,e[a+1],12,-389564586),o=y(o,i,r,n,e[a+2],17,606105819),n=y(n,o,i,r,e[a+3],22,-1044525330),r=y(r,n,o,i,e[a+4],7,-176418897),i=y(i,r,n,o,e[a+5],12,1200080426),o=y(o,i,r,n,e[a+6],17,-1473231341),n=y(n,o,i,r,e[a+7],22,-45705983),r=y(r,n,o,i,e[a+8],7,1770035416),i=y(i,r,n,o,e[a+9],12,-1958414417),o=y(o,i,r,n,e[a+10],17,-42063),n=y(n,o,i,r,e[a+11],22,-1990404162),r=y(r,n,o,i,e[a+12],7,1804603682),i=y(i,r,n,o,e[a+13],12,-40341101),o=y(o,i,r,n,e[a+14],17,-1502002290),r=v(r,n=y(n,o,i,r,e[a+15],22,1236535329),o,i,e[a+1],5,-165796510),i=v(i,r,n,o,e[a+6],9,-1069501632),o=v(o,i,r,n,e[a+11],14,643717713),n=v(n,o,i,r,e[a],20,-373897302),r=v(r,n,o,i,e[a+5],5,-701558691),i=v(i,r,n,o,e[a+10],9,38016083),o=v(o,i,r,n,e[a+15],14,-660478335),n=v(n,o,i,r,e[a+4],20,-405537848),r=v(r,n,o,i,e[a+9],5,568446438),i=v(i,r,n,o,e[a+14],9,-1019803690),o=v(o,i,r,n,e[a+3],14,-187363961),n=v(n,o,i,r,e[a+8],20,1163531501),r=v(r,n,o,i,e[a+13],5,-1444681467),i=v(i,r,n,o,e[a+2],9,-51403784),o=v(o,i,r,n,e[a+7],14,1735328473),r=E(r,n=v(n,o,i,r,e[a+12],20,-1926607734),o,i,e[a+5],4,-378558),i=E(i,r,n,o,e[a+8],11,-2022574463),o=E(o,i,r,n,e[a+11],16,1839030562),n=E(n,o,i,r,e[a+14],23,-35309556),r=E(r,n,o,i,e[a+1],4,-1530992060),i=E(i,r,n,o,e[a+4],11,1272893353),o=E(o,i,r,n,e[a+7],16,-155497632),n=E(n,o,i,r,e[a+10],23,-1094730640),r=E(r,n,o,i,e[a+13],4,681279174),i=E(i,r,n,o,e[a],11,-358537222),o=E(o,i,r,n,e[a+3],16,-722521979),n=E(n,o,i,r,e[a+6],23,76029189),r=E(r,n,o,i,e[a+9],4,-640364487),i=E(i,r,n,o,e[a+12],11,-421815835),o=E(o,i,r,n,e[a+15],16,530742520),r=A(r,n=E(n,o,i,r,e[a+2],23,-995338651),o,i,e[a],6,-198630844),i=A(i,r,n,o,e[a+7],10,1126891415),o=A(o,i,r,n,e[a+14],15,-1416354905),n=A(n,o,i,r,e[a+5],21,-57434055),r=A(r,n,o,i,e[a+12],6,1700485571),i=A(i,r,n,o,e[a+3],10,-1894986606),o=A(o,i,r,n,e[a+10],15,-1051523),n=A(n,o,i,r,e[a+1],21,-2054922799),r=A(r,n,o,i,e[a+8],6,1873313359),i=A(i,r,n,o,e[a+15],10,-30611744),o=A(o,i,r,n,e[a+6],15,-1560198380),n=A(n,o,i,r,e[a+13],21,1309151649),r=A(r,n,o,i,e[a+4],6,-145523070),i=A(i,r,n,o,e[a+11],10,-1120210379),o=A(o,i,r,n,e[a+2],15,718787259),n=A(n,o,i,r,e[a+9],21,-343485551),r=S(r,s),n=S(n,c),o=S(o,u),i=S(i,d)}return[r,n,o,i]}(function(e){if(0===e.length)return[];for(var t=8*e.length,r=new Uint32Array(f(t)),n=0;n<t;n+=8)r[n>>5]|=(255&e[n/8])<<n%32;return r}(e),8*e.length))}));var T=r(69183);function I(e,t,r,n){switch(e){case 0:return t&r^~t&n;case 1:case 3:return t^r^n;case 2:return t&r^t&n^r&n}}function b(e,t){return e<<t|e>>>32-t}const w=g("v5",80,(function(e){var t=[1518500249,1859775393,2400959708,3395469782],r=[1732584193,4023233417,2562383102,271733878,3285377520];if("string"==typeof e){var n=unescape(encodeURIComponent(e));e=[];for(var o=0;o<n.length;++o)e.push(n.charCodeAt(o))}else Array.isArray(e)||(e=Array.prototype.slice.call(e));e.push(128);for(var i=e.length/4+2,a=Math.ceil(i/16),s=new Array(a),c=0;c<a;++c){for(var u=new Uint32Array(16),d=0;d<16;++d)u[d]=e[64*c+4*d]<<24|e[64*c+4*d+1]<<16|e[64*c+4*d+2]<<8|e[64*c+4*d+3];s[c]=u}s[a-1][14]=8*(e.length-1)/Math.pow(2,32),s[a-1][14]=Math.floor(s[a-1][14]),s[a-1][15]=8*(e.length-1)&4294967295;for(var l=0;l<a;++l){for(var p=new Uint32Array(80),m=0;m<16;++m)p[m]=s[l][m];for(var g=16;g<80;++g)p[g]=b(p[g-3]^p[g-8]^p[g-14]^p[g-16],1);for(var f=r[0],S=r[1],h=r[2],y=r[3],v=r[4],E=0;E<80;++E){var A=Math.floor(E/20),_=b(f,5)+I(A,S,h,y)+v+t[A]+p[E]>>>0;v=y,y=h,h=b(S,30)>>>0,S=f,f=_}r[0]=r[0]+f>>>0,r[1]=r[1]+S>>>0,r[2]=r[2]+h>>>0,r[3]=r[3]+y>>>0,r[4]=r[4]+v>>>0}return[r[0]>>24&255,r[0]>>16&255,r[0]>>8&255,255&r[0],r[1]>>24&255,r[1]>>16&255,r[1]>>8&255,255&r[1],r[2]>>24&255,r[2]>>16&255,r[2]>>8&255,255&r[2],r[3]>>24&255,r[3]>>16&255,r[3]>>8&255,255&r[3],r[4]>>24&255,r[4]>>16&255,r[4]>>8&255,255&r[4]]})),C="00000000-0000-0000-0000-000000000000",D=function(e){if(!(0,d.Z)(e))throw TypeError("Invalid UUID");return parseInt(e.substr(14,1),16)}},88503:function(e){(function(){e.exports={Disconnected:1,Preceding:2,Following:4,Contains:8,ContainedBy:16,ImplementationSpecific:32}}).call(this)},64356:function(e){(function(){e.exports={Element:1,Attribute:2,Text:3,CData:4,EntityReference:5,EntityDeclaration:6,ProcessingInstruction:7,Comment:8,Document:9,DocType:10,DocumentFragment:11,NotationDeclaration:12,Declaration:201,Raw:202,AttributeDeclaration:203,ElementDeclaration:204,Dummy:205}}).call(this)},67479:function(e){(function(){var t,r,n,o,i,a,s,c={}.hasOwnProperty;t=function(e,...t){var r,n,o,a;if(i(Object.assign))Object.assign.apply(null,arguments);else for(r=0,o=t.length;r<o;r++)if(null!=(a=t[r]))for(n in a)c.call(a,n)&&(e[n]=a[n]);return e},i=function(e){return!!e&&"[object Function]"===Object.prototype.toString.call(e)},a=function(e){var t;return!!e&&("function"==(t=typeof e)||"object"===t)},n=function(e){return i(Array.isArray)?Array.isArray(e):"[object Array]"===Object.prototype.toString.call(e)},o=function(e){var t;if(n(e))return!e.length;for(t in e)if(c.call(e,t))return!1;return!0},s=function(e){var t,r;return a(e)&&(r=Object.getPrototypeOf(e))&&(t=r.constructor)&&"function"==typeof t&&t instanceof t&&Function.prototype.toString.call(t)===Function.prototype.toString.call(Object)},r=function(e){return i(e.valueOf)?e.valueOf():e},e.exports.assign=t,e.exports.isFunction=i,e.exports.isObject=a,e.exports.isArray=n,e.exports.isEmpty=o,e.exports.isPlainObject=s,e.exports.getValue=r}).call(this)},66149:function(e){(function(){e.exports={None:0,OpenTag:1,InsideTag:2,CloseTag:3}}).call(this)},85460:function(e,t,r){(function(){var t;t=r(64356),r(28352),e.exports=function(){class e{constructor(e,r,n){if(this.parent=e,this.parent&&(this.options=this.parent.options,this.stringify=this.parent.stringify),null==r)throw new Error("Missing attribute name. "+this.debugInfo(r));this.name=this.stringify.name(r),this.value=this.stringify.attValue(n),this.type=t.Attribute,this.isId=!1,this.schemaTypeInfo=null}clone(){return Object.create(this)}toString(e){return this.options.writer.attribute(this,this.options.writer.filterOptions(e))}debugInfo(e){return null==(e=e||this.name)?"parent: <"+this.parent.name+">":"attribute: {"+e+"}, parent: <"+this.parent.name+">"}isEqualNode(e){return e.namespaceURI===this.namespaceURI&&e.prefix===this.prefix&&e.localName===this.localName&&e.value===this.value}}return Object.defineProperty(e.prototype,"nodeType",{get:function(){return this.type}}),Object.defineProperty(e.prototype,"ownerElement",{get:function(){return this.parent}}),Object.defineProperty(e.prototype,"textContent",{get:function(){return this.value},set:function(e){return this.value=e||""}}),Object.defineProperty(e.prototype,"namespaceURI",{get:function(){return""}}),Object.defineProperty(e.prototype,"prefix",{get:function(){return""}}),Object.defineProperty(e.prototype,"localName",{get:function(){return this.name}}),Object.defineProperty(e.prototype,"specified",{get:function(){return!0}}),e}.call(this)}).call(this)},62207:function(e,t,r){(function(){var t,n;t=r(64356),n=r(51502),e.exports=class extends n{constructor(e,r){if(super(e),null==r)throw new Error("Missing CDATA text. "+this.debugInfo());this.name="#cdata-section",this.type=t.CData,this.value=this.stringify.cdata(r)}clone(){return Object.create(this)}toString(e){return this.options.writer.cdata(this,this.options.writer.filterOptions(e))}}}).call(this)},51502:function(e,t,r){(function(){var t;t=r(28352),e.exports=function(){class e extends t{constructor(e){super(e),this.value=""}clone(){return Object.create(this)}substringData(e,t){throw new Error("This DOM method is not implemented."+this.debugInfo())}appendData(e){throw new Error("This DOM method is not implemented."+this.debugInfo())}insertData(e,t){throw new Error("This DOM method is not implemented."+this.debugInfo())}deleteData(e,t){throw new Error("This DOM method is not implemented."+this.debugInfo())}replaceData(e,t,r){throw new Error("This DOM method is not implemented."+this.debugInfo())}isEqualNode(e){return!!super.isEqualNode(e)&&e.data===this.data}}return Object.defineProperty(e.prototype,"data",{get:function(){return this.value},set:function(e){return this.value=e||""}}),Object.defineProperty(e.prototype,"length",{get:function(){return this.value.length}}),Object.defineProperty(e.prototype,"textContent",{get:function(){return this.value},set:function(e){return this.value=e||""}}),e}.call(this)}).call(this)},32023:function(e,t,r){(function(){var t,n;t=r(64356),n=r(51502),e.exports=class extends n{constructor(e,r){if(super(e),null==r)throw new Error("Missing comment text. "+this.debugInfo());this.name="#comment",this.type=t.Comment,this.value=this.stringify.comment(r)}clone(){return Object.create(this)}toString(e){return this.options.writer.comment(this,this.options.writer.filterOptions(e))}}}).call(this)},58052:function(e,t,r){(function(){var t,n;t=r(43846),n=r(41601),e.exports=function(){class e{constructor(){this.defaultParams={"canonical-form":!1,"cdata-sections":!1,comments:!1,"datatype-normalization":!1,"element-content-whitespace":!0,entities:!0,"error-handler":new t,infoset:!0,"validate-if-schema":!1,namespaces:!0,"namespace-declarations":!0,"normalize-characters":!1,"schema-location":"","schema-type":"","split-cdata-sections":!0,validate:!1,"well-formed":!0},this.params=Object.create(this.defaultParams)}getParameter(e){return this.params.hasOwnProperty(e)?this.params[e]:null}canSetParameter(e,t){return!0}setParameter(e,t){return null!=t?this.params[e]=t:delete this.params[e]}}return Object.defineProperty(e.prototype,"parameterNames",{get:function(){return new n(Object.keys(this.defaultParams))}}),e}.call(this)}).call(this)},43846:function(e){(function(){e.exports=class{constructor(){}handleError(e){throw new Error(e)}}}).call(this)},44163:function(e){(function(){e.exports=class{hasFeature(e,t){return!0}createDocumentType(e,t,r){throw new Error("This DOM method is not implemented.")}createDocument(e,t,r){throw new Error("This DOM method is not implemented.")}createHTMLDocument(e){throw new Error("This DOM method is not implemented.")}getFeature(e,t){throw new Error("This DOM method is not implemented.")}}}).call(this)},41601:function(e){(function(){e.exports=function(){class e{constructor(e){this.arr=e||[]}item(e){return this.arr[e]||null}contains(e){return-1!==this.arr.indexOf(e)}}return Object.defineProperty(e.prototype,"length",{get:function(){return this.arr.length}}),e}.call(this)}).call(this)},89318:function(e,t,r){(function(){var t,n;n=r(28352),t=r(64356),e.exports=class extends n{constructor(e,r,n,o,i,a){if(super(e),null==r)throw new Error("Missing DTD element name. "+this.debugInfo());if(null==n)throw new Error("Missing DTD attribute name. "+this.debugInfo(r));if(!o)throw new Error("Missing DTD attribute type. "+this.debugInfo(r));if(!i)throw new Error("Missing DTD attribute default. "+this.debugInfo(r));if(0!==i.indexOf("#")&&(i="#"+i),!i.match(/^(#REQUIRED|#IMPLIED|#FIXED|#DEFAULT)$/))throw new Error("Invalid default value type; expected: #REQUIRED, #IMPLIED, #FIXED or #DEFAULT. "+this.debugInfo(r));if(a&&!i.match(/^(#FIXED|#DEFAULT)$/))throw new Error("Default value only applies to #FIXED or #DEFAULT. "+this.debugInfo(r));this.elementName=this.stringify.name(r),this.type=t.AttributeDeclaration,this.attributeName=this.stringify.name(n),this.attributeType=this.stringify.dtdAttType(o),a&&(this.defaultValue=this.stringify.dtdAttDefault(a)),this.defaultValueType=i}toString(e){return this.options.writer.dtdAttList(this,this.options.writer.filterOptions(e))}}}).call(this)},64677:function(e,t,r){(function(){var t,n;n=r(28352),t=r(64356),e.exports=class extends n{constructor(e,r,n){if(super(e),null==r)throw new Error("Missing DTD element name. "+this.debugInfo());n||(n="(#PCDATA)"),Array.isArray(n)&&(n="("+n.join(",")+")"),this.name=this.stringify.name(r),this.type=t.ElementDeclaration,this.value=this.stringify.dtdElementValue(n)}toString(e){return this.options.writer.dtdElement(this,this.options.writer.filterOptions(e))}}}).call(this)},88131:function(e,t,r){(function(){var t,n,o;({isObject:o}=r(67479)),n=r(28352),t=r(64356),e.exports=function(){class e extends n{constructor(e,r,n,i){if(super(e),null==n)throw new Error("Missing DTD entity name. "+this.debugInfo(n));if(null==i)throw new Error("Missing DTD entity value. "+this.debugInfo(n));if(this.pe=!!r,this.name=this.stringify.name(n),this.type=t.EntityDeclaration,o(i)){if(!i.pubID&&!i.sysID)throw new Error("Public and/or system identifiers are required for an external entity. "+this.debugInfo(n));if(i.pubID&&!i.sysID)throw new Error("System identifier is required for a public external entity. "+this.debugInfo(n));if(this.internal=!1,null!=i.pubID&&(this.pubID=this.stringify.dtdPubID(i.pubID)),null!=i.sysID&&(this.sysID=this.stringify.dtdSysID(i.sysID)),null!=i.nData&&(this.nData=this.stringify.dtdNData(i.nData)),this.pe&&this.nData)throw new Error("Notation declaration is not allowed in a parameter entity. "+this.debugInfo(n))}else this.value=this.stringify.dtdEntityValue(i),this.internal=!0}toString(e){return this.options.writer.dtdEntity(this,this.options.writer.filterOptions(e))}}return Object.defineProperty(e.prototype,"publicId",{get:function(){return this.pubID}}),Object.defineProperty(e.prototype,"systemId",{get:function(){return this.sysID}}),Object.defineProperty(e.prototype,"notationName",{get:function(){return this.nData||null}}),Object.defineProperty(e.prototype,"inputEncoding",{get:function(){return null}}),Object.defineProperty(e.prototype,"xmlEncoding",{get:function(){return null}}),Object.defineProperty(e.prototype,"xmlVersion",{get:function(){return null}}),e}.call(this)}).call(this)},70089:function(e,t,r){(function(){var t,n;n=r(28352),t=r(64356),e.exports=function(){class e extends n{constructor(e,r,n){if(super(e),null==r)throw new Error("Missing DTD notation name. "+this.debugInfo(r));if(!n.pubID&&!n.sysID)throw new Error("Public or system identifiers are required for an external entity. "+this.debugInfo(r));this.name=this.stringify.name(r),this.type=t.NotationDeclaration,null!=n.pubID&&(this.pubID=this.stringify.dtdPubID(n.pubID)),null!=n.sysID&&(this.sysID=this.stringify.dtdSysID(n.sysID))}toString(e){return this.options.writer.dtdNotation(this,this.options.writer.filterOptions(e))}}return Object.defineProperty(e.prototype,"publicId",{get:function(){return this.pubID}}),Object.defineProperty(e.prototype,"systemId",{get:function(){return this.sysID}}),e}.call(this)}).call(this)},65868:function(e,t,r){(function(){var t,n,o;({isObject:o}=r(67479)),n=r(28352),t=r(64356),e.exports=class extends n{constructor(e,r,n,i){super(e),o(r)&&({version:r,encoding:n,standalone:i}=r),r||(r="1.0"),this.type=t.Declaration,this.version=this.stringify.xmlVersion(r),null!=n&&(this.encoding=this.stringify.xmlEncoding(n)),null!=i&&(this.standalone=this.stringify.xmlStandalone(i))}toString(e){return this.options.writer.declaration(this,this.options.writer.filterOptions(e))}}}).call(this)},86821:function(e,t,r){(function(){var t,n,o,i,a,s,c,u;({isObject:u}=r(67479)),c=r(28352),t=r(64356),n=r(89318),i=r(88131),o=r(64677),a=r(70089),s=r(60322),e.exports=function(){class e extends c{constructor(e,r,n){var o,i,a,s;if(super(e),this.type=t.DocType,e.children)for(i=0,a=(s=e.children).length;i<a;i++)if((o=s[i]).type===t.Element){this.name=o.name;break}this.documentObject=e,u(r)&&({pubID:r,sysID:n}=r),null==n&&([n,r]=[r,n]),null!=r&&(this.pubID=this.stringify.dtdPubID(r)),null!=n&&(this.sysID=this.stringify.dtdSysID(n))}element(e,t){var r;return r=new o(this,e,t),this.children.push(r),this}attList(e,t,r,o,i){var a;return a=new n(this,e,t,r,o,i),this.children.push(a),this}entity(e,t){var r;return r=new i(this,!1,e,t),this.children.push(r),this}pEntity(e,t){var r;return r=new i(this,!0,e,t),this.children.push(r),this}notation(e,t){var r;return r=new a(this,e,t),this.children.push(r),this}toString(e){return this.options.writer.docType(this,this.options.writer.filterOptions(e))}ele(e,t){return this.element(e,t)}att(e,t,r,n,o){return this.attList(e,t,r,n,o)}ent(e,t){return this.entity(e,t)}pent(e,t){return this.pEntity(e,t)}not(e,t){return this.notation(e,t)}up(){return this.root()||this.documentObject}isEqualNode(e){return!!super.isEqualNode(e)&&e.name===this.name&&e.publicId===this.publicId&&e.systemId===this.systemId}}return Object.defineProperty(e.prototype,"entities",{get:function(){var e,r,n,o,i;for(o={},r=0,n=(i=this.children).length;r<n;r++)(e=i[r]).type!==t.EntityDeclaration||e.pe||(o[e.name]=e);return new s(o)}}),Object.defineProperty(e.prototype,"notations",{get:function(){var e,r,n,o,i;for(o={},r=0,n=(i=this.children).length;r<n;r++)(e=i[r]).type===t.NotationDeclaration&&(o[e.name]=e);return new s(o)}}),Object.defineProperty(e.prototype,"publicId",{get:function(){return this.pubID}}),Object.defineProperty(e.prototype,"systemId",{get:function(){return this.sysID}}),Object.defineProperty(e.prototype,"internalSubset",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),e}.call(this)}).call(this)},99477:function(e,t,r){(function(){var t,n,o,i,a,s,c;({isPlainObject:c}=r(67479)),o=r(44163),n=r(58052),i=r(28352),t=r(64356),s=r(4702),a=r(50027),e.exports=function(){class e extends i{constructor(e){super(null),this.name="#document",this.type=t.Document,this.documentURI=null,this.domConfig=new n,e||(e={}),e.writer||(e.writer=new a),this.options=e,this.stringify=new s(e)}end(e){var t;return t={},e?c(e)&&(t=e,e=this.options.writer):e=this.options.writer,e.document(this,e.filterOptions(t))}toString(e){return this.options.writer.document(this,this.options.writer.filterOptions(e))}createElement(e){throw new Error("This DOM method is not implemented."+this.debugInfo())}createDocumentFragment(){throw new Error("This DOM method is not implemented."+this.debugInfo())}createTextNode(e){throw new Error("This DOM method is not implemented."+this.debugInfo())}createComment(e){throw new Error("This DOM method is not implemented."+this.debugInfo())}createCDATASection(e){throw new Error("This DOM method is not implemented."+this.debugInfo())}createProcessingInstruction(e,t){throw new Error("This DOM method is not implemented."+this.debugInfo())}createAttribute(e){throw new Error("This DOM method is not implemented."+this.debugInfo())}createEntityReference(e){throw new Error("This DOM method is not implemented."+this.debugInfo())}getElementsByTagName(e){throw new Error("This DOM method is not implemented."+this.debugInfo())}importNode(e,t){throw new Error("This DOM method is not implemented."+this.debugInfo())}createElementNS(e,t){throw new Error("This DOM method is not implemented."+this.debugInfo())}createAttributeNS(e,t){throw new Error("This DOM method is not implemented."+this.debugInfo())}getElementsByTagNameNS(e,t){throw new Error("This DOM method is not implemented."+this.debugInfo())}getElementById(e){throw new Error("This DOM method is not implemented."+this.debugInfo())}adoptNode(e){throw new Error("This DOM method is not implemented."+this.debugInfo())}normalizeDocument(){throw new Error("This DOM method is not implemented."+this.debugInfo())}renameNode(e,t,r){throw new Error("This DOM method is not implemented."+this.debugInfo())}getElementsByClassName(e){throw new Error("This DOM method is not implemented."+this.debugInfo())}createEvent(e){throw new Error("This DOM method is not implemented."+this.debugInfo())}createRange(){throw new Error("This DOM method is not implemented."+this.debugInfo())}createNodeIterator(e,t,r){throw new Error("This DOM method is not implemented."+this.debugInfo())}createTreeWalker(e,t,r){throw new Error("This DOM method is not implemented."+this.debugInfo())}}return Object.defineProperty(e.prototype,"implementation",{value:new o}),Object.defineProperty(e.prototype,"doctype",{get:function(){var e,r,n,o;for(r=0,n=(o=this.children).length;r<n;r++)if((e=o[r]).type===t.DocType)return e;return null}}),Object.defineProperty(e.prototype,"documentElement",{get:function(){return this.rootObject||null}}),Object.defineProperty(e.prototype,"inputEncoding",{get:function(){return null}}),Object.defineProperty(e.prototype,"strictErrorChecking",{get:function(){return!1}}),Object.defineProperty(e.prototype,"xmlEncoding",{get:function(){return 0!==this.children.length&&this.children[0].type===t.Declaration?this.children[0].encoding:null}}),Object.defineProperty(e.prototype,"xmlStandalone",{get:function(){return 0!==this.children.length&&this.children[0].type===t.Declaration&&"yes"===this.children[0].standalone}}),Object.defineProperty(e.prototype,"xmlVersion",{get:function(){return 0!==this.children.length&&this.children[0].type===t.Declaration?this.children[0].version:"1.0"}}),Object.defineProperty(e.prototype,"URL",{get:function(){return this.documentURI}}),Object.defineProperty(e.prototype,"origin",{get:function(){return null}}),Object.defineProperty(e.prototype,"compatMode",{get:function(){return null}}),Object.defineProperty(e.prototype,"characterSet",{get:function(){return null}}),Object.defineProperty(e.prototype,"contentType",{get:function(){return null}}),e}.call(this)}).call(this)},86914:function(e,t,r){(function(){var t,n,o,i,a,s,c,u,d,l,p,m,g,f,S,h,y,v,E,A,_,T,I={}.hasOwnProperty;({isObject:_,isFunction:A,isPlainObject:T,getValue:E}=r(67479)),t=r(64356),m=r(99477),g=r(90950),i=r(62207),a=r(32023),S=r(10893),v=r(71386),f=r(70424),l=r(65868),p=r(86821),s=r(89318),u=r(88131),c=r(64677),d=r(70089),o=r(85460),y=r(4702),h=r(50027),n=r(66149),e.exports=class{constructor(e,r,n){var o;this.name="?xml",this.type=t.Document,e||(e={}),o={},e.writer?T(e.writer)&&(o=e.writer,e.writer=new h):e.writer=new h,this.options=e,this.writer=e.writer,this.writerOptions=this.writer.filterOptions(o),this.stringify=new y(e),this.onDataCallback=r||function(){},this.onEndCallback=n||function(){},this.currentNode=null,this.currentLevel=-1,this.openTags={},this.documentStarted=!1,this.documentCompleted=!1,this.root=null}createChildNode(e){var r,n,o,i,a,s,c,u;switch(e.type){case t.CData:this.cdata(e.value);break;case t.Comment:this.comment(e.value);break;case t.Element:for(n in o={},c=e.attribs)I.call(c,n)&&(r=c[n],o[n]=r.value);this.node(e.name,o);break;case t.Dummy:this.dummy();break;case t.Raw:this.raw(e.value);break;case t.Text:this.text(e.value);break;case t.ProcessingInstruction:this.instruction(e.target,e.value);break;default:throw new Error("This XML node type is not supported in a JS object: "+e.constructor.name)}for(a=0,s=(u=e.children).length;a<s;a++)i=u[a],this.createChildNode(i),i.type===t.Element&&this.up();return this}dummy(){return this}node(e,t,r){if(null==e)throw new Error("Missing node name.");if(this.root&&-1===this.currentLevel)throw new Error("Document can only have one root node. "+this.debugInfo(e));return this.openCurrent(),e=E(e),null==t&&(t={}),t=E(t),_(t)||([r,t]=[t,r]),this.currentNode=new g(this,e,t),this.currentNode.children=!1,this.currentLevel++,this.openTags[this.currentLevel]=this.currentNode,null!=r&&this.text(r),this}element(e,r,n){var o,i,a,s,c,u;if(this.currentNode&&this.currentNode.type===t.DocType)this.dtdElement(...arguments);else if(Array.isArray(e)||_(e)||A(e))for(s=this.options.noValidation,this.options.noValidation=!0,(u=new m(this.options).element("TEMP_ROOT")).element(e),this.options.noValidation=s,i=0,a=(c=u.children).length;i<a;i++)o=c[i],this.createChildNode(o),o.type===t.Element&&this.up();else this.node(e,r,n);return this}attribute(e,t){var r,n;if(!this.currentNode||this.currentNode.children)throw new Error("att() can only be used immediately after an ele() call in callback mode. "+this.debugInfo(e));if(null!=e&&(e=E(e)),_(e))for(r in e)I.call(e,r)&&(n=e[r],this.attribute(r,n));else A(t)&&(t=t.apply()),this.options.keepNullAttributes&&null==t?this.currentNode.attribs[e]=new o(this,e,""):null!=t&&(this.currentNode.attribs[e]=new o(this,e,t));return this}text(e){var t;return this.openCurrent(),t=new v(this,e),this.onData(this.writer.text(t,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this}cdata(e){var t;return this.openCurrent(),t=new i(this,e),this.onData(this.writer.cdata(t,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this}comment(e){var t;return this.openCurrent(),t=new a(this,e),this.onData(this.writer.comment(t,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this}raw(e){var t;return this.openCurrent(),t=new S(this,e),this.onData(this.writer.raw(t,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this}instruction(e,t){var r,n,o,i,a;if(this.openCurrent(),null!=e&&(e=E(e)),null!=t&&(t=E(t)),Array.isArray(e))for(r=0,i=e.length;r<i;r++)n=e[r],this.instruction(n);else if(_(e))for(n in e)I.call(e,n)&&(o=e[n],this.instruction(n,o));else A(t)&&(t=t.apply()),a=new f(this,e,t),this.onData(this.writer.processingInstruction(a,this.writerOptions,this.currentLevel+1),this.currentLevel+1);return this}declaration(e,t,r){var n;if(this.openCurrent(),this.documentStarted)throw new Error("declaration() must be the first node.");return n=new l(this,e,t,r),this.onData(this.writer.declaration(n,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this}doctype(e,t,r){if(this.openCurrent(),null==e)throw new Error("Missing root node name.");if(this.root)throw new Error("dtd() must come before the root node.");return this.currentNode=new p(this,t,r),this.currentNode.rootNodeName=e,this.currentNode.children=!1,this.currentLevel++,this.openTags[this.currentLevel]=this.currentNode,this}dtdElement(e,t){var r;return this.openCurrent(),r=new c(this,e,t),this.onData(this.writer.dtdElement(r,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this}attList(e,t,r,n,o){var i;return this.openCurrent(),i=new s(this,e,t,r,n,o),this.onData(this.writer.dtdAttList(i,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this}entity(e,t){var r;return this.openCurrent(),r=new u(this,!1,e,t),this.onData(this.writer.dtdEntity(r,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this}pEntity(e,t){var r;return this.openCurrent(),r=new u(this,!0,e,t),this.onData(this.writer.dtdEntity(r,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this}notation(e,t){var r;return this.openCurrent(),r=new d(this,e,t),this.onData(this.writer.dtdNotation(r,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this}up(){if(this.currentLevel<0)throw new Error("The document node has no parent.");return this.currentNode?(this.currentNode.children?this.closeNode(this.currentNode):this.openNode(this.currentNode),this.currentNode=null):this.closeNode(this.openTags[this.currentLevel]),delete this.openTags[this.currentLevel],this.currentLevel--,this}end(){for(;this.currentLevel>=0;)this.up();return this.onEnd()}openCurrent(){if(this.currentNode)return this.currentNode.children=!0,this.openNode(this.currentNode)}openNode(e){var r,o,i,a;if(!e.isOpen){if(this.root||0!==this.currentLevel||e.type!==t.Element||(this.root=e),o="",e.type===t.Element){for(i in this.writerOptions.state=n.OpenTag,o=this.writer.indent(e,this.writerOptions,this.currentLevel)+"<"+e.name,a=e.attribs)I.call(a,i)&&(r=a[i],o+=this.writer.attribute(r,this.writerOptions,this.currentLevel));o+=(e.children?">":"/>")+this.writer.endline(e,this.writerOptions,this.currentLevel),this.writerOptions.state=n.InsideTag}else this.writerOptions.state=n.OpenTag,o=this.writer.indent(e,this.writerOptions,this.currentLevel)+"<!DOCTYPE "+e.rootNodeName,e.pubID&&e.sysID?o+=' PUBLIC "'+e.pubID+'" "'+e.sysID+'"':e.sysID&&(o+=' SYSTEM "'+e.sysID+'"'),e.children?(o+=" [",this.writerOptions.state=n.InsideTag):(this.writerOptions.state=n.CloseTag,o+=">"),o+=this.writer.endline(e,this.writerOptions,this.currentLevel);return this.onData(o,this.currentLevel),e.isOpen=!0}}closeNode(e){var r;if(!e.isClosed)return"",this.writerOptions.state=n.CloseTag,r=e.type===t.Element?this.writer.indent(e,this.writerOptions,this.currentLevel)+"</"+e.name+">"+this.writer.endline(e,this.writerOptions,this.currentLevel):this.writer.indent(e,this.writerOptions,this.currentLevel)+"]>"+this.writer.endline(e,this.writerOptions,this.currentLevel),this.writerOptions.state=n.None,this.onData(r,this.currentLevel),e.isClosed=!0}onData(e,t){return this.documentStarted=!0,this.onDataCallback(e,t+1)}onEnd(){return this.documentCompleted=!0,this.onEndCallback()}debugInfo(e){return null==e?"":"node: <"+e+">"}ele(){return this.element(...arguments)}nod(e,t,r){return this.node(e,t,r)}txt(e){return this.text(e)}dat(e){return this.cdata(e)}com(e){return this.comment(e)}ins(e,t){return this.instruction(e,t)}dec(e,t,r){return this.declaration(e,t,r)}dtd(e,t,r){return this.doctype(e,t,r)}e(e,t,r){return this.element(e,t,r)}n(e,t,r){return this.node(e,t,r)}t(e){return this.text(e)}d(e){return this.cdata(e)}c(e){return this.comment(e)}r(e){return this.raw(e)}i(e,t){return this.instruction(e,t)}att(){return this.currentNode&&this.currentNode.type===t.DocType?this.attList(...arguments):this.attribute(...arguments)}a(){return this.currentNode&&this.currentNode.type===t.DocType?this.attList(...arguments):this.attribute(...arguments)}ent(e,t){return this.entity(e,t)}pent(e,t){return this.pEntity(e,t)}not(e,t){return this.notation(e,t)}}}).call(this)},3688:function(e,t,r){(function(){var t,n;n=r(28352),t=r(64356),e.exports=class extends n{constructor(e){super(e),this.type=t.Dummy}clone(){return Object.create(this)}toString(e){return""}}}).call(this)},90950:function(e,t,r){(function(){var t,n,o,i,a,s,c,u={}.hasOwnProperty;({isObject:c,isFunction:s,getValue:a}=r(67479)),i=r(28352),t=r(64356),n=r(85460),o=r(60322),e.exports=function(){class e extends i{constructor(e,r,n){var o,i,a,s;if(super(e),null==r)throw new Error("Missing element name. "+this.debugInfo());if(this.name=this.stringify.name(r),this.type=t.Element,this.attribs={},this.schemaTypeInfo=null,null!=n&&this.attribute(n),e.type===t.Document&&(this.isRoot=!0,this.documentObject=e,e.rootObject=this,e.children))for(i=0,a=(s=e.children).length;i<a;i++)if((o=s[i]).type===t.DocType){o.name=this.name;break}}clone(){var e,t,r,n;for(t in(r=Object.create(this)).isRoot&&(r.documentObject=null),r.attribs={},n=this.attribs)u.call(n,t)&&(e=n[t],r.attribs[t]=e.clone());return r.children=[],this.children.forEach((function(e){var t;return(t=e.clone()).parent=r,r.children.push(t)})),r}attribute(e,t){var r,o;if(null!=e&&(e=a(e)),c(e))for(r in e)u.call(e,r)&&(o=e[r],this.attribute(r,o));else s(t)&&(t=t.apply()),this.options.keepNullAttributes&&null==t?this.attribs[e]=new n(this,e,""):null!=t&&(this.attribs[e]=new n(this,e,t));return this}removeAttribute(e){var t,r,n;if(null==e)throw new Error("Missing attribute name. "+this.debugInfo());if(e=a(e),Array.isArray(e))for(r=0,n=e.length;r<n;r++)t=e[r],delete this.attribs[t];else delete this.attribs[e];return this}toString(e){return this.options.writer.element(this,this.options.writer.filterOptions(e))}att(e,t){return this.attribute(e,t)}a(e,t){return this.attribute(e,t)}getAttribute(e){return this.attribs.hasOwnProperty(e)?this.attribs[e].value:null}setAttribute(e,t){throw new Error("This DOM method is not implemented."+this.debugInfo())}getAttributeNode(e){return this.attribs.hasOwnProperty(e)?this.attribs[e]:null}setAttributeNode(e){throw new Error("This DOM method is not implemented."+this.debugInfo())}removeAttributeNode(e){throw new Error("This DOM method is not implemented."+this.debugInfo())}getElementsByTagName(e){throw new Error("This DOM method is not implemented."+this.debugInfo())}getAttributeNS(e,t){throw new Error("This DOM method is not implemented."+this.debugInfo())}setAttributeNS(e,t,r){throw new Error("This DOM method is not implemented."+this.debugInfo())}removeAttributeNS(e,t){throw new Error("This DOM method is not implemented."+this.debugInfo())}getAttributeNodeNS(e,t){throw new Error("This DOM method is not implemented."+this.debugInfo())}setAttributeNodeNS(e){throw new Error("This DOM method is not implemented."+this.debugInfo())}getElementsByTagNameNS(e,t){throw new Error("This DOM method is not implemented."+this.debugInfo())}hasAttribute(e){return this.attribs.hasOwnProperty(e)}hasAttributeNS(e,t){throw new Error("This DOM method is not implemented."+this.debugInfo())}setIdAttribute(e,t){return this.attribs.hasOwnProperty(e)?this.attribs[e].isId:t}setIdAttributeNS(e,t,r){throw new Error("This DOM method is not implemented."+this.debugInfo())}setIdAttributeNode(e,t){throw new Error("This DOM method is not implemented."+this.debugInfo())}getElementsByTagName(e){throw new Error("This DOM method is not implemented."+this.debugInfo())}getElementsByTagNameNS(e,t){throw new Error("This DOM method is not implemented."+this.debugInfo())}getElementsByClassName(e){throw new Error("This DOM method is not implemented."+this.debugInfo())}isEqualNode(e){var t,r,n;if(!super.isEqualNode(e))return!1;if(e.namespaceURI!==this.namespaceURI)return!1;if(e.prefix!==this.prefix)return!1;if(e.localName!==this.localName)return!1;if(e.attribs.length!==this.attribs.length)return!1;for(t=r=0,n=this.attribs.length-1;0<=n?r<=n:r>=n;t=0<=n?++r:--r)if(!this.attribs[t].isEqualNode(e.attribs[t]))return!1;return!0}}return Object.defineProperty(e.prototype,"tagName",{get:function(){return this.name}}),Object.defineProperty(e.prototype,"namespaceURI",{get:function(){return""}}),Object.defineProperty(e.prototype,"prefix",{get:function(){return""}}),Object.defineProperty(e.prototype,"localName",{get:function(){return this.name}}),Object.defineProperty(e.prototype,"id",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(e.prototype,"className",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(e.prototype,"classList",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(e.prototype,"attributes",{get:function(){return this.attributeMap&&this.attributeMap.nodes||(this.attributeMap=new o(this.attribs)),this.attributeMap}}),e}.call(this)}).call(this)},60322:function(e){(function(){e.exports=function(){class e{constructor(e){this.nodes=e}clone(){return this.nodes=null}getNamedItem(e){return this.nodes[e]}setNamedItem(e){var t;return t=this.nodes[e.nodeName],this.nodes[e.nodeName]=e,t||null}removeNamedItem(e){var t;return t=this.nodes[e],delete this.nodes[e],t||null}item(e){return this.nodes[Object.keys(this.nodes)[e]]||null}getNamedItemNS(e,t){throw new Error("This DOM method is not implemented.")}setNamedItemNS(e){throw new Error("This DOM method is not implemented.")}removeNamedItemNS(e,t){throw new Error("This DOM method is not implemented.")}}return Object.defineProperty(e.prototype,"length",{get:function(){return Object.keys(this.nodes).length||0}}),e}.call(this)}).call(this)},28352:function(e,t,r){(function(){var t,n,o,i,a,s,c,u,d,l,p,m,g,f,S,h,y={}.hasOwnProperty,v=[].splice;({isObject:h,isFunction:S,isEmpty:f,getValue:g}=r(67479)),u=null,o=null,i=null,a=null,s=null,p=null,m=null,l=null,c=null,n=null,d=null,t=null,e.exports=function(){class e{constructor(e){this.parent=e,this.parent&&(this.options=this.parent.options,this.stringify=this.parent.stringify),this.value=null,this.children=[],this.baseURI=null,u||(u=r(90950),o=r(62207),i=r(32023),a=r(65868),s=r(86821),p=r(10893),m=r(71386),l=r(70424),c=r(3688),n=r(64356),d=r(21469),r(60322),t=r(88503))}setParent(e){var t,r,n,o,i;for(this.parent=e,e&&(this.options=e.options,this.stringify=e.stringify),i=[],r=0,n=(o=this.children).length;r<n;r++)t=o[r],i.push(t.setParent(this));return i}element(e,t,r){var n,o,i,a,s,c,u,d,l;if(c=null,null===t&&null==r&&([t,r]=[{},null]),null==t&&(t={}),t=g(t),h(t)||([r,t]=[t,r]),null!=e&&(e=g(e)),Array.isArray(e))for(i=0,u=e.length;i<u;i++)o=e[i],c=this.element(o);else if(S(e))c=this.element(e.apply());else if(h(e)){for(s in e)if(y.call(e,s))if(l=e[s],S(l)&&(l=l.apply()),!this.options.ignoreDecorators&&this.stringify.convertAttKey&&0===s.indexOf(this.stringify.convertAttKey))c=this.attribute(s.substr(this.stringify.convertAttKey.length),l);else if(!this.options.separateArrayItems&&Array.isArray(l)&&f(l))c=this.dummy();else if(h(l)&&f(l))c=this.element(s);else if(this.options.keepNullNodes||null!=l)if(!this.options.separateArrayItems&&Array.isArray(l))for(a=0,d=l.length;a<d;a++)o=l[a],(n={})[s]=o,c=this.element(n);else h(l)?!this.options.ignoreDecorators&&this.stringify.convertTextKey&&0===s.indexOf(this.stringify.convertTextKey)?c=this.element(l):(c=this.element(s)).element(l):c=this.element(s,l);else c=this.dummy()}else c=this.options.keepNullNodes||null!==r?!this.options.ignoreDecorators&&this.stringify.convertTextKey&&0===e.indexOf(this.stringify.convertTextKey)?this.text(r):!this.options.ignoreDecorators&&this.stringify.convertCDataKey&&0===e.indexOf(this.stringify.convertCDataKey)?this.cdata(r):!this.options.ignoreDecorators&&this.stringify.convertCommentKey&&0===e.indexOf(this.stringify.convertCommentKey)?this.comment(r):!this.options.ignoreDecorators&&this.stringify.convertRawKey&&0===e.indexOf(this.stringify.convertRawKey)?this.raw(r):!this.options.ignoreDecorators&&this.stringify.convertPIKey&&0===e.indexOf(this.stringify.convertPIKey)?this.instruction(e.substr(this.stringify.convertPIKey.length),r):this.node(e,t,r):this.dummy();if(null==c)throw new Error("Could not create any elements with: "+e+". "+this.debugInfo());return c}insertBefore(e,t,r){var n,o,i,a,s;if(null!=e?e.type:void 0)return a=t,(i=e).setParent(this),a?(o=children.indexOf(a),s=children.splice(o),children.push(i),Array.prototype.push.apply(children,s)):children.push(i),i;if(this.isRoot)throw new Error("Cannot insert elements at root level. "+this.debugInfo(e));return o=this.parent.children.indexOf(this),s=this.parent.children.splice(o),n=this.parent.element(e,t,r),Array.prototype.push.apply(this.parent.children,s),n}insertAfter(e,t,r){var n,o,i;if(this.isRoot)throw new Error("Cannot insert elements at root level. "+this.debugInfo(e));return o=this.parent.children.indexOf(this),i=this.parent.children.splice(o+1),n=this.parent.element(e,t,r),Array.prototype.push.apply(this.parent.children,i),n}remove(){var e;if(this.isRoot)throw new Error("Cannot remove the root element. "+this.debugInfo());return e=this.parent.children.indexOf(this),v.apply(this.parent.children,[e,e-e+1].concat([])),this.parent}node(e,t,r){var n;return null!=e&&(e=g(e)),t||(t={}),t=g(t),h(t)||([r,t]=[t,r]),n=new u(this,e,t),null!=r&&n.text(r),this.children.push(n),n}text(e){var t;return h(e)&&this.element(e),t=new m(this,e),this.children.push(t),this}cdata(e){var t;return t=new o(this,e),this.children.push(t),this}comment(e){var t;return t=new i(this,e),this.children.push(t),this}commentBefore(e){var t,r;return t=this.parent.children.indexOf(this),r=this.parent.children.splice(t),this.parent.comment(e),Array.prototype.push.apply(this.parent.children,r),this}commentAfter(e){var t,r;return t=this.parent.children.indexOf(this),r=this.parent.children.splice(t+1),this.parent.comment(e),Array.prototype.push.apply(this.parent.children,r),this}raw(e){var t;return t=new p(this,e),this.children.push(t),this}dummy(){return new c(this)}instruction(e,t){var r,n,o,i,a;if(null!=e&&(e=g(e)),null!=t&&(t=g(t)),Array.isArray(e))for(i=0,a=e.length;i<a;i++)r=e[i],this.instruction(r);else if(h(e))for(r in e)y.call(e,r)&&(n=e[r],this.instruction(r,n));else S(t)&&(t=t.apply()),o=new l(this,e,t),this.children.push(o);return this}instructionBefore(e,t){var r,n;return r=this.parent.children.indexOf(this),n=this.parent.children.splice(r),this.parent.instruction(e,t),Array.prototype.push.apply(this.parent.children,n),this}instructionAfter(e,t){var r,n;return r=this.parent.children.indexOf(this),n=this.parent.children.splice(r+1),this.parent.instruction(e,t),Array.prototype.push.apply(this.parent.children,n),this}declaration(e,t,r){var o,i;return o=this.document(),i=new a(o,e,t,r),0===o.children.length?o.children.unshift(i):o.children[0].type===n.Declaration?o.children[0]=i:o.children.unshift(i),o.root()||o}dtd(e,t){var r,o,i,a,c,u,d,l,p;for(r=this.document(),o=new s(r,e,t),i=a=0,u=(l=r.children).length;a<u;i=++a)if(l[i].type===n.DocType)return r.children[i]=o,o;for(i=c=0,d=(p=r.children).length;c<d;i=++c)if(p[i].isRoot)return r.children.splice(i,0,o),o;return r.children.push(o),o}up(){if(this.isRoot)throw new Error("The root node has no parent. Use doc() if you need to get the document object.");return this.parent}root(){var e;for(e=this;e;){if(e.type===n.Document)return e.rootObject;if(e.isRoot)return e;e=e.parent}}document(){var e;for(e=this;e;){if(e.type===n.Document)return e;e=e.parent}}end(e){return this.document().end(e)}prev(){var e;if((e=this.parent.children.indexOf(this))<1)throw new Error("Already at the first node. "+this.debugInfo());return this.parent.children[e-1]}next(){var e;if(-1===(e=this.parent.children.indexOf(this))||e===this.parent.children.length-1)throw new Error("Already at the last node. "+this.debugInfo());return this.parent.children[e+1]}importDocument(e){var t,r,o,i,a;if((r=e.root().clone()).parent=this,r.isRoot=!1,this.children.push(r),this.type===n.Document&&(r.isRoot=!0,r.documentObject=this,this.rootObject=r,this.children))for(o=0,i=(a=this.children).length;o<i;o++)if((t=a[o]).type===n.DocType){t.name=r.name;break}return this}debugInfo(e){var t,r;return null!=(e=e||this.name)||(null!=(t=this.parent)?t.name:void 0)?null==e?"parent: <"+this.parent.name+">":(null!=(r=this.parent)?r.name:void 0)?"node: <"+e+">, parent: <"+this.parent.name+">":"node: <"+e+">":""}ele(e,t,r){return this.element(e,t,r)}nod(e,t,r){return this.node(e,t,r)}txt(e){return this.text(e)}dat(e){return this.cdata(e)}com(e){return this.comment(e)}ins(e,t){return this.instruction(e,t)}doc(){return this.document()}dec(e,t,r){return this.declaration(e,t,r)}e(e,t,r){return this.element(e,t,r)}n(e,t,r){return this.node(e,t,r)}t(e){return this.text(e)}d(e){return this.cdata(e)}c(e){return this.comment(e)}r(e){return this.raw(e)}i(e,t){return this.instruction(e,t)}u(){return this.up()}importXMLBuilder(e){return this.importDocument(e)}attribute(e,t){throw new Error("attribute() applies to element nodes only.")}att(e,t){return this.attribute(e,t)}a(e,t){return this.attribute(e,t)}removeAttribute(e){throw new Error("attribute() applies to element nodes only.")}replaceChild(e,t){throw new Error("This DOM method is not implemented."+this.debugInfo())}removeChild(e){throw new Error("This DOM method is not implemented."+this.debugInfo())}appendChild(e){throw new Error("This DOM method is not implemented."+this.debugInfo())}hasChildNodes(){return 0!==this.children.length}cloneNode(e){throw new Error("This DOM method is not implemented."+this.debugInfo())}normalize(){throw new Error("This DOM method is not implemented."+this.debugInfo())}isSupported(e,t){return!0}hasAttributes(){return 0!==this.attribs.length}compareDocumentPosition(e){var r,n;return(r=this)===e?0:this.document()!==e.document()?(n=t.Disconnected|t.ImplementationSpecific,Math.random()<.5?n|=t.Preceding:n|=t.Following,n):r.isAncestor(e)?t.Contains|t.Preceding:r.isDescendant(e)?t.Contains|t.Following:r.isPreceding(e)?t.Preceding:t.Following}isSameNode(e){throw new Error("This DOM method is not implemented."+this.debugInfo())}lookupPrefix(e){throw new Error("This DOM method is not implemented."+this.debugInfo())}isDefaultNamespace(e){throw new Error("This DOM method is not implemented."+this.debugInfo())}lookupNamespaceURI(e){throw new Error("This DOM method is not implemented."+this.debugInfo())}isEqualNode(e){var t,r,n;if(e.nodeType!==this.nodeType)return!1;if(e.children.length!==this.children.length)return!1;for(t=r=0,n=this.children.length-1;0<=n?r<=n:r>=n;t=0<=n?++r:--r)if(!this.children[t].isEqualNode(e.children[t]))return!1;return!0}getFeature(e,t){throw new Error("This DOM method is not implemented."+this.debugInfo())}setUserData(e,t,r){throw new Error("This DOM method is not implemented."+this.debugInfo())}getUserData(e){throw new Error("This DOM method is not implemented."+this.debugInfo())}contains(e){return!!e&&(e===this||this.isDescendant(e))}isDescendant(e){var t,r,n,o;for(r=0,n=(o=this.children).length;r<n;r++){if(e===(t=o[r]))return!0;if(t.isDescendant(e))return!0}return!1}isAncestor(e){return e.isDescendant(this)}isPreceding(e){var t,r;return t=this.treePosition(e),r=this.treePosition(this),-1!==t&&-1!==r&&t<r}isFollowing(e){var t,r;return t=this.treePosition(e),r=this.treePosition(this),-1!==t&&-1!==r&&t>r}treePosition(e){var t,r;return r=0,t=!1,this.foreachTreeNode(this.document(),(function(n){if(r++,!t&&n===e)return t=!0})),t?r:-1}foreachTreeNode(e,t){var r,n,o,i,a;for(e||(e=this.document()),n=0,o=(i=e.children).length;n<o;n++){if(a=t(r=i[n]))return a;if(a=this.foreachTreeNode(r,t))return a}}}return Object.defineProperty(e.prototype,"nodeName",{get:function(){return this.name}}),Object.defineProperty(e.prototype,"nodeType",{get:function(){return this.type}}),Object.defineProperty(e.prototype,"nodeValue",{get:function(){return this.value}}),Object.defineProperty(e.prototype,"parentNode",{get:function(){return this.parent}}),Object.defineProperty(e.prototype,"childNodes",{get:function(){return this.childNodeList&&this.childNodeList.nodes||(this.childNodeList=new d(this.children)),this.childNodeList}}),Object.defineProperty(e.prototype,"firstChild",{get:function(){return this.children[0]||null}}),Object.defineProperty(e.prototype,"lastChild",{get:function(){return this.children[this.children.length-1]||null}}),Object.defineProperty(e.prototype,"previousSibling",{get:function(){var e;return e=this.parent.children.indexOf(this),this.parent.children[e-1]||null}}),Object.defineProperty(e.prototype,"nextSibling",{get:function(){var e;return e=this.parent.children.indexOf(this),this.parent.children[e+1]||null}}),Object.defineProperty(e.prototype,"ownerDocument",{get:function(){return this.document()||null}}),Object.defineProperty(e.prototype,"textContent",{get:function(){var e,t,r,o,i;if(this.nodeType===n.Element||this.nodeType===n.DocumentFragment){for(i="",t=0,r=(o=this.children).length;t<r;t++)(e=o[t]).textContent&&(i+=e.textContent);return i}return null},set:function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),e}.call(this)}).call(this)},21469:function(e){(function(){e.exports=function(){class e{constructor(e){this.nodes=e}clone(){return this.nodes=null}item(e){return this.nodes[e]||null}}return Object.defineProperty(e.prototype,"length",{get:function(){return this.nodes.length||0}}),e}.call(this)}).call(this)},70424:function(e,t,r){(function(){var t,n;t=r(64356),n=r(51502),e.exports=class extends n{constructor(e,r,n){if(super(e),null==r)throw new Error("Missing instruction target. "+this.debugInfo());this.type=t.ProcessingInstruction,this.target=this.stringify.insTarget(r),this.name=this.target,n&&(this.value=this.stringify.insValue(n))}clone(){return Object.create(this)}toString(e){return this.options.writer.processingInstruction(this,this.options.writer.filterOptions(e))}isEqualNode(e){return!!super.isEqualNode(e)&&e.target===this.target}}}).call(this)},10893:function(e,t,r){(function(){var t,n;t=r(64356),n=r(28352),e.exports=class extends n{constructor(e,r){if(super(e),null==r)throw new Error("Missing raw text. "+this.debugInfo());this.type=t.Raw,this.value=this.stringify.raw(r)}clone(){return Object.create(this)}toString(e){return this.options.writer.raw(this,this.options.writer.filterOptions(e))}}}).call(this)},99068:function(e,t,r){(function(){var t,n,o,i={}.hasOwnProperty;t=r(64356),o=r(41991),n=r(66149),e.exports=class extends o{constructor(e,t){super(t),this.stream=e}endline(e,t,r){return e.isLastRootNode&&t.state===n.CloseTag?"":super.endline(e,t,r)}document(e,t){var r,n,o,i,a,s,c,u,d;for(n=o=0,a=(c=e.children).length;o<a;n=++o)(r=c[n]).isLastRootNode=n===e.children.length-1;for(t=this.filterOptions(t),d=[],i=0,s=(u=e.children).length;i<s;i++)r=u[i],d.push(this.writeChildNode(r,t,0));return d}cdata(e,t,r){return this.stream.write(super.cdata(e,t,r))}comment(e,t,r){return this.stream.write(super.comment(e,t,r))}declaration(e,t,r){return this.stream.write(super.declaration(e,t,r))}docType(e,t,r){var o,i,a,s;if(r||(r=0),this.openNode(e,t,r),t.state=n.OpenTag,this.stream.write(this.indent(e,t,r)),this.stream.write("<!DOCTYPE "+e.root().name),e.pubID&&e.sysID?this.stream.write(' PUBLIC "'+e.pubID+'" "'+e.sysID+'"'):e.sysID&&this.stream.write(' SYSTEM "'+e.sysID+'"'),e.children.length>0){for(this.stream.write(" ["),this.stream.write(this.endline(e,t,r)),t.state=n.InsideTag,i=0,a=(s=e.children).length;i<a;i++)o=s[i],this.writeChildNode(o,t,r+1);t.state=n.CloseTag,this.stream.write("]")}return t.state=n.CloseTag,this.stream.write(t.spaceBeforeSlash+">"),this.stream.write(this.endline(e,t,r)),t.state=n.None,this.closeNode(e,t,r)}element(e,r,o){var a,s,c,u,d,l,p,m,g,f,S,h,y,v;if(o||(o=0),this.openNode(e,r,o),r.state=n.OpenTag,g=this.indent(e,r,o)+"<"+e.name,r.pretty&&r.width>0)for(m in l=g.length,S=e.attribs)i.call(S,m)&&(a=S[m],l+(f=this.attribute(a,r,o)).length>r.width?(v=this.indent(e,r,o+1)+f,g+=this.endline(e,r,o)+v,l=v.length):(g+=v=" "+f,l+=v.length));else for(m in h=e.attribs)i.call(h,m)&&(a=h[m],g+=this.attribute(a,r,o));if(this.stream.write(g),u=0===(c=e.children.length)?null:e.children[0],0===c||e.children.every((function(e){return(e.type===t.Text||e.type===t.Raw)&&""===e.value})))r.allowEmpty?(this.stream.write(">"),r.state=n.CloseTag,this.stream.write("</"+e.name+">")):(r.state=n.CloseTag,this.stream.write(r.spaceBeforeSlash+"/>"));else if(!r.pretty||1!==c||u.type!==t.Text&&u.type!==t.Raw||null==u.value){for(this.stream.write(">"+this.endline(e,r,o)),r.state=n.InsideTag,d=0,p=(y=e.children).length;d<p;d++)s=y[d],this.writeChildNode(s,r,o+1);r.state=n.CloseTag,this.stream.write(this.indent(e,r,o)+"</"+e.name+">")}else this.stream.write(">"),r.state=n.InsideTag,r.suppressPrettyCount++,this.writeChildNode(u,r,o+1),r.suppressPrettyCount--,r.state=n.CloseTag,this.stream.write("</"+e.name+">");return this.stream.write(this.endline(e,r,o)),r.state=n.None,this.closeNode(e,r,o)}processingInstruction(e,t,r){return this.stream.write(super.processingInstruction(e,t,r))}raw(e,t,r){return this.stream.write(super.raw(e,t,r))}text(e,t,r){return this.stream.write(super.text(e,t,r))}dtdAttList(e,t,r){return this.stream.write(super.dtdAttList(e,t,r))}dtdElement(e,t,r){return this.stream.write(super.dtdElement(e,t,r))}dtdEntity(e,t,r){return this.stream.write(super.dtdEntity(e,t,r))}dtdNotation(e,t,r){return this.stream.write(super.dtdNotation(e,t,r))}}}).call(this)},50027:function(e,t,r){(function(){var t;t=r(41991),e.exports=class extends t{constructor(e){super(e)}document(e,t){var r,n,o,i,a;for(t=this.filterOptions(t),i="",n=0,o=(a=e.children).length;n<o;n++)r=a[n],i+=this.writeChildNode(r,t,0);return t.pretty&&i.slice(-t.newline.length)===t.newline&&(i=i.slice(0,-t.newline.length)),i}}}).call(this)},4702:function(e){(function(){var t={}.hasOwnProperty;e.exports=function(){class e{constructor(e){var r,n,o;for(r in this.assertLegalChar=this.assertLegalChar.bind(this),this.assertLegalName=this.assertLegalName.bind(this),e||(e={}),this.options=e,this.options.version||(this.options.version="1.0"),n=e.stringify||{})t.call(n,r)&&(o=n[r],this[r]=o)}name(e){return this.options.noValidation?e:this.assertLegalName(""+e||"")}text(e){return this.options.noValidation?e:this.assertLegalChar(this.textEscape(""+e||""))}cdata(e){return this.options.noValidation?e:(e=(e=""+e||"").replace("]]>","]]]]><![CDATA[>"),this.assertLegalChar(e))}comment(e){if(this.options.noValidation)return e;if((e=""+e||"").match(/--/))throw new Error("Comment text cannot contain double-hypen: "+e);return this.assertLegalChar(e)}raw(e){return this.options.noValidation?e:""+e||""}attValue(e){return this.options.noValidation?e:this.assertLegalChar(this.attEscape(e=""+e||""))}insTarget(e){return this.options.noValidation?e:this.assertLegalChar(""+e||"")}insValue(e){if(this.options.noValidation)return e;if((e=""+e||"").match(/\?>/))throw new Error("Invalid processing instruction value: "+e);return this.assertLegalChar(e)}xmlVersion(e){if(this.options.noValidation)return e;if(!(e=""+e||"").match(/1\.[0-9]+/))throw new Error("Invalid version number: "+e);return e}xmlEncoding(e){if(this.options.noValidation)return e;if(!(e=""+e||"").match(/^[A-Za-z](?:[A-Za-z0-9._-])*$/))throw new Error("Invalid encoding: "+e);return this.assertLegalChar(e)}xmlStandalone(e){return this.options.noValidation?e:e?"yes":"no"}dtdPubID(e){return this.options.noValidation?e:this.assertLegalChar(""+e||"")}dtdSysID(e){return this.options.noValidation?e:this.assertLegalChar(""+e||"")}dtdElementValue(e){return this.options.noValidation?e:this.assertLegalChar(""+e||"")}dtdAttType(e){return this.options.noValidation?e:this.assertLegalChar(""+e||"")}dtdAttDefault(e){return this.options.noValidation?e:this.assertLegalChar(""+e||"")}dtdEntityValue(e){return this.options.noValidation?e:this.assertLegalChar(""+e||"")}dtdNData(e){return this.options.noValidation?e:this.assertLegalChar(""+e||"")}assertLegalChar(e){var t,r;if(this.options.noValidation)return e;if(t="","1.0"===this.options.version){if(t=/[\0-\x08\x0B\f\x0E-\x1F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,r=e.match(t))throw new Error(`Invalid character in string: ${e} at index ${r.index}`)}else if("1.1"===this.options.version&&(t=/[\0\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,r=e.match(t)))throw new Error(`Invalid character in string: ${e} at index ${r.index}`);return e}assertLegalName(e){var t;if(this.options.noValidation)return e;if(this.assertLegalChar(e),t=/^([:A-Z_a-z\xC0-\xD6\xD8-\xF6\xF8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])([\x2D\.0-:A-Z_a-z\xB7\xC0-\xD6\xD8-\xF6\xF8-\u037D\u037F-\u1FFF\u200C\u200D\u203F\u2040\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])*$/,!e.match(t))throw new Error("Invalid character in name");return e}textEscape(e){var t;return this.options.noValidation?e:(t=this.options.noDoubleEncoding?/(?!&\S+;)&/g:/&/g,e.replace(t,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\r/g,"&#xD;"))}attEscape(e){var t;return this.options.noValidation?e:(t=this.options.noDoubleEncoding?/(?!&\S+;)&/g:/&/g,e.replace(t,"&amp;").replace(/</g,"&lt;").replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;"))}}return e.prototype.convertAttKey="@",e.prototype.convertPIKey="?",e.prototype.convertTextKey="#text",e.prototype.convertCDataKey="#cdata",e.prototype.convertCommentKey="#comment",e.prototype.convertRawKey="#raw",e}.call(this)}).call(this)},71386:function(e,t,r){(function(){var t,n;t=r(64356),n=r(51502),e.exports=function(){class e extends n{constructor(e,r){if(super(e),null==r)throw new Error("Missing element text. "+this.debugInfo());this.name="#text",this.type=t.Text,this.value=this.stringify.text(r)}clone(){return Object.create(this)}toString(e){return this.options.writer.text(this,this.options.writer.filterOptions(e))}splitText(e){throw new Error("This DOM method is not implemented."+this.debugInfo())}replaceWholeText(e){throw new Error("This DOM method is not implemented."+this.debugInfo())}}return Object.defineProperty(e.prototype,"isElementContentWhitespace",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(e.prototype,"wholeText",{get:function(){var e,t,r;for(r="",t=this.previousSibling;t;)r=t.data+r,t=t.previousSibling;for(r+=this.data,e=this.nextSibling;e;)r+=e.data,e=e.nextSibling;return r}}),e}.call(this)}).call(this)},41991:function(e,t,r){(function(){var t,n,o,i={}.hasOwnProperty;({assign:o}=r(67479)),t=r(64356),r(65868),r(86821),r(62207),r(32023),r(90950),r(10893),r(71386),r(70424),r(3688),r(89318),r(64677),r(88131),r(70089),n=r(66149),e.exports=class{constructor(e){var t,r,n;for(t in e||(e={}),this.options=e,r=e.writer||{})i.call(r,t)&&(n=r[t],this["_"+t]=this[t],this[t]=n)}filterOptions(e){var t,r,i,a,s,c,u,d,l;return e||(e={}),e=o({},this.options,e),(t={writer:this}).pretty=e.pretty||!1,t.allowEmpty=e.allowEmpty||!1,t.indent=null!=(r=e.indent)?r:"  ",t.newline=null!=(i=e.newline)?i:"\n",t.offset=null!=(a=e.offset)?a:0,t.width=null!=(s=e.width)?s:0,t.dontPrettyTextNodes=null!=(c=null!=(u=e.dontPrettyTextNodes)?u:e.dontprettytextnodes)?c:0,t.spaceBeforeSlash=null!=(d=null!=(l=e.spaceBeforeSlash)?l:e.spacebeforeslash)?d:"",!0===t.spaceBeforeSlash&&(t.spaceBeforeSlash=" "),t.suppressPrettyCount=0,t.user={},t.state=n.None,t}indent(e,t,r){var n;return!t.pretty||t.suppressPrettyCount?"":t.pretty&&(n=(r||0)+t.offset+1)>0?new Array(n).join(t.indent):""}endline(e,t,r){return!t.pretty||t.suppressPrettyCount?"":t.newline}attribute(e,t,r){var n;return this.openAttribute(e,t,r),n=t.pretty&&t.width>0?e.name+'="'+e.value+'"':" "+e.name+'="'+e.value+'"',this.closeAttribute(e,t,r),n}cdata(e,t,r){var o;return this.openNode(e,t,r),t.state=n.OpenTag,o=this.indent(e,t,r)+"<![CDATA[",t.state=n.InsideTag,o+=e.value,t.state=n.CloseTag,o+="]]>"+this.endline(e,t,r),t.state=n.None,this.closeNode(e,t,r),o}comment(e,t,r){var o;return this.openNode(e,t,r),t.state=n.OpenTag,o=this.indent(e,t,r)+"\x3c!-- ",t.state=n.InsideTag,o+=e.value,t.state=n.CloseTag,o+=" --\x3e"+this.endline(e,t,r),t.state=n.None,this.closeNode(e,t,r),o}declaration(e,t,r){var o;return this.openNode(e,t,r),t.state=n.OpenTag,o=this.indent(e,t,r)+"<?xml",t.state=n.InsideTag,o+=' version="'+e.version+'"',null!=e.encoding&&(o+=' encoding="'+e.encoding+'"'),null!=e.standalone&&(o+=' standalone="'+e.standalone+'"'),t.state=n.CloseTag,o+=t.spaceBeforeSlash+"?>",o+=this.endline(e,t,r),t.state=n.None,this.closeNode(e,t,r),o}docType(e,t,r){var o,i,a,s,c;if(r||(r=0),this.openNode(e,t,r),t.state=n.OpenTag,s=this.indent(e,t,r),s+="<!DOCTYPE "+e.root().name,e.pubID&&e.sysID?s+=' PUBLIC "'+e.pubID+'" "'+e.sysID+'"':e.sysID&&(s+=' SYSTEM "'+e.sysID+'"'),e.children.length>0){for(s+=" [",s+=this.endline(e,t,r),t.state=n.InsideTag,i=0,a=(c=e.children).length;i<a;i++)o=c[i],s+=this.writeChildNode(o,t,r+1);t.state=n.CloseTag,s+="]"}return t.state=n.CloseTag,s+=t.spaceBeforeSlash+">",s+=this.endline(e,t,r),t.state=n.None,this.closeNode(e,t,r),s}element(e,r,o){var a,s,c,u,d,l,p,m,g,f,S,h,y,v,E,A,_,T;if(o||(o=0),S=!1,this.openNode(e,r,o),r.state=n.OpenTag,h=this.indent(e,r,o)+"<"+e.name,r.pretty&&r.width>0)for(f in p=h.length,v=e.attribs)i.call(v,f)&&(a=v[f],p+(y=this.attribute(a,r,o)).length>r.width?(T=this.indent(e,r,o+1)+y,h+=this.endline(e,r,o)+T,p=T.length):(h+=T=" "+y,p+=T.length));else for(f in E=e.attribs)i.call(E,f)&&(a=E[f],h+=this.attribute(a,r,o));if(u=0===(c=e.children.length)?null:e.children[0],0===c||e.children.every((function(e){return(e.type===t.Text||e.type===t.Raw)&&""===e.value})))r.allowEmpty?(h+=">",r.state=n.CloseTag,h+="</"+e.name+">"+this.endline(e,r,o)):(r.state=n.CloseTag,h+=r.spaceBeforeSlash+"/>"+this.endline(e,r,o));else if(!r.pretty||1!==c||u.type!==t.Text&&u.type!==t.Raw||null==u.value){if(r.dontPrettyTextNodes)for(d=0,m=(A=e.children).length;d<m;d++)if(((s=A[d]).type===t.Text||s.type===t.Raw)&&null!=s.value){r.suppressPrettyCount++,S=!0;break}for(h+=">"+this.endline(e,r,o),r.state=n.InsideTag,l=0,g=(_=e.children).length;l<g;l++)s=_[l],h+=this.writeChildNode(s,r,o+1);r.state=n.CloseTag,h+=this.indent(e,r,o)+"</"+e.name+">",S&&r.suppressPrettyCount--,h+=this.endline(e,r,o),r.state=n.None}else h+=">",r.state=n.InsideTag,r.suppressPrettyCount++,S=!0,h+=this.writeChildNode(u,r,o+1),r.suppressPrettyCount--,S=!1,r.state=n.CloseTag,h+="</"+e.name+">"+this.endline(e,r,o);return this.closeNode(e,r,o),h}writeChildNode(e,r,n){switch(e.type){case t.CData:return this.cdata(e,r,n);case t.Comment:return this.comment(e,r,n);case t.Element:return this.element(e,r,n);case t.Raw:return this.raw(e,r,n);case t.Text:return this.text(e,r,n);case t.ProcessingInstruction:return this.processingInstruction(e,r,n);case t.Dummy:return"";case t.Declaration:return this.declaration(e,r,n);case t.DocType:return this.docType(e,r,n);case t.AttributeDeclaration:return this.dtdAttList(e,r,n);case t.ElementDeclaration:return this.dtdElement(e,r,n);case t.EntityDeclaration:return this.dtdEntity(e,r,n);case t.NotationDeclaration:return this.dtdNotation(e,r,n);default:throw new Error("Unknown XML node type: "+e.constructor.name)}}processingInstruction(e,t,r){var o;return this.openNode(e,t,r),t.state=n.OpenTag,o=this.indent(e,t,r)+"<?",t.state=n.InsideTag,o+=e.target,e.value&&(o+=" "+e.value),t.state=n.CloseTag,o+=t.spaceBeforeSlash+"?>",o+=this.endline(e,t,r),t.state=n.None,this.closeNode(e,t,r),o}raw(e,t,r){var o;return this.openNode(e,t,r),t.state=n.OpenTag,o=this.indent(e,t,r),t.state=n.InsideTag,o+=e.value,t.state=n.CloseTag,o+=this.endline(e,t,r),t.state=n.None,this.closeNode(e,t,r),o}text(e,t,r){var o;return this.openNode(e,t,r),t.state=n.OpenTag,o=this.indent(e,t,r),t.state=n.InsideTag,o+=e.value,t.state=n.CloseTag,o+=this.endline(e,t,r),t.state=n.None,this.closeNode(e,t,r),o}dtdAttList(e,t,r){var o;return this.openNode(e,t,r),t.state=n.OpenTag,o=this.indent(e,t,r)+"<!ATTLIST",t.state=n.InsideTag,o+=" "+e.elementName+" "+e.attributeName+" "+e.attributeType,"#DEFAULT"!==e.defaultValueType&&(o+=" "+e.defaultValueType),e.defaultValue&&(o+=' "'+e.defaultValue+'"'),t.state=n.CloseTag,o+=t.spaceBeforeSlash+">"+this.endline(e,t,r),t.state=n.None,this.closeNode(e,t,r),o}dtdElement(e,t,r){var o;return this.openNode(e,t,r),t.state=n.OpenTag,o=this.indent(e,t,r)+"<!ELEMENT",t.state=n.InsideTag,o+=" "+e.name+" "+e.value,t.state=n.CloseTag,o+=t.spaceBeforeSlash+">"+this.endline(e,t,r),t.state=n.None,this.closeNode(e,t,r),o}dtdEntity(e,t,r){var o;return this.openNode(e,t,r),t.state=n.OpenTag,o=this.indent(e,t,r)+"<!ENTITY",t.state=n.InsideTag,e.pe&&(o+=" %"),o+=" "+e.name,e.value?o+=' "'+e.value+'"':(e.pubID&&e.sysID?o+=' PUBLIC "'+e.pubID+'" "'+e.sysID+'"':e.sysID&&(o+=' SYSTEM "'+e.sysID+'"'),e.nData&&(o+=" NDATA "+e.nData)),t.state=n.CloseTag,o+=t.spaceBeforeSlash+">"+this.endline(e,t,r),t.state=n.None,this.closeNode(e,t,r),o}dtdNotation(e,t,r){var o;return this.openNode(e,t,r),t.state=n.OpenTag,o=this.indent(e,t,r)+"<!NOTATION",t.state=n.InsideTag,o+=" "+e.name,e.pubID&&e.sysID?o+=' PUBLIC "'+e.pubID+'" "'+e.sysID+'"':e.pubID?o+=' PUBLIC "'+e.pubID+'"':e.sysID&&(o+=' SYSTEM "'+e.sysID+'"'),t.state=n.CloseTag,o+=t.spaceBeforeSlash+">"+this.endline(e,t,r),t.state=n.None,this.closeNode(e,t,r),o}openNode(e,t,r){}closeNode(e,t,r){}openAttribute(e,t,r){}closeAttribute(e,t,r){}}}).call(this)},42541:function(e,t,r){(function(){var t,n,o,i,a,s,c,u,d;({assign:u,isFunction:d}=r(67479)),o=r(44163),i=r(99477),a=r(86914),c=r(50027),s=r(99068),t=r(64356),n=r(66149),e.exports.create=function(e,t,r,n){var o,a;if(null==e)throw new Error("Root element needs a name.");return n=u({},t,r,n),a=(o=new i(n)).element(e),n.headless||(o.declaration(n),null==n.pubID&&null==n.sysID||o.dtd(n)),a},e.exports.begin=function(e,t,r){return d(e)&&([t,r]=[e,t],e={}),t?new a(e,t,r):new i(e)},e.exports.stringWriter=function(e){return new c(e)},e.exports.streamWriter=function(e,t){return new s(e,t)},e.exports.implementation=new o,e.exports.nodeType=t,e.exports.writerState=n}).call(this)},55328:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fetchABTestingVersionDetails=void 0;const n=r(95623),o=r(50884);t.fetchABTestingVersionDetails=(e,t)=>{const r=e.storeService,i={capacity:"",language:r.getPlatform().info.lang,platform:"real_website"};return t?.abTestForcedVersion&&(i.forceVersion3=t.abTestForcedVersion),e.wsService.premium.getABTestingVersionDetails(i).then((e=>{r.dispatch((0,o.saveABTestingInfo)(e))})).catch((e=>{n.default.error("Carbon init - Error while calling getABTestingVersionDetails: ",e)}))}},35673:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const n=r(92082),o=r(72525),i=r(62627);t.config={commands:{participateToUserABTest:{handler:o.participateToUserABTest}},queries:{getUserABTestVariant:{selector:i.userABTestVariantSelector}},liveQueries:{liveUserABTestVariant:{operator:n.userABTestVariant$}}}},50884:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.saveABTestingInfo=t.SAVE_ABTESTING_INFO=void 0,t.SAVE_ABTESTING_INFO="SAVE_ABTESTING_INFO",t.saveABTestingInfo=e=>({type:t.SAVE_ABTESTING_INFO,data:Object.assign({},e)})},34007:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getEmptyABTesting=void 0;const n=r(50884);t.default=(e={details:[],version:"control2016_all",success:null},t)=>t.type===n.SAVE_ABTESTING_INFO?Object.assign({},e,{...t.data}):e,t.getEmptyABTesting=function(){return{details:[],version:"control2016_all",success:null}}},80755:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0;const n=r(35673);t.bootstrap=e=>{e.register(n.config)}},8481:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.refreshUserABTest=void 0;const n=r(41075),o=r(70252),i=r(90503),a=r(30913),s=r(46298),c=r(43416),u=r(9272),d=r(25899);t.refreshUserABTest=async function(e,t,r){try{const o=(0,a.abTestsNamesSelector)(e.getState());if(0===o.length)return;const i=await(0,n.getAndEvaluateForUser)(e,r,{abtests:o});if((0,s.isApiError)(i))throw new Error(`Failed to refresh user AB tests: ${i}`);const l=(0,u.mapGetUserABServerResponse)(o,i.abtests);e.dispatch((0,c.refreshedUserABTests)(l)),(0,d.persistUserTests)(t,e)}catch(e){const t=new Error(`[ABTests] - refreshUserABTest: ${e}`);(0,o.sendExceptionLog)({error:t,code:i.ExceptionCriticality.WARNING})}}},21587:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0;var n=r(80755);Object.defineProperty(t,"bootstrap",{enumerable:!0,get:function(){return n.bootstrap}})},92082:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.userABTestVariant$=void 0;const n=r(18948),o=r(3343),i=r(62627);t.userABTestVariant$=e=>(0,n.pipe)((0,o.map)((t=>(0,i.userABTestVariantSelector)(t,e))),(0,o.distinctUntilChanged)())},9272:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mapGetUserABServerResponse=t.NOT_PARTICIPATING=void 0,t.NOT_PARTICIPATING="not-participating",t.mapGetUserABServerResponse=function(e,r){return e.reduce(((e,n)=>{const o=r.find((e=>n===e.name));return e[n]=o?{variant:o.variant,version:o.abtestVersion}:{variant:t.NOT_PARTICIPATING},e}),{})}},72525:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.participateToUserABTest=void 0;const n=r(62627),o=r(9272),i=r(25899);t.participateToUserABTest=async function(e,t){const r=(0,n.userABTestSelector)(e.storeService.getState(),t);r&&o.NOT_PARTICIPATING!==r.variant&&(0,i.persistUserTests)(e.localStorageService.getInstance(),e.storeService)}},25899:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.persistUserTests=void 0;const n=r(25576),o=r(62627);t.persistUserTests=async function(e,t){if(t.getAccountInfo().persistData===n.PersistData.PERSIST_DATA_NO)return Promise.resolve();e&&await e.storeUserABTests((0,o.userABTestsSelector)(t.getState()))}},52346:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setupSubscriptions=void 0;const n=r(18216),o=r(55328),i=r(9486);t.setupSubscriptions=function(e,t){e.appInitialized.on((async e=>{if(e.initMode===n.InitMode.FirstInit){await(0,o.fetchABTestingVersionDetails)(t,{abTestForcedVersion:e.abTestForcedVersion});const r=t.storeService.getABTesting();(0,i.triggerABTestingChanged)(r)}}))}},39811:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const n=r(95667),o=r(88544),i=r(71594);t.config={commands:{editContactInfo:{handler:n.editContactInfoHandler}},queries:{getContactInfo:{selector:o.contactInfoSelector}},liveQueries:{liveContactInfo:{operator:i.contactInfo$}}}},13044:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(92925),t)},1463:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0;const n=r(39811);t.bootstrap=e=>{e.register(n.config)}},66650:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.editContactInfoHandler=void 0;const n=r(92925),o=r(46298),i=r(45956),a=r(16593),s=r(5464),c={contact_email_required:n.EditContactInfoErrorCode.EMPTY_EMAIL,invalid_contact_email:n.EditContactInfoErrorCode.INVALID_EMAIL,UNKNOWN_ERROR:n.EditContactInfoErrorCode.UNKNOWN_ERROR};t.editContactInfoHandler=async function(e,t){const{storeService:r,wsService:u,sessionService:d}=e,l=r.getState(),p=(0,a.userLoginSelector)(l);if(!r.isAuthenticated())return{success:!1,error:{code:n.EditContactInfoErrorCode.UNKNOWN_ERROR}};try{const e=await(0,o.updateContactInfo)(r,p,t);return(0,o.isApiError)(e)?{success:!1,error:{code:c[e.code]}}:(await(0,s.getAndTriggerRefreshAccountInfo)(r,d,u),{success:!0})}catch(e){return{success:!1,error:{code:c[i.UnknownError]}}}}},95667:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(66650),t)},64369:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0,o(r(13044),t);var i=r(1463);Object.defineProperty(t,"bootstrap",{enumerable:!0,get:function(){return i.bootstrap}})},71594:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.contactInfo$=void 0;const n=r(18948),o=r(3343),i=r(88544);t.contactInfo$=()=>(0,n.pipe)((0,o.map)(i.contactInfoSelector),(0,o.distinctUntilChanged)())},88544:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.contactInfoSelector=void 0,t.contactInfoSelector=e=>e.userSession.accountContactInfo},92925:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EditContactInfoErrorCode=void 0,function(e){e[e.EMPTY_EMAIL=0]="EMPTY_EMAIL",e[e.INVALID_EMAIL=1]="INVALID_EMAIL",e[e.UNKNOWN_ERROR=2]="UNKNOWN_ERROR"}(t.EditContactInfoErrorCode||(t.EditContactInfoErrorCode={}))},71703:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makeAccountCreationController=t.encryptSettings=t.checkLogin=void 0;const n=r(53576),o=r(70252),i=r(32074),a=r(39362),s=r(36513),c=r(43461),u=r(95551),d=r(58639),l=r(7624),p=r(16356),m=r(61259),g=r(95623),f=r(65675),S=r(16038),h=r(46298);async function y(e,t){g.default.log("AccountCreationController.checkLogin");const r=await(0,h.requestAccountCreation)(e,{login:t});if((0,h.isApiError)(r)){if("SSO_BLOCKED"===r.code)return{accountCreationCode:n.AccountCreationCode.USER_DOESNT_EXIST_SSO_NON_PROVISIONED};throw new Error(`[AccountCreationController] - checkLogin: ${r.message} (${r.code})`)}if(r.ssoServiceProviderUrl)return e.dispatch((0,l.storeSSOSettings)({serviceProviderUrl:r.ssoServiceProviderUrl,isNitroProvider:r.ssoIsNitroProvider})),r.ssoIsNitroProvider?{accountCreationCode:n.AccountCreationCode.USER_NITRO_SSO_PROVISIONED,isUserProposed:r.isProposed,isUserAccepted:r.isAccepted}:((0,m.triggerServiceProviderUrlRedirect)(e.getState(),t),{accountCreationCode:n.AccountCreationCode.USER_SSO_PROVISIONED,isUserProposed:r.isProposed,isUserAccepted:r.isAccepted});switch(r.exists){case h.AccountExistsStatus.AccountExists:return{accountCreationCode:n.AccountCreationCode.USER_EXISTS,isUserProposed:r.isProposed,isUserAccepted:r.isAccepted};case h.AccountExistsStatus.AccountDoesntExistInvalid:return{accountCreationCode:n.AccountCreationCode.USER_DOESNT_EXIST_INVALID_MX,isUserProposed:r.isProposed,isUserAccepted:r.isAccepted};case h.AccountExistsStatus.AccountDoesntExistUnlikely:return{accountCreationCode:n.AccountCreationCode.USER_DOESNT_EXIST_UNLIKELY_MX,isUserProposed:r.isProposed,isUserAccepted:r.isAccepted};case h.AccountExistsStatus.AccountDoesntExist:default:return{accountCreationCode:n.AccountCreationCode.USER_DOESNT_EXIST,isUserProposed:r.isProposed,isUserAccepted:r.isAccepted}}}function v(e,t,r){return Promise.resolve().then((()=>{const n=e.getStore(),o=i.encryptSettings(e,t,r);n.dispatch((0,c.saveAccountSettings)(o));const a=(0,s.makeCryptoService)(),l={cryptoConfig:(0,f.parsePayload)(o.personalSettings.CryptoUserPayload).cryptoConfig,forceSalt:(0,S.base64ToBuffer)(o.personalSettings.CryptoFixedSalt)},p={promise:(0,u.generateRsaKeys)(t,a,l)};e.dispatch((0,c.saveAccountKeys)(p));const m={encryptSettingsRequest:r,valid:!0};return d.sendEncryptSettingsResult(m),m})).catch((e=>{const t=new Error(`[AccountCreation] - encryptSettings: ${e}`);throw g.default.error(t),(0,o.sendExceptionLog)({error:t}),t}))}t.checkLogin=y,t.encryptSettings=v,t.makeAccountCreationController=function(e){return{checkLogin:t=>y(e.storeService,t),createAccount:t=>(e.storeService.dispatch((0,c.accountCreationStarted)({isSSO:!1})),e.sessionService.close().then((()=>{e.masterPasswordEncryptorService.setInstance({raw:t.password},"");const{storeService:r,masterPasswordEncryptorService:n}=e;return v(r,n,t)}))),confirmAccountCreation:t=>function(e,t){return Promise.resolve().then((()=>{const r=e.storeService.getStore().getState().userSession.accountCreation.settings.personalSettings,n=e.storeService.getAccountCreation(),o=n.settings.promise;if(null===o)throw new Error("createAccount should be call before confirmAccountCreation");const i=n.accountKey.promise;if(null===i)throw new Error("createAccount should be call before confirmAccountCreation");return a.createAccount(e,t,o,r,i).then((t=>(d.sendConfirmCreateAccountResult(t),e.storeService.dispatch((0,p.updateIsFirstSessionAfterAccountCreation)()),t)))})).catch((e=>{const t=new Error(`[AccountCreation] - confirmAccountCreation: ${e}`);throw g.default.error(t),(0,o.sendExceptionLog)({error:t}),t}))}(e,t)}}},85591:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const n=r(47542);t.config={commands:{},queries:{},liveQueries:{liveAccountCreated:{subject:n.getAccountCreated$}}}},81867:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0;const n=r(85591);t.bootstrap=e=>{e.register(n.config)}},23881:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0;var n=r(81867);Object.defineProperty(t,"bootstrap",{enumerable:!0,get:function(){return n.bootstrap}})},47542:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.emitAccountCreated=t.getAccountCreated$=void 0;const n=new(r(18948).Subject);t.getAccountCreated$=()=>n,t.emitAccountCreated=()=>n.next()},32074:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.encryptSettings=void 0;const n=r(63713),o=r(75270),i=r(56668),a=r(91301),s=r(16038),c=r(55623),u=r(12706),d=r(95648),l=r(78320),p=r(47408);t.encryptSettings=function(e,t,r){const m=(0,l.generateItemUuid)(),g=(0,p.getUnixTimestamp)(),f=(0,c.getRandomValues)(16),S=e.getState(),h=(0,u.isSSOAccountCreationSelector)(S)?a.CRYPTO_NODERIVATION_HMAC64:i.ARGON2_DEFAULT_PAYLOAD,y={...(0,d.makeBasePersonalSettings)(),AnonymousUserId:r.anonymousUserId,UsagelogToken:m,Format:r.format,Language:r.language,SecurityEmail:r.login,RealLogin:r.login,accountCreationDatetime:g,SyncBackup:!0,CryptoFixedSalt:(0,s.bufferToBase64)(f),CryptoUserPayload:h},v=(0,o.getTransactionXml)(y),E={time:(0,p.getUnixTimestamp)(),backupDate:0,type:"SETTINGS",action:"BACKUP_EDIT",identifier:"SETTINGS_userId",content:v},A={forceSalt:f};return{personalSettings:y,promise:n.encryptSingleTransaction(t,E,A)}}},751:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createSSOAccount=t.prepareRemoteDataEncryptionServices=void 0;const n=r(28354),o=r(71703),i=r(39362),a=r(56915),s=r(56668),c=r(16038),u=r(64910),d=r(33769),l=r(69530),p=r(46298),m=r(70252),g=r(61259),f=r(92029),S=r(16356),h=r(43461);t.prepareRemoteDataEncryptionServices=async(e,t)=>{const r=(0,n.v4)(),{remoteDataEncryptorService:o,masterPasswordEncryptorService:i}=e,a=await(0,l.generate64BytesKey)(),p=(0,c.base64BufferToText)(a),m=await(0,l.generate64BytesKey)(),g=(0,c.bufferToBase64)(m),f=(0,c.base64ToBuffer)(t),h=(0,d.getEncryptionKeyBuffer)(f,m,{skipDerivation:!0}),y=(0,c.arrayBufferToText)(h),v=(0,u.getNoDerivationCryptoConfig)();i.setInstance({raw:y},"",v);const E=(0,s.utf16ToDeflatedUtf8)(p,{skipUtf8Encoding:!0,skipDeflate:!0}),A=await i.getInstance().encrypt(E);return o.setInstance({raw:p},"",v),e.storeService.dispatch((0,S.updateRemoteKey)(p)),{remoteKey:{uuid:r,key:A,type:"sso"},serverKeyBase64:g}},t.createSSOAccount=async function(e,r){const{sessionService:n,storeService:s,remoteDataEncryptorService:c}=e,{consents:u,deviceName:d,login:l,ssoServiceProviderKey:m,ssoToken:g,anonymousUserId:v}=r,{appVersion:E,country:A,lang:_,platformName:T}=(0,a.platformInfoSelector)(s.getState());await n.close(),s.dispatch((0,h.accountCreationStarted)({isSSO:!0}));const{remoteKey:I,serverKeyBase64:b}=await(0,t.prepareRemoteDataEncryptionServices)(e,m),w={anonymousUserId:v,deviceName:d,format:A,language:_,login:l,password:m,subscribe:u.find((({consentType:e})=>"emailsOffersAndTips"===e)).status||!1};await(0,o.encryptSettings)(s,c,w);const C=s.getAccountCreation(),{content:D,time:O}=await C.settings.promise,P=await C.accountKey.promise,N=(0,p.makeSafeCountry)(s.getLocation().country||A),R={login:l,contactEmail:l,appVersion:E,sdkVersion:"1.0.0.0",platform:T,settings:{content:D,time:O},consents:u,deviceName:d,country:N,osCountry:N,language:(0,p.makeSafeLanguage)(_),osLanguage:(0,p.makeSafeLanguage)(_),remoteKeys:[I],ssoServerKey:b,ssoToken:g,sharingKeys:{publicKey:P.keys.publicKey,privateKey:P.encryptedPrivateKey},temporaryDevice:!0},M=await(0,p.createUserWithSSO)(s,R);if((0,p.isApiError)(M))return y(M);const L={createAccountResult:{encryptSettingsRequest:w,valid:!0},options:{flowIndicator:"memberAccount"},isStandAlone:!1,consents:u};return await(0,i.firstSync)(e,L,M,{useRemoteKey:!0}),e.storeService.dispatch((0,S.updateAnalyticsIds)(M.userAnalyticsId,M.deviceAnalyticsId)),{success:!0,code:f.LoginViaSsoCode.SUCCESS}};const y=e=>{const{code:t,message:r}=e;switch(v(t),t){case p.DomainNotValidForTeam:case p.InvalidUser:case p.InvalidSsoToken:case p.NotProposedNeitherAccepted:case p.NoFreeSlot:return(0,g.makeReturnErrorObject)(f.LoginViaSsoCode.SSO_VERIFICATION_FAILED,r);default:return(0,g.makeReturnErrorObject)(f.LoginViaSsoCode.UNKNOWN_ERROR,r)}},v=e=>{const t=new Error(`[createSSOAccount] - createUserWithSSO: ${e}`);(0,m.sendExceptionLog)({error:t})}},39362:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.firstSync=t.createAccount=void 0;const n=r(53576),o=r(92233),i=r(25963),a=r(37898),s=r(25576),c=r(88610),u=r(16356),d=r(78320),l=r(1347),p=r(27517),m=r(19399),g=r(58582),f=r(60946),S=r(41007),h=r(17936),y=r(92221),v=r(46298),E=r(92215),A=r(47542),_=r(51064);async function T(e,t,r,u={useRemoteKey:!1}){const p=t.createAccountResult,{login:v}=p.encryptSettingsRequest,A=(0,d.generateItemUuid)(),T=(0,l.getEmptyPersonalDataState)();T.emails.push({AnonId:(0,d.generateItemUuid)(),Email:v,EmailName:"Email 1",Id:A,kwType:"KWEmail",LastBackupTime:0,LocaleFormat:n.Country.UNIVERSAL,SpaceId:"",Type:"PERSO"}),T.changesToUpload.push((0,_.createUploadChange)({action:"EDIT",itemId:A,kwType:"KWEmail"}));const{monitor:I,getSyncEvent:b}=(0,S.makeEventLoggerSyncMonitor)(e.eventLoggerService,{sendLogOnSyncComplete:!1}),w=(0,f.setupProbe)(I,(0,h.makeDiagnosticReportMonitor)(),(0,y.makeSyncLoggerMonitor)()),C={accessKey:r.deviceAccessKey,secretKey:r.deviceSecretKey},D=(0,E.convertDeviceKeysToUki)(C),O=u.useRemoteKey?e.remoteDataEncryptorService:e.masterPasswordEncryptorService,P=Date.now(),N=a.SyncType.FULL_SYNC,R={storeService:e.storeService,dataEncryptorService:O,login:v,uki:D,lastSyncTimestamp:P,personalData:T,syncType:N,needsKeys:!1,ws:e.wsService,announce:w};let M=null;try{w(g.announcements.syncStarted(o.Trigger.AccountCreation,N),g.announcements.chronologicalSyncStarted(T)),M=await(0,i.sync)(R),w(g.announcements.chronologicalSyncFinished(M.summary),g.announcements.syncFinished())}catch(e){throw w(g.announcements.chronologicalSyncFailed(e),g.announcements.syncFailed(e)),e}if(t.isStandAlone){const t=(0,c.makeLoginController)(e);await t.loadAccountCreationInfos(v,p.encryptSettingsRequest.password,(0,m.secureDeviceName)(p.encryptSettingsRequest.deviceName),C,M.lastSyncTimestamp,s.PersistData.PERSIST_DATA_YES),await t.openSession(v,{password:p.encryptSettingsRequest.password})}const L=async function(e,t){return await e.logSync(new o.UserSyncEvent({duration:t.duration,error:t.error,extent:t.extent,fullBackupSize:t.fullBackupSize,incomingDeleteCount:t.incomingDeleteCount,incomingUpdateCount:t.incomingUpdateCount,outgoingDeleteCount:t.outgoingDeleteCount,outgoingUpdateCount:t.outgoingUpdateCount,timestamp:t.timestamp,trigger:t.trigger,treatProblem:t.treatProblem})),e.flushEventQueue()}(e.eventLoggerService,b());t.isStandAlone||await L}t.createAccount=async function(e,t,r,n,o){const i=e.storeService.getPlatform().info;if(!t.createAccountResult.valid)throw new Error("Account creation: Will not perform API request for invalidated settings promise");const[a,s]=await Promise.all([r,o]),c=await async function(e,t,r,n,o,i){const{storeService:a}=e,{createAccountResult:s}=r,c=e.storeService.getABTesting().version;let d=r.consents;Array.isArray(d)||(d=[{consentType:"emailsOffersAndTips",status:s.encryptSettingsRequest.subscribe}]);const l=s.encryptSettingsRequest.login,g={abTestingVersion:c,askM2dToken:!0,country:(0,v.makeSafeCountry)(e.storeService.getLocation().country||t.country),deviceName:(0,v.makeSafeDeviceName)((0,m.secureDeviceName)(s.encryptSettingsRequest.deviceName)),language:(0,v.makeSafeLanguage)(t.lang),login:l,osCountry:(0,v.makeSafeCountry)(t.country),osLanguage:(0,v.makeSafeLanguage)(t.lang),platform:t.platformName,settings:{content:o.content,time:o.time},appVersion:t.appVersion,contactEmail:l,consents:d,sharingKeys:{publicKey:i.keys.publicKey,privateKey:i.encryptedPrivateKey},temporaryDevice:!r.isStandAlone},f=await(0,v.createUser)(a,g);if((0,v.isApiError)(f))throw new Error(`[AccountCreation] - createAccountOnServer : ${f.message} (${f.code})`);return e.storeService.dispatch((0,u.updateKeyPair)({publicKey:i.keys.publicKey,privateKey:i.keys.privateKey})),e.storeService.dispatch((0,p.loadStoredPersonalSettings)(n)),e.storeService.dispatch((0,u.updateAnalyticsIds)(f.userAnalyticsId,f.deviceAnalyticsId)),f}(e,i,t,n,a,s);await T(e,t,c);const d=(0,E.convertDeviceKeysToUki)({accessKey:c.deviceAccessKey,secretKey:c.deviceSecretKey});return t.isStandAlone&&t.createAccountResult.valid&&(0,A.emitAccountCreated)(),{m2dToken:c.token,abtestingversion:c.abTestingVersion,uki:d,origin:c.origin,openSession:t.isStandAlone}},t.firstSync=T},85902:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const n=r(22021),o=r(34913);t.config={commands:{},queries:{getSubscriptionCode:{selector:n.subscriptionCodeSelector}},liveQueries:{liveSubscriptionCode:{operator:o.subscriptionCode$}}}},68904:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0;const n=r(85902);t.bootstrap=e=>{e.register(n.config)}},93820:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0;var n=r(68904);Object.defineProperty(t,"bootstrap",{enumerable:!0,get:function(){return n.bootstrap}})},34913:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.subscriptionCode$=void 0;const n=r(18948),o=r(3343),i=r(22021);t.subscriptionCode$=()=>(0,n.pipe)((0,o.map)(i.subscriptionCodeSelector),(0,o.distinctUntilChanged)())},22021:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.subscriptionCodeSelector=void 0,t.subscriptionCodeSelector=e=>e.userSession.account.subscriptionCode},65725:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AntiPhishingConfig=void 0;const n=r(48331);t.AntiPhishingConfig={commands:{},queries:{},liveQueries:{livePhishingURLList:{operator:n.antiPhishingURLList$}}}},26404:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.updateAntiPhishingURLList=t.UPDATE_ANTI_PHISHING_URL_LIST=void 0,t.UPDATE_ANTI_PHISHING_URL_LIST="UPDATE_ANTI_PHISHING_URL_LIST",t.updateAntiPhishingURLList=e=>({type:t.UPDATE_ANTI_PHISHING_URL_LIST,phishingURLList:e})},56666:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0;const n=r(65725);t.bootstrap=e=>{e.register(n.AntiPhishingConfig)}},77820:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.REMOTE_PHISHING_FILE=void 0,t.REMOTE_PHISHING_FILE="phishing_urls_test.json"},25560:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0;var n=r(56666);Object.defineProperty(t,"bootstrap",{enumerable:!0,get:function(){return n.bootstrap}})},48331:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.antiPhishingURLList$=void 0;const n=r(18948),o=r(3343),i=r(68769);t.antiPhishingURLList$=()=>(0,n.pipe)((0,o.map)(i.antiPhishingURLListSelector),(0,o.distinctUntilChanged)())},69018:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AntiPhishingReducer=t.getEmptyAntiPhishingState=void 0;const n=r(26404);t.getEmptyAntiPhishingState=()=>new Set([]),t.AntiPhishingReducer=(e=(0,t.getEmptyAntiPhishingState)(),r)=>r.type===n.UPDATE_ANTI_PHISHING_URL_LIST?r.phishingURLList:e},68769:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.antiPhishingURLListSelector=void 0,t.antiPhishingURLListSelector=e=>e.device.antiPhishing},46564:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setupSubscriptions=void 0;const n=r(85318);t.setupSubscriptions=async function(e,t){e.remoteFileChanged.on((e=>(0,n.triggerUpdatePhishingURLFile)(t,e)))}},85318:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.triggerUpdatePhishingURLFile=void 0;const n=r(70252),o=r(96405),i=r(26404),a=r(77820),s=async e=>{const t=await(0,o.fileContentStrSelector)(e,a.REMOTE_PHISHING_FILE),r=t?JSON.parse(t):[];if(1!==(i=r).fileFormat||!Array.isArray(i.domains)){const e=new Error("[Anti-Phishing]: File format is invalid");return(0,n.sendExceptionLog)(e),null}var i;return{domains:new Set(r.domains),fileFormat:r.fileFormat}};t.triggerUpdatePhishingURLFile=async function(e,t){const{storeService:r}=e,n=r.getState();if(t===a.REMOTE_PHISHING_FILE){const e=await s(n);e&&r.dispatch((0,i.updateAntiPhishingURLList)(e.domains))}}},7036:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.connectLazySlot=void 0;const n=r(4939),o=["API","Live"];t.connectLazySlot=(e,t,r=!1)=>{const i=new Map;return e.lazy((a=>{r&&(0,n.logInfo)({message:`${e.slotName} subscribed on param ${a}`,tag:o});const s=t(a),c=((e,t,r,i)=>e?e=>((0,n.logInfo)({message:`Emitting on ${t.slotName} with param ${r}`,tag:o,details:{event:e}}),i(e)):i)(r,e,a,(t=>e(a,t).catch((()=>{})))),u=s.subscribe(c);i.set(a,u)}),(t=>{const a=i.get(t);a?(r&&(0,n.logInfo)({message:`${e.slotName} unsubscribed on param ${t}`,tag:o}),a.unsubscribe(),i.delete(t)):r&&(0,n.logWarn)({message:`Cannot unsubscribe from ${e.slotName} on param ${t}: subscription not found.`,tag:o})}))}},50643:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.apiEvents=void 0;var n=r(31249);Object.defineProperty(t,"apiEvents",{enumerable:!0,get:function(){return n.apiEvents}})},38250:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(41248),t),o(r(36540),t),o(r(62922),t),o(r(90678),t),o(r(13044),t),o(r(61380),t),o(r(39319),t),o(r(37148),t),o(r(96463),t),o(r(7279),t),o(r(45968),t),o(r(6629),t),o(r(66869),t),o(r(83042),t),o(r(18982),t),o(r(41346),t),o(r(71661),t),o(r(45923),t),o(r(72658),t),o(r(40941),t),o(r(79562),t),o(r(42331),t),o(r(92987),t),o(r(35240),t),o(r(82481),t),o(r(69335),t),o(r(3790),t),o(r(74536),t)},2246:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getSyncAppSetting=t.setDataDEBUGONLY=t.decipherApplicationSettings=t.loadAppSettings=t.getCommonAppSettings=t.getCommonAppSetting=t.storeCommonAppSetting=t.getUsersWithPublicSettings=t.deleteUsersPublicSettings=t.getUserPublicSetting=t.storeUserPublicSetting=t.initApplicationSettings=void 0;const n=r(95623),o=r(72365),i=r(56668),a=r(1860),s=r(80722),c=r(2356),u=r(30913),d=r(18216);let l=null,p=null,m=null;function g(){if(!m)throw new Error("ApplicationSettings not initialized");return(0,u.commonApplicationSettingsSelector)(m.getState())||{}}t.initApplicationSettings=function(e,t,r,n){return l=e,p=n&&n.dataEncryptorService||(0,a.makeKeyDataEncryptorService)(),m=t,(0,o.setObfuscatingKey)(p),r===d.InitMode.FirstInit?(n?.settings&&t.dispatch((0,c.storeApplicationSettings)(n.settings)),h()):Promise.resolve()},t.storeUserPublicSetting=function(e,t,r){if(!m)throw new Error("ApplicationSettings not initialized");return m.dispatch((0,c.storeUserPublicSetting)(e,{[t]:r})),S()},t.getUserPublicSetting=function(e,t){if(!m)throw new Error("ApplicationSettings not initialized");const r=(0,u.userPublicSettingsSelector)(m.getState(),e);return r&&r.hasOwnProperty(t)?r[t]:null},t.deleteUsersPublicSettings=async function(e){if(!m)throw new Error("ApplicationSettings not initialized");return m.dispatch((0,c.deleteUserPublicSettings)(e)),S()},t.getUsersWithPublicSettings=function(){if(!m)throw new Error("ApplicationSettings not initialized");return Object.keys((0,u.publicUsersSettingsSelector)(m.getState()))},t.storeCommonAppSetting=function(e,t){return g()[e]=t,S()},t.getCommonAppSetting=function(e){const t=g();return t.hasOwnProperty(e)?(t[e],t[e]):null},t.getCommonAppSettings=g;const f="ApplicationSettings.cdata";function S(){if(!m||!l||!p)throw new Error("ApplicationSettings not initialized");const e=l.getLocalStorage(),t={publicUsersSettings:(0,u.publicUsersSettingsSelector)(m.getState()),commonApplicationSettings:(0,u.commonApplicationSettingsSelector)(m.getState())||{}},r=JSON.stringify(t),n=(0,i.utf16ToDeflatedUtf8)(r);return p.getInstance().encrypt(n).then((t=>e.writeItem(f,t))).then((()=>{}))}function h(){if(!l||!p)throw new Error("ApplicationSettings not initialized");n.default.log("loadApplicationSettings");const e=l.getLocalStorage();return e.itemExists(f).then((t=>(n.default.log("loadApplicationSettings "+t),t?e.readItem(f).then((e=>{if(n.default.log("appSettings read"),n.default.log(e),null==e)throw new Error("storing empty or null value is not authorized");if("string"!=typeof e)throw new Error("value of ApplicationSettings.cdata is expected to be a string");return y(p,e).then((e=>JSON.parse(e))).then((e=>{v(e)}))})):v({publicUsersSettings:{},commonApplicationSettings:{}})))).catch((e=>{n.default.error(e,"loadAppSettings"),v({publicUsersSettings:{},commonApplicationSettings:{}})}))}function y(e,t){return e.getInstance().decrypt(t).then((e=>(0,i.deflatedUtf8ToUtf16)(e))).catch((()=>{const e=(0,o.makeDataEncryptorService)((0,s.makeStoreService)());return(0,o.setObfuscatingKey)(e),e.getInstance().decrypt(t).then((e=>(0,i.deflatedUtf8ToUtf16)(e)))}))}function v(e){if(!m)throw new Error("ApplicationSettings not initialized");n.default.log(`ApplicationSettings loaded for deviceId: ${e.commonApplicationSettings.deviceId}`),m.dispatch((0,c.storeApplicationSettings)(e))}t.loadAppSettings=h,t.decipherApplicationSettings=y,t.setDataDEBUGONLY=function(e){if(!m)throw new Error("ApplicationSettings not initialized");m.dispatch((0,c.storeApplicationSettings)(e))},t.getSyncAppSetting=function(e){const t=function(){if(!m)throw new Error("ApplicationSettings not initialized");return m.getState().device.application.settings.sync}();return t.hasOwnProperty(e)?t[e]:null}},30096:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.appSessionIdInitialized=t.APP_SESSION_ID_INITIALIZED=void 0,t.APP_SESSION_ID_INITIALIZED="APP_SESSION_ID_INITIALIZED",t.appSessionIdInitialized=e=>({type:t.APP_SESSION_ID_INITIALIZED,appSessionId:e})},10319:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.applicationReducer=t.getEmptyApplicationSessionState=void 0;const n=r(98160),o=r(59600),i=r(30096);t.getEmptyApplicationSessionState=()=>({appSessionId:void 0}),t.applicationReducer=(0,n.combineReducers)({appSession:(e=(0,t.getEmptyApplicationSessionState)(),r)=>r.type===i.APP_SESSION_ID_INITIALIZED?{...e,appSessionId:r.appSessionId}:e,settings:o.default})},28486:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.appSessionIdSelector=void 0,t.appSessionIdSelector=e=>e.device.application.appSession.appSessionId},2356:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.deleteUserPublicSettings=t.storeUserPublicSetting=t.storeApplicationSettings=t.DELETE_USER_PUBLIC_SETTINGS=t.STORE_USER_PUBLIC_SETTING=t.STORE_APPLICATION_SETTINGS=void 0,t.STORE_APPLICATION_SETTINGS="STORE_APPLICATION_SETTINGS",t.STORE_USER_PUBLIC_SETTING="STORE_USER_PUBLIC_SETTING",t.DELETE_USER_PUBLIC_SETTINGS="DELETE_USER_PUBLIC_SETTINGS",t.storeApplicationSettings=e=>({type:t.STORE_APPLICATION_SETTINGS,settings:e}),t.storeUserPublicSetting=(e,r)=>({type:t.STORE_USER_PUBLIC_SETTING,login:e,userSettings:r}),t.deleteUserPublicSettings=e=>({type:t.DELETE_USER_PUBLIC_SETTINGS,logins:e})},59600:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getEmptyApplicationSettings=t.ApplicationBuildType=void 0;const n=r(2356);!function(e){e.DEV="DEV",e.QA="QA",e.NIGHTLY="NIGHTLY",e.BETA="BETA",e.PRODUCTION="PRODUCTION"}(t.ApplicationBuildType||(t.ApplicationBuildType={})),t.getEmptyApplicationSettings=()=>({sync:{syncWithLocalClients:!1},userABTestNames:[],migratedToSAEX:void 0,desktopLogin:void 0,buildType:void 0,publicUsersSettings:void 0,commonApplicationSettings:void 0}),t.default=(e=(0,t.getEmptyApplicationSettings)(),r)=>{switch(r.type){case n.STORE_APPLICATION_SETTINGS:return{...e,...r.settings||{}};case n.STORE_USER_PUBLIC_SETTING:{const t=r.login,n=e.publicUsersSettings??{},o={...n,[t]:{...n[t]??{},...r.userSettings}};return{...e,publicUsersSettings:o}}case n.DELETE_USER_PUBLIC_SETTINGS:{const t=r.logins,n=Object.keys(e.publicUsersSettings??{}),o=t.filter((e=>n.includes(e.trim())));return 0===o.length||o.forEach((t=>{const r=t.trim();delete e.publicUsersSettings[r]})),{...e}}default:return e}}},30913:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.commonApplicationSettingsSelector=t.publicUsersSettingsSelector=t.userPublicSettingsSelector=t.applicationBuildTypeSelector=t.migratedToSAEXSelector=t.abTestsNamesSelector=void 0;const r={};t.abTestsNamesSelector=e=>e.device.application.settings.userABTestNames,t.migratedToSAEXSelector=e=>e.device.application.settings.migratedToSAEX,t.applicationBuildTypeSelector=e=>e.device.application.settings.buildType,t.userPublicSettingsSelector=(e,t)=>e.device.application.settings.publicUsersSettings?.[t],t.publicUsersSettingsSelector=e=>e.device.application.settings.publicUsersSettings??r,t.commonApplicationSettingsSelector=e=>e.device.application.settings.commonApplicationSettings},87855:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ensureDeviceId=t.initAuthenticatedCarbonApplication=void 0;const n=r(28354),o=r(2246),i=r(95623),a=r(17338),s=r(33007),c=r(70252),u=r(57366),d=r(86056),l=r(75125),p=r(69530),m=r(16038),g=r(78671),f=r(17644),S=r(18216);async function h(e,t,r,{platformInfo:a,settings:s}){i.default.log("initCarbonApplication"),(0,l.initializeAppSessionId)(e),(0,d.setPlatformInfo)(a),await(0,o.initApplicationSettings)(t,e,r,{settings:s}),await function(){if(!(0,o.getCommonAppSetting)("anonymousComputerId"))return(0,o.storeCommonAppSetting)("anonymousComputerId",(0,n.v4)())}(),await((0,o.getCommonAppSetting)("installationId")?Promise.resolve():(0,o.storeCommonAppSetting)("installationId",(0,n.v4)())),await async function(){if(!(0,o.getCommonAppSetting)("eventLoggerQueueKey")){const e=await(0,p.generate64BytesKey)(),t=(0,m.base64BufferToText)(e);return(0,o.storeCommonAppSetting)("eventLoggerQueueKey",t)}}()}t.default=h,t.initAuthenticatedCarbonApplication=async(e,t,r)=>{r===S.InitMode.FirstInit&&await y(e,t);const{storageService:n,storeService:o}=(0,a.getCoreServices)(t);return await h(o,n,r,e),await v(o,n),t},t.ensureDeviceId=async function(){let e=(0,o.getCommonAppSetting)("deviceId");return e||(await(0,o.storeCommonAppSetting)("deviceId",(0,n.v4)().replace(/-/g,"")),e=(0,o.getCommonAppSetting)("deviceId")),e};const y=async(e,t)=>{try{const r=(0,a.getCoreServices)(t),{storeService:n}=r;e.anonymousPartnerId&&n.dispatch((0,s.loadAnonymousPartnerId)(e.anonymousPartnerId)),await(0,u.initAuthentication)(r,e.keys)}catch(e){const t=new Error(`[Application] - setSdkAuthentication: ${e}`);(0,c.sendExceptionLog)({error:t})}},v=async(e,t)=>{const r=await(0,g.getGlobalExtensionSettings)({storeService:e,storageService:t});e.dispatch((0,f.setGlobalExtensionSettingsState)(r))}},86056:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setPlatformInfo=t.getPlatformInfo=void 0;const n=r(9149);let o=Object.assign({},n.defaultPlatformInfo);t.getPlatformInfo=function(){return o},t.setPlatformInfo=function(e){o=Object.assign({},n.defaultPlatformInfo,e)}},75125:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getApplicationSessionId=t.initializeAppSessionId=void 0;const n=r(96997),o=r(28486),i=r(30096);function a(e){return(0,o.appSessionIdSelector)(e.getState())}t.initializeAppSessionId=function(e){a(e)||function(e,t){e.dispatch((0,i.appSessionIdInitialized)(t))}(e,(0,n.default)())},t.getApplicationSessionId=a},2646:(e,t)=>{"use strict";let r;Object.defineProperty(t,"__esModule",{value:!0}),t.getPublicPath=t.setPublicPath=void 0,t.setPublicPath=e=>{if("string"!=typeof e)throw new Error("[Assets] - setPublicPath: provided public path is not a string.");r=e},t.getPublicPath=()=>{if(!r)throw new Error("[Assets] - getPublicPath: trying to access public path before it was set.");return r}},3158:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const n=r(91178),o=r(53325),i=r(81404),a=r(36592),s=r(54622),c=r(21107),u=r(56915),d=r(3914);t.config={commands:{requestExtraDeviceToken:{handler:c.requestExtraDeviceToken},requestEmailToken:{handler:c.requestEmailToken},requestPaymentUpdateAuthenticationToken:{handler:c.requestPaymentUpdateAuthenticationToken},setReactivationStatus:{handler:d.setReactivationStatusHandler},...n.config.commands,...o.config.commands,...i.config.commands,...a.config.commands},queries:{getHasOtp2Type:{selector:u.hasOtp2TypeSelector},getUserOtpType:{selector:u.otpTypeSelector},getLocalAccounts:{selector:u.localAccountsListSelector},getReactivationStatus:{selector:u.reactivationStatusSelector},getAvailableUserVerificationMethods:{selector:u.availableUserVerificationMethodsSelector},...n.config.queries,...o.config.queries,...i.config.queries,...a.config.queries},liveQueries:{liveReactivationStatus:{operator:s.reactivationStatus$},...n.config.liveQueries,...o.config.liveQueries,...i.config.liveQueries,...a.config.liveQueries}}},90678:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),t.ReactivationStatus=t.UserVerificationMethod=void 0;var i=r(57839);Object.defineProperty(t,"UserVerificationMethod",{enumerable:!0,get:function(){return i.UserVerificationMethod}});var a=r(52968);Object.defineProperty(t,"ReactivationStatus",{enumerable:!0,get:function(){return a.ReactivationStatus}}),o(r(25997),t),o(r(93928),t),o(r(24929),t),o(r(27686),t),o(r(61217),t)},93553:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isExtraDeviceToken=t.requestExtraDeviceToken=void 0;const n=r(46298);t.requestExtraDeviceToken=async(e,t)=>{if(!e())return{type:"userNotAuthenticated",message:"No authenticated user"};const r=await t();if((0,n.isApiError)(r))return r;const i=r.token;return o(i)};const o=e=>"string"!=typeof e||0===e.length?{type:"invalidExtraDeviceTokenSentByServer",message:"Invalid extra device token sent by server"}:{type:"extraDeviceToken",extraDeviceToken:e};t.isExtraDeviceToken=e=>"extraDeviceToken"===e.type},75226:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getLocalAccounts=void 0;const n=r(2246),o=r(56915),i=r(63739),a=r(61740);t.getLocalAccounts=async function(e,t){const r=(0,n.getUsersWithPublicSettings)(),s={},c=["localSettings","personalData","personalSettings"];return Promise.all(r.map((async r=>{const n=(0,o.getUserDeviceWasRegisteredWithDeviceKeysSelector)(e.getState(),r),a=[...c,...n?["authentication"]:[]],u=(await Promise.all(a.map((e=>(0,i.isDataStored)(t,r,e))))).every((e=>e));s[r]=u}))).then((()=>r.filter((e=>s[e])))).then((e=>{const t=e.map((e=>({login:e,lastLoginTime:(0,n.getUserPublicSetting)(e,"lastSuccessfulLoginTime")||0}))).sort(((e,t)=>{const r=e.lastLoginTime,n=t.lastLoginTime;return r>n?-1:r<n?1:0}))[0];return e.map((e=>({login:e,hasLoginOtp:(0,n.getUserPublicSetting)(e,"otp2")||!1,isLastSuccessfulLogin:t&&t.login===e,rememberMeType:(0,a.getLocalAccountRememberMeType)(e)??void 0,shouldAskMasterPassword:(0,a.shouldAskMasterPassword)(e)}))).sort(((e,t)=>{const r=e.login.toLowerCase(),n=t.login.toLowerCase();return r.localeCompare(n)}))}))}},37864:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getTokenForKwUser=void 0;const n=r(46298);t.getTokenForKwUser=async(e,t)=>{const{storeService:r}=e,o=await(0,n.getTokens)(r);if((0,n.isApiError)(o))throw new Error(`Error: ${o.code}`);const{tokens:i}=o,a=i.find((e=>e.login===t));if(!a)throw new Error("Email token not found for "+t);return a.token}},21107:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.requestPaymentUpdateAuthenticationToken=t.requestEmailToken=t.requestExtraDeviceToken=void 0;var n=r(61336);Object.defineProperty(t,"requestExtraDeviceToken",{enumerable:!0,get:function(){return n.requestExtraDeviceToken}});var o=r(95626);Object.defineProperty(t,"requestEmailToken",{enumerable:!0,get:function(){return o.requestEmailToken}});var i=r(17717);Object.defineProperty(t,"requestPaymentUpdateAuthenticationToken",{enumerable:!0,get:function(){return i.requestPaymentUpdateAuthenticationToken}})},57366:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.initAuthentication=void 0;const n=r(95623),o=r(33007),i=r(69763),a=r(46298),s=r(56915),c=r(28445);t.initAuthentication=async(e,t)=>{u(e,t),d(e,t),await(0,i.loadLocalUsersAuthenticationDataFromStorage)(e),await l(e,(0,c.checkOrigin)(self))};const u=(e,t)=>{const{storeService:r}=e;r.dispatch((0,o.saveAppKeys)({accessKey:t.appAccess,secretKey:t.appSecret}))},d=(e,t)=>{const{storeService:r}=e;r.dispatch((0,o.saveStyxKeys)({accessKey:t.styxAccess,secretKey:t.styxSecret}))},l=async(e,t)=>{const{storeService:r}=e;try{const e=(0,s.platformInfoSelector)(r.getState()),n=await(0,a.getRemoteTime)(r,"server_tac"!==e.platformName&&"server_leeloo"!==e.platformName||!t?void 0:{tz:(new Date).getTimezoneOffset().toString()});if((0,a.isApiError)(n))throw n;r.dispatch((0,o.saveDashlaneServerDeltaTimestamp)(n.timestamp))}catch(e){(0,n.logDebug)({tag:["Auth"],message:"Error while calling getRemoteTime",details:{error:e}})}}},14498:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.loadRememberMeTypeToStore=void 0;const n=r(98226),o=r(61740),i=r(16593);t.loadRememberMeTypeToStore=function(e){const{storeService:t}=e,r=(0,i.userLoginSelector)(t.getState()),a=(0,o.getLocalAccountRememberMeType)(r);a&&t.dispatch((0,n.setRememberMeTypeAction)(a))}},61336:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.requestExtraDeviceToken=void 0;const n=r(46298),o=r(93553),i=r(16593);t.requestExtraDeviceToken=async e=>{const{storeService:t}=e,r=t.isAuthenticated,a=(0,i.userLoginSelector)(t.getState());if(!a||!r)throw new Error("[Authentication] - requestExtraDeviceToken: User is not authenticated");const s=await(0,o.requestExtraDeviceToken)(r,(()=>(0,n.requestExtraDeviceRegistration)(t,a)));if((0,o.isExtraDeviceToken)(s))return s.extraDeviceToken;throw new Error(s.message)}},17717:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.requestPaymentUpdateAuthenticationToken=void 0;const n=r(90622),o=r(46298),i=r(16593),a=r(27885),s=r(32924),c=r(1577);t.requestPaymentUpdateAuthenticationToken=async function(e){try{const{storeService:t}=e,r=t.getState(),u=(0,i.userLoginSelector)(r);if(!(0,i.isAuthenticatedSelector)(r))return{success:!1};const d=await(0,s.getAuthenticationTokenForCardUpdate)(t,u,{});if((0,o.isApiError)(d))return{success:!1};const l=(0,a.getCurrentTeamId)(r.userSession.spaceData),p=(0,a.isTeamAdminInCurrentSpace)(r.userSession.spaceData),m=(0,a.isBillingAdminInCurrentSpace)(r.userSession.spaceData),g={login:u,uki:(0,n.ukiSelector)(r),teamId:l};let f,S={};if(l&&(p||m)){const e={name:"teamPlans",version:1};if(f=await(0,c.NewCardToken)(g,e),200!==f.code)return{success:!1};S={customerId:f.content.customerId,tokenId:f.content.tokenId}}let h={};const y={name:"premium",version:3},v=await(0,c.NewCardToken)(g,y);return 200!==v.code?{success:!1}:(h={customerId:v.content.customerId,tokenId:v.content.tokenId},{success:!0,accessKey:d.accessKey,creationDateUnix:d.creationDateUnix,expirationDateUnix:d.expirationDateUnix,secretKey:d.secretKey,livemode:d.livemode,b2bPaymentTokens:S,b2cPaymentTokens:h})}catch(e){return{success:!1}}}},95626:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.requestEmailToken=void 0;const n=r(57839),o=r(16593);t.requestEmailToken=async function(e){try{const{storeService:t,wsService:r}=e,n=t.getState(),i=(0,o.userLoginSelector)(n);if(!i)throw new Error("[emailToken] - askServerToSendToken: no current authenticated user");await r.authentication.askServerToSendToken({login:i})}catch(e){return{success:!1,error:{code:n.EmailTokenApiError,message:e.message}}}return{success:!0}}},3914:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setReactivationStatusHandler=void 0;const n=r(48990);t.setReactivationStatusHandler=function({storeService:e},{reactivationStatus:t}){return e.dispatch((0,n.reactivationStatusUpdated)(t)),Promise.resolve()}},57839:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UserVerificationMethod=t.EmailTokenApiError=void 0,t.EmailTokenApiError="SEND_TOKEN_FAILED",function(e){e.MasterPassword="masterPassword",e.Webauthn="webauthn"}(t.UserVerificationMethod||(t.UserVerificationMethod={}))},6231:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.persistUserAuthenticationData=t.loadUserAuthenticationData=void 0;const n=r(56915),o=r(98226),i=r(39408);t.loadUserAuthenticationData=async(e,t)=>{let r;try{const t=e.getInstance();if(!await t.hasAuthenticationData())return Promise.resolve({type:"success"});r=await t.getAuthenticationData()}catch(e){return Promise.resolve({type:"failed",message:i.FailedToReadParseOrValidateAuthenticationData,error:e})}try{t.dispatch((0,o.rehydrateUserAuthenticationData)(r))}catch(e){return Promise.resolve({type:"failed",message:i.FailedToRehydrateAuthenticationData,error:e})}return Promise.resolve({type:"success"})},t.persistUserAuthenticationData=async(e,t)=>{const r=(0,n.userAuthenticationDataSelector)(t.getState()),o=e.getInstance();await o.storeAuthenticationData(r)}},69763:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.loadLocalUsersAuthenticationDataFromStorage=t.persistLocalUsersAuthenticationData=void 0;const n=r(72365),o=r(50058),i=r(70252),a=r(95623),s=r(92263),c=r(56915),u=r(16038),d=r(1860),l=r(56668),p=r(93513),m="authentication.localusers";t.persistLocalUsersAuthenticationData=async(e,t)=>{try{const r=e.getLocalStorage(),o=(0,d.makeKeyDataEncryptorService)();(0,n.setObfuscatingKey)(o);const i=(0,c.localUsersAuthenticationDataSelector)(t.getState()),a=JSON.stringify(i),s=(0,u.utf8ChunkEncode)(a),g=p.encode(s),f=(0,l.utf16ToDeflatedUtf8)(g,{skipUtf8Encoding:!0}),S=await o.getInstance().encrypt(f);await r.writeItem(m,S)}catch(e){const t="Auth",r=s.CarbonError.fromAnyError(e).addContextInfo(t,"persistLocalUsersAuthenticationData");(0,a.logError)({tag:[t],message:`${r}`,details:{error:e}}),(0,i.sendExceptionLog)({error:r})}},t.loadLocalUsersAuthenticationDataFromStorage=async e=>{try{const{storageService:t,storeService:r}=e,i=t.getLocalStorage(),a=(0,n.makeDataEncryptorService)(r);(0,n.setObfuscatingKey)(a);const s=await i.readItem(m);if(!s)return;if("string"!=typeof s)throw new Error("value of authentication.localusers is expected to be a string");const c=await a.getInstance().decrypt(s),d=(0,l.deflatedUtf8ToUtf16)(c,{skipUtf8Decoding:!0}),g=p.decode(d);let f=g;try{f=(0,u.utf8ChunkDecode)(g)}catch(e){}const S=JSON.parse(f);r.dispatch((0,o.loadLocalUsersAuthenticationData)(S))}catch(e){const t="Auth",r=s.CarbonError.fromAnyError(e).addContextInfo(t,"loadLocalUsersAuthenticationDataFromStorage");(0,a.logError)({tag:[t],message:`${r}`,details:{error:e}}),(0,i.sendExceptionLog)({error:r})}}},39408:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isLoadAuthenticationSuccess=t.FailedToRehydrateAuthenticationData=t.FailedToReadParseOrValidateAuthenticationData=void 0,t.FailedToReadParseOrValidateAuthenticationData="Failed to read, parse or validate persisted data",t.FailedToRehydrateAuthenticationData="Failed to rehydrate",t.isLoadAuthenticationSuccess=e=>"object"==typeof e&&"success"===e.type},43739:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.deviceRegistered=t.makeDeviceRegistrationKeys=t.makeLegacyDeviceRegistrationKey=t.DEVICE_REGISTERED=void 0,t.DEVICE_REGISTERED="DEVICE_REGISTERED",t.makeLegacyDeviceRegistrationKey=e=>({type:"uki",uki:e}),t.makeDeviceRegistrationKeys=(e,t)=>({type:"deviceKeys",deviceAccessKey:e,deviceSecretKey:t}),t.deviceRegistered=(e,r,n)=>({type:t.DEVICE_REGISTERED,registrationType:e,persistData:r,login:n})},98226:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setRememberMeTypeAction=t.rehydrateUserAuthenticationData=t.SET_REMEMBER_ME_TYPE=t.REHYDRATE_USER_AUTHENTICATION_DATA=void 0,t.REHYDRATE_USER_AUTHENTICATION_DATA="REHYDRATE_USER_AUTHENTICATION_DATA",t.SET_REMEMBER_ME_TYPE="SET_REMEMBER_ME_TYPE",t.rehydrateUserAuthenticationData=e=>({type:t.REHYDRATE_USER_AUTHENTICATION_DATA,data:e}),t.setRememberMeTypeAction=e=>({type:t.SET_REMEMBER_ME_TYPE,rememberMeType:e})},99932:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getEmptyCurrentUserAuthentication=t.currentUserAuthenticationReducer=void 0;const n=r(48313),o=r(98226),i=r(43739);t.currentUserAuthenticationReducer=(e=(0,t.getEmptyCurrentUserAuthentication)(),r)=>{switch(r.type){case n.CLOSE_SESSION:return(0,t.getEmptyCurrentUserAuthentication)();case i.DEVICE_REGISTERED:if("deviceKeys"===r.registrationType.type){const{deviceAccessKey:t,deviceSecretKey:n}=r.registrationType;return{...e,deviceKeys:{accessKey:t,secretKey:n}}}return e;case o.REHYDRATE_USER_AUTHENTICATION_DATA:return{...e,...r.data};case o.SET_REMEMBER_ME_TYPE:return{...e,rememberMeType:r.rememberMeType};default:return e}},t.getEmptyCurrentUserAuthentication=()=>({deviceKeys:null,rememberMeType:null})},52653:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.authenticationReducer=t.updateLocalUserInfo=t.makeDeviceRegistrationKeys=t.makeLegacyDeviceRegistrationKey=t.deviceRegistered=void 0;var n=r(43739);Object.defineProperty(t,"deviceRegistered",{enumerable:!0,get:function(){return n.deviceRegistered}}),Object.defineProperty(t,"makeLegacyDeviceRegistrationKey",{enumerable:!0,get:function(){return n.makeLegacyDeviceRegistrationKey}}),Object.defineProperty(t,"makeDeviceRegistrationKeys",{enumerable:!0,get:function(){return n.makeDeviceRegistrationKeys}});var o=r(50058);Object.defineProperty(t,"updateLocalUserInfo",{enumerable:!0,get:function(){return o.updateLocalUserInfo}});var i=r(57334);Object.defineProperty(t,"authenticationReducer",{enumerable:!0,get:function(){return i.authenticationReducer}})},48990:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.reactivationStatusUpdated=t.localAccountsListUpdated=void 0;const n=r(52968);t.localAccountsListUpdated=e=>({type:n.LOCAL_ACCOUNTS_LIST_UPDATED,localAccounts:e}),t.reactivationStatusUpdated=e=>({type:n.REACTIVATION_STATUS_UPDATED,reactivationStatus:e})},83803:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.localAccountsAuthenticationReducer=t.getEmptyLocalAccountsAuthenticationState=void 0;const n=r(52968);t.getEmptyLocalAccountsAuthenticationState=()=>({accountsList:[],accountsListInitialized:!1,reactivationStatus:n.ReactivationStatus.CLASSIC}),t.localAccountsAuthenticationReducer=(e=(0,t.getEmptyLocalAccountsAuthenticationState)(),r)=>{switch(r.type){case n.LOCAL_ACCOUNTS_LIST_UPDATED:return{...e,accountsList:r.localAccounts,accountsListInitialized:!0};case n.REACTIVATION_STATUS_UPDATED:return{...e,reactivationStatus:r.reactivationStatus};default:return e}}},52968:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.REACTIVATION_STATUS_UPDATED=t.LOCAL_ACCOUNTS_LIST_UPDATED=t.ReactivationStatus=void 0,function(e){e.DISABLED="DISABLED",e.CLASSIC="CLASSIC",e.WEBAUTHN="WEBAUTHN"}(t.ReactivationStatus||(t.ReactivationStatus={})),t.LOCAL_ACCOUNTS_LIST_UPDATED="LOCAL_ACCOUNTS_LIST_UPDATED",t.REACTIVATION_STATUS_UPDATED="REACTIVATION_STATUS_UPDATED"},50058:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isLocalUserAuthenticationAction=t.updateLocalUserInfo=t.loadLocalUsersAuthenticationData=t.UPDATE_LOCAL_USER_INFO=t.LOAD_LOCAL_USERS_AUTH_DATA_FROM_STORAGE=void 0;const n=r(43739);t.LOAD_LOCAL_USERS_AUTH_DATA_FROM_STORAGE="LOAD_LOCAL_USERS_AUTH_DATA_FROM_STORAGE",t.UPDATE_LOCAL_USER_INFO="UPDATE_LOCAL_USER_INFO",t.loadLocalUsersAuthenticationData=e=>({type:t.LOAD_LOCAL_USERS_AUTH_DATA_FROM_STORAGE,data:e}),t.updateLocalUserInfo=(e,r)=>({type:t.UPDATE_LOCAL_USER_INFO,login:e,data:r}),t.isLocalUserAuthenticationAction=e=>e.type===n.DEVICE_REGISTERED},76156:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getEmptyLocalUsersAuthentication=t.localUsersAuthenticationReducer=void 0;const n=r(16516),o=r(50058),i=r(43739),a=r(17825);t.localUsersAuthenticationReducer=(e=(0,t.getEmptyLocalUsersAuthentication)(),r)=>{if((0,o.isLocalUserAuthenticationAction)(r)){const t=s(e[r.login],r);return t?{...e,[r.login]:t}:(0,n.omit)([r.login],e)}switch(r.type){case o.LOAD_LOCAL_USERS_AUTH_DATA_FROM_STORAGE:return{...e,...r.data};case o.UPDATE_LOCAL_USER_INFO:const t=c();return{...e,[r.login]:{...t,...e[r.login],...r.data}};default:return e}},t.getEmptyLocalUsersAuthentication=()=>({});const s=(e,t)=>{const r=e||c();if(t.type!==i.DEVICE_REGISTERED)return e;{const{registrationType:e}=t;switch(e.type){case"deviceKeys":{const{deviceAccessKey:t}=e;return{...r,deviceAccessKey:t,deviceRegisteredWithLegacyKey:!1}}case"uki":return{...r,deviceRegisteredWithLegacyKey:!0};default:(0,a.assertUnreachable)(e)}}},c=()=>({deviceAccessKey:null,deviceRegisteredWithLegacyKey:!1,ssoActivatedUser:!1})},57334:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.authenticationReducer=t.getEmptyAuthenticationState=void 0;const n=r(98160),o=r(99932),i=r(83803),a=r(76156),s=r(82677),c=r(96171),u=r(88272);t.getEmptyAuthenticationState=()=>({currentUser:(0,o.getEmptyCurrentUserAuthentication)(),localAccounts:(0,i.getEmptyLocalAccountsAuthenticationState)(),localUsers:(0,a.getEmptyLocalUsersAuthentication)(),u2f:(0,s.getEmptyU2FAuthenticationState)(),webAuthnAuthentication:(0,u.getEmptyWebAuthnAuthentication)(),twoFactorAuthentication:(0,c.getEmptyTwoFactorAuthenticationState)()}),t.authenticationReducer=(0,n.combineReducers)({currentUser:o.currentUserAuthenticationReducer,localAccounts:i.localAccountsAuthenticationReducer,localUsers:a.localUsersAuthenticationReducer,u2f:s.u2fAuthenticationReducer,webAuthnAuthentication:u.webAuthnAuthenticationReducer,twoFactorAuthentication:c.TwoFactorAuthenticationReducer})},72355:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.u2fDevicesUpdated=t.U2F_DEVICES_UPDATED=void 0,t.U2F_DEVICES_UPDATED="U2F_DEVICES_UPDATED",t.u2fDevicesUpdated=e=>({type:t.U2F_DEVICES_UPDATED,devices:e})},82677:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.u2fAuthenticationReducer=t.getEmptyU2FAuthenticationState=void 0;const n=r(72355);t.getEmptyU2FAuthenticationState=()=>({u2fDevices:[]}),t.u2fAuthenticationReducer=(e=(0,t.getEmptyU2FAuthenticationState)(),r)=>r.type===n.U2F_DEVICES_UPDATED?{...e,u2fDevices:r.devices}:e},8246:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.webAuthnAvailableAuthenticatorsListUpdated=t.webAuthnAuthenticatorsListUpdated=t.webAuthnAuthenticatorRemoved=t.webAuthnAuthenticatorAdded=t.webAuthnUserIdUpdated=t.WEBAUTHN_AVAILABLE_AUTHENTICATORS_LIST_UPDATED=t.WEBAUTHN_AUTHENTICATORS_LIST_UPDATED=t.WEBAUTHN_AUTHENTICATOR_REMOVED=t.WEBAUTHN_AUTHENTICATOR_ADDED=t.WEBAUTHN_USERID_UPDATED=void 0,t.WEBAUTHN_USERID_UPDATED="WEBAUTHN_USERID_UPDATED",t.WEBAUTHN_AUTHENTICATOR_ADDED="WEBAUTHN_AUTHENTICATOR_ADDED",t.WEBAUTHN_AUTHENTICATOR_REMOVED="WEBAUTHN_AUTHENTICATOR_REMOVED",t.WEBAUTHN_AUTHENTICATORS_LIST_UPDATED="WEBAUTHN_AUTHENTICATORS_LIST_UPDATED",t.WEBAUTHN_AVAILABLE_AUTHENTICATORS_LIST_UPDATED="WEBAUTHN_AVAILABLE_AUTHENTICATORS_LIST_UPDATED",t.webAuthnUserIdUpdated=e=>({type:t.WEBAUTHN_USERID_UPDATED,webAuthnUserId:e}),t.webAuthnAuthenticatorAdded=e=>({type:t.WEBAUTHN_AUTHENTICATOR_ADDED,authenticator:e}),t.webAuthnAuthenticatorRemoved=e=>({type:t.WEBAUTHN_AUTHENTICATOR_REMOVED,credentialId:e}),t.webAuthnAuthenticatorsListUpdated=e=>({type:t.WEBAUTHN_AUTHENTICATORS_LIST_UPDATED,authenticatorsList:e}),t.webAuthnAvailableAuthenticatorsListUpdated=e=>({type:t.WEBAUTHN_AVAILABLE_AUTHENTICATORS_LIST_UPDATED,availableAuthenticatorsList:e})},88272:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.webAuthnAuthenticationReducer=t.getEmptyWebAuthnAuthentication=void 0;const n=r(8246);t.getEmptyWebAuthnAuthentication=()=>({webAuthnUserId:null,authenticators:[]}),t.webAuthnAuthenticationReducer=(e=(0,t.getEmptyWebAuthnAuthentication)(),r)=>{switch(r.type){case n.WEBAUTHN_USERID_UPDATED:return{...e,webAuthnUserId:r.webAuthnUserId};case n.WEBAUTHN_AUTHENTICATOR_ADDED:return{...e,authenticators:[...e.authenticators,r.authenticator]};case n.WEBAUTHN_AUTHENTICATOR_REMOVED:{const t=e.authenticators.filter((e=>e.credentialId!==r.credentialId));return{...e,authenticators:t}}case n.WEBAUTHN_AUTHENTICATORS_LIST_UPDATED:return{...e,authenticators:r.authenticatorsList};case n.WEBAUTHN_AVAILABLE_AUTHENTICATORS_LIST_UPDATED:{const t=r.availableAuthenticatorsList.map((e=>e.credentialId)),n=e.authenticators.map((e=>t.includes(e.credentialId)?{...e,canOpenSession:!0}:{...e,canOpenSession:!1}));return{...e,authenticators:n}}default:return e}}},36592:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const n=r(43037),o=r(5689),i=r(24797),a=r(87463);t.config={commands:{refreshTwoFactorAuthenticationInfo:{handler:i.refreshTwoFactorAuthenticationInfoHandler},...a.config.commands},queries:{getTwoFactorAuthenticationInfo:{selector:o.twoFactorAuthenticationInfoSelector},...a.config.queries},liveQueries:{liveTwoFactorAuthenticationInfo:{operator:n.twoFactorAuthenticationInfo$},...a.config.liveQueries}}},27686:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},81404:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const n=r(54120),o=r(18099),i=r(95475);t.config={commands:{startTwoFactorAuthenticationDisableFlow:{handler:n.startTwoFactorAuthenticationDisableFlow},continueTwoFactorAuthenticationDisableFlow:{handler:n.continueTwoFactorAuthenticationDisableFlow},backTwoFactorAuthenticationDisableFlow:{handler:n.backTwoFactorAuthenticationDisableFlow},stopTwoFactorAuthenticationDisableFlow:{handler:n.stopTwoFactorAuthenticationDisableFlow}},queries:{getTwoFactorAuthenticationDisableStage:{selector:o.getTwoFactorAuthenticationDisableStageData}},liveQueries:{liveTwoFactorAuthenticationDisableStage:{operator:i.twoFactorAuthenticationDisableFlow$}}}},24929:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TwoFactorAuthenticationDisableStages=void 0;var n=r(87632);Object.defineProperty(t,"TwoFactorAuthenticationDisableStages",{enumerable:!0,get:function(){return n.TwoFactorAuthenticationDisableStages}})},44787:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.stopTwoFactorAuthenticationStage=t.updateTwoFactorAuthenticationStage=void 0;const n=r(4478);t.updateTwoFactorAuthenticationStage=e=>({type:n.UPDATE_TWO_FACTOR_AUTHENTICATION_DISABLE_STAGE,data:e}),t.stopTwoFactorAuthenticationStage=()=>({type:n.UPDATE_TWO_FACTOR_AUTHENTICATION_DISABLE_STAGE,data:{stage:void 0}})},4478:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.STOP_TWO_FACTOR_AUTHENTICATION_DISABLE_FLOW=t.UPDATE_TWO_FACTOR_AUTHENTICATION_DISABLE_STAGE=void 0,t.UPDATE_TWO_FACTOR_AUTHENTICATION_DISABLE_STAGE="UPDATE_TWO_FACTOR_AUTHENTICATION_DISABLE_STAGE",t.STOP_TWO_FACTOR_AUTHENTICATION_DISABLE_FLOW="STOP_TWO_FACTOR_AUTHENTICATION_DISABLE_FLOW"},51554:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.twoFactorAuthenticationDisableFlow=t.stopTwoFactorAuthenticationStage=t.updateTwoFactorAuthenticationStage=void 0;var n=r(44787);Object.defineProperty(t,"updateTwoFactorAuthenticationStage",{enumerable:!0,get:function(){return n.updateTwoFactorAuthenticationStage}}),Object.defineProperty(t,"stopTwoFactorAuthenticationStage",{enumerable:!0,get:function(){return n.stopTwoFactorAuthenticationStage}});var o=r(98259);Object.defineProperty(t,"twoFactorAuthenticationDisableFlow",{enumerable:!0,get:function(){return o.twoFactorAuthenticationDisableFlow}})},98259:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.twoFactorAuthenticationDisableFlow=t.getEmptyTwoFactorAuthenticationDisable=void 0;const n=r(4478);t.getEmptyTwoFactorAuthenticationDisable=()=>({stage:void 0}),t.twoFactorAuthenticationDisableFlow=(e=(0,t.getEmptyTwoFactorAuthenticationDisable)(),r)=>r.type===n.UPDATE_TWO_FACTOR_AUTHENTICATION_DISABLE_STAGE?{...e,...r.data}:e},18099:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getTwoFactorAuthenticationDisableFlowData=t.getTwoFactorAuthenticationDisableStageData=void 0;const n=r(46474);t.getTwoFactorAuthenticationDisableStageData=e=>{const{stage:t}=e.userSession.twoFactorAuthenticationDisableFlow,r=n.TwoFactorAuthenticationDisableFlowConfig?.[t]?.viewMapper;return{stage:t,viewData:r?r(e):void 0}},t.getTwoFactorAuthenticationDisableFlowData=e=>{const{flowData:t}=e.userSession.twoFactorAuthenticationDisableFlow;return t}},46474:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TwoFactorAuthenticationDisableFlowStages=t.TwoFactorAuthenticationDisableFlowConfig=void 0;const n=r(87632),o=r(73714),i=r(24216),a=r(18747),s=r(46796);t.TwoFactorAuthenticationDisableFlowConfig={start:{storeMapper:o.startTwoFactorAuthenticationDisableStoreMapper},stop:{currentHandler:s.endTwoFactorAuthenticationHandler,storeMapper:o.endTwoFactorAuthenticationDisableStoreMapper},end:{currentHandler:s.endTwoFactorAuthenticationHandler,storeMapper:o.endTwoFactorAuthenticationDisableStoreMapper},[n.TwoFactorAuthenticationDisableStages.AUTHENTICATION_CODE]:{currentHandler:i.disableTwoFactorAuthenticationCodeHandler,viewMapper:a.disableTwoFactorAuthenticationCodeViewMapper},[n.TwoFactorAuthenticationDisableStages.BACKUP_CODE]:{currentHandler:i.disableTwoFactorAuthenticationCodeHandler,viewMapper:a.disableTwoFactorAuthenticationBackupCodeViewMapper},[n.TwoFactorAuthenticationDisableStages.LOGOUT_REQUIRED]:{currentHandler:i.disableTwoFactorAuthenticationLogoutRequiredHandler}},t.TwoFactorAuthenticationDisableFlowStages=[{stage:n.TwoFactorAuthenticationDisableStages.CONFIRMATION},{stage:n.TwoFactorAuthenticationDisableStages.AUTHENTICATION_CODE},{stage:n.TwoFactorAuthenticationDisableStages.FINALIZING_CHANGES},{stage:n.TwoFactorAuthenticationDisableStages.SUCCESS}]},54120:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.backTwoFactorAuthenticationDisableFlow=t.continueTwoFactorAuthenticationDisableFlow=t.stopTwoFactorAuthenticationDisableFlow=t.startTwoFactorAuthenticationDisableFlow=void 0;const n=r(46474),o=r(51554),i=e=>{const{stage:t}=e.getState().userSession.twoFactorAuthenticationDisableFlow;return{currentIndex:n.TwoFactorAuthenticationDisableFlowStages.findIndex((e=>e.stage===t)),currentStage:t}};t.startTwoFactorAuthenticationDisableFlow=({storeService:e})=>{const{storeMapper:t}=n.TwoFactorAuthenticationDisableFlowConfig.start,r=t?t(e):void 0,i=(0,o.updateTwoFactorAuthenticationStage)({...r,stage:n.TwoFactorAuthenticationDisableFlowStages[0].stage});return e.dispatch(i),Promise.resolve({success:!0})},t.stopTwoFactorAuthenticationDisableFlow=e=>{const{storeService:t}=e;t.dispatch((0,o.stopTwoFactorAuthenticationStage)());const{currentHandler:r,storeMapper:i}=n.TwoFactorAuthenticationDisableFlowConfig.stop,a=i?i(t):void 0;return r?r(e,a):Promise.resolve({success:!0})};const a=(e,t,r,n)=>{const{storeService:o}=e;return t(e,r?r(o):void 0,n)},s=({storeService:e},t)=>{const{currentIndex:r}=i(e);if(r!==n.TwoFactorAuthenticationDisableFlowStages.length-1){const i=(0,o.updateTwoFactorAuthenticationStage)({...t,stage:n.TwoFactorAuthenticationDisableFlowStages[r+1].stage});e.dispatch(i)}return Promise.resolve({success:!0})},c=({storeService:e},t)=>{const{currentIndex:r}=i(e);if(0!==r){const i=(0,o.updateTwoFactorAuthenticationStage)({...t,stage:n.TwoFactorAuthenticationDisableFlowStages[r-1].stage});e.dispatch(i)}return Promise.resolve({success:!0})},u=e=>{const{currentStage:t}=i(e);let r,o=s,a=c;if(n.TwoFactorAuthenticationDisableFlowConfig[t]){const e=n.TwoFactorAuthenticationDisableFlowConfig[t];a=e.backHandler||a,o=e.currentHandler||o,r=e.storeMapper}return{currentHandler:o,backHandler:a,storeMapper:r}};t.continueTwoFactorAuthenticationDisableFlow=(e,t)=>{const{storeService:r}=e,{currentHandler:n,storeMapper:o}=u(r);return a(e,n,o,t)},t.backTwoFactorAuthenticationDisableFlow=(e,t)=>{const{storeService:r}=e,{backHandler:n,storeMapper:o}=u(r);return a(e,n,o,t)}},95475:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.twoFactorAuthenticationDisableFlow$=void 0;const n=r(18948),o=r(3343),i=r(18099);t.twoFactorAuthenticationDisableFlow$=()=>(0,n.pipe)((0,o.map)(i.getTwoFactorAuthenticationDisableStageData),(0,o.distinctUntilChanged)())},24216:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.disableTwoFactorAuthenticationLogoutRequiredHandler=t.disableTwoFactorAuthenticationCodeHandler=void 0;const n=r(51554),o=r(25576),i=r(87632),a=r(46796),s=r(5689),c=r(71291),u=r(18099),d=r(16593),l=r(1965),p=r(53576),m={[p.TwoFactorAuthenticationType.DEVICE_REGISTRATION]:{handler:a.disableTwoFactorAuthenticationTOTP1Handler,showLoading:!1},[p.TwoFactorAuthenticationType.LOGIN]:{handler:a.disableTwoFactorAuthenticationTOTP2Handler,showLoading:!0}};t.disableTwoFactorAuthenticationCodeHandler=async(e,t,r)=>{const d=r.target;if(d){const{storeService:r}=e,o=(0,n.updateTwoFactorAuthenticationStage)({...t,stage:d,stageData:void 0});return r.dispatch(o),{success:!0}}return await(async(e,t,r)=>{const{storeService:d}=e,l=e=>{const t=(0,n.updateTwoFactorAuthenticationStage)({...e});d.dispatch(t)};try{const g=(0,u.getTwoFactorAuthenticationDisableFlowData)(d.getState()),f=(0,s.twoFactorAuthenticationInfoSelector)(d.getState());if(f.status===p.TwoFactorAuthenticationInfoRequestStatus.READY){const{type:s}=f,{authenticationCode:u}=r,p=await(0,c.performTotpVerificationService)(e,u);if(p.success){const{authTicket:r}=p;if(m[s]){const{handler:o,showLoading:c}=m[s];c&&l({...t,stage:i.TwoFactorAuthenticationDisableStages.FINALIZING_CHANGES});const u=await o(e,r);if(u.success)if(u.logoutRequired){const e={...g,logoutRequired:u.logoutRequired};l({...t,stage:i.TwoFactorAuthenticationDisableStages.LOGOUT_REQUIRED,flowData:e})}else await(0,a.refreshTwoFactorAuthenticationInfoHandler)(e),l({...t,stage:i.TwoFactorAuthenticationDisableStages.SUCCESS}),d.dispatch((0,n.stopTwoFactorAuthenticationStage)());else l({...t,stage:i.TwoFactorAuthenticationDisableStages.GENERIC_ERROR,stageData:{...u}})}else l({...t,stage:i.TwoFactorAuthenticationDisableStages.GENERIC_ERROR,stageData:{success:!1,error:{code:o.AuthenticationCode.UNEXPECTED_OTP_TYPE}}})}else l({...t,stageData:p})}else l({...t,stage:i.TwoFactorAuthenticationDisableStages.GENERIC_ERROR,stageData:{success:!1,error:{code:o.AuthenticationCode.UNKNOWN_ERROR}}})}catch(e){l({...t,stageData:{success:!1,error:{code:o.AuthenticationCode.UNKNOWN_ERROR}}})}return{success:!0}})(e,t,r)},t.disableTwoFactorAuthenticationLogoutRequiredHandler=async e=>{const{storeService:t,storageService:r,sessionService:o,applicationModulesAccess:i}=e,a=(0,d.userLoginSelector)(t.getState());return t.dispatch((0,n.stopTwoFactorAuthenticationStage)()),a&&await(0,l.wipeOutLocalAccounts)(r,i,[a]),await o.close(),{success:!0}}},73714:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.endTwoFactorAuthenticationDisableStoreMapper=t.startTwoFactorAuthenticationDisableStoreMapper=void 0;const n=r(56915);t.startTwoFactorAuthenticationDisableStoreMapper=e=>{const t=e.getState();return{stage:void 0,stageData:void 0,flowData:{otpType:(0,n.otpTypeSelector)(t)}}},t.endTwoFactorAuthenticationDisableStoreMapper=()=>({stage:void 0,stageData:void 0,flowData:void 0})},87632:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TwoFactorAuthenticationDisableStages=void 0,function(e){e.CONFIRMATION="CONFIRMATION",e.AUTHENTICATION_CODE="AUTHENTICATION_CODE",e.BACKUP_CODE="BACKUP_CODE",e.FINALIZING_CHANGES="FINALIZING_CHANGES",e.SUCCESS="SUCCESS",e.LOGOUT_REQUIRED="LOGOUT_REQUIRED",e.GENERIC_ERROR="GENERIC_ERROR"}(t.TwoFactorAuthenticationDisableStages||(t.TwoFactorAuthenticationDisableStages={}))},18747:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.disableTwoFactorAuthenticationBackupCodeViewMapper=t.disableTwoFactorAuthenticationCodeViewMapper=void 0;const n=r(25576);t.disableTwoFactorAuthenticationCodeViewMapper=e=>{const{stageData:t}=e.userSession.twoFactorAuthenticationDisableFlow;if(t&&!t.success){const{error:e}=t;return{success:!1,error:e}}},t.disableTwoFactorAuthenticationBackupCodeViewMapper=e=>{const{stageData:t}=e.userSession.twoFactorAuthenticationDisableFlow;if(t&&!t.success){const{error:e}=t;return e.code===n.AuthenticationCode.OTP_NOT_VALID?{success:!1,error:{code:n.AuthenticationCode.BACKUP_CODE_NOT_VALID}}:{success:!1,error:e}}}},53325:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const n=r(17303),o=r(69631),i=r(66574);t.config={commands:{startTwoFactorAuthenticationEnableFlow:{handler:n.startTwoFactorAuthenticationEnableFlow},continueTwoFactorAuthenticationEnableFlow:{handler:n.continueTwoFactorAuthenticationEnableFlow},backTwoFactorAuthenticationEnableFlow:{handler:n.backTwoFactorAuthenticationEnableFlow},stopTwoFactorAuthenticationEnableFlow:{handler:n.stopTwoFactorAuthenticationEnableFlow}},queries:{getTwoFactorAuthenticationEnableStage:{selector:o.getTwoFactorAuthenticationEnableStageData}},liveQueries:{liveTwoFactorAuthenticationEnableStage:{operator:i.twoFactorAuthenticationEnableFlow$}}}},93928:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TwoFactorAuthenticationEnableStages=void 0;var n=r(15179);Object.defineProperty(t,"TwoFactorAuthenticationEnableStages",{enumerable:!0,get:function(){return n.TwoFactorAuthenticationEnableStages}})},44527:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.enableTwoFactorAuthenticationBackupCodesHandler=void 0;const n=r(15441),o=r(69631),i=r(15179);t.enableTwoFactorAuthenticationBackupCodesHandler=async(e,t)=>{const{storeService:r}=e,a=(0,o.getTwoFactorAuthenticationEnableFlowData)(r.getState());return(0,n.updateStore)(e,{...t,stage:a.logoutRequired?i.TwoFactorAuthenticationEnableStages.LOGOUT_REQUIRED:i.TwoFactorAuthenticationEnableStages.SUCCESS}),{success:!0}}},72387:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.enableTwoFactorAuthenticationBackupPhoneHandler=void 0;const n=r(46298),o=r(15441),i=r(69631),a=r(15179),s=r(71291),c=r(53576);t.enableTwoFactorAuthenticationBackupPhoneHandler=async(e,t,r)=>{const{storeService:u}=e;let d=(0,i.getTwoFactorAuthenticationEnableFlowData)(u.getState());const l=await(0,s.requestTOTPActivationService)(e,{...r,country:(0,n.makeSafeCountry)(r.countryCode)});if(l.success){const{seed:n,uri:i,recoveryKeys:s,serverKey:u}=l,{authenticationType:p}=d;p===c.TwoFactorAuthenticationType.LOGIN&&(d[c.TwoFactorAuthenticationType.LOGIN].serverKey=u),d={...d,seed:n,uri:i,recoveryKeys:s},(0,o.updateStore)(e,{...t,stageData:{...l},flowData:{...d,savedValues:{...d?.savedValues,savedCountryCode:r.countryCode,savedPhoneNumber:r.phoneNumber}},stage:a.TwoFactorAuthenticationEnableStages.QR_CODE})}else(0,o.updateStore)(e,{...t,stageData:{...l}});return Promise.resolve({success:!0})}},14732:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.enableTwoFactorAuthenticationCodeHandler=void 0;const n=r(25576),o=r(15441),i=r(15179),a=r(69631),s=r(86370),c=r(52284),u=r(46796),d=r(71291),l=r(53576),p={[l.TwoFactorAuthenticationType.DEVICE_REGISTRATION]:{handler:s.enableTwoFactorAuthenticationTOTP1Handler,showLoading:!1},[l.TwoFactorAuthenticationType.LOGIN]:{handler:c.enableTwoFactorAuthenticationTOTP2Handler,showLoading:!0,errorStage:i.TwoFactorAuthenticationEnableStages.GENERIC_ERROR}};t.enableTwoFactorAuthenticationCodeHandler=async(e,t,{authenticationCode:r})=>{const{storeService:s}=e;try{const n=(0,a.getTwoFactorAuthenticationEnableFlowData)(s.getState()),{authenticationType:c}=n,l=await(0,d.performTotpVerificationService)(e,r,!0);if(!l.success)return(0,o.updateStore)(e,{...t,stageData:l}),{success:!1};if(p[c]){const{authTicket:r}=l,a=n[c],{handler:s,showLoading:d,errorStage:m}=p[c];d&&(0,o.updateStore)(e,{...t,stage:i.TwoFactorAuthenticationEnableStages.FINALIZING_CHANGES});const g=await s(e,r,a);if(g.success){g.logoutRequired||await(0,u.refreshTwoFactorAuthenticationInfoHandler)(e);const r={...n,logoutRequired:g.logoutRequired};(0,o.updateStore)(e,{...t,stage:i.TwoFactorAuthenticationEnableStages.BACKUP_CODES,flowData:r})}else(0,o.updateStore)(e,{...t,stage:m?i.TwoFactorAuthenticationEnableStages.GENERIC_ERROR:i.TwoFactorAuthenticationEnableStages.AUTHENTICATION_CODE,stageData:{...g}})}else(0,o.updateStore)(e,{...t,stage:i.TwoFactorAuthenticationEnableStages.GENERIC_ERROR,stageData:{success:!1}});return{success:!0}}catch(r){return(0,o.updateStore)(e,{...t,stageData:{success:!1,error:{code:n.AuthenticationCode.UNKNOWN_ERROR}}}),{success:!1}}}},68513:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.enableTwoFactorAuthenticationLogoutRequiredHandler=void 0;const n=r(16593),o=r(1965),i=r(19546);t.enableTwoFactorAuthenticationLogoutRequiredHandler=async e=>{const{storeService:t,storageService:r,sessionService:a,applicationModulesAccess:s}=e,c=(0,n.userLoginSelector)(t.getState());return t.dispatch((0,i.stopTwoFactorAuthenticationStage)()),c&&await(0,o.wipeOutLocalAccounts)(r,s,[c]),await a.close(),{success:!0}}},33778:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.enableTwoFactorAuthenticationTypeHandler=void 0;const n=r(57903),o=r(19546),i=r(69631),a=r(15179),s=r(15441),c=r(16194),u=r(16593),d=r(46298),l=r(61984),p=r(92233),m=r(53576);t.enableTwoFactorAuthenticationTypeHandler=async(e,t,{authenticationType:r})=>{const{storeService:g}=e,f=(0,i.getTwoFactorAuthenticationEnableFlowData)(g.getState());if(r===m.TwoFactorAuthenticationType.LOGIN)try{const i=(0,o.updateTwoFactorAuthenticationStage)({...t,stage:a.TwoFactorAuthenticationEnableStages.LOADING});g.dispatch(i);const{eventLoggerService:S}=e,h=g.getState(),y=(0,u.userLoginSelector)(h);if(!y)return(0,s.updateStore)(e,{...t,stage:a.TwoFactorAuthenticationEnableStages.GENERIC_ERROR}),Promise.resolve({success:!1});if(!await(0,n.waitUntilSyncComplete)(g))return(0,s.updateStore)(e,{...t,stage:a.TwoFactorAuthenticationEnableStages.GENERIC_ERROR}),Promise.resolve({success:!1});g.dispatch((0,c.changeMPStart)());const v=await(0,d.getDataForMasterPasswordChange)(g,y,{});if((0,d.isApiError)(v))(0,l.logChangeMasterPasswordError)(S,p.ChangeMasterPasswordError.DownloadError),g.dispatch((0,c.changeMPDone)()),(0,s.updateStore)(e,{...t,stage:a.TwoFactorAuthenticationEnableStages.GENERIC_ERROR});else{const{data:{transactions:e,sharingKeys:n},timestamp:i}=v,s=(0,o.updateTwoFactorAuthenticationStage)({...t,flowData:{...f,authenticationType:r,[m.TwoFactorAuthenticationType.LOGIN]:{transactions:e,sharingKeys:n,timestamp:i,serverKey:""},savedValues:{...f?.savedValues,savedAuthenticationType:r}},stage:a.TwoFactorAuthenticationEnableStages.BACKUP_PHONE});g.dispatch(s)}}catch(r){g.dispatch((0,c.changeMPDone)()),(0,s.updateStore)(e,{...t,stage:a.TwoFactorAuthenticationEnableStages.GENERIC_ERROR})}else{const e=(0,o.updateTwoFactorAuthenticationStage)({...t,flowData:{...f,authenticationType:r,savedValues:{...f?.savedValues,savedAuthenticationType:r}},stage:a.TwoFactorAuthenticationEnableStages.BACKUP_PHONE});g.dispatch(e)}return Promise.resolve({success:!0})}},46667:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(14732),t),o(r(72387),t),o(r(33778),t),o(r(44527),t),o(r(68513),t)},48277:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.stopTwoFactorAuthenticationStage=t.updateTwoFactorAuthenticationStage=t.UPDATE_TWO_FACTOR_AUTHENTICATION_ENABLE_STAGE=void 0,t.UPDATE_TWO_FACTOR_AUTHENTICATION_ENABLE_STAGE="UPDATE_TWO_FACTOR_AUTHENTICATION_ENABLE_STAGE",t.updateTwoFactorAuthenticationStage=e=>({type:t.UPDATE_TWO_FACTOR_AUTHENTICATION_ENABLE_STAGE,data:e}),t.stopTwoFactorAuthenticationStage=()=>({type:t.UPDATE_TWO_FACTOR_AUTHENTICATION_ENABLE_STAGE,data:{stage:void 0}})},19546:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.twoFactorAuthenticationEnableFlow=t.stopTwoFactorAuthenticationStage=t.updateTwoFactorAuthenticationStage=void 0;var n=r(48277);Object.defineProperty(t,"updateTwoFactorAuthenticationStage",{enumerable:!0,get:function(){return n.updateTwoFactorAuthenticationStage}}),Object.defineProperty(t,"stopTwoFactorAuthenticationStage",{enumerable:!0,get:function(){return n.stopTwoFactorAuthenticationStage}});var o=r(15896);Object.defineProperty(t,"twoFactorAuthenticationEnableFlow",{enumerable:!0,get:function(){return o.twoFactorAuthenticationEnableFlow}})},15896:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.twoFactorAuthenticationEnableFlow=t.getEmptyTwoFactorAuthenticationEnable=void 0;const n=r(48277);t.getEmptyTwoFactorAuthenticationEnable=()=>({stage:void 0}),t.twoFactorAuthenticationEnableFlow=(e=(0,t.getEmptyTwoFactorAuthenticationEnable)(),r)=>r.type===n.UPDATE_TWO_FACTOR_AUTHENTICATION_ENABLE_STAGE?{...e,...r.data}:e},69631:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getTwoFactorAuthenticationEnableFlowData=t.getTwoFactorAuthenticationEnableStageData=void 0;const n=r(13610);t.getTwoFactorAuthenticationEnableStageData=e=>{const{stage:t}=e.userSession.twoFactorAuthenticationEnableFlow,r=n.TwoFactorAuthenticationEnableFlowConfig?.[t]?.viewMapper,o=e.userSession.twoFactorAuthenticationEnableFlow?.flowData?.savedValues;return{stage:t,viewData:r?r(e):void 0,savedValues:o}},t.getTwoFactorAuthenticationEnableFlowData=e=>{const{flowData:t}=e.userSession.twoFactorAuthenticationEnableFlow;return t}},13610:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TwoFactorAuthenticationEnableFlowStages=t.TwoFactorAuthenticationEnableFlowConfig=void 0;const n=r(15179),o=r(62669),i=r(58206),a=r(46667),s=r(46796);t.TwoFactorAuthenticationEnableFlowConfig={start:{storeMapper:o.startTwoFactorAuthenticationEnableStoreMapper},stop:{currentHandler:s.endTwoFactorAuthenticationHandler,storeMapper:o.endTwoFactorAuthenticationEnableStoreMapper},end:{currentHandler:s.endTwoFactorAuthenticationHandler,storeMapper:o.endTwoFactorAuthenticationEnableStoreMapper},[n.TwoFactorAuthenticationEnableStages.AUTHENTICATION_TYPE]:{currentHandler:a.enableTwoFactorAuthenticationTypeHandler,viewMapper:i.enableTwoFactorAuthenticationTypeViewMapper},[n.TwoFactorAuthenticationEnableStages.BACKUP_PHONE]:{currentHandler:a.enableTwoFactorAuthenticationBackupPhoneHandler,viewMapper:i.enableTwoFactorAuthenticationBackupPhoneViewMapper},[n.TwoFactorAuthenticationEnableStages.QR_CODE]:{viewMapper:i.enableTwoFactorAuthenticationQRCodeViewMapper},[n.TwoFactorAuthenticationEnableStages.AUTHENTICATION_CODE]:{currentHandler:a.enableTwoFactorAuthenticationCodeHandler,viewMapper:i.enableTwoFactorAuthenticationCodeViewMapper},[n.TwoFactorAuthenticationEnableStages.BACKUP_CODES]:{currentHandler:a.enableTwoFactorAuthenticationBackupCodesHandler,viewMapper:i.enableTwoFactorAuthenticationBackupCodesViewMapper},[n.TwoFactorAuthenticationEnableStages.LOGOUT_REQUIRED]:{currentHandler:a.enableTwoFactorAuthenticationLogoutRequiredHandler}},t.TwoFactorAuthenticationEnableFlowStages=[{stage:n.TwoFactorAuthenticationEnableStages.AUTHENTICATION_TYPE},{stage:n.TwoFactorAuthenticationEnableStages.BACKUP_PHONE},{stage:n.TwoFactorAuthenticationEnableStages.QR_CODE},{stage:n.TwoFactorAuthenticationEnableStages.AUTHENTICATION_CODE},{stage:n.TwoFactorAuthenticationEnableStages.FINALIZING_CHANGES},{stage:n.TwoFactorAuthenticationEnableStages.BACKUP_CODES},{stage:n.TwoFactorAuthenticationEnableStages.SUCCESS}]},17303:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.backTwoFactorAuthenticationEnableFlow=t.continueTwoFactorAuthenticationEnableFlow=t.stopTwoFactorAuthenticationEnableFlow=t.startTwoFactorAuthenticationEnableFlow=void 0;const n=r(13610),o=r(19546),i=e=>e.userSession.twoFactorAuthenticationEnableFlow,a=e=>{const{stage:t}=i(e.getState());return{currentIndex:n.TwoFactorAuthenticationEnableFlowStages.findIndex((e=>e.stage===t)),currentStage:t}};t.startTwoFactorAuthenticationEnableFlow=({storeService:e})=>{const{storeMapper:t}=n.TwoFactorAuthenticationEnableFlowConfig.start,r=t?t(e):void 0,i=(0,o.updateTwoFactorAuthenticationStage)({...r,stage:n.TwoFactorAuthenticationEnableFlowStages[0].stage});return e.dispatch(i),Promise.resolve({success:!0})},t.stopTwoFactorAuthenticationEnableFlow=e=>{const{storeService:t}=e;t.dispatch((0,o.stopTwoFactorAuthenticationStage)());const{currentHandler:r,storeMapper:i}=n.TwoFactorAuthenticationEnableFlowConfig.stop,a=i?i(t):void 0;return r?r(e,a):Promise.resolve({success:!0})};const s=(e,t,r,n)=>{const{storeService:o}=e;return t(e,r?r(o):void 0,n)},c=({storeService:e},t)=>{const{currentIndex:r}=a(e);if(r!==n.TwoFactorAuthenticationEnableFlowStages.length-1){const i=(0,o.updateTwoFactorAuthenticationStage)({...t,stage:n.TwoFactorAuthenticationEnableFlowStages[r+1].stage});e.dispatch(i)}return Promise.resolve({success:!0})},u=({storeService:e},t)=>{const{currentIndex:r}=a(e);if(0!==r){const i=(0,o.updateTwoFactorAuthenticationStage)({...t,stage:n.TwoFactorAuthenticationEnableFlowStages[r-1].stage});e.dispatch(i)}return Promise.resolve({success:!0})},d=e=>{const{currentStage:t}=a(e);let r,o=c,i=u;if(n.TwoFactorAuthenticationEnableFlowConfig[t]){const e=n.TwoFactorAuthenticationEnableFlowConfig[t];i=e.backHandler||i,o=e.currentHandler||o,r=e.storeMapper}return{currentHandler:o,backHandler:i,storeMapper:r}};t.continueTwoFactorAuthenticationEnableFlow=(e,t)=>{const{storeService:r}=e,{currentHandler:n,storeMapper:o}=d(r);return s(e,n,o,t)},t.backTwoFactorAuthenticationEnableFlow=(e,t)=>{const{storeService:r}=e,{backHandler:n,storeMapper:a}=d(r);return(e=>{const t=i(e.getState()),r=(0,o.updateTwoFactorAuthenticationStage)({...t,stageData:void 0});e.dispatch(r)})(r),s(e,n,a,t)}},15441:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.updateStore=void 0;const n=r(19546);t.updateStore=({storeService:e},t)=>{const r=(0,n.updateTwoFactorAuthenticationStage)({...t});e.dispatch(r)}},66574:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.twoFactorAuthenticationEnableFlow$=void 0;const n=r(18948),o=r(3343),i=r(69631);t.twoFactorAuthenticationEnableFlow$=()=>(0,n.pipe)((0,o.map)(i.getTwoFactorAuthenticationEnableStageData),(0,o.distinctUntilChanged)())},62669:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.endTwoFactorAuthenticationEnableStoreMapper=t.startTwoFactorAuthenticationEnableStoreMapper=void 0,t.startTwoFactorAuthenticationEnableStoreMapper=()=>({stage:void 0,stageData:void 0,flowData:void 0}),t.endTwoFactorAuthenticationEnableStoreMapper=()=>({stage:void 0,stageData:void 0,flowData:void 0})},15179:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TwoFactorAuthenticationEnableStages=t.TwoFactorAuthenticationBackupPhoneErrorCode=void 0,function(e){e[e.INVALID_FORMAT=0]="INVALID_FORMAT",e[e.UNKNOWN_ERROR=1]="UNKNOWN_ERROR"}(t.TwoFactorAuthenticationBackupPhoneErrorCode||(t.TwoFactorAuthenticationBackupPhoneErrorCode={})),function(e){e.AUTHENTICATION_TYPE="AUTHENTICATION_TYPE",e.BACKUP_PHONE="BACKUP_PHONE",e.QR_CODE="QR_CODE",e.AUTHENTICATION_CODE="AUTHENTICATION_CODE",e.LOADING="LOADING",e.FINALIZING_CHANGES="FINALIZING_CHANGES",e.BACKUP_CODES="BACKUP_CODES",e.GENERIC_ERROR="GENERIC_ERROR",e.LOGOUT_REQUIRED="LOGOUT_REQUIRED",e.SUCCESS="SUCCESS"}(t.TwoFactorAuthenticationEnableStages||(t.TwoFactorAuthenticationEnableStages={}))},58206:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.enableTwoFactorAuthenticationBackupCodesViewMapper=t.enableTwoFactorAuthenticationCodeViewMapper=t.enableTwoFactorAuthenticationQRCodeViewMapper=t.enableTwoFactorAuthenticationBackupPhoneViewMapper=t.enableTwoFactorAuthenticationTypeViewMapper=void 0;const n=r(46298);t.enableTwoFactorAuthenticationTypeViewMapper=()=>({currentStep:1,totalSteps:5}),t.enableTwoFactorAuthenticationBackupPhoneViewMapper=e=>{const t=(0,n.makeSafeCountry)(e.device.platform.location.country),{stageData:r}=e.userSession.twoFactorAuthenticationEnableFlow;return{currentStep:2,totalSteps:5,countryCode:t,...r}},t.enableTwoFactorAuthenticationQRCodeViewMapper=e=>{const{uri:t,seed:r}=e.userSession.twoFactorAuthenticationEnableFlow.flowData;return{currentStep:3,totalSteps:5,uri:t,seed:r}},t.enableTwoFactorAuthenticationCodeViewMapper=e=>{const{stageData:t}=e.userSession.twoFactorAuthenticationEnableFlow;if(t){const{error:t}=e.userSession.twoFactorAuthenticationEnableFlow.stageData;return{currentStep:4,totalSteps:5,error:t}}return{currentStep:4,totalSteps:5}},t.enableTwoFactorAuthenticationBackupCodesViewMapper=e=>{const{recoveryKeys:t}=e.userSession.twoFactorAuthenticationEnableFlow.flowData;return{currentStep:5,totalSteps:5,recoveryKeys:t}}},6836:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TwoFactorAuthStatusError=t.TwoFactorAuthStatusRequested=t.TwoFactorAuthStatusUpdated=t.TWO_FACTOR_AUTHENTICATION_INFO_ERROR=t.TWO_FACTOR_AUTHENTICATION_INFO_REQUESTED=t.TWO_FACTOR_AUTHENTICATION_INFO_UPDATED=void 0,t.TWO_FACTOR_AUTHENTICATION_INFO_UPDATED="TWO_FACTOR_AUTHENTICATION_INFO_UPDATED",t.TWO_FACTOR_AUTHENTICATION_INFO_REQUESTED="TWO_FACTOR_AUTHENTICATION_INFO_REQUESTED",t.TWO_FACTOR_AUTHENTICATION_INFO_ERROR="TWO_FACTOR_AUTHENTICATION_INFO_ERROR",t.TwoFactorAuthStatusUpdated=e=>({type:t.TWO_FACTOR_AUTHENTICATION_INFO_UPDATED,info:e}),t.TwoFactorAuthStatusRequested=()=>({type:t.TWO_FACTOR_AUTHENTICATION_INFO_REQUESTED}),t.TwoFactorAuthStatusError=()=>({type:t.TWO_FACTOR_AUTHENTICATION_INFO_ERROR})},96171:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TwoFactorAuthenticationReducer=t.getEmptyTwoFactorAuthenticationState=void 0;const n=r(53576),o=r(6836),i=r(16478);t.getEmptyTwoFactorAuthenticationState=()=>({status:n.TwoFactorAuthenticationInfoRequestStatus.UNKNOWN}),t.TwoFactorAuthenticationReducer=(e=(0,t.getEmptyTwoFactorAuthenticationState)(),r)=>{const a=r?.info?.type;switch(r.type){case o.TWO_FACTOR_AUTHENTICATION_INFO_REQUESTED:return{status:n.TwoFactorAuthenticationInfoRequestStatus.PENDING};case o.TWO_FACTOR_AUTHENTICATION_INFO_ERROR:return{status:n.TwoFactorAuthenticationInfoRequestStatus.ERROR};case o.TWO_FACTOR_AUTHENTICATION_INFO_UPDATED:return{...r.info,isTwoFactorAuthenticationEnabled:i.TwoFactorAuthenticationEnabled.includes(a),status:n.TwoFactorAuthenticationInfoRequestStatus.READY};default:return e}}},87463:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const n=r(40970),o=r(70245),i=r(60262),a=r(24217);t.config={commands:{removeU2FAuthenticator:{handler:n.removeU2FAuthenticatorHandler},refreshU2FDevicesList:{handler:o.refreshU2FDevicesListHandler}},queries:{getU2FDevicesList:{selector:a.listU2FDevicesSelector}},liveQueries:{liveU2FDevicesList:{operator:i.listU2FDevices$}}}},61217:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RefreshU2FErrorCode=t.RemoveU2FAuthenticatorError=void 0,function(e){e.UNKNOWN_ERROR="UNKNOWN_ERROR",e.NO_KEYHANDLE_FOUND="NO_KEYHANDLE_FOUND",e.WRONG_AUTHENTICATION_CODE="WRONG_AUTHENTICATION_CODE"}(t.RemoveU2FAuthenticatorError||(t.RemoveU2FAuthenticatorError={})),function(e){e[e.UNKNOWN_ERROR=0]="UNKNOWN_ERROR"}(t.RefreshU2FErrorCode||(t.RefreshU2FErrorCode={}))},70245:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.refreshU2FDevicesListHandler=void 0;const n=r(46298),o=r(16593),i=r(61217),a=r(72355);t.refreshU2FDevicesListHandler=async e=>{try{const{storeService:t}=e,r=t.isAuthenticated,s=(0,o.userLoginSelector)(t.getState());if(!s||!r)return{success:!1,error:{code:i.RefreshU2FErrorCode.UNKNOWN_ERROR}};const c=await(0,n.getU2FDevices)(t,s);return(0,n.isApiError)(c)?{success:!1,error:{code:i.RefreshU2FErrorCode.UNKNOWN_ERROR}}:(t.dispatch((0,a.u2fDevicesUpdated)(c.u2fDevices)),{success:!0})}catch(e){return{success:!1,error:{code:i.RefreshU2FErrorCode.UNKNOWN_ERROR}}}}},40970:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.removeU2FAuthenticatorHandler=void 0;const n=r(14656),o=r(92263),i=r(46298),a=r(70252),s=r(16593),c=r(28287),u=r(61217),d=r(70245),l=r(17387);t.removeU2FAuthenticatorHandler=async(e,t)=>{try{const{storeService:r}=e,n=r.getState(),o=r.isAuthenticated,a=(0,s.userLoginSelector)(n);if(!a||!o)return{success:!1,error:{code:u.RemoveU2FAuthenticatorError.UNKNOWN_ERROR}};const{authenticationCode:l,keyHandle:p}=t,m=await(0,i.performTotpVerification)(r,{login:a,otp:l});if((0,i.isApiError)(m))return(0,c.handlePerformValidationError)(m,!0);const{authTicket:g}=m,f=await(0,i.removeU2FAuthenticator)(r,a,{authTicket:g,keyHandle:p});return(0,i.isApiError)(f)?{success:!1,error:{code:u.RemoveU2FAuthenticatorError.UNKNOWN_ERROR}}:(await(0,d.refreshU2FDevicesListHandler)(e),{success:!0})}catch(e){const t=o.CarbonError.fromAnyError(e).addContextInfo("U2F","removeU2FAuthenticatorHandler");return(0,a.sendExceptionLog)({error:t}),{success:!1,error:{code:(0,o.isCarbonError)(e)&&e.errorCode===n.HttpErrorCode.NETWORK_ERROR?l.AuthenticationCode.NETWORK_ERROR:u.RemoveU2FAuthenticatorError.UNKNOWN_ERROR}}}}},60262:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.listU2FDevices$=void 0;const n=r(18948),o=r(3343),i=r(24217);t.listU2FDevices$=()=>(0,n.pipe)((0,o.map)(i.listU2FDevicesSelector),(0,o.distinctUntilChanged)())},24217:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.listU2FDevicesSelector=void 0,t.listU2FDevicesSelector=e=>e.authentication.u2f.u2fDevices},16478:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ENFORCE_2FA_POLICY_REFRESH_TIMER_INTERVAL=t.TwoFactorAuthenticationEnabled=void 0;const n=r(53576);t.TwoFactorAuthenticationEnabled=[n.TwoFactorAuthenticationType.DEVICE_REGISTRATION,n.TwoFactorAuthenticationType.LOGIN,n.TwoFactorAuthenticationType.SSO],t.ENFORCE_2FA_POLICY_REFRESH_TIMER_INTERVAL=9e5},56391:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.disableTwoFactorAuthenticationTOTP1Handler=void 0;const n=r(46298),o=r(25576);t.disableTwoFactorAuthenticationTOTP1Handler=async(e,t)=>{const{storeService:r}=e,{login:i}=r.getAccountInfo(),a=await(0,n.deactivateTotpVerification)(r,i,{authTicket:t});return(0,n.isApiError)(a)?{success:!1,error:{code:o.AuthenticationCode.UNKNOWN_ERROR}}:{success:!0}}},99445:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.disableTwoFactorAuthenticationTOTP2Handler=void 0;const n=r(61740),o=r(46298),i=r(33740),a=r(57903),s=r(16194),c=r(16593),u=r(25576),d=r(16356),l=r(47820);t.disableTwoFactorAuthenticationTOTP2Handler=async(e,t)=>{const{applicationModulesAccess:r,storeService:p,masterPasswordEncryptorService:m,sessionService:g,storageService:f}=e,S=p.getState(),h=(0,c.userLoginSelector)(S);try{if(!h)throw new Error("2FA Disable Flow - Login not available");if((0,c.isRemoteKeyActivatedSelector)(S))throw console.error("Disable 2FA unavailable: RK account"),new Error("2FA Disable Flow - Unavailable due to RemoteKey Account");if(!await(0,a.waitUntilSyncComplete)(p))return{success:!1,error:{code:u.AuthenticationCode.UNKNOWN_SYNC_ERROR}};p.dispatch((0,s.changeMPStart)());const y=r.createClients();await y.session.commands.prepareLocalDataFlush();const v=await(0,o.getDataForMasterPasswordChange)(p,h,{});if((0,o.isApiError)(v))throw new Error("2FA Disable Flow - Unable to getDataForMasterPasswordChange");const E=(0,c.serverKeySelector)(S);if(!(0,i.isOtpStatusValid)(v.otpStatus,E))throw new Error("2FA Disable Flow - OTP status is invalid");const{timestamp:A}=v,{transactions:_,sharingKeys:T}=v.data,I=await(0,i.deCipherAllTransactions)(g,m,_,!1),b=p.getUserSession().masterPassword,w=e.localStorageService.getInstance(),C=await w.doesLocalKeyExist();let D=null;C&&(D=await w.getLocalKey());const{publicKey:O}=T,P=await(0,i.decipherPrivateKey)(p,m,T);await(0,n.cleanRememberMeStorageData)(p,f);const N="",R=(0,i.returnProperCryptoConfig)(p);m.setInstance({raw:b},N,R),p.dispatch((0,d.updateServerKey)(N));const M={type:"email_token"};p.dispatch((0,d.updateRemoteKey)(null));const L=await(0,i.cipherTransactionWithNewMP)(p,g,m,I,null,!1),U=await(0,i.cipherPrivateKey)(m,P),k={timestamp:A,transactions:(0,i.formatTransaction)(L),updateVerification:M,sharingKeys:{publicKey:O,privateKey:U},authTicket:t},F=await(0,o.uploadDataForMasterPasswordChange)(p,h,k);if((0,o.isApiError)(F))throw(0,i.revertOnError)(e,m,{currentPassword:b,serverKey:E}),new Error("2FA Disable Flow - Unable to uploadDataForMasterPasswordChange");D&&await g.getInstance().user.persistLocalKey(D),await y.session.commands.flushLocalData(),await(0,l.storeSessionCredentialForRecovery)(p,e.localStorageService)}catch(e){return p.dispatch((0,s.changeMPDone)()),{success:!1,error:{code:u.AuthenticationCode.UNKNOWN_ERROR}}}let y=!0;try{const e=await(0,o.confirmMasterPasswordChangeDone)(p,h,{});if((0,o.isApiError)(e))throw new Error("2FA Disable Flow - Failed to confirmMasterPasswordChangeDone");y=!1}catch(e){throw new Error("2FA Disable Flow - Failed to confirmMasterPasswordChangeDone")}return p.dispatch((0,s.changeMPDone)()),{success:!0,logoutRequired:y}}},86370:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.enableTwoFactorAuthenticationTOTP1Handler=void 0;const n=r(35823);t.enableTwoFactorAuthenticationTOTP1Handler=async(e,t)=>await(0,n.completeTotpActivationHandler)(e,t)},52284:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.enableTwoFactorAuthenticationTOTP2Handler=void 0;const n=r(61740),o=r(46298),i=r(33740),a=r(16593),s=r(25576),c=r(47820),u=r(16194),d=r(16356);t.enableTwoFactorAuthenticationTOTP2Handler=async(e,t,r)=>{const{timestamp:l,transactions:p,sharingKeys:m,serverKey:g}=r;if(!g)throw new Error("[2FA - Enable] - Empty server key");const{applicationModulesAccess:f,storeService:S,masterPasswordEncryptorService:h,sessionService:y,storageService:v}=e,E=S.getState();if((0,a.isRemoteKeyActivatedSelector)(E))return console.error("Enable 2FA unavailable: RK account"),{success:!1,error:{code:s.AuthenticationCode.UNKNOWN_ERROR}};const A=f.createClients();await A.session.commands.prepareLocalDataFlush();const _=(0,a.userLoginSelector)(E);if(!_)return{success:!1,error:{code:s.AuthenticationCode.UNKNOWN_ERROR}};const T=e.localStorageService.getInstance();let I=null;await T.doesLocalKeyExist()&&(I=await T.getLocalKey());try{const r=await(0,i.deCipherAllTransactions)(y,h,p,!1),{publicKey:a}=m,s=await(0,i.decipherPrivateKey)(S,h,m);await(0,n.cleanRememberMeStorageData)(S,v);const u={type:"totp_login",serverKey:g},f=(0,i.returnProperCryptoConfig)(S),E=S.getUserSession().masterPassword;h.setInstance({raw:E},g,f);const T=await(0,i.cipherTransactionWithNewMP)(S,y,h,r,null,!1),b=await(0,i.cipherPrivateKey)(h,s),w={timestamp:l,transactions:(0,i.formatTransaction)(T),updateVerification:u,sharingKeys:{publicKey:a,privateKey:b},authTicket:t},C=await(0,o.uploadDataForMasterPasswordChange)(S,_,w);if((0,o.isApiError)(C))throw new Error("2FA Enable Flow - Unable to uploadDataForMasterPasswordChange");S.dispatch((0,d.updateServerKey)(g)),I&&await y.getInstance().user.persistLocalKey(I),await A.session.commands.flushLocalData(),await(0,c.storeSessionCredentialForRecovery)(S,e.localStorageService)}catch(t){return(e=>{const{storeService:t,masterPasswordEncryptorService:r,remoteDataEncryptorService:n}=e,o=t.getState(),s=(0,a.isRemoteKeyActivatedSelector)(o)?n:r,c=t.getUserSession().masterPassword;(0,i.revertOnError)(e,s,{currentPassword:c,serverKey:""})})(e),S.dispatch((0,u.changeMPDone)()),{success:!1,error:{code:s.AuthenticationCode.UNKNOWN_ERROR}}}let b=!0;try{const e=await(0,o.confirmMasterPasswordChangeDone)(S,_,{});if((0,o.isApiError)(e))throw new Error("2FA Enable Flow - Failed to confirmMasterPasswordChangeDone");b=!1}catch(e){}return S.dispatch((0,u.changeMPDone)()),{success:!0,logoutRequired:b}}},35823:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.completeTotpActivationHandler=void 0;const n=r(46298),o=r(25576),i=r(16593),a=r(34569);t.completeTotpActivationHandler=async(e,t)=>{const{storeService:r}=e,s=r.getState(),c=(0,i.userLoginSelector)(s);if(!c)return{success:!1,error:{code:o.AuthenticationCode.UNKNOWN_ERROR}};const u=await(0,a.completeTotpActivation)(r,c,{authTicket:t});return(0,n.isApiError)(u)?{success:!1,error:{code:u.code}}:{success:!0}}},49109:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.endTwoFactorAuthenticationHandler=void 0;const n=r(92233),o=r(16194);t.endTwoFactorAuthenticationHandler=async({sessionService:e,storeService:t})=>(t.dispatch((0,o.changeMPDone)()),await e.getInstance().user.attemptSync(n.Trigger.SettingsChange),{success:!0})},46796:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.endTwoFactorAuthenticationHandler=t.disableTwoFactorAuthenticationTOTP1Handler=t.disableTwoFactorAuthenticationTOTP2Handler=t.refreshTwoFactorAuthenticationInfoHandler=void 0;var n=r(24797);Object.defineProperty(t,"refreshTwoFactorAuthenticationInfoHandler",{enumerable:!0,get:function(){return n.refreshTwoFactorAuthenticationInfoHandler}});var o=r(99445);Object.defineProperty(t,"disableTwoFactorAuthenticationTOTP2Handler",{enumerable:!0,get:function(){return o.disableTwoFactorAuthenticationTOTP2Handler}});var i=r(56391);Object.defineProperty(t,"disableTwoFactorAuthenticationTOTP1Handler",{enumerable:!0,get:function(){return i.disableTwoFactorAuthenticationTOTP1Handler}});var a=r(49109);Object.defineProperty(t,"endTwoFactorAuthenticationHandler",{enumerable:!0,get:function(){return a.endTwoFactorAuthenticationHandler}})},24797:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.refreshTwoFactorAuthenticationInfoHandler=void 0;const n=r(16593),o=r(6836),i=r(71291);t.refreshTwoFactorAuthenticationInfoHandler=async e=>{const{storeService:t,wsService:r}=e;try{const e=t.isAuthenticated,a=(0,n.userLoginSelector)(t.getState());return t.dispatch((0,o.TwoFactorAuthStatusRequested)()),a&&e?!1===(await(0,i.refreshTwoFactorAuthenticationInfoService)(t,r)).success?(t.dispatch((0,o.TwoFactorAuthStatusError)()),{success:!1}):{success:!0}:(t.dispatch((0,o.TwoFactorAuthStatusError)()),{success:!1})}catch(e){return t.dispatch((0,o.TwoFactorAuthStatusError)()),{success:!1}}}},43037:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.twoFactorAuthenticationInfo$=void 0;const n=r(18948),o=r(3343),i=r(5689);t.twoFactorAuthenticationInfo$=()=>(0,n.pipe)((0,o.map)(i.twoFactorAuthenticationInfoSelector),(0,o.distinctUntilChanged)())},5689:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.twoFactorAuthenticationInfoSelector=void 0,t.twoFactorAuthenticationInfoSelector=e=>e.authentication.twoFactorAuthentication},71291:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.requestTOTPActivationService=t.refreshTwoFactorAuthenticationInfoService=t.performTotpVerificationService=void 0;var n=r(14762);Object.defineProperty(t,"performTotpVerificationService",{enumerable:!0,get:function(){return n.performTotpVerificationService}});var o=r(71938);Object.defineProperty(t,"refreshTwoFactorAuthenticationInfoService",{enumerable:!0,get:function(){return o.refreshTwoFactorAuthenticationInfoService}});var i=r(56733);Object.defineProperty(t,"requestTOTPActivationService",{enumerable:!0,get:function(){return i.requestTOTPActivationService}})},14762:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.performTotpVerificationService=void 0;const n=r(46298),o=r(92263),i=r(14656),a=r(25576),s=r(28287),c=r(16593);t.performTotpVerificationService=async(e,t,r=!1)=>{const{storeService:u}=e,d=u.getState(),l=(0,c.userLoginSelector)(d);if(!l)return{success:!1,error:{code:a.AuthenticationCode.UNKNOWN_ERROR}};try{const e=await(0,n.performTotpVerification)(u,{login:l,otp:t,activationFlow:r});if((0,n.isApiError)(e))return(0,s.handlePerformValidationError)(e,!0);const{authTicket:o}=e;return{success:!0,authTicket:o}}catch(e){return{success:!1,error:{code:(0,o.isCarbonError)(e)&&e.errorCode===i.HttpErrorCode.NETWORK_ERROR?a.AuthenticationCode.NETWORK_ERROR:a.AuthenticationCode.UNKNOWN_ERROR}}}}},71938:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.refreshTwoFactorAuthenticationInfoService=void 0;const n=r(46298),o=r(16593),i=r(16478),a=r(56915),s=r(6836),c=r(53576),u={email_token:c.TwoFactorAuthenticationType.EMAIL_TOKEN,totp_login:c.TwoFactorAuthenticationType.LOGIN,totp_device_registration:c.TwoFactorAuthenticationType.DEVICE_REGISTRATION,sso:c.TwoFactorAuthenticationType.SSO};t.refreshTwoFactorAuthenticationInfoService=async(e,t)=>{try{const r=(0,o.userLoginSelector)(e.getState()),d=await(0,n.getTwoFactorAuthenticationStatus)(e,r);if((0,n.isApiError)(d))return{success:!1};const l=u[d.type],p=i.TwoFactorAuthenticationEnabled.includes(l);let m=!1;const g=await t.premium.status({login:(0,o.userLoginSelector)(e.getState()),uki:(0,a.ukiSelector)(e.getState()),spaces:!0}),{spaces:f}=g;f&&(m=f.some((e=>{const{info:{twoFAEnforced:t}}=e;return c.ENFORCE_TWO_FACTOR_AUTHENTICATION_ENABLED_VALUES.includes(t)})));const S=!p&&m,h={...d,isTwoFactorAuthenticationEnabled:p,isTwoFactorAuthenticationEnforced:m,shouldEnforceTwoFactorAuthentication:S,type:l};return e.dispatch((0,s.TwoFactorAuthStatusUpdated)(h)),{success:!0,info:h}}catch(e){return{success:!1}}}},56733:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.requestTOTPActivationService=void 0;const n=r(46298),o=r(92263),i=r(14656),a=r(25576),s=r(16593);t.requestTOTPActivationService=async(e,{phoneNumber:t,country:r})=>{try{const{storeService:o}=e,i=o.getState(),c=(0,s.userLoginSelector)(i);if(!c)return{success:!1,error:{code:a.AuthenticationCode.UNKNOWN_ERROR}};const u=await(0,n.requestTOTPActivation)(o,c,{phoneNumber:t,country:r});return(0,n.isApiError)(u)?{success:!1,error:{code:u.code}}:{success:!0,...u}}catch(e){return{success:!1,error:{code:(0,o.isCarbonError)(e)&&e.errorCode===i.HttpErrorCode.NETWORK_ERROR?a.AuthenticationCode.NETWORK_ERROR:a.AuthenticationCode.UNKNOWN_ERROR}}}}},91178:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const n=r(41762),o=r(52198),i=r(29010),a=r(3433),s=r(22770),c=r(49904),u=r(56915),d=r(52056),l=r(89805),p=r(92694),m=r(33088),g=r(82862);t.config={commands:{enableWebAuthnAuthentication:{handler:p.enableWebAuthnAuthentication},initEnableWebAuthnAuthentication:{handler:l.initEnableWebAuthnAuthentication},initRegisterWebAuthnAuthenticator:{handler:n.initRegisterWebAuthnAuthenticator},registerWebAuthnAuthenticator:{handler:o.registerWebAuthnAuthenticator},refreshWebAuthnAuthenticators:{handler:a.refreshWebAuthnAuthenticators},refreshAvailableWebAuthnAuthenticators:{handler:i.refreshAvailableWebAuthnAuthenticators},initOpenSessionWithWebAuthnAuthenticator:{handler:s.initOpenSessionWithWebAuthnAuthenticator},openSessionWithWebAuthnAuthenticator:{handler:c.openSessionWithWebAuthnAuthenticator},disableWebAuthnAuthentication:{handler:m.disableWebAuthnAuthentication},removeWebAuthnAuthenticator:{handler:g.removeWebAuthnAuthenticator}},queries:{getWebAuthnAuthenticators:{selector:u.authenticatorsSelector},getWebAuthnAuthenticationOptedIn:{selector:u.webAuthnAuthenticationOptedInSelector}},liveQueries:{liveWebAuthnAuthenticators:{operator:d.webAuthnAuthenticators$},liveWebAuthnAuthenticationOptedIn:{operator:d.webAuthnAuthenticationOptedIn$}}}},25997:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WebAuthnCallTypes=t.RegisterWebAuthnAuthenticatorError=t.OpenSessionWithWebAuthnAuthenticatorError=t.InitRegisterWebAuthnAuthenticatorError=t.InitEnableWebAuthnAuthenticationError=t.EnableWebAuthnAuthenticationError=t.DisableWebAuthnAuthenticationError=void 0;var n=r(38945);Object.defineProperty(t,"DisableWebAuthnAuthenticationError",{enumerable:!0,get:function(){return n.DisableWebAuthnAuthenticationError}}),Object.defineProperty(t,"EnableWebAuthnAuthenticationError",{enumerable:!0,get:function(){return n.EnableWebAuthnAuthenticationError}}),Object.defineProperty(t,"InitEnableWebAuthnAuthenticationError",{enumerable:!0,get:function(){return n.InitEnableWebAuthnAuthenticationError}}),Object.defineProperty(t,"InitRegisterWebAuthnAuthenticatorError",{enumerable:!0,get:function(){return n.InitRegisterWebAuthnAuthenticatorError}}),Object.defineProperty(t,"OpenSessionWithWebAuthnAuthenticatorError",{enumerable:!0,get:function(){return n.OpenSessionWithWebAuthnAuthenticatorError}}),Object.defineProperty(t,"RegisterWebAuthnAuthenticatorError",{enumerable:!0,get:function(){return n.RegisterWebAuthnAuthenticatorError}}),Object.defineProperty(t,"WebAuthnCallTypes",{enumerable:!0,get:function(){return n.WebAuthnCallTypes}})},79842:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PUBKEY_ALGORITHM_RSA_PKCS1256=t.PUBKEY_ALGORITHM_ECDSA256=void 0,t.PUBKEY_ALGORITHM_ECDSA256=-7,t.PUBKEY_ALGORITHM_RSA_PKCS1256=-257},26942:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.buildAssertionPublicKeyOptions=t.buildAttestationPublicKeyOptions=void 0;const n=r(79842);t.buildAttestationPublicKeyOptions=function(e,t,r,o,i,a){return{rp:{id:e,name:"Dashlane"},user:{id:t,name:r,displayName:r},challenge:o,timeout:i,pubKeyCredParams:[{alg:n.PUBKEY_ALGORITHM_ECDSA256,type:"public-key"},{alg:n.PUBKEY_ALGORITHM_RSA_PKCS1256,type:"public-key"}],excludeCredentials:a,authenticatorSelection:{userVerification:"discouraged"}}},t.buildAssertionPublicKeyOptions=function(e,t,r,n){return{rpId:e,challenge:t,timeout:r,allowCredentials:n,userVerification:"discouraged"}}},52056:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.webAuthnAuthenticationOptedIn$=t.webAuthnAuthenticators$=void 0;const n=r(18948),o=r(3343),i=r(56915);t.webAuthnAuthenticators$=()=>(0,n.pipe)((0,o.map)(i.authenticatorsSelector),(0,o.distinctUntilChanged)()),t.webAuthnAuthenticationOptedIn$=()=>(0,n.pipe)((0,o.map)(i.webAuthnAuthenticationOptedInSelector),(0,o.distinctUntilChanged)())},33088:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.disableWebAuthnAuthentication=void 0;const n=r(16593),o=r(38945),i=r(86903);t.disableWebAuthnAuthentication=async function(e){const{webAuthnAuthenticationService:t,storeService:r}=e,a=(0,n.userLoginSelector)(r.getState());if(!a)return{success:!1,error:{code:o.DisableWebAuthnAuthenticationError.MISSING_LOGIN}};try{return await t.deactivate(a)?((0,i.sendUserSettingsLog)(e),{success:!0}):{success:!1,error:{code:o.DisableWebAuthnAuthenticationError.WEBAUTHN_SERVICE_DEACTIVATE_FAILED}}}catch(e){return{success:!1,error:{code:o.DisableWebAuthnAuthenticationError.WEBAUTHN_SERVICE_DEACTIVATE_FAILED}}}}},92694:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.enableWebAuthnAuthentication=void 0;const n=r(38945),o=r(56915),i=r(16593),a=r(86903),s={UNKNOWN_ERROR:{success:!1,error:{code:n.EnableWebAuthnAuthenticationError.UNKNOWN_ERROR}},WEBAUTHN_SERVICE_INIT_FAILED:{success:!1,error:{code:n.EnableWebAuthnAuthenticationError.WEBAUTHN_SERVICE_INIT_FAILED}},USER_HAS_OTP:{success:!1,error:{code:n.EnableWebAuthnAuthenticationError.USER_HAS_OTP}}};t.enableWebAuthnAuthentication=async function(e,t){const{webAuthnAuthenticationService:r,storeService:c}=e,{authenticationType:u,credential:d,isRoaming:l}=t,p=(0,i.userLoginSelector)(c.getState());if((0,o.hasOtp2TypeSelector)(c.getState()))return s.USER_HAS_OTP;try{switch(u){case n.WebAuthnCallTypes.CREATE:{const t=await async function(e,t,r,n){const o=t.response,i={authenticationType:"webauthn.create",name:e,isRoaming:r,credential:{id:t.id,type:t.type,rawId:t.rawId,response:o}};return await n.initialize(i)?{success:!0}:s.WEBAUTHN_SERVICE_INIT_FAILED}(p,d,l,r);return t.success&&(0,a.sendUserSettingsLog)(e),t}case n.WebAuthnCallTypes.GET:{const t=await async function(e,t){const r=e.response,n={authenticationType:"webauthn.get",credential:{id:e.id,type:e.type,rawId:e.rawId,response:r}};return await t.initialize(n)?{success:!0}:s.WEBAUTHN_SERVICE_INIT_FAILED}(d,r);return t.success&&(0,a.sendUserSettingsLog)(e),t}default:return s.UNKNOWN_ERROR}}catch(e){return s.UNKNOWN_ERROR}}},89805:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.initEnableWebAuthnAuthentication=void 0;const n=r(28354),o=r(46298),i=r(38945),a=r(16593),s=r(56915),c=r(8246),u=r(3433),d=r(26942);t.initEnableWebAuthnAuthentication=async function(e,t){const{storeService:r}=e,{relyingPartyId:l}=t,p=r.getState(),m=(0,a.userLoginSelector)(r.getState());let g=(0,s.webAuthnUserIdSelector)(p);g||(g=(0,n.v4)(),r.dispatch((0,c.webAuthnUserIdUpdated)(g)));let f=(0,s.authenticatorsAsCredentialSelector)(p);f&&0!==f.length||(await(0,u.refreshWebAuthnAuthenticators)(e),f=(0,s.authenticatorsAsCredentialSelector)(r.getState()));const S=f?.length>0?i.WebAuthnCallTypes.GET:i.WebAuthnCallTypes.CREATE;try{const e=await(0,o.requestWebauthnRegistration)(r,m);if((0,o.isApiError)(e))return{success:!1,error:{code:i.InitEnableWebAuthnAuthenticationError.UNKNOWN_ERROR}};const{challenge:t,expirationDateUnix:n}=e;let a;return a=S===i.WebAuthnCallTypes.CREATE?(0,d.buildAttestationPublicKeyOptions)(l,g,m,t,n,f):(0,d.buildAssertionPublicKeyOptions)(l,t,n,f),{success:!0,response:{publicKeyOptions:a,webAuthnType:S}}}catch(e){return{success:!1,error:{code:i.InitEnableWebAuthnAuthenticationError.UNKNOWN_ERROR}}}}},22770:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.initOpenSessionWithWebAuthnAuthenticator=void 0;const n=r(92233),o=r(68299),i=r(38945),a=r(658);t.initOpenSessionWithWebAuthnAuthenticator=async function(e,t){const{relyingPartyId:r,login:s}=t,{webAuthnAuthenticationService:c}=e;try{if(!await c.shouldTrigger(s))return{success:!1,error:{code:i.InitOpenSessionWithWebAuthnAuthenticatorError.CANNOT_TRIGGER_WEBAUTHN_AUTHENTICATION}};(0,a.sendAskBiometricAuthenticationEventLog)(e,n.VerificationMode.None);const t=await(0,o.startWebAuthnAuthentication)(e,s,r);if(!1===t.success){let e=i.InitOpenSessionWithWebAuthnAuthenticatorError.UNKNOWN_ERROR;return t.error.code===i.StartWebAuthnAuthenticationError.CANNOT_REFRESH_WEBAUTHN_AUTHENTICATORS&&(e=i.InitOpenSessionWithWebAuthnAuthenticatorError.UNAVAILABLE_AUTHENTICATORS),{success:!1,error:{code:e}}}return{success:!0,response:{publicKeyOptions:t.response.publicKeyOptions,authenticatorsInfo:t.response.authenticatorsInfo.map((({credentialId:e,isRoaming:t})=>({credentialId:e,isRoaming:t})))}}}catch(e){return{success:!1,error:{code:i.InitOpenSessionWithWebAuthnAuthenticatorError.UNKNOWN_ERROR}}}}},41762:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.initRegisterWebAuthnAuthenticator=void 0;const n=r(28354),o=r(38945),i=r(46298),a=r(8246),s=r(16593),c=r(56915),u=r(26942),d=r(3433);t.initRegisterWebAuthnAuthenticator=async function(e,t){const{storeService:r}=e,{relyingPartyId:l}=t,p=(0,s.userLoginSelector)(r.getState());let m=(0,c.webAuthnUserIdSelector)(r.getState());m||(m=(0,n.v4)(),r.dispatch((0,a.webAuthnUserIdUpdated)(m)));let g=(0,c.authenticatorsAsCredentialSelector)(r.getState());g&&0!==g.length||(await(0,d.refreshWebAuthnAuthenticators)(e),g=(0,c.authenticatorsAsCredentialSelector)(r.getState()));try{const e=await(0,i.requestWebauthnRegistration)(r,p);if((0,i.isApiError)(e))return{success:!1,error:{code:o.InitRegisterWebAuthnAuthenticatorError.UNKNOWN_ERROR}};const{challenge:t,expirationDateUnix:n}=e;return{success:!0,response:{publicKeyOptions:(0,u.buildAttestationPublicKeyOptions)(l,m,p,t,n,g)}}}catch(e){return{success:!1,error:{code:o.InitRegisterWebAuthnAuthenticatorError.UNKNOWN_ERROR}}}}},49904:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.openSessionWithWebAuthnAuthenticator=void 0;const n=r(38945),o=r(88610),i=r(658);t.openSessionWithWebAuthnAuthenticator=async function(e,t){const{credential:r,login:a,isRoamingAuthenticator:s}=t,{storeService:c,webAuthnAuthenticationService:u}=e;try{const t={authenticationType:"webauthn.get",credential:{id:r.id,type:r.type,rawId:r.rawId,response:r.response}};await u.process(a,t);const d=c.getUserSession().masterPassword;if(!d)return(0,i.sendBiometricLoginErrorLog)(e),{success:!1,error:{code:n.OpenSessionWithWebAuthnAuthenticatorError.MP_MISSING_IN_SESSION_ERROR}};const l=(0,o.makeLoginController)(e);return await l.openSessionWithMasterPassword(a,d,{triggeredByRememberMeType:"webauthn",isWebAuthnAuthenticatorRoaming:s}),{success:!0}}catch(t){return(0,i.sendBiometricLoginErrorLog)(e),{success:!1,error:{code:n.OpenSessionWithWebAuthnAuthenticatorError.UNKNOWN_ERROR}}}}},29010:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.refreshAvailableWebAuthnAuthenticators=void 0;const n=r(38945),o=r(56915),i=r(46298),a=r(8246);t.refreshAvailableWebAuthnAuthenticators=async function(e,t){const{storeService:r}=e,{login:s}=t;if(!(0,o.sessionKeysSelector)(r.getState()))return{success:!1,error:{code:n.RefreshAvailableWebAuthnAuthenticatorsError.MISSING_SESSION_KEYS_IN_STORE}};try{const e=await(0,i.getAvailableWebAuthnAuthenticators)(r,s);if((0,i.isApiError)(e))return{success:!1,error:{code:n.RefreshAvailableWebAuthnAuthenticatorsError.UNKNOWN_ERROR}};const t=e.authenticators.map((e=>({...e,canOpenSession:!0})));return r.dispatch((0,a.webAuthnAvailableAuthenticatorsListUpdated)(t)),{success:!0,response:{authenticators:t}}}catch(e){return{success:!1,error:{code:n.RefreshAvailableWebAuthnAuthenticatorsError.UNKNOWN_ERROR}}}}},3433:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.refreshWebAuthnAuthenticators=void 0;const n=r(38945),o=r(46298),i=r(16593),a=r(8246);t.refreshWebAuthnAuthenticators=async function(e){const{storeService:t}=e,r=(0,i.userLoginSelector)(t.getState());try{const e=await(0,o.getWebAuthnAuthenticators)(t,r);if((0,o.isApiError)(e))return{success:!1,error:{code:n.RefreshWebAuthnAuthenticatorsError.UNKNOWN_ERROR}};const i=e.authenticators.map((e=>({...e,canOpenSession:!1})));return t.dispatch((0,a.webAuthnAuthenticatorsListUpdated)(i)),{success:!0,response:{authenticators:i}}}catch(e){return{success:!1,error:{code:n.RefreshWebAuthnAuthenticatorsError.UNKNOWN_ERROR}}}}},52198:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.registerWebAuthnAuthenticator=void 0;const n=r(38945),o=r(16593),i=r(46298),a=r(56915),s=r(8246);t.registerWebAuthnAuthenticator=async function(e,t){const{credential:r,isRoaming:c}=t,{storeService:u,webAuthnAuthenticationService:d}=e,l=u.getState(),p=(0,o.userLoginSelector)(l);if((0,a.hasOtp2TypeSelector)(l))return{success:!1,error:{code:n.RegisterWebAuthnAuthenticatorError.USER_HAS_OTP}};try{const e={authenticationType:"webauthn.create",name:p,isRoaming:c,credential:{id:r.id,type:r.type,rawId:r.rawId,response:r.response}};if((0,a.authenticatorsSelector)(l).length){const t=await(0,i.completeWebAuthnAuthenticatorRegistration)(u,p,{authenticator:e});if((0,i.isApiError)(t))return{success:!1,error:{code:n.RegisterWebAuthnAuthenticatorError.UNKNOWN_ERROR}}}else await d.initialize(e);return u.dispatch((0,s.webAuthnAuthenticatorAdded)({name:e.name,isRoaming:e.isRoaming,credentialId:e.credential.id,canOpenSession:!0})),{success:!0}}catch(e){return{success:!1,error:{code:n.RegisterWebAuthnAuthenticatorError.UNKNOWN_ERROR}}}}},82862:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.removeWebAuthnAuthenticator=void 0;const n=r(16593),o=r(46298),i=r(38945),a=r(56915),s=r(33088),c=r(8246);async function u(e,t,r){const n=await(0,o.deactivateWebAuthnAuthenticator)(e,t,{credentialId:r});return(0,o.isApiError)(n)?{success:!1,error:{code:i.RemoveWebAuthnAuthenticatorError.CANNOT_REMOVE_WEBAUTHN_AUTHENTICATOR}}:{success:!0}}t.removeWebAuthnAuthenticator=async function(e,t){const{credentialId:r}=t,{storeService:o}=e,d=o.getState(),l=(0,n.userLoginSelector)(d),p=(0,a.webAuthnAuthenticationOptedInSelector)(d),m=(0,a.authenticatorsSelector)(d);try{let t=null;return p&&1===m.length?(await(0,s.disableWebAuthnAuthentication)(e),t=await u(o,l,r)):t=await u(o,l,r),t.success&&o.dispatch((0,c.webAuthnAuthenticatorRemoved)(r)),t}catch(e){return{success:!1,error:{code:i.RemoveWebAuthnAuthenticatorError.UNKNOWN_ERROR}}}}},68299:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.startWebAuthnAuthentication=void 0;const n=r(26942),o=r(29010),i=r(38945),a=r(46298);t.startWebAuthnAuthentication=async function(e,t,r){const{storeService:s}=e,c=await(0,o.refreshAvailableWebAuthnAuthenticators)(e,{login:t});if(!c.success)return{success:!1,error:{code:i.StartWebAuthnAuthenticationError.CANNOT_REFRESH_WEBAUTHN_AUTHENTICATORS}};const u=[];c.response.authenticators.forEach((e=>{u.push({id:e.credentialId,type:"public-key"})}));const d=await(0,a.requestWebauthnOpenSession)(s,t);if((0,a.isApiError)(d))return{success:!1,error:{code:i.StartWebAuthnAuthenticationError.CANNOT_FETCH_WEBAUTHN_CHALLENGE}};const{challenge:l,expirationDateUnix:p}=d;return{success:!0,response:{publicKeyOptions:(0,n.buildAssertionPublicKeyOptions)(r,l,p,u),authenticatorsInfo:c.response.authenticators}}}},38945:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StartWebAuthnAuthenticationError=t.RemoveWebAuthnAuthenticatorError=t.DisableWebAuthnAuthenticationError=t.OpenSessionWithWebAuthnAuthenticatorError=t.InitOpenSessionWithWebAuthnAuthenticatorError=t.RefreshAvailableWebAuthnAuthenticatorsError=t.RefreshWebAuthnAuthenticatorsError=t.RegisterWebAuthnAuthenticatorError=t.InitRegisterWebAuthnAuthenticatorError=t.EnableWebAuthnAuthenticationError=t.InitEnableWebAuthnAuthenticationError=t.WebAuthnCallTypes=void 0,function(e){e.CREATE="webauthn.create",e.GET="webauthn.get"}(t.WebAuthnCallTypes||(t.WebAuthnCallTypes={})),function(e){e.UNKNOWN_ERROR="UNKNOWN_ERROR"}(t.InitEnableWebAuthnAuthenticationError||(t.InitEnableWebAuthnAuthenticationError={})),function(e){e.UNKNOWN_ERROR="UNKNOWN_ERROR",e.USER_HAS_OTP="USER_HAS_OTP",e.WEBAUTHN_SERVICE_INIT_FAILED="WEBAUTHN_SERVICE_INIT_FAILED"}(t.EnableWebAuthnAuthenticationError||(t.EnableWebAuthnAuthenticationError={})),function(e){e.UNKNOWN_ERROR="UNKNOWN_ERROR"}(t.InitRegisterWebAuthnAuthenticatorError||(t.InitRegisterWebAuthnAuthenticatorError={})),function(e){e.USER_HAS_OTP="USER_HAS_OTP",e.UNKNOWN_ERROR="UNKNOWN_ERROR"}(t.RegisterWebAuthnAuthenticatorError||(t.RegisterWebAuthnAuthenticatorError={})),function(e){e.UNKNOWN_ERROR="UNKNOWN_ERROR"}(t.RefreshWebAuthnAuthenticatorsError||(t.RefreshWebAuthnAuthenticatorsError={})),function(e){e.UNKNOWN_ERROR="UNKNOWN_ERROR",e.MISSING_SESSION_KEYS_IN_STORE="MISSING_SESSION_KEYS_IN_STORE"}(t.RefreshAvailableWebAuthnAuthenticatorsError||(t.RefreshAvailableWebAuthnAuthenticatorsError={})),function(e){e.UNKNOWN_ERROR="UNKNOWN_ERROR",e.UNAVAILABLE_AUTHENTICATORS="UNAVAILABLE_AUTHENTICATORS",e.CANNOT_TRIGGER_WEBAUTHN_AUTHENTICATION="CANNOT_TRIGGER_WEBAUTHN_AUTHENTICATION"}(t.InitOpenSessionWithWebAuthnAuthenticatorError||(t.InitOpenSessionWithWebAuthnAuthenticatorError={})),function(e){e.UNKNOWN_ERROR="UNKNOWN_ERROR",e.MP_MISSING_IN_SESSION_ERROR="MP_MISSING_IN_SESSION_ERROR"}(t.OpenSessionWithWebAuthnAuthenticatorError||(t.OpenSessionWithWebAuthnAuthenticatorError={})),function(e){e.UNKNOWN_ERROR="UNKNOWN_ERROR",e.WEBAUTHN_SERVICE_DEACTIVATE_FAILED="WEBAUTHN_SERVICE_DEACTIVATE_FAILED",e.MISSING_LOGIN="MISSING_LOGIN"}(t.DisableWebAuthnAuthenticationError||(t.DisableWebAuthnAuthenticationError={})),function(e){e.UNKNOWN_ERROR="UNKNOWN_ERROR",e.CANNOT_REMOVE_WEBAUTHN_AUTHENTICATOR="CANNOT_REMOVE_WEBAUTHN_AUTHENTICATOR"}(t.RemoveWebAuthnAuthenticatorError||(t.RemoveWebAuthnAuthenticatorError={})),function(e){e.CANNOT_REFRESH_WEBAUTHN_AUTHENTICATORS="CANNOT_REFRESH_WEBAUTHN_AUTHENTICATORS",e.CANNOT_FETCH_WEBAUTHN_CHALLENGE="CANNOT_FETCH_WEBAUTHN_CHALLENGE"}(t.StartWebAuthnAuthenticationError||(t.StartWebAuthnAuthenticationError={}))},44740:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0;const n=r(3158);t.bootstrap=e=>{e.register(n.config)}},90622:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=t.getLocalAccounts=t.appKeysSelector=t.sessionKeysSelector=t.ukiSelector=t.deviceKeysSelector=t.authenticationReducer=void 0;var n=r(57334);Object.defineProperty(t,"authenticationReducer",{enumerable:!0,get:function(){return n.authenticationReducer}});var o=r(56915);Object.defineProperty(t,"deviceKeysSelector",{enumerable:!0,get:function(){return o.deviceKeysSelector}}),Object.defineProperty(t,"ukiSelector",{enumerable:!0,get:function(){return o.ukiSelector}}),Object.defineProperty(t,"sessionKeysSelector",{enumerable:!0,get:function(){return o.sessionKeysSelector}}),Object.defineProperty(t,"appKeysSelector",{enumerable:!0,get:function(){return o.appKeysSelector}});var i=r(75226);Object.defineProperty(t,"getLocalAccounts",{enumerable:!0,get:function(){return i.getLocalAccounts}});var a=r(44740);Object.defineProperty(t,"bootstrap",{enumerable:!0,get:function(){return a.bootstrap}})},54622:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.reactivationStatus$=void 0;const n=r(18948),o=r(3343),i=r(56915);t.reactivationStatus$=()=>(0,n.pipe)((0,o.map)(i.reactivationStatusSelector),(0,o.distinctUntilChanged)())},56915:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.availableUserVerificationMethodsSelector=t.reactivationStatusSelector=t.rememberMeFor14DaysOptedInSelector=t.webAuthnAuthenticationOptedInSelector=t.rememberMeTypeSelector=t.authenticatorsAsCredentialSelector=t.availableAuthenticatorsSelector=t.authenticatorsSelector=t.webAuthnUserIdSelector=t.webAuthnAuthenticationSelector=t.platformInfoSelector=t.hasOtp2TypeSelector=t.otpTypeSelector=t.userAuthenticationDataSelector=t.localUsersAuthenticationDataSelector=t.localAccountsListSelector=t.getUserDeviceWasRegisteredWithDeviceKeysSelector=t.sessionKeysSelector=t.getDeviceAccessKeySelector=t.getDeviceIdSelector=t.deviceKeysSelector=t.ukiSelector=t.dashlaneServerDeltaTimestampSelector=t.appKeysSelector=void 0;const n=r(92215),o=r(2246),i=r(86797),a=r(57839),s=r(38981);t.appKeysSelector=e=>e.userSession.sdkAuthentication.appKeys,t.dashlaneServerDeltaTimestampSelector=e=>e.userSession.sdkAuthentication.dashlaneServerDeltaTimestamp,t.ukiSelector=e=>e.userSession.localSettings.uki||e.authentication.currentUser&&e.authentication.currentUser.deviceKeys&&(0,n.convertDeviceKeysToUki)(e.authentication.currentUser.deviceKeys)||null,t.deviceKeysSelector=e=>{if(e.authentication.currentUser&&e.authentication.currentUser.deviceKeys)return e.authentication.currentUser.deviceKeys;const t=e.userSession.localSettings.uki;return(0,n.convertUkiToDeviceKeys)(t)},t.getDeviceIdSelector=(e,t)=>{const r=e.authentication.localUsers[t];return r&&r.deviceAccessKey?r.deviceAccessKey:(0,o.getCommonAppSetting)("deviceId")||null},t.getDeviceAccessKeySelector=(e,r)=>(0,t.getDeviceIdSelector)(e,r),t.sessionKeysSelector=({userSession:{session:e}})=>Boolean(e.sessionKeys&&e.sessionKeys.accessKey&&e.sessionKeys.secretKey)?{...e.sessionKeys}:null,t.getUserDeviceWasRegisteredWithDeviceKeysSelector=(e,t)=>{const r=e.authentication.localUsers[t];return!!r&&!r.deviceRegisteredWithLegacyKey},t.localAccountsListSelector=e=>e.authentication.localAccounts.accountsList,t.localUsersAuthenticationDataSelector=e=>e.authentication.localUsers,t.userAuthenticationDataSelector=e=>e.authentication.currentUser,t.otpTypeSelector=e=>e.userSession?.account?e.userSession.account.otpType:null,t.hasOtp2TypeSelector=e=>(0,t.otpTypeSelector)(e)===i.OtpType.OTP_LOGIN,t.platformInfoSelector=e=>e.device.platform.info,t.webAuthnAuthenticationSelector=e=>e.authentication.webAuthnAuthentication,t.webAuthnUserIdSelector=e=>e.authentication.webAuthnAuthentication.webAuthnUserId,t.authenticatorsSelector=e=>e.authentication.webAuthnAuthentication.authenticators,t.availableAuthenticatorsSelector=e=>e.authentication.webAuthnAuthentication.authenticators.filter((e=>e.canOpenSession)),t.authenticatorsAsCredentialSelector=e=>(0,t.authenticatorsSelector)(e).map((e=>({id:e.credentialId,type:"public-key"}))),t.rememberMeTypeSelector=e=>e.authentication.currentUser.rememberMeType,t.webAuthnAuthenticationOptedInSelector=e=>"webauthn"===(0,t.rememberMeTypeSelector)(e),t.rememberMeFor14DaysOptedInSelector=e=>"autologin"===(0,t.rememberMeTypeSelector)(e),t.reactivationStatusSelector=e=>e.authentication.localAccounts.reactivationStatus,t.availableUserVerificationMethodsSelector=e=>{const r=[];return(0,t.webAuthnAuthenticationOptedInSelector)(e)&&r.push(a.UserVerificationMethod.Webauthn),(0,s.isSSOUserSelector)(e)||r.push(a.UserVerificationMethod.MasterPassword),Promise.resolve(r)}},33045:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setupSubscriptions=void 0;const n=r(14498);t.setupSubscriptions=async function(e,t){e.sessionOpened.on((()=>{(0,n.loadRememberMeTypeToStore)(t)}))}},76839:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const n=r(90351);t.config={commands:{},queries:{getSingleAddressForAutofill:{selector:n.autofillViewedAddressSelector},getMultipleAddressesForAutofill:{selector:n.autofillViewedQueriedAddressesSelector},getSingleBankAccountForAutofill:{selector:n.autofillViewedBankAccountSelector},getMultipleBankAccountsForAutofill:{selector:n.autofillViewedQueriedBankAccountsSelector},getSingleCompanyForAutofill:{selector:n.autofillViewedCompanySelector},getMultipleCompaniesForAutofill:{selector:n.autofillViewedQueriedCompaniesSelector},getSingleCredentialForAutofill:{selector:n.autofillViewedCredentialSelector},getMultipleCredentialsForAutofill:{selector:n.autofillViewedQueriedCredentialsByDomainSelector},getSingleDriverLicenseForAutofill:{selector:n.autofillViewedDriverLicenseSelector},getMultipleDriverLicensesForAutofill:{selector:n.autofillViewedQueriedDriverLicensesSelector},getSingleEmailForAutofill:{selector:n.autofillViewedEmailSelector},getMultipleEmailsForAutofill:{selector:n.autofillViewedQueriedEmailsSelector},getSingleFiscalIdForAutofill:{selector:n.autofillViewedFiscalIdSelector},getMultipleFiscalIdsForAutofill:{selector:n.autofillViewedQueriedFiscalIdsSelector},getSingleGeneratedPasswordForAutofill:{selector:n.autofillViewedGeneratedPasswordSelector},getMultipleGeneratedPasswordsForAutofill:{selector:n.autofillViewedQueriedGeneratedPasswordsSelector},getSingleIdCardForAutofill:{selector:n.autofillViewedIdCardSelector},getMultipleIdCardsForAutofill:{selector:n.autofillViewedQueriedIdCardsSelector},getSingleIdentityForAutofill:{selector:n.autofillViewedIdentitySelector},getMultipleIdentitiesForAutofill:{selector:n.autofillViewedQueriedIdentitiesSelector},getSingleNoteForAutofill:{selector:n.autofillViewedNoteSelector},getMultipleNotesForAutofill:{selector:n.autofillViewedQueriedNotesSelector},getSinglePasskeyForAutofill:{selector:n.autofillViewedPasskeySelector},getSinglePassportForAutofill:{selector:n.autofillViewedPassportSelector},getMultiplePassportsForAutofill:{selector:n.autofillViewedQueriedPassportsSelector},getSinglePaymentCardForAutofill:{selector:n.autofillViewedPaymentCardSelector},getMultiplePaymentCardsForAutofill:{selector:n.autofillViewedQueriedPaymentCardsSelector},getSinglePersonalWebsiteForAutofill:{selector:n.autofillViewedPersonalWebsiteSelector},getMultiplePersonalWebsitesForAutofill:{selector:n.autofillViewedQueriedPersonalWebsitesSelector},getSinglePhoneForAutofill:{selector:n.autofillViewedPhoneSelector},getMultiplePhonesForAutofill:{selector:n.autofillViewedQueriedPhonesSelector},getSingleSocialSecurityIdForAutofill:{selector:n.autofillViewedSocialSecurityIdSelector},getMultipleSocialSecurityIdsForAutofill:{selector:n.autofillViewedQueriedSocialSecurityIdsSelector},getAutofillSettingOnUrlForAutofill:{selector:n.getAutofillSettingOnUrlForAutofillSelector}},liveQueries:{}}},72227:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0;const n=r(76839);t.bootstrap=e=>{e.register(n.config)}},27923:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getDomainMatchTypeForHermes=t.getAgeFromIdentity=t.defaultToZero=t.defaultToUS=t.defaultToEmptyString=void 0;const n=r(16516),o=r(53576),i=r(92233),a=r(72099),s=r(88083);t.defaultToEmptyString=(0,n.defaultTo)(""),t.defaultToUS=(0,n.defaultTo)(o.Country.US),t.defaultToZero=(0,n.defaultTo)(0),t.getAgeFromIdentity=e=>{const t=new Date(0).getUTCFullYear(),r=(0,a.epochToDate)((0,a.vaultDateToViewDate)(e.BirthDate)),n=new Date(Date.now()-r.getTime());return Math.abs(n.getUTCFullYear()-t)},t.getDomainMatchTypeForHermes=(e,t)=>{switch((0,s.getCredentialByDomainMatchType)(e,t)){case s.DomainMatchType.DashlaneDefinedLinkedWebsite:return i.MatchType.AssociatedWebsite;case s.DomainMatchType.UserDefinedLinkedWebsite:return i.MatchType.UserAssociatedWebsite;case s.DomainMatchType.None:case s.DomainMatchType.MainWebsite:default:return i.MatchType.Regular}}},74219:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0;var n=r(72227);Object.defineProperty(t,"bootstrap",{enumerable:!0,get:function(){return n.bootstrap}})},90351:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getAutofillSettingOnUrlForAutofillSelector=t.autofillViewedQueriedSocialSecurityIdsSelector=t.autofillViewedSocialSecurityIdSelector=t.autofillViewedQueriedPersonalWebsitesSelector=t.autofillViewedPersonalWebsiteSelector=t.autofillViewedQueriedPhonesSelector=t.autofillViewedPhoneSelector=t.autofillViewedQueriedPaymentCardsSelector=t.autofillViewedPaymentCardSelector=t.autofillViewedQueriedPassportsSelector=t.autofillViewedPassportSelector=t.autofillViewedPasskeySelector=t.autofillViewedQueriedNotesSelector=t.autofillViewedNoteSelector=t.autofillViewedQueriedIdentitiesSelector=t.autofillViewedIdentitySelector=t.autofillViewedQueriedIdCardsSelector=t.autofillViewedIdCardSelector=t.autofillViewedQueriedGeneratedPasswordsSelector=t.autofillViewedGeneratedPasswordSelector=t.autofillViewedQueriedFiscalIdsSelector=t.autofillViewedFiscalIdSelector=t.autofillViewedQueriedEmailsSelector=t.autofillViewedEmailSelector=t.autofillViewedQueriedDriverLicensesSelector=t.autofillViewedDriverLicenseSelector=t.autofillViewedQueriedCredentialsByDomainSelector=t.autofillViewedCredentialSelector=t.autofillViewedQueriedCompaniesSelector=t.autofillViewedCompanySelector=t.autofillViewedQueriedBankAccountsSelector=t.autofillViewedBankAccountSelector=t.autofillViewedQueriedAddressesSelector=t.autofillViewedAddressSelector=void 0;const n=r(16516),o=r(21178),i=r(99281),a=r(16018),s=r(80624),c=r(19736),u=r(19325),d=r(41841),l=r(9774),p=r(26147),m=r(41092),g=r(92598),f=r(23437),S=r(81438),h=r(28074),y=r(65401),v=r(58235),E=r(81473),A=r(82439),_=r(27147),T=r(16593),I=r(63566),b=r(91210),w=r(52102),C=r(83687),D=r(55346),O=r(38250),P=r(18665);t.autofillViewedAddressSelector=(e,t)=>{const r=(0,i.addressSelector)(e,t);return(0,D.addressAutofillView)(r)},t.autofillViewedQueriedAddressesSelector=(0,n.compose)((0,I.viewListResults)(D.addressListView),i.queryAddressesSelector),t.autofillViewedBankAccountSelector=(e,t)=>{const r=(0,a.bankAccountSelector)(e,t);return(0,D.bankAccountAutofillView)(r)},t.autofillViewedQueriedBankAccountsSelector=(0,n.compose)((0,I.viewListResults)(D.bankAccountListView),a.queryBankAccountsSelector),t.autofillViewedCompanySelector=(e,t)=>{const r=(0,s.companySelector)(e,t);return(0,D.companyAutofillView)(r)},t.autofillViewedQueriedCompaniesSelector=(0,n.compose)((0,I.viewListResults)(D.companyListView),s.queryCompaniesSelector),t.autofillViewedCredentialSelector=(e,{credentialId:t,rootDomain:r})=>{const n=(0,c.credentialSelector)(e,t),o=(0,b.limitedSharingItemsSelector)(e),i=(0,w.sharingDataSelector)(e),a=(0,T.userIdSelector)(e),s=(0,C.getSharingStatusDetail)(o,i,a)(t);return(0,D.credentialAutofillView)(r,n,s)},t.autofillViewedQueriedCredentialsByDomainSelector=(e,t)=>{const r=(0,b.limitedSharingItemsSelector)(e),n=(0,w.sharingDataSelector)(e),o=(0,T.userIdSelector)(e),i=(0,C.getSharingStatusDetail)(r,n,o),{domain:a,...s}=t,c=(a?(0,u.getQueryByDomainSelector)(a):d.querySelector)(e,s),l={...c,items:c.items.map((e=>({credential:e,domain:a,sharingStatus:i(e.Id)})))};return(0,I.viewListResults)(D.credentialListView)(l)},t.autofillViewedDriverLicenseSelector=(e,t)=>{const r=(0,l.driverLicenseWithIdentitySelector)(e,t);return(0,D.driverLicenseAutofillView)(r)},t.autofillViewedQueriedDriverLicensesSelector=(0,n.compose)((0,I.viewListResults)(D.driverLicenseListView),l.queryDriverLicensesSelector),t.autofillViewedEmailSelector=(e,t)=>{const r=(0,p.emailSelector)(e,t);return(0,D.emailAutofillView)(r)},t.autofillViewedQueriedEmailsSelector=(0,n.compose)((0,I.viewListResults)(D.emailListView),p.queryEmailsSelector),t.autofillViewedFiscalIdSelector=(e,t)=>{const r=(0,m.fiscalIdSelector)(e,t);return(0,D.fiscalIdAutofillView)(r)},t.autofillViewedQueriedFiscalIdsSelector=(0,n.compose)((0,I.viewListResults)(D.fiscalIdListView),m.queryFiscalIdsSelector),t.autofillViewedGeneratedPasswordSelector=(e,t)=>{const r=(0,g.generatedPasswordSelector)(e,t);return(0,D.generatedPasswordAutofillView)(r)},t.autofillViewedQueriedGeneratedPasswordsSelector=(0,n.compose)((0,I.viewListResults)(D.generatedPasswordListView),g.queryGeneratedPasswordsSelector),t.autofillViewedIdCardSelector=(e,t)=>{const r=(0,f.idCardWithIdentitySelector)(e,t);return(0,D.idCardAutofillView)(r)},t.autofillViewedQueriedIdCardsSelector=(0,n.compose)((0,I.viewListResults)(D.idCardListView),f.queryIdCardsSelector),t.autofillViewedIdentitySelector=(e,t)=>{const r=(0,h.identitySelector)(e,t);return(0,D.identityAutofillView)(r)},t.autofillViewedQueriedIdentitiesSelector=(0,n.compose)((0,I.viewListResults)(D.identityListView),h.queryIdentitiesSelector),t.autofillViewedNoteSelector=(e,t)=>{const r=(0,S.noteSelector)(e,t);return(0,D.noteAutofillView)(r)},t.autofillViewedQueriedNotesSelector=(0,n.compose)((0,I.viewListResults)(D.noteListView),S.queryNotesSelector),t.autofillViewedPasskeySelector=(e,t)=>{const r=(0,P.passkeySelector)(e,t);return(0,D.passkeyAutofillView)(r)},t.autofillViewedPassportSelector=(e,t)=>{const r=(0,y.passportWithIdentitySelector)(e,t);return(0,D.passportAutofillView)(r)},t.autofillViewedQueriedPassportsSelector=(0,n.compose)((0,I.viewListResults)(D.passportListView),y.queryPassportsWithIdentitySelector),t.autofillViewedPaymentCardSelector=(e,t)=>{const r=(0,v.paymentCardSelector)(e,t);return(0,D.paymentCardAutofillView)(r)},t.autofillViewedQueriedPaymentCardsSelector=(0,n.compose)((0,I.viewListResults)(D.paymentCardListView),v.queryPaymentCardsSelector),t.autofillViewedPhoneSelector=(e,t)=>{const r=(0,A.phoneSelector)(e,t);return(0,D.phoneAutofillView)(r)},t.autofillViewedQueriedPhonesSelector=(0,n.compose)((0,I.viewListResults)(D.phoneListView),A.queryPhonesSelector),t.autofillViewedPersonalWebsiteSelector=(e,t)=>{const r=(0,E.personalWebsiteSelector)(e,t);return(0,D.personalWebsiteAutofillView)(r)},t.autofillViewedQueriedPersonalWebsitesSelector=(0,n.compose)((0,I.viewListResults)(D.personalWebsiteListView),E.queryPersonalWebsitesSelector),t.autofillViewedSocialSecurityIdSelector=(e,t)=>{const r=(0,_.socialSecurityIdWithIdentitySelector)(e,t);return(0,D.socialSecurityIdAutofillView)(r)},t.autofillViewedQueriedSocialSecurityIdsSelector=(0,n.compose)((0,I.viewListResults)(D.socialSecurityIdListView),_.querySocialSecurityIdsSelector),t.getAutofillSettingOnUrlForAutofillSelector=(e,t)=>{const r=new o.ParsedURL(t).getRootDomain(),n=(0,T.personalSettingsSelector)(e),i=n.DisabledUrlsList.includes(t);return n.DisabledDomainsList.includes(r)||i?O.AutofillOptions.ANALYSIS_ENABLED_ONLY_ON_LOGINS_AND_PASSWORDS:O.AutofillOptions.ANALYSIS_ENABLED_ON_ALL_FORMS}},55346:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.passkeyAutofillView=t.socialSecurityIdListView=t.socialSecurityIdAutofillView=t.phoneListView=t.phoneAutofillView=t.personalWebsiteListView=t.personalWebsiteAutofillView=t.paymentCardListView=t.paymentCardAutofillView=t.passportListView=t.passportAutofillView=t.noteListView=t.noteAutofillView=t.idCardListView=t.idCardAutofillView=t.identityListView=t.identityAutofillView=t.generatedPasswordListView=t.generatedPasswordAutofillView=t.fiscalIdListView=t.fiscalIdAutofillView=t.emailListView=t.emailAutofillView=t.driverLicenseListView=t.driverLicenseAutofillView=t.credentialListView=t.credentialAutofillView=t.companyListView=t.companyAutofillView=t.bankAccountListView=t.bankAccountAutofillView=t.addressListView=t.addressAutofillView=void 0;const n=r(74127),o=r(16516),i=r(92882),a=r(42316),s=r(90073),c=r(72099),u=r(6205),d=r(38495),l=r(27923),p=e=>({id:e.Id,lastUse:e.LastUse,localeFormat:e.LocaleFormat,spaceId:e.SpaceId});t.addressAutofillView=e=>({...p(e),vaultType:n.VaultSourceType.Address,addressFull:(0,l.defaultToEmptyString)(e.AddressFull),addressName:(0,l.defaultToEmptyString)(e.AddressName),building:(0,l.defaultToEmptyString)(e.Building),city:(0,l.defaultToEmptyString)(e.City),country:(0,l.defaultToEmptyString)(e.Country),digitCode:(0,l.defaultToEmptyString)(e.DigitCode),door:(0,l.defaultToEmptyString)(e.Door),floor:(0,l.defaultToEmptyString)(e.Floor),stairs:(0,l.defaultToEmptyString)(e.Stairs),state:(0,d.findStateName)((0,l.defaultToEmptyString)(e.State)),stateCode:(0,d.findStateCode)((0,l.defaultToEmptyString)(e.LocaleFormat),(0,l.defaultToEmptyString)(e.State)),stateLevel2:(0,d.findStateLevel2Name)((0,l.defaultToEmptyString)(e.StateLevel2)),streetName:(0,l.defaultToEmptyString)(e.StreetName),streetNumber:(0,l.defaultToEmptyString)(e.StreetNumber),streetTitle:(0,l.defaultToEmptyString)(e.StreetTitle),zipCode:(0,l.defaultToEmptyString)(e.ZipCode)}),t.addressListView=e=>e.map(t.addressAutofillView),t.bankAccountAutofillView=e=>{const t=(0,i.getBankInfoFromBankAccountData)(e);return{...p(e),vaultType:n.VaultSourceType.BankAccount,name:(0,l.defaultToEmptyString)(e.BankAccountName),owner:(0,l.defaultToEmptyString)(e.BankAccountOwner),IBAN:(0,l.defaultToEmptyString)(e.BankAccountIBAN),BIC:(0,l.defaultToEmptyString)(e.BankAccountBIC),bank:t.bank,country:(0,l.defaultToUS)(e.LocaleFormat),bankCode:t.bankCode}},t.bankAccountListView=e=>e.map(t.bankAccountAutofillView),t.companyAutofillView=e=>({...p(e),vaultType:n.VaultSourceType.Company,name:(0,l.defaultToEmptyString)(e.Name),jobTitle:(0,l.defaultToEmptyString)(e.JobTitle)}),t.companyListView=e=>e.map(t.companyAutofillView),t.credentialAutofillView=(e,t,r)=>({...p(t),vaultType:n.VaultSourceType.Credential,autoProtected:(0,o.defaultTo)(!1,t.AutoProtected),autoLogin:(0,o.defaultTo)(!1,t.AutoLogin),categoryName:t.CategoryName,email:(0,l.defaultToEmptyString)(t.Email),hasOtp:Boolean(t.OtpSecret)||Boolean(t.OtpUrl),matchType:(0,l.getDomainMatchTypeForHermes)(e,t),login:(0,l.defaultToEmptyString)(t.Login),otpSecret:(0,l.defaultToEmptyString)(t.OtpSecret),otpUrl:(0,l.defaultToEmptyString)(t.OtpUrl),password:(0,l.defaultToEmptyString)(t.Password),subdomainOnly:t.SubdomainOnly||!1,sharingStatus:r,title:(0,l.defaultToEmptyString)(t.Title||(0,s.getDomainForCredential)(t)),secondaryLogin:t.SecondaryLogin,url:(0,l.defaultToEmptyString)(t.Url),userAddedLinkedWebsites:(0,u.getUserAddedLinkedWebsiteDomains)(t)}),t.credentialListView=e=>e.map((({domain:e,credential:r,sharingStatus:n})=>(0,t.credentialAutofillView)(e,r,n))),t.driverLicenseAutofillView=e=>{const t=(0,c.epochToDate)((0,c.vaultDateToViewDate)(e.ExpireDate)),r=(0,c.epochToDate)((0,c.vaultDateToViewDate)(e.DeliveryDate));return{...p(e),vaultType:n.VaultSourceType.DriverLicense,country:(0,c.vaultCountryToViewCountry)(e.LocaleFormat),creationDate:(0,l.defaultToZero)(e.CreationDatetime),expirationDay:t.getDate(),expirationMonth:t.getMonth()+c.ZERO_INDEX_BASED_MONTH_OFFSET,expirationYear:t.getFullYear(),expirationDateFull:`${t.getFullYear()}-${t.getMonth()+c.ZERO_INDEX_BASED_MONTH_OFFSET}-${t.getDate()}`,idNumber:(0,l.defaultToEmptyString)(e.Number),issueDay:r.getDate(),issueMonth:r.getMonth()+c.ZERO_INDEX_BASED_MONTH_OFFSET,issueYear:r.getFullYear(),issueDateFull:`${r.getFullYear()}-${r.getMonth()+c.ZERO_INDEX_BASED_MONTH_OFFSET}-${r.getDate()}`,name:(0,c.identityToName)(e.identity)||e.Fullname||"",spaceId:e.SpaceId,state:e.State}},t.driverLicenseListView=e=>e.map(t.driverLicenseAutofillView),t.emailAutofillView=e=>({...p(e),vaultType:n.VaultSourceType.Email,email:(0,l.defaultToEmptyString)(e.Email),name:(0,l.defaultToEmptyString)(e.EmailName),type:e.Type||"NO_TYPE"}),t.emailListView=e=>e.map(t.emailAutofillView),t.fiscalIdAutofillView=e=>({...p(e),vaultType:n.VaultSourceType.FiscalId,country:(0,c.vaultCountryToViewCountry)(e.LocaleFormat),idNumber:(0,l.defaultToEmptyString)(e.FiscalNumber),teledeclarantNumber:(0,l.defaultToEmptyString)(e.TeledeclarantNumber),creationDate:(0,l.defaultToZero)(e.CreationDatetime)}),t.fiscalIdListView=e=>e.map(t.fiscalIdAutofillView),t.generatedPasswordAutofillView=e=>({vaultType:n.VaultSourceType.GeneratedPassword,domain:(0,l.defaultToEmptyString)(e.Domain),generatedDate:e.GeneratedDate,password:e.Password,id:e.Id}),t.generatedPasswordListView=e=>e.map(t.generatedPasswordAutofillView),t.identityAutofillView=e=>({...p(e),vaultType:n.VaultSourceType.Identity,age:(0,l.getAgeFromIdentity)(e),birthDate:(0,l.defaultToEmptyString)(e.BirthDate),birthPlace:(0,l.defaultToEmptyString)(e.BirthPlace),firstName:(0,l.defaultToEmptyString)(e.FirstName),lastName2:(0,l.defaultToEmptyString)(e.LastName2),lastName:(0,l.defaultToEmptyString)(e.LastName),middleName:(0,l.defaultToEmptyString)(e.MiddleName),middleNameInitial:(0,l.defaultToEmptyString)(e.MiddleName),pseudo:(0,l.defaultToEmptyString)(e.Pseudo),title:e.Title}),t.identityListView=e=>e.map(t.identityAutofillView),t.idCardAutofillView=e=>{const t=(0,c.epochToDate)((0,c.vaultDateToViewDate)(e.ExpireDate)),r=(0,c.epochToDate)((0,c.vaultDateToViewDate)(e.DeliveryDate));return{...p(e),vaultType:n.VaultSourceType.IdCard,country:(0,c.vaultCountryToViewCountry)(e.LocaleFormat),creationDate:(0,l.defaultToZero)(e.CreationDatetime),expirationDay:t.getDate(),expirationMonth:t.getMonth()+c.ZERO_INDEX_BASED_MONTH_OFFSET,expirationYear:t.getFullYear(),expirationDateFull:`${t.getFullYear()}-${t.getMonth()+c.ZERO_INDEX_BASED_MONTH_OFFSET}-${t.getDate()}`,idNumber:(0,l.defaultToEmptyString)(e.Number),issueDay:r.getDate(),issueMonth:r.getMonth()+c.ZERO_INDEX_BASED_MONTH_OFFSET,issueYear:r.getFullYear(),issueDateFull:`${r.getFullYear()}-${r.getMonth()+c.ZERO_INDEX_BASED_MONTH_OFFSET}-${r.getDate()}`,name:(0,c.identityToName)(e.identity)||e.Fullname||"",spaceId:e.SpaceId}},t.idCardListView=e=>e.map(t.idCardAutofillView),t.noteAutofillView=e=>({...p(e),vaultType:n.VaultSourceType.Note}),t.noteListView=e=>e.map(t.noteAutofillView),t.passportAutofillView=e=>{const t=(0,c.epochToDate)((0,c.vaultDateToViewDate)(e.ExpireDate)),r=(0,c.epochToDate)((0,c.vaultDateToViewDate)(e.DeliveryDate));return{...p(e),vaultType:n.VaultSourceType.Passport,idNumber:(0,l.defaultToEmptyString)(e.Number),country:(0,c.vaultCountryToViewCountry)(e.LocaleFormat),expirationDay:t.getDate(),expirationMonth:t.getMonth()+c.ZERO_INDEX_BASED_MONTH_OFFSET,expirationYear:t.getFullYear(),expirationDateFull:`${t.getFullYear()}-${t.getMonth()+c.ZERO_INDEX_BASED_MONTH_OFFSET}-${t.getDate()}`,issueDay:r.getDate(),issueMonth:r.getMonth()+c.ZERO_INDEX_BASED_MONTH_OFFSET,issueYear:r.getFullYear(),issueDateFull:`${r.getFullYear()}-${r.getMonth()+c.ZERO_INDEX_BASED_MONTH_OFFSET}-${r.getDate()}`,name:(0,c.identityToName)(e.identity)||e.Fullname||"",deliveryPlace:(0,l.defaultToEmptyString)(e.DeliveryPlace),creationDate:(0,l.defaultToZero)(e.CreationDatetime)}},t.passportListView=e=>e.map(t.passportAutofillView),t.paymentCardAutofillView=e=>({...p(e),vaultType:n.VaultSourceType.PaymentCard,bank:(0,l.defaultToEmptyString)(e.Bank),cardNumber:(0,l.defaultToEmptyString)(e.CardNumber),cardNumberLastDigits:(0,a.getLastDigitsFromCardNumber)(e.CardNumber),color:e.Color||a.defaultColor,expireMonth:(0,l.defaultToEmptyString)(e.ExpireMonth),expireYear:(0,l.defaultToEmptyString)(e.ExpireYear),name:(0,l.defaultToEmptyString)(e.Name),ownerName:(0,l.defaultToEmptyString)(e.OwnerName),securityCode:(0,l.defaultToEmptyString)(e.SecurityCode),type:e.Type}),t.paymentCardListView=e=>e.map(t.paymentCardAutofillView),t.personalWebsiteAutofillView=e=>({...p(e),vaultType:n.VaultSourceType.PersonalWebsite,name:(0,l.defaultToEmptyString)(e.Name),website:(0,l.defaultToEmptyString)(e.Website)}),t.personalWebsiteListView=e=>e.map(t.personalWebsiteAutofillView),t.phoneAutofillView=e=>({...p(e),vaultType:n.VaultSourceType.Phone,name:(0,l.defaultToEmptyString)(e.PhoneName),numberInternational:(0,l.defaultToEmptyString)(e.NumberNational),number:(0,l.defaultToEmptyString)(e.Number),type:e.Type}),t.phoneListView=e=>e.map(t.phoneAutofillView),t.socialSecurityIdAutofillView=e=>({...p(e),vaultType:n.VaultSourceType.SocialSecurityId,name:(0,c.identityToName)(e.identity)||e.SocialSecurityFullname||"",idNumber:(0,l.defaultToEmptyString)(e.SocialSecurityNumber),country:(0,c.vaultCountryToViewCountry)(e.LocaleFormat),creationDate:(0,l.defaultToZero)(e.CreationDatetime)}),t.socialSecurityIdListView=e=>e.map(t.socialSecurityIdAutofillView),t.passkeyAutofillView=e=>({...p(e),credentialId:e.CredentialId,privateKey:e.PrivateKey,rpId:e.RpId,rpName:e.RpName,userDisplayName:e.UserDisplayName,userHandle:e.UserHandle,vaultType:n.VaultSourceType.Passkey,counter:e.Counter,keyAlgorithm:e.KeyAlgorithm})},62922:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(42517),t),o(r(21871),t)},42517:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isOtherDataSource=t.isVaultDataSource=void 0;const n=r(74127);t.isVaultDataSource=e=>(0,n.isVaultSourceType)(e.type),t.isOtherDataSource=e=>(0,n.isOtherSourceType)(e.type)},21871:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.vaultSourceTypeToDataModelTypeMap=void 0;const n=r(74127),o=r(53576);t.vaultSourceTypeToDataModelTypeMap={[n.VaultSourceType.Address]:o.DataModelType.KWAddress,[n.VaultSourceType.BankAccount]:o.DataModelType.KWBankStatement,[n.VaultSourceType.Company]:o.DataModelType.KWCompany,[n.VaultSourceType.Credential]:o.DataModelType.KWAuthentifiant,[n.VaultSourceType.CredentialCategory]:o.DataModelType.KWAuthCategory,[n.VaultSourceType.DriverLicense]:o.DataModelType.KWDriverLicence,[n.VaultSourceType.Email]:o.DataModelType.KWEmail,[n.VaultSourceType.FiscalId]:o.DataModelType.KWFiscalStatement,[n.VaultSourceType.GeneratedPassword]:o.DataModelType.KWGeneratedPassword,[n.VaultSourceType.IdCard]:o.DataModelType.KWIDCard,[n.VaultSourceType.Identity]:o.DataModelType.KWIdentity,[n.VaultSourceType.NoteCategory]:o.DataModelType.KWSecureNoteCategory,[n.VaultSourceType.Note]:o.DataModelType.KWSecureNote,[n.VaultSourceType.Passkey]:o.DataModelType.KWPasskey,[n.VaultSourceType.Passport]:o.DataModelType.KWPassport,[n.VaultSourceType.PaymentCard]:o.DataModelType.KWPaymentMean_creditCard,[n.VaultSourceType.PersonalWebsite]:o.DataModelType.KWPersonalWebsite,[n.VaultSourceType.Phone]:o.DataModelType.KWPhone,[n.VaultSourceType.SocialSecurityId]:o.DataModelType.KWSocialSecurityStatement}},7006:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const n=r(19083),o=r(50059);t.config={commands:{changeMasterPassword:{handler:n.changeMasterPassword}},queries:{},liveQueries:{liveChangeMasterPasswordStatus:{subject:o.getChangeMasterPasswordStatus$}}}},50059:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getChangeMasterPasswordStatus$=t.emitChangeMasterPasswordStatus=void 0;const n=new(r(18948).Subject);t.emitChangeMasterPasswordStatus=e=>n.next(e),t.getChangeMasterPasswordStatus$=()=>n},33441:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ChangeMasterPasswordStepNeeded=t.ChangeMasterPasswordCode=t.ChangeMPFlowPath=void 0;var n=r(61380);Object.defineProperty(t,"ChangeMPFlowPath",{enumerable:!0,get:function(){return n.ChangeMPFlowPath}}),Object.defineProperty(t,"ChangeMasterPasswordCode",{enumerable:!0,get:function(){return n.ChangeMasterPasswordCode}}),Object.defineProperty(t,"ChangeMasterPasswordStepNeeded",{enumerable:!0,get:function(){return n.ChangeMasterPasswordStepNeeded}})},35186:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0;const n=r(7006);t.bootstrap=e=>{e.register(n.config)}},19083:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.changeMasterPassword=void 0;const n=r(50059),o=r(61380),i=r(33740),a=r(13141),s=r(37515),c=r(78238),u=r(41383),d=r(46298),l=r(88610),p=r(47820),m=r(16593),g=r(16194),f=r(61740),S=r(92233),h=r(61984),y=r(18948),v=r(61475),E=r(88205),A=r(92263),_=r(70252),T=r(61394),I=r(27517);t.changeMasterPassword=async(e,t)=>{const{applicationModulesAccess:r,storeService:b,masterPasswordEncryptorService:w,remoteDataEncryptorService:C,sessionService:D,localStorageService:O,storageService:P,eventLoggerService:N}=e,{queries:{isMasterPasswordLeaked:R,isMasterPasswordWeak:M},commands:{temporaryResetMasterPasswordLeaked:L}}=r.createClients().masterPasswordSecurity,{flow:U}=t,k=await(0,i.preValidationForChangeMP)(e,t);if(!1===k.success)return k;const F=b.getState(),B=await(0,E.makeFeatureFlipsSelectors)(r).featureFlipsSelector(),G=(0,m.isRemoteKeyActivatedSelector)(F)?C:w;(0,n.emitChangeMasterPasswordStatus)({type:o.ChangeMasterPasswordStepNeeded.DOWNLOAD,value:10});const x=(0,m.userLoginSelector)(F);if(!x)return(0,i.makeReturnErrorObject)(o.ChangeMasterPasswordCode.UNEXPECTED_STATE,U);let $;try{$=r.createClients(),await $.session.commands.prepareLocalDataFlush(),b.dispatch((0,g.changeMPStart)())}catch(e){const t=A.CarbonError.fromAnyError(e).addContextInfo("CHANGE_MASTER_PASSWORD","prepareLocalDataFlushError").addAdditionalInfo({comment:"Failed to prepare local data on graphene"});throw(0,_.sendExceptionLog)({error:t}),e}const j=await(0,d.getDataForMasterPasswordChange)(b,x,{});if((0,d.isApiError)(j))return(0,h.logChangeMasterPasswordError)(N,S.ChangeMasterPasswordError.DownloadError),b.dispatch((0,g.changeMPDone)()),(0,i.makeUnexpectedErrorObject)(j.message,U);const{serverKey:K}=b.getUserSession();if(!(0,i.isOtpStatusValid)(j.otpStatus,K))return(0,h.logChangeMasterPasswordError)(N,S.ChangeMasterPasswordError.LoginError),b.dispatch((0,g.changeMPDone)()),(0,i.makeReturnErrorObject)(o.ChangeMasterPasswordCode.OTP_PROBLEM,U);const{timestamp:V}=j,{transactions:H,sharingKeys:W}=j.data;try{const d=await(0,i.deCipherAllTransactions)(D,G,H),m=O.getInstance(),E=await m.doesLocalKeyExist();let w=null;E&&(w=await m.getLocalKey());const{publicKey:C}=W,k=await(0,i.decipherPrivateKey)(b,G,W);let F;switch(await(0,f.cleanRememberMeStorageData)(b,P),t.flow){case o.ChangeMPFlowPath.MP_TO_SSO:F=await(0,s.handleMigrationMPtoSso)(e,t,d,k,C,V);break;case o.ChangeMPFlowPath.SSO_TO_MP:F=await(0,c.handleMigrationSSOtoMP)(e,t,d,k,C,V);break;case o.ChangeMPFlowPath.TO_EMAIL_TOKEN:F=await(0,a.handleMigrationToEmailToken)(e,t,d,k,C,V);break;case o.ChangeMPFlowPath.ADMIN_ASSISTED_RECOVERY:case o.ChangeMPFlowPath.ACCOUNT_RECOVERY_KEY:case o.ChangeMPFlowPath.USER_CHANGING_MP:default:F=await(0,u.handleUserChangingMP)(e,t,d,k,C,V)}if(!F.success)return(0,h.logChangeMasterPasswordError)(N,S.ChangeMasterPasswordError.UnknownError),b.dispatch((0,g.changeMPDone)()),F;await $.session.commands.flushLocalData();const j=Boolean(b.getPersonalSettings().AccountRecoveryKey);try{j&&(await(0,T.deactivateAccountRecoveryKey)(b,x,{reason:"VAULT_KEY_CHANGE"}),(0,h.logUserDeleteAccountRecoveryKey)(N),e.storeService.dispatch((0,I.editPersonalSettings)({AccountRecoveryKey:void 0,AccountRecoveryKeyId:void 0})))}catch(e){const t=A.CarbonError.fromAnyError(e).addContextInfo("CHANGE_MASTER_PASSWORD","deactivateRecoveryKey").addAdditionalInfo({comment:"Failed to deactivate recovery key after successful mp change"});await(0,_.sendExceptionLog)({error:t})}let K,z;w&&await D.getInstance().user.persistLocalKey(w),await(0,p.storeSessionCredentialForRecovery)(b,O),(0,n.emitChangeMasterPasswordStatus)({type:o.ChangeMasterPasswordStepNeeded.DONE,value:100}),await(0,i.resetMigrationState)(e,U),U===o.ChangeMPFlowPath.ADMIN_ASSISTED_RECOVERY||U===o.ChangeMPFlowPath.MP_TO_SSO||U===o.ChangeMPFlowPath.SSO_TO_MP?await(0,l.sessionDidOpen)(e):j&&await e.sessionService.getInstance().user.attemptSync(S.Trigger.ChangeMasterPassword);try{K=await(0,y.firstValueFrom)(R())}catch(e){const t=A.CarbonError.fromAnyError(e).addContextInfo("CHANGE_MASTER_PASSWORD","isMasterPasswordLeakedError").addAdditionalInfo({comment:"Failed to retrieve value from isMasterPasswordLeaked"});throw(0,_.sendExceptionLog)({error:t}),e}try{z=B.ims_web_weak_mp_prod?await(0,y.firstValueFrom)(M()):null}catch(e){const t=A.CarbonError.fromAnyError(e).addContextInfo("CHANGE_MASTER_PASSWORD","isMasterPasswordWeakError").addAdditionalInfo({comment:"Failed to retrieve value from isMasterPasswordWeak"});throw(0,_.sendExceptionLog)({error:t}),e}const q=!!(0,v.isSuccess)(K)&&K.data,Y=null===z?void 0:!!(0,v.isSuccess)(z)&&z.data;if((0,h.logChangeMasterPasswordComplete)(N,q,Y),b.dispatch((0,g.changeMPDone)()),L(void 0),B.ims_web_weak_mp_prod){const{commands:{temporarySendMasterPasswordChangedEvent:e}}=r.createClients().changeMasterPassword;e(void 0)}return{success:!0,response:{reason:o.ChangeMasterPasswordCode.SUCCESS}}}catch(r){if((0,h.logChangeMasterPasswordError)(N,S.ChangeMasterPasswordError.UnknownError),t.flow!==o.ChangeMPFlowPath.MP_TO_SSO&&t.flow!==o.ChangeMPFlowPath.SSO_TO_MP){const r=(0,i.extractCurrentPassword)(F,t);(0,i.revertOnError)(e,G,{currentPassword:r,serverKey:K})}else(0,i.logoutUserOnError)(e);return(0,i.makeUnexpectedErrorObject)(r.message,U)}}},13141:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.handleMigrationToEmailToken=void 0;const n=r(92233),o=r(16593),i=r(50059),a=r(61380),s=r(33740),c=r(46298),u=r(16356),d=r(61984);t.handleMigrationToEmailToken=async(e,t,r,l,p,m)=>{const{storeService:g,sessionService:f,masterPasswordEncryptorService:S,eventLoggerService:h}=e,{newPassword:y,flow:v,currentPassword:E}=t,{serverKey:A}=g.getUserSession(),_=g.getState(),T=(0,o.userLoginSelector)(_);if(!T)return(0,d.logChangeMasterPasswordError)(h,n.ChangeMasterPasswordError.LoginError),(0,s.makeReturnErrorObject)(a.ChangeMasterPasswordCode.UNEXPECTED_STATE,v);const I=(0,s.returnProperCryptoConfig)(g);S.setInstance({raw:y},"",I),g.dispatch((0,u.updateMasterPassword)(y)),g.dispatch((0,u.updateServerKey)("")),g.dispatch((0,u.updateRemoteKey)(null));const{authTicket:b}=(0,o.authTicketInfoSelector)(_),w=await(0,s.cipherTransactionWithNewMP)(g,f,S,r,v),C=await(0,s.cipherPrivateKey)(S,l),D={timestamp:m,transactions:(0,s.formatTransaction)(w),updateVerification:{type:"email_token"},sharingKeys:{publicKey:p,privateKey:C},authTicket:b};(0,i.emitChangeMasterPasswordStatus)({type:a.ChangeMasterPasswordStepNeeded.UPLOADING,value:95});const O=await(0,c.uploadDataForMasterPasswordChange)(g,T,D);if((0,c.isApiError)(O))return(0,d.logChangeMasterPasswordError)(h,n.ChangeMasterPasswordError.UploadError),(0,s.revertOnError)(e,S,{currentPassword:E,serverKey:A}),(0,s.makeUnexpectedErrorObject)(O.message,v);const P=await(0,c.confirmMasterPasswordChangeDone)(g,T,{});return(0,c.isApiError)(P)?((0,d.logChangeMasterPasswordError)(h,n.ChangeMasterPasswordError.ConfirmationError),(0,s.revertOnError)(e,S,{currentPassword:E,serverKey:A}),(0,s.makeUnexpectedErrorObject)(P.message,v)):{success:!0,response:{reason:a.ChangeMasterPasswordCode.SUCCESS}}}},37515:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.handleMigrationMPtoSso=void 0;const n=r(92233),o=r(751),i=r(16593),a=r(50059),s=r(61380),c=r(33740),u=r(46298),d=r(61984);t.handleMigrationMPtoSso=async(e,t,r,l,p,m)=>{const{storeService:g,sessionService:f,remoteDataEncryptorService:S,eventLoggerService:h}=e,{newPassword:y,flow:v}=t,E=g.getState(),A=(0,i.userLoginSelector)(E);if(!A)return(0,d.logChangeMasterPasswordError)(h,n.ChangeMasterPasswordError.LoginError),(0,c.makeReturnErrorObject)(s.ChangeMasterPasswordCode.UNEXPECTED_STATE,v);const{remoteKey:_,serverKeyBase64:T}=await(0,o.prepareRemoteDataEncryptionServices)(e,y),I=[_],b={type:"sso",ssoServerKey:T},{authTicket:w}=(0,i.authTicketInfoSelector)(E),C=await(0,c.cipherTransactionWithNewMP)(g,f,S,r,v),D=await(0,c.cipherPrivateKey)(S,l),O={timestamp:m,transactions:(0,c.formatTransaction)(C),remoteKeys:I,updateVerification:b,sharingKeys:{publicKey:p,privateKey:D},authTicket:w};(0,a.emitChangeMasterPasswordStatus)({type:s.ChangeMasterPasswordStepNeeded.UPLOADING,value:95});const P=await(0,u.uploadDataForMasterPasswordChange)(g,A,O);if((0,u.isApiError)(P))return(0,d.logChangeMasterPasswordError)(h,n.ChangeMasterPasswordError.UploadError),(0,c.logoutUserOnError)(e),(0,c.makeUnexpectedErrorObject)(P.message,v);const N=await(0,u.confirmMasterPasswordChangeDone)(g,A,{});return(0,u.isApiError)(N)?((0,d.logChangeMasterPasswordError)(h,n.ChangeMasterPasswordError.ConfirmationError),(0,c.logoutUserOnError)(e),(0,c.makeUnexpectedErrorObject)(N.message,v)):{success:!0,response:{reason:s.ChangeMasterPasswordCode.SUCCESS}}}},78238:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.handleMigrationSSOtoMP=void 0;const n=r(92233),o=r(16593),i=r(50059),a=r(61380),s=r(33740),c=r(46298),u=r(16356),d=r(61984);t.handleMigrationSSOtoMP=async(e,t,r,l,p,m)=>{const{storeService:g,sessionService:f,masterPasswordEncryptorService:S,eventLoggerService:h}=e,{newPassword:y,flow:v}=t,E=g.getState(),A=(0,o.userLoginSelector)(E);if(!A)return(0,d.logChangeMasterPasswordError)(h,n.ChangeMasterPasswordError.LoginError),(0,s.makeReturnErrorObject)(a.ChangeMasterPasswordCode.UNEXPECTED_STATE,v);const _=(0,s.returnProperCryptoConfig)(g);S.setInstance({raw:y},"",_),g.dispatch((0,u.updateMasterPassword)(y)),g.dispatch((0,u.updateServerKey)("")),g.dispatch((0,u.updateRemoteKey)(null));const{authTicket:T}=(0,o.authTicketInfoSelector)(E),I=await(0,s.cipherTransactionWithNewMP)(g,f,S,r,v),b=await(0,s.cipherPrivateKey)(S,l),w={timestamp:m,transactions:(0,s.formatTransaction)(I),updateVerification:{type:"email_token"},sharingKeys:{publicKey:p,privateKey:b},authTicket:T};(0,i.emitChangeMasterPasswordStatus)({type:a.ChangeMasterPasswordStepNeeded.UPLOADING,value:95});const C=await(0,c.uploadDataForMasterPasswordChange)(g,A,w);if((0,c.isApiError)(C))return(0,d.logChangeMasterPasswordError)(h,n.ChangeMasterPasswordError.UploadError),(0,s.logoutUserOnError)(e),(0,s.makeUnexpectedErrorObject)(C.message,v);const D=await(0,c.confirmMasterPasswordChangeDone)(g,A,{});return(0,c.isApiError)(D)?((0,d.logChangeMasterPasswordError)(h,n.ChangeMasterPasswordError.ConfirmationError),(0,s.logoutUserOnError)(e),(0,s.makeUnexpectedErrorObject)(D.message,v)):{success:!0,response:{reason:a.ChangeMasterPasswordCode.SUCCESS}}}},41383:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.handleUserChangingMP=void 0;const n=r(92233),o=r(16593),i=r(50059),a=r(61380),s=r(33740),c=r(46298),u=r(16356),d=r(61984),l=r(33441);t.handleUserChangingMP=async(e,t,r,p,m,g)=>{const{storeService:f,sessionService:S,masterPasswordEncryptorService:h,eventLoggerService:y}=e,v=f.getState(),{newPassword:E,flow:A}=t,_=(0,s.extractCurrentPassword)(v,t),{serverKey:T}=f.getUserSession(),I=(0,o.userLoginSelector)(v);if(!I)return(0,d.logChangeMasterPasswordError)(y,n.ChangeMasterPasswordError.LoginError),(0,s.makeReturnErrorObject)(a.ChangeMasterPasswordCode.UNEXPECTED_STATE,A);h.setInstance({raw:E},T),f.dispatch((0,u.updateMasterPassword)(E));const b=await(0,s.cipherTransactionWithNewMP)(f,S,h,r),w=await(0,s.cipherPrivateKey)(h,p),C={timestamp:g,transactions:(0,s.formatTransaction)(b),sharingKeys:{publicKey:m,privateKey:w},uploadReason:A===l.ChangeMPFlowPath.ADMIN_ASSISTED_RECOVERY?"complete_account_recovery":void 0};(0,i.emitChangeMasterPasswordStatus)({type:a.ChangeMasterPasswordStepNeeded.UPLOADING,value:95});const D=await(0,c.uploadDataForMasterPasswordChange)(f,I,C);if((0,c.isApiError)(D))return(0,d.logChangeMasterPasswordError)(y,n.ChangeMasterPasswordError.UploadError),(0,s.revertOnError)(e,h,{currentPassword:_,serverKey:T}),(0,s.makeUnexpectedErrorObject)(D.message,A);const O=await(0,c.confirmMasterPasswordChangeDone)(f,I,{});return(0,c.isApiError)(O)?((0,d.logChangeMasterPasswordError)(y,n.ChangeMasterPasswordError.ConfirmationError),(0,s.revertOnError)(e,h,{currentPassword:_,serverKey:T}),(0,s.makeUnexpectedErrorObject)(O.message,A)):{success:!0,response:{reason:a.ChangeMasterPasswordCode.SUCCESS}}}},15209:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0;var n=r(35186);Object.defineProperty(t,"bootstrap",{enumerable:!0,get:function(){return n.bootstrap}})},61984:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.logUserDeleteAccountRecoveryKey=t.logChangeMasterPasswordError=t.logChangeMasterPasswordComplete=t.logChangeMasterPasswordCancel=t.logChangeMasterPasswordStart=void 0;const n=r(92233),o=(e,t,r,o,i)=>{e.logEvent(new n.UserChangeMasterPasswordEvent({flowStep:t,errorName:r||void 0,isLeaked:o,isWeak:i}))};t.logChangeMasterPasswordStart=e=>o(e,n.FlowStep.Start),t.logChangeMasterPasswordCancel=e=>o(e,n.FlowStep.Cancel),t.logChangeMasterPasswordComplete=(e,t,r)=>o(e,n.FlowStep.Complete,void 0,t,r),t.logChangeMasterPasswordError=(e,t)=>o(e,n.FlowStep.Error,t),t.logUserDeleteAccountRecoveryKey=e=>{e.logEvent(new n.UserDeleteAccountRecoveryKeyEvent({deleteKeyReason:n.DeleteKeyReason.VaultKeyChanged}))}},62844:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.changeMPinProgressSelector=void 0,t.changeMPinProgressSelector=e=>e.userSession.changeMPData.changeMPinProgress},23486:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.cipherPrivateKey=void 0;const n=r(56668);t.cipherPrivateKey=async(e,t)=>{const r=(0,n.utf16ToDeflatedUtf8)(t,{skipDeflate:!0});return await e.getInstance().encrypt(r)}},17696:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.cipherTransactionWithNewMP=void 0;const n=r(61380),o=r(33740),i=r(27627),a=r(16859),s=r(75270),c=r(91301),u=r(55623),d=r(27517);t.cipherTransactionWithNewMP=async(e,t,r,l,p,m=!0)=>{const{announce:g}=t.getInstance().user.getSyncArgs(),f=await Promise.all(l.map((async t=>{if(p&&"SETTINGS"===t.type&&t.content){const r={...t,content:await(0,o.getBaseModelFromXml)(g,t.content)};switch(p){case n.ChangeMPFlowPath.MP_TO_SSO:const i={...r.content,CryptoUserPayload:c.CRYPTO_NODERIVATION_HMAC64};return{...r,content:(0,s.getTransactionXml)(i)};case n.ChangeMPFlowPath.SSO_TO_MP:const a={forceSalt:(0,u.getRandomValues)(16),cryptoConfig:(0,o.returnProperCryptoConfig)(e)},l=(0,o.returnProperSettingContent)(e,r,a);return e.dispatch((0,d.editPersonalSettings)(l)),{...t,content:(0,s.getTransactionXml)(l)};case n.ChangeMPFlowPath.ADMIN_ASSISTED_RECOVERY:case n.ChangeMPFlowPath.ACCOUNT_RECOVERY_KEY:case n.ChangeMPFlowPath.USER_CHANGING_MP:case n.ChangeMPFlowPath.TO_EMAIL_TOKEN:}}return t}))),S=f.length,h=m?(0,o.initializeProgress)(n.ChangeMasterPasswordStepNeeded.ENCRYPTING,100,S):null,y=async(e,t)=>{h&&h(),t(await(0,a.encryptSingleTransaction)(r,e))};return await new Promise((e=>{(0,i.asyncMapLimit)(f,y,e,100)}))}},68328:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.deCipherAllTransactions=void 0;const n=r(83638),o=r(61380),i=r(33740),a=r(27627),s=r(16859),c=r(82761),u=r(70252),d=r(92263);t.deCipherAllTransactions=async(e,t,r,l=!0)=>{const{announce:p}=e.getInstance().user.getSyncArgs(),m=t.getInstance(),g=r.length,f=l?(0,i.initializeProgress)(o.ChangeMasterPasswordStepNeeded.DECRYPTING,100,g):null,S=async(e,t)=>{if(f&&f(),e.content)try{const r=await(0,s.decryptTransactionContent)(m,p,e);t({...e,content:r})}catch(r){if(e.type===n.TransactionType.SETTINGS){const t=d.CarbonError.fromAnyError(r).addContextInfo("CHANGE_MP","decipherAllTransactions").addAdditionalInfo({comment:r.message??`Transaction of type ${e.type} couldn't be decrypted`});throw(0,u.sendExceptionLog)({error:t}),r}t(null)}else t(e)},h=await new Promise((e=>{(0,a.asyncMapLimit)(r,S,e,100)}));return(0,c.sanitizeTransactions)(h)}},74931:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.decipherPrivateKey=void 0;const n=r(56668),o=r(16356);t.decipherPrivateKey=async(e,t,r)=>{const i=await t.getInstance().decrypt(r.privateKey),a=(0,n.deflatedUtf8ToUtf16)(i,{skipInflate:!0}),s={privateKey:a,publicKey:r.publicKey};return e.dispatch((0,o.updateKeyPair)(s)),a}},60950:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.formatTransaction=void 0,t.formatTransaction=e=>e.map((({action:e,content:t,identifier:r,time:n,type:o})=>({action:e,content:t,identifier:r,time:n,type:o})))},10078:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getBaseModelFromXml=void 0;const n=r(80469),o=r(16859),i=r(51104);t.getBaseModelFromXml=async(e,t)=>{const r=await(0,o.parseTransactionContentXml)(e,t);return i.fixPersonalSettingTypes.fromTransaction((0,n.fixKwType)(r))}},33740:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(23486),t),o(r(17696),t),o(r(74931),t),o(r(68328),t),o(r(60950),t),o(r(10078),t),o(r(39463),t),o(r(90673),t),o(r(17433),t),o(r(99849),t),o(r(14224),t),o(r(61484),t),o(r(16494),t),o(r(55612),t),o(r(78028),t),o(r(55429),t)},39463:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.initializeProgress=void 0;const n=r(50059),o=r(61380);t.initializeProgress=(e,t,r)=>{const i=e===o.ChangeMasterPasswordStepNeeded.DECRYPTING?10:50;let a=0;return()=>{a++,a%t!=0&&a!==r||(0,n.emitChangeMasterPasswordStatus)({type:e,value:i+Math.round(40*a/r)})}}},90673:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isOtpStatusValid=void 0,t.isOtpStatusValid=(e,t)=>{switch(e){case"login":return t&&t.length>0;case"disabled":case"newDevice":case"sso":return!t||0===t.length;default:return!1}}},17433:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.logoutUserOnError=void 0;const n=r(16194),o=r(1965),i=r(16593);t.logoutUserOnError=async e=>{const{storeService:t,storageService:r,sessionService:a,applicationModulesAccess:s}=e,c=(0,i.userLoginSelector)(t.getState());t.dispatch((0,n.changeMPDone)()),c&&(0,o.wipeOutLocalAccounts)(r,s,[c]),a.close()}},99849:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makeReturnErrorObject=void 0;const n=r(50059),o=r(61380),i=r(70252);t.makeReturnErrorObject=(e,t)=>{(0,n.emitChangeMasterPasswordStatus)({type:o.ChangeMasterPasswordStepNeeded.ERROR,value:100});const r=new Error(`[ChangeMP] ${t}: ${e}`);return(0,i.sendExceptionLog)({error:r}),{success:!1,error:{code:e}}}},14224:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makeUnexpectedErrorObject=void 0;const n=r(61380),o=r(70252);t.makeUnexpectedErrorObject=(e,t)=>{const r=new Error(`[ChangeMP] - Unexpected - ${t}: ${e}`);return(0,o.sendExceptionLog)({error:r}),{success:!1,error:{code:n.ChangeMasterPasswordCode.UNKNOWN_ERROR,message:e}}}},61484:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.preValidationForChangeMP=t.extractCurrentPassword=void 0;const n=r(61380),o=r(57903),i=r(64948),a=r(16593),s=r(29303),c=r(88205),u=r(33740),d=r(28287),l=r(71012);t.extractCurrentPassword=(e,t)=>t.flow===n.ChangeMPFlowPath.ADMIN_ASSISTED_RECOVERY?(0,s.recoveryDataSelector)(e).currentPassword:t.currentPassword,t.preValidationForChangeMP=async(e,t)=>{const{applicationModulesAccess:r,masterPasswordEncryptorService:s,storeService:p}=e,{newPassword:m,flow:g}=t;if(!await(0,o.waitUntilSyncComplete)(p))return(0,u.makeReturnErrorObject)(n.ChangeMasterPasswordCode.SYNC_PROGRESS,g);const f=p.getState(),S=await(0,c.makeFeatureFlipsSelectors)(r).featureFlipsSelector();if(!p.getAccountInfo().isAuthenticated)return(0,u.makeReturnErrorObject)(n.ChangeMasterPasswordCode.INNACTIVE_SESSION,g);if(S[n.CHANGEMP_WEB_BLOCKED_FEATURE_FLIP])return(0,u.makeReturnErrorObject)(n.ChangeMasterPasswordCode.FEATURE_BLOCKED,g);const h=await(0,i.evaluatePasswordStrengthOutOfFive)(m);if(!m||!h||h<l.minAcceptablePasswordStrength)return(0,u.makeReturnErrorObject)(n.ChangeMasterPasswordCode.MP_STRENGTH_ERROR,g);const y=(0,a.isRemoteKeyActivatedSelector)(f),v=9e5,{authTicket:E,date:A}=(0,a.authTicketInfoSelector)(f);if(!(0,a.userLoginSelector)(f))return(0,u.makeReturnErrorObject)(n.ChangeMasterPasswordCode.UNEXPECTED_STATE,g);switch(t.flow){case n.ChangeMPFlowPath.MP_TO_SSO:if(!E||!A||Date.now()-A>v)return(0,u.makeReturnErrorObject)(n.ChangeMasterPasswordCode.INVALID_TOKEN,g);if(y)return(0,u.makeReturnErrorObject)(n.ChangeMasterPasswordCode.UNEXPECTED_STATE,g);break;case n.ChangeMPFlowPath.SSO_TO_MP:if(!E||!A||Date.now()-A>v)return(0,u.makeReturnErrorObject)(n.ChangeMasterPasswordCode.INVALID_TOKEN,g);if(!y)return(0,u.makeReturnErrorObject)(n.ChangeMasterPasswordCode.UNEXPECTED_STATE,g);break;case n.ChangeMPFlowPath.ADMIN_ASSISTED_RECOVERY:break;case n.ChangeMPFlowPath.TO_EMAIL_TOKEN:case n.ChangeMPFlowPath.USER_CHANGING_MP:case n.ChangeMPFlowPath.ACCOUNT_RECOVERY_KEY:{const{currentPassword:e}=t;if(g!==n.ChangeMPFlowPath.ACCOUNT_RECOVERY_KEY&&e===m)return(0,u.makeReturnErrorObject)(n.ChangeMasterPasswordCode.MP_ERROR,g);if(!await(0,d.validateMasterPassword)(p,s,e))return(0,u.makeReturnErrorObject)(n.ChangeMasterPasswordCode.WRONG_PASSWORD,g)}break;default:return(0,u.makeReturnErrorObject)(n.ChangeMasterPasswordCode.UNEXPECTED_STATE,g)}return{success:!0}}},16494:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.resetMigrationState=void 0;const n=r(61380),o=r(95363),i=r(7624);t.resetMigrationState=async(e,t)=>{if(t===n.ChangeMPFlowPath.USER_CHANGING_MP||t===n.ChangeMPFlowPath.TO_EMAIL_TOKEN||t===n.ChangeMPFlowPath.ACCOUNT_RECOVERY_KEY)return;const{storeService:r}=e;r.dispatch((0,o.resetRecoverySessionData)()),r.dispatch((0,i.resetSSOSettings)()),t===n.ChangeMPFlowPath.MP_TO_SSO&&r.dispatch((0,i.storeSSOSettings)({ssoUser:!0}))}},55612:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.returnProperCryptoConfig=void 0;const n=r(56668),o=r(65675),i=r(92310);t.returnProperCryptoConfig=e=>{let t=n.ARGON2_DEFAULT_PAYLOAD;const r=(0,i.currentSpaceInfoSelector)(e.getState());r?.cryptoForcedPayload&&(t=r.cryptoForcedPayload);try{return(0,o.parsePayload)(t).cryptoConfig}catch(e){return(0,o.makeFlexibleMarkerCryptoConfig)("argon2d")}}},78028:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.returnProperSettingContent=void 0;const n=r(56668),o=r(16038),i=r(95648),a=r(92310);t.returnProperSettingContent=(e,t,r)=>{let s=n.ARGON2_DEFAULT_PAYLOAD;const c=(0,a.currentSpaceInfoSelector)(e.getState());return c?.cryptoForcedPayload&&(s=c.cryptoForcedPayload),{...(0,i.makeBasePersonalSettings)(),...t.content,CryptoUserPayload:s,CryptoFixedSalt:(0,o.bufferToBase64)(r.forceSalt)}}},55429:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.revertOnError=void 0;const n=r(16194),o=r(16356);t.revertOnError=async(e,t,r)=>{const{currentPassword:i,serverKey:a}=r,{storeService:s}=e;t.setInstance({raw:i},a),s.dispatch((0,o.updateMasterPassword)(i)),s.dispatch((0,o.updateServerKey)(a)),s.dispatch((0,n.changeMPDone)())}},61380:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ChangeMasterPasswordStepNeeded=t.CHANGEMP_WEB_BLOCKED_FEATURE_FLIP=t.ChangeMasterPasswordCode=t.ChangeMPFlowPath=void 0,function(e){e.USER_CHANGING_MP="USER_CHANGING_MP",e.MP_TO_SSO="MP_TO_SSO",e.SSO_TO_MP="SSO_TO_MP",e.TO_EMAIL_TOKEN="EMAIL_TOKEN",e.ADMIN_ASSISTED_RECOVERY="ADMIN_ASSISTED_RECOVERY",e.ACCOUNT_RECOVERY_KEY="ACCOUNT_RECOVERY_KEY"}(t.ChangeMPFlowPath||(t.ChangeMPFlowPath={})),function(e){e.FEATURE_BLOCKED="feature_blocked",e.INNACTIVE_SESSION="inactive_session",e.INVALID_TOKEN="invalid_token",e.OTP_PROBLEM="otp_problem",e.MP_ERROR="mp_error",e.MP_STRENGTH_ERROR="mp_strength_error",e.SUCCESS="success",e.SYNC_PROGRESS="sync_in_progress",e.UNKNOWN_ERROR="unknown_error",e.WRONG_PASSWORD="wrong_password",e.UNEXPECTED_STATE="unexpected_state"}(t.ChangeMasterPasswordCode||(t.ChangeMasterPasswordCode={})),t.CHANGEMP_WEB_BLOCKED_FEATURE_FLIP="disableChangeMpOnWeb",function(e){e.DOWNLOAD="download",e.DECRYPTING="decrypting",e.ENCRYPTING="encrypting",e.UPLOADING="uploading",e.DONE="done",e.ERROR="error"}(t.ChangeMasterPasswordStepNeeded||(t.ChangeMasterPasswordStepNeeded={}))},20849:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.subscribeToDebugEvents=void 0;const n=r(95623),o=e=>(t,r)=>{const{message:n,details:o={}}=r;t[e]({date:(new Date).toJSON(),message:n,optionalParams:Object.keys(o).reduce(((e,t)=>[...e,o[t]]),[])})};t.subscribeToDebugEvents=function(e){(0,n.redirectConsoleLogs)((t=>{const{level:r=n.LogLevel.Debug}=t;(e=>{switch(e){case n.LogLevel.Error:return o("error");case n.LogLevel.Warn:return o("warning");case n.LogLevel.Info:return o("info");case n.LogLevel.Debug:case n.LogLevel.Verbose:default:return o("log")}})(r)(e,t)}))}},44273:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.subscribeToDiagnosticEvents=void 0;let r=null;t.subscribeToDiagnosticEvents=function(e){r=e,e.decipheringDiagnosticLogEvent.on((e=>e))},t.default=function(){return r}},39947:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.carbonE2EConnector=void 0;const n=r(71796);t.carbonE2EConnector={registerFreeTrial:(0,n.slot)(),getTeamTokens:(0,n.slot)(),confirmFreeTrial:(0,n.slot)(),getPremiumStatus:(0,n.slot)(),proposeMembers:(0,n.slot)(),acceptTeamInvite:(0,n.slot)(),getTokenForTestUser:(0,n.slot)(),getServiceProviderToken:(0,n.slot)(),createOrUpdateDarkWebBreach:(0,n.slot)(),addPrivateBreach:(0,n.slot)(),createPublicBreach:(0,n.slot)(),forceBreachRefresh:(0,n.slot)(),getUserCryptoPayload:(0,n.slot)()}},58427:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.subscribeToE2EEvents=void 0;const n=r(3674),o=r(17338),i=r(37864),a=r(71602),s=r(32006),c=r(79734);t.subscribeToE2EEvents=function(e,t){const r=(0,o.getCoreServices)(t),u=(0,n.makeTeamAdminController)(r.storeService,r.wsService);e.registerFreeTrial.on(u.registerFreeTrial),e.getTeamTokens.on(u.getTeamTokens),e.confirmFreeTrial.on(u.confirmFreeTrial),e.getPremiumStatus.on(u.getPremiumStatus),e.proposeMembers.on(u.proposeMembers),e.acceptTeamInvite.on(u.acceptTeamInvite),e.getTokenForTestUser.on((e=>(0,i.getTokenForKwUser)(r,e))),e.getServiceProviderToken.on((e=>(0,a.getServiceProviderToken)(r,e))),e.createOrUpdateDarkWebBreach.on((e=>(0,c.createOrUpdateDarkWebBreachHelper)(r,e))),e.addPrivateBreach.on((e=>(0,c.addPrivateBreachHelper)(r,e))),e.createPublicBreach.on((e=>(0,c.createPublicBreachHelper)(r,e))),e.forceBreachRefresh.on((()=>{(0,s.forceBreachRefreshHandler)(r)})),e.getUserCryptoPayload.on((()=>r.storeService.getPersonalSettings().CryptoUserPayload))}},30855:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.subscribeToE2EEvents=t.carbonE2EConnector=void 0;var n=r(39947);Object.defineProperty(t,"carbonE2EConnector",{enumerable:!0,get:function(){return n.carbonE2EConnector}});var o=r(58427);Object.defineProperty(t,"subscribeToE2EEvents",{enumerable:!0,get:function(){return o.subscribeToE2EEvents}})},19697:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setEventBus=void 0;let r=null;t.setEventBus=e=>{r=e},t.default=function(){return r}},39421:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setEventBus=void 0;let r=null;t.setEventBus=e=>{r=e},t.default=function(){return r}},44242:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.subscribeToMaverickEvents=void 0;const n=r(19065),o=r(17338),i=r(38865),a=r(39421);t.subscribeToMaverickEvents=function(e,t){(0,a.setEventBus)(e);const r=(0,o.getCoreServices)(t),s=(0,n.makeDataManagementController)(r);e.savePersonalDataItem.on((e=>{s.savePersonalDataItem(e)})),e.filledDataItem.on((e=>s.updateMetadataItemFilledOnPage(e.id,e.url,e.dataType))),e.updateWebOnboardingMode.on((e=>(0,i.updateWebOnboardingMode)(r.storeService,r.sessionService,e)))}},21726:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setEventBus=void 0;let r=null;t.setEventBus=e=>{r=e},t.default=function(){return r}},4798:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.subscribeToExtensionEvents=void 0;const n=r(2246),o=r(90622),i=r(70252),a=r(38865),s=r(25576),c=r(17338),u=r(5464),d=r(88610),l=r(21726);t.subscribeToExtensionEvents=function(e,t){(0,l.setEventBus)(e);const r=(0,c.getCoreServices)(t),{storeService:p,storageService:m}=r,g=(0,d.makeLoginController)(r),f=(0,u.makeSessionController)(r);e.getAccountInfo.on((()=>f.getAndTriggerRefreshAccountInfo())),e.getDevicesList.on((()=>f.getDevicesList().then((e=>({devicesList:e}))))),e.getLocalAccountsList.on((()=>(0,o.getLocalAccounts)(p,m).then((e=>({localAccounts:e}))))),e.getAnonymousLogsMetadata.on((()=>({anonymouscomputerid:(0,n.getCommonAppSetting)("anonymousComputerId")}))),e.askWebsiteInfo.on((({fullUrl:e})=>f.askWebsiteInfo(e))),e.deactivateDevice.on((e=>{f.deactivateDevice(e.deviceId)})),e.changeDeviceName.on((e=>{f.changeDeviceName(e.deviceId,e.updatedName)})),e.checkIfMasterPasswordIsValid.on((e=>f.validateMasterPassword(e.masterPassword).then((e=>({isMasterPasswordValid:e}))))),e.closeSession.on((()=>f.closeSession())),e.lockSession.on((()=>f.lockSession())),e.openSession.on((({login:e,password:t})=>g.openSession(e,{password:t}))),e.openSessionWithToken.on((({login:e,password:t,token:r,persistData:n,deviceName:o})=>{g.openSessionWithToken(e,t,r,n?s.PersistData.PERSIST_DATA_YES:s.PersistData.PERSIST_DATA_NO,o)})),e.openSessionWithDashlaneAuthenticator.on((({login:e,password:t,persistData:r,deviceName:n})=>{g.openSessionWithDashlaneAuthenticator(e,t,r?s.PersistData.PERSIST_DATA_YES:s.PersistData.PERSIST_DATA_NO,n)})),e.cancelDashlaneAuthenticatorRegistration.on((()=>{g.cancelDashlaneAuthenticatorRegistration()})),e.openSessionResendToken.on((e=>{g.openSessionResendToken(e.login)})),e.openSessionWithOTP.on((e=>{g.openSessionWithOTP(e.login,e.password,e.otp)})),e.openSessionWithOTPForNewDevice.on((({login:e,password:t,otp:r,persistData:n,deviceName:o})=>{g.openSessionWithOTPForNewDevice(e,t,r,n?s.PersistData.PERSIST_DATA_YES:s.PersistData.PERSIST_DATA_NO,o)})),e.openSessionWithMasterPassword.on((e=>{g.openSessionWithMasterPassword(e.login,e.password,{rememberMasterPassword:e.rememberPassword,serverKey:e.serverKey})})),e.openExtraDeviceSession.on((e=>{g.openExtraDeviceSession(e.login,{password:e.password,serverKey:e.serverKey})})),e.openSessionWithExtraDeviceToken.on((e=>g.openSessionWithExtraDeviceToken(e.login,e.extraDeviceToken,e.persistData?s.PersistData.PERSIST_DATA_YES:s.PersistData.PERSIST_DATA_NO,{password:e.password,deviceName:e.deviceName}))),e.sessionForceSync.on((e=>{f.sessionForceSync(e.trigger)})),e.updateWebOnboardingMode.on((e=>{a.updateWebOnboardingMode(r.storeService,r.sessionService,e)})),e.openDevSession.on((()=>{})),e.exceptionLog.on((e=>(0,i.sendTypedExceptionLog)("extensionException",e)))}},75391:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.subscribeToLeelooEvents=void 0;const n=r(71703),o=r(70252),i=r(25576),a=r(90622),s=r(17338),c=r(5464),u=r(38865),d=r(88610),l=r(15444),p=r(3674),m=r(63623),g=r(58415),f=r(97124),S=r(33332),h=r(58639),y=r(89675),v=r(19065),E=r(19697);t.subscribeToLeelooEvents=function(e,t){(0,E.setEventBus)(e);const r=(0,s.getCoreServices)(t),{applicationModulesAccess:A,storeService:_,localStorageService:T,wsService:I,sessionService:b,storageService:w}=r,C=(0,n.makeAccountCreationController)(r),D=(0,c.makeSessionController)(r),O=(0,d.makeLoginController)(r),P=(0,v.makeDataManagementController)(r),N=(0,l.makeRecoveryController)(_,I),R=(0,y.makeSettingsController)(_,I),M=(0,p.makeTeamAdminController)(_,I),L=(0,f.makeSharingService)(_,I),U=(0,g.makeDirectorySyncController)({storeService:_,localStorageService:T,wsService:I,sessionService:b,sharingService:L}),k=(0,S.makeStaticDataController)();e.getUki.on((()=>D.getUki())),e.savePaymentCard.on((e=>{P.savePaymentCardFromClient(e)})),e.savePersonalDataItem.on((e=>P.savePersonalDataItem(e))),e.removePersonalDataItem.on((e=>P.removePersonalDataItem(e.id))),e.getAccountInfo.on((()=>D.getAndTriggerRefreshAccountInfo())),e.getDevicesList.on((()=>D.getDevicesList().then((e=>({devicesList:e}))))),e.getLocalAccountsList.on((()=>(0,a.getLocalAccounts)(_,w).then((e=>({localAccounts:e}))))),e.getTemporaryToken.on((()=>D.getTemporaryToken().then((e=>({temporaryToken:e}))))),e.deactivateDevice.on((e=>{D.deactivateDevice(e.deviceId)})),e.changeDeviceName.on((e=>{D.changeDeviceName(e.deviceId,e.updatedName)})),e.cancelPremiumSubscription.on((()=>D.cancelPremiumSubscription())),e.getInvoices.on((()=>D.getInvoices().then((e=>({invoices:e}))))),e.closeSession.on((()=>D.closeSession())),e.lockSession.on((()=>D.lockSession())),e.resumeSession.on((()=>D.resumeSession())),e.getPersonalSettings.on((()=>D.getPersonalSettings().then((e=>e)))),e.openSession.on((({login:e,password:t})=>O.openSession(e,{password:t}))),e.openSessionWithToken.on((({login:e,password:t,token:r,persistData:n,deviceName:o})=>{O.openSessionWithToken(e,t,r,n?i.PersistData.PERSIST_DATA_YES:i.PersistData.PERSIST_DATA_NO,o)})),e.openSessionWithDashlaneAuthenticator.on((({login:e,password:t,persistData:r,deviceName:n})=>{O.openSessionWithDashlaneAuthenticator(e,t,r?i.PersistData.PERSIST_DATA_YES:i.PersistData.PERSIST_DATA_NO,n)})),e.cancelDashlaneAuthenticatorRegistration.on((()=>{O.cancelDashlaneAuthenticatorRegistration()})),e.openSessionResendToken.on((e=>{O.openSessionResendToken(e.login)})),e.openSessionWithOTP.on((e=>{O.openSessionWithOTP(e.login,e.password,e.otp,void 0,e.withBackupCode)})),e.openSessionWithOTPForNewDevice.on((({login:e,password:t,otp:r,persistData:n,deviceName:o,withBackupCode:a})=>{O.openSessionWithOTPForNewDevice(e,t,r,n?i.PersistData.PERSIST_DATA_YES:i.PersistData.PERSIST_DATA_NO,o,a)})),e.openSessionWithMasterPassword.on((e=>O.openSessionWithMasterPassword(e.login,e.password,{rememberMasterPassword:e.rememberPassword,requiredPermissions:e.requiredPermissions,serverKey:e.serverKey}))),e.openExtraDeviceSession.on((e=>{O.openExtraDeviceSession(e.login,{password:e.password,serverKey:e.serverKey})})),e.openSessionWithExtraDeviceToken.on((e=>O.openSessionWithExtraDeviceToken(e.login,e.extraDeviceToken,e.persistData?i.PersistData.PERSIST_DATA_YES:i.PersistData.PERSIST_DATA_NO,{password:e.password,deviceName:e.deviceName}))),e.sessionForceSync.on((e=>D.sessionForceSync(e.trigger))),e.exceptionLog.on((e=>(0,o.sendTypedExceptionLog)("leelooException",e))),e.teamUpdated.on((e=>M.teamUpdateHandler(e).then((e=>({errors:e}))))),e.createUserGroup.on((e=>M.createUserGroupAction(b,e))),e.deleteUserGroup.on((e=>M.deleteUserGroupAction(e))),e.renameUserGroup.on((e=>M.renameUserGroupAction(e))),e.inviteUserGroupMembers.on((e=>M.inviteUserGroupMembersAction(e))),e.revokeUserGroupMembers.on((e=>M.revokeUserGroupMembersAction(e))),e.updateUserGroupMembers.on((e=>M.updateUserGroupMembersAction(e))),e.createAccountStep1.on((e=>C.createAccount(e))),e.createAccountStep2.on((e=>C.confirmAccountCreation(e))),e.checkLogin.on((e=>C.checkLogin(e))),e.getMasterPasswordResetDemandList.on((e=>N.getMasterPasswordResetDemandList(e))),e.acceptMasterPasswordResetDemand.on((e=>N.acceptMasterPasswordResetDemand(e))),e.checkIfMasterPasswordIsValid.on((e=>D.validateMasterPassword(e.masterPassword).then((e=>({isMasterPasswordValid:e}))))),e.declineMasterPasswordResetDemand.on((e=>N.declineMasterPasswordResetDemand(e))),e.getMembers.on((e=>M.getMembers(e))),e.addTeamAdmin.on((e=>M.addTeamAdmin(e))),e.removeTeamAdmin.on((e=>M.removeTeamAdmin(e))),e.setTeamSettings.on((e=>R.setTeamSettings(e))),e.updateWebOnboardingMode.on((e=>u.updateWebOnboardingMode(_,b,e))),e.checkDirectorySyncKeyResponse.on((e=>{const{teamId:t,publicKey:r,requestId:n,response:o}=e;"validated"===o?U.keyValidatedByTacAdmin(t,r):"rejected"===o&&U.keyRejectedByTacAdmin(t,n)})),e.queryStaticDataCollections.on((e=>k.query(e))),e.sendSharingResponse.on((e=>(0,m.handleSharingResponse)(A,_,b,e))),e.getDataModel.on((()=>(0,h.getDataUpdates)(_).obfuscatedPersonalDataToSend)),e.getSharingSync.on((()=>_.getState().userSession.sharingSync)),e.getSharingData.on((()=>_.getSharingData())),e.revokeSharing.on((({itemGroupId:e,recipient:t})=>(0,m.handleRevokeSharing)(A,_,b,I,e,t))),e.updateSharingPermission.on((({itemGroupId:e,recipient:t,permission:r})=>(0,m.handleUpdateSharingPermission)(_,b,I,e,t,r))),e.setPendingElementsAsSeen.on((e=>(0,m.setPendingElementsAsSeen)(_,T,e))),e.isUserLastAdminOnItem.on((e=>(0,m.isUserLastAdminOnItem)(_,e))),e.doesUserReceiveItemViaGroup.on((e=>(0,m.doesUserReceiveItemViaGroup)(_,e)))}},58513:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const n=r(75653),o=r(57193);t.config={commands:{changeUserCrypto:{handler:o.changeUserCrypto}},queries:{getCanUserChangeCrypto:{selector:n.canUserSelectCryptoSelector},getUserDerivationMethod:{selector:n.userDerivationMethodSelector}},liveQueries:{liveUserDerivationMethod:{operator:n.userDerivationMethodSelector$}}}},39319:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SupportedDerivationMethods=void 0;var n=r(64816);Object.defineProperty(t,"SupportedDerivationMethods",{enumerable:!0,get:function(){return n.SupportedDerivationMethods}})},21344:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0;const n=r(58513);t.bootstrap=e=>{e.register(n.config)}},21583:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0;var n=r(21344);Object.defineProperty(t,"bootstrap",{enumerable:!0,get:function(){return n.bootstrap}})},75653:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.userDerivationMethodSelector$=t.userDerivationMethodSelector=t.canUserSelectCryptoSelector=t.teamCryptoForcedPayloadSelector=t.hasCryptoMigrationPhase2EnabledSelector=t.hasCryptoMigrationPhase1EnabledSelector=void 0;const n=r(18948),o=r(3343),i=r(7944),a=r(88205),s=r(65675),c=r(16593),u=r(64816);t.hasCryptoMigrationPhase1EnabledSelector=async e=>(await(0,a.makeFeatureFlipsSelectors)(e.applicationModulesAccess).featureFlipsSelector()).itadmin_SAEX_CryptoMigration_Phase1,t.hasCryptoMigrationPhase2EnabledSelector=async e=>(await(0,a.makeFeatureFlipsSelectors)(e.applicationModulesAccess).featureFlipsSelector()).itadmin_SAEX_CryptoMigration_Phase2,t.teamCryptoForcedPayloadSelector=e=>{const t=(0,i.activeSpacesSelector)(e)[0];return t?.details.info.cryptoForcedPayload??""},t.canUserSelectCryptoSelector=e=>!(0,t.teamCryptoForcedPayloadSelector)(e),t.userDerivationMethodSelector=e=>{switch((0,c.userDefaultCryptoSelector)(e)){case s.ARGON2_DEFAULT_PAYLOAD:return u.SupportedDerivationMethods.ARGON2D;case s.PBKDF2_DEFAULT_PAYLOAD:return u.SupportedDerivationMethods.PBKDF2;case s.KWC3_DEFAULT_PAYLOAD:return u.SupportedDerivationMethods.KWC3;default:return null}},t.userDerivationMethodSelector$=()=>(0,n.pipe)((0,o.map)(t.userDerivationMethodSelector),(0,o.distinctUntilChanged)())},57193:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.changeUserCrypto=void 0;const n=r(92233),o=r(55696),i=r(48238);t.changeUserCrypto=async function(e,{newDerivationMethod:t}){const{storeService:r}=e,a=r.getPersonalSettings().CryptoUserPayload,s=(0,i.getNewCryptoPayload)(t);if(!s)throw new Error(`[changeUserCrypto] - client sent wrong derivation value (${t})`);return await(0,o.migrateUserCrypto)(e,a,s,n.CryptoMigrationType.SettingsChange)}},77965:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.decryptAllTransactions=void 0;const n=r(16859),o=r(83638);t.decryptAllTransactions=async function(e,t,r){const{announce:i}=r.getInstance().user.getSyncArgs(),a=e.map((async e=>({...e,content:await(0,n.decryptTransactionContent)(t.getInstance(),i,e).catch((t=>{if(e.type!==o.TransactionType.SETTINGS)return"";throw t}))})));return(await Promise.all(a)).filter((e=>!!e.content))}},9027:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.decryptAllUserData=void 0;const n=r(33740),o=r(77965);t.decryptAllUserData=async function(e,t,r,{transactions:i,sharingKeys:a}){try{return{clearTransactions:await(0,o.decryptAllTransactions)(i,r,e),clearPrivateKey:await(0,n.decipherPrivateKey)(t,r,a)}}catch(e){throw new Error(`decipherAllUserData failed with error: ${e}`)}}},73909:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getDataToMigrate=void 0;const n=r(92233),o=r(46298),i=r(16593);t.getDataToMigrate=async function(e,t){try{const t=e.getState(),r=(0,i.userLoginSelector)(t),n=await(0,o.getDataForMasterPasswordChange)(e,r,{});if((0,o.isApiError)(n))throw new Error(`getDataDoMigrate failed with error: ${n}`);return{transactions:n.data.transactions,sharingKeys:n.data.sharingKeys,timestamp:n.timestamp}}catch(e){throw t(n.CryptoMigrationStatus.ErrorDownload),new Error(`getDataDoMigrate failed with error: ${e}`)}}},48238:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getNewCryptoPayload=void 0;const n=r(65675),o=r(38250);t.getNewCryptoPayload=function(e){switch(e){case o.SupportedDerivationMethods.ARGON2D:return n.ARGON2_DEFAULT_PAYLOAD;case o.SupportedDerivationMethods.PBKDF2:return n.PBKDF2_DEFAULT_PAYLOAD;case o.SupportedDerivationMethods.KWC3:return n.KWC3_DEFAULT_PAYLOAD;default:return}}},18767:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.reEncryptAllUserData=void 0;const n=r(92233),o=r(33740),i=r(16859);t.reEncryptAllUserData=async function(e,{clearTransactions:t,clearPrivateKey:r},a){try{const n=t.map((t=>(0,i.encryptSingleTransaction)(e,t)));return{encryptedTransactions:await Promise.all(n),encryptedPrivateKey:await(0,o.cipherPrivateKey)(e,r)}}catch(e){throw a(n.CryptoMigrationStatus.ErrorReencryption),new Error(`reEncryptAllUserData failed with error: ${e}`)}}},46076:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.resetMasterPasswordEncryptorService=void 0;const n=r(65675),o=r(16593);t.resetMasterPasswordEncryptorService=function(e,t){const{storeService:r,masterPasswordEncryptorService:i}=e,a=r.getState(),s=(0,o.masterPasswordSelector)(a),c=(0,o.serverKeySelector)(a),u=t===n.KWC3_DEFAULT_PAYLOAD?(0,n.getLegacyCryptoConfig)(t):(0,n.parsePayload)(t).cryptoConfig;i.setInstance({raw:s},c,u)}},36116:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.updateAndPersistLocalData=void 0;const n=r(92233),o=r(16038),i=r(55623),a=r(27517);t.updateAndPersistLocalData=async function(e,t,r,s,c){try{e.dispatch((0,a.editPersonalSettings)({CryptoUserPayload:s,CryptoFixedSalt:(0,o.bufferToBase64)((0,i.getRandomValues)(16))})),await t.getInstance().user.persistPersonalSettings();const n=await r.getInstance().getLocalKey();await t.getInstance().user.persistLocalKey(n)}catch(e){throw c(n.CryptoMigrationStatus.ErrorUpdateLocalData),new Error(`updateAndPersistLocalData failed with error: ${e}`)}}},34726:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.uploadDataOnServer=void 0;const n=r(92233),o=r(33740),i=r(46298),a=r(69214),s=r(16593);t.uploadDataOnServer=async function(e,t,r){try{const r=e.getState(),n=(0,s.userLoginSelector)(r),c={...t,transactions:(0,o.formatTransaction)(t.transactions)},u=await(0,a.uploadDataForCryptoChange)(e,n,c);if((0,i.isApiError)(u))throw new Error(`uploadDataForCryptoChange failed with error: ${u}`)}catch(e){throw r(n.CryptoMigrationStatus.ErrorUpload),new Error(`uploadDataForCryptoChange failed with error: ${e}`)}}},55696:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.migrateUserCrypto=void 0;const n=r(92233),o=r(65675),i=r(70252),a=r(57903),s=r(9027),c=r(73909),u=r(18767),d=r(46076),l=r(36116),p=r(34726),m=r(64816),g={[o.KWC3_DEFAULT_PAYLOAD]:n.CryptoAlgorithm.Kwc3,[o.ARGON2_DEFAULT_PAYLOAD]:n.CryptoAlgorithm.Argon2d,[o.PBKDF2_DEFAULT_PAYLOAD]:n.CryptoAlgorithm.Pbkdf2};t.migrateUserCrypto=async function(e,t,r,o){try{const{sessionService:i,storeService:f,masterPasswordEncryptorService:S,localStorageService:h,eventLoggerService:y}=e;if(!await(0,a.waitUntilSyncComplete)(f))return{success:!1,error:{code:m.ApiErrorType.ChangeUserCryptoFailed}};const v=e=>y.logEvent(new n.UserMigrateCryptoEvent({newCrypto:g[r],previousCrypto:g[t],type:o,status:e})),{transactions:E,sharingKeys:A,timestamp:_}=await(0,c.getDataToMigrate)(f,v),{clearTransactions:T,clearPrivateKey:I}=await(0,s.decryptAllUserData)(i,f,S,{transactions:E,sharingKeys:A});(0,d.resetMasterPasswordEncryptorService)(e,r);const{encryptedTransactions:b,encryptedPrivateKey:w}=await(0,u.reEncryptAllUserData)(S,{clearTransactions:T,clearPrivateKey:I},v);return await(0,p.uploadDataOnServer)(f,{timestamp:_,transactions:b,sharingKeys:{publicKey:A.publicKey,privateKey:w}},v),await(0,l.updateAndPersistLocalData)(f,i,h,r,v),await i.getInstance().user.attemptSync(n.Trigger.SettingsChange),v(n.CryptoMigrationStatus.Success),{success:!0}}catch(r){return(0,d.resetMasterPasswordEncryptorService)(e,t),(0,i.sendExceptionLog)({funcName:"migrateUserCrypto",fileName:"/carbon/src/CryptoMigration/services/migrate-user-crypto.ts",message:`Migration from KWC3 to Argon2 failed with error: ${r}`}),{success:!1,error:{code:m.ApiErrorType.ChangeUserCryptoFailed,message:r.message}}}}},63549:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setupSubscriptions=void 0;const n=r(55696),o=r(92233),i=r(75653),a=r(65675),s=r(16593);t.setupSubscriptions=function(e,t){e.sessionOpened.on((()=>{const{storeService:e}=t,r=e.getState(),c=(0,i.hasCryptoMigrationPhase1EnabledSelector)(t),u=(0,i.hasCryptoMigrationPhase2EnabledSelector)(t),d=(0,i.teamCryptoForcedPayloadSelector)(r),l=(0,s.userDefaultCryptoSelector)(r);!c||d||l!==a.KWC3_DEFAULT_PAYLOAD?u&&d&&d!==l&&(0,n.migrateUserCrypto)(t,l,d,o.CryptoMigrationType.TeamEnforced):(0,n.migrateUserCrypto)(t,a.KWC3_DEFAULT_PAYLOAD,a.ARGON2_DEFAULT_PAYLOAD,o.CryptoMigrationType.MigrateLegacy)}))}},64816:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SupportedDerivationMethods=t.ApiErrorType=void 0,function(e){e.ChangeUserCryptoFailed="CHANGE_USER_CRYPTO_FAILED"}(t.ApiErrorType||(t.ApiErrorType={})),function(e){e.ARGON2D="argon2d",e.PBKDF2="pbkdf2",e.KWC3="kwc3"}(t.SupportedDerivationMethods||(t.SupportedDerivationMethods={}))},44812:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const n=r(52921),o=r(31858);t.config={commands:{getDarkWebInsightsReportResults:{handler:n.getDarkWebInsightsReportResults},getDarkWebInsightsSummary:{handler:o.getDarkWebInsightsSummary}},queries:{},liveQueries:{}}},1945:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0;const n=r(44812);t.bootstrap=e=>{e.register(n.config)}},76592:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0;var n=r(1945);Object.defineProperty(t,"bootstrap",{enumerable:!0,get:function(){return n.bootstrap}})},52921:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getDarkWebInsightsReportResults=void 0;const n=r(96805),o=r(16593),i=r(46298),a=r(82512);t.getDarkWebInsightsReportResults=async function(e,t){const{storeService:r}=e,s=r.getState(),c=(0,o.userLoginSelector)(s),u=await(0,a.getDarkWebInsightReport)(r,c,t);return(0,i.isApiError)(u)?{success:!1,error:{code:n.ApiErrorType.GetDarkWebInsightsFailed,message:`get Dark Web Insights Report failed: ${u.message}`}}:{success:!0,data:u}}},31858:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getDarkWebInsightsSummary=void 0;const n=r(96805),o=r(16593),i=r(46298),a=r(19667);t.getDarkWebInsightsSummary=async function(e){const{storeService:t}=e,r=t.getState(),s=(0,o.userLoginSelector)(r),c=await(0,a.getDarkWebInsightsSummaryRequest)(t,s);return(0,i.isApiError)(c)?{success:!1,error:{code:n.ApiErrorType.GetDarkWebInsightsSummaryFailed,message:`get Dark Web Insights Summary failed: ${c.message}`}}:{success:!0,data:c}}},96805:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EmailIncidentViewStatus=t.BreachType=t.ApiErrorType=void 0,function(e){e.GetDarkWebInsightsFailed="GET_DARK_WEB_INSIGHTS_FAILED",e.GetDarkWebInsightsSummaryFailed="GET_DARK_WEB_INSIGHTS_SUMMARY_FAILED"}(t.ApiErrorType||(t.ApiErrorType={})),function(e){e.Password="password",e.CreditCard="creditcard",e.IPAddress="ip",e.MailingAddress="address",e.Phone="phone",e.Email="email",e.Social="social",e.GeoLocation="geolocation",e.UserName="username",e.PersonalInfo="personalinfo"}(t.BreachType||(t.BreachType={})),function(e){e.New="new",e.Viewed="viewed"}(t.EmailIncidentViewStatus||(t.EmailIncidentViewStatus={}))},52578:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isCredentialSmartCategorized=t.isSpaceQuarantined=void 0;const n=r(21178),o=r(6205);t.isSpaceQuarantined=function(e){return!!e&&!("accepted"===e.details.status.toLowerCase()||!e.details.info)&&Boolean(e.details.info.forcedDomainsEnabled)&&Boolean(e.details.info.removeForcedContentEnabled)},t.isCredentialSmartCategorized=function(e,t){if(!e)return!1;let r="";if(e.Url){const t=new n.ParsedURL(e.Url).getRootDomain();r=t?t.toLowerCase():""}const i=e.Email?e.Email.toLowerCase():"",a=e.Login?e.Login.toLowerCase():"",s=e.SecondaryLogin?e.SecondaryLogin.toLowerCase():"",c=(0,o.getUserAddedLinkedWebsiteDomains)(e).map((e=>e.toLowerCase()));return t.filter((e=>{const t=e.toLowerCase();return r.includes(t)||i.includes(t)||a.includes(t)||s.includes(t)||c.some((e=>e.includes(t)))})).length>0}},76235:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const n=r(5847),o=r(4914),i=r(43837),a=r(2946),s=r(13648),c=r(15141),u=r(2282),d=r(81911),l=r(8453),p=r(68728),m=r(17025),g=r(57718),f=r(36351),S=r(72580),h=r(64489),y=r(75912),v=r(95633),E=r(6210),A=r(14037),_=r(80818),T=r(3474),I=r(80529),b=r(60309),w=r(45665),C=r(74172),D=r(11230),O=r(16458);t.config={commands:{...f.config.commands,...O.vaultConfig.commands,...n.config.commands,...o.config.commands,...i.config.commands,...S.config.commands,...a.config.commands,...s.config.commands,...h.config.commands,...y.config.commands,...c.config.commands,...T.config.commands,...v.config.commands,...u.config.commands,...D.importApiConfig.commands,..._.config.commands,...d.config.commands,...l.config.commands,...p.config.commands,...m.config.commands,...E.config.commands,...A.config.commands,...I.config.commands,...C.config.commands,...b.config.commands,...g.config.commands},queries:{...f.config.queries,...O.vaultConfig.queries,...n.config.queries,...o.config.queries,...S.config.queries,...a.config.queries,...s.config.queries,...h.config.queries,...y.config.queries,...c.config.queries,...T.config.queries,...v.config.queries,...u.config.queries,...D.importApiConfig.queries,..._.config.queries,...d.config.queries,...l.config.queries,...p.config.queries,...m.config.queries,...E.config.queries,...A.config.queries,...I.config.queries,...b.config.queries,...g.config.queries,...w.config.queries},liveQueries:{...f.config.liveQueries,...n.config.liveQueries,...o.config.liveQueries,...S.config.liveQueries,...a.config.liveQueries,...s.config.liveQueries,...h.config.liveQueries,...c.config.liveQueries,...T.config.liveQueries,...v.config.liveQueries,...u.config.liveQueries,...D.importApiConfig.liveQueries,..._.config.liveQueries,...d.config.liveQueries,...l.config.liveQueries,...p.config.liveQueries,...m.config.liveQueries,...E.config.liveQueries,...A.config.liveQueries,...I.config.liveQueries,...b.config.liveQueries,...g.config.liveQueries}}},37148:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),t.ImportSource=void 0,o(r(2124),t),o(r(63499),t),o(r(98760),t),o(r(26655),t),o(r(26763),t),o(r(59198),t),o(r(80666),t),o(r(80630),t),o(r(32921),t),o(r(93301),t),o(r(95175),t),o(r(42262),t),o(r(34130),t),o(r(76707),t),o(r(91315),t),o(r(52490),t),o(r(25),t),o(r(88815),t),o(r(60802),t),o(r(15874),t),function(e){e["1Password"]="1password",e.Bitwarden="bitwarden",e.Chrome="chrome",e.Dash="dash",e.Edge="edge",e.Firefox="firefox",e.Keepass="keepass",e.Keeper="keeper",e.Lastpass="lastpass",e.Other="other",e.Safari="safari"}(t.ImportSource||(t.ImportSource={}))},5847:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const n=r(16018),o=r(13370),i=r(8639);t.config={commands:{addBankAccount:{handler:i.addBankAccountHandler},updateBankAccount:{handler:i.updateBankAccountHandler},deleteBankAccount:{handler:i.deleteBankAccountHandler}},queries:{getBankAccount:{selector:n.viewedBankAccountSelector},getBankAccounts:{selector:n.viewedQueriedBankAccountsSelector}},liveQueries:{liveBankAccount:{operator:o.getBankAccount$},liveBankAccounts:{operator:o.bankAccounts$}}}},2124:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(3816),t)},14369:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addBankAccountHandler=t.getNewBankAccount=void 0;const n=r(92233),o=r(3816),i=r(23136),a=r(92882),s=r(48313),c=r(47408),u=r(78320),d=r(70252),l=r(13675),p=r(79980);t.getNewBankAccount=e=>{const t=(0,c.getUnixTimestamp)();return{kwType:"KWBankStatement",Id:(0,u.generateItemUuid)(),LastBackupTime:0,LocaleFormat:(0,a.defaultToUS)(e.country),AnonId:(0,u.generateItemUuid)(),SpaceId:(0,a.defaultToEmptyString)(e.spaceId),CreationDatetime:t,UserModificationDatetime:t,BankAccountName:(0,a.defaultToEmptyString)(e.name),BankAccountOwner:(0,a.defaultToEmptyString)(e.owner),BankAccountIBAN:(0,a.defaultToEmptyString)(e.IBAN),BankAccountBIC:(0,a.defaultToEmptyString)(e.BIC),BankAccountBank:(0,a.defaultToEmptyString)(e.bank)}},t.addBankAccountHandler=async function(e,r){if(""===r.BIC&&""===r.IBAN)return{success:!1,error:{code:o.AddBankAccountResultErrorCode.EMPTY_BIC_AND_IBAN}};try{return await async function({applicationModulesAccess:e,storeService:r,sessionService:n,eventLoggerService:o},a){if(!r.isAuthenticated())throw new Error("No session available to saveBankAccount");const c=(0,l.sanitizeInputPersonalData)(a),u=(0,t.getNewBankAccount)(c);if(!u.SpaceId){const t=await(0,i.getDefaultSpaceId)(e,r);u.SpaceId=t}(0,p.logAddVaultItem)(r,o,u),r.dispatch((0,s.savePersonalDataItem)(u,u.kwType)),n.getInstance().user.persistPersonalData()}(e,r),(0,i.getDebounceSync)(e.storeService,e.sessionService)({immediateCall:!0},n.Trigger.Save),{success:!0}}catch(e){return(0,d.sendExceptionLog)({error:e}),{success:!1}}}},3242:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.deleteBankAccountHandler=void 0;const n=r(92233),o=r(16018),i=r(3816),a=r(23136),s=r(45291),c=r(70252),u=r(79980);t.deleteBankAccountHandler=function(e,{id:t}){const r=(({storeService:e,eventLoggerService:t},r)=>{const n=e.getState();try{if(!e.isAuthenticated())return{success:!1,error:{code:i.DeleteBankAccountErrorCode.NOT_AUTHORIZED}};const a=(0,o.bankAccountSelector)(n,r);if(!a)return{success:!1,error:{code:i.DeleteBankAccountErrorCode.NOT_FOUND}};(0,u.logDeleteVaultItem)(e,t,a);const c=(0,s.removePersonalItem)(a.kwType,a.Id,null);return e.dispatch(c),{success:!0}}catch(e){const t=new Error(`[BankAccounts] - deleteBankAccount: ${e}`);return(0,c.sendExceptionLog)({error:t}),{success:!1,error:{code:i.DeleteBankAccountErrorCode.INTERNAL_ERROR}}}})(e,t);return r.success&&(0,a.getDebounceSync)(e.storeService,e.sessionService)({immediateCall:!0},n.Trigger.Save),Promise.resolve(r)}},8639:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(14369),t),o(r(31570),t),o(r(3242),t)},31570:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.updateBankAccountHandler=t.getUpdatedBankAccount=t.getBankAccountModifiedProperties=void 0;const n=r(92233),o=r(16018),i=r(3816),a=r(23136),s=r(48313),c=r(47408),u=r(70252),d=r(85406),l=r(13675),p=r(79980),m=e=>void 0!==e&&void 0===(0,d.getAllBanks)()[e];function g(e,r){const n=(0,o.bankAccountSelector)(e,r.id);if(!n)return;const i=(0,t.getBankAccountModifiedProperties)(r,n),a=(0,c.getUnixTimestamp)();return{...n,...i,UserModificationDatetime:a}}t.getBankAccountModifiedProperties=(e,t)=>({BankAccountName:e.name??t.BankAccountName,BankAccountOwner:e.owner??t.BankAccountOwner,BankAccountIBAN:e.IBAN??t.BankAccountIBAN,BankAccountBIC:e.BIC??t.BankAccountBIC,BankAccountBank:e.bank??(m(e.country)?"":t.BankAccountBank),SpaceId:e.spaceId??t.SpaceId,LocaleFormat:e.country??t.LocaleFormat}),t.getUpdatedBankAccount=g,t.updateBankAccountHandler=function(e,t){try{const r=function({storeService:e,sessionService:t,eventLoggerService:r},n){if(!e.isAuthenticated())throw new Error("No session available to updateBankAccount");const a=e.getState(),c=g(a,(0,l.sanitizeInputPersonalData)(n));if(!c)return{success:!1};if(""===c.BankAccountBIC&&""===c.BankAccountIBAN)return{success:!1,error:{code:i.UpdateBankAccountResultErrorCode.EMPTY_BIC_AND_IBAN}};const u=(0,o.bankAccountSelector)(a,n.id);return(0,p.logEditVaultItem)(e,r,c,u),e.dispatch((0,s.savePersonalDataItem)(c,c.kwType)),t.getInstance().user.persistPersonalData(),{success:!0}}(e,t);return r.success?((0,a.getDebounceSync)(e.storeService,e.sessionService)({immediateCall:!0},n.Trigger.Save),Promise.resolve({success:!0})):Promise.resolve(r)}catch(e){return(0,u.sendExceptionLog)({error:e}),Promise.resolve({success:!1})}}},92882:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getBankInfoFromBankAccountData=t.defaultToUS=t.defaultToEmptyString=void 0;const n=r(16516),o=r(53576),i=r(85406);t.defaultToEmptyString=(0,n.defaultTo)(""),t.defaultToUS=(0,n.defaultTo)(o.Country.US),t.getBankInfoFromBankAccountData=e=>{const r=(0,t.defaultToUS)(e.LocaleFormat),{banks:n}=(0,i.getBanks)({country:r}),o=((e,r)=>{if(r){const[n,o]=(0,t.defaultToEmptyString)(e).split("-"),i=r.find((({code:e})=>[n,o].includes(e)))?.code;return i||"NO_TYPE"}return""})(e.BankAccountBank,n),a=o?.length>0?`${r}-${o}`:"",s=(0,t.defaultToEmptyString)(n?.find((({code:e})=>e===o))?.localizedString);return{country:r,bankCode:o,bankLocalizedName:s,bank:a}}},48931:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makeBankAccountSpecificProps=t.makeNewBankAccount=t.makeUpdatedBankAccount=void 0;const n=r(16516),o=r(47408),i=r(78163);function a(e){const t=(0,n.defaultTo)("");return{BankAccountName:t(e.name),BankAccountOwner:t(e.owner),BankAccountIBAN:t(e.IBAN),BankAccountBIC:t(e.BIC),BankAccountBank:t(e.bank)}}t.makeUpdatedBankAccount=async function(e,t){const r=(0,i.makeUpdatedPersonalDataItemBase)({existingItem:t,updatedItem:e,itemUpdateDate:(0,o.getUnixTimestamp)()});return{...t,...r,...a(e.content)}},t.makeNewBankAccount=async function(e){return{...(0,i.makeNewPersonalDataItemBase)(e),...a(e.content)}},t.makeBankAccountSpecificProps=a},13370:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getBankAccount$=t.bankAccounts$=void 0;const n=r(18948),o=r(3343),i=r(55220),a=r(16018);t.bankAccounts$=(0,i.getLivePersonalInfo)(a.getLiveBankAccountsSelector),t.getBankAccount$=e=>{const t=(0,a.getViewedBankAccountSelector)(e);return(0,n.pipe)((0,o.map)(t),(0,o.distinctUntilChanged)())}},60931:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getBankAccountMappers=void 0;const n=r(83539);t.getBankAccountMappers=()=>({spaceId:e=>e.SpaceId,accountName:e=>e.BankAccountName,bankName:e=>e.BankAccountBank,lastUse:n.lastUseMapper,id:e=>e.Id})},53704:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bankAccountMatch=t.searchGetters=void 0;const n=r(64455),o=r(82234);t.searchGetters=[(0,o.stringProp)("BankAccountName"),(0,o.stringProp)("BankAccountOwner"),(0,o.stringProp)("BankAccountBank")],t.bankAccountMatch=(0,n.match)(t.searchGetters)},16018:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getViewedBankAccountSelector=t.viewedBankAccountSelector=t.getLiveBankAccountsSelector=t.viewedQueriedBankAccountsSelector=t.queryBankAccountsSelector=t.bankAccountMappersSelector=t.bankAccountSelector=t.bankAccountsSelector=void 0;const n=r(16516),o=r(53704),i=r(62826),a=r(24589),s=r(63566),c=r(97006),u=r(49551),d=r(32034),l=r(60931),p=r(57989),m=r(40602);t.bankAccountsSelector=(0,d.createSelector)((e=>e.userSession.personalData.bankAccounts),p.quarantinedSpacesSelector,m.filterOutQuarantinedItems),t.bankAccountSelector=(e,r)=>{const n=(0,t.bankAccountsSelector)(e);return(0,u.findDataModelObject)(r,n)},t.bankAccountMappersSelector=e=>(0,l.getBankAccountMappers)();const g=()=>o.bankAccountMatch;t.queryBankAccountsSelector=(0,a.getQuerySelector)(t.bankAccountsSelector,g,t.bankAccountMappersSelector),t.viewedQueriedBankAccountsSelector=(0,n.compose)((0,s.viewListResults)(i.listView),t.queryBankAccountsSelector),t.getLiveBankAccountsSelector=(0,c.makeLiveSelectorGetter)(t.bankAccountsSelector,(()=>i.listView),g,t.bankAccountMappersSelector),t.viewedBankAccountSelector=(e,r)=>{const n=(0,t.bankAccountSelector)(e,r);return(0,i.detailView)(n)},t.getViewedBankAccountSelector=e=>{const r=(0,d.createSelector)(t.bankAccountsSelector,(t=>(0,u.findDataModelObject)(e,t)));return(0,d.createSelector)(r,i.detailView)}},3816:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UpdateBankAccountResultErrorCode=t.AddBankAccountResultErrorCode=t.DeleteBankAccountErrorCode=void 0,function(e){e[e.NOT_AUTHORIZED=0]="NOT_AUTHORIZED",e[e.NOT_FOUND=1]="NOT_FOUND",e[e.INTERNAL_ERROR=2]="INTERNAL_ERROR"}(t.DeleteBankAccountErrorCode||(t.DeleteBankAccountErrorCode={})),function(e){e.EMPTY_BIC_AND_IBAN="EMPTY_BIC_AND_IBAN"}(t.AddBankAccountResultErrorCode||(t.AddBankAccountResultErrorCode={})),function(e){e.EMPTY_BIC_AND_IBAN="EMPTY_BIC_AND_IBAN"}(t.UpdateBankAccountResultErrorCode||(t.UpdateBankAccountResultErrorCode={}))},62826:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.listView=t.itemView=t.detailView=void 0;const n=r(82043),o=r(92882),i=e=>{const t=(0,o.getBankInfoFromBankAccountData)(e);return{name:(0,o.defaultToEmptyString)(e.BankAccountName),owner:(0,o.defaultToEmptyString)(e.BankAccountOwner),IBAN:(0,o.defaultToEmptyString)(e.BankAccountIBAN),BIC:(0,o.defaultToEmptyString)(e.BankAccountBIC),bank:t.bank,country:t.country,bankCode:t.bankCode,bankLocalizedName:t.bankLocalizedName}};t.detailView=e=>({...(0,n.dataModelDetailView)(e),...i(e)}),t.itemView=e=>({...(0,n.dataModelItemView)(e),...i(e)}),t.listView=e=>e.map(t.itemView)},4914:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const n=r(21342),o=r(52283),i=r(44444);t.config={commands:{updateBreachStatus:{handler:i.updateBreachStatusHandler}},queries:{getBreach:{selector:n.viewedBreachSelector},getBreaches:{selector:n.viewedQueriedBreachesSelector},getBreachesPage:{selector:n.breachesPageSelector},getBreachesPaginationToken:{selector:n.breachesPaginationTokenSelector},getBreachesUpdateStatus:{selector:n.breachesUpdaterStatusSelector}},liveQueries:{liveBreach:{operator:o.getBreach$},liveBreaches:{operator:o.breaches$},liveBreachesBatch:{operator:o.breachesBatch$},liveBreachesUpdaterStatus:{operator:o.breachesUpdaterStatus$}}}},63499:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BreachesUpdaterStatus=t.BreachStatus=t.BreachLeakedDataType=void 0;var n=r(67083);Object.defineProperty(t,"BreachLeakedDataType",{enumerable:!0,get:function(){return n.BreachLeakedDataType}}),Object.defineProperty(t,"BreachStatus",{enumerable:!0,get:function(){return n.BreachStatus}});var o=r(95377);Object.defineProperty(t,"BreachesUpdaterStatus",{enumerable:!0,get:function(){return o.BreachesUpdaterStatus}})},95303:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.clearInstance=t.getInstance=void 0;const n=r(70252),o=r(90503),i=r(90622),a=r(16593),s=r(88205),c=r(36017),u=r(95377),d=r(75130),l=r(44331),p=r(38785),m=r(45291);class g{constructor(e,t,r,n,o){this.storeService=e,this.applicationModulesAccess=t,this.credentialVault=r,this.breachVault=n,this.gateway=o,this.lastRefreshTimestamp=0,this.refreshInProgress=!1}async refresh(e){try{if(this.refreshInProgress)return{vaultSyncNeeded:!1};this.refreshInProgress=!0,this.storeService.dispatch((0,m.updateBreachesUpdaterStatus)(u.BreachesUpdaterStatus.SYNCING));const t=Boolean(e&&e.forceRefresh);if(!await this.isFeatureFlipped()||!this.isSessionOpened()||!this.isRefreshNeeded(t))return this.storeService.dispatch((0,m.updateBreachesUpdaterStatus)(u.BreachesUpdaterStatus.SKIPPED)),this.refreshInProgress=!1,{vaultSyncNeeded:!1};const{breachVault:r,credentialVault:n}=this,o=await this.fetchLatestPublicBreaches(),i=await this.fetchLatestPrivateBreaches();this.resetTimer();const a=n.getAllCredentials(),s=r.getAllBreaches(),d=[...o.breaches,...i.breaches],l=(0,c.getChangesFromIncomingBreaches)(a,s,d);await r.applyChangesFromSync(l,o.revision,i.refreshDate);const p=this.isVaultSyncNeeded(l);return this.storeService.dispatch((0,m.updateBreachesUpdaterStatus)(p?u.BreachesUpdaterStatus.UPDATED:u.BreachesUpdaterStatus.UNCHANGED)),{vaultSyncNeeded:p}}catch(e){this.storeService.dispatch((0,m.updateBreachesUpdaterStatus)(u.BreachesUpdaterStatus.ERROR));const t=new Error(`[Breaches] - refresh: ${e}`);return(0,n.sendExceptionLog)({error:t,code:o.ExceptionCriticality.WARNING}),{vaultSyncNeeded:!1}}finally{this.refreshInProgress=!1}}async isFeatureFlipped(){const{applicationModulesAccess:e}=this,t=await(0,s.makeFeatureFlipsSelectors)(e).featureFlipsSelector();return Boolean(t)&&t[g.BREACHES_REFRESH_FEATURE_FLIP]}isSessionOpened(){const{storeService:e}=this,t=e.getState(),r=(0,a.userLoginSelector)(t),n=(0,i.ukiSelector)(t);return Boolean(n&&r)}isRefreshNeeded(e){return e||Date.now()-this.lastRefreshTimestamp>=g.BREACHES_REFRESH_INTERVAL_MS}resetTimer(){this.lastRefreshTimestamp=Date.now()}isVaultSyncNeeded(e){return e.updates.length+e.deletions.length>0}async fetchLatestPublicBreaches(){const e=this.breachVault.getLatestPublicBreachesRevision();return this.gateway.getLatestPublicBreaches(e)}async fetchLatestPrivateBreaches(){const e=this.breachVault.getPrivateBreachesRefreshDate();let t,r=[];try{const n=await this.gateway.getLatestPrivateBreaches(e);n&&(r=n.breaches,t=n.refreshDate)}catch(e){const t=new Error(`[Breaches] - refresh: fetchPrivateBreaches error: ${e}`);(0,n.sendExceptionLog)({error:t,code:o.ExceptionCriticality.WARNING})}return{breaches:r,refreshDate:t}}}g.BREACHES_REFRESH_INTERVAL_MS=864e5,g.BREACHES_REFRESH_FEATURE_FLIP="breachesFetchWeb";let f=null;t.getInstance=(e,t,r)=>(null===f&&(f=new g(t,e,new l.CredentialVault(t),new d.BreachVault(t),new p.BreachesWS(r,t))),f),t.clearInstance=()=>{f=null}},36017:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getChangesFromIncomingBreaches=void 0;const n=r(90073),o=r(67083),i=r(86715),a=r(25656),s=r(83480),c=e=>Boolean(e.Password),u=e=>Array.from(new Set(e)),d=(e,t)=>{const{content:r}=e,{leakedPasswords:n}=e;let i=n;if((0,s.hasBreachLeakedDataOfType)(r,o.BreachLeakedDataType.Password)){const{eventDate:e}=r,o=t.filter((e=>t=>1e3*(t.ModificationDatetime||t.CreationDatetime||0)<Date.parse(e))(e)).filter(c).map((e=>e.Password));i=[...n,...o]}return u(i||[])},l=function(e,t,r){const{content:n}=r,{id:c,lastModificationRevision:l}=n,p=(0,s.findByBreachId)(c,t);if(p){if(l<=p.ContentRevision)return{updates:[],deletions:[]};if((0,s.isBreachDeleted)(n))return{updates:[],deletions:[p.Id]}}const m=((e,t)=>(t.content.domains??[]).reduce(((t,r)=>[...t,...e.get(r)??[]]),[]))(e,r),g=d(r,m);return((e,t,r)=>{const n=!(0,i.isDataLeaksBreachContent)(e),o=r.length>0,a=(0,s.hasBreachLeakedPrivateInfo)(e),c=t.length>0;return n&&!o&&(!a||!c)})(n,m,g)?{updates:[],deletions:[]}:(e=>({updates:[e],deletions:[]}))(p?((e,t,r)=>{const n=u(e.LeakedPasswords||[]),i=u([...e.LeakedPasswords,...r]),a=n.length!==i.length?o.BreachStatus.PENDING:e.Status;return{...e,Content:t,ContentRevision:t.lastModificationRevision,LeakedPasswords:i,Status:a}})(p,n,g):(0,a.makeBreachFromContent)(n,g))};t.getChangesFromIncomingBreaches=function(e,t,r){const o=new Map;return e.forEach((e=>{const t=(0,n.getDomainForCredential)(e)||"",r=o.get(t)??[];o.set(t,[...r,e])})),r.reduce(((e,r)=>((e,t)=>({updates:[...e.updates,...t.updates],deletions:[...e.deletions,...t.deletions]}))(e,l(o,t,r))),{updates:[],deletions:[]})}},25656:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makeBreachFromContent=void 0;const n=r(53576),o=r(78320),i=r(67083);t.makeBreachFromContent=(e,t)=>({kwType:n.DataModelType.KWSecurityBreach,LastBackupTime:0,Id:(0,o.generateItemUuid)(),AnonId:(0,o.generateItemUuid)(),BreachId:e.id,Content:e,ContentRevision:e.lastModificationRevision,Status:i.BreachStatus.PENDING,LeakedPasswords:t})},95377:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BreachesUpdaterStatus=void 0,function(e){e.UNKNOWN="unknown",e.SYNCING="syncing",e.SKIPPED="skipped",e.UNCHANGED="unchanged",e.UPDATED="updated",e.ERROR="error"}(t.BreachesUpdaterStatus||(t.BreachesUpdaterStatus={}))},44444:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.updateBreachStatus=t.updateBreachStatusHandler=void 0;const n=r(92233),o=r(48313),i=r(23136),a=r(70252),s=r(95623),c=r(21342);function u(e,t){if(!e.isAuthenticated())throw new Error("No session available to update Breach");const r=e.getState(),n=(0,c.breachSelector)(r,t.id);if(!n)throw new Error("Breach does not exist, cant update");const i={...n,Status:t.status};e.dispatch((0,o.savePersonalDataItem)(i,i.kwType))}t.updateBreachStatusHandler=async function(e,t){const{storeService:r,sessionService:o}=e;try{return u(r,t),(0,i.getDebounceSync)(r,o)({immediateCall:!0},n.Trigger.Save),{success:!0}}catch(e){return s.Debugger.error(e),(0,a.sendExceptionLog)({error:e}),{success:!1}}},t.updateBreachStatus=u},38785:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BreachesWS=void 0;const n=r(16516),o=r(14656),i=r(35587),a=r(36513),s=r(56984),c=r(72365),u=r(16038),d=r(32607),l=r(70252),p=r(90503),m=r(16593),g=r(90622),f=r(48162),S=r(86715),h=r(83480),y=r(48162),v=r(56668);t.BreachesWS=class{constructor(e,t){this.wsService=e,this.storeService=t}async getLatestPublicBreaches(e){const t=this.storeService.getState(),r=(0,m.userLoginSelector)(t),n=(0,g.ukiSelector)(t);if(null===r||null===n)throw new Error("[Breaches] - getLatestPublicBreaches: no current authenticated user");const o=await this.wsService.breaches.get({login:r,uki:n,revision:e});if(!(0,d.isWSResponseSuccess)(o)){const e=`[Breaches] getLatestPublicBreaches: ${o.message}(statusCode: ${o.code})`;throw new Error(e)}const{content:i}=o,{latest:a,filesToDownload:s,revision:c}=i,u=[...a,...await this.downloadFileBreaches(s)].filter(S.isSupportedBreachContent);return{revision:c,breaches:(0,h.deduplicateBreachContents)(u).map((e=>(0,y.makeIncomingBreach)(e,[])))}}async getLatestPrivateBreaches(e){const t=this.storeService.getState(),r=(0,m.premiumStatusSelector)(t);if(!(0,f.hasDarkWebMonitoringFeature)(r))return null;const n=(0,m.userLoginSelector)(t),o=(0,g.ukiSelector)(t);if(null===n||null===o)throw new Error("[Breaches] - getLatestPrivateBreaches: no current authenticated user");const i=await this.wsService.dataleaks.leaks({login:n,uki:o,wantsDetails:!0,includeDisabled:!1,lastUpdateDate:e});if(!(0,d.isWSResponseSuccess)(i)){if((0,y.isBreachesWSResponseNotModified)(i))return{breaches:[],refreshDate:e};const t=i.error&&i.error.code?`, code: ${i.error.code}`:"",r=`[Breaches] - getLatestPrivateBreaches: ${i.message} (statusCode: ${i.code}${t})`;throw new Error(r)}const{content:a}=i,{details:s,leaks:c,lastUpdateDate:u}=a,l=await this.extractLeakedPasswords(s),p=c.filter(S.isSupportedBreachContent);return{breaches:(0,h.deduplicateBreachContents)(p).map((e=>(0,y.makeIncomingBreach)(e,l[e.id]||[]))),refreshDate:u}}async downloadFileBreaches(e){return(0,n.flatten)(await(0,i.asyncMap)(e,this.downloadFileBreach))}async downloadFileBreach(e){try{const{data:t}=await(0,o.get)(e);return t.breaches}catch(e){const t=new Error(`[Breaches] - downloadFileBreach: ${e}`);return(0,l.sendExceptionLog)({error:t,code:p.ExceptionCriticality.ERROR}),[]}}async extractLeakedPasswords(e){try{if(!e||!e.cipheredKey||!e.cipheredInfo)return{};const t=this.storeService.getState(),r=(0,m.sharingKeysSelector)(t);if(!r||!r.publicKey||!r.privateKey)return{};const{privateKey:n}=r,o=(0,a.makeAsymmetricEncryption)({hashAlgorithm:s.HashAlgorithm.SHA_1}),i=await o.decrypt(n,e.cipheredKey),d=(0,c.makeDataEncryptorService)(this.storeService),l=(0,u.base64ToBuffer)(i),p=(0,u.arrayBufferToText)(l);d.setInstance({raw:p},"");const g=await d.getInstance().decrypt(e.cipheredInfo),f=(0,v.deflatedUtf8ToUtf16)(g,{skipInflate:!0}),S=JSON.parse(f);return(0,y.getLeakedPasswordFromIncomingDataLeakDetails)(S)}catch(e){const t=new Error(`[Breaches] - extractLeakedPasswords: ${e}`);return(0,l.sendExceptionLog)({error:t}),{}}}}},12756:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isIncomingDataLeakPasswordInfo=t.isIncomingDataLeakBreachDetails=void 0;const n=r(16516);t.isIncomingDataLeakBreachDetails=e=>(0,n.is)(Object,e)&&"string"==typeof e.breachId&&""!==e.breachId&&Array.isArray(e.data),t.isIncomingDataLeakPasswordInfo=e=>(0,n.is)(Object,e)&&"password"===e.type&&"plaintext"===e.hashMethod&&"string"==typeof e.value&&""!==e.value},48162:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.hasDarkWebMonitoringFeature=t.isBreachesWSResponseNotModified=t.getLeakedPasswordFromIncomingDataLeakDetails=t.makeIncomingBreach=void 0;const n=r(12756);t.makeIncomingBreach=(e,t)=>({content:e,leakedPasswords:t}),t.getLeakedPasswordFromIncomingDataLeakDetails=e=>{if(!Array.isArray(e))return{};const t=e=>(0,n.isIncomingDataLeakPasswordInfo)(e)?e.value:null;return e.reduce(((e,r)=>{if(!(0,n.isIncomingDataLeakBreachDetails)(r))return e;const{breachId:o,data:i}=r,a=i.map(t).filter(Boolean);return a.length?{...e,[o]:a}:e}),{})},t.isBreachesWSResponseNotModified=e=>304===e.code,t.hasDarkWebMonitoringFeature=function(e){if(!e)return!1;const{capabilities:t}=e;return Boolean(t&&t.dataLeak)}},75130:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BreachVault=void 0;const n=r(45291),o=r(12362),i=r(86691),a=r(21342);t.BreachVault=class{constructor(e){this.storeService=e}async applyChangesFromSync(e,t,r){const a=(0,n.breachesUpdated)(e,t,r);let s=null;const{updates:c,deletions:u}=e,d=c.length+u.length,l=(0,o.getInstance)(),p=(0,i.getInstance)();try{d&&(s=p.lockTopic("iconsUpdates"),await l.add("iconsUpdates",{type:"breachUpdates",breachesIds:c.map((e=>e.Id))})),this.storeService.dispatch(a),d&&p.releaseTopic("iconsUpdates",s)}catch(e){throw s&&p.releaseTopic("iconsUpdates",s),e}}getAllBreaches(){const e=this.storeService.getState();return(0,a.breachesSelector)(e)}getLatestPublicBreachesRevision(){const e=this.storeService.getState();return(0,a.publicBreachesRevisionSelector)(e)}getPrivateBreachesRefreshDate(){const e=this.storeService.getState();return(0,a.privateBreachesLastUpdateTimestamp)(e)}}},44331:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CredentialVault=void 0;const n=r(51319);t.CredentialVault=class{constructor(e){this.storeService=e}getAllCredentials(){const e=this.storeService.getState();return(0,n.credentialsSelector)(e)}}},9335:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.listView=t.itemView=t.detailItemView=void 0;const n=r(16516),o=r(88749),i=r(86715),a=r(90451),s=(0,n.defaultTo)([]);function c({name:e,domains:t}){if(e)return e;if(t.length>0){const[e]=t;return e}return""}function u(e,t){if(t&&0!==t.length)return(0,a.getIcon)(e)(t[0])}function d(e,t){const r=t.Content,n=(0,i.isDataLeaksBreach)(t)?t.Content.impactedEmails:[];return{domains:s(r.domains),breachType:(0,o.breachTypeMapper)(t),domainIcon:u(e,t.Content.domains),eventDate:r.eventDate,id:t.Id,impactedEmails:n,name:c(r),status:t.Status}}t.detailItemView=function(e,t){const r=t.Content,n=(0,i.isDataLeaksBreach)(t)?t.Content.impactedEmails:[],a=new Set;return{anonId:t.AnonId,breachType:(0,o.breachTypeMapper)(t),domains:s(r.domains),domainIcon:u(e,t.Content.domains),eventDate:r.eventDate,id:t.Id,impactedEmails:n,kwType:t.kwType,leakedData:s(r.leakedData),leakedPasswords:s(t.LeakedPasswords),name:c(r),status:t.Status,compromisedCredentialIds:[...a]}},t.itemView=d,t.listView=function(e,t){return t.map((t=>d(e,t)))}},83480:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.hasBreachLeakedPrivateInfo=t.hasBreachLeakedDataOfType=t.isBreachDeleted=t.findByBreachId=t.deduplicateBreachContents=void 0;const n=r(16516),o=r(67083),i=r(86715),a=(0,n.takeLast)(1);t.deduplicateBreachContents=(0,n.pipe)((0,n.groupBy)((0,n.prop)("id")),(0,n.mapObjIndexed)((0,n.sortBy)((0,n.prop)("lastModificationRevision"))),(0,n.mapObjIndexed)((e=>a(e))),n.values,n.flatten),t.findByBreachId=(e,t)=>t.find((t=>t.BreachId===e)),t.isBreachDeleted=e=>e.status===o.BreachEnvStatus.Deleted,t.hasBreachLeakedDataOfType=(e,t)=>(e.leakedData||[]).findIndex((e=>t===e))>=0,t.hasBreachLeakedPrivateInfo=e=>(0,i.isDataLeaksBreachContent)(e)||((e,t)=>(e.leakedData||[]).findIndex((e=>t.some((t=>t===e))))>=0)(e,[o.BreachLeakedDataType.Email,o.BreachLeakedDataType.Username,o.BreachLeakedDataType.CreditCard,o.BreachLeakedDataType.Phone,o.BreachLeakedDataType.Address,o.BreachLeakedDataType.SSN,o.BreachLeakedDataType.IP,o.BreachLeakedDataType.Location,o.BreachLeakedDataType.PersonalInfo,o.BreachLeakedDataType.SocialNetwork])},86715:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isPublicBreach=t.isDataLeaksBreach=t.isDataLeaksBreachContent=t.isBreach=t.isSupportedBreach=t.isSupportedBreachContent=void 0;const n=r(16516),o=e=>(0,n.is)(Object,e);function i(e){return function(e){return o(e)&&"number"==typeof e.breachModelVersion}(e)&&1===e.breachModelVersion&&Array.isArray(e.domains)&&"string"==typeof e.eventDate&&"string"==typeof e.id}function a(e){return s(e)&&i(e.Content)}function s(e){return Boolean(e)&&"KWSecurityBreach"===e.kwType}function c(e){return function(e){return"impactedEmails"in e&&Array.isArray(e.impactedEmails)}(e)&&e.impactedEmails.length>0}t.isSupportedBreachContent=i,t.isSupportedBreach=a,t.isBreach=s,t.isDataLeaksBreachContent=c,t.isDataLeaksBreach=e=>a(e)&&c(e.Content),t.isPublicBreach=e=>a(e)&&!c(e.Content)},52283:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.breachesUpdaterStatus$=t.getBreach$=t.breaches$=t.breachesBatch$=void 0;const n=r(18948),o=r(3343),i=r(35893),a=r(33627),s=r(55220),c=r(21342);t.breachesBatch$=e=>{const t=(0,i.parseToken)(e),r=(0,c.getViewedBreachesBatchSelector)(t);return(0,n.pipe)((0,o.map)(r),(0,o.distinctUntilChanged)(a.sameBatch))},t.breaches$=(0,s.getLivePersonalInfo)(c.getLiveBreachesSelector),t.getBreach$=function(e){const t=(0,c.getViewedBreachSelector)(e);return(0,n.pipe)((0,o.map)(t),(0,o.distinctUntilChanged)())},t.breachesUpdaterStatus$=()=>(0,n.pipe)((0,o.map)(c.breachesUpdaterStatusSelector),(0,o.distinctUntilChanged)())},88749:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getBreachMappers=t.breachTypeMapper=void 0;const n=r(86715);function o(e){return(0,n.isDataLeaksBreach)(e)?"private":"public"}t.breachTypeMapper=o,t.getBreachMappers=()=>({breachType:e=>o(e),eventDate:e=>function({eventDate:e}){return Date.parse(e)}(e.Content),id:e=>e.Id,status:e=>e.Status})},69623:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getBreachesBatch=t.viewBreachesBatch=t.getBreachesFirstToken=t.getBreacheSortToken=t.getBreachesFilterToken=void 0;const n=r(16516),o=r(20553),i=r(9335);t.getBreachesFilterToken=({filterCriteria:e})=>({filterCriteria:e||[]}),t.getBreacheSortToken=({sortCriteria:e})=>({uniqField:"id",sortCriteria:e||[]}),t.getBreachesFirstToken=(e,t,r,n)=>(0,o.generateFirstToken)(e,t,r.initialBatchSize||30,n),t.viewBreachesBatch=(e,t)=>(0,i.listView)(e,t),t.getBreachesBatch=(0,n.curry)(((e,t,r)=>(0,o.getBatch)(r,e,t)))},37600:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.breachMatch=t.searchGetters=void 0;const n=r(64455);t.searchGetters=[],t.breachMatch=(0,n.match)(t.searchGetters)},21342:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.breachesUpdaterStatusSelector=t.getViewedBreachSelector=t.getViewedBreachesBatchSelector=t.getLiveBreachesSelector=t.fieldMappersSelector=t.breachesQuerySelector=t.breachesPaginationTokenSelector=t.breachesPageSelector=t.viewedQueriedBreachesSelector=t.breachMappersSelector=t.viewedBreachSelector=t.breachSelector=t.privateBreachesLastUpdateTimestamp=t.publicBreachesRevisionSelector=t.publicBreachesSelector=t.privateBreachesSelector=t.breachesSelector=void 0;const n=r(18948),o=r(32034),i=r(86715),a=r(49551),s=r(63566),c=r(24589),u=r(35893),d=r(20553),l=r(97006),p=r(9335),m=r(88749),g=r(37600),f=r(69623),S=r(91892),h=e=>e.userSession.personalData.securityBreaches,y=(0,o.createSelector)(h,(e=>e.filter(i.isSupportedBreach)));function v(e,r){const n=(0,t.breachesSelector)(e);return(0,a.findDataModelObject)(r,n)}t.breachesSelector=(0,o.createSelector)(y,(e=>[...e.reduce(((e,t)=>{const r=e.get(t.BreachId);return(!r||r.LastBackupTime<t.LastBackupTime)&&e.set(t.BreachId,t),e}),new Map).values()])),t.privateBreachesSelector=(0,o.createSelector)(h,(e=>[...new Set(e.filter(i.isDataLeaksBreach))])),t.publicBreachesSelector=(0,o.createSelector)(h,(e=>[...new Set(e.filter(i.isPublicBreach))])),t.publicBreachesRevisionSelector=e=>e.userSession.personalData.securityBreachesMetadata.latestPublicBreachesRevision,t.privateBreachesLastUpdateTimestamp=e=>e.userSession.personalData.securityBreachesMetadata.latestDataLeaksBreachesUpdate,t.breachSelector=v,t.viewedBreachSelector=function(e,t){const r=(0,S.iconsSelector)(e),n=v(e,t);return(0,p.detailItemView)(r,n)},t.breachMappersSelector=e=>(0,m.getBreachMappers)();const E=()=>g.breachMatch,A=(0,c.getQuerySelector)(t.breachesSelector,E,t.breachMappersSelector),_=(0,o.createSelector)(S.iconsSelector,(e=>t=>(0,f.viewBreachesBatch)(e,t)));t.viewedQueriedBreachesSelector=(e,t)=>{const r=A(e,t),n=_(e);return(0,s.viewListResults)(n)(r)},t.breachesPageSelector=function(e,r){const n=(0,u.parseToken)(r),{sortToken:o,filterToken:i}=n,a={sortToken:o,filterToken:i},s=(0,m.getBreachMappers)(),c=(0,t.breachesQuerySelector)(e,a),l=_(e),p=(0,d.generateNextToken)(s,n,c),g=(0,d.generatePrevToken)(s,n,c),f=(0,d.getBatch)(s,n,c),S=(0,u.stringifyToken)(p),h=(0,u.stringifyToken)(g);return{batch:l(f),nextToken:S,prevToken:h}},t.breachesPaginationTokenSelector=(e,r)=>{const n=(0,f.getBreacheSortToken)(r),o=(0,f.getBreachesFilterToken)(r),i=(0,m.getBreachMappers)(),a={sortToken:n,filterToken:o},s=(0,t.breachesQuerySelector)(e,a),c=(0,f.getBreachesFirstToken)(i,a,r,s);return(0,u.stringifyToken)(c)};const T=(0,u.createOptimizedSortTokenSelector)(((e,{sortToken:t})=>t),n.identity),I=(0,u.createOptimizedFilterTokenSelector)(((e,{filterToken:t})=>t),n.identity);t.breachesQuerySelector=(0,o.createSelector)(m.getBreachMappers,E,T,I,t.breachesSelector,u.queryData),t.fieldMappersSelector=(0,o.createSelector)(t.breachesSelector,m.getBreachMappers),t.getLiveBreachesSelector=(0,l.makeLiveSelectorGetter)(t.breachesSelector,_,E,t.breachMappersSelector),t.getViewedBreachesBatchSelector=e=>{const{sortToken:r,filterToken:n}=e,i={sortToken:r,filterToken:n},a=(0,f.getBreachesBatch)(e),s=(0,o.createSelector)((e=>(0,t.breachesQuerySelector)(e,i)),t.fieldMappersSelector,a),c=(0,u.optimizeBatchSelector)(s);return(0,o.createSelector)(S.iconsSelector,c,f.viewBreachesBatch)},t.getViewedBreachSelector=function(e){const r=(0,o.createSelector)(t.breachesSelector,(t=>(0,a.findDataModelObject)(e,t)));return(0,o.createSelector)(S.iconsSelector,r,p.detailItemView)},t.breachesUpdaterStatusSelector=e=>e.userSession.personalData.breachesUpdaterStatus},79405:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setupSubscriptions=void 0;const n=r(95303);t.setupSubscriptions=async function(e,t){const{applicationModulesAccess:r,storeService:o,wsService:i}=t;e.syncSuccess.on((()=>{(0,n.getInstance)(r,o,i).refresh({forceRefresh:!1})}))}},67083:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BreachCriticality=t.BreachEnvStatus=t.BreachLeakedDataType=t.BreachStatus=void 0,function(e){e.PENDING="PENDING",e.VIEWED="VIEWED",e.ACKNOWLEDGED="ACKNOWLEDGED"}(t.BreachStatus||(t.BreachStatus={})),function(e){e.Username="username",e.Password="password",e.Email="email",e.CreditCard="creditcard",e.Phone="phone",e.Address="address",e.SSN="ssn",e.IP="ip",e.Location="geolocation",e.PersonalInfo="personalinfo",e.SocialNetwork="social"}(t.BreachLeakedDataType||(t.BreachLeakedDataType={})),function(e){e.Legacy="legacy",e.Live="live",e.Staging="staging",e.Deleted="deleted"}(t.BreachEnvStatus||(t.BreachEnvStatus={})),function(e){e[e.Info=1]="Info",e[e.Warning=2]="Warning",e[e.Error=3]="Error"}(t.BreachCriticality||(t.BreachCriticality={}))},40220:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getCurrentData=t.getChangeSet=t.getChangedProperties=t.getChangedPropertiesForRemoval=void 0;const n=r(16516),o=r(78320),i=r(47408),a=r(15171),s={KWAuthentifiant:{Email:"",Login:"",Note:"",Password:"",SecondaryLogin:"",Title:"",Url:"",UserSelectedUrl:"",LinkedServices:{associated_domains:[]}},KWSecureNote:{Content:"",Title:""}};function c(e){const t=s[e.kwType];return Object.keys(t).filter((r=>"LinkedServices"===r?e[r]?.associated_domains&&e[r].associated_domains.length>0:e[r]&&e[r]!==t[r]))}function u(e,t){const r=s[e.kwType];return Object.keys(r).filter((r=>{if("LinkedServices"===r){const n=(e[r]?.associated_domains??[]).map((e=>e.domain)),o=(t[r]?.associated_domains??[]).map((e=>e.domain));return!(0,a.areStringListsEquivalent)(n,o)}return e[r]&&""!==e[r]&&e[r]!==t[r]}))}function d(e){return Object.keys(s[e.kwType]).reduce(((t,r)=>(t[r]="LinkedServices"===r?e[r]?.associated_domains?e[r]:{associated_domains:[]}:e[r]||"",t)),{})}t.getChangedPropertiesForRemoval=c,t.getChangedProperties=u,t.getChangeSet=function(e){const{change:t,deviceName:r,oldItem:a,userLogin:s,platformInfo:l}=e;if((0,n.isNil)(a))return null;const p="removal"===t.type?c(a):u(a,t.updatedItem);return 0===p.length?null:{kwType:"KWChangeSet",ChangedProperties:p,CurrentData:d(a),Id:(0,o.generateItemUuid)(),Platform:l.platformName,DeviceName:r||"",ModificationDate:(0,i.getUnixTimestamp)(),Removed:(0,n.defaultTo)(!1,"removal"===t.type),User:s}},t.getCurrentData=d},85225:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makeRemovalChange=t.makeUpdateChange=void 0,t.makeUpdateChange=e=>({type:"update",updatedItem:e}),t.makeRemovalChange=e=>({type:"removal",itemId:e.Id,itemKwType:e.kwType})},73566:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getUpdatedItemChangeHistory=t.isChangeHistoryCandidate=t.getEmptyChangeHistory=void 0;const n=r(16516),o=r(53576),i=r(78320),a=r(40220),s=r(84977),c=r(83638),u=r(49551);function d(e){const[t,r,n]="removal"===e.type?[e.itemId,e.itemKwType,""]:[e.updatedItem.Id,e.updatedItem.kwType,e.updatedItem.Title||""];return{kwType:"KWDataChangeHistory",ChangeSets:[],Id:(0,i.generateItemUuid)(),ObjectId:t,ObjectTitle:n,ObjectType:(0,c.getTransactionTypeFromDataModelType)(r),LastBackupTime:0}}t.getEmptyChangeHistory=d;t.isChangeHistoryCandidate=function(e){return(0,o.isCredential)(e)||(0,o.isNote)(e)},t.getUpdatedItemChangeHistory=function(e){const{deviceName:t,personalData:r,change:o,userLogin:i,platformInfo:c}=e,[l,p,m]="removal"===o.type?[o.itemId,o.itemKwType,""]:[o.updatedItem.Id,o.updatedItem.kwType,o.updatedItem.Title],g=s.default[p],f=(0,u.findDataModelObject)(l,r[g]),S=(0,a.getChangeSet)({deviceName:t,change:o,oldItem:f,userLogin:i,platformInfo:c});if(!S)return null;const h=r.changeHistories.find((e=>e?.ObjectId?.toUpperCase()===(l||"").toUpperCase())),y=h||d(o),v=(0,n.last)(y.ChangeSets);return v&&((e,t)=>(0,n.equals)(t.CurrentData,e.CurrentData))(v,S)?null:{...y,ObjectTitle:m,ChangeSets:y.ChangeSets.concat(S)}}},35385:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.credentialsHistoriesSelector=void 0;const n=r(32034),o=r(40602),i=r(83659),a=r(57989),s=r(83638),c=e=>e.ObjectType===s.TransactionType.AUTHENTIFIANT,u=(0,n.createSelector)((e=>e.userSession.personalData.changeHistories),(e=>e.filter(c)));t.credentialsHistoriesSelector=(0,n.createSelector)(u,a.quarantinedSpacesSelector,i.unsafeAllCredentialsSelector,o.filterOutQuarantinedItems)},43837:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const n=r(42682);t.config={commands:{addCollection:{handler:n.addCollectionHandler},deleteCollection:{handler:n.deleteCollectionHandler},removeItemsFromCollections:{handler:n.removeItemsFromCollectionsHandler},updateCollection:{handler:n.updateCollectionHandler}},queries:{},liveQueries:{}}},55740:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addCollectionHandler=t.getNewCollection=void 0;const n=r(53576),o=r(92233),i=r(23136),a=r(48313),s=r(47408),c=r(78320),u=r(70252),d=r(13675);function l(e){const t=(0,s.getUnixTimestamp)();return{kwType:"KWCollection",Id:(0,c.generateItemUuid)(),LastBackupTime:0,LastUse:t,LocaleFormat:n.Country.UNIVERSAL,AnonId:(0,c.generateItemUuid)(),SpaceId:e.spaceId,CreationDatetime:t,UserModificationDatetime:t,Name:e.name,VaultItems:e.vaultItems.map((e=>({Id:e.id,Type:e.type})))}}t.getNewCollection=l,t.addCollectionHandler=async function(e,t){try{const r=await async function({applicationModulesAccess:e,storeService:t,sessionService:r},n){if(!t.isAuthenticated())throw new Error("No session available to addCollection");const o=l((0,d.sanitizeInputPersonalData)(n));if(!o.SpaceId){const r=await(0,i.getDefaultSpaceId)(e,t);o.SpaceId=r}return t.dispatch((0,a.savePersonalDataItem)(o,o.kwType)),r.getInstance().user.persistPersonalData(),o.Id}(e,t);return(0,i.getDebounceSync)(e.storeService,e.sessionService)({immediateCall:!0},o.Trigger.Save),{success:!0,id:r}}catch(e){return(0,u.sendExceptionLog)({error:e}),{success:!1}}}},9833:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.deleteCollectionHandler=void 0;const n=r(92233),o=r(23136),i=r(70252),a=r(53576),s=r(45291);t.deleteCollectionHandler=async function(e,t){try{return await async function({storeService:e,sessionService:t},r){if(!e.isAuthenticated())throw new Error("No session available to deleteCollection");const n=(0,s.removePersonalItem)(a.DataModelType.KWCollection,r,null);e.dispatch(n),t.getInstance().user.persistPersonalData()}(e,t.id),(0,o.getDebounceSync)(e.storeService,e.sessionService)({immediateCall:!0},n.Trigger.Save),{success:!0}}catch(e){return(0,i.sendExceptionLog)({error:e}),{success:!1}}}},42682:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(55740),t),o(r(9833),t),o(r(73240),t),o(r(6366),t)},73240:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.removeItemsFromCollectionsHandler=void 0;const n=r(53626),o=r(6366);t.removeItemsFromCollectionsHandler=async function(e,t){const r=e.storeService.getState(),i=(0,n.collectionsSelector)(r),a=[];let s,c;if(i.forEach((e=>{s=e.VaultItems.length,e.VaultItems=e.VaultItems.filter((e=>!t.ids.includes(e.Id))),c=e.VaultItems.length,s!==c&&a.push(e)})),!a.length)return;const u=a.map((t=>(0,o.updateCollectionHandler)(e,{id:t.Id,name:t.Name,spaceId:t.SpaceId,vaultItems:t.VaultItems.map((e=>({id:e.Id,type:e.Type})))})));return{success:!(await Promise.all(u)).some((e=>!e.success))}}},6366:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.updateCollectionHandler=void 0;const n=r(92233),o=r(23136),i=r(48313),a=r(47408),s=r(70252),c=r(13675),u=r(53626),d=e=>({LastUse:(0,a.getUnixTimestamp)(),Name:e.name,SpaceId:e.spaceId,VaultItems:e.vaultItems.map((e=>({Id:e.id,Type:e.type})))});t.updateCollectionHandler=async function(e,t){try{return await async function(e,t,r){if(!e.isAuthenticated())throw new Error("No session available to updateCollection");const n=function(e,t){const r=(0,u.collectionSelector)(e,t.id);if(!r)throw new Error("[updateCollection]: unable to find collection to update.");return{...r,...d(t)}}(e.getState(),(0,c.sanitizeInputPersonalData)(r));return e.dispatch((0,i.savePersonalDataItem)(n,n.kwType)),t.getInstance().user.persistPersonalData()}(e.storeService,e.sessionService,t),(0,o.getDebounceSync)(e.storeService,e.sessionService)({immediateCall:!0},n.Trigger.Save),{success:!0}}catch(e){return(0,s.sendExceptionLog)({error:e}),{success:!1}}}},10770:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(42682),t),o(r(53626),t),o(r(182),t)},53626:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.collectionSelector=t.collectionsSelector=void 0;const n=r(49551);t.collectionsSelector=e=>e.userSession.personalData.collections,t.collectionSelector=(e,r)=>{const o=(0,t.collectionsSelector)(e);return(0,n.findDataModelObject)(r,o)}},182:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getCollectionNamesContainingVaultItemId=void 0,t.getCollectionNamesContainingVaultItemId=(e,t,r=[])=>t.flatMap((t=>t.VaultItems.some((t=>t.Id===e))?t.Name:[])).concat(r.flatMap((t=>t.vaultItems.some((t=>t.id===e))?t.name:[])))},2946:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const n=r(8777),o=r(71806),i=r(7657),a=r(10043),s=r(35410),c=r(80920),u=r(79895),d=r(60581),l=r(66663),p=r(28831),m=r(73567),g=r(9763),f=r(52109),S=r(39546),h=r(70853),y=r(8766),v=r(15171);t.config={commands:{addCredential:{handler:g.createCredential},deleteCredential:{handler:f.deleteCredentialHandler},deleteCredentialsInBulk:{handler:S.deleteCredentialsInBulkHandler},updateCredential:{handler:h.updateCredentialHandler},updateLinkedWebsites:{handler:v.updateLinkedWebsitesHandler}},queries:{canUserAddNewCredential:{selector:n.canUserAddNewCredentialSelector},getCredential:{selector:d.viewedCredentialSelector},getCredentialCategories:{selector:u.viewedCredentialCategoriesSelector},getCredentials:{selector:l.viewedQueriedCredentialsSelector},getCredentialsByDomain:{selector:p.viewedQueriedCredentialsByDomainSelector},getCredentialsCount:{selector:o.credentialsCountSelector},getCredentialLimitStatus:{selector:i.credentialLimitStatusSelector},getCredentialsPage:{selector:a.credentialsPageSelector},getCredentialsPaginationToken:{selector:s.credentialsPaginationTokenSelector},getDashlaneDefinedLinkedWebsites:{selector:y.getDashlaneDefinedLinkedWebsitesSelector},getShouldShowRequireMasterPassword:{selector:c.shouldShowRequireMasterPasswordSelector}},liveQueries:{liveCanUserAddNewCredential:{operator:m.canUserAddNewCredential$},liveCredentialLimitStatus:{operator:m.credentialLimitStatus$},liveCredential:{operator:m.getCredential$},liveCredentials:{operator:m.credentials$},liveCredentialsByDomain:{operator:m.credentialsByDomain$},liveCredentialsBatch:{operator:m.credentialsBatch$},liveCredentialsCount:{operator:m.credentialsCount$}}}},98760:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(83690),t)},39373:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.handleLimitedSharedCredentialsPassword=t.removeCredentialsWithQuarantinedSpaces=t.fixCredentialsWithMissingTitles=t.fixCredentialWithMissingTitle=void 0;const n=r(52578),o=r(89489),i=r(90073),a=r(37275);function s(e){return e.Title?e:Object.assign({},e,{Title:(0,i.getDomainForCredential)(e)})}t.fixCredentialWithMissingTitle=s,t.fixCredentialsWithMissingTitles=function(e){return e.map(s)},t.removeCredentialsWithQuarantinedSpaces=function(e,t){if(!e.spaces||0===e.spaces.length)return t;const r=[];return e.spaces.filter(n.isSpaceQuarantined).forEach((e=>{const o=e.details.info&&e.details.info.teamDomains?e.details.info.teamDomains:[];t.filter((e=>(0,n.isCredentialSmartCategorized)(e,o))).forEach((t=>{""!==t.SpaceId&&t.SpaceId===e.details.teamId&&r.push(t)}))})),t.filter((e=>!r.includes(e)))},t.handleLimitedSharedCredentialsPassword=function(e,t,r){const n=(0,a.getSharingDataWithCollections)(t),i=(0,o.getLimitedSharedItemIds)(t,n.collections,n.itemGroups,r);return e.map((e=>i[e.Id]?Object.assign({},e,{Password:"************",limitedPermissions:!0}):e))}},36439:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.countCredentials=void 0;const n=r(35893);t.countCredentials=(e,t,r,o)=>(0,n.filterData)(e,t,r,o).length},90073:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getDomainForCredential=void 0;const n=r(21178);t.getDomainForCredential=e=>new n.ParsedURL(e.Url).getRootDomain()},52109:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.deleteCredentialHandler=void 0;const n=r(92233),o=r(76496),i=r(23136),a=r(95623),s=r(70252);t.deleteCredentialHandler=async({sessionService:e,storeService:t,wsService:r,eventLoggerService:c},{credentialId:u})=>{try{return(await(0,o.deletePersonalDataItem)({storeService:t,wsService:r,eventLoggerService:c},u,{manualHealthUpdate:!0})).success?((0,i.getDebounceSync)(t,e)({immediateCall:!0},n.Trigger.Save),Promise.resolve({success:!0})):Promise.resolve({success:!1})}catch(e){const t=new Error(`[Credentials] - deleteCredentialHandler: ${e}`);return(0,s.sendExceptionLog)({error:t}),(0,a.logError)(t),Promise.resolve({success:!1})}}},39546:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.deleteCredentialsInBulkHandler=void 0;const n=r(28354),o=r(92233),i=r(86392),a=r(10770),s=r(76496),c=r(23136),u=r(95623),d=r(70252);t.deleteCredentialsInBulkHandler=async(e,{credentialList:t})=>{const{sessionService:r,storeService:i,wsService:p,eventLoggerService:m,applicationModulesAccess:g}=e;try{let u=[];const d=(0,n.v4)(),f=t.map((e=>(0,s.deletePersonalDataItem)({storeService:i,wsService:p,eventLoggerService:m,applicationModulesAccess:g},e,{multiSelectId:d,manualHealthUpdate:!0}).then((t=>({...t,itemId:e})))));await Promise.all(f).then((e=>u=e.filter((e=>!e.success)))),(0,c.getDebounceSync)(i,r)({immediateCall:!0},o.Trigger.Save);const S=t.filter((e=>!u.some((t=>t.itemId===e))));return l(S,g),(0,a.removeItemsFromCollectionsHandler)(e,{ids:S}),u.length>0?Promise.resolve({success:!1,notRemoved:u.length}):Promise.resolve({success:!0})}catch(e){const t=new Error(`[Credentials] - deleteCredentialsInBulkHandler: ${e}`);return(0,d.sendExceptionLog)({error:t}),(0,u.logError)(t),Promise.resolve({success:!1})}};const l=async(e,t)=>{const{commands:r}=t.createClients().vaultItemsCrud;return await r.emitTemporaryVaultItemEvent({ids:[...e],eventType:i.EventType.Deleted}),!0}},70853:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.updateCredentialHandler=void 0;const n=r(95623),o=r(70252),i=r(88779);t.updateCredentialHandler=async function(e,t){const{storeService:r,sessionService:a,eventLoggerService:s,applicationModulesAccess:c}=e;try{return await(0,i.updateCredential)({storeService:r,sessionService:a,eventLoggerService:s,applicationModulesAccess:c},t),{success:!0}}catch(e){return(0,n.logError)(e),(0,o.sendExceptionLog)({error:e}),{success:!1}}}},23529:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getCredentialsDisplayTitles=void 0;const n=r(90073);t.getCredentialsDisplayTitles=function(e){const t=e.reduce(((e,t)=>{const{Id:r,Title:o}=t,i=o||(0,n.getDomainForCredential)(t);return e.concat([[r,i]])}),[]);return new Map(t)}},88542:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.viewCredential=t.afterCredentialSaved=t.notifySharersCredentialUpdated=t.makeCredentialSpecificProps=t.makeNewCredential=t.makeUpdatedCredential=t.beforeCredentialChange=t.sharedFields=t.SaveFrom=void 0;const n=r(16516),o=r(50415),i=r(53576),a=r(21178),s=r(47975),c=r(87496),u=r(61923),d=r(48313),l=r(47408);t.SaveFrom=(0,o.Enum)("MANUAL","SAVE_PASSWORD","DATACAPTURE","IMPORT");const p=r(70252),m=r(78163),g=r(43145),f=r(65968),S=r(83687),h=r(92307),y=r(90451),v=r(53576);t.sharedFields=["Email","Login","Note","OtpSecret","OtpUrl","Password","SecondaryLogin","Title","Url","UseFixedUrl","UserSelectedUrl","LinkedServices"];const E=(0,n.defaultTo)("");function A(e,t){const r=t?.UserSelectedUrl??"",n=t?.UseFixedUrl??!1,o=t?.TrustedUrlGroup??[],a=e.origin===i.SaveOrigin.MANUAL,s=t?.Url!==e.content.url,u=(0,c.cleanUrlForPersonalData)(e.content.url,{keepQueryString:a}),d=a&&s?{UserSelectedUrl:u,UseFixedUrl:!0}:{UserSelectedUrl:r,UseFixedUrl:n};return{Url:u,TrustedUrlGroup:(0,c.getUpdatedTrustedUrlList)(o,u),...d}}async function _(e,t,r=(0,l.getUnixTimestamp)()){const{content:o}=e,{email:i,login:a,secondaryLogin:c}=(0,u.normalizeUsernames)(o.email,o.login,o.secondaryLogin),d={associated_domains:o.linkedWebsites?.addedByUser?.map((e=>({source:v.LinkedWebsiteSource.Manual,domain:e})))??[]},p=E(o.password),m=t&&t.Password===p?{}:{ModificationDatetime:r},g=function(e,t){return({itemField:r,existingItemField:o,defaultValue:i})=>(0,n.isNil)(e[r])?t&&!(0,n.isNil)(t[o])?t[o]:i:e[r]}(o,t);return{AutoLogin:g({itemField:"autoLogin",existingItemField:"AutoLogin",defaultValue:!0}),AutoProtected:g({itemField:"protectWithMasterPassword",existingItemField:"AutoProtected",defaultValue:!1}),Category:g({itemField:"category",existingItemField:"Category",defaultValue:""}),Checked:g({itemField:"checked",existingItemField:"Checked",defaultValue:!1}),Email:i,Login:a,Note:g({itemField:"note",existingItemField:"Note",defaultValue:""}),Password:p,SecondaryLogin:c,Status:"ACCOUNT_NOT_VERIFIED",Strength:p?await(0,s.evaluatePasswordStrength)(p):0,SubdomainOnly:Boolean(o.onlyForThisSubdomain),Title:g({itemField:"title",existingItemField:"Title",defaultValue:""}),...A(e,t),OtpSecret:g({itemField:"otpSecret",existingItemField:"OtpSecret",defaultValue:void 0}),OtpUrl:g({itemField:"otpUrl",existingItemField:"OtpUrl",defaultValue:void 0}),LinkedServices:d,...m}}t.beforeCredentialChange=function(e,t){const r=t.credentialCategories,n=e.content.category;if(!n)return e;if(r.find((e=>e.Id===n)))return e;const o=r.find((e=>e.CategoryName===n));return((e,t)=>({...e,content:{...e.content,category:t}}))(e,o?o.Id:"")},t.makeUpdatedCredential=async function(e,t){const r=(0,l.getUnixTimestamp)(),n=await _(e,t,r);return{...t,...(0,m.makeUpdatedPersonalDataItemBase)({existingItem:t,updatedItem:e,itemUpdateDate:r}),...n}},t.makeNewCredential=async function(e){const t=(0,l.getUnixTimestamp)(),r=await _(e,null,t);return function(e){const{Title:t,Url:r}=e;return{...e,Title:t||E(new a.ParsedURL(r).getRootDomain())}}({...(0,m.makeNewPersonalDataItemBase)(e,t),...r})},t.makeCredentialSpecificProps=_,t.notifySharersCredentialUpdated=async function(e,r,o,i){!(0,n.equals)((0,n.pick)(t.sharedFields,r),(0,n.pick)(t.sharedFields,o))&&await(0,m.notifySharersOnUpdate)(e,o,i).catch((e=>{const t=new Error(`[Sharing] - notifySharersCredentialUpdated: ${e}`);(0,p.sendExceptionLog)({error:t})}))},t.afterCredentialSaved=function(e,t){(0,g.associateGeneratedPasswordsToCredential)(e.getPersonalData().generatedPasswords,t).forEach((t=>{e.dispatch((0,d.saveGeneratedPassword)(t))}))},t.viewCredential=function(e,t,r,n,o,i,a){if(!e)return;const s=(0,S.getSharingStatusDetail)(n,t,r),c=(0,y.getIcon)(i),u=(0,h.getCategory)(o),d=(0,h.getSmartCategorizedSpace)(a);return(0,f.detailView)(s,u,c,d,e)}},73567:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.credentialLimitStatus$=t.canUserAddNewCredential$=t.credentialsByDomain$=t.credentials$=t.credentialsCount$=t.getCredential$=t.credentialsBatch$=void 0;const n=r(18948),o=r(3343),i=r(8777),a=r(7657),s=r(71806),c=r(61645),u=r(86685),d=r(78767),l=r(65950),p=r(35893),m=r(33627),g=r(55220);t.credentialsBatch$=e=>{const t=(0,p.parseToken)(e),r=(0,d.getViewedCredentialsBatchSelector)(t);return(0,n.pipe)((0,o.map)(r),(0,o.distinctUntilChanged)(m.sameBatch))},t.getCredential$=e=>{const t=(0,u.getViewedCredentialSelector)(e);return(0,n.pipe)((0,o.map)(t),(0,o.distinctUntilChanged)())},t.credentialsCount$=e=>{const t=(0,p.parseToken)(e);return(0,n.pipe)((0,o.map)((e=>(0,s.credentialsCountSelector)(e,t))),(0,o.distinctUntilChanged)())},t.credentials$=(0,g.getLivePersonalInfo)(c.getLiveCredentialsSelector),t.credentialsByDomain$=e=>{const{domain:t,...r}=(0,p.parseToken)(e),i=(0,l.getLiveCredentialsByDomainSelector)(t)(r);return(0,n.pipe)((0,o.map)(i),(0,o.distinctUntilChanged)(((e,t)=>e.matchingCount===t.matchingCount&&(0,m.sameBatch)(e.items,t.items))))},t.canUserAddNewCredential$=()=>(0,n.pipe)((0,o.map)(i.canUserAddNewCredentialSelector),(0,o.distinctUntilChanged)()),t.credentialLimitStatus$=()=>(0,n.pipe)((0,o.map)(a.credentialLimitStatusSelector),(0,o.distinctUntilChanged)())},94687:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getCredentialMappers=void 0;const n=r(16516),o=r(83539),i=r(71646),a=(0,n.curry)(((e,t)=>e.get(t.Id)||"")),s=e=>!!e.Attachments&&e.Attachments.length>0,c=(0,n.curry)(((e,t)=>!!e[t.Id])),u=(0,n.curry)(((e,t)=>{const r=t.Category,n=(e||[]).find((e=>e.Id===r));return n&&n.CategoryName?n.CategoryName:"zzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzz"}));t.getCredentialMappers=(e,t,r,n,d,l)=>({category:u(e),groupIds:e=>(0,i.getItemUserGroupIds)(n,e.Id),sharingUserIds:e=>(0,i.getItemUserIds)(n,e.Id),hasAttachments:s,id:e=>e.Id,isLimited:c(t),lastUse:o.lastUseMapper,login:e=>e.Login,numberUse:e=>e.NumberUse,spaceId:e=>e.SpaceId,title:a(r),email:e=>e.Email,collectionIds:e=>((e,t,r)=>t.flatMap((t=>t.VaultItems.some((t=>t.Id===e))?t.Id:[])).concat(r.flatMap((t=>t.vaultItems.some((t=>t.id===e))?t.id:[]))))(e.Id,d,l)})},25501:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getCredentialsBatch=t.viewCredentialsBatch=t.getCredentialsFirstToken=t.getCredentialsSortToken=t.getCredentialsFilterToken=void 0;const n=r(16516),o=r(20553),i=r(29179),a=r(83687),s=r(92307),c=r(90451);t.getCredentialsFilterToken=({filterCriteria:e})=>({filterCriteria:e||[]}),t.getCredentialsSortToken=({sortCriteria:e})=>({uniqField:"id",sortCriteria:e||[]}),t.getCredentialsFirstToken=(e,t,r,n)=>(0,o.generateFirstToken)(e,t,r.initialBatchSize||30,n),t.viewCredentialsBatch=(e,t,r,n,o)=>{const u=(0,a.getSharingStatusItem)(t,r),d=(0,c.getIcon)(o),l=(0,s.getCategory)(n);return(0,i.listView)(u,l,d,e)},t.getCredentialsBatch=(0,n.curry)(((e,t,r)=>(0,o.getBatch)(r,e,t)))},31400:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getCredentialMatch=void 0;const n=r(64455),o=r(82234),i=r(6205),a=r(10770);t.getCredentialMatch=(e,t)=>(0,n.match)(((e,t)=>[(0,o.stringProp)("Email"),(0,o.stringProp)("Login"),(0,o.stringProp)("Title"),(0,o.stringProp)("Note"),(0,o.stringProp)("SecondaryLogin"),null===e&&null===t?(0,o.stringProp)("CategoryName"):r=>(0,a.getCollectionNamesContainingVaultItemId)(r.Id,e,t).join(" "),e=>(0,i.getDashlaneDefinedLinkedWebsites)(e.Url).join(" "),e=>(0,i.getUserAddedLinkedWebsitesRootDomains)(e).join(" ")])(e,t))},8777:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.canUserAddNewCredentialSelector=void 0;const n=r(32034),o=r(7657),i=r(37148);t.canUserAddNewCredentialSelector=(0,n.createSelector)(o.credentialLimitStatusSelector,(e=>e!==i.CredentialLimitStatus.AtOrAboveLimit))},74380:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.countAllCredentialsSelector=void 0,t.countAllCredentialsSelector=e=>e.userSession.personalData.credentials.length},79895:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.viewedCredentialCategoriesSelector=t.credentialCategoryNamesMapSelector=t.credentialCategoriesSelector=void 0;const n=r(32034),o=r(71120);t.credentialCategoriesSelector=e=>e.userSession.personalData.credentialCategories,t.credentialCategoryNamesMapSelector=(0,n.createSelector)([t.credentialCategoriesSelector],(e=>e.reduce(((e,t)=>(e[t.Id]=t.CategoryName,e)),{}))),t.viewedCredentialCategoriesSelector=(0,n.createSelector)(t.credentialCategoriesSelector,(e=>({items:(0,o.listView)(e),matchingCount:e.length})))},85505:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.credentialMatchSelector=void 0;const n=r(53626),o=r(31400),i=r(31607);t.credentialMatchSelector=e=>{const t=(0,i.sharedCollectionsWithItemsSelector)(e),r=(0,n.collectionsSelector)(e);return(0,o.getCredentialMatch)(r,t)}},19736:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.credentialSelector=void 0;const n=r(51319),o=r(49551);t.credentialSelector=(e,t)=>{const r=(0,n.credentialsSelector)(e);return(0,o.findDataModelObject)(t,r)}},88083:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getCredentialsByDomainSelector=t.getCredentialByDomainMatchType=t.DomainMatchType=void 0;const n=r(32034),o=r(21178),i=r(51319),a=r(6205);var s;!function(e){e.MainWebsite="MainWebsite",e.DashlaneDefinedLinkedWebsite="DashlaneDefinedLinkedWebsite",e.UserDefinedLinkedWebsite="UserDefinedLinkedWebsite",e.None="None"}(s=t.DomainMatchType||(t.DomainMatchType={})),t.getCredentialByDomainMatchType=(e,t)=>e?e===new o.ParsedURL(t.Url).getRootDomain()?s.MainWebsite:(0,a.getDashlaneDefinedLinkedWebsites)(t.Url).includes(e)?s.DashlaneDefinedLinkedWebsite:(0,a.getUserAddedLinkedWebsitesRootDomains)(t).includes(e)?s.UserDefinedLinkedWebsite:s.None:s.None,t.getCredentialsByDomainSelector=e=>(0,n.createSelector)(i.credentialsSelector,(r=>((e,r)=>e.filter((e=>{const n=(0,t.getCredentialByDomainMatchType)(r,e);return[s.MainWebsite,s.DashlaneDefinedLinkedWebsite,s.UserDefinedLinkedWebsite].includes(n)})))(r,e)))},71806:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.credentialsCountSelector=void 0;const n=r(32034),o=r(49960),i=r(51319),a=r(85505),s=r(36439),c=r(7439);t.credentialsCountSelector=(0,n.createSelector)(o.fieldMappersSelector,a.credentialMatchSelector,c.filterTokenSelector,i.credentialsSelector,s.countCredentials)},60463:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.credentialDisplayTitlesSelector=void 0;const n=r(32034),o=r(51319),i=r(23529);t.credentialDisplayTitlesSelector=(0,n.createSelector)(o.credentialsSelector,i.getCredentialsDisplayTitles)},7657:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.credentialLimitStatusSelector=void 0;const n=r(32034),o=r(37148),i=r(51319),a=r(16593);t.credentialLimitStatusSelector=(0,n.createSelector)(a.nodePremiumStatusSelector,i.credentialsSelector,((e,t)=>{if(!e||!e.capabilities)return o.CredentialLimitStatus.AtOrAboveLimit;if(!e.capabilities?.passwordsLimit?.enabled)return o.CredentialLimitStatus.Unlimited;const r=t.length,n=e.capabilities?.passwordsLimit?.info?.limit;return r>=n?o.CredentialLimitStatus.AtOrAboveLimit:r>=n-5?o.CredentialLimitStatus.NearLimit:o.CredentialLimitStatus.UnderLimit}))},10043:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.credentialsPageSelector=void 0;const n=r(20553),o=r(35893),i=r(49960),a=r(9365),s=r(51443);t.credentialsPageSelector=(e,t)=>{const r=(0,o.parseToken)(t),{sortToken:c,filterToken:u}=r,d={sortToken:c,filterToken:u},l=(0,i.fieldMappersSelector)(e),p=(0,a.credentialsQuerySelector)(e,d),m=(0,s.listViewSelector)(e),g=(0,n.generateNextToken)(l,r,p),f=(0,n.generatePrevToken)(l,r,p),S=(0,n.getBatch)(l,r,p),h=(0,o.stringifyToken)(g),y=(0,o.stringifyToken)(f);return{batch:m(S),nextToken:h,prevToken:y}}},35410:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.credentialsPaginationTokenSelector=void 0;const n=r(25501),o=r(49960),i=r(9365),a=r(35893);t.credentialsPaginationTokenSelector=(e,t)=>{const r=(0,n.getCredentialsSortToken)(t),s=(0,n.getCredentialsFilterToken)(t),c=(0,o.fieldMappersSelector)(e),u={sortToken:r,filterToken:s},d=(0,i.credentialsQuerySelector)(e,u),l=(0,n.getCredentialsFirstToken)(c,u,t,d);return(0,a.stringifyToken)(l)}},9365:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.credentialsQuerySelector=void 0;const n=r(32034),o=r(49960),i=r(7439),a=r(92897),s=r(51319),c=r(85505),u=r(35893);t.credentialsQuerySelector=(0,n.createSelector)(o.fieldMappersSelector,c.credentialMatchSelector,a.sortTokenSelector,i.filterTokenSelector,s.credentialsSelector,u.queryData)},51319:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.credentialsSelector=void 0;const n=r(32034),o=r(83659),i=r(92888),a=r(57989),s=r(40602),c=r(79895),u=(0,n.createSelector)([e=>(0,i.hasCredentialsDedupViewSelector)(e)?(0,i.dedupedCredentialsSelector)(e):(0,o.unsafeAllCredentialsSelector)(e),c.credentialCategoryNamesMapSelector],((e,t)=>e.map((e=>({...e,CategoryName:t[e.Category]})))));t.credentialsSelector=(0,n.createSelector)(u,a.quarantinedSpacesSelector,s.filterOutQuarantinedItems)},92888:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.hasCredentialsDedupViewSelector=t.dedupedCredentialsSelector=void 0;const n=r(32034),o=r(53682),i=r(66982),a=r(83659),s={Alias:i.genericMerge,Attachments:i.concatMerge,AutoLogin:i.strictEqual,AutoProtected:i.boolEqual,Category:i.genericMerge,Checked:i.strictEqual,ConnectionOptions:i.genericMerge,CreationDatetime:i.minMerge,Email:i.strictEqual,LastUse:i.maxMerge,LinkedServices:i.strictEqual,Login:i.strictEqual,ModificationDatetime:i.maxMerge,Note:i.genericMerge,NumberUse:i.sumMerge,OtpSecret:i.strictEqual,OtpUrl:i.strictEqual,Password:i.strictEqual,Port:i.genericMerge,SID:i.genericMerge,SecondaryLogin:i.strictEqual,Server:i.genericMerge,SharedObject:i.strictEqual,SpaceId:i.strictEqual,Status:i.strictEqual,Strength:i.strictEqual,SubdomainOnly:i.boolEqual,Title:i.strictEqual,TrustedUrlGroup:i.concatMerge,Url:i.strictEqual,UseFixedUrl:i.strictEqual,UserModificationDatetime:i.maxMerge,UserSelectedUrl:i.strictEqual,kwType:i.strictEqual,limitedPermissions:i.strictEqual};t.dedupedCredentialsSelector=(0,n.createSelector)(a.unsafeAllCredentialsSelector,(0,o.dedupItems)(["Password","Title","Url"],s)),t.hasCredentialsDedupViewSelector=e=>e.userSession.credentialsDedupViewState.credentialsDedupView},49960:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fieldMappersSelector=void 0;const n=r(32034),o=r(94687),i=r(79895),a=r(60463),s=r(91210),c=r(89698),u=r(10770),d=r(31607);t.fieldMappersSelector=(0,n.createSelector)(i.credentialCategoriesSelector,s.limitedSharingItemsSelector,a.credentialDisplayTitlesSelector,c.acceptedItemGroupsSelector,u.collectionsSelector,d.sharedCollectionsWithItemsSelector,o.getCredentialMappers)},7439:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.filterTokenSelector=void 0;const n=r(16516),o=r(35893);t.filterTokenSelector=(0,o.createOptimizedFilterTokenSelector)(((e,{filterToken:t})=>t),n.identity)},8766:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getDashlaneDefinedLinkedWebsitesSelector=void 0;const n=r(6205);t.getDashlaneDefinedLinkedWebsitesSelector=(e,t)=>(0,n.getDashlaneDefinedLinkedWebsites)(t)},65950:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getLiveCredentialsByDomainSelector=void 0;const n=r(97006),o=r(51443),i=r(49960),a=r(85505),s=r(88083);t.getLiveCredentialsByDomainSelector=e=>(0,n.makeLiveSelectorGetter)((0,s.getCredentialsByDomainSelector)(e),o.listViewSelector,a.credentialMatchSelector,i.fieldMappersSelector)},61645:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getLiveCredentialsSelector=void 0;const n=r(97006),o=r(51319),i=r(51443),a=r(49960),s=r(85505);t.getLiveCredentialsSelector=(0,n.makeLiveSelectorGetter)(o.credentialsSelector,i.listViewSelector,s.credentialMatchSelector,a.fieldMappersSelector)},80920:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.shouldShowRequireMasterPasswordSelector=void 0;const n=r(38981);t.shouldShowRequireMasterPasswordSelector=e=>!(0,n.isSSOUserSelector)(e)},86685:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getViewedCredentialSelector=void 0;const n=r(32034),o=r(52102),i=r(91210),a=r(51319),s=r(79895),c=r(91892),u=r(16593),d=r(49551),l=r(7944),p=r(88542);t.getViewedCredentialSelector=e=>{const t=(0,n.createSelector)(a.credentialsSelector,(t=>(0,d.findDataModelObject)(e,t)));return(0,n.createSelector)(t,o.sharingDataSelector,u.userIdSelector,i.limitedSharingItemsSelector,s.credentialCategoriesSelector,c.iconsSelector,l.spacesSelector,p.viewCredential)}},78767:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getViewedCredentialsBatchSelector=void 0;const n=r(32034),o=r(91210),i=r(80993),a=r(79895),s=r(9365),c=r(49960),u=r(91892),d=r(25501),l=r(35893);t.getViewedCredentialsBatchSelector=e=>{const{sortToken:t,filterToken:r}=e,p={sortToken:t,filterToken:r},m=(0,d.getCredentialsBatch)(e),g=(0,n.createSelector)((e=>(0,s.credentialsQuerySelector)(e,p)),c.fieldMappersSelector,m),f=(0,l.optimizeBatchSelector)(g);return(0,n.createSelector)(f,i.sortedSharedItemIdsSelector,o.limitedSharingItemsSelector,a.credentialCategoriesSelector,u.iconsSelector,d.viewCredentialsBatch)}},51443:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.listViewSelector=void 0;const n=r(32034),o=r(25501),i=r(80993),a=r(91210),s=r(79895),c=r(91892);t.listViewSelector=(0,n.createSelector)(i.sortedSharedItemIdsSelector,a.limitedSharingItemsSelector,s.credentialCategoriesSelector,c.iconsSelector,((e,t,r,n)=>i=>(0,o.viewCredentialsBatch)(i,e,t,r,n)))},19325:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getQueryByDomainSelector=void 0;const n=r(24589),o=r(49960),i=r(85505),a=r(88083);t.getQueryByDomainSelector=e=>(0,n.getQuerySelector)((0,a.getCredentialsByDomainSelector)(e),i.credentialMatchSelector,o.fieldMappersSelector)},41841:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.querySelector=void 0;const n=r(24589),o=r(51319),i=r(49960),a=r(85505);t.querySelector=(0,n.getQuerySelector)(o.credentialsSelector,a.credentialMatchSelector,i.fieldMappersSelector)},92897:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sortTokenSelector=void 0;const n=r(16516),o=r(35893);t.sortTokenSelector=(0,o.createOptimizedSortTokenSelector)(((e,{sortToken:t})=>t),n.identity)},83659:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.unsafeAllCredentialsSelector=void 0,t.unsafeAllCredentialsSelector=e=>e.userSession.personalData.credentials},60581:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.viewedCredentialSelector=void 0;const n=r(88542),o=r(91210),i=r(52102),a=r(19736),s=r(79895),c=r(16593),u=r(91892),d=r(7944);t.viewedCredentialSelector=(e,t)=>{const r=(0,a.credentialSelector)(e,t);if(!r)return;const l=(0,s.credentialCategoriesSelector)(e),p=(0,i.sharingDataSelector)(e),m=(0,c.userIdSelector)(e),g=(0,o.limitedSharingItemsSelector)(e),f=(0,u.iconsSelector)(e),S=(0,d.spacesSelector)(e);return(0,n.viewCredential)(r,p,m,g,l,f,S)}},28831:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.viewedQueriedCredentialsByDomainSelector=void 0;const n=r(19325),o=r(51443),i=r(63566);t.viewedQueriedCredentialsByDomainSelector=(e,t)=>{const{domain:r,...a}=t,s=(0,n.getQueryByDomainSelector)(r)(e,a),c=(0,o.listViewSelector)(e);return(0,i.viewListResults)(c)(s)}},66663:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.viewedQueriedCredentialsSelector=void 0;const n=r(63566),o=r(41841),i=r(51443);t.viewedQueriedCredentialsSelector=(e,t)=>{const r=(0,o.querySelector)(e,t),a=(0,i.listViewSelector)(e);return(0,n.viewListResults)(a)(r)}},9763:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createCredential=t.createBaseCredentialModel=void 0;const n=r(16516),o=r(21178),i=r(53576),a=r(61923),s=r(13675),c=r(47975),u=r(78320),d=r(47408),l=r(90771),p=r(23439),m=r(78163),g=r(23136);t.createBaseCredentialModel=(e=i.Country.NO_TYPE)=>{const t=(0,d.getUnixTimestamp)();return{kwType:"KWAuthentifiant",Id:(0,u.generateItemUuid)(),AnonId:(0,u.generateItemUuid)(),CreationDatetime:t,LastBackupTime:0,LastUse:t,LocaleFormat:e}},t.createCredential=async function({storeService:e,sessionService:r,eventLoggerService:u,applicationModulesAccess:d},f,S){if(!e.isAuthenticated())throw new Error("No session available to updateCredential");const h=await(0,g.getDefaultSpaceId)(d,e),y=(0,p.getUrlFields)(f.url,!0),{email:v,login:E,secondaryLogin:A}=(0,a.normalizeUsernames)(f.email,f.login,f.secondaryLogin),_=e.getPersonalData(),T=e.getPlatformInfo(),I=(0,p.getCategoryIdByName)(_,f.category),b=(0,n.defaultTo)("",f.password),w=(0,n.defaultTo)(h,f.spaceId),C=b?await(0,c.evaluatePasswordStrength)(b):0,D=S||(()=>({})),O=new o.ParsedURL(f.url).getRootDomain(),P=(0,s.sanitizeInputPersonalData)({...(0,t.createBaseCredentialModel)(i.Country[T.country]),AutoProtected:f.protectWithMasterPassword,Title:O,Email:v,Login:E,SubdomainOnly:f.onlyForThisSubdomain,SecondaryLogin:A,Password:b,Strength:C,Status:"ACCOUNT_NOT_VERIFIED",Category:I,SpaceId:w,AutoLogin:f.autoLogin??!0,...y,...D(f)});return(0,l.saveCredentialAsPersonalDataItem)({storeService:e,sessionService:r,eventLoggerService:u,applicationModulesAccess:d},P),d&&(0,m.shouldSendCreateOrModifiedCredentialActivityLog)(e,d,P)&&await(0,m.computeAndSendCreatedCredentialActivityLog)(d,{domainUrl:P.Url}),{credentialId:P.Id}}},23439:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getUrlFields=t.getCategoryIdByName=void 0;const n=r(87496);t.getCategoryIdByName=(e,t)=>{const r=e.credentialCategories;if(!t)return"";if(r.find((e=>e.Id===t)))return t;const n=r.find((e=>e.CategoryName===t));return n?.Id},t.getUrlFields=(e,t,r)=>{const o=r?.Url!==e,i=(0,n.cleanUrlForPersonalData)(e,{keepQueryString:t}),a=t&&o?{UserSelectedUrl:i,UseFixedUrl:!0}:{UserSelectedUrl:r?.UserSelectedUrl??"",UseFixedUrl:r?.UseFixedUrl??!1};return{Url:i,TrustedUrlGroup:(0,n.getUpdatedTrustedUrlList)(r?.TrustedUrlGroup??[],i),...a}}},90771:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.saveCredentialAsPersonalDataItem=void 0;const n=r(86392),o=r(92233),i=r(48313),a=r(12362),s=r(86691),c=r(56915),u=r(73566),d=r(85225),l=r(23136),p=r(88542),m=r(79980);t.saveCredentialAsPersonalDataItem=async function({storeService:e,sessionService:t,eventLoggerService:r,applicationModulesAccess:g},f,S){S&&(0,p.notifySharersCredentialUpdated)(e,S,f,g);const h=e.getPersonalData(),y=(0,u.getUpdatedItemChangeHistory)({deviceName:e.getLocalSettings().deviceName,personalData:h,change:(0,d.makeUpdateChange)(f),userLogin:e.getUserLogin(),platformInfo:(0,c.platformInfoSelector)(e.getState())});let v=null;const E=(0,a.getInstance)(),A=(0,s.getInstance)();try{v=A.lockTopic("iconsUpdates"),e.dispatch((0,i.savePersonalDataItem)(f,f.kwType,y)),await t.getInstance().user.persistPersonalData(),(0,p.afterCredentialSaved)(e,f);const a={type:"credentialUpdates",credentialIds:[f.Id]};await E.add("iconsUpdates",a),S?(0,m.logEditVaultItem)(e,r,f,S):(0,m.logAddVaultItem)(e,r,f);const{commands:s}=g.createClients().vaultItemsCrud;await s.emitTemporaryVaultItemEvent({ids:[f.Id],eventType:S?n.EventType.Updated:n.EventType.Created}),(0,l.getDebounceSync)(e,t)({immediateCall:!0},o.Trigger.Save)}finally{v&&A.releaseTopic("iconsUpdates",v)}}},88779:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.updateCredential=void 0;const n=r(19736),o=r(47408),i=r(90771),a=r(23439),s=r(78163);t.updateCredential=async function({storeService:e,sessionService:t,eventLoggerService:r,applicationModulesAccess:c},u,d){if(!e.isAuthenticated())throw new Error("No session available to updateCredential");const l=e.getState(),p=(0,n.credentialSelector)(l,u.id);if(!p)throw new Error("Credential does not exist, cant update");const m=u.update.url?(0,a.getUrlFields)(u.update.url,u.update.isUrlSelectedByUser,p):{},g=d||(()=>({})),f={...p,...m,Password:void 0!==u.update.password?u.update.password:p.Password,Email:u.update.email??p.Email,Login:u.update.login??p.Login,Checked:void 0!==u.update.isExcludedFromHealth?u.update.isExcludedFromHealth:p.Checked,LinkedServices:u.update.linkedServices??p.LinkedServices,ModificationDatetime:(0,o.getUnixTimestamp)(),...g(u)};(0,i.saveCredentialAsPersonalDataItem)({storeService:e,sessionService:t,eventLoggerService:r,applicationModulesAccess:c},f,p),c&&(0,s.shouldSendCreateOrModifiedCredentialActivityLog)(e,c,f)&&await(0,s.computeAndSendModifiedCredentialActivityLog)(c,{domainUrl:f.Url})}},83690:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CredentialLimitStatus=void 0,function(e){e.Unlimited="unlimited",e.UnderLimit="underLimit",e.NearLimit="nearLimit",e.AtOrAboveLimit="atOrAboveLimit"}(t.CredentialLimitStatus||(t.CredentialLimitStatus={}))},38786:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isAmazonWebsite=void 0;const n=r(21178);t.isAmazonWebsite=e=>"amazon"===new n.ParsedURL(e).getRootDomainName()},87496:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getUpdatedTrustedUrlList=t.cleanUrlForPersonalData=t.getBestUrl=t.getFirstTrustedUrl=t.getBaseTrustedUrls=void 0;const n=r(51121),o=r(16516),i=r(21178),a=r(38786),s=r(47408),c=e=>new i.ParsedURL(e).getUrlWithFallbackHttpsProtocol(),u=(0,o.compose)((e=>{const{protocol:t,hostname:r,port:o}=(0,n.parse)(e);return t&&/^https?:/.test(t)?(0,n.format)({protocol:t,hostname:r,port:o}):null}),c,o.trim),d=e=>!(0,o.isNil)(e);function l(e,t){if(!e)return"";if((0,a.isAmazonWebsite)(e))return e;let r=e;return{keepQueryString:!1,...t}.keepQueryString||(r=function(e){const t=e.indexOf("?");return t>-1?e.slice(0,t):e}(r)),c(r)}t.getBaseTrustedUrls=(0,o.compose)((e=>e.filter(d)),(0,o.map)(u),(0,o.map)((0,o.defaultTo)("")),(0,o.map)((0,o.prop)("TrustedUrl")),(0,o.defaultTo)([])),t.getFirstTrustedUrl=e=>(0,o.defaultTo)("")((0,o.head)((0,t.getBaseTrustedUrls)(e.TrustedUrlGroup))),t.getBestUrl=e=>{const r=(n=e).UseFixedUrl&&n.UserSelectedUrl?n.UserSelectedUrl:null;var n;return r&&r.length?r:e.Url&&e.Url.length?e.Url:(0,t.getFirstTrustedUrl)(e)},t.cleanUrlForPersonalData=l,t.getUpdatedTrustedUrlList=function(e,t){const r=l(t),n=new i.ParsedURL(r).getRootDomain(),o=(e||[]).filter((e=>new i.ParsedURL(e.TrustedUrl).getRootDomain()===n));if(o.some((e=>e.TrustedUrl===r)))return o;const a=o.length>=20?o.length-20+1:0;return o.slice(a).concat({TrustedUrl:r,TrustedUrlExpire:(0,s.getUnixTimestamp)().toString()})}},61923:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.normalizeUsernames=void 0;const n=r(16516),o=r(28445);t.normalizeUsernames=function(e,t,r){const i=(0,n.defaultTo)("");let a=e,s=t;return(0,o.looksLikeEmail)(t)?(a=t,(0,o.looksLikeEmail)(e)?(a=e,s=""):s=e):(0,o.looksLikeEmail)(e)||((0,n.isEmpty)(e)||(s=e),(0,o.looksLikeEmail)(t)?a=t:((0,n.isEmpty)(t)||(s=t),a="")),{email:i(a),login:i(s),secondaryLogin:i(r)}}},71120:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.listView=t.detailView=void 0;const n=(0,r(16516).defaultTo)("");t.detailView=e=>{if(e)return{id:e.Id,categoryName:n(e.CategoryName)}},t.listView=e=>e.map(t.detailView)},65968:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.detailView=void 0;const n=r(16516),o=r(82043),i=r(71120),a=r(90073),s=r(6205),c=(0,n.defaultTo)(""),u=(0,n.defaultTo)(!1);t.detailView=(0,n.curry)(((e,t,r,n,d)=>{const l=t(d.Category),p=e(d.Id),m=r(d.Url),g=c(d.Password),f=n(d),S={addedByDashlane:(0,s.getDashlaneDefinedLinkedWebsites)(d.Url),addedByUser:(0,s.getUserAddedLinkedWebsiteDomains)(d)};return{...(0,o.dataModelDetailView)(d),autoLogin:d.AutoLogin||!1,autoProtected:u(d.AutoProtected),category:(0,i.detailView)(l),domainIcon:m,email:c(d.Email),forceCategorizedSpace:f,linkedWebsites:S,login:c(d.Login),note:c(d.Note),hasOtp:Boolean(d.OtpSecret)||Boolean(d.OtpUrl),otpSecret:c(d.OtpSecret),otpUrl:c(d.OtpUrl),password:g,secondaryLogin:d.SecondaryLogin,sharingStatus:p,strength:d.Strength||0,subdomainOnly:d.SubdomainOnly||!1,title:c(d.Title||(0,a.getDomainForCredential)(d)),url:c(d.Url||d.UserSelectedUrl)}}))},29179:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.listView=t.itemView=void 0;const n=r(16516),o=r(82043),i=r(71120),a=r(90073),s=(0,n.defaultTo)("");t.itemView=(0,n.curry)(((e,t,r,c)=>{const u=t(c.Category);return{...(0,o.dataModelItemView)(c),autoProtected:(0,n.defaultTo)(!1,c.AutoProtected),category:(0,i.detailView)(u),domainIcon:r(c.Url),email:s(c.Email),login:s(c.Login),password:s(c.Password),sharingSatus:e(c.Id),title:s(c.Title||(0,a.getDomainForCredential)(c)),url:s(c.Url||c.UserSelectedUrl)}})),t.listView=(e,r,n,o)=>{const i=(0,t.itemView)(e,r,n);return o.map(i)}},19065:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makeDataManagementController=void 0;const n=r(92233),o=r(35834),i=r(50886),a=r(76496),s=r(23136),c=r(84511),u=r(10770),d={immediateCall:!0};t.makeDataManagementController=e=>{const t=(0,s.getDebounceSync)(e.storeService,e.sessionService);return{savePaymentCardFromClient:r=>function(e,t,r){(0,o.savePaymentCard)(e,r),t(d,n.Trigger.Save)}({storeService:e.storeService,sessionService:e.sessionService,eventLoggerService:e.eventLoggerService},t,r),savePersonalDataItem:r=>async function(e,t,r){const{storeService:a,sessionService:s,eventLoggerService:u,applicationModulesAccess:l}=e;if("KWPaymentMean_creditCard"===r.kwType)return(0,o.savePaymentCard)({storeService:a,sessionService:s,eventLoggerService:u},r.content),t(d,n.Trigger.Save),Promise.resolve({success:!0,itemId:""});{const o=await(0,i.addPersonalDataItem)({storeService:a,sessionService:s,eventLoggerService:u,applicationModulesAccess:l},r),p=a.getState(),m=(0,c.isSharedSelector)(p,r.content.id);return"KWAuthentifiant"===r.kwType&&r.shouldSkipSync||(m?await e.sessionService.getInstance().user.attemptSync(n.Trigger.SettingsChange):t(d,n.Trigger.Save)),o}}({storeService:e.storeService,sessionService:e.sessionService,eventLoggerService:e.eventLoggerService,applicationModulesAccess:e.applicationModulesAccess},t,r),removePersonalDataItem:r=>function(e,t,r,o){return(0,a.deletePersonalDataItem)(e,o).then((i=>(i.success&&(r(d,n.Trigger.Save),(0,u.removeItemsFromCollectionsHandler)({storeService:e.storeService,sessionService:t},{ids:[o]})),i)))}({storeService:e.storeService,wsService:e.wsService,eventLoggerService:e.eventLoggerService,applicationModulesAccess:e.applicationModulesAccess},e.sessionService,t,r),updateMetadataItemFilledOnPage:(r,o,a)=>function(e,t,r,o,a){(0,i.updatePersonalDataUsageMetadata)(e,r,o,a),t({},n.Trigger.SaveMeta)}(e.storeService,t,r,o,a)}}},53682:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.dedupItems=t.merge=void 0,t.merge=(e,t,r)=>{const n={};return Object.keys(r).every((o=>{const i=r[o](e[o],t[o]);return i.success&&(n[o]=i.result),i.success}))?{success:!0,result:{...e,...t,...n}}:{success:!1}},t.dedupItems=(e,r)=>n=>{const o=[],i={};for(const a of n){const n=e.reduce(((e,t)=>`${e}${a[t]}`),"");if(n in i){const e=i[n];let s=!1;for(const n of e){const e=o[n],i=(0,t.merge)(a,e,r);if(i.success){o[n]=i.result,s=!0;break}}s||(o.push(a),e.push(o.length-1))}else o.push(a),i[n]=[o.length-1]}return o}},66982:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.concatMerge=t.minMerge=t.maxMerge=t.sumMerge=t.genericMerge=t.boolEqual=t.strictEqual=void 0,t.strictEqual=(e,t)=>e===t?{success:!0,result:e}:{success:!1},t.boolEqual=(e,t)=>Boolean(e)===Boolean(t)?{success:!0,result:e}:{success:!1},t.genericMerge=(e,t)=>e===t?{success:!0,result:e}:e&&t?{success:!1}:{success:!0,result:e||t};const r=e=>(t,r)=>({success:!0,result:void 0===t&&void 0===r?void 0:e(t??0,r??0)});t.sumMerge=r(((e,t)=>e+t)),t.maxMerge=r(Math.max),t.minMerge=r(Math.min),t.concatMerge=(e,t)=>({success:!0,result:void 0===e&&void 0===t?void 0:[...e??[],...t??[]]})},45157:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getRemoveChangeHistory=void 0;const n=r(73566),o=r(56915),i=r(16593),a=r(72678),s=r(85225);t.getRemoveChangeHistory=function(e,t){const r=e.getState(),c=(0,a.personalDataSelector)(r),u=(0,o.platformInfoSelector)(r),d=(0,i.userLoginSelector)(r),{localSettings:l}=e.getState().userSession,p=l.deviceName,m=(0,s.makeRemovalChange)(t);return(0,n.getUpdatedItemChangeHistory)({change:m,deviceName:p,personalData:c,userLogin:d,platformInfo:u})}},76496:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.deletePersonalDataItem=t.findPersonalDataItemToDelete=void 0;const n=r(16516),o=r(53576),i=r(58107),a=r(71646),s=r(95623),c=r(45291),u=r(45157),d=r(49551),l=r(70252),p=r(36884),m=r(36513),g=r(63698),f=r(90622),S=r(16593),h=r(76089),y=r(79980),v=r(92233),E=r(92310),A=r(78163),_=r(86392),T=["addresses","bankAccounts","companies","credentialCategories","credentials","driverLicenses","emails","fiscalIds","idCards","identities","noteCategories","notes","passports","paymentCards","paypalAccounts","personalWebsites","phones","secureFileInfo","socialSecurityIds"];function I(e,t){let r,o=0;const i=e.getPersonalData(),a=(0,n.pick)(T,i);for(const e of Object.keys(a))if(r=(0,d.findDataModelObject)(t,a[e]),r){o=a[e].length;break}return{itemToDelete:r,currentItemsCountForDataType:o}}t.findPersonalDataItemToDelete=I,t.deletePersonalDataItem=async function({storeService:e,wsService:t,eventLoggerService:r,applicationModulesAccess:n},d,T){const{FORBIDDEN_GROUP_ITEM:b,FORBIDDEN_LAST_ADMIN:w,INTERNAL_ERROR:C,LEAVE_SHARING_FAILED:D,NOT_AUTHORIZED:O,NOT_FOUND:P}=o.RemovePersonalDataItemFailureReason;let N=null;try{if(!e.isAuthenticated()){const e="No session available to delete personal item";return s.Debugger.log(e),{success:!1,reason:O,message:e}}const{itemToDelete:l}=I(e,d);if(!l){const e=`Unable to find personal item to delete: ${d}`;return s.Debugger.error(e),{success:!1,reason:P,message:e}}const C=(0,o.isCredential)(l);if(C||(0,o.isNote)(l)){const r=await(0,m.makeCryptoService)(),n=e.getUserLogin(),o=(0,f.ukiSelector)(e.getState()),{makeRefuseItemGroupEvent:s}=(0,p.makeItemGroupService)(t,r),{Id:c}=l,{userGroups:d,itemGroups:S}=e.getSharingData(),h=(0,a.findItemItemGroup)(c,S),y=T&&T.ignoreSharing;if(h&&!y){const t=(0,i.isUserLastAdmin)(h,n),r=(0,i.doesUserReceiveItemGroupViaGroup)(h,d,n);if(t||r)return{success:!1,reason:t?w:b,message:"Unshare the item before deleting it"};try{const{groupId:e,revision:t}=h,{refuseItemGroup:r}=(0,g.makeItemGroupWS)(),i=s(e,t,null);await r(n,o,i)}catch(e){return{success:!1,reason:D,message:`${e}`}}}N=(0,u.getRemoveChangeHistory)(e,l)}(0,y.logDeleteVaultItem)(e,r,l,v.UpdateCredentialOrigin.Manual,T?.multiSelectId||null);const R=(0,c.removePersonalItem)(l.kwType,l.Id,N);if(e.dispatch(R),C){const t=e.getState();if((0,S.isOnboardingNotificationShowingSelector)(t)){const t=(0,h.webOnboardingModeReset)();e.dispatch(t)}}if(n&&C&&(0,A.hasVaultAuditLogsFFActivated)(n)){const t=(0,E.currentTeamIdSelector)(e.getState());l.SpaceId===t&&await(0,A.computeAndSendDeletedCredentialActivityLog)(n,{domainUrl:l.Url})}if(n&&!T?.manualHealthUpdate&&C){const{commands:e}=n.createClients().vaultItemsCrud;await e.emitTemporaryVaultItemEvent({ids:[l.Id],eventType:_.EventType.Deleted})}return{success:!0}}catch(e){const t=`[DataManagement] - deletePersonalDataItem: ${e}`,r=new Error(t);return(0,l.sendExceptionLog)({error:r}),{success:!1,reason:C,message:t}}}},57779:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.duplicateNoteOrCredential=void 0;const n=r(53576),o=r(48313),i=r(78320),a=r(49551),s=r(12362),c=r(86691);t.duplicateNoteOrCredential=async function(e,t){let r=null;const u=(0,s.getInstance)(),d=(0,c.getInstance)(),{notes:l,credentials:p,changeHistories:m}=e.getPersonalData(),g=[...l,...p],f=(0,a.findDataModelObject)(t,g);if(!f)return null;const S=(0,i.generateItemUuid)(),h={...f,Id:S},y=m.find((e=>e.ObjectId.toUpperCase()===t.toUpperCase()));if((0,n.isCredential)(f)){r=d.lockTopic("iconsUpdates");const e={credentialIds:[S],type:"credentialUpdates"};await u.add("iconsUpdates",e)}const v=(0,o.savePersonalDataItem)(h,h.kwType,y);return e.dispatch(v),r&&d.releaseTopic("iconsUpdates",r),S}},75912:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const n=r(57012),o=r(40086);t.config={commands:{getPersonalDataExport:{handler:n.getPersonalDataExport}},queries:{getIsForcedDomainsEnabled:{selector:o.isForcedDomainsEnabledSelector}},liveQueries:{}}},40086:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isForcedDomainsEnabledSelector=void 0;const n=r(16593);t.isForcedDomainsEnabledSelector=e=>{const t=(0,n.activeSpacesSelector)(e)[0];return t?.info?.forcedDomainsEnabled??!1}},24108:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getCredentialsExport=void 0;const n=r(53576),o=r(92307),i=r(33553),a=r(28780),s=e=>e.reduce(((e,t)=>(t.VaultItems.filter((e=>e.Type===n.DataModelType.KWAuthentifiant)).map((e=>e.Id)).forEach((r=>{e[r]?e[r].push(t.Name):e[r]=[t.Name]})),e)),{}),c=(e,t,r,n)=>{const i=(0,o.getCategory)(e,t)?.CategoryName||"",a=r[n.Id];if(a?.length){const e=a.join(", ");return i?`${i}, ${e}`:e}return i};t.getCredentialsExport=function(e){const t=e.credentials,r=e.credentialCategories,n=e.collections,o=s(n),u=[{headerKey:"username",dataKey:"Email"},{headerKey:"username2",dataKey:"Login"},{headerKey:"username3",dataKey:"SecondaryLogin"},{headerKey:"title",dataKey:"Title"},{headerKey:"password",dataKey:"Password"},{headerKey:"note",dataKey:"Note"},{headerKey:"url",dataKey:"Url"},{headerKey:"category",dataKey:"Category"},{headerKey:"otpSecret",dataKey:"OtpSecret"}];return(0,a.formatDataToCSV)([(0,a.formatHeader)(u),(d=t,d.map((e=>{const t=[e.Email,e.Login,e.SecondaryLogin].filter((e=>void 0!==e&&""!==e)),[n="",a="",s=""]=t;return u.map((t=>{const u=e[t.dataKey]??"";if("Category"!==t.dataKey||""===u&&!o[e.Id]?.length){if("Email"===t.dataKey)return(0,i.handleSpecialCharacter)(n);if("Login"===t.dataKey)return(0,i.handleSpecialCharacter)(a);if("SecondaryLogin"===t.dataKey)return(0,i.handleSpecialCharacter)(s);if("Note"===t.dataKey&&""!==u)return(0,i.handleSpecialCharacter)(u);if("Password"===t.dataKey){const e=`${u}`;return(0,i.handleSpecialCharacter)(e)}{const e=`${u}`;return(0,i.handleSpecialCharacter)(e)}}{const t=c(r,u,o,e);return(0,i.handleSpecialCharacter)(t)}})).join(",")}))).join("\r\n")]);var d}},88096:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getCSVExport=void 0;const n=r(49267);n.configure({useWebWorkers:!1});const o=r(24108),i=r(31107),a=r(40549),s=r(8177),c=r(29375),u=[{filename:"credentials",generator:o.getCredentialsExport},{filename:"personalInfo",generator:c.getPersonalInfoExport},{filename:"securenotes",generator:i.getSecureNotesExport},{filename:"payments",generator:a.getPaymentsExport},{filename:"ids",generator:s.getIdsExport}];t.getCSVExport=async function(e){const t=new n.ZipWriter(new n.BlobWriter("application/zip")),r=[];for(const{filename:o,generator:i}of u){const a=i(e);r.push(t.add(`${o}.csv`,new n.BlobReader(new Blob([a],{type:"text/csv"}))))}await Promise.all(r);const o=await t.close();return await(e=>new Promise(((t,r)=>{const n=new FileReader;n.readAsDataURL(e),n.onloadend=()=>{const e=n.result;e?t(e.toString()):r(new Error("Error creating CSV export."))}})))(o)}},54130:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getDashlaneSecureExport=void 0;const n=r(16516),o=r(56668),i=r(61797);t.getDashlaneSecureExport=async function(e,t){const r=(0,n.join)(";",(0,n.pluck)("Id",t));t.forEach((e=>{delete e.Attachments}));const a=(0,i.getDashlaneXml)(t),s=(0,o.utf16ToDeflatedUtf8)(a),c=await e.encrypt(s);return(0,n.join)("\n",["-------------------- Dashlane Secured Export ----------------------","--------------------        Id BEGIN         ----------------------",r,"--------------------         Id END          ----------------------","--------------------       Data BEGIN        ----------------------",c,"--------------------        Data END         ----------------------","--------------------       Files BEGIN       ----------------------","--------------------        Files END        ----------------------\n"])}},8177:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getIdsExport=void 0;const n=r(72099),o=r(33553),i=r(28780);t.getIdsExport=function(e){const t=new Map;e.identities.forEach((e=>{t.set(e.Id,e)}));const r=e.idCards,a=e.passports,s=e.driverLicenses,c=e.socialSecurityIds,u=e.fiscalIds,d=[{headerKey:"type",dataKey:"type"},{headerKey:"number",dataKey:"Number"},{headerKey:"name",dataKey:"Fullname"},{headerKey:"issue_date",dataKey:"DeliveryDate"},{headerKey:"expiration_date",dataKey:"ExpireDate"},{headerKey:"place_of_issue",dataKey:"DeliveryPlace"},{headerKey:"state",dataKey:"State"}];return(0,i.formatDataToCSV)([(0,i.formatHeader)(d),(e=>(e=>e.map((e=>{const r=t.get(e.LinkedIdentity);return d.map((t=>{const i=`${e[t.dataKey]??""}`;if("type"===t.dataKey)return"card";if("Fullname"===t.dataKey&&r){const e=(0,n.identityToName)(r)??i;return(0,o.handleSpecialCharacter)(e)}return(0,o.handleSpecialCharacter)(i)})).join(",")})))(e).join("\r\n"))(r),(e=>(e=>e.map((e=>{const r=t.get(e.LinkedIdentity);return d.map((t=>{const i=`${e[t.dataKey]??""}`;if("type"===t.dataKey)return"passport";if("Fullname"===t.dataKey&&r){const e=(0,n.identityToName)(r)??i;return(0,o.handleSpecialCharacter)(e)}return(0,o.handleSpecialCharacter)(i)})).join(",")})))(e).join("\r\n"))(a),(e=>(e=>e.map((e=>{const r=t.get(e.LinkedIdentity);return d.map((t=>{const i=`${e[t.dataKey]??""}`;if("type"===t.dataKey)return"license";if("Fullname"===t.dataKey&&r){const e=(0,n.identityToName)(r)??i;return(0,o.handleSpecialCharacter)(e)}return(0,o.handleSpecialCharacter)(i)})).join(",")})))(e).join("\r\n"))(s),(e=>(e=>e.map((e=>{const r=t.get(e.Id);return d.map((t=>{const i=`${e[t.dataKey]??""}`;if("type"===t.dataKey)return"social_security";if("Number"===t.dataKey){const t=e.SocialSecurityNumber;return(0,o.handleSpecialCharacter)(t)}if("Fullname"===t.dataKey){const t=r?(0,n.identityToName)(r):e.SocialSecurityFullname;return(0,o.handleSpecialCharacter)(t)}return(0,o.handleSpecialCharacter)(i)})).join(",")})))(e).join("\r\n"))(c),(e=>(e=>e.map((e=>d.map((t=>{const r=`${e[t.dataKey]??""}`;if("type"===t.dataKey)return(0,o.handleSpecialCharacter)("tax_number");if("Number"===t.dataKey){const t=e.FiscalNumber;return(0,o.handleSpecialCharacter)(t)}{const e=`${r}`;return(0,o.handleSpecialCharacter)(e)}})).join(","))))(e).join("\r\n"))(u)])}},40549:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getPaymentsExport=void 0;const n=r(33553),o=r(28780);t.getPaymentsExport=function(e){const t=e.bankAccounts,r=e.paymentCards,i=[{headerKey:"type",dataKey:"Type"},{headerKey:"account_name",dataKey:"BankAccountName"},{headerKey:"account_holder",dataKey:"BankAccountOwner"},{headerKey:"cc_number",dataKey:"CardNumber"},{headerKey:"code",dataKey:"SecurityCode"},{headerKey:"expiration_month",dataKey:"ExpireMonth"},{headerKey:"expiration_year",dataKey:"ExpireYear"},{headerKey:"routing_number",dataKey:"BankAccountBIC"},{headerKey:"account_number",dataKey:"BankAccountIBAN"},{headerKey:"country",dataKey:"LocaleFormat"},{headerKey:"issuing_bank",dataKey:"BankAccountBank"},{headerKey:"note",dataKey:"CCNote"},{headerKey:"name",dataKey:"Name"}];return(0,o.formatDataToCSV)([(0,o.formatHeader)(i),(s=t,(e=>e.map((e=>i.map((t=>{const r=`${e[t.dataKey]??""}`;if("Type"===t.dataKey)return(0,n.handleSpecialCharacter)("bank");{const e=`${r}`;return(0,n.handleSpecialCharacter)(e)}})).join(","))))(s).join("\r\n")),(a=r,(e=>e.map((e=>i.map((t=>{const r=`${e[t.dataKey]??""}`;if("Type"===t.dataKey)return(0,n.handleSpecialCharacter)("payment_card");if("BankAccountName"===t.dataKey){const t=e.OwnerName;return(0,n.handleSpecialCharacter)(t)}return(0,n.handleSpecialCharacter)(r)})).join(","))))(a).join("\r\n"))]);var a,s}},57012:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getPersonalDataExport=t.getFilteredPersonalData=t.filterNonExportableData=void 0;const n=r(53576),o=r(54130),i=r(61969),a=r(72365),s=r(65675),c=r(49901),u=r(91210),d=r(57989),l=r(40602),p=r(99281),m=r(16018),g=r(10770),f=r(80624),S=r(51319),h=r(79895),y=r(23437),v=r(9774),E=r(26147),A=r(41092),_=r(28074),T=r(75705),I=r(18665),b=r(65401),w=r(58235),C=r(81473),D=r(82439),O=r(27147),P=r(40086),N=r(88096);t.filterNonExportableData=(e,t)=>{const r=(0,P.isForcedDomainsEnabledSelector)(e),o=(0,u.limitedSharingItemsSelector)(e);return t.filter((e=>{let t=!1;const i=!!o[e.Id]||!!e.limitedPermissions;return r&&(0,n.isDataModelObject)(e)&&(t=e.SpaceId!==c.PERSONAL_SPACE_ID),!t&&!i}))};const R=(e,r)=>{const n=(0,d.quarantinedSpacesSelector)(e);return(0,t.filterNonExportableData)(e,(0,l.filterOutQuarantinedItems)(r(e),n))};t.getFilteredPersonalData=e=>({addresses:R(e,p.addressesSelector),bankAccounts:R(e,m.bankAccountsSelector),collections:R(e,g.collectionsSelector),companies:R(e,f.companiesSelector),credentials:R(e,S.credentialsSelector),credentialCategories:(0,t.filterNonExportableData)(e,(0,h.credentialCategoriesSelector)(e)),driverLicenses:R(e,v.driverLicensesSelector),emails:R(e,E.emailsSelector),fiscalIds:R(e,A.fiscalIdsSelector),idCards:R(e,y.idCardsSelector),identities:R(e,_.identitiesSelector),notes:R(e,T.notesSelector),passkeys:R(e,I.passkeysSelector),passports:R(e,b.passportsSelector),paymentCards:R(e,w.paymentCardsSelector),personalWebsites:R(e,C.personalWebsitesSelector),phones:R(e,D.phonesSelector),socialSecurityIds:R(e,O.socialSecurityIdsSelector)}),t.getPersonalDataExport=async function(e,r){const{storeService:n}=e,c=n.getState(),{exportType:u,password:d}=r,l=(0,t.getFilteredPersonalData)(c);switch(u){case"csv":return{success:!0,response:{filename:"dashlane-credential-export.zip",content:await(0,N.getCSVExport)(l)}};case"secure-dashlane":{if(!d)return{success:!1,error:{code:i.GetPersonalDataExportErrorMessage.UNDEFINED_PASSWORD_ERROR}};const e=(0,a.makeDataEncryptorService)(n),t=(0,s.makeFlexibleMarkerCryptoConfig)("argon2d");e.setInstance({raw:d},"",t);const r=Object.values(l).flat().map((e=>({...e})));return{success:!0,response:{filename:"Dashlane Export.dash",content:await(0,o.getDashlaneSecureExport)(e.getInstance(),r)}}}default:return{success:!1,error:{code:i.GetPersonalDataExportErrorMessage.UNSUPPORTED_DATATYPE_ERROR}}}}},29375:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getPersonalInfoExport=void 0;const n=r(33321),o=r(53576),i=r(33553),a=r(28780),s=e=>{const{LocaleFormat:t,Number:r}=e;if(t&&t!==o.Country.UNIVERSAL&&t!==o.Country.NO_TYPE&&(0,n.isSupportedCountry)(t)){const t=o.Country[e.LocaleFormat];return`+${(0,n.getCountryCallingCode)(t)}${r}`}return r};t.getPersonalInfoExport=function(e){const t=e.identities,r=e.emails,n=e.phones,o=e.addresses,c=e.companies,u=e.personalWebsites,d=[{headerKey:"type",dataKey:"type"},{headerKey:"title",dataKey:"Title"},{headerKey:"first_name",dataKey:"FirstName"},{headerKey:"middle_name",dataKey:"MiddleName"},{headerKey:"last_name",dataKey:"LastName"},{headerKey:"login",dataKey:"Pseudo"},{headerKey:"date_of_birth",dataKey:"BirthDate"},{headerKey:"place_of_birth",dataKey:"BirthPlace"},{headerKey:"email",dataKey:"Email"},{headerKey:"email_type",dataKey:"Type"},{headerKey:"item_name",dataKey:"Name"},{headerKey:"phone_number",dataKey:"Number"},{headerKey:"address",dataKey:"AddressFull"},{headerKey:"country",dataKey:"Country"},{headerKey:"state",dataKey:"State"},{headerKey:"city",dataKey:"City"},{headerKey:"zip",dataKey:"ZipCode"},{headerKey:"address_recipient",dataKey:"Receiver"},{headerKey:"address_building",dataKey:"Building"},{headerKey:"address_apartment",dataKey:"Door"},{headerKey:"address_floor",dataKey:"Floor"},{headerKey:"address_door_code",dataKey:"DigitCode"},{headerKey:"job_title",dataKey:"JobTitle"},{headerKey:"url",dataKey:"Website"}];return(0,a.formatDataToCSV)([(0,a.formatHeader)(d),(S=t,(e=>e.map((e=>d.map((t=>{const r=`${e[t.dataKey]??""}`;if("type"===t.dataKey)return(0,i.handleSpecialCharacter)("name");{const e=`${r}`;return(0,i.handleSpecialCharacter)(e)}})).join(","))))(S).join("\r\n")),(f=r,(e=>e.map((e=>d.map((t=>{const r=`${e[t.dataKey]??""}`;if("type"===t.dataKey)return(0,i.handleSpecialCharacter)("email");if("Type"===t.dataKey)return"PERSO"===r?(0,i.handleSpecialCharacter)("personal"):(0,i.handleSpecialCharacter)("business");if("Name"===t.dataKey){const t=e.EmailName??"";return(0,i.handleSpecialCharacter)(t)}{const e=`${r}`;return(0,i.handleSpecialCharacter)(e)}})).join(","))))(f).join("\r\n")),(g=n,(e=>e.map((e=>d.map((t=>{const r=`${e[t.dataKey]??""}`;if("type"===t.dataKey)return(0,i.handleSpecialCharacter)("number");if("Type"===t.dataKey)return(0,i.handleSpecialCharacter)("");if("Name"===t.dataKey){const t=e.PhoneName??"";return(0,i.handleSpecialCharacter)(t)}if("Number"===t.dataKey){const t=s(e);return(0,i.handleSpecialCharacter)(t)}{const e=`${r}`;return(0,i.handleSpecialCharacter)(e)}})).join(","))))(g).join("\r\n")),(m=o,(e=>e.map((e=>d.map((t=>{const r=`${e[t.dataKey]??""}`;if("type"===t.dataKey)return(0,i.handleSpecialCharacter)("address");if("Name"===t.dataKey){const t=e.AddressName??"";return(0,i.handleSpecialCharacter)(t)}{const e=`${r}`;return(0,i.handleSpecialCharacter)(e)}})).join(","))))(m).join("\r\n")),(p=c,(e=>e.map((e=>d.map((t=>{const r=`${e[t.dataKey]??""}`;if("type"===t.dataKey)return(0,i.handleSpecialCharacter)("company");{const e=`${r}`;return(0,i.handleSpecialCharacter)(e)}})).join(","))))(p).join("\r\n")),(l=u,(e=>e.map((e=>d.map((t=>{const r=`${e[t.dataKey]??""}`;if("type"===t.dataKey)return(0,i.handleSpecialCharacter)("website");{const e=`${r}`;return(0,i.handleSpecialCharacter)(e)}})).join(","))))(l).join("\r\n"))]);var l,p,m,g,f,S}},31107:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getSecureNotesExport=void 0;const n=r(33553),o=r(28780);t.getSecureNotesExport=function(e){const t=e.notes,r=[{headerKey:"title",dataKey:"Title"},{headerKey:"note",dataKey:"Content"}];return(0,o.formatDataToCSV)([(0,o.formatHeader)(r),(e=>e.map((e=>r.map((t=>{const r=e[t.dataKey]??"";if("Content"===t.dataKey&&""!==r)return(0,n.handleSpecialCharacter)(r);{const e=`${r}`;return(0,n.handleSpecialCharacter)(e)}})).join(","))).join("\r\n"))(t)])}},33553:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.handleSpecialCharacter=void 0,t.handleSpecialCharacter=function(e){return void 0===e?"":e.match(/[,"\n\r]/g)?['"',...e.split("").map((e=>'"'===e?'""':e)),'"'].join(""):e}},28780:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.formatDataToCSV=t.formatHeader=void 0,t.formatHeader=e=>e.map((e=>e.headerKey)).join(","),t.formatDataToCSV=function(e){return e.filter((e=>e.length>0)).join("\r\n")}},61969:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GetPersonalDataExportErrorMessage=void 0,function(e){e.UNSUPPORTED_DATATYPE_ERROR="Unsupported Data Export Type",e.UNDEFINED_PASSWORD_ERROR="Undefined Password"}(t.GetPersonalDataExportErrorMessage||(t.GetPersonalDataExportErrorMessage={}))},3474:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const n=r(92598),o=r(47205),i=r(11507);t.config={commands:{saveGeneratedPassword:{handler:o.saveGeneratedPasswordHandler}},queries:{getGeneratedPassword:{selector:n.viewedGeneratedPasswordSelector},getGeneratedPasswordsCount:{selector:n.countAllGeneratedPasswordsSelector},getGeneratedPasswords:{selector:n.viewedQueriedGeneratedPasswordsSelector},getGeneratedPasswordsPage:{selector:n.generatedPasswordsPageSelector},getGeneratedPasswordsPaginationToken:{selector:n.generatedPasswordsPaginationTokenSelector}},liveQueries:{liveGeneratedPasswordsCount:{operator:i.generatedPasswordCount$},liveGeneratedPasswords:{operator:i.generatedPasswords$}}}},25:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},43145:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.findAssociatedCredential=t.associateGeneratedPasswordsToCredential=void 0;const n=r(90073);t.associateGeneratedPasswordsToCredential=function(e,t){return e.filter((e=>!e.AuthId&&e.Domain===(0,n.getDomainForCredential)(t)&&e.Password===t.Password)).map((e=>({...e,AuthId:t.Id})))},t.findAssociatedCredential=function(e,t){if(e?.AuthId)return(t||[]).find((t=>t.Id===e.AuthId))}},94170:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createGeneratedPassword=void 0;const n=r(53576),o=r(78320),i=r(47408);t.createGeneratedPassword=({Id:e=(0,o.generateItemUuid)(),LastBackupTime:t=0,AuthId:r,Domain:a,GeneratedDate:s=(0,i.getUnixTimestamp)(),Password:c,SpaceId:u,Platform:d})=>({kwType:n.DataModelType.KWGeneratedPassword,AuthId:r,Domain:a,GeneratedDate:s,Id:e,SpaceId:u,Password:c,LastBackupTime:t,Platform:d})},47205:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.saveGeneratedPasswordHandler=void 0;const n=r(44908);t.saveGeneratedPasswordHandler=async function(e,t){const{storeService:r,sessionService:o}=e;return(0,n.saveGeneratedPassword)(r,o,t.password,t.url)}},44908:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.generateAndSavePassword=t.saveGeneratedPassword=t.generatePassword=t.fixIncoherentSettings=t.getDefaultPasswordGenerationSettings=t.passwordGeneratorDefaultSettings=t.associateGeneratedPasswordsToCredential=void 0;const n=r(28255),o=r(16516),i=r(85465),a=r(95623),s=r(78320),c=r(47408),u=r(48313),d=r(70252),l=r(90503),p=r(94170),m=r(56915);var g=r(43145);function f(e){const r=(0,o.reject)((e=>(0,o.isNil)(e)||(0,o.isEmpty)(e)))({length:e.GeneratorDefaultSize,digits:e.GeneratorDefaultDigits,letters:e.GeneratorDefaultLetters,symbols:e.GeneratorDefaultSymbols,avoidAmbiguous:e.GeneratorDefaultAvoidAmbiguousChars});return S((0,o.merge)(t.passwordGeneratorDefaultSettings,r))}function S(e){return e.digits||e.letters||e.symbols||(e.digits=!0,e.letters=!0,e.symbols=!0),(void 0===e.length||e.length<1)&&(e.length=t.passwordGeneratorDefaultSettings.length),e}function h(e,t){const r=(0,o.isNil)(t)?f(e):S(t);if(!r.digits&&!r.letters&&r.symbols){const n=new Error("Should not generate password from symbols only"),o={length:e.GeneratorDefaultSize,digits:e.GeneratorDefaultDigits,letters:e.GeneratorDefaultLetters,symbols:e.GeneratorDefaultSymbols,avoidAmbiguous:e.GeneratorDefaultAvoidAmbiguousChars},i=`customSettings = ${JSON.stringify(t)}\npersonalSettingsGeneratorDefaults = ${JSON.stringify(o)}`;a.default.error(n),(0,d.sendExceptionLog)({error:n,code:l.ExceptionCriticality.WARNING,precisions:i}),r.digits=!0,r.letters=!0,r.symbols=!0}return(0,i.generate)(r)}function y(e,t,r,n){const o=(0,p.createGeneratedPassword)({Domain:n??"",GeneratedDate:(0,c.getUnixTimestamp)(),Id:(0,s.generateItemUuid)(),Password:r,LastBackupTime:0,Platform:(0,m.platformInfoSelector)(e.getState()).platformName});e.dispatch(u.saveGeneratedPassword(o)),t.getInstance().user.persistPersonalData()}Object.defineProperty(t,"associateGeneratedPasswordsToCredential",{enumerable:!0,get:function(){return g.associateGeneratedPasswordsToCredential}}),t.passwordGeneratorDefaultSettings={length:16,digits:!0,letters:!0,symbols:!0,avoidAmbiguous:!0},t.getDefaultPasswordGenerationSettings=f,t.fixIncoherentSettings=S,t.generatePassword=h,t.saveGeneratedPassword=y,t.generateAndSavePassword=function(e,t,r){if(!e.isAuthenticated())return a.default.log("No session available to generateAndSavePassword"),null;const o=h(e.getPersonalSettings());return n((()=>{y(e,t,o,r)})),o}},11507:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.generatedPasswords$=t.generatedPasswordCount$=void 0;const n=r(92598),o=r(55220),i=r(18948),a=r(3343);t.generatedPasswordCount$=()=>(0,i.pipe)((0,a.map)(n.countAllGeneratedPasswordsSelector),(0,a.distinctUntilChanged)()),t.generatedPasswords$=(0,o.getLivePersonalInfo)(n.getLiveGeneratedPasswordsSelector)},91329:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getGeneratedPasswordMappers=void 0,t.getGeneratedPasswordMappers=()=>({id:e=>e.Id,domain:e=>e.Domain,generatedDate:e=>e.GeneratedDate})},45853:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.viewGeneratedPasswordsBatch=t.getGeneratedPasswordsFirstToken=t.getGeneratedPasswordsSortToken=t.getGeneratedPasswordsFilterToken=void 0;const n=r(20553),o=r(36407);t.getGeneratedPasswordsFilterToken=({filterCriteria:e})=>({filterCriteria:e||[]}),t.getGeneratedPasswordsSortToken=({sortCriteria:e})=>({uniqField:"id",sortCriteria:e||[]}),t.getGeneratedPasswordsFirstToken=(e,t,r,o)=>(0,n.generateFirstToken)(e,t,r.initialBatchSize||30,o),t.viewGeneratedPasswordsBatch=e=>(0,o.listView)(e)},9546:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.generatedPasswordMatch=t.searchGetters=void 0;const n=r(82234),o=r(64455);t.searchGetters=[(0,n.stringProp)("Domain")],t.generatedPasswordMatch=(0,o.match)(t.searchGetters)},92598:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.generatedPasswordsQuerySelector=t.generatedPasswordsPaginationTokenSelector=t.generatedPasswordsPageSelector=t.getLiveGeneratedPasswordsSelector=t.viewedQueriedGeneratedPasswordsSelector=t.queryGeneratedPasswordsSelector=t.getGeneratedPasswordMappersSelector=t.generatedPasswordMappersSelector=t.viewedGeneratedPasswordSelector=t.generatedPasswordSelector=t.generatedPasswordsSelector=t.countAllGeneratedPasswordsSelector=void 0;const n=r(16516),o=r(63566),i=r(36407),a=r(24589),s=r(9546),c=r(91329),u=r(45853),d=r(32034),l=r(35893),p=r(18948),m=r(20553),g=r(57989),f=r(97006),S=r(40602),h=r(83659),y=r(49551);t.countAllGeneratedPasswordsSelector=e=>e.userSession.personalData.generatedPasswords.length,t.generatedPasswordsSelector=(0,d.createSelector)((e=>e.userSession.personalData.generatedPasswords),g.quarantinedSpacesSelector,h.unsafeAllCredentialsSelector,S.filterOutQuarantinedItems),t.generatedPasswordSelector=(e,r)=>{const n=(0,t.generatedPasswordsSelector)(e);return(0,y.findDataModelObject)(r,n)},t.viewedGeneratedPasswordSelector=(e,r)=>{const n=(0,t.generatedPasswordSelector)(e,r);return(0,i.itemView)(n)},t.generatedPasswordMappersSelector=e=>(0,c.getGeneratedPasswordMappers)();const v=()=>s.generatedPasswordMatch,E=(0,c.getGeneratedPasswordMappers)();t.getGeneratedPasswordMappersSelector=()=>E,t.queryGeneratedPasswordsSelector=(0,a.getQuerySelector)(t.generatedPasswordsSelector,v,t.generatedPasswordMappersSelector),t.viewedQueriedGeneratedPasswordsSelector=(0,n.compose)((0,o.viewListResults)(i.listView),t.queryGeneratedPasswordsSelector),t.getLiveGeneratedPasswordsSelector=(0,f.makeLiveSelectorGetter)(t.generatedPasswordsSelector,(()=>i.listView),v,t.getGeneratedPasswordMappersSelector),t.generatedPasswordsPageSelector=(e,r)=>{const n=(0,l.parseToken)(r),{sortToken:o,filterToken:i}=n,a={sortToken:o,filterToken:i},s=(0,c.getGeneratedPasswordMappers)(),d=(0,t.generatedPasswordsQuerySelector)(e,a),p=(0,m.generateNextToken)(s,n,d),g=(0,m.generatePrevToken)(s,n,d),f=(0,m.getBatch)(s,n,d),S=(0,l.stringifyToken)(p),h=(0,l.stringifyToken)(g);return{batch:(0,u.viewGeneratedPasswordsBatch)(f),nextToken:S,prevToken:h}},t.generatedPasswordsPaginationTokenSelector=(e,r)=>{const n=(0,u.getGeneratedPasswordsSortToken)(r),o=(0,u.getGeneratedPasswordsFilterToken)(r),i=(0,c.getGeneratedPasswordMappers)(),a={sortToken:n,filterToken:o},s=(0,t.generatedPasswordsQuerySelector)(e,a),d=(0,u.getGeneratedPasswordsFirstToken)(i,a,r,s);return(0,l.stringifyToken)(d)};const A=(0,l.createOptimizedSortTokenSelector)(((e,{sortToken:t})=>t),p.identity),_=(0,l.createOptimizedFilterTokenSelector)(((e,{filterToken:t})=>t),p.identity);t.generatedPasswordsQuerySelector=(0,d.createSelector)(c.getGeneratedPasswordMappers,v,A,_,t.generatedPasswordsSelector,l.queryData)},36407:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.listView=t.itemView=void 0;const n=(0,r(16516).defaultTo)("");t.itemView=e=>({domain:n(e.Domain),generatedDate:e.GeneratedDate,password:e.Password,id:e.Id,platform:e.Platform}),t.listView=e=>e.map(t.itemView)},64185:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makeEmptyIconUrls=t.computeIconUrls=void 0,t.computeIconUrls=(e,t)=>t.reduce(((t,r)=>{const n=e.find((e=>e&&e.type===r));return t[r]=n?n.url:null,t}),{}),t.makeEmptyIconUrls=e=>(0,t.computeIconUrls)([],e)},56814:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getFormattedDomainsFromUrls=t.decryptIconsDomains=void 0;const n=r(16516),o=r(21178),i=r(46445);t.decryptIconsDomains=(e,t)=>{const r=Array.from(e.keys()),n=new Map,o=t.reduce(((e,t)=>(e[(0,i.computeHashMD5)(t)]=t,e)),{});return r.forEach((t=>{const r=o[t];n.set(r,e.get(t))})),n},t.getFormattedDomainsFromUrls=e=>(0,n.uniq)(e.map((e=>new o.ParsedURL(e).getRootDomain()))).filter((e=>"string"==typeof e&&e.length))},44999:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.clearInstance=t.getInstance=t.setInstance=void 0;const n=r(35949),o=r(23381);let i=null;t.setInstance=(e,t,r)=>(i=i||new n.IconsUpdater(t,e,new o.IconsWS(r)),i),t.getInstance=()=>i,t.clearInstance=()=>{i&&i.teardown(),i=null}},35949:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IconsUpdater=void 0;const n=r(18948),o=r(3343),i=r(28354),a=r(21342),s=r(19736),c=r(51319),u=r(95623),d=r(91892),l=r(16661),p=r(17825),m=r(19979),g=r(70252),f=r(541),S=r(58639),h=r(21726),y=r(41717);var v;!function(e){e.BreachesOperation="breachesOperation",e.CredentialsOperation="credentialsOperation",e.RefreshOperation="refreshOperation"}(v||(v={})),t.IconsUpdater=class{constructor(e,t,r){this.localStorageService=e,this.storeService=t,this.gateway=r,this._operation$=new n.Subject,this.subs=new Set,this.handleRefreshIcons=async()=>{const e=(0,i.v4)(),t=new Promise((t=>{const r=this._operationResults$.subscribe((n=>{n.id===e&&(t(n.success),r.unsubscribe(),this.subs.delete(r))}));this.subs.add(r)}));return this.triggerRefreshOperation(e),await t},this.handleCredentialUpdates=async e=>{const t=(0,i.v4)(),r=new Promise((e=>{const r=this._operationResults$.subscribe((n=>{n.id===t&&(e(n.success),r.unsubscribe(),this.subs.delete(r))}));this.subs.add(r)}));return this.triggerCredentialsOperation(t,e),await r},this.handleBreachesUpdates=async e=>{const t=(0,i.v4)(),r=new Promise((e=>{const r=this._operationResults$.subscribe((n=>{n.id===t&&(e(n.success),r.unsubscribe(),this.subs.delete(r))}));this.subs.add(r)}));return this.triggerBreachesOperation(t,e),await r},this.triggerCredentialsOperation=(e,t,r=y.defaultIconTypes)=>{this._operation$.next({credentialIds:t,id:e,type:v.CredentialsOperation,iconTypes:r})},this.triggerBreachesOperation=(e,t,r=y.defaultIconTypes)=>{this._operation$.next({breachesIds:t,id:e,type:v.BreachesOperation,iconTypes:r})},this.triggerRefreshOperation=(e,t=y.defaultIconTypes)=>{this._operation$.next({id:e,type:v.RefreshOperation,iconTypes:t})},this.handleOperation=async(e,t)=>{const{type:r,id:n}=t,o={id:n,type:r},i=this.localStorageService.getInstance(),a=this.storeService.getState();try{return await e(t),await i.storeIcons((0,d.iconsCacheSelector)(a)),{...o,success:!0}}catch(e){const r=`[Icons Updater] - handle operation: operation ${t.type} failed with ${e}`;u.default.error(r);const n=new Error(r);return(0,g.sendExceptionLog)({error:n}),console.error(n),{...o,success:!1}}},this.onOperation=async e=>{switch(e.type){case v.CredentialsOperation:return this.handleOperation(((e,t)=>async({credentialIds:r,iconTypes:n})=>{const o=e.getState(),i=r.map((e=>(0,s.credentialSelector)(o,e))).filter((e=>!!e)),a=await(0,m.fetchIconsForCredentials)(o,t,i,n);e.dispatch((0,l.iconsUpdated)(a)),(0,h.default)()&&a.length>0&&(0,S.reportDataUpdate)(e)})(this.storeService,this.gateway),e);case v.BreachesOperation:return this.handleOperation(((e,t)=>async({breachesIds:r,iconTypes:n})=>{const o=e.getState(),i=r.map((e=>(0,a.breachSelector)(o,e))).filter((e=>!!e)),s=await(0,m.fetchIconsForBreaches)(o,t,i,n);e.dispatch((0,l.iconsUpdated)(s))})(this.storeService,this.gateway),e);case v.RefreshOperation:return this.handleOperation(((e,t)=>async({iconTypes:r})=>{const n=e.getState(),o=(0,d.iconsCacheSelector)(n);if((0,f.isIconsCacheValid)(o))return;const i=(0,c.credentialsSelector)(n),s=(0,a.breachesSelector)(n),u=await(0,m.fetchIconsForAllItems)(t,i,s,r);e.dispatch((0,l.iconsRefreshed)(u)),(0,h.default)()&&(0,S.reportDataUpdate)(e)})(this.storeService,this.gateway),e);default:return(0,p.assertUnreachable)(e)}},this.setupOperationsHandling=()=>{const e=this._operation$.pipe((0,o.concatMap)(this.onOperation),(0,o.share)()),t=e.subscribe();this.subs.add(t),this._operationResults$=e},this.setupOperationsHandling()}teardown(){this.subs.forEach((e=>e.unsubscribe()))}}},541:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isIconsCacheValid=void 0;const n=r(47408),o=86400*(7+Math.random());t.isIconsCacheValid=e=>!(!e||!e.lastUpdateTimeSeconds)&&(0,n.getUnixTimestamp)()-e.lastUpdateTimeSeconds<o},41717:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.defaultIconTypes=void 0,t.defaultIconTypes=["46x30@2x","160x106@2x","118x98@2x"]},19979:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fetchIconsForAllItems=t.fetchIconsForCredentials=t.getCredentialsWithWebsiteIcon=t.fetchIconsForBreaches=t.getIconsUrlsForBreaches=t.getIconsUrlsForCredentials=void 0;const n=r(16516),o=r(21178),i=r(56814),a=r(91892),s=r(64185);t.getIconsUrlsForCredentials=e=>e.map((e=>e.Url)),t.getIconsUrlsForBreaches=e=>e.reduce(((e,t)=>{const r=t.Content.domains;return r&&0!==r.length?[...e,r[0]]:e}),[]),t.fetchIconsForBreaches=async(e,r,o,s)=>{const c=(0,t.getIconsUrlsForBreaches)(o),u=(0,i.getFormattedDomainsFromUrls)(c),d=(0,i.decryptIconsDomains)((0,a.iconsSelector)(e),u),l=Array.from(d.keys()),p=(0,n.difference)(u,l);return r.getIcons(p,s)},t.getCredentialsWithWebsiteIcon=(e,t,r)=>{const i={backgroundColor:null,mainColor:null,urls:(0,s.makeEmptyIconUrls)(r)};return e.map((e=>{const r=t.get(new o.ParsedURL(e.Url).getRootDomain()),a=(0,n.defaultTo)(i,r);return{...e,domainIcon:a}}))},t.fetchIconsForCredentials=async(e,r,o,s)=>{const c=(0,t.getIconsUrlsForCredentials)(o),u=(0,i.getFormattedDomainsFromUrls)(c),d=(0,i.decryptIconsDomains)((0,a.iconsSelector)(e),u),l=Array.from(d.keys()),p=(0,n.difference)(u,l);return r.getIcons(p,s)},t.fetchIconsForAllItems=async(e,r,n,o)=>{const a=[...(0,t.getIconsUrlsForBreaches)(n),...(0,t.getIconsUrlsForCredentials)(r)],s=(0,i.getFormattedDomainsFromUrls)(a);return e.getIcons(s,o)}},49352:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.iconsUpdatesHook=void 0;const n=r(17825),o=r(44999);t.iconsUpdatesHook=async e=>{const t=(0,o.getInstance)();if(!t)return!1;switch(e.type){case"breachUpdates":return t.handleBreachesUpdates(e.breachesIds);case"credentialUpdates":return t.handleCredentialUpdates(e.credentialIds);case"refresh":return t.handleRefreshIcons();default:return(0,n.assertUnreachable)(e)}}},44816:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.formatFetchedIcons=t.makeIconDataWithDomain=t.getDomainsIconsToBeFetched=t.getDomainIconsToBeFetched=void 0;const n=r(16516),o=r(64185),i=(0,n.defaultTo)(null);t.getDomainIconsToBeFetched=(e,t)=>t.reduce(((t,r)=>[...t,{domain:e,type:r}]),[]),t.getDomainsIconsToBeFetched=(e,r)=>e.reduce(((e,n)=>[...e,...(0,t.getDomainIconsToBeFetched)(n,r)]),[]),t.makeIconDataWithDomain=(e,t)=>{const r=(0,n.head)(e)||{};return{urls:(0,o.computeIconUrls)(e,t),backgroundColor:i(r.backgroundColor),mainColor:i(r.mainColor),domain:i(r.domain)}},t.formatFetchedIcons=(e,r,n)=>{const o=r.length;return[...Array(n)].reduce(((n,i,a)=>{const s=a*o,c=s+o,u=e.slice(s,c);return[...n,(0,t.makeIconDataWithDomain)(u,r)]}),[])}},23381:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IconsWS=void 0;const n=r(44816),o=r(32607);t.IconsWS=class{constructor(e){this.wsService=e}async getIcons(e,t){if(!e||!e.length)return[];const r=(0,n.getDomainsIconsToBeFetched)(e,t),i=await this.wsService.iconCrawler.getIcons(r);if(!(0,o.isWSResponseSuccess)(i)){const e=`[Icons] getIcons: ${i.message}(statusCode: ${i.code})`;throw new Error(e)}const{content:a}=i;return(0,n.formatFetchedIcons)(a,t,e.length)}}},90451:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getIcon=void 0;const n=r(21178),o=r(46445);t.getIcon=e=>t=>{const r=new n.ParsedURL(t).getRootDomain();if(!r)return;const i=(0,o.computeHashMD5)(r);return e.get(i)}},91892:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.iconsSelector=t.iconsCacheSelector=void 0,t.iconsCacheSelector=e=>e.userSession.iconsCache,t.iconsSelector=e=>(0,t.iconsCacheSelector)(e).domains},8566:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setupSubscriptions=void 0;const n=r(12362),o=r(86691),i=async()=>{const e=(0,n.getInstance)(),t=(0,o.getInstance)(),r=t.lockTopic("iconsUpdates");await e.add("iconsUpdates",{type:"refresh"}),t.releaseTopic("iconsUpdates",r)};t.setupSubscriptions=async function(e,t){e.syncSuccess.on((async()=>{await i()})),e.syncFailure.on((async()=>{await i()}))}},13648:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const n=r(9774),o=r(53795),i=r(8302);t.config={commands:{addDriverLicense:{handler:i.addDriverLicenseHandler},editDriverLicense:{handler:i.editDriverLicenseHandler},deleteDriverLicense:{handler:i.deleteDriverLicenseHandler}},queries:{getDriverLicense:{selector:n.viewedDriverLicenseSelector},getDriverLicenses:{selector:n.viewedQueriedDriverLicensesSelector}},liveQueries:{liveDriverLicense:{operator:o.getDriverLicense$},liveDriverLicenses:{operator:o.driverLicenses$}}}},26655:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(78373),t)},60445:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addDriverLicenseHandler=void 0;const n=r(53576),o=r(72099),i=r(58452),a=({expirationDate:e,idNumber:t,issueDate:r,name:i,state:a})=>({DateOfBirth:"",DeliveryDate:(0,o.viewDateToVaultDate)(r),ExpireDate:(0,o.viewDateToVaultDate)(e),Fullname:i??"",LinkedIdentity:"",Number:t??"",kwType:n.DataModelType.KWDriverLicence,State:a??"",Sex:""});t.addDriverLicenseHandler=(e,t)=>(0,i.addIdHandler)(e,t,a)},38681:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.deleteDriverLicenseHandler=void 0;const n=r(9979),o=r(9774);t.deleteDriverLicenseHandler=(e,t)=>(0,n.deleteIdHandler)(e,t,o.driverLicenseSelector)},63589:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.editDriverLicenseHandler=t.handleDriverLicenseFields=void 0;const n=r(9774),o=r(72099),i=r(22388);t.handleDriverLicenseFields=(e,t)=>({DeliveryDate:void 0===e.issueDate?t.DeliveryDate:(0,o.viewDateToVaultDate)(e.issueDate),ExpireDate:void 0===e.expirationDate?t.ExpireDate:(0,o.viewDateToVaultDate)(e.expirationDate),Fullname:e.name??t.Fullname,Number:e.idNumber??t.Number,State:e.state??t.State,LinkedIdentity:void 0===e.name?t.LinkedIdentity:"",Attachments:void 0===e.attachments?t.Attachments:e.attachments}),t.editDriverLicenseHandler=(e,r)=>(0,i.updateIdHandler)(e,r,t.handleDriverLicenseFields,n.driverLicenseSelector)},8302:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(60445),t),o(r(63589),t),o(r(38681),t)},53795:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getDriverLicense$=t.driverLicenses$=void 0;const n=r(18948),o=r(3343),i=r(55220),a=r(9774);t.driverLicenses$=(0,i.getLivePersonalInfo)(a.getLiveDriverLicensesSelector),t.getDriverLicense$=e=>{const t=(0,a.getViewedDriverLicenseSelector)(e);return(0,n.pipe)((0,o.map)(t),(0,o.distinctUntilChanged)())}},91019:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getDriverLicenseMappers=void 0;const n=r(83539),o=r(72099);t.getDriverLicenseMappers=()=>({spaceId:e=>e.SpaceId,name:e=>(0,o.identityToName)(e.identity)||e.Fullname,idNumber:e=>e.Number,lastUse:n.lastUseMapper,id:e=>e.Id,creationDate:e=>e.CreationDatetime})},50317:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.driverLicenseMatch=t.searchGetters=void 0;const n=r(64455),o=r(82234),i=r(72099);t.searchGetters=[(0,o.stringProp)("Number"),e=>(0,i.identityToName)(e.identity)||e.Fullname],t.driverLicenseMatch=(0,n.match)(t.searchGetters)},9774:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getViewedDriverLicenseSelector=t.viewedDriverLicenseSelector=t.getLiveDriverLicensesSelector=t.viewedQueriedDriverLicensesSelector=t.queryDriverLicensesSelector=t.driverLicenseWithIdentitySelector=t.driverLicensesWithIdentitySelector=t.driverLicenseMappersSelector=t.driverLicenseSelector=t.driverLicensesSelector=void 0;const n=r(16516),o=r(32034),i=r(50317),a=r(53506),s=r(24589),c=r(63566),u=r(97006),d=r(49551),l=r(91019),p=r(28074),m=r(40602),g=r(57989);t.driverLicensesSelector=(0,o.createSelector)((e=>e.userSession.personalData.driverLicenses),g.quarantinedSpacesSelector,m.filterOutQuarantinedItems),t.driverLicenseSelector=(e,r)=>{const n=(0,t.driverLicensesSelector)(e);return(0,d.findDataModelObject)(r,n)},t.driverLicenseMappersSelector=e=>(0,l.getDriverLicenseMappers)(),t.driverLicensesWithIdentitySelector=(0,o.createSelector)([t.driverLicensesSelector,p.identitiesByIdSelector],((e,t)=>e.map((e=>({...e,identity:t[e.LinkedIdentity]}))))),t.driverLicenseWithIdentitySelector=(0,o.createSelector)([t.driverLicenseSelector,e=>(0,p.identitiesByIdSelector)(e)],((e,t)=>({...e,identity:t[e.LinkedIdentity]})));const f=()=>i.driverLicenseMatch;t.queryDriverLicensesSelector=(0,s.getQuerySelector)(t.driverLicensesWithIdentitySelector,f,t.driverLicenseMappersSelector),t.viewedQueriedDriverLicensesSelector=(0,n.compose)((0,c.viewListResults)(a.listView),t.queryDriverLicensesSelector),t.getLiveDriverLicensesSelector=(0,u.makeLiveSelectorGetter)(t.driverLicensesWithIdentitySelector,(()=>a.listView),f,t.driverLicenseMappersSelector),t.viewedDriverLicenseSelector=(e,r)=>{const n=(0,t.driverLicenseWithIdentitySelector)(e,r);return(0,a.maybeDetailView)(n)},t.getViewedDriverLicenseSelector=e=>{const r=(0,o.createSelector)(t.driverLicensesSelector,(t=>(0,d.findDataModelObject)(e,t)));return(0,o.createSelector)(r,p.identitiesSelector,((e,t)=>(0,a.maybeDetailView)({...e,identity:(0,d.findDataModelObject)(e.LinkedIdentity,t)})))}},78373:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},53506:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.listView=t.itemView=t.maybeDetailView=t.detailView=void 0;const n=r(82043),o=r(72099),i=({DeliveryDate:e,ExpireDate:t,Fullname:r,LocaleFormat:n,Number:i,State:a,CreationDatetime:s,identity:c})=>({country:(0,o.vaultCountryToViewCountry)(n),expirationDate:(0,o.vaultDateToViewDate)(t),idNumber:i??"",issueDate:(0,o.vaultDateToViewDate)(e),name:(0,o.identityToName)(c)||r||"",state:a??"",creationDate:s??0});t.detailView=e=>({...(0,n.dataModelDetailView)(e),...i(e)}),t.maybeDetailView=(0,n.maybeDataModelDetailView)(t.detailView),t.itemView=e=>({...(0,n.dataModelItemView)(e),...i(e)}),t.listView=e=>e.map(t.itemView)},15141:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const n=r(41092),o=r(53076),i=r(32813);t.config={commands:{addFiscalId:{handler:i.addFiscalIdHandler},editFiscalId:{handler:i.editFiscalIdHandler},deleteFiscalId:{handler:i.deleteFiscalIdHandler}},queries:{getFiscalId:{selector:n.viewedFiscalIdSelector},getFiscalIds:{selector:n.viewedQueriedFiscalIdsSelector}},liveQueries:{liveFiscalId:{operator:o.getFiscalId$},liveFiscalIds:{operator:o.fiscalIds$}}}},26763:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(23582),t)},46033:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addFiscalIdHandler=void 0;const n=r(53576),o=r(58452),i=({idNumber:e,teledeclarantNumber:t})=>({FiscalNumber:e??"",kwType:n.DataModelType.KWFiscalStatement,TeledeclarantNumber:t??""});t.addFiscalIdHandler=(e,t)=>(0,o.addIdHandler)(e,t,i)},98167:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.deleteFiscalIdHandler=void 0;const n=r(9979),o=r(41092);t.deleteFiscalIdHandler=(e,t)=>(0,n.deleteIdHandler)(e,t,o.fiscalIdSelector)},9175:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.editFiscalIdHandler=t.handleFiscalIdFields=void 0;const n=r(41092),o=r(22388);t.handleFiscalIdFields=(e,t)=>({FiscalNumber:e.idNumber??t.FiscalNumber,TeledeclarantNumber:e.teledeclarantNumber??t.TeledeclarantNumber,Attachments:void 0===e.attachments?t.Attachments:e.attachments}),t.editFiscalIdHandler=(e,r)=>(0,o.updateIdHandler)(e,r,t.handleFiscalIdFields,n.fiscalIdSelector)},32813:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(46033),t),o(r(9175),t),o(r(98167),t)},53076:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getFiscalId$=t.fiscalIds$=void 0;const n=r(18948),o=r(3343),i=r(55220),a=r(41092);t.fiscalIds$=(0,i.getLivePersonalInfo)(a.getLiveFiscalIdsSelector),t.getFiscalId$=e=>{const t=(0,a.getViewedFiscalIdSelector)(e);return(0,n.pipe)((0,o.map)(t),(0,o.distinctUntilChanged)())}},42143:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getFiscalIdMappers=void 0;const n=r(83539);t.getFiscalIdMappers=()=>({spaceId:e=>e.SpaceId,idNumber:e=>e.FiscalNumber,teledeclarantNumber:e=>e.TeledeclarantNumber,lastUse:n.lastUseMapper,id:e=>e.Id,creationDate:e=>e.CreationDatetime})},91341:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fiscalIdMatch=t.searchGetters=void 0;const n=r(64455),o=r(82234);t.searchGetters=[(0,o.stringProp)("FiscalNumber"),(0,o.stringProp)("TeledeclarantNumber")],t.fiscalIdMatch=(0,n.match)(t.searchGetters)},41092:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getViewedFiscalIdSelector=t.viewedFiscalIdSelector=t.getLiveFiscalIdsSelector=t.viewedQueriedFiscalIdsSelector=t.queryFiscalIdsSelector=t.fiscalIdMappersSelector=t.fiscalIdSelector=t.fiscalIdsSelector=void 0;const n=r(16516),o=r(32034),i=r(91341),a=r(22127),s=r(24589),c=r(63566),u=r(97006),d=r(49551),l=r(42143),p=r(40602),m=r(57989);t.fiscalIdsSelector=(0,o.createSelector)((e=>e.userSession.personalData.fiscalIds),m.quarantinedSpacesSelector,p.filterOutQuarantinedItems),t.fiscalIdSelector=(e,r)=>{const n=(0,t.fiscalIdsSelector)(e);return(0,d.findDataModelObject)(r,n)},t.fiscalIdMappersSelector=e=>(0,l.getFiscalIdMappers)();const g=()=>i.fiscalIdMatch;t.queryFiscalIdsSelector=(0,s.getQuerySelector)(t.fiscalIdsSelector,g,t.fiscalIdMappersSelector),t.viewedQueriedFiscalIdsSelector=(0,n.compose)((0,c.viewListResults)(a.listView),t.queryFiscalIdsSelector),t.getLiveFiscalIdsSelector=(0,u.makeLiveSelectorGetter)(t.fiscalIdsSelector,(()=>a.listView),g,t.fiscalIdMappersSelector),t.viewedFiscalIdSelector=(e,r)=>{const n=(0,t.fiscalIdSelector)(e,r);return(0,a.maybeDetailView)(n)},t.getViewedFiscalIdSelector=e=>{const r=(0,o.createSelector)(t.fiscalIdsSelector,(t=>(0,d.findDataModelObject)(e,t)));return(0,o.createSelector)(r,a.maybeDetailView)}},23582:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},22127:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.listView=t.itemView=t.maybeDetailView=t.detailView=void 0;const n=r(82043),o=r(72099),i=({FiscalNumber:e,TeledeclarantNumber:t,LocaleFormat:r,CreationDatetime:n})=>({country:(0,o.vaultCountryToViewCountry)(r),idNumber:e??"",teledeclarantNumber:t??"",creationDate:n??0});t.detailView=e=>({...(0,n.dataModelDetailView)(e),...i(e)}),t.maybeDetailView=(0,n.maybeDataModelDetailView)(t.detailView),t.itemView=e=>({...(0,n.dataModelItemView)(e),...i(e)}),t.listView=e=>e.map(t.itemView)},2282:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const n=r(23437),o=r(77849),i=r(17607);t.config={commands:{addIdCard:{handler:i.addIdCardHandler},editIdCard:{handler:i.editIdCardHandler},deleteIdCard:{handler:i.deleteIdCardHandler}},queries:{getIdCard:{selector:n.viewedIdCardSelector},getIdCards:{selector:n.viewedQueriedIdCardsSelector}},liveQueries:{liveIdCard:{operator:o.getIdCard$},liveIdCards:{operator:o.idCards$}}}},59198:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(97367),t)},38052:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addIdCardHandler=void 0;const n=r(53576),o=r(72099),i=r(58452),a=({expirationDate:e,idNumber:t,issueDate:r,name:i})=>({DateOfBirth:"",DeliveryDate:(0,o.viewDateToVaultDate)(r),ExpireDate:(0,o.viewDateToVaultDate)(e),Fullname:i??"",LinkedIdentity:"",Number:t??"",kwType:n.DataModelType.KWIDCard,Sex:""});t.addIdCardHandler=(e,t)=>(0,i.addIdHandler)(e,t,a)},19922:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.deleteIdCardHandler=void 0;const n=r(9979),o=r(23437);t.deleteIdCardHandler=(e,t)=>(0,n.deleteIdHandler)(e,t,o.idCardSelector)},84260:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.editIdCardHandler=t.handleIdCardFields=void 0;const n=r(23437),o=r(72099),i=r(22388);t.handleIdCardFields=(e,t)=>({DeliveryDate:void 0===e.issueDate?t.DeliveryDate:(0,o.viewDateToVaultDate)(e.issueDate),ExpireDate:void 0===e.expirationDate?t.ExpireDate:(0,o.viewDateToVaultDate)(e.expirationDate),Fullname:e.name??t.Fullname,Number:e.idNumber??t.Number,LinkedIdentity:void 0===e.name?t.LinkedIdentity:"",Attachments:void 0===e.attachments?t.Attachments:e.attachments}),t.editIdCardHandler=(e,r)=>(0,i.updateIdHandler)(e,r,t.handleIdCardFields,n.idCardSelector)},17607:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(38052),t),o(r(84260),t),o(r(19922),t)},77849:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getIdCard$=t.idCards$=void 0;const n=r(18948),o=r(3343),i=r(55220),a=r(23437);t.idCards$=(0,i.getLivePersonalInfo)(a.getLiveIdCardsSelector),t.getIdCard$=e=>{const t=(0,a.getViewedIdCardSelector)(e);return(0,n.pipe)((0,o.map)(t),(0,o.distinctUntilChanged)())}},75455:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getIdCardMappers=void 0;const n=r(83539),o=r(72099);t.getIdCardMappers=()=>({spaceId:e=>e.SpaceId,name:e=>(0,o.identityToName)(e.identity)||e.Fullname,idNumber:e=>e.Number,lastUse:n.lastUseMapper,id:e=>e.Id,creationDate:e=>e.CreationDatetime})},27062:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.idCardMatch=t.searchGetters=void 0;const n=r(64455),o=r(82234),i=r(72099);t.searchGetters=[(0,o.stringProp)("Number"),e=>(0,i.identityToName)(e.identity)||e.Fullname],t.idCardMatch=(0,n.match)(t.searchGetters)},23437:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getViewedIdCardSelector=t.viewedIdCardSelector=t.getLiveIdCardsSelector=t.viewedQueriedIdCardsSelector=t.queryIdCardsSelector=t.idCardMappersSelector=t.idCardWithIdentitySelector=t.idCardsWithIdentitySelector=t.idCardSelector=t.idCardsSelector=void 0;const n=r(16516),o=r(32034),i=r(27062),a=r(64439),s=r(24589),c=r(63566),u=r(97006),d=r(49551),l=r(75455),p=r(28074),m=r(40602),g=r(57989);t.idCardsSelector=(0,o.createSelector)((e=>e.userSession.personalData.idCards),g.quarantinedSpacesSelector,m.filterOutQuarantinedItems),t.idCardSelector=(e,r)=>{const n=(0,t.idCardsSelector)(e);return(0,d.findDataModelObject)(r,n)},t.idCardsWithIdentitySelector=(0,o.createSelector)([t.idCardsSelector,p.identitiesByIdSelector],((e,t)=>e.map((e=>({...e,identity:t[e.LinkedIdentity]}))))),t.idCardWithIdentitySelector=(0,o.createSelector)([t.idCardSelector,e=>(0,p.identitiesByIdSelector)(e)],((e,t)=>({...e,identity:t[e.LinkedIdentity]}))),t.idCardMappersSelector=e=>(0,l.getIdCardMappers)();const f=()=>i.idCardMatch;t.queryIdCardsSelector=(0,s.getQuerySelector)(t.idCardsWithIdentitySelector,f,t.idCardMappersSelector),t.viewedQueriedIdCardsSelector=(0,n.compose)((0,c.viewListResults)(a.listView),t.queryIdCardsSelector),t.getLiveIdCardsSelector=(0,u.makeLiveSelectorGetter)(t.idCardsWithIdentitySelector,(()=>a.listView),f,t.idCardMappersSelector),t.viewedIdCardSelector=(e,r)=>{const n=(0,t.idCardWithIdentitySelector)(e,r);return(0,a.maybeDetailView)(n)},t.getViewedIdCardSelector=e=>{const r=(0,o.createSelector)(t.idCardsSelector,(t=>(0,d.findDataModelObject)(e,t)));return(0,o.createSelector)(r,p.identitiesSelector,((e,t)=>(0,a.maybeDetailView)({...e,identity:(0,d.findDataModelObject)(e.LinkedIdentity,t)})))}},97367:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},64439:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.listView=t.itemView=t.maybeDetailView=t.detailView=void 0;const n=r(82043),o=r(72099),i=({DeliveryDate:e,ExpireDate:t,Fullname:r,LocaleFormat:n,Number:i,CreationDatetime:a,identity:s})=>({country:(0,o.vaultCountryToViewCountry)(n),expirationDate:(0,o.vaultDateToViewDate)(t),idNumber:i??"",issueDate:(0,o.vaultDateToViewDate)(e),name:(0,o.identityToName)(s)||r||"",creationDate:a??0});t.detailView=e=>({...(0,n.dataModelDetailView)(e),...i(e)}),t.maybeDetailView=(0,n.maybeDataModelDetailView)(t.detailView),t.itemView=e=>({...(0,n.dataModelItemView)(e),...i(e)}),t.listView=e=>e.map(t.itemView)},8453:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const n=r(65401),o=r(56174),i=r(62535);t.config={commands:{addPassport:{handler:i.addPassportHandler},editPassport:{handler:i.editPassportHandler},deletePassport:{handler:i.deletePassportHandler}},queries:{getPassport:{selector:n.viewedPassportSelector},getPassports:{selector:n.viewedQueriedPassportsSelector}},liveQueries:{livePassport:{operator:o.getPassport$},livePassports:{operator:o.passports$}}}},80666:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(97894),t)},57237:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addPassportHandler=void 0;const n=r(53576),o=r(72099),i=r(58452),a=({expirationDate:e,idNumber:t,issueDate:r,name:i,deliveryPlace:a})=>({DateOfBirth:"",DeliveryDate:(0,o.viewDateToVaultDate)(r),ExpireDate:(0,o.viewDateToVaultDate)(e),Fullname:i??"",LinkedIdentity:"",Number:t??"",kwType:n.DataModelType.KWPassport,DeliveryPlace:a??"",Sex:""});t.addPassportHandler=(e,t)=>(0,i.addIdHandler)(e,t,a)},48518:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.deletePassportHandler=void 0;const n=r(9979),o=r(65401);t.deletePassportHandler=(e,t)=>(0,n.deleteIdHandler)(e,t,o.passportSelector)},29461:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.editPassportHandler=t.handlePassportFields=void 0;const n=r(65401),o=r(72099),i=r(22388);t.handlePassportFields=(e,t)=>({DeliveryDate:void 0===e.issueDate?t.DeliveryDate:(0,o.viewDateToVaultDate)(e.issueDate),ExpireDate:void 0===e.expirationDate?t.ExpireDate:(0,o.viewDateToVaultDate)(e.expirationDate),Fullname:e.name??t.Fullname,Number:e.idNumber??t.Number,DeliveryPlace:e.deliveryPlace??t.DeliveryPlace,LinkedIdentity:void 0===e.name?t.LinkedIdentity:"",Attachments:void 0===e.attachments?t.Attachments:e.attachments}),t.editPassportHandler=(e,r)=>(0,i.updateIdHandler)(e,r,t.handlePassportFields,n.passportSelector)},62535:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(57237),t),o(r(29461),t),o(r(48518),t)},56174:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getPassport$=t.passports$=void 0;const n=r(18948),o=r(3343),i=r(55220),a=r(65401);t.passports$=(0,i.getLivePersonalInfo)(a.getLivePassportsSelector),t.getPassport$=e=>{const t=(0,a.getViewedPassportSelector)(e);return(0,n.pipe)((0,o.map)(t),(0,o.distinctUntilChanged)())}},94023:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getPassportMappers=void 0;const n=r(83539),o=r(72099);t.getPassportMappers=()=>({spaceId:e=>e.SpaceId,name:e=>(0,o.identityToName)(e.identity)||e.Fullname,idNumber:e=>e.Number,lastUse:n.lastUseMapper,id:e=>e.Id,creationDate:e=>e.CreationDatetime})},39515:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.passportMatch=t.searchGetters=void 0;const n=r(64455),o=r(82234),i=r(72099);t.searchGetters=[(0,o.stringProp)("Number"),e=>(0,i.identityToName)(e.identity)||e.Fullname],t.passportMatch=(0,n.match)(t.searchGetters)},65401:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getViewedPassportSelector=t.viewedPassportSelector=t.getLivePassportsSelector=t.viewedQueriedPassportsSelector=t.queryPassportsWithIdentitySelector=t.passportMappersSelector=t.passportWithIdentitySelector=t.passportsWithIdentitySelector=t.passportSelector=t.passportsSelector=void 0;const n=r(16516),o=r(32034),i=r(39515),a=r(90810),s=r(24589),c=r(63566),u=r(97006),d=r(49551),l=r(94023),p=r(28074),m=r(40602),g=r(57989);t.passportsSelector=(0,o.createSelector)((e=>e.userSession.personalData.passports),g.quarantinedSpacesSelector,m.filterOutQuarantinedItems),t.passportSelector=(e,r)=>{const n=(0,t.passportsSelector)(e);return(0,d.findDataModelObject)(r,n)},t.passportsWithIdentitySelector=(0,o.createSelector)([t.passportsSelector,p.identitiesByIdSelector],((e,t)=>e.map((e=>({...e,identity:t[e.LinkedIdentity]}))))),t.passportWithIdentitySelector=(0,o.createSelector)([t.passportSelector,e=>(0,p.identitiesByIdSelector)(e)],((e,t)=>({...e,identity:t[e.LinkedIdentity]}))),t.passportMappersSelector=e=>(0,l.getPassportMappers)();const f=()=>i.passportMatch;t.queryPassportsWithIdentitySelector=(0,s.getQuerySelector)(t.passportsWithIdentitySelector,f,t.passportMappersSelector),t.viewedQueriedPassportsSelector=(0,n.compose)((0,c.viewListResults)(a.listView),t.queryPassportsWithIdentitySelector),t.getLivePassportsSelector=(0,u.makeLiveSelectorGetter)(t.passportsWithIdentitySelector,(()=>a.listView),f,t.passportMappersSelector),t.viewedPassportSelector=(e,r)=>{const n=(0,t.passportWithIdentitySelector)(e,r);return(0,a.maybeDetailView)(n)},t.getViewedPassportSelector=e=>{const r=(0,o.createSelector)(t.passportsSelector,(t=>(0,d.findDataModelObject)(e,t)));return(0,o.createSelector)(r,p.identitiesSelector,((e,t)=>(0,a.maybeDetailView)({...e,identity:(0,d.findDataModelObject)(e.LinkedIdentity,t)})))}},97894:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},90810:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.listView=t.itemView=t.maybeDetailView=t.detailView=void 0;const n=r(82043),o=r(72099),i=({DeliveryDate:e,ExpireDate:t,Fullname:r,LocaleFormat:n,Number:i,DeliveryPlace:a,CreationDatetime:s,identity:c})=>({country:(0,o.vaultCountryToViewCountry)(n),expirationDate:(0,o.vaultDateToViewDate)(t),idNumber:i??"",issueDate:(0,o.vaultDateToViewDate)(e),name:(0,o.identityToName)(c)||r||"",deliveryPlace:a??"",creationDate:s??0});t.detailView=e=>({...(0,n.dataModelDetailView)(e),...i(e)}),t.maybeDetailView=(0,n.maybeDataModelDetailView)(t.detailView),t.itemView=e=>({...(0,n.dataModelItemView)(e),...i(e)}),t.listView=e=>e.map(t.itemView)},57718:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const n=r(27147),o=r(25346),i=r(27753);t.config={commands:{addSocialSecurityId:{handler:i.addSocialSecurityIdHandler},editSocialSecurityId:{handler:i.editSocialSecurityIdHandler},deleteSocialSecurityId:{handler:i.deleteSocialSecurityIdHandler}},queries:{getSocialSecurityId:{selector:n.viewedSocialSecurityIdSelector},getSocialSecurityIds:{selector:n.viewedQueriedSocialSecurityIdsSelector}},liveQueries:{liveSocialSecurityId:{operator:o.getSocialSecurityId$},liveSocialSecurityIds:{operator:o.socialSecurityIds$}}}},80630:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(72299),t)},6702:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addSocialSecurityIdHandler=void 0;const n=r(53576),o=r(58452),i=e=>({DateOfBirth:"",LinkedIdentity:"",SocialSecurityFullname:e.name??"",SocialSecurityNumber:e.idNumber??"",kwType:n.DataModelType.KWSocialSecurityStatement,Sex:""});t.addSocialSecurityIdHandler=(e,t)=>(0,o.addIdHandler)(e,t,i)},50725:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.deleteSocialSecurityIdHandler=void 0;const n=r(9979),o=r(27147);t.deleteSocialSecurityIdHandler=(e,t)=>(0,n.deleteIdHandler)(e,t,o.socialSecurityIdSelector)},96163:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.editSocialSecurityIdHandler=t.handleSocialSecurityIdFields=void 0;const n=r(27147),o=r(22388);t.handleSocialSecurityIdFields=(e,t)=>({SocialSecurityFullname:e.name??t.SocialSecurityFullname,SocialSecurityNumber:e.idNumber??t.SocialSecurityNumber,LinkedIdentity:void 0===e.name?t.LinkedIdentity:"",Attachments:void 0===e.attachments?t.Attachments:e.attachments}),t.editSocialSecurityIdHandler=(e,r)=>(0,o.updateIdHandler)(e,r,t.handleSocialSecurityIdFields,n.socialSecurityIdSelector)},27753:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(6702),t),o(r(96163),t),o(r(50725),t)},25346:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getSocialSecurityId$=t.socialSecurityIds$=void 0;const n=r(18948),o=r(3343),i=r(55220),a=r(27147);t.socialSecurityIds$=(0,i.getLivePersonalInfo)(a.getLiveSocialSecurityIdsSelector),t.getSocialSecurityId$=e=>{const t=(0,a.getViewedSocialSecurityIdSelector)(e);return(0,n.pipe)((0,o.map)(t),(0,o.distinctUntilChanged)())}},50147:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getSocialSecurityIdMappers=void 0;const n=r(83539),o=r(72099);t.getSocialSecurityIdMappers=()=>({spaceId:e=>e.SpaceId,name:e=>(0,o.identityToName)(e.identity)||e.SocialSecurityFullname,idNumber:e=>e.SocialSecurityNumber,lastUse:n.lastUseMapper,id:e=>e.Id,creationDate:e=>e.CreationDatetime})},29989:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.socialSecurityIdMatch=t.searchGetters=void 0;const n=r(64455),o=r(82234),i=r(72099);t.searchGetters=[(0,o.stringProp)("SocialSecurityNumber"),e=>(0,i.identityToName)(e.identity)||e.SocialSecurityFullname],t.socialSecurityIdMatch=(0,n.match)(t.searchGetters)},27147:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getViewedSocialSecurityIdSelector=t.viewedSocialSecurityIdSelector=t.getLiveSocialSecurityIdsSelector=t.viewedQueriedSocialSecurityIdsSelector=t.querySocialSecurityIdsSelector=t.socialSecurityIdMappersSelector=t.socialSecurityIdWithIdentitySelector=t.socialSecurityIdsWithIdentitySelector=t.socialSecurityIdSelector=t.socialSecurityIdsSelector=void 0;const n=r(16516),o=r(32034),i=r(29989),a=r(71864),s=r(24589),c=r(63566),u=r(97006),d=r(49551),l=r(50147),p=r(28074),m=r(57989),g=r(40602);t.socialSecurityIdsSelector=(0,o.createSelector)((e=>e.userSession.personalData.socialSecurityIds),m.quarantinedSpacesSelector,g.filterOutQuarantinedItems),t.socialSecurityIdSelector=(e,r)=>{const n=(0,t.socialSecurityIdsSelector)(e);return(0,d.findDataModelObject)(r,n)},t.socialSecurityIdsWithIdentitySelector=(0,o.createSelector)([t.socialSecurityIdsSelector,p.identitiesByIdSelector],((e,t)=>e.map((e=>({...e,identity:t[e.LinkedIdentity]}))))),t.socialSecurityIdWithIdentitySelector=(0,o.createSelector)([t.socialSecurityIdSelector,e=>(0,p.identitiesByIdSelector)(e)],((e,t)=>({...e,identity:t[e.LinkedIdentity]}))),t.socialSecurityIdMappersSelector=e=>(0,l.getSocialSecurityIdMappers)();const f=()=>i.socialSecurityIdMatch;t.querySocialSecurityIdsSelector=(0,s.getQuerySelector)(t.socialSecurityIdsWithIdentitySelector,f,t.socialSecurityIdMappersSelector),t.viewedQueriedSocialSecurityIdsSelector=(0,n.compose)((0,c.viewListResults)(a.listView),t.querySocialSecurityIdsSelector),t.getLiveSocialSecurityIdsSelector=(0,u.makeLiveSelectorGetter)(t.socialSecurityIdsWithIdentitySelector,(()=>a.listView),f,t.socialSecurityIdMappersSelector),t.viewedSocialSecurityIdSelector=(e,r)=>{const n=(0,t.socialSecurityIdWithIdentitySelector)(e,r);return(0,a.maybeDetailView)(n)},t.getViewedSocialSecurityIdSelector=e=>{const r=(0,o.createSelector)(t.socialSecurityIdsSelector,(t=>(0,d.findDataModelObject)(e,t)));return(0,o.createSelector)(r,p.identitiesSelector,((e,t)=>(0,a.maybeDetailView)({...e,identity:(0,d.findDataModelObject)(e.LinkedIdentity,t)})))}},72299:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},71864:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.listView=t.itemView=t.maybeDetailView=t.detailView=void 0;const n=r(82043),o=r(72099),i=e=>({name:(0,o.identityToName)(e.identity)||e.SocialSecurityFullname||"",idNumber:e.SocialSecurityNumber??"",country:(0,o.vaultCountryToViewCountry)(e.LocaleFormat),creationDate:e.CreationDatetime??0});t.detailView=e=>({...(0,n.dataModelDetailView)(e),...i(e)}),t.maybeDetailView=(0,n.maybeDataModelDetailView)(t.detailView),t.itemView=e=>({...(0,n.dataModelItemView)(e),...i(e)}),t.listView=e=>e.map(t.itemView)},58452:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addIdHandler=void 0;const n=r(92233),o=r(32921),i=r(23136),a=r(48313),s=r(47408),c=r(78320),u=r(95623),d=r(70252),l=r(13675),p=r(72099),m=r(79980);t.addIdHandler=async({applicationModulesAccess:e,sessionService:t,storeService:r,eventLoggerService:g},f,S)=>{if(""===f.idNumber)return Promise.resolve({success:!1,error:{code:o.AddIdResultErrorCode.MISSING_ID_NUMBER}});const h=({country:e,spaceId:t})=>{const r=(0,s.getUnixTimestamp)();return{AnonId:(0,c.generateItemUuid)(),CreationDatetime:r,Id:(0,c.generateItemUuid)(),LastBackupTime:0,LocaleFormat:(0,p.viewCountryToVaultCountry)(e),SpaceId:t,UserModificationDatetime:r}};try{if(!r.isAuthenticated())return Promise.resolve({success:!1,error:{code:o.IdErrorCode.NOT_AUTHENTICATED}});const s={...h(y=(0,l.sanitizeInputPersonalData)(f)),...S(y)};if(!s.SpaceId){const t=await(0,i.getDefaultSpaceId)(e,r);s.SpaceId=t}const c=s.kwType;return r.dispatch((0,a.savePersonalDataItem)(s,c)),t.getInstance().user.persistPersonalData(),(0,i.getDebounceSync)(r,t)({immediateCall:!0},n.Trigger.Save),(0,m.logAddVaultItem)(r,g,s),Promise.resolve({success:!0})}catch(e){const t=new Error(`[IDs] - addIdHandler: ${e}`);return(0,d.sendExceptionLog)({error:t}),(0,u.logError)(t),Promise.resolve({success:!1,error:{code:o.IdErrorCode.INTERNAL_ERROR}})}var y}},9979:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.deleteIdHandler=void 0;const n=r(92233),o=r(32921),i=r(23136),a=r(45291),s=r(95623),c=r(70252),u=r(79980);t.deleteIdHandler=({sessionService:e,storeService:t,eventLoggerService:r},{id:d},l)=>{const p=t.getState();try{if(!t.isAuthenticated())return Promise.resolve({success:!1,error:{code:o.IdErrorCode.NOT_AUTHENTICATED}});const s=l(p,d);if(!s)return Promise.resolve({success:!1,error:{code:o.IdErrorCode.NOT_FOUND}});const c=(0,a.removePersonalItem)(s.kwType,s.Id,null);return t.dispatch(c),(0,i.getDebounceSync)(t,e)({immediateCall:!0},n.Trigger.Save),(0,u.logDeleteVaultItem)(t,r,s),Promise.resolve({success:!0})}catch(e){const t=new Error(`[IDs] - deleteIdHandler: ${e}`);return(0,c.sendExceptionLog)({error:t}),(0,s.logError)(t),Promise.resolve({success:!1,error:{code:o.IdErrorCode.INTERNAL_ERROR}})}}},22388:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.updateIdHandler=void 0;const n=r(92233),o=r(32921),i=r(23136),a=r(48313),s=r(47408),c=r(95623),u=r(70252),d=r(13675),l=r(72099),p=r(79980);t.updateIdHandler=({sessionService:e,storeService:t,eventLoggerService:r},m,g,f)=>{if(""===m.idNumber)return Promise.resolve({success:!1,error:{code:o.UpdateIdResultErrorCode.MISSING_ID_NUMBER}});const S=({country:e,spaceId:t},r)=>({SpaceId:t??r.SpaceId,LocaleFormat:void 0===e?r.LocaleFormat:(0,l.viewCountryToVaultCountry)(e)}),h=(e,t)=>({...S(e,t),...g(e,t)});try{if(!t.isAuthenticated())return Promise.resolve({success:!1,error:{code:o.IdErrorCode.NOT_AUTHENTICATED}});const c=t.getState(),u=(0,d.sanitizeInputPersonalData)(m),l=f(c,m.id);if(!l)return Promise.resolve({success:!1,error:{code:o.IdErrorCode.NOT_FOUND}});const g={...l,...h(u,l),UserModificationDatetime:(0,s.getUnixTimestamp)()},S=g.kwType;t.dispatch((0,a.savePersonalDataItem)(g,S)),e.getInstance().user.persistPersonalData(),(0,i.getDebounceSync)(t,e)({immediateCall:!0},n.Trigger.Save);const y=f(c,m.id);return(0,p.logEditVaultItem)(t,r,g,y),Promise.resolve({success:!0})}catch(e){const t=new Error(`[IDs] - updateIdHandler: ${e}`);return(0,u.sendExceptionLog)({error:t}),(0,c.logError)(t),Promise.resolve({success:!1,error:{code:o.IdErrorCode.INTERNAL_ERROR}})}}},72099:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.identityToName=t.viewCountryToVaultCountry=t.vaultCountryToViewCountry=t.vaultDateToViewDate=t.viewDateToVaultDate=t.epochToDate=t.ZERO_INDEX_BASED_MONTH_OFFSET=void 0;const n=r(53576);t.ZERO_INDEX_BASED_MONTH_OFFSET=1,t.epochToDate=e=>new Date(1e3*e),t.viewDateToVaultDate=e=>null===e?"":(e=>{const r=(0,t.epochToDate)(e);return`${r.getUTCFullYear()}-${r.getUTCMonth()+1}-${r.getUTCDate()}`})(e),t.vaultDateToViewDate=e=>{if(!e)return null;const t=(e=>{if(!e)return 0;const[t,r,n]=e.split(/[-/]/).map((e=>Number.parseInt(e,10))),o=new Date;o.setUTCHours(0,0,0,0);const i=o.setUTCFullYear(t,r-1,n);return Math.floor(i/1e3)})(e);return Number.isNaN(t)?null:t},t.vaultCountryToViewCountry=e=>{const t=n.Country[e];return void 0===t||t===n.Country.NO_TYPE?n.Country.UNIVERSAL:t},t.viewCountryToVaultCountry=t.vaultCountryToViewCountry,t.identityToName=e=>e?[e.FirstName,e.MiddleName,e.LastName,e.LastName2].filter(Boolean).join(" "):""},32921:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UpdateIdResultErrorCode=t.AddIdResultErrorCode=t.IdErrorCode=void 0,function(e){e.INTERNAL_ERROR="INTERNAL_ERROR",e.NOT_AUTHENTICATED="NOT_AUTHENTICATED",e.NOT_FOUND="NOT_FOUND"}(t.IdErrorCode||(t.IdErrorCode={})),function(e){e.MISSING_ID_NUMBER="MISSING_ID_NUMBER"}(t.AddIdResultErrorCode||(t.AddIdResultErrorCode={})),function(e){e.MISSING_ID_NUMBER="MISSING_ID_NUMBER"}(t.UpdateIdResultErrorCode||(t.UpdateIdResultErrorCode={}))},11230:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.importApiConfig=void 0;const n=r(56242),o=r(29613),i=r(28927),a=r(76295),s=r(94746);t.importApiConfig={commands:{importPersonalData:{handler:i.importPersonalDataHandler},previewPersonalData:{handler:a.previewPersonalDataHandler},dismissPersonalDataImportNotifications:{handler:s.dismissDataImportHandler}},queries:{getImportPersonalDataStatus:{selector:o.importPersonalDataStateSelector}},liveQueries:{liveImportPersonalDataStatus:{operator:n.importPersonalDataState$}}}},88815:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PreviewPersonalDataErrorType=t.ImportPersonalDataStateType=t.ImportPersonalDataErrorType=t.ImportFormats=void 0,function(e){e.Csv="csv",e.Dash="dash"}(t.ImportFormats||(t.ImportFormats={})),function(e){e.Unavailable="unavailable",e.Unknown="unknown"}(t.ImportPersonalDataErrorType||(t.ImportPersonalDataErrorType={})),function(e){e.Idle="idle",e.Processing="processing",e.Success="success",e.Error="error"}(t.ImportPersonalDataStateType||(t.ImportPersonalDataStateType={})),function(e){e.BadPassword="bad_password",e.Unavailable="unavailable",e.InvalidFormat="invalid",e.Unknown="unknown"}(t.PreviewPersonalDataErrorType||(t.PreviewPersonalDataErrorType={}))},94746:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.dismissDataImportHandler=t.dismissDataImport=void 0;const n=r(38250),o=r(43691);t.dismissDataImport=async e=>{await e.waitReady(),e.onNewState({status:n.ImportPersonalDataStateType.Idle})},t.dismissDataImportHandler=e=>(0,t.dismissDataImport)((0,o.makeImportService)(e))},28927:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.importPersonalDataHandler=t.importPersonalData=void 0;const n=r(38250),o=r(95623),i=r(70252),a=r(43691);t.importPersonalData=async(e,t)=>{try{e.onNewState({status:n.ImportPersonalDataStateType.Processing,name:t.name});const r=t.content;return(async()=>{try{const o=await e.importPersonalDataItems(r);e.onNewState({status:n.ImportPersonalDataStateType.Success,name:t.name,totalCount:o.totalCount,successCount:o.successCount,duplicateCount:o.duplicateCount})}catch(r){const a=new Error(`[import] - importError: ${r}`);(0,i.sendExceptionLog)({error:a}),(0,o.logError)(a),e.onNewState({status:n.ImportPersonalDataStateType.Error,name:t.name})}})(),{success:!0}}catch(r){const a=new Error(`[import] - formatError: ${r}`);return(0,i.sendExceptionLog)({error:a}),(0,o.logError)(a),e.onNewState({status:n.ImportPersonalDataStateType.Error,name:t.name}),{success:!1,error:n.ImportPersonalDataErrorType.Unknown}}},t.importPersonalDataHandler=(e,r)=>(0,t.importPersonalData)((0,a.makeImportService)(e),r)},76295:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.previewPersonalDataHandler=t.previewPersonalData=void 0;const n=r(38250),o=r(43691);t.previewPersonalData=async(e,t)=>{if(!e.canDoImport())return{success:!1,error:n.PreviewPersonalDataErrorType.Unavailable};try{return await e.previewPersonalDataArchive(t)}catch(e){return{success:!1,error:n.PreviewPersonalDataErrorType.InvalidFormat}}},t.previewPersonalDataHandler=(e,r)=>{const n=(0,o.makeImportService)(e);return(0,t.previewPersonalData)(n,r)}},56242:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.importPersonalDataState$=void 0;const n=r(18948),o=r(3343),i=r(29613);t.importPersonalDataState$=()=>(0,n.pipe)((0,o.map)(i.importPersonalDataStateSelector,(0,o.distinctUntilChanged)()))},29613:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isImportPersonalDataAvailableSelector=t.importPersonalDataStateSelector=void 0;const n=r(38250),o=r(62844);t.importPersonalDataStateSelector=e=>e.userSession.importPersonalData.state??{status:n.ImportPersonalDataStateType.Idle},t.isImportPersonalDataAvailableSelector=e=>!(0,o.changeMPinProgressSelector)(e)&&(0,t.importPersonalDataStateSelector)(e).status!==n.ImportPersonalDataStateType.Processing},90537:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getUniqueVaultItemIdentifier=void 0;const n=r(16516),o={Attachments:!1},i={...o,Title:!0,Email:!0,Login:!0,SecondaryLogin:!0,Password:!0,Strength:!1,Note:!0,Checked:!1,Status:!1,SharedObject:!1,ModificationDatetime:!1,Category:!1,Url:!0,UserSelectedUrl:!1,UseFixedUrl:!1,TrustedUrlGroup:!1,NumberUse:!1,AutoLogin:!1,AutoProtected:!1,SubdomainOnly:!1,Type:!1,Server:!1,Port:!1,Alias:!1,SID:!1,ConnectionOptions:!1,domainIcon:!1,limitedPermissions:!1,OtpSecret:!0,OtpUrl:!0,LinkedServices:!1},a={...o,Title:!0,Category:!1,Type:!1,limitedPermissions:!1,Content:!0,Secured:!1,CreationDate:!1,UpdateDate:!1},s={...o,LinkedIdentity:!1,Fullname:!0,Sex:!0,DateOfBirth:!0,Number:!0,ExpireDate:!0,DeliveryDate:!0},c={...o,Email:!0,Type:!1,EmailName:!0},u={...o,Type:!1,Number:!0,NumberNational:!0,NumberInternational:!0,PhoneName:!0,PersonalNote:!0},d={...o,Title:!0,FirstName:!0,MiddleName:!0,LastName:!0,LastName2:!0,Pseudo:!1,BirthDate:!0,BirthPlace:!0},l={...o,Counter:!1,CredentialId:!0,ItemName:!0,KeyAlgorithm:!0,Note:!0,PrivateKey:!0,RpId:!0,RpName:!0,UserDisplayName:!0,UserHandle:!0},p={...o,LinkedIdentity:!1,Fullname:!0,Sex:!0,DateOfBirth:!0,Number:!0,ExpireDate:!0,DeliveryDate:!0,DeliveryPlace:!0},m={...o,PersonalNote:!0,Name:!0,Website:!0},g={...o,Number:!0,LinkedIdentity:!1,Fullname:!0,Sex:!0,DateOfBirth:!0,DeliveryDate:!0,ExpireDate:!0,State:!0},f={...o,PersonalNote:!0,Name:!0,JobTitle:!0},S={...o,PersonalNote:!0,State:!0,AddressName:!0,Receiver:!0,AddressFull:!0,City:!0,ZipCode:!0,Country:!0,StreetNumber:!0,StreetTitle:!0,StreetName:!0,StateNumber:!0,StateLevel2:!0,Building:!0,Stairs:!0,Floor:!0,Door:!0,DigitCode:!0,LinkedPhone:!1},h={...o,Name:!0,CardNumber:!0,CardNumberLastDigits:!0,OwnerName:!0,SecurityCode:!0,ExpireMonth:!0,ExpireYear:!0,StartMonth:!0,StartYear:!0,IssueNumber:!0,Color:!1,Bank:!0,CCNote:!0,Type:!1},y={...o,BankAccountName:!0,BankAccountOwner:!0,BankAccountIBAN:!0,BankAccountBIC:!0,BankAccountBank:!0},v=e=>Object.keys(e).filter((t=>!!e[t])),E={KWAddress:v(S),KWAuthCategory:v({Attachments:!1,CategoryName:!0}),KWAuthentifiant:v(i),KWBankStatement:v(y),KWCollection:v({Attachments:!1,Name:!0,VaultItems:!0}),KWCompany:v(f),KWDataChangeHistory:[],KWDriverLicence:v(g),KWEmail:v(c),KWFiscalStatement:[],KWGeneratedPassword:[],KWIDCard:v(s),KWIdentity:v(d),KWMerchand:[],KWMiscData:[],KWPasskey:v(l),KWPassport:v(p),KWPaymentMean_creditCard:v(h),KWPaymentMean_paypal:[],KWPersonalWebsite:v(m),KWPhone:v(u),KWPurchaseAccount:[],KWPurchaseCategory:[],KWPurchasePaidBasket:[],KWPurchaseTrueArticle:[],KWSecureFileInfo:[],KWSecureNote:v(a),KWSecureNoteCategory:v({Attachments:!1,CategoryName:!0}),KWSecurityBreach:[],KWSettingsManagerApp:[],KWSocialSecurityStatement:[],KWWebSite:[]};t.getUniqueVaultItemIdentifier=e=>((e,t)=>{const r={};return e.forEach((e=>{r[e]=t[e]??""})),(0,n.isEmpty)(r)?"":JSON.stringify(r)})(E[e.kwType],e)},47437:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getImportableItemsFromUserFile=t.getExistingVaultItemUniqueIdentifiers=void 0;const n=r(53576),o=r(13675),i=r(72883),a=r(88205),s=r(49901),c=r(90537),u=r(88655),d=[n.DataModelType.KWAddress,n.DataModelType.KWAuthentifiant,n.DataModelType.KWCompany,n.DataModelType.KWDriverLicence,n.DataModelType.KWEmail,n.DataModelType.KWIDCard,n.DataModelType.KWIdentity,n.DataModelType.KWPassport,n.DataModelType.KWPaymentMean_creditCard,n.DataModelType.KWPersonalWebsite,n.DataModelType.KWPhone,n.DataModelType.KWSecureNote,n.DataModelType.KWSocialSecurityStatement,n.DataModelType.KWWebSite];t.getExistingVaultItemUniqueIdentifiers=e=>{const t=new Set,r=Object.entries(e).filter((([e])=>(0,i.isDataKeyVaultItem)(e))).reduce(((e,[t,r])=>({...e,[t]:r})),{});for(const e of Object.values(r))e.forEach((e=>{if((0,n.isDataModelObject)(e)){const r=(0,c.getUniqueVaultItemIdentifier)(e);r&&t.add(r)}}));return t};const l=(e,t,r)=>{r.length&&t?e.SpaceId=r[0].teamId:e.SpaceId&&(e.SpaceId=r[0]?.teamId??s.PERSONAL_SPACE_ID)},p=async(e,t)=>((0,n.isCredential)(e)?e=await(0,u.prepareCredentialForImport)(e,t):(0,n.isNote)(e)&&(e=(0,u.prepareSecureNoteForImport)(e)),e);t.getImportableItemsFromUserFile=async(e,t,r,i)=>{const{applicationModulesAccess:s,storeService:m}=e,g=await(0,a.makeFeatureFlipsSelectors)(s).featureFlipsSelector(),{spaces:f}=m.getSpaceData(),S=g.onboarding_web_disablepersonalspace_dev??!1,h=[];let y=0,v=0;for(const e of t){d.includes(e.kwType)&&y++;const t=await p((0,o.sanitizeInputPersonalData)((0,u.convertImportable)(e)),i);if(l(t,S,f),(0,n.isCollection)(t)){const e=h.find((e=>(0,n.isCollection)(e)&&e.SpaceId===t.SpaceId&&e.Name===t.Name));if(e){e.VaultItems=[...e.VaultItems,...t.VaultItems];continue}}r.has((0,c.getUniqueVaultItemIdentifier)(t))?v++:h.push(t)}return{itemsToImport:h,importableItemCount:y,duplicateItemCount:v}}},20485:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.importPersonalDataItems=void 0;const n=r(53576),o=r(92233),i=r(72678),a=r(92310),s=r(78163),c=r(23136),u=r(88655),d=r(47437);t.importPersonalDataItems=async(e,t)=>{const{storeService:r,sessionService:l,localStorageService:p,applicationModulesAccess:m}=e,g=r.getState(),f=(0,c.getDebounceSync)(r,l);let S=0,h=0;const y=(0,d.getExistingVaultItemUniqueIdentifiers)(g.userSession.personalData),v=(0,u.makeCategoryIdMaps)(t,(0,i.personalDataSelector)(g)),{itemsToImport:E,importableItemCount:A,duplicateItemCount:_}=await(0,d.getImportableItemsFromUserFile)(e,t,y,v),T=(0,u.groupByType)(E);for(const[e,t]of T.entries())if((0,u.savePersonalDataItemsForImport)({storeService:r,sessionService:l,localStorageService:p,applicationModulesAccess:m},e,t),e!==n.DataModelType.KWCollection&&(S+=t.length),e===n.DataModelType.KWAuthentifiant&&(0,s.hasVaultAuditLogsFFActivated)(m)){const e=(0,a.currentTeamIdSelector)(g);h=t.filter((t=>t.SpaceId===e)).length,h>=1&&await(0,s.computeAndSendCSVImportActivityLog)(m,{domainUrl:null,importCount:h})}return f({immediateCall:!0},o.Trigger.Save),{successCount:S,totalCount:A,duplicateCount:_}}},88655:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.savePersonalDataItemsForImport=t.groupByType=t.prepareSecureNoteForImport=t.makeCategoryIdMaps=t.prepareCredentialForImport=t.convertImportable=void 0;const n=r(53576),o=r(86392),i=r(48313),a=r(56915),s=r(73566),c=r(85225),u=r(47408),d=r(23439),l=r(47975),p=r(78320),m=r(28207),g=r(70252);t.convertImportable=e=>({...e,Id:e.Id?e.Id:(0,p.generateItemUuid)(),AnonId:(0,p.generateItemUuid)(),SpaceId:e.SpaceId??"",LocaleFormat:e.LocaleFormat??n.Country.UNIVERSAL}),t.prepareCredentialForImport=async(e,t)=>({...e,Category:t.get(e.Category)??"",Strength:e.Password?await(0,l.evaluatePasswordStrength)(e.Password):0}),t.makeCategoryIdMaps=(e,t)=>{const r=new Map;for(const o of e)if((0,n.isCredentialCategory)(o)){const e=(0,d.getCategoryIdByName)(t,o.CategoryName);e&&r.set(o.Id,e)}return r},t.prepareSecureNoteForImport=e=>{const t=(0,u.getUnixTimestamp)();return{...e,CreationDatetime:t,LocaleFormat:n.Country.US,UserModificationDatetime:t,LastBackupTime:0,Title:e.Title??`Untitled - ${t.toLocaleString()}`,Content:e.Content??"",Category:e.Category??"noCategory",Secured:e.Secured??!1,Type:n.NoteTypes.includes(e.Type)?e.Type:"GRAY",Attachments:e.Attachments??[]}},t.groupByType=e=>{const t=new Map;for(const r of e){const e=t.get(r.kwType);e?e.push(r):t.set(r.kwType,[r])}return t},t.savePersonalDataItemsForImport=({storeService:e,sessionService:t,applicationModulesAccess:r},u,d)=>{if(!d.length)return;const l=e.getPersonalData(),p=d.reduce(((t,r)=>{let o=null;return(0,s.isChangeHistoryCandidate)(r)&&(o=(0,s.getUpdatedItemChangeHistory)({deviceName:e.getLocalSettings().deviceName??"",personalData:l,change:(0,c.makeUpdateChange)(r),userLogin:e.getUserLogin(),platformInfo:(0,a.platformInfoSelector)(e.getState())})),{changeHistories:[...t.changeHistories,...o?[o]:[]],credentialIds:[...t.credentialIds,...(0,n.isCredential)(r)?[r.Id]:[]]}}),{changeHistories:[],credentialIds:[]});e.dispatch((0,i.savePersonalDataItems)(d,u,p.changeHistories)),t.getInstance().user.persistPersonalData(),(async(e,t)=>{if(t.length)try{const{commands:r}=e.createClients().vaultItemsCrud;await r.emitTemporaryVaultItemEvent({ids:[...t],eventType:o.EventType.Created}),m.carbonEventHooks.iconsUpdates({type:"credentialUpdates",credentialIds:t})}catch(e){const t=new Error(`Failed to handle health & credential health updates with ${e}`);return void(0,g.sendExceptionLog)({error:t})}})(r,p.credentialIds)}},43691:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makeImportService=void 0;const n=r(53576),o=r(38250),i=r(56915),a=r(17825),s=r(3343),c=r(56242),u=r(29613),d=r(61655),l=r(20485),p=r(99474),m=r(32814);t.makeImportService=e=>{const{storeService:t}=e;return{previewPersonalDataArchive:e=>(async(e,t)=>{const r=(0,i.platformInfoSelector)(e.getState());switch(t.format){case o.ImportFormats.Csv:{const e=(0,p.getImportablePersonalData)(t.content,n.Country[r.country]);return 0===e.items.length?{success:!1,error:o.PreviewPersonalDataErrorType.InvalidFormat}:{success:!0,data:{items:e.items,headers:e.headers}}}case o.ImportFormats.Dash:{const r=(0,m.parseDashData)(t.content.data);return await(0,m.checkPassword)(e,r,t.password)?{success:!0,data:{items:(await(0,m.getSaveEventsFromDash)(e,r,t.password)).map((e=>({baseDataModel:e,rawData:{}}))),headers:[]}}:{success:!1,error:o.PreviewPersonalDataErrorType.BadPassword}}}(0,a.assertUnreachable)(t)})(t,e),canDoImport:()=>(0,u.isImportPersonalDataAvailableSelector)(t.getState()),importPersonalDataItems:t=>(0,l.importPersonalDataItems)(e,t),onNewState:e=>t.dispatch((0,d.notifyNewImportPersonalDataStateAction)(e)),waitReady:async()=>{await(0,c.importPersonalDataState$)()(t.getState$()).pipe((0,s.first)((e=>e.status!==o.ImportPersonalDataStateType.Processing))).toPromise()}}}},89586:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getFieldLevelProcessor=void 0;const n=r(38250),o=r(85803),i=(e,t)=>"title"===e?null:t,a=(e,t)=>{switch(e){case"reprompt":if("0"===t)return null;break;case"name":if("--"===t)return null;break;case"type":return null}return t};t.getFieldLevelProcessor=e=>{switch(e){case n.ImportSource.Safari:return i;case n.ImportSource.Bitwarden:return a;case n.ImportSource.Lastpass:return o.fieldProcessorForLastPass;default:return null}}},62754:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getItemTypeProcessor=void 0;const n=r(38250),o=r(85803);t.getItemTypeProcessor=e=>e===n.ImportSource.Lastpass?o.itemTypeProcessorForLastPass:null},92522:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseCustomKeeperCredentialData=t.getKeeperImportHeaders=void 0,t.getKeeperImportHeaders=e=>{const t=["Folder","Title","Login","Password","Website Address","Notes","Shared Folder"],r=Math.max(0,e-t.length);return r&&t.push(...[...Array(r).keys()].map(((e,t)=>`Custom ${t+1}`))),t},t.parseCustomKeeperCredentialData=(e,t)=>{Object.keys(e).forEach((r=>{const n=e[r];"TFC:Keeper"===n?delete e[r]:"string"==typeof n&&n.startsWith("otpauth://")&&(t.OtpUrl=n,delete e[r])}))}},85803:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fieldProcessorForLastPass=t.itemTypeProcessorForLastPass=t.processAndPushLastPassNote=t.parseLastPassSecureNote=t.LPNoteTypeField=t.LastPassNoteType=t.LAST_PASS_SECURE_NOTE_URL=void 0;const n=r(77672),o=r(53576),i=r(97437),a=r(38959);var s,c;t.LAST_PASS_SECURE_NOTE_URL="http://sn",function(e){e.BankAccountType="Bank Account",e.PaymentCardType="Credit Card"}(t.LastPassNoteType||(t.LastPassNoteType={})),t.LPNoteTypeField={NoteType:"NoteType"},function(e){e.BankName="Bank Name",e.AccountType="Account Type",e.RoutingNumber="Routing Number",e.AccountNumber="Account Number",e.SWIFTCode="SWIFT Code",e.IBANNumber="IBAN Number",e.Pin="Pin",e.BranchAddress="Branch Address",e.BranchPhone="BranchPhone",e.Notes="Notes"}(s||(s={})),function(e){e.NameOnCard="Name on Card",e.Type="Type",e.Number="Number",e.SecurityCode="Security Code",e.StartDate="Start Date",e.ExpirationDate="Expiration Date",e.Notes="Notes",e.Language="Language"}(c||(c={})),t.parseLastPassSecureNote=e=>{const r={};try{switch(e.split("\n").forEach((e=>{const[t,n]=e.split(":");r[t]=n})),r.NoteType){case"Bank Account":return{type:"Bank Account",data:{BankAccountName:r["Bank Name"],BankAccountOwner:"",BankAccountIBAN:r["IBAN Number"]?r["IBAN Number"]:r["Account Number"],BankAccountBIC:r["SWIFT Code"]?r["SWIFT Code"]:r["Routing Number"],BankAccountBank:"",kwType:o.DataModelType.KWBankStatement}};case"Credit Card":{const e=r["Expiration Date"];let i,a;if(e){const[t,r]=e.split(",");i=`${(0,n.getMonth)(new Date(`${t} 1`))+1}`,i=i.length<=2?i:"",a=4!==r.length||isNaN(r)?"":r}const s={CardNumber:r.Number,OwnerName:r["Name on Card"],SecurityCode:r["Security Code"],ExpireMonth:i,ExpireYear:a,CCNote:r.Notes,kwType:o.DataModelType.KWPaymentMean_creditCard};delete r[t.LPNoteTypeField.NoteType],delete r["Expiration Date"],delete r.Language,r["Payment Type"]=r.Type,delete r[t.LPNoteTypeField.NoteType];const c=Object.keys(s),u=Object.values(s);return Object.keys(r).forEach((e=>{(c.includes(e)||u.includes(r[e]))&&delete r[e]})),{type:"Credit Card",data:{...r,...s}}}default:return null}}catch{return null}},t.processAndPushLastPassNote=(e,r,n,o,s)=>{if(e.url?.includes(t.LAST_PASS_SECURE_NOTE_URL)){delete e.url;const c=(0,t.parseLastPassSecureNote)(e.extra),u="Bank Account"===c?.type?i.BANK_ACCOUNT_HEADERS:"Credit Card"===c?.type?i.PAYMENT_CARD_HEADERS:i.SECURE_NOTES_HEADERS;switch(Object.keys(c?.data??{}).forEach((e=>{const t=Object.keys(u).find((t=>u[t].has(e.toLocaleLowerCase())));!s.has(e)&&e&&s.set(e,{original:e,matched:t??""})})),c?.type){case"Bank Account":{const t={baseDataModel:(0,a.buildBankAccountObj)(c.data,r,s),rawData:e};return void o.bankAccounts.push(t)}case"Credit Card":{const t={baseDataModel:(0,a.buildPaymentCardObj)(c.data,r,s,n),rawData:e};return void o.paymentCards.push(t)}default:{const t={baseDataModel:(0,a.buildNoteObj)(e,r,s),rawData:e};return void o.notes.push(t)}}}},t.itemTypeProcessorForLastPass=e=>{if(e.url?.includes(t.LAST_PASS_SECURE_NOTE_URL)){const r=e.extra.split("\n");let n="";for(let e=0;e<r.length;e++){const[o,i]=r[e]?r[e].split(":"):[];o===t.LPNoteTypeField.NoteType&&(n=i)}switch(n){case"Bank Account":return i.SupportedVaultTypes.BANK_ACCOUNT;case"Credit Card":return i.SupportedVaultTypes.PAYMENT_CARD;default:return i.SupportedVaultTypes.NOTE}}return null},t.fieldProcessorForLastPass=(e,t)=>{switch(e){case"fav":if(!t||t.includes("0"))return null;break;case"grouping":if(!t||t.includes("(none)"))return null}return t}},99474:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getImportablePersonalData=t.parseCSV=void 0;const n=r(21178),o=r(38250),i=r(92522),a=r(85803),s=r(38959),c=r(97437),u=r(10770);function d(e,t,r,n){const o={baseDataModel:(0,s.buildNoteObj)(e,t,r),rawData:e};n.notes.push(o)}function l(e,t,r,n){const o={baseDataModel:(0,s.buildBankAccountObj)(t,e,n),rawData:t};r.bankAccounts.push(o)}function p(e,t,r,n,o){const i={baseDataModel:(0,s.buildPaymentCardObj)(t,e,o,r),rawData:t};n.paymentCards.push(i)}const m="otpauth://totp/?secret=",g=/^otpauth:\/\/.*/;function f(e,t,r,i,a){const c={baseDataModel:(0,s.buildCredentialObj)(e,t,r,i),rawData:e};c.baseDataModel.Category&&(t===o.ImportSource["1Password"]&&(c.baseDataModel.Category=c.baseDataModel.Category.replaceAll(";",",")),c.baseDataModel.Category.split(",").forEach((t=>{const r=a.collections.find((e=>e.baseDataModel.Name===t));if(r)r.baseDataModel.VaultItems.push({Id:c.baseDataModel.Id,Type:c.baseDataModel.kwType});else{const r={Name:t,baseDataModel:(0,u.getNewCollection)({name:t,vaultItems:[],spaceId:""}),rawData:e};a.collections.push(r),r.baseDataModel.VaultItems=[...r.baseDataModel.VaultItems,{Id:c.baseDataModel.Id,Type:c.baseDataModel.kwType}]}}))),c.baseDataModel.OtpUrl&&!g.test(c.baseDataModel.OtpUrl)&&(c.baseDataModel.OtpUrl=m+c.baseDataModel.OtpUrl);const d=new n.ParsedURL(c.baseDataModel.Url);c.baseDataModel.Url&&d.isUrlValid()&&(c.baseDataModel.Url=d.getPIIStrippedURL()),a.credentials.push(c)}const S=(e,t,r,n)=>{const i={credentials:[],notes:[],bankAccounts:[],paymentCards:[],collections:[]},u=new Map;for(let m=0;m<e.length;m++){const g=e[m].reduce(((e,r,n)=>(e[t[n]]=r,e)),{}),S=(0,s.determineBestItemType)(g,r),h=(0,s.getHeadersAndIndexMap)(t,S),y=new Map;if(h.forEach((e=>{(!u.has(e.original)||!u.get(e.original)?.matched&&e.matched)&&u.set(e.original,e),e.matched&&y.set(e.original,e)})),[c.SupportedVaultTypes.BANK_ACCOUNT,c.SupportedVaultTypes.NOTE,c.SupportedVaultTypes.PAYMENT_CARD].includes(S)&&r===o.ImportSource.Lastpass)(0,a.processAndPushLastPassNote)(g,r,n,i,y);else switch(S){case c.SupportedVaultTypes.CREDENTIAL:f(g,r,y,n,i);break;case c.SupportedVaultTypes.PAYMENT_CARD:p(r,g,n,i,y);break;case c.SupportedVaultTypes.BANK_ACCOUNT:l(r,g,i,y);break;case c.SupportedVaultTypes.NOTE:default:d(g,r,y,i)}}return{...i,headers:[...u.values()]}};function h(e,t,r){const n={credentials:[],notes:[],paymentCards:[],bankAccounts:[],headers:[],collections:[]};if(!e)return n;const{csvHead:a,csvRows:c}=function(e,t){const r=/(,|\r?\n|\r|^)(?:"([^"]*(?:""[^"]*)*)"|([^,\r\n]*))/gi,n=[[]];let a;for(;a=r.exec(e.trim());)a[1].length&&","!==a[1]&&n.push([]),n[n.length-1].push(void 0!==a[2]?a[2].replace(new RegExp('^"|"$|"(?=,")|(?<=",)"',"gi"),'"'):a[3]);if(t===o.ImportSource.Keeper){const e=n.reduce(((e,t)=>Math.max(e,t.length)),0);n.unshift((0,i.getKeeperImportHeaders)(e))}const[s,...c]=n;return{csvHead:s,csvRows:c}}(e,t),u=a.map((e=>e.toLowerCase()));return c.length&&(0,s.areHeadersValid)(u)?S(c,u,t,r):n}t.parseCSV=h,t.getImportablePersonalData=(e,t)=>{const r=h(e.data,e.importSource,t),{headers:n,...o}=r;return{headers:n,items:Object.values(o).flat()}}},32814:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getSaveEventsFromDash=t.getXmlData=t.checkPassword=t.parseDashData=void 0;const n=r(53576),o=r(80469),i=r(53628),a=r(56668),s=r(72365),c=r(61797),u=r(95623),d=r(70252),l=r(78320),p=e=>new RegExp(`-+\\s+${e} BEGIN\\s+-+\n(.+)\n-+\\s+${e} END`);t.parseDashData=e=>{const[t,r]=["Id","Data"].map(p).map((t=>t.exec(e))).map((e=>e?.[1]));return{ids:t?.split(";")??[],encryptedData:r??""}},t.checkPassword=async(e,t,r)=>{const n=(0,s.makeDataEncryptorService)(e);n.setInstance({raw:r},"");try{return(0,a.deflatedUtf8ToUtf16)(await n.getInstance().decrypt(t.encryptedData)),!0}catch(e){const r=`[import] - checkPassword: ${e}, ${t.encryptedData}`,n=new Error(r);(0,d.sendExceptionLog)({error:n}),(0,u.logError)(n)}return!1},t.getXmlData=async(e,t,r)=>{const n=(0,s.makeDataEncryptorService)(e);n.setInstance({raw:r},"");const o=await n.getInstance().decrypt(t.encryptedData),i=(0,a.deflatedUtf8ToUtf16)(o),u=await(0,c.parseDashlaneXml)(i);return Array.isArray(u)?u:[u]},t.getSaveEventsFromDash=async(e,r,a)=>{const s={},c=(await(0,t.getXmlData)(e,r,a)).map((e=>(0,i.fixPersonalDataItemFromExternalSource)((0,o.fixKwType)(e)))).map((e=>{const t=(0,l.generateItemUuid)();return s[e.Id]=t,{...e,Id:t}}));return c.forEach((e=>{(0,n.isCollection)(e)&&e.VaultItems.forEach((e=>{e.Id=s[e.Id]??e.Id}))})),c}},97437:(e,t)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.TYPE_MAPPINGS=t.TYPE_HEADERS=t.HEADER_MAPPINGS=t.BANK_ACCOUNT_HEADERS=t.PAYMENT_CARD_HEADERS=t.CREDENTIAL_HEADERS=t.SECURE_NOTES_HEADERS=t.SupportedVaultTypes=void 0,function(e){e.CREDENTIAL="credentials",e.NOTE="notes",e.PAYMENT_CARD="paymentCards",e.BANK_ACCOUNT="bankAccounts",e.COLLECTION="collections"}(r=t.SupportedVaultTypes||(t.SupportedVaultTypes={})),t.SECURE_NOTES_HEADERS={Title:new Set(["title","name"]),Content:new Set(["note","notes","comments","extra","content"])},t.CREDENTIAL_HEADERS={Title:new Set(["title","name","account","site name"]),Login:new Set(["username","login","login_username","login name","user name"]),Url:new Set(["url","website","domain","login_url","login url","login_uri","web site","website address"]),Email:new Set(["email"]),Password:new Set(["password","login_password"]),OtpUrl:new Set(["first one-time password","login_otp","login_totp","otp","otpauth","otpurl","otpsecret","totp"]),Note:new Set(["note","notes","comments","extra"]),Category:new Set(["category","grouping","tags","folders","folder","tag","collection","collections"])},t.PAYMENT_CARD_HEADERS={CardNumber:new Set(["number","cardnumber","cc_number"]),CCNote:new Set(["notes","ccnote","note"]),OwnerName:new Set(["name on card","ownername","account_name"]),SecurityCode:new Set(["security code","securitycode","code"]),ExpireMonth:new Set(["exp_month","expiremonth","expiration_month"]),ExpireYear:new Set(["exp_year","expireyear","expiration_year"]),Name:new Set(["name"])},t.BANK_ACCOUNT_HEADERS={BankAccountName:new Set(["bank name","bankaccountname","account_name"]),BankAccountIBAN:new Set(["iban number","account number","account_number","bankaccountiban"]),BankAccountBIC:new Set(["swift code","routing number","routing_number","bankaccountbic"]),BankAccountOwner:new Set(["account_holder"]),BankAccountBank:new Set(["issuing_bank"]),LocaleFormat:new Set(["country"])},t.HEADER_MAPPINGS={[r.CREDENTIAL]:t.CREDENTIAL_HEADERS,[r.NOTE]:t.SECURE_NOTES_HEADERS,[r.PAYMENT_CARD]:t.PAYMENT_CARD_HEADERS,[r.BANK_ACCOUNT]:t.BANK_ACCOUNT_HEADERS,[r.COLLECTION]:{}},t.TYPE_HEADERS=new Set(["type","item type"]),t.TYPE_MAPPINGS={[r.NOTE]:["securenote","note","secure note"],[r.CREDENTIAL]:["password","login","credential"],[r.BANK_ACCOUNT]:["bankaccount","bank"],[r.PAYMENT_CARD]:["paymentcard","payment_card","creditcard","debitcard"],[r.COLLECTION]:[]}},38959:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.areHeadersValid=t.determineBestItemType=t.getHeadersAndIndexMap=t.buildCredentialObj=t.buildBankAccountObj=t.buildPaymentCardObj=t.buildNoteObj=t.reduceVaultObj=t.constructBankAccount=t.constructPaymentCard=t.constructSecureNote=t.constructCredentialContent=t.formatCredentialData=t.buildNoteContent=void 0;const n=r(53576),o=r(21178),i=r(38250),a=r(9763),s=r(23439),c=r(35834),u=r(49293),d=r(8639),l=r(97437),p=r(62754),m=r(89586),g=r(92522),f=(e,t)=>{for(const r in e)t.includes(r)||delete e[r]};t.buildNoteContent=(e,t,r,o,i)=>{let a="";if((0,n.isCredential)(e))a=e.Note??"";else if((0,n.isNote)(e))e.Note&&(e.Content=e.Note,delete e.Note),a=e.Content;else{if(!(0,n.isPaymentCard)(e))return;a=e.CCNote}const s=!!a;let c=!1;const u={...e,...r};for(const e in u)o.includes(e)||t.get(e)?.matched||!u[e]||(i?i(e.toLocaleLowerCase(),u[e]):u[e])&&(a+=`${s&&!c?"\n\n\n":"\n"}${e}: ${u[e]}`,c=!0);a=a.trim(),(0,n.isCredential)(e)?e.Note=a:(0,n.isNote)(e)?e.Content=a:(0,n.isPaymentCard)(e)&&(e.CCNote=a)},t.formatCredentialData=e=>{let t=e.Url?.trim()??"";const r=e.Url?.split(",")??[""];if(r.length>1&&new o.ParsedURL(r[0]).isUrlValid()&&r.slice(1).some((e=>new o.ParsedURL(e).isUrlValid()))){const[r,...i]=e.Url?.split(",")??[];t=r.trim(),e.LinkedServices={associated_domains:[]},i.forEach((t=>{const r=new o.ParsedURL(t.trim());r.isUrlValid()&&e.LinkedServices?.associated_domains.push({domain:r.getPIIStrippedURL(),source:n.LinkedWebsiteSource.Manual})}))}const i=new o.ParsedURL(t);e.Url=i.isUrlValid()?t:"";const a=new o.ParsedURL(e.Title?.trim());e.Title&&!a.isUrlValid()||(e.Title=i.getRootDomain()??"")},t.constructCredentialContent=(e,t,r)=>({Title:"",Email:"",Login:"",Password:"",Note:"",...e,...(0,a.createBaseCredentialModel)(t),...(0,s.getUrlFields)(e.Url??"",!0),SpaceId:r??"",SubdomainOnly:!1,SecondaryLogin:"",Category:"",AutoLogin:!0,AutoProtected:!1,Strength:0}),t.constructSecureNote=(e,t)=>(0,u.noteFormatter)({content:e.Content||"",title:e.Title||"",category:"",secured:!1,type:n.NoteTypes[0],spaceId:t||""}),t.constructPaymentCard=(e,t)=>(0,c.getNewPaymentCard)({ownerName:e.OwnerName??"",cardName:e.Name??"",cardNumber:e.CardNumber??"",securityCode:e.SecurityCode??"",expireMonth:e.ExpireMonth??"",expireYear:e.ExpireYear??"",...e,spaceId:t}),t.constructBankAccount=(e,t,r)=>(0,d.getNewBankAccount)({name:e.BankAccountName??"",owner:e.BankAccountOwner??"",IBAN:e.BankAccountIBAN??"",BIC:e.BankAccountBIC??"",bank:e.BankAccountBank??"",country:t,...e,spaceId:r??""}),t.reduceVaultObj=(e,t,r,n,o)=>Object.entries(e).reduce(((e,[t,o])=>{const i=n.get(t)?.matched;return n.has(t)&&i&&(e[i]=r?r(t,"string"==typeof o?o:""):o),e}),t({},o)),t.buildNoteObj=(e,r,n)=>{const o=Object.keys({Title:"",Content:"",Category:"",Secured:"",Type:"",LocaleFormat:"",AnonId:"",SpaceId:"",kwType:"",Id:"",LastBackupTime:"",CreationDate:"",UpdateDate:"",limitedPermissions:"",CreationDatetime:"",UserModificationDatetime:"",LastUse:"",Attachments:""}),i=(0,m.getFieldLevelProcessor)(r),a=(0,t.reduceVaultObj)(e,t.constructSecureNote,i,n);return(0,t.buildNoteContent)(a,n,e,o,i),f(a,o),a},t.buildPaymentCardObj=(e,r,n,o)=>{const i=Object.keys({Name:"",CardNumber:"",CardNumberLastDigits:"",OwnerName:"",SecurityCode:"",ExpireMonth:"",ExpireYear:"",StartMonth:"",StartYear:"",IssueNumber:"",Color:"",Bank:"",CCNote:"",Type:"",LocaleFormat:"",AnonId:"",SpaceId:"",kwType:"",Id:"",LastBackupTime:"",CreationDatetime:"",UserModificationDatetime:"",LastUse:"",Attachments:""}),a=(0,m.getFieldLevelProcessor)(r),s=(0,t.reduceVaultObj)(e,t.constructPaymentCard,a,n,o);return(0,t.buildNoteContent)(s,n,e,i,a),f(s,i),s},t.buildBankAccountObj=(e,r,n)=>{const o=Object.keys({BankAccountName:"",BankAccountOwner:"",BankAccountIBAN:"",BankAccountBIC:"",BankAccountBank:"",LocaleFormat:"",AnonId:"",SpaceId:"",kwType:"",Id:"",LastBackupTime:"",CreationDatetime:"",UserModificationDatetime:"",LastUse:"",Attachments:""}),i=(0,m.getFieldLevelProcessor)(r),a=(0,t.reduceVaultObj)(e,t.constructBankAccount,i,n);return f(a,o),a},t.buildCredentialObj=(e,r,n,o)=>{const a=Object.keys({Title:"",Email:"",Login:"",SecondaryLogin:"",Password:"",Strength:"",Category:"",Url:"",UseFixedUrl:"",TrustedUrlGroup:"",LocaleFormat:"",AnonId:"",SpaceId:"",kwType:"",Id:"",LastBackupTime:"",CreationDatetime:"",LastUse:"",Note:"",SubdomainOnly:"",AutoLogin:"",AutoProtected:"",OtpSecret:"",UserSelectedUrl:"",Checked:"",Status:"",SharedObject:"",ModificationDatetime:"",NumberUse:"",Type:"",Server:"",Port:"",Alias:"",SID:"",ConnectionOptions:"",domainIcon:"",limitedPermissions:"",LinkedServices:"",UserModificationDatetime:"",Attachments:"",OtpUrl:""}),s=(0,m.getFieldLevelProcessor)(r),c=(0,t.reduceVaultObj)(e,t.constructCredentialContent,s,n,o);return r===i.ImportSource.Keeper&&(0,g.parseCustomKeeperCredentialData)(e,c),(0,t.buildNoteContent)(c,n,e,a,s),f(c,a),(0,t.formatCredentialData)(c),c},t.getHeadersAndIndexMap=(e,t)=>{const r=((e,t)=>{const r=Object.keys(t),n={};return e.forEach(((e,o)=>{const i=r.find((r=>t[r].has(e)));n[i??e]={supported:!!i,index:o}})),n})(e,l.HEADER_MAPPINGS[t]),n=Object.entries(r).reduce(((e,[t,r])=>({...e,[r.index]:r.supported?t:""})),{});return e.map(((e,t)=>({original:e,matched:n[t]??""})))},t.determineBestItemType=(e,t)=>{let r=null;const n=(0,p.getItemTypeProcessor)(t);if(n&&(r=n(e)),!r){for(const t in e)if(l.TYPE_HEADERS.has(t)&&(r=Object.keys(l.TYPE_MAPPINGS).find((r=>l.TYPE_MAPPINGS[r]?.includes(e[t].toLocaleLowerCase()))),r))break;if(!r){const t=Object.keys(e).map((e=>e.toLocaleLowerCase())),n={};Object.entries(l.HEADER_MAPPINGS).forEach((([r,o])=>{Object.values(o).forEach((o=>{n[r]=(n[r]||0)+[...o].filter((r=>t.includes(r)&&e[r])).length}))})),r=Object.keys(n).reduce(((e,t)=>n[e]>n[t]?e:t))}}return r||l.SupportedVaultTypes.NOTE},t.areHeadersValid=e=>{if(!e.length)return!1;const t=Object.values(l.HEADER_MAPPINGS);return Object.values(t).reduce(((e,t)=>[...e,...Object.values(t).map((e=>Array.from(e)))]),[]).flat().some((t=>e.includes(t)))}},61655:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.notifyNewImportPersonalDataStateAction=t.NOTIFY_NEW_PERSONAL_DATA_STATE=void 0,t.NOTIFY_NEW_PERSONAL_DATA_STATE="NOTIFY_NEW_PERSONAL_DATA_STATE",t.notifyNewImportPersonalDataStateAction=e=>({type:t.NOTIFY_NEW_PERSONAL_DATA_STATE,newState:e})},36784:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ImportDataStateReducer=void 0;const n=r(38250),o=r(61655);t.ImportDataStateReducer=(e,t)=>t.type===o.NOTIFY_NEW_PERSONAL_DATA_STATE?{state:t.newState}:e??{state:{status:n.ImportPersonalDataStateType.Idle}}},15171:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.updateLinkedWebsitesHandler=t.areStringListsEquivalent=void 0;const n=r(53576),o=r(95623),i=r(70252),a=r(19736),s=r(88779),c=r(16298),u=r(6205);t.areStringListsEquivalent=(e,t)=>e.length===t.length&&e.sort().join("")===t.sort().join("");const d=(e,t,r)=>{var o;return[...(e.LinkedServices?.associated_domains??[]).filter((e=>r.includes(e.domain))),...(o=t,r.filter((e=>!o.includes(e))).map((e=>({domain:e,source:n.LinkedWebsiteSource.Manual}))))]};t.updateLinkedWebsitesHandler=async function(e,r){const{storeService:n,sessionService:l,eventLoggerService:p,applicationModulesAccess:m}=e,g=n.getState(),f=(0,a.credentialSelector)(g,r.credentialId),S=(0,u.getUserAddedLinkedWebsiteDomains)(f),h=(e=>[...new Set(e)].filter(Boolean))(r.updatedLinkedWebsitesDomainList);if((0,t.areStringListsEquivalent)(S,h))return{success:!0};const y=0===h.length?[]:d(f,S,h),v={...f.LinkedServices,associated_domains:y},E={id:r.credentialId,update:{linkedServices:v}};try{return await(0,s.updateCredential)({storeService:n,sessionService:l,eventLoggerService:p,applicationModulesAccess:m},E),{success:!0}}catch(e){const t=new Error(`[LinkedWebsites] - updateLinkedWebsitesHandler: ${e}`);return(0,o.logError)(t),(0,i.sendExceptionLog)({error:t}),{success:!1,error:c.UpdateLinkedWebsitesError.CredentialUpdateError}}}},6205:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getUserAddedLinkedWebsitesRootDomains=t.getUserAddedLinkedWebsiteDomains=t.getDashlaneDefinedLinkedWebsites=t.populateDashlaneDefinedLinkedWebsitesIndex=t.reduceLinkedDomainsLists=t.fromObjectToArray=void 0;const n=r(57282),o=r(29181),i=r(21405),a=r(21178);function s(e){const t=[];return Object.keys(e).forEach((r=>{t.push([r].concat(e[r]))})),t}t.fromObjectToArray=s;const c=(e,t)=>{const r=[],n=[];e.forEach((e=>{return o=t,e.some((e=>o.includes(e)))?r.push(e):n.push(e);var o}));const o=r.concat([t]).flat();return n.concat([o])};function u(e){const t={};return e.forEach((e=>{e.forEach((r=>{t[r]=e}))})),t}t.reduceLinkedDomainsLists=(e,t,r)=>e.concat(t,r).reduce(c,[]),t.populateDashlaneDefinedLinkedWebsitesIndex=u;const d=u((0,t.reduceLinkedDomainsLists)(n,s(i),s(o)).map((e=>[...new Set(e)])));t.getDashlaneDefinedLinkedWebsites=function(e){const t=new a.ParsedURL(e).getRootDomain();return t?d[t]||[t]:[]},t.getUserAddedLinkedWebsiteDomains=e=>(e.LinkedServices?.associated_domains??[]).map((e=>e.domain)).filter(Boolean)??[],t.getUserAddedLinkedWebsitesRootDomains=e=>(0,t.getUserAddedLinkedWebsiteDomains)(e).map((e=>new a.ParsedURL(e).getRootDomain()))},16298:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UpdateLinkedWebsitesError=void 0,function(e){e.CredentialUpdateError="credentialUpdateError"}(t.UpdateLinkedWebsitesError||(t.UpdateLinkedWebsitesError={}))},81911:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const n=r(18665),o=r(85569),i=r(37215);t.config={commands:{addPasskey:{handler:i.addPasskeyHandler},updatePasskey:{handler:i.updatePasskeyHandler},deletePasskey:{handler:i.deletePasskeyHandler}},queries:{getPasskey:{selector:n.viewedPasskeySelector},getPasskeys:{selector:n.viewedQueriedPasskeysSelector},getPasskeysForDomain:{selector:n.viewedQueriedPasskeysForDomainSelector}},liveQueries:{livePasskey:{operator:o.getPasskey$},livePasskeys:{operator:o.passkeys$}}}},64801:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addPasskeyHandler=t.getNewPasskey=void 0;const n=r(92233),o=r(53576),i=r(23136),a=r(48313),s=r(47408),c=r(78320),u=r(70252),d=r(13675);function l(e){const t=(0,s.getUnixTimestamp)();return{kwType:"KWPasskey",Id:(0,c.generateItemUuid)(),LastBackupTime:0,LastUse:t,LocaleFormat:o.Country.UNIVERSAL,AnonId:(0,c.generateItemUuid)(),SpaceId:"",CreationDatetime:t,UserModificationDatetime:t,Counter:0,CredentialId:e.credentialId,ItemName:e.itemName,KeyAlgorithm:e.keyAlgorithm,Note:e.note,PrivateKey:e.privateKey,RpId:e.rpId,RpName:e.rpName,UserDisplayName:e.userDisplayName,UserHandle:e.userHandle}}t.getNewPasskey=l,t.addPasskeyHandler=async function(e,t){try{return await async function({applicationModulesAccess:e,storeService:t,sessionService:r},n){if(!t.isAuthenticated())throw new Error("No session available to savePasskey");const o=l((0,d.sanitizeInputPersonalData)(n));if(!o.SpaceId){const r=await(0,i.getDefaultSpaceId)(e,t);o.SpaceId=r}t.dispatch((0,a.savePersonalDataItem)(o,o.kwType)),r.getInstance().user.persistPersonalData()}(e,t),(0,i.getDebounceSync)(e.storeService,e.sessionService)({immediateCall:!0},n.Trigger.Save),{success:!0}}catch(e){return(0,u.sendExceptionLog)({error:e}),{success:!1}}}},20308:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.deletePasskeyHandler=void 0;const n=r(92233),o=r(18665),i=r(93301),a=r(23136),s=r(45291),c=r(70252);t.deletePasskeyHandler=function(e,{id:t}){const r=(({storeService:e},t)=>{const r=e.getState();try{if(!e.isAuthenticated())return{success:!1,error:{code:i.DeletePasskeyErrorCode.NOT_AUTHORIZED}};const n=(0,o.passkeySelector)(r,t);if(!n)return{success:!1,error:{code:i.DeletePasskeyErrorCode.NOT_FOUND}};const a=(0,s.removePersonalItem)(n.kwType,n.Id,null);return e.dispatch(a),{success:!0}}catch(e){const t=new Error(`[Passkeys] - deletePasskey: ${e}`);return(0,c.sendExceptionLog)({error:t}),{success:!1,error:{code:i.DeletePasskeyErrorCode.INTERNAL_ERROR}}}})(e,t);return r.success&&(0,a.getDebounceSync)(e.storeService,e.sessionService)({immediateCall:!0},n.Trigger.Save),Promise.resolve(r)}},37215:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(64801),t),o(r(89979),t),o(r(20308),t)},89979:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.updatePasskeyHandler=t.getUpdatedPasskey=t.getPasskeyModifiedProperties=void 0;const n=r(92233),o=r(18665),i=r(23136),a=r(48313),s=r(47408),c=r(70252),u=r(13675);function d(e,r){const n=(0,o.passkeySelector)(e,r.id);if(!n)throw new Error("[updatePasskey]: unable to find passkey to update.");return{...n,...(0,t.getPasskeyModifiedProperties)(r,n)}}t.getPasskeyModifiedProperties=(e,t)=>{const r=(0,s.getUnixTimestamp)();return{Counter:e.counter??t.Counter,Note:e.note??t.Note,SpaceId:e.spaceId??t.SpaceId,ItemName:e.itemName??t.ItemName,LastUse:r}},t.getUpdatedPasskey=d,t.updatePasskeyHandler=function(e,t){try{const r=function({storeService:e,sessionService:t},r){if(!e.isAuthenticated())throw new Error("No session available to updatePasskey");const n=d(e.getState(),(0,u.sanitizeInputPersonalData)(r));return e.dispatch((0,a.savePersonalDataItem)(n,n.kwType)),t.getInstance().user.persistPersonalData(),{success:!0}}(e,t);return r.success?((0,i.getDebounceSync)(e.storeService,e.sessionService)({immediateCall:!0},n.Trigger.Save),Promise.resolve({success:!0})):Promise.resolve(r)}catch(e){return(0,c.sendExceptionLog)({error:e}),Promise.resolve({success:!1})}}},85569:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getPasskey$=t.passkeys$=void 0;const n=r(18948),o=r(3343),i=r(55220),a=r(18665);t.passkeys$=(0,i.getLivePersonalInfo)(a.getLivePasskeysSelector),t.getPasskey$=e=>{const t=(0,a.getViewedPasskeySelector)(e);return(0,n.pipe)((0,o.map)(t),(0,o.distinctUntilChanged)())}},62900:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getPasskeyMappers=void 0;const n=r(83539);t.getPasskeyMappers=()=>({id:e=>e.Id,itemName:e=>e.ItemName,lastUse:n.lastUseMapper,rpId:e=>e.RpId,spaceId:e=>e.SpaceId,userDisplayName:e=>e.UserDisplayName})},96664:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.passkeyMatch=t.searchGetters=void 0;const n=r(64455),o=r(82234);t.searchGetters=[(0,o.stringProp)("RpId"),(0,o.stringProp)("RpName"),(0,o.stringProp)("CredentialId")],t.passkeyMatch=(0,n.match)(t.searchGetters)},18665:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.viewedQueriedPasskeysForDomainSelector=t.queryPasskeysByDomainSelector=t.getPasskeysByFullDomainSelector=t.getViewedPasskeySelector=t.viewedPasskeySelector=t.getLivePasskeysSelector=t.viewedQueriedPasskeysSelector=t.queryPasskeysSelector=t.passkeyMappersSelector=t.passkeySelector=t.passkeysSelector=void 0;const n=r(16516),o=r(21178),i=r(96664),a=r(40200),s=r(24589),c=r(63566),u=r(97006),d=r(49551),l=r(32034),p=r(62900),m=e=>e.userSession.personalData.passkeys;t.passkeysSelector=m,t.passkeySelector=(e,t)=>{const r=m(e);return(0,d.findDataModelObject)(t,r)},t.passkeyMappersSelector=e=>(0,p.getPasskeyMappers)();const g=()=>i.passkeyMatch;t.queryPasskeysSelector=(0,s.getQuerySelector)(t.passkeysSelector,g,t.passkeyMappersSelector),t.viewedQueriedPasskeysSelector=(0,n.compose)((0,c.viewListResults)(a.listView),t.queryPasskeysSelector),t.getLivePasskeysSelector=(0,u.makeLiveSelectorGetter)(t.passkeysSelector,(()=>a.listView),g,t.passkeyMappersSelector),t.viewedPasskeySelector=(e,r)=>{const n=(0,t.passkeySelector)(e,r);return(0,a.detailView)(n)},t.getViewedPasskeySelector=e=>{const r=(0,l.createSelector)(t.passkeysSelector,(t=>(0,d.findDataModelObject)(e,t)));return(0,l.createSelector)(r,a.detailView)},t.getPasskeysByFullDomainSelector=e=>(0,l.createSelector)(t.passkeysSelector,(t=>((e,t)=>e.filter((e=>{const r=new o.ParsedURL(e.RpId).getHostname(),n=new o.ParsedURL(t).getHostname();return n===r||n.endsWith(`.${r}`)})))(t,e))),t.queryPasskeysByDomainSelector=e=>(0,s.getQuerySelector)((0,t.getPasskeysByFullDomainSelector)(e),g,t.passkeyMappersSelector),t.viewedQueriedPasskeysForDomainSelector=(e,r)=>{const n=(0,t.queryPasskeysByDomainSelector)(r.domain)(e,r);return(0,c.viewListResults)(a.listView)(n)}},93301:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DeletePasskeyErrorCode=void 0,function(e){e[e.NOT_AUTHORIZED=0]="NOT_AUTHORIZED",e[e.NOT_FOUND=1]="NOT_FOUND",e[e.INTERNAL_ERROR=2]="INTERNAL_ERROR"}(t.DeletePasskeyErrorCode||(t.DeletePasskeyErrorCode={}))},40200:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.listView=t.itemView=t.detailView=void 0;const n=r(82043),o=e=>({credentialId:e.CredentialId,counter:e.Counter,itemName:e.ItemName,keyAlgorithm:e.KeyAlgorithm,note:e.Note,privateKey:e.PrivateKey,rpId:e.RpId,rpName:e.RpName,userDisplayName:e.UserDisplayName,userHandle:e.UserHandle});t.detailView=e=>({...(0,n.dataModelDetailView)(e),...o(e)}),t.itemView=e=>({...(0,n.dataModelItemView)(e),...o(e)}),t.listView=e=>e.map(t.itemView)},68728:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const n=r(83449),o=r(47205),i=r(58695);t.config={commands:{saveGeneratedPassword:{handler:o.saveGeneratedPasswordHandler}},queries:{getPasswordHistory:{selector:n.viewedQueriedPasswordHistorySelector},getPasswordHistoryPage:{selector:n.passwordHistoryPageSelector},getPasswordHistoryPaginationToken:{selector:n.passwordHistoryPaginationTokenSelector},getHasPasswordHistory:{selector:n.hasPasswordHistorySelector}},liveQueries:{livePasswordHistory:{operator:i.passwordHistory$},livePasswordHistoryBatch:{operator:i.passwordHistoryBatch$}}}},58695:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.passwordHistoryBatch$=t.passwordHistory$=void 0;const n=r(18948),o=r(3343),i=r(83449),a=r(55220),s=r(35893),c=r(33627);t.passwordHistory$=(0,a.getLivePersonalInfo)(i.getLivePasswordHistorySelector),t.passwordHistoryBatch$=e=>{const t=(0,s.parseToken)(e),r=(0,i.getViewedPasswordHistoryBatchSelector)(t);return(0,n.pipe)((0,o.map)(r),(0,o.distinctUntilChanged)(c.sameBatch))}},87644:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getPasswordHistoryMappers=void 0,t.getPasswordHistoryMappers=()=>({primaryInfo:e=>e.primaryInfo,timestamp:e=>e.timestamp,type:e=>e.type,id:e=>e.id,credentialId:e=>"credentialId"in e&&e.credentialId||""})},25294:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getPasswordHistoryBatch=t.viewPasswordHistoryBatch=t.getPasswordHistoryFirstToken=t.getPasswordHistorySortToken=t.getPasswordHistoryFilterToken=void 0;const n=r(20553),o=r(2104),i=r(16516),a=r(83687),s=r(90451);t.getPasswordHistoryFilterToken=({filterCriteria:e})=>({filterCriteria:e||[]}),t.getPasswordHistorySortToken=({sortCriteria:e})=>({uniqField:"id",sortCriteria:e||[]}),t.getPasswordHistoryFirstToken=(e,t,r,o)=>(0,n.generateFirstToken)(e,t,r.initialBatchSize||30,o),t.viewPasswordHistoryBatch=(e,t,r,n)=>{const i=(0,a.getSharingStatusItem)(t,r),c=(0,s.getIcon)(n);return(0,o.listView)(i,c,e)},t.getPasswordHistoryBatch=(0,i.curry)(((e,t,r)=>(0,n.getBatch)(r,e,t)))},36859:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.passwordHistoryItemMatch=t.searchGettersForGeneratedPassword=t.searchGettersForCredential=void 0;const n=r(82234),o=r(95175),i=r(64455),a=r(6205);t.searchGettersForCredential=[(0,n.stringProp)("primaryInfo"),(0,n.stringProp)("domain"),(0,n.stringProp)("email"),(0,n.stringProp)("login"),(0,n.stringProp)("secondaryLogin"),e=>(0,a.getDashlaneDefinedLinkedWebsites)(e.domain).join(" ")],t.searchGettersForGeneratedPassword=[(0,n.stringProp)("primaryInfo")],t.passwordHistoryItemMatch=(e,r)=>r.type===o.PasswordHistoryItemType.Credential?(0,i.match)(t.searchGettersForCredential)(e,r):(0,i.match)(t.searchGettersForGeneratedPassword)(e,r)},83449:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getViewedPasswordHistoryBatchSelector=t.passwordHistoryQuerySelector=t.passwordHistoryPaginationTokenSelector=t.passwordHistoryPageSelector=t.getLivePasswordHistorySelector=t.viewedQueriedPasswordHistorySelector=t.passwordHistoryListViewSelector=t.getPasswordHistoryMappersSelector=t.passwordHistoryMappersSelector=t.hasPasswordHistorySelector=t.passwordHistorySelector=void 0;const n=r(21178),o=r(32034),i=r(18948),a=r(24589),s=r(92598),c=r(35385),u=r(51319),d=r(36859),l=r(95175),p=r(63566),m=r(25294),g=r(87644),f=r(97006),S=r(35893),h=r(20553),y=r(80993),v=r(91210),E=r(91892),A=e=>"ChangedProperties"in e&&e.ChangedProperties.some((e=>"password"===e.toLowerCase())),_=(0,o.createSelector)(u.credentialsSelector,(e=>e.reduce(((e,t)=>e.set(t.Id,t)),new Map)));t.passwordHistorySelector=(0,o.createSelector)(s.generatedPasswordsSelector,c.credentialsHistoriesSelector,_,v.limitedSharingItemsSelector,((e,t,r,o)=>{const i=e.filter((e=>!e.AuthId)).map((e=>({type:l.PasswordHistoryItemType.Generated,primaryInfo:e.Domain??"",secondaryInfo:"",domain:e.Domain,password:e.Password,timestamp:e.GeneratedDate,id:e.Id,isProtected:!1}))),a=t.reduce(((e,t)=>{if(o[t.ObjectId]||!t.hasOwnProperty("ChangeSets"))return e;const i=r.get(t.ObjectId);if(!i)return e;const a=i?.Title,s=i?.Url,c=i?.Email,u=i?.Login,d=i?.AutoProtected||!1,p=t.ChangeSets.reduce(((e,t)=>{if(!A(t)||void 0===(r=t.CurrentData).Email&&void 0===r.Login||void 0===r.Url||void 0===r.Password)return e;var r;const o=new n.ParsedURL(s).getRootDomain(),p={type:l.PasswordHistoryItemType.Credential,primaryInfo:(a||o)??"",secondaryInfo:(c||u)??"",domain:s||t.CurrentData.Url,password:t.CurrentData.Password,timestamp:t.ModificationDate,id:t.Id,credentialId:i?.Id,isProtected:d,spaceId:i.SpaceId,email:i?.Email??"",login:i?.Login??"",secondaryLogin:i?.SecondaryLogin??""};return e.concat(p)}),[]);return e.concat(p)}),[]);return i.concat(a)})),t.hasPasswordHistorySelector=(e,t)=>{const r=(0,v.limitedSharingItemsSelector)(e);return(0,c.credentialsHistoriesSelector)(e).some((e=>{return e.ObjectId===t&&!((n=e.ObjectId)in r&&r[n])&&e.ChangeSets.filter(A).length>0;var n}))},t.passwordHistoryMappersSelector=e=>(0,g.getPasswordHistoryMappers)();const T=(0,g.getPasswordHistoryMappers)();t.getPasswordHistoryMappersSelector=()=>T;const I=()=>d.passwordHistoryItemMatch,b=(0,a.getQuerySelector)(t.passwordHistorySelector,I,t.passwordHistoryMappersSelector);t.passwordHistoryListViewSelector=(0,o.createSelector)(y.sortedSharedItemIdsSelector,v.limitedSharingItemsSelector,E.iconsSelector,t.passwordHistorySelector,((e,t,r)=>n=>(0,m.viewPasswordHistoryBatch)(n,e,t,r))),t.viewedQueriedPasswordHistorySelector=(e,r)=>{const n=b(e,r),o=(0,t.passwordHistoryListViewSelector)(e);return(0,p.viewListResults)(o)(n)},t.getLivePasswordHistorySelector=(0,f.makeLiveSelectorGetter)(t.passwordHistorySelector,t.passwordHistoryListViewSelector,I,t.getPasswordHistoryMappersSelector),t.passwordHistoryPageSelector=(e,r)=>{const n=(0,S.parseToken)(r),{sortToken:o,filterToken:i}=n,a=(0,g.getPasswordHistoryMappers)(),s=(0,t.passwordHistoryQuerySelector)(e,{sortToken:o,filterToken:i}),c=(0,t.passwordHistoryListViewSelector)(e),u=(0,h.generateNextToken)(a,n,s),d=(0,h.generatePrevToken)(a,n,s),l=(0,h.getBatch)(a,n,s),p=(0,S.stringifyToken)(u),m=(0,S.stringifyToken)(d);return{batch:c(l),nextToken:p,prevToken:m}},t.passwordHistoryPaginationTokenSelector=(e,r)=>{const n=(0,m.getPasswordHistorySortToken)(r),o=(0,m.getPasswordHistoryFilterToken)(r),i=(0,g.getPasswordHistoryMappers)(),a={sortToken:n,filterToken:o},s=(0,t.passwordHistoryQuerySelector)(e,a),c=(0,m.getPasswordHistoryFirstToken)(i,a,r,s);return(0,S.stringifyToken)(c)};const w=(0,o.createSelector)(t.passwordHistorySelector,g.getPasswordHistoryMappers),C=(0,S.createOptimizedSortTokenSelector)(((e,{sortToken:t})=>t),i.identity),D=(0,S.createOptimizedFilterTokenSelector)(((e,{filterToken:t})=>t),i.identity);t.passwordHistoryQuerySelector=(0,o.createSelector)(g.getPasswordHistoryMappers,I,C,D,t.passwordHistorySelector,S.queryData),t.getViewedPasswordHistoryBatchSelector=e=>{const{sortToken:r,filterToken:n}=e,i=(0,m.getPasswordHistoryBatch)(e),a=(0,o.createSelector)((e=>(0,t.passwordHistoryQuerySelector)(e,{filterToken:n,sortToken:r})),w,i),s=(0,S.optimizeBatchSelector)(a);return(0,o.createSelector)(s,y.sortedSharedItemIdsSelector,v.limitedSharingItemsSelector,E.iconsSelector,m.viewPasswordHistoryBatch)}},95175:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PasswordHistoryItemType=void 0,function(e){e.Credential="credential",e.Generated="generated"}(t.PasswordHistoryItemType||(t.PasswordHistoryItemType={}))},2104:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.listView=void 0;const n=r(95175);t.listView=(e,t,r)=>r.map((r=>r.type===n.PasswordHistoryItemType.Credential?{type:n.PasswordHistoryItemType.Credential,id:r.id,primaryInfo:r.primaryInfo,secondaryInfo:r.secondaryInfo,password:r.password,timestamp:r.timestamp,credentialId:r.credentialId,icons:t(r.domain),sharingStatus:e(r.credentialId),isProtected:r.isProtected,spaceId:r.spaceId,domain:r.domain}:{type:n.PasswordHistoryItemType.Generated,id:r.id,primaryInfo:r.primaryInfo,password:r.password,timestamp:r.timestamp}))},17025:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const n=r(58235),o=r(7408),i=r(48121);t.config={commands:{addPaymentCard:{handler:i.addPaymentCardHandler},deletePaymentCard:{handler:i.deletePaymentCardHandler},updatePaymentCard:{handler:i.updatePaymentCardHandler}},queries:{getPaymentCard:{selector:n.viewedPaymentCardSelector},getPaymentCards:{selector:n.viewedQueriedPaymentCardsSelector}},liveQueries:{livePaymentCard:{operator:o.getPaymentCard$},livePaymentCards:{operator:o.paymentCards$}}}},42262:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(9092),t)},19738:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addPaymentCardHandler=t.getNewPaymentCard=void 0;const n=r(92233),o=r(53576),i=r(23136),a=r(42316),s=r(48313),c=r(47408),u=r(78320),d=r(70252),l=r(13675),p=r(9092),m=r(79980);function g(e){e=(0,l.sanitizeInputPersonalData)(e);const t=(0,c.getUnixTimestamp)(),r=(0,a.defaultToEmptyString)(e.cardNumber).replace(/ /g,"");if(!r&&!e.securityCode)throw new a.RequestError("[addPaymentCard]: refusing to add a payment card without card number or security code.",p.PaymentCardSaveResultErrorCode.EMPTY_CARD_NUMBER_AND_SECURITY_CODE);return{kwType:"KWPaymentMean_creditCard",AnonId:(0,u.generateItemUuid)(),Bank:"US-NO_TYPE",CardNumber:r,CardNumberLastDigits:(0,a.getLastDigitsFromCardNumber)(r),CreationDatetime:t,Color:(0,a.defaultToFallbackColor)(e.color),ExpireMonth:(0,a.defaultToEmptyString)(e.expireMonth),ExpireYear:(0,a.defaultToEmptyString)(e.expireYear),Id:(0,u.generateItemUuid)(),IssueNumber:"",Name:(0,a.defaultToEmptyString)(e.name),OwnerName:(0,a.defaultToEmptyString)(e.ownerName),CCNote:(0,a.defaultToEmptyString)(e.personalNote),LocaleFormat:o.Country.US,SecurityCode:(0,a.defaultToEmptyString)(e.securityCode),SpaceId:(0,a.defaultToEmptyString)(e.spaceId),StartYear:"",StartMonth:"",Type:(0,a.getPaymentTypeFromCardNumber)(r),UserModificationDatetime:t,LastBackupTime:0}}t.getNewPaymentCard=g,t.addPaymentCardHandler=async(e,t)=>{try{return await(async({applicationModulesAccess:e,storeService:t,sessionService:r,eventLoggerService:n},o)=>{if(!t.isAuthenticated())throw new Error("No session available to addPaymentCard");const a=g(o);if(!a.SpaceId){const r=await(0,i.getDefaultSpaceId)(e,t);a.SpaceId=r}(0,m.logAddVaultItem)(t,n,a),t.dispatch((0,s.savePersonalDataItem)(a,a.kwType)),r.getInstance().user.persistPersonalData()})(e,t),(0,i.getDebounceSync)(e.storeService,e.sessionService)({immediateCall:!0},n.Trigger.Save),Promise.resolve({success:!0})}catch(e){return(0,d.sendExceptionLog)({error:e}),e instanceof a.RequestError&&void 0!==e.code?Promise.resolve({success:!1,error:{code:e.code}}):Promise.resolve({success:!1})}}},37028:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.deletePaymentCardHandler=void 0;const n=r(92233),o=r(23136),i=r(58235),a=r(9092),s=r(70252),c=r(45291),u=r(79980);t.deletePaymentCardHandler=function(e,{id:t}){const r=(({storeService:e,eventLoggerService:t},r)=>{const n=e.getState();try{if(!e.isAuthenticated())return{success:!1,error:{code:a.DeletePaymentCardErrorCode.NOT_AUTHORIZED}};const o=(0,i.paymentCardSelector)(n,r);if(!o)return{success:!1,error:{code:a.DeletePaymentCardErrorCode.NOT_FOUND}};const s=(0,c.removePersonalItem)(o.kwType,o.Id,null);return e.dispatch(s),(0,u.logDeleteVaultItem)(e,t,o),{success:!0}}catch(e){const t=new Error(`[PaymentCards] - deletePaymentCard: ${e}`);return(0,s.sendExceptionLog)({error:t}),{success:!1,error:{code:a.DeletePaymentCardErrorCode.INTERNAL_ERROR}}}})(e,t);return r.success&&(0,o.getDebounceSync)(e.storeService,e.sessionService)({immediateCall:!0},n.Trigger.Save),Promise.resolve(r)}},48121:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(19738),t),o(r(37028),t),o(r(65468),t)},65468:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.updatePaymentCardHandler=t.getUpdatedPaymentCard=void 0;const n=r(92233),o=r(58235),i=r(23136),a=r(42316),s=r(48313),c=r(47408),u=r(70252),d=r(13675),l=r(9092),p=r(79980);function m(e,t){if(!e)throw new a.RequestError("[updatePaymentCard]: unable to find payment card to update.",l.PaymentCardSaveResultErrorCode.NOT_FOUND);t=(0,d.sanitizeInputPersonalData)(t);const r=(0,a.defaultToEmptyString)(t.cardNumber??e.CardNumber).replace(/ /g,""),n=(0,c.getUnixTimestamp)(),o={CardNumber:r,CardNumberLastDigits:(0,a.getLastDigitsFromCardNumber)(r),Color:t.color??e.Color,ExpireMonth:t.expireMonth??e.ExpireMonth,ExpireYear:t.expireYear??e.ExpireYear,Name:t.name??e.Name,OwnerName:t.ownerName??e.OwnerName,SecurityCode:t.securityCode??e.SecurityCode,SpaceId:t.spaceId??e.SpaceId,Type:(0,a.getPaymentTypeFromCardNumber)(r),UserModificationDatetime:n,CCNote:t.personalNote??e.CCNote},i={...e,...o};if(!r&&!i.SecurityCode)throw new a.RequestError("[updatePaymentCard]: refusing to add a payment card without card number or security code.",l.PaymentCardSaveResultErrorCode.EMPTY_CARD_NUMBER_AND_SECURITY_CODE);return i}t.getUpdatedPaymentCard=m,t.updatePaymentCardHandler=function(e,t){try{return function({storeService:e,sessionService:t,eventLoggerService:r},n){if(!e.isAuthenticated())throw new Error("No session available to updatePaymentCard");const i=(0,o.paymentCardSelector)(e.getState(),n.id),a=m(i,n);(0,p.logEditVaultItem)(e,r,a,i),e.dispatch((0,s.savePersonalDataItem)(a,a.kwType)),t.getInstance().user.persistPersonalData()}(e,t),(0,i.getDebounceSync)(e.storeService,e.sessionService)({immediateCall:!0},n.Trigger.Save),Promise.resolve({success:!0})}catch(e){return(0,u.sendExceptionLog)({error:e}),e instanceof a.RequestError&&void 0!==e.code?Promise.resolve({success:!1,error:{code:e.code}}):Promise.resolve({success:!1})}}},42316:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RequestError=t.getPaymentTypeFromCardNumber=t.getLastDigitsFromCardNumber=t.defaultColor=t.defaultToFallbackColor=t.defaultToEmptyString=void 0;const n=r(16516),o=r(53576);t.defaultToEmptyString=(0,n.defaultTo)(""),t.defaultToFallbackColor=(0,n.defaultTo)(o.PaymentCardColor.BLUE_1),t.defaultColor="BLUE_1",t.getLastDigitsFromCardNumber=function(e){const r=(0,t.defaultToEmptyString)(e).trim();return r.length>=4?r.slice(-4):""},t.getPaymentTypeFromCardNumber=function(e){if(!e)return o.PaymentCardType.PAYMENT_TYPE_VISA;const t=(e,t)=>t.some((t=>e.startsWith(t)));return e.startsWith("4")?o.PaymentCardType.PAYMENT_TYPE_VISA:t(e,["34","37"])?o.PaymentCardType.PAYMENT_TYPE_AMEX:t(e,["50","51","52","53","54","55"])?o.PaymentCardType.PAYMENT_TYPE_MASTERCARD:t(e,["6011","65"])?o.PaymentCardType.PAYMENT_TYPE_DISCOVER:t(e,["300","301","302","303","304","305","36","38"])?o.PaymentCardType.PAYMENT_TYPE_DINERSCLUB:t(e,["2123","2131","1800","3"])?o.PaymentCardType.PAYMENT_TYPE_JCB:o.PaymentCardType.PAYMENT_TYPE_MASTERCARD};class i extends Error{constructor(e,t){super(e),Object.setPrototypeOf(this,new.target.prototype),this.name="RequestError",this.code=t}}t.RequestError=i},35834:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getUpdatedPaymentCard=t.getNewPaymentCard=t.savePaymentCard=void 0;const n=r(16516),o=r(53576),i=r(95623),a=r(45291),s=r(78320),c=r(47408),u=r(49551),d=r(42316),l=r(79980);function p(e){i.default.log("[Data] Creating new Payment Card");const t=(0,c.getUnixTimestamp)(),r=(0,d.defaultToEmptyString)(e.cardNumber).replace(/ /g,"");return{kwType:"KWPaymentMean_creditCard",AnonId:(0,s.generateItemUuid)(),Bank:"US-NO_TYPE",CardNumber:r,CardNumberLastDigits:(0,d.getLastDigitsFromCardNumber)(r),CreationDatetime:t,Color:(0,n.defaultTo)(o.PaymentCardColor.BLUE_1,e.color),ExpireMonth:(0,d.defaultToEmptyString)(e.expireMonth),ExpireYear:(0,d.defaultToEmptyString)(e.expireYear),Id:(0,s.generateItemUuid)(),IssueNumber:"",Name:(0,n.defaultTo)("Card",e.cardName),OwnerName:(0,d.defaultToEmptyString)(e.ownerName),CCNote:(0,d.defaultToEmptyString)(e.personalNote),LocaleFormat:o.Country.US,SecurityCode:(0,d.defaultToEmptyString)(e.securityCode),SpaceId:e.spaceId||"",StartYear:"",StartMonth:"",Type:(0,d.getPaymentTypeFromCardNumber)(r),UserModificationDatetime:t,LastBackupTime:0}}function m(e,t){const r=(0,u.findDataModelObject)(t.id,e);if(!r)return void i.default.log("Client asks to update an unknown Payment Card");i.default.log(`[Data] Updating existing Payment Card ${t.id}`);const o=(0,c.getUnixTimestamp)(),a=(0,d.defaultToEmptyString)(t.cardNumber).replace(/ /g,""),s={CardNumber:a,CardNumberLastDigits:(0,d.getLastDigitsFromCardNumber)(a),Color:t.color?t.color:r.Color,ExpireMonth:(0,d.defaultToEmptyString)(t.expireMonth),ExpireYear:(0,d.defaultToEmptyString)(t.expireYear),Name:(0,n.defaultTo)("Card",t.cardName),OwnerName:(0,d.defaultToEmptyString)(t.ownerName),SecurityCode:(0,d.defaultToEmptyString)(t.securityCode),Type:(0,d.getPaymentTypeFromCardNumber)(t.cardNumber),UserModificationDatetime:o,CCNote:(0,d.defaultToEmptyString)(t.personalNote)};return{...r,...s}}t.savePaymentCard=function({storeService:e,sessionService:t,eventLoggerService:r},n){if(!e.isAuthenticated())return void i.default.log("No session available to savePaymentCard");const o=e.getPersonalData(),s=n.id?m(o.paymentCards,n):p(n);if(n.id){const t=(0,u.findDataModelObject)(s.Id,o.paymentCards);(0,l.logEditVaultItem)(e,r,s,t)}else(0,l.logAddVaultItem)(e,r,s);e.dispatch((0,a.savePaymentCard)(s)),t.getInstance().user.persistPersonalData()},t.getNewPaymentCard=p,t.getUpdatedPaymentCard=m},7408:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getPaymentCard$=t.paymentCards$=void 0;const n=r(18948),o=r(3343),i=r(55220),a=r(58235);t.paymentCards$=(0,i.getLivePersonalInfo)(a.getLivePaymentCardsSelector),t.getPaymentCard$=e=>{const t=(0,a.getViewedPaymentCardSelector)(e);return(0,n.pipe)((0,o.map)(t),(0,o.distinctUntilChanged)())}},91663:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getPaymentCardMappers=void 0;const n=r(83539);t.getPaymentCardMappers=()=>({spaceId:e=>e.SpaceId,name:e=>e.Name,lastUse:n.lastUseMapper,id:e=>e.Id})},38701:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.paymentCardMatch=t.searchGetters=void 0;const n=r(82234),o=r(64455);t.searchGetters=[(0,n.stringProp)("Name"),(0,n.stringProp)("OwnerName")],t.paymentCardMatch=(0,o.match)(t.searchGetters)},58235:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getViewedPaymentCardSelector=t.viewedPaymentCardSelector=t.getLivePaymentCardsSelector=t.viewedQueriedPaymentCardsSelector=t.queryPaymentCardsSelector=t.paymentCardMappersSelector=t.paymentCardSelector=t.paymentCardsSelector=void 0;const n=r(16516),o=r(38701),i=r(8818),a=r(24589),s=r(63566),c=r(97006),u=r(49551),d=r(32034),l=r(91663),p=r(40602),m=r(57989);t.paymentCardsSelector=(0,d.createSelector)((e=>e.userSession.personalData.paymentCards),m.quarantinedSpacesSelector,p.filterOutQuarantinedItems),t.paymentCardSelector=(e,r)=>{const n=(0,t.paymentCardsSelector)(e);return(0,u.findDataModelObject)(r,n)},t.paymentCardMappersSelector=e=>(0,l.getPaymentCardMappers)();const g=()=>o.paymentCardMatch;t.queryPaymentCardsSelector=(0,a.getQuerySelector)(t.paymentCardsSelector,g,t.paymentCardMappersSelector),t.viewedQueriedPaymentCardsSelector=(0,n.compose)((0,s.viewListResults)(i.listView),t.queryPaymentCardsSelector),t.getLivePaymentCardsSelector=(0,c.makeLiveSelectorGetter)(t.paymentCardsSelector,(()=>i.listView),g,t.paymentCardMappersSelector),t.viewedPaymentCardSelector=(e,r)=>{const n=(0,t.paymentCardSelector)(e,r);return(0,i.maybeDetailView)(n)},t.getViewedPaymentCardSelector=e=>{const r=(0,d.createSelector)(t.paymentCardsSelector,(t=>(0,u.findDataModelObject)(e,t)));return(0,d.createSelector)(r,i.maybeDetailView)}},9092:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DeletePaymentCardErrorCode=t.PaymentCardSaveResultErrorCode=void 0,function(e){e.EMPTY_CARD_NUMBER_AND_SECURITY_CODE="EMPTY_CARD_NUMBER_AND_SECURITY_CODE",e.NOT_FOUND="NOT_FOUND"}(t.PaymentCardSaveResultErrorCode||(t.PaymentCardSaveResultErrorCode={})),function(e){e.NOT_AUTHORIZED="NOT_AUTHORIZED",e.NOT_FOUND="NOT_FOUND",e.INTERNAL_ERROR="INTERNAL_ERROR"}(t.DeletePaymentCardErrorCode||(t.DeletePaymentCardErrorCode={}))},8818:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.listView=t.itemView=t.maybeDetailView=t.detailView=void 0;const n=r(16516),o=r(82043),i=r(42316),a=(0,n.defaultTo)("");t.detailView=e=>({...(0,o.dataModelDetailView)(e),bank:a(e.Bank),cardNumber:a(e.CardNumber),cardNumberLastDigits:(0,i.getLastDigitsFromCardNumber)(e.CardNumber),color:e.Color||i.defaultColor,expireMonth:a(e.ExpireMonth),expireYear:a(e.ExpireYear),issueNumber:a(e.IssueNumber),name:a(e.Name),ownerName:a(e.OwnerName),personalNote:a(e.CCNote),securityCode:a(e.SecurityCode),startMonth:a(e.StartMonth),startYear:a(e.StartYear),type:e.Type}),t.maybeDetailView=(0,o.maybeDataModelDetailView)(t.detailView),t.itemView=e=>({...(0,o.dataModelItemView)(e),cardNumber:a(e.CardNumber),cardNumberLastDigits:(0,i.getLastDigitsFromCardNumber)(e.CardNumber),color:e.Color||i.defaultColor,expireMonth:a(e.ExpireMonth),expireYear:a(e.ExpireYear),name:a(e.Name),ownerName:a(e.OwnerName),personalNote:a(e.CCNote),type:e.Type}),t.listView=e=>e.map(t.itemView)},79980:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.logDeleteVaultItem=t.logAddVaultItem=t.logEditVaultItem=void 0;const n=r(92233),o=r(53576),i=r(21178),a=r(49901),s=r(53966),c=r(10770),u=r(53626),d=(e,t,r,d,l,p,m)=>{const g=e.getState(),f=(0,u.collectionsSelector)(g),S=d.SpaceId===a.PERSONAL_SPACE_ID?n.Space.Personal:n.Space.Professional,h=void 0!==p?p.map((e=>(0,s.getHermesFieldFromProperty)(d,e))).filter((e=>e)):void 0,y=s.dataModelTypeToItemType[d.kwType],v=(0,c.getCollectionNamesContainingVaultItemId)(d.Id,f).length;if(t.logEvent(new n.UserUpdateVaultItemEvent({action:r,itemId:d.Id,itemType:y,fieldsEdited:h,space:S,collectionCount:v,multiSelectId:m??void 0,updateCredentialOrigin:l})),d.kwType===o.DataModelType.KWAuthentifiant){const e=d,o=new i.ParsedURL(e.Url).getRootDomain(),a="string"==typeof o?o:"";(0,n.hashDomain)(a).then((e=>{t.logEvent(new n.AnonymousUpdateCredentialEvent({action:r,domain:{id:e,type:n.DomainType.Web},fieldList:h,space:S}))}))}};t.logEditVaultItem=(e,t,r,o,i)=>{const a=(0,s.getUpdatedProperties)(r,o);d(e,t,n.Action.Edit,r,i,a)},t.logAddVaultItem=(e,t,r,o)=>d(e,t,n.Action.Add,r,o),t.logDeleteVaultItem=(e,t,r,o,i)=>d(e,t,n.Action.Delete,r,o,void 0,i)},53966:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getUpdatedProperties=t.getHermesFieldFromProperty=t.dataModelTypeToItemType=void 0;const n=r(92233),o=r(53576);t.dataModelTypeToItemType={[o.DataModelType.KWAuthentifiant]:n.ItemType.Credential,[o.DataModelType.KWSecureNote]:n.ItemType.SecureNote,[o.DataModelType.KWIdentity]:n.ItemType.Identity,[o.DataModelType.KWEmail]:n.ItemType.Email,[o.DataModelType.KWPhone]:n.ItemType.Phone,[o.DataModelType.KWAddress]:n.ItemType.Address,[o.DataModelType.KWCompany]:n.ItemType.Company,[o.DataModelType.KWPersonalWebsite]:n.ItemType.Website,[o.DataModelType.KWPaymentMean_creditCard]:n.ItemType.CreditCard,[o.DataModelType.KWBankStatement]:n.ItemType.BankStatement,[o.DataModelType.KWIDCard]:n.ItemType.IdCard,[o.DataModelType.KWSocialSecurityStatement]:n.ItemType.SocialSecurity,[o.DataModelType.KWDriverLicence]:n.ItemType.DriverLicence,[o.DataModelType.KWPassport]:n.ItemType.Passport,[o.DataModelType.KWFiscalStatement]:n.ItemType.FiscalStatement};const i={Title:n.Field.Title,FirstName:n.Field.FirstName,MiddleName:n.Field.MiddleName,LastName:n.Field.LastName,BirthDate:n.Field.BirthDate,BirthPlace:n.Field.BirthPlace,Pseudo:n.Field.Pseudo,SpaceId:n.Field.Space},a={Email:n.Field.Email,Type:n.Field.Type,EmailName:n.Field.EmailName,SpaceId:n.Field.Space},s={Number:n.Field.Number,PhoneName:n.Field.PhoneName,Type:n.Field.Type,SpaceId:n.Field.Space},c={StreetNumber:n.Field.StreetNumber,StreetName:n.Field.StreetName,StreetTitle:n.Field.StreetTitle,City:n.Field.City,State:n.Field.State,StateLevel2:n.Field.StateLevel2,StateNumber:n.Field.StateNumber,ZipCode:n.Field.ZipCode,Country:n.Field.Country,AddressName:n.Field.AddressName,Receiver:n.Field.Receiver,Building:n.Field.Building,Floor:n.Field.Floor,Door:n.Field.Door,LinkedPhone:n.Field.LinkedPhone,PersonalNote:n.Field.Note,SpaceId:n.Field.Space},u={Name:n.Field.Name,JobTitle:n.Field.JobTitle,SpaceId:n.Field.Space},d={Website:n.Field.Website,Name:n.Field.Name,SpaceId:n.Field.Space},l={Name:n.Field.Name,OwnerName:n.Field.OwnerName,CardNumber:n.Field.CardNumber,SecurityCode:n.Field.SecurityCode,ExpireMonth:n.Field.ExpireDate,ExpireYear:n.Field.ExpireDate,Color:n.Field.Color,SpaceId:n.Field.Space},p={BankAccountName:n.Field.Name,BankAccountOwner:n.Field.Owner,BankAccountBIC:n.Field.Bic,BankAccountIBAN:n.Field.Iban,BankAccountBank:n.Field.Bank,SpaceId:n.Field.Space},m={Fullname:n.Field.Fullname,Number:n.Field.Number,DeliveryDate:n.Field.DeliveryDate,ExpireDate:n.Field.ExpireDate,LinkedIdentity:n.Field.LinkedIdentity,Sex:n.Field.Sex,DateOfBirth:n.Field.DateOfBirth,SpaceId:n.Field.Space},g={SocialSecurityFullname:n.Field.SocialSecurityFullname,SocialSecurityNumber:n.Field.SocialSecurityNumber,LinkedIdentity:n.Field.LinkedIdentity,Sex:n.Field.Sex,DateOfBirth:n.Field.DateOfBirth,SpaceId:n.Field.Space},f={Fullname:n.Field.Fullname,Number:n.Field.Number,DeliveryDate:n.Field.DeliveryDate,ExpireDate:n.Field.ExpireDate,State:n.Field.State,LinkedIdentity:n.Field.LinkedIdentity,Sex:n.Field.Sex,DateOfBirth:n.Field.DateOfBirth,SpaceId:n.Field.Space},S={Fullname:n.Field.Fullname,Number:n.Field.Number,DeliveryDate:n.Field.DeliveryDate,DeliveryPlace:n.Field.DeliveryPlace,ExpireDate:n.Field.ExpireDate,LinkedIdentity:n.Field.LinkedIdentity,Sex:n.Field.Sex,DateOfBirth:n.Field.DateOfBirth,SpaceId:n.Field.Space},h={FiscalNumber:n.Field.FiscalNumber,TeledeclarantNumber:n.Field.TeledeclarantNumber,SpaceId:n.Field.Space};t.getHermesFieldFromProperty=(e,t)=>{switch(e.kwType){case o.DataModelType.KWAuthentifiant:return((e,t)=>{switch(t){case"Email":return n.Field.Email;case"Login":return n.Field.Login;case"SecondaryLogin":return n.Field.SecondaryLogin;case"Password":return n.Field.Password;case"AutoLogin":return e.AutoLogin?n.Field.AutoLoginOn:n.Field.AutoLoginOff;case"AutoProtected":return e.AutoProtected?n.Field.MpProtectedOn:n.Field.MpProtectedOff;case"Url":return n.Field.Website;case"Category":return n.Field.Category;case"Note":return n.Field.Note;case"SubdomainOnly":return e.SubdomainOnly?n.Field.SubdomainOnlyOn:n.Field.SubdomainOnlyOff;case"Title":return n.Field.Title;case"SpaceId":return n.Field.Space}})(e,t);case o.DataModelType.KWSecureNote:return((e,t)=>{switch(t){case"Title":return n.Field.Title;case"Content":return n.Field.Content;case"Category":return n.Field.Category;case"SpaceId":return n.Field.Space;case"Secured":return e.Secured?n.Field.MpProtectedOn:n.Field.MpProtectedOff}})(e,t);case o.DataModelType.KWIdentity:return i[t];case o.DataModelType.KWEmail:return a[t];case o.DataModelType.KWPhone:return s[t];case o.DataModelType.KWAddress:return c[t];case o.DataModelType.KWCompany:return u[t];case o.DataModelType.KWPersonalWebsite:return d[t];case o.DataModelType.KWPaymentMean_creditCard:return l[t];case o.DataModelType.KWBankStatement:return p[t];case o.DataModelType.KWIDCard:return m[t];case o.DataModelType.KWSocialSecurityStatement:return g[t];case o.DataModelType.KWDriverLicence:return f[t];case o.DataModelType.KWPassport:return S[t];case o.DataModelType.KWFiscalStatement:return h[t]}},t.getUpdatedProperties=(e,t)=>Object.getOwnPropertyNames(e).filter((r=>{const n=void 0!==e[r],o=e[r]!==t[r];return n&&o}))},83539:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.lastUseMapper=void 0,t.lastUseMapper=e=>e.LastUse||-1},50886:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.updatePersonalDataUsageMetadata=t.addPersonalDataItem=t.makePersonalDataItem=void 0;const n=r(53576),o=r(86392),i=r(84977),a=r(87496),s=r(73566),c=r(85225),u=r(23136),d=r(70252),l=r(90503),p=r(47408),m=r(95623),g=r(48313),f=r(9951),S=r(49766),h=r(29565),y=r(91494),v=r(39732),E=r(49723),A=r(72079),_=r(88542),T=r(48931),I=r(12362),b=r(86691),w=r(13675),C=r(56915),D=r(79980),O=r(49551),P=r(78163),N={[n.DataModelType.KWAddress]:{create:E.makeNewAddress,update:E.makeUpdatedAddress},[n.DataModelType.KWAuthentifiant]:{beforeChange:_.beforeCredentialChange,create:_.makeNewCredential,update:_.makeUpdatedCredential,notifySharersOnUpdate:_.notifySharersCredentialUpdated,afterSave:_.afterCredentialSaved},[n.DataModelType.KWBankStatement]:{create:T.makeNewBankAccount,update:T.makeUpdatedBankAccount},[n.DataModelType.KWCompany]:{create:f.makeNewCompany,update:f.makeUpdatedCompany},[n.DataModelType.KWEmail]:{create:S.makeNewEmail,update:S.makeUpdatedEmail},[n.DataModelType.KWIdentity]:{create:y.makeNewIdentity,update:y.makeUpdatedIdentity},[n.DataModelType.KWPersonalWebsite]:{create:h.makeNewPersonalWebsite,update:h.makeUpdatedPersonalWebsite},[n.DataModelType.KWPhone]:{create:v.makeNewPhone,update:v.makeUpdatedPhone},[n.DataModelType.KWSecureNote]:{create:A.makeNewNote,update:A.makeUpdatedNote,notifySharersOnUpdate:A.notifySharersNoteUpdated}};async function R(e,t,r){t.content||(m.default.error(`[Data] PersonalInfoItem: ${t.kwType}, has no content`),d.sendExceptionLog({message:`[makePersonalDataItem] No content found for PersonalDataItem of kwType: ${t.kwType}`,code:l.ExceptionCriticality.WARNING}),t={...t,content:{}});let n=null;if(t.content.id){const e=(0,u.getCurrentItems)(t.kwType,r);n=(0,O.findDataModelObject)(t.content.id,e)}const o=N[t.kwType];if(!o)return m.default.error(`[Data] Could not make PersonalDataItem of kwType: ${t.kwType}`),null;let i;return t=function(e){return{...e,content:(0,w.sanitizeInputPersonalData)(e.content)}}(t),o.beforeChange&&(t=o.beforeChange(t,r)),n?(i=await o.update(t,n),o.notifySharersOnUpdate&&await o.notifySharersOnUpdate(e,n,i)):i=await o.create(t),i}t.makePersonalDataItem=R,t.addPersonalDataItem=async function({storeService:e,sessionService:t,eventLoggerService:r,applicationModulesAccess:a},d){if(!e.isAuthenticated())return m.default.log("No session available to addPersonalDataItem"),{success:!1,itemId:""};const l=e.getPersonalData(),p=await R(e,d,l);if(!p.SpaceId){const t=await(0,u.getDefaultSpaceId)(a,e);p.SpaceId=t}if(!p)return{success:!1,itemId:""};const f=Boolean(d?.content.id);let S=null;const h=(0,I.getInstance)(),y=(0,b.getInstance)();if(f){const t=i.default[p.kwType],n=(0,O.findDataModelObject)(p.Id,l[t]);(0,D.logEditVaultItem)(e,r,p,n)}else(0,D.logAddVaultItem)(e,r,p);const v=(0,C.platformInfoSelector)(e.getState()),E=(0,s.isChangeHistoryCandidate)(p)&&f?(0,s.getUpdatedItemChangeHistory)({deviceName:e.getLocalSettings().deviceName,personalData:l,change:(0,c.makeUpdateChange)(p),userLogin:e.getUserLogin(),platformInfo:v}):null;if(e.dispatch((0,g.savePersonalDataItem)(p,p.kwType,E)),(0,n.isCredential)(p)){S=y.lockTopic("iconsUpdates");const t={credentialIds:[p.Id],type:"credentialUpdates"};await h.add("iconsUpdates",t),"************"===p?.Password&&(0,m.logWarn)({message:"Saving credentials using a placeholder",tag:"Credentials"});const{commands:r}=a.createClients().vaultItemsCrud;await r.emitTemporaryVaultItemEvent({ids:[p.Id],eventType:f?o.EventType.Updated:o.EventType.Created}),(0,P.shouldSendCreateOrModifiedCredentialActivityLog)(e,a,p,d.origin)&&(d.content.id?.length?await(0,P.computeAndSendModifiedCredentialActivityLog)(a,{domainUrl:d.content.url}):await(0,P.computeAndSendCreatedCredentialActivityLog)(a,{domainUrl:d.content.url}))}return N[d.kwType]?.afterSave&&N[d.kwType].afterSave(e,p),S&&y.releaseTopic("iconsUpdates",S),t.getInstance().user.persistPersonalData(),{success:!0,itemId:p.Id}},t.updatePersonalDataUsageMetadata=function(e,t,r,o){const s=i.default[o],c=(0,a.cleanUrlForPersonalData)(r),u=e.getPersonalData()[s],f=Array.isArray(u)?(0,O.findDataModelObject)(t,u):null;if(!f)return void d.sendExceptionLog({message:`[PersonalData] - updatePersonalDataUsageMetadata: No ${s} found for provided ID to update usage metadata`,code:l.ExceptionCriticality.WARNING});m.default.log(`[Data] Updating ${s} ${t} usage metadata`);const S={...f,LastUse:(0,p.getUnixTimestamp)()};if((0,n.isCredential)(S)){const{NumberUse:e,TrustedUrlGroup:t}=S;S.NumberUse=("number"==typeof e?e:0)+1,S.TrustedUrlGroup=(0,a.getUpdatedTrustedUrlList)(t,c)}e.dispatch((0,g.savePersonalDataItem)(S,o))}},13675:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sanitizeInputPersonalData=void 0;const n=r(16516),o=e=>"string"==typeof e?e.replace(new RegExp("([^\t\n\r -퟿-�𐀀-􏿿])","gu"),""):e;t.sanitizeInputPersonalData=e=>(0,n.mapObjIndexed)(o,e)},72678:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.personalDataSelector=t.personalDataItemsOfTypeSelector=void 0;const n=r(84977);t.personalDataItemsOfTypeSelector=(e,t)=>e.userSession&&e.userSession.personalData&&t.reduce(((t,r)=>t.concat(e.userSession.personalData[n.default[r]])),[]),t.personalDataSelector=e=>e.userSession&&e.userSession.personalData},49551:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.filterDataModelObjects=t.findDataModelObject=void 0;const n=r(16516),o=r(84977);t.findDataModelObject=(e,t)=>{const r=(e||"").toUpperCase();return(t||[]).find((e=>!!e?.Id&&r===e.Id?.toUpperCase()))},t.filterDataModelObjects=(e,t,r)=>{const i=(0,n.unnest)((0,n.values)((0,n.omit)(r,(0,n.pick)(o.PERSONAL_DATA_COLLECTIONS_KEYS,e)))),a=(0,n.map)(n.toUpper,t),s=(0,n.propSatisfies)((e=>(0,n.contains)((e||"").toUpperCase(),a)),"Id");return(0,n.filter)(s,i)}},36351:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const n=r(99281),o=r(11127);t.config={commands:{},queries:{getAddress:{selector:n.viewedAddressSelector},getAddresses:{selector:n.viewedQueriedAddressesSelector}},liveQueries:{liveAddress:{operator:o.getAddress$},liveAddresses:{operator:o.addresses$}}}},33230:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(1570),t)},49723:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makeAddressSpecificProps=t.makeNewAddress=t.makeUpdatedAddress=void 0;const n=r(16516),o=r(53576),i=r(78163),a=r(10360),s=r(47408),c=r(95623);function u(e,t){const r=(0,n.defaultTo)(""),i=t.content,s=(0,a.getLocaleFormat)(e,t);return{AddressFull:r(i.addressFull),AddressName:i.addressName||r(i.addressFull),Building:r(i.building),City:r(i.city),Country:o.Country[s].toLocaleLowerCase(),DigitCode:r(i.digitCode),Door:r(i.door),Floor:r(i.floor),LinkedPhone:r(i.linkedPhone),PersonalNote:r(i.personalNote),Receiver:r(i.receiver),Stairs:r(i.stairs),State:(0,a.getValidState)(s,i.state),StateLevel2:r(i.stateLevel2),StateNumber:r(i.stateNumber),StreetName:r(i.streetName),StreetNumber:r(i.streetNumber),StreetTitle:r(i.streetTitle),ZipCode:r(i.zipCode)}}t.makeUpdatedAddress=async function(e,t){return c.default.log(`[Data] Updating existing Address with id: ${t.Id}`),{...t,...(0,i.makeUpdatedPersonalDataItemBase)({existingItem:t,updatedItem:e,itemUpdateDate:(0,s.getUnixTimestamp)()}),...u(t,e)}},t.makeNewAddress=async function(e){return c.default.log("[Data] Adding new Address"),{...(0,i.makeNewPersonalDataItemBase)(e),...u(null,e)}},t.makeAddressSpecificProps=u},11127:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getAddress$=t.addresses$=void 0;const n=r(18948),o=r(3343),i=r(55220),a=r(99281);t.addresses$=(0,i.getLivePersonalInfo)(a.getLiveAddressesSelector),t.getAddress$=e=>{const t=(0,a.getViewedAddressSelector)(e);return(0,n.pipe)((0,o.map)(t),(0,o.distinctUntilChanged)())}},83295:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getAddressMappers=void 0;const n=r(83539);t.getAddressMappers=()=>({spaceId:e=>e.SpaceId,lastUse:n.lastUseMapper,id:e=>e.Id})},3179:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addressMatch=t.searchGetters=void 0;const n=r(82234),o=r(64455);t.searchGetters=[(0,n.stringProp)("AddressFull"),(0,n.stringProp)("AddressName"),(0,n.stringProp)("City"),(0,n.stringProp)("Receiver"),(0,n.stringProp)("StreetNumber"),(0,n.stringProp)("ZipCode")],t.addressMatch=(0,o.match)(t.searchGetters)},99281:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getViewedAddressSelector=t.viewedAddressSelector=t.getLiveAddressesSelector=t.viewedQueriedAddressesSelector=t.queryAddressesSelector=t.addressMappersSelector=t.addressSelector=t.addressesSelector=void 0;const n=r(16516),o=r(3179),i=r(83295),a=r(84523),s=r(63566),c=r(24589),u=r(97006),d=r(49551),l=r(32034),p=r(40602),m=r(57989);t.addressesSelector=(0,l.createSelector)((e=>e.userSession.personalData.addresses),m.quarantinedSpacesSelector,p.filterOutQuarantinedItems),t.addressSelector=(e,r)=>{const n=(0,t.addressesSelector)(e);return(0,d.findDataModelObject)(r,n)},t.addressMappersSelector=e=>(0,i.getAddressMappers)();const g=()=>o.addressMatch;t.queryAddressesSelector=(0,c.getQuerySelector)(t.addressesSelector,g,t.addressMappersSelector),t.viewedQueriedAddressesSelector=(0,n.compose)((0,s.viewListResults)(a.listView),t.queryAddressesSelector),t.getLiveAddressesSelector=(0,u.makeLiveSelectorGetter)(t.addressesSelector,(()=>a.listView),g,t.addressMappersSelector),t.viewedAddressSelector=(e,r)=>{const n=(0,t.addressSelector)(e,r);return(0,a.maybeDetailView)(n)},t.getViewedAddressSelector=e=>{const r=(0,l.createSelector)(t.addressesSelector,(t=>(0,d.findDataModelObject)(e,t)));return(0,l.createSelector)(r,a.maybeDetailView)}},1570:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},84523:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.listView=t.itemView=t.maybeDetailView=t.detailView=void 0;const n=r(16516),o=r(82043),i=(0,n.defaultTo)("");t.detailView=e=>({...(0,o.dataModelDetailView)(e),addressFull:i(e.AddressFull),addressName:i(e.AddressName),building:i(e.Building),city:i(e.City),country:i(e.Country),digitCode:i(e.DigitCode),door:i(e.Door),floor:i(e.Floor),linkedPhone:i(e.LinkedPhone),personalNote:i(e.PersonalNote),receiver:i(e.Receiver),stairs:i(e.Stairs),state:i(e.State),stateLevel2:i(e.StateLevel2),stateNumber:i(e.StateNumber),streetName:i(e.StreetName),streetNumber:i(e.StreetNumber),streetTitle:i(e.StreetTitle),zipCode:i(e.ZipCode)}),t.maybeDetailView=(0,o.maybeDataModelDetailView)(t.detailView),t.itemView=e=>({...(0,o.dataModelItemView)(e),addressName:i(e.AddressName),addressFull:i(e.AddressFull),city:i(e.City),streetNumber:i(e.StreetNumber),zipCode:i(e.ZipCode)}),t.listView=e=>e.map(t.itemView)},34130:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(33230),t),o(r(77418),t),o(r(57755),t),o(r(75690),t),o(r(91317),t),o(r(90609),t)},72580:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const n=r(80624),o=r(81071);t.config={commands:{},queries:{getCompany:{selector:n.viewedCompanySelector},getCompanies:{selector:n.viewedQueriedCompaniesSelector}},liveQueries:{liveCompanies:{operator:o.companies$},liveCompany:{operator:o.getCompany$}}}},77418:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(79662),t)},9951:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makeCompanySpecificProps=t.makeNewCompany=t.makeUpdatedCompany=void 0;const n=r(16516),o=r(78163),i=r(47408),a=r(95623);function s(e){const t=(0,n.defaultTo)("");return{JobTitle:t(e.content.jobTitle),Name:t(e.content.name),PersonalNote:t(e.content.personalNote)}}t.makeUpdatedCompany=async function(e,t){return a.default.log(`[Data] Updating existing Company with id: ${t.Id}`),{...t,...(0,o.makeUpdatedPersonalDataItemBase)({existingItem:t,updatedItem:e,itemUpdateDate:(0,i.getUnixTimestamp)()}),...s(e)}},t.makeNewCompany=async function(e){return{...(0,o.makeNewPersonalDataItemBase)(e),...s(e)}},t.makeCompanySpecificProps=s},81071:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getCompany$=t.companies$=void 0;const n=r(18948),o=r(3343),i=r(55220),a=r(80624);t.companies$=(0,i.getLivePersonalInfo)(a.getLiveCompaniesSelector),t.getCompany$=e=>{const t=(0,a.getViewedCompanySelector)(e);return(0,n.pipe)((0,o.map)(t),(0,o.distinctUntilChanged)())}},6628:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getCompanyMappers=void 0;const n=r(83539);t.getCompanyMappers=()=>({spaceId:e=>e.SpaceId,lastUse:n.lastUseMapper,id:e=>e.Id})},76475:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.companyMatch=t.searchGetters=void 0;const n=r(64455),o=r(82234);t.searchGetters=[(0,o.stringProp)("JobTitle"),(0,o.stringProp)("Name")],t.companyMatch=(0,n.match)(t.searchGetters)},80624:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getViewedCompanySelector=t.viewedCompanySelector=t.getLiveCompaniesSelector=t.viewedQueriedCompaniesSelector=t.queryCompaniesSelector=t.companyMappersSelector=t.companySelector=t.companiesSelector=void 0;const n=r(16516),o=r(76475),i=r(2849),a=r(6628),s=r(63566),c=r(24589),u=r(97006),d=r(49551),l=r(32034),p=r(40602),m=r(57989);t.companiesSelector=(0,l.createSelector)((e=>e.userSession.personalData.companies),m.quarantinedSpacesSelector,p.filterOutQuarantinedItems),t.companySelector=(e,r)=>{const n=(0,t.companiesSelector)(e);return(0,d.findDataModelObject)(r,n)},t.companyMappersSelector=e=>(0,a.getCompanyMappers)();const g=()=>o.companyMatch;t.queryCompaniesSelector=(0,c.getQuerySelector)(t.companiesSelector,g,t.companyMappersSelector),t.viewedQueriedCompaniesSelector=(0,n.compose)((0,s.viewListResults)(i.listView),t.queryCompaniesSelector),t.getLiveCompaniesSelector=(0,u.makeLiveSelectorGetter)(t.companiesSelector,(()=>i.listView),g,t.companyMappersSelector),t.viewedCompanySelector=(e,r)=>{const n=(0,t.companySelector)(e,r);return(0,i.maybeDetailView)(n)},t.getViewedCompanySelector=e=>{const r=(0,l.createSelector)(t.companiesSelector,(t=>(0,d.findDataModelObject)(e,t)));return(0,l.createSelector)(r,i.maybeDetailView)}},79662:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},2849:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.listView=t.itemView=t.maybeDetailView=t.detailView=void 0;const n=r(16516),o=r(82043),i=(0,n.defaultTo)("");t.detailView=e=>({...(0,o.dataModelDetailView)(e),name:i(e.Name),jobTitle:i(e.JobTitle),personalNote:i(e.PersonalNote)}),t.maybeDetailView=(0,o.maybeDataModelDetailView)(t.detailView),t.itemView=e=>({...(0,o.dataModelItemView)(e),name:i(e.Name),jobTitle:i(e.JobTitle)}),t.listView=e=>e.map(t.itemView)},64489:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const n=r(26147),o=r(99020);t.config={commands:{},queries:{getEmail:{selector:n.viewedEmailSelector},getEmails:{selector:n.viewedQueriedEmailsSelector}},liveQueries:{liveEmail:{operator:o.getEmail$},liveEmails:{operator:o.emails$}}}},57755:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(87681),t)},49766:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makeEmailSpecificProps=t.makeNewEmail=t.makeUpdatedEmail=void 0;const n=r(16516),o=r(78163),i=r(47408),a=r(95623);function s(e){const t=(0,n.defaultTo)("");return{Email:t(e.content.email),EmailName:t(e.content.emailName),Type:e.content.type||"PERSO"}}t.makeUpdatedEmail=async function(e,t){return a.default.log(`[Data] Updating existing Email with id: ${t.Id}`),{...t,...(0,o.makeUpdatedPersonalDataItemBase)({existingItem:t,updatedItem:e,itemUpdateDate:(0,i.getUnixTimestamp)()}),...s(e)}},t.makeNewEmail=async function(e){return a.default.log("[Data] Adding new Email"),{...(0,o.makeNewPersonalDataItemBase)(e),...s(e)}},t.makeEmailSpecificProps=s},99020:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getEmail$=t.emails$=void 0;const n=r(18948),o=r(3343),i=r(55220),a=r(26147);t.emails$=(0,i.getLivePersonalInfo)(a.getLiveEmailsSelector),t.getEmail$=e=>{const t=(0,a.getViewedEmailSelector)(e);return(0,n.pipe)((0,o.map)(t),(0,o.distinctUntilChanged)())}},16384:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getEmailMappers=void 0;const n=r(83539);t.getEmailMappers=()=>({spaceId:e=>e.SpaceId,lastUse:n.lastUseMapper,id:e=>e.Id})},61808:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.emailMatch=t.searchGetters=void 0;const n=r(64455),o=r(82234);t.searchGetters=[(0,o.stringProp)("Email"),(0,o.stringProp)("EmailName")],t.emailMatch=(0,n.match)(t.searchGetters)},26147:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getViewedEmailSelector=t.viewedEmailSelector=t.getLiveEmailsSelector=t.viewedQueriedEmailsSelector=t.queryEmailsSelector=t.emailMappersSelector=t.emailSelector=t.emailsSelector=t.countAllEmailsSelector=void 0;const n=r(16516),o=r(61808),i=r(16384),a=r(82864),s=r(63566),c=r(24589),u=r(97006),d=r(49551),l=r(32034),p=r(57989),m=r(40602);t.countAllEmailsSelector=e=>e.userSession.personalData.emails.length,t.emailsSelector=(0,l.createSelector)((e=>e.userSession.personalData.emails),p.quarantinedSpacesSelector,m.filterOutQuarantinedItems),t.emailSelector=(e,r)=>{const n=(0,t.emailsSelector)(e);return(0,d.findDataModelObject)(r,n)},t.emailMappersSelector=e=>(0,i.getEmailMappers)();const g=()=>o.emailMatch;t.queryEmailsSelector=(0,c.getQuerySelector)(t.emailsSelector,g,t.emailMappersSelector),t.viewedQueriedEmailsSelector=(0,n.compose)((0,s.viewListResults)(a.listView),t.queryEmailsSelector),t.getLiveEmailsSelector=(0,u.makeLiveSelectorGetter)(t.emailsSelector,(()=>a.listView),g,t.emailMappersSelector),t.viewedEmailSelector=(e,r)=>{const n=(0,t.emailSelector)(e,r);return(0,a.maybeDetailView)(n)},t.getViewedEmailSelector=e=>{const r=(0,l.createSelector)(t.emailsSelector,(t=>(0,d.findDataModelObject)(e,t)));return(0,l.createSelector)(r,a.maybeDetailView)}},87681:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},82864:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.listView=t.itemView=t.maybeDetailView=t.detailView=void 0;const n=r(16516),o=r(82043),i=(0,n.defaultTo)("");t.detailView=e=>({...(0,o.dataModelDetailView)(e),email:i(e.Email),name:i(e.EmailName),type:e.Type||"NO_TYPE"}),t.maybeDetailView=(0,o.maybeDataModelDetailView)(t.detailView),t.itemView=e=>({...(0,o.dataModelItemView)(e),email:i(e.Email),name:i(e.EmailName),type:e.Type||"NO_TYPE"}),t.listView=e=>e.map(t.itemView)},95633:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const n=r(28074),o=r(50329);t.config={commands:{},queries:{getIdentities:{selector:n.viewedQueriedIdentitiesSelector},getIdentitiesCount:{selector:n.identitiesCountSelector},getIdentity:{selector:n.viewedIdentitySelector}},liveQueries:{liveIdentities:{operator:o.identities$},liveIdentitiesCount:{operator:o.identitiesCount$},liveIdentity:{operator:o.getIdentity$}}}},75690:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(10768),t)},91494:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makeIdentitySpecificProps=t.makeNewIdentity=t.makeUpdatedIdentity=void 0;const n=r(16516),o=r(78163),i=r(95623),a=r(47408);function s(e){const t=(0,n.defaultTo)("");return{FirstName:t(e.content.firstName),MiddleName:t(e.content.middleName),LastName:t(e.content.lastName),LastName2:t(e.content.lastName2),Pseudo:t(e.content.pseudo),BirthDate:t(e.content.birthDate),BirthPlace:t(e.content.birthPlace),Title:t(e.content.title)}}t.makeUpdatedIdentity=async function(e,t){return i.Debugger.log(`[Data] Updating existing Identity with id: ${t.Id}`),{...t,...(0,o.makeUpdatedPersonalDataItemBase)({existingItem:t,updatedItem:e,itemUpdateDate:(0,a.getUnixTimestamp)()}),...s(e)}},t.makeNewIdentity=async function(e){return i.Debugger.log("[Data] Adding new Identity"),{...(0,o.makeNewPersonalDataItemBase)(e),...s(e)}},t.makeIdentitySpecificProps=s},50329:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getIdentity$=t.identitiesCount$=t.identities$=void 0;const n=r(18948),o=r(3343),i=r(55220),a=r(28074);t.identities$=(0,i.getLivePersonalInfo)(a.getLiveIdentitiesSelector),t.identitiesCount$=()=>(0,n.pipe)((0,o.map)(a.identitiesCountSelector),(0,o.distinctUntilChanged)()),t.getIdentity$=e=>{const t=(0,a.getViewedIdentitySelector)(e);return(0,n.pipe)((0,o.map)(t),(0,o.distinctUntilChanged)())}},15044:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getIdentityMappers=void 0;const n=r(83539);t.getIdentityMappers=()=>({spaceId:e=>e.SpaceId,lastUse:n.lastUseMapper,id:e=>e.Id})},86052:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.identityMatch=t.searchGetters=void 0;const n=r(64455),o=r(82234);t.searchGetters=[(0,o.stringProp)("BirthDate"),(0,o.stringProp)("BirthPlace"),(0,o.stringProp)("FirstName"),(0,o.stringProp)("LastName"),(0,o.stringProp)("LastName2"),(0,o.stringProp)("MiddleName"),(0,o.stringProp)("Pseudo")],t.identityMatch=(0,n.match)(t.searchGetters)},28074:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getViewedIdentitySelector=t.viewedIdentitySelector=t.getLiveIdentitiesSelector=t.identitiesCountSelector=t.viewedQueriedIdentitiesSelector=t.queryIdentitiesSelector=t.identityMappersSelector=t.identitySelector=t.identitiesByIdSelector=t.identitiesSelector=void 0;const n=r(16516),o=r(86052),i=r(76652),a=r(63566),s=r(24589),c=r(97006),u=r(49551),d=r(32034),l=r(15044),p=r(40602),m=r(57989);t.identitiesSelector=(0,d.createSelector)((e=>e.userSession.personalData.identities),m.quarantinedSpacesSelector,p.filterOutQuarantinedItems),t.identitiesByIdSelector=(0,d.createSelector)(t.identitiesSelector,(e=>e.reduce(((e,t)=>(e[t.Id]=t,e)),{}))),t.identitySelector=(e,r)=>{const n=(0,t.identitiesSelector)(e);return(0,u.findDataModelObject)(r,n)},t.identityMappersSelector=e=>(0,l.getIdentityMappers)();const g=()=>o.identityMatch;t.queryIdentitiesSelector=(0,s.getQuerySelector)(t.identitiesSelector,g,t.identityMappersSelector),t.viewedQueriedIdentitiesSelector=(0,n.compose)((0,a.viewListResults)(i.listView),t.queryIdentitiesSelector),t.identitiesCountSelector=e=>e.userSession.personalData.identities?.length??0,t.getLiveIdentitiesSelector=(0,c.makeLiveSelectorGetter)(t.identitiesSelector,(()=>i.listView),g,t.identityMappersSelector),t.viewedIdentitySelector=(e,r)=>{const n=(0,t.identitySelector)(e,r);return(0,i.maybeDetailView)(n)},t.getViewedIdentitySelector=e=>{const r=(0,d.createSelector)(t.identitiesSelector,(t=>(0,u.findDataModelObject)(e,t)));return(0,d.createSelector)(r,i.maybeDetailView)}},10768:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},76652:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.listView=t.itemView=t.maybeDetailView=t.detailView=void 0;const n=r(16516),o=r(82043),i=(0,n.defaultTo)("");t.detailView=e=>({...(0,o.dataModelDetailView)(e),birthDate:i(e.BirthDate),birthPlace:i(e.BirthPlace),firstName:i(e.FirstName),lastName2:i(e.LastName2),lastName:i(e.LastName),middleName:i(e.MiddleName),pseudo:i(e.Pseudo),title:e.Title}),t.maybeDetailView=(0,o.maybeDataModelDetailView)(t.detailView),t.itemView=e=>({...(0,o.dataModelItemView)(e),birthDate:i(e.BirthDate),birthPlace:i(e.BirthPlace),firstName:i(e.FirstName),lastName2:i(e.LastName2),lastName:i(e.LastName),middleName:i(e.MiddleName),pseudo:i(e.Pseudo),title:e.Title}),t.listView=e=>e.map(t.itemView)},6210:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const n=r(81473),o=r(96055);t.config={commands:{},queries:{getPersonalWebsite:{selector:n.viewedPersonalWebsiteSelector},getPersonalWebsites:{selector:n.viewedQueriedPersonalWebsitesSelector}},liveQueries:{livePersonalWebsite:{operator:o.getPersonalWebsite$},livePersonalWebsites:{operator:o.personalWebsites$}}}},91317:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(44482),t)},29565:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makePersonalWebsiteSpecificProps=t.makeNewPersonalWebsite=t.makeUpdatedPersonalWebsite=void 0;const n=r(16516),o=r(78163),i=r(47408),a=r(95623);function s(e){const t=(0,n.defaultTo)("");return{Website:t(e.content.website),Name:t(e.content.name)}}t.makeUpdatedPersonalWebsite=async function(e,t){return a.default.log(`[Data] Updating existing PersonalWebsite with id: ${t.Id}`),{...t,...(0,o.makeUpdatedPersonalDataItemBase)({existingItem:t,updatedItem:e,itemUpdateDate:(0,i.getUnixTimestamp)()}),...s(e)}},t.makeNewPersonalWebsite=async function(e){return a.default.log("[Data] Adding new PersonalWebsite"),{...(0,o.makeNewPersonalDataItemBase)(e),...s(e)}},t.makePersonalWebsiteSpecificProps=s},96055:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getPersonalWebsite$=t.personalWebsites$=void 0;const n=r(18948),o=r(3343),i=r(55220),a=r(81473);t.personalWebsites$=(0,i.getLivePersonalInfo)(a.getLivePersonalWebsitesSelector),t.getPersonalWebsite$=e=>{const t=(0,a.getViewedPersonalWebsiteSelector)(e);return(0,n.pipe)((0,o.map)(t),(0,o.distinctUntilChanged)())}},93315:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getPersonalWebsiteMappers=void 0;const n=r(83539);t.getPersonalWebsiteMappers=()=>({spaceId:e=>e.SpaceId,lastUse:n.lastUseMapper,id:e=>e.Id})},86963:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.personalWebsiteMatch=t.searchGetters=void 0;const n=r(64455),o=r(82234);t.searchGetters=[(0,o.stringProp)("Name"),(0,o.stringProp)("Website")],t.personalWebsiteMatch=(0,n.match)(t.searchGetters)},81473:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getViewedPersonalWebsiteSelector=t.viewedPersonalWebsiteSelector=t.getLivePersonalWebsitesSelector=t.viewedQueriedPersonalWebsitesSelector=t.queryPersonalWebsitesSelector=t.personalWebsiteMappersSelector=t.personalWebsiteSelector=t.personalWebsitesSelector=void 0;const n=r(16516),o=r(32034),i=r(86963),a=r(70024),s=r(63566),c=r(24589),u=r(97006),d=r(49551),l=r(93315),p=r(40602),m=r(57989);t.personalWebsitesSelector=(0,o.createSelector)((e=>e.userSession.personalData.personalWebsites),m.quarantinedSpacesSelector,p.filterOutQuarantinedItems),t.personalWebsiteSelector=(e,r)=>{const n=(0,t.personalWebsitesSelector)(e);return(0,d.findDataModelObject)(r,n)},t.personalWebsiteMappersSelector=e=>(0,l.getPersonalWebsiteMappers)();const g=()=>i.personalWebsiteMatch;t.queryPersonalWebsitesSelector=(0,c.getQuerySelector)(t.personalWebsitesSelector,g,t.personalWebsiteMappersSelector),t.viewedQueriedPersonalWebsitesSelector=(0,n.compose)((0,s.viewListResults)(a.listView),t.queryPersonalWebsitesSelector),t.getLivePersonalWebsitesSelector=(0,u.makeLiveSelectorGetter)(t.personalWebsitesSelector,(()=>a.listView),g,t.personalWebsiteMappersSelector),t.viewedPersonalWebsiteSelector=(e,r)=>{const n=(0,t.personalWebsiteSelector)(e,r);return(0,a.maybeDetailView)(n)},t.getViewedPersonalWebsiteSelector=e=>{const r=(0,o.createSelector)(t.personalWebsitesSelector,(t=>(0,d.findDataModelObject)(e,t)));return(0,o.createSelector)(r,a.maybeDetailView)}},44482:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},70024:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.listView=t.itemView=t.maybeDetailView=t.detailView=void 0;const n=r(16516),o=r(82043),i=(0,n.defaultTo)("");t.detailView=e=>({...(0,o.dataModelDetailView)(e),name:i(e.Name),personalNote:i(e.PersonalNote),website:i(e.Website)}),t.maybeDetailView=(0,o.maybeDataModelDetailView)(t.detailView),t.itemView=e=>({...(0,o.dataModelItemView)(e),name:i(e.Name),website:i(e.Website)}),t.listView=e=>e.map(t.itemView)},14037:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const n=r(82439),o=r(21264);t.config={commands:{},queries:{getPhone:{selector:n.viewedPhoneSelector},getPhones:{selector:n.viewedQueriedPhonesSelector}},liveQueries:{livePhone:{operator:o.getPhone$},livePhones:{operator:o.phones$}}}},90609:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(98013),t)},39732:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parsePhoneNumbers=t.makePhoneSpecificProps=t.makeNewPhone=t.makeUpdatedPhone=void 0;const n=r(16516),o=r(33321),i=r(53576),a=r(78163),s=r(86056),c=r(10360),u=r(47408),d=r(28445),l=r(95623);function p(e){const t=(0,n.defaultTo)(""),{Number:r,NumberInternational:o,NumberNational:a}=m(e);return{Number:r,NumberInternational:o,NumberNational:a,PersonalNote:t(e.content.personalNote),PhoneName:e.content.phoneName||a,Type:i.PhoneType[e.content.type]||i.PhoneType.PHONE_TYPE_ANY}}function m(e){const{localeFormat:t,number:r}=e.content;if(!r)return{Number:"",NumberInternational:"",NumberNational:""};const n=(0,c.isProposedLocaleLocalized)(t)&&i.Country[t]||i.Country[(0,s.getPlatformInfo)().country]||i.Country.US;if(!(n?(0,o.isValidNumber)(r,n):(0,o.isValidNumber)(r)))return{Number:(0,d.removeNonDigitCharacters)(r),NumberInternational:r,NumberNational:r};const a=(0,o.formatNumber)({country:n,phone:r},"National"),u=(0,o.formatNumber)({country:n,phone:r},"International");return{Number:(0,d.removeNonDigitCharacters)(r),NumberInternational:u,NumberNational:a}}t.makeUpdatedPhone=async function(e,t){return l.default.log(`[Data] Updating existing Phone with id: ${t.Id}`),{...t,...(0,a.makeUpdatedPersonalDataItemBase)({existingItem:t,updatedItem:e,itemUpdateDate:(0,u.getUnixTimestamp)()}),...p(e)}},t.makeNewPhone=async function(e){return l.default.log("[Data] Adding new Phone"),{...(0,a.makeNewPersonalDataItemBase)(e),...p(e)}},t.makePhoneSpecificProps=p,t.parsePhoneNumbers=m},21264:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getPhone$=t.phones$=void 0;const n=r(18948),o=r(3343),i=r(55220),a=r(82439);t.phones$=(0,i.getLivePersonalInfo)(a.getLivePhonesSelector),t.getPhone$=e=>{const t=(0,a.getViewedPhoneSelector)(e);return(0,n.pipe)((0,o.map)(t),(0,o.distinctUntilChanged)())}},90076:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getPhoneMappers=void 0;const n=r(83539);t.getPhoneMappers=()=>({spaceId:e=>e.SpaceId,lastUse:n.lastUseMapper,id:e=>e.Id})},41648:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.phoneMatch=t.searchGetters=void 0;const n=r(64455),o=r(82234);t.searchGetters=[(0,o.stringProp)("Number"),(0,o.stringProp)("PhoneName")],t.phoneMatch=(0,n.match)(t.searchGetters)},82439:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getViewedPhoneSelector=t.viewedPhoneSelector=t.getLivePhonesSelector=t.viewedQueriedPhonesSelector=t.queryPhonesSelector=t.phoneMappersSelector=t.phoneSelector=t.phonesSelector=void 0;const n=r(16516),o=r(41648),i=r(83566),a=r(90076),s=r(63566),c=r(24589),u=r(97006),d=r(49551),l=r(32034),p=r(40602),m=r(57989);t.phonesSelector=(0,l.createSelector)((e=>e.userSession.personalData.phones),m.quarantinedSpacesSelector,p.filterOutQuarantinedItems),t.phoneSelector=(e,r)=>{const n=(0,t.phonesSelector)(e);return(0,d.findDataModelObject)(r,n)},t.phoneMappersSelector=e=>(0,a.getPhoneMappers)();const g=()=>o.phoneMatch;t.queryPhonesSelector=(0,c.getQuerySelector)(t.phonesSelector,g,t.phoneMappersSelector),t.viewedQueriedPhonesSelector=(0,n.compose)((0,s.viewListResults)(i.listView),t.queryPhonesSelector),t.getLivePhonesSelector=(0,u.makeLiveSelectorGetter)(t.phonesSelector,(()=>i.listView),g,t.phoneMappersSelector),t.viewedPhoneSelector=(e,r)=>{const n=(0,t.phoneSelector)(e,r);return(0,i.maybeDetailView)(n)},t.getViewedPhoneSelector=e=>{const r=(0,l.createSelector)(t.phonesSelector,(t=>(0,d.findDataModelObject)(e,t)));return(0,l.createSelector)(r,i.maybeDetailView)}},98013:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},83566:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.listView=t.itemView=t.maybeDetailView=t.detailView=void 0;const n=r(16516),o=r(82043),i=(0,n.defaultTo)(""),a=e=>i(e.NumberInternational||e.NumberNational||e.Number);t.detailView=e=>({...(0,o.dataModelDetailView)(e),displayNumber:a(e),name:i(e.PhoneName),number:i(e.Number),numberInternational:i(e.NumberNational),numberNational:i(e.NumberNational),personalNote:i(e.PersonalNote),type:e.Type}),t.maybeDetailView=(0,o.maybeDataModelDetailView)(t.detailView),t.itemView=e=>({...(0,o.dataModelItemView)(e),displayNumber:a(e),name:i(e.PhoneName),numberInternational:i(e.NumberNational),number:i(e.Number),type:e.Type}),t.listView=e=>e.map(t.itemView)},55220:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getLivePersonalInfo=void 0;const n=r(18948),o=r(3343),i=r(35893),a=r(33627);t.getLivePersonalInfo=e=>t=>{const r=(0,i.parseToken)(t),s=e(r);return(0,n.pipe)((0,o.map)(s),(0,o.distinctUntilChanged)(((e,t)=>(0,a.sameBatch)(e.items,t.items)&&e.matchingCount===t.matchingCount)))}},64455:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.match=void 0;const n=r(97601);t.match=e=>(t,r)=>"string"==typeof t&&0!==t.length&&e.some((e=>{const o=e(r)||"";return(0,n.normalizeString)(o).includes(t)}))},82234:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.stringProp=void 0;const n=r(16516);t.stringProp=e=>(0,n.prop)(e)},63566:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.viewListResults=void 0,t.viewListResults=e=>({items:t,matchingCount:r})=>({items:e(t),matchingCount:r})},80529:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const n=r(24465),o=r(89642),i=r(37403),a=r(90489),s=r(81043),c=r(49006),u=r(27416),d=r(32818),l=r(9124),p=r(40409);t.config={commands:{downloadSecureFile:{handler:a.downloadSecureFileHandler},deleteSecureFile:{handler:c.deleteSecureFileHandler},addSecureFile:{handler:n.addSecureFileHandler},validateSecureFile:{handler:d.validateSecureFileHandler},commitSecureFile:{handler:s.commitSecureFileHandler},initSecureFilesStorageInfo:{handler:i.initSecureFilesStorageInfoHandler},chunkTransferDone:{handler:l.chunkTransferDoneHandler},clearSecureFilesState:{handler:p.clearSecureFileStateHandler}},queries:{getSecureFilesInfoList:{selector:o.secureFileInfoSelector},getSecureFilesQuota:{selector:o.secureFilesQuotaSelector},getFileDownloadProgress:{selector:o.secureFileDownloadSelector},getFileUploadProgress:{selector:o.secureFileUploadSelector}},liveQueries:{liveFileDownloadProgress:{operator:u.getFileDownloadProgress$},liveFileUploadProgress:{operator:u.getFileUploadProgress$},liveSecureFilesQuota:{operator:u.secureFilesQuota$}}}},60802:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(86562),t)},24465:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addSecureFileHandler=t.createSecureFile=void 0;const n=r(28354),o=r(90622),i=r(16593),a=r(86562),s=r(69530),c=r(46445),u=r(65675),d=r(16038),l=r(55623),p=r(27993),m=r(20810),g=r(89642),f=r(99994),S={success:!1,error:{code:a.SecureFileResultErrorCode.SERVER_ERROR}},h=Math.pow(1024,2)/2,y=e=>{switch(e){case a.SecureFileResultErrorCode.MAX_CONTENT_LENGTH_EXCEEDED:return a.SecureFileResultErrorCode.MAX_CONTENT_LENGTH_EXCEEDED;case a.SecureFileResultErrorCode.QUOTA_EXCEEDED:return a.SecureFileResultErrorCode.QUOTA_EXCEEDED;default:return a.SecureFileResultErrorCode.SERVER_ERROR}},v=(e,t,r,o,i,a)=>{const s=`{${(0,n.v4)()}}`,c=Math.floor(Date.now()/1e3);return{kwType:"KWSecureFileInfo",Id:s,LastBackupTime:0,CryptoKey:(0,d.bufferToBase64)(t),DownloadKey:"",Filename:o,LocalSize:e.byteLength,RemoteSize:r.byteLength,Type:i,CreationDatetime:c,UserModificationDatetime:c,Owner:a}};async function E(e,t,r,n){try{const{cryptoConfig:o}=(0,u.parsePayload)("$1$noderivation$aes256$cbchmac$16$"),i=(0,l.getRandomValues)(32),a=await(0,c.hashAndSplitKey)(i),m=(0,p.generateIV)(),g=await(0,s.encryptAES256)({key:a.aes,iv:m,clearData:e}),f={salt:null,iv:m,hash:await(0,s.signHashHmacSHA256)({key:a.hmac,data:(0,d.concatBuffers)(m,g)}),cipheredContent:g,cryptoConfig:o},S=(0,u.convertDashlaneSecureDataFlexibleToTransportableData)(f);return{success:!0,secureFileDataBuffer:S,secureFileInfo:v(e,i,S,t,r,n)}}catch(e){return{success:!1}}}t.createSecureFile=E,t.addSecureFileHandler=async function({wsService:e,storeService:t},r){const n=(0,i.userIdSelector)(t.getState());if(!(0,f.validateSecureFile)(r.fileName,r.fileType))return{success:!1,error:{code:a.SecureFileResultErrorCode.INVALID_FILE_TYPE}};let s;t.dispatch((0,m.secureFileStartUploadAction)(r.serializedContent.length)),t.dispatch((0,m.secureFileStartCipheringAction)());try{const e=JSON.parse(r.serializedContent);s=new Uint8Array(e).buffer}catch(e){return{success:!1,error:{code:a.SecureFileResultErrorCode.INTERNAL_ERROR}}}const{secureFileDataBuffer:c,secureFileInfo:u}=await E(s,r.fileName,r.fileType,n);if((0,g.secureFilesQuotaSelector)(t.getState()).remaining<c.byteLength)return{success:!1,error:{code:a.SecureFileResultErrorCode.QUOTA_EXCEEDED}};const d=setInterval((()=>{t.dispatch((0,m.secureFileUploadChunkAction)(h))}),1e3);let l=null;try{l=await e.secureFile.getUploadLink({contentLength:u.RemoteSize,secureFileInfoId:u.Id,login:n,uki:(0,o.ukiSelector)(t.getState())})}catch(e){return clearInterval(d),t.dispatch((0,m.secureFileUploadErrorAction)()),(e=>"getAdditionalInfo"in e?{success:!1,error:{code:y(e.getAdditionalInfo().webServiceSubMessage)}}:S)(e)}return 200===l.code?(u.DownloadKey=l.content.key,await async function(e,t){try{const r=t.content.url,n=new FormData;for(const e of Object.keys(t.content.fields))n.append(e,t.content.fields[e]);return n.append("key",`${t.content.key}`),n.append("acl",`${t.content.acl}`),n.append("file",new Blob([e])),204===(await fetch(r,{method:"POST",body:n})).status}catch(e){return!1}}(c,l)?(t.dispatch((0,m.secureFileSetStorageInfoAction)(l.content.quota)),clearInterval(d),t.dispatch((0,m.secureFileUploadDoneAction)()),t.dispatch((0,m.secureFileUploadClearAction)()),{success:!0,secureFileInfo:u}):(clearInterval(d),S)):(clearInterval(d),t.dispatch((0,m.secureFileUploadErrorAction)()),S)}},9124:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.chunkTransferDoneHandler=void 0;const n=r(20810);t.chunkTransferDoneHandler=async function({storeService:e},t){return e.dispatch((0,n.secureFileChunkReadyAction)(t)),Promise.resolve()}},40409:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.clearSecureFileStateHandler=void 0;const n=r(20810);t.clearSecureFileStateHandler=async function({storeService:e},t){return e.dispatch((0,n.secureFileClearAction)(t)),Promise.resolve()}},81043:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.commitSecureFileHandler=void 0;const n=r(90622),o=r(16593),i=r(48313);t.commitSecureFileHandler=async function({wsService:e,sessionService:t,storeService:r},{secureFileInfo:a}){if(200!==(await e.secureFile.commit({key:a.DownloadKey,secureFileInfoId:a.Id,login:(0,o.userIdSelector)(r.getState()),uki:(0,n.ukiSelector)(r.getState())})).code)return{success:!1};try{return r.dispatch((0,i.savePersonalDataItem)(a,a.kwType)),t.getInstance().user.persistPersonalData(),{success:!0}}catch(e){return{success:!1}}}},49006:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.deleteSecureFileHandler=void 0;const n=r(53576),o=r(90622),i=r(76496),a=r(16593),s=r(86562),c=r(20810);t.deleteSecureFileHandler=async(e,t)=>{const{storeService:r,wsService:u,eventLoggerService:d}=e,l=r.getState(),p=(0,a.userIdSelector)(l),m=(0,o.ukiSelector)(l),g=await(0,i.deletePersonalDataItem)({storeService:r,wsService:u,eventLoggerService:d},t.id);if(!g.success&&g.reason!==n.RemovePersonalDataItemFailureReason.NOT_FOUND)return{success:!1,error:{code:s.SecureFileResultErrorCode.INTERNAL_ERROR}};let f=null;try{f=await u.secureFile.delete({login:p,uki:m,secureFileInfoId:t.id})}catch(e){return{success:!1,error:{code:s.SecureFileResultErrorCode.SERVER_ERROR}}}return g.reason===n.RemovePersonalDataItemFailureReason.NOT_FOUND?{success:!1,error:{code:s.SecureFileResultErrorCode.FILE_NOT_FOUND}}:200!==f.code?{success:!1,error:{code:s.SecureFileResultErrorCode.SERVER_ERROR}}:(r.dispatch((0,c.secureFileSetStorageInfoAction)(f.content.quota)),{success:!0})}},90489:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.downloadSecureFileHandler=void 0;const n=r(86562),o=r(16516),i=r(20810),a=r(22349),s=r(37104),c=r(71422),u={success:!1,error:{code:n.SecureFileResultErrorCode.INTERNAL_ERROR}},d=15*Math.pow(1024,2);t.downloadSecureFileHandler=async(e,t)=>{const r=await(0,c.getDownloadLink)(e,t);if(!r)return u;const n=await(0,s.downloadFileFromStorage)(e,r,t);if(!n.success)return e.storeService.dispatch((0,i.secureFileDownloadErrorAction)(t.downloadKey)),u;e.storeService.dispatch((0,i.secureFileStartDecipheringAction)(t.downloadKey));const l=await(0,a.decipherSecureFileContent)(n.chunks,t.cryptoKey);if(null===l)return e.storeService.dispatch((0,i.secureFileDownloadErrorAction)(t.downloadKey)),u;const p=new Uint8Array(l),m=JSON.stringify(Array.from(p)),g=m.length>d?(0,o.splitEvery)(d,m):[m];return e.storeService.dispatch((0,i.secureFileChunkReadyAction)(t.downloadKey,g)),{success:!0}}},37403:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.initSecureFilesStorageInfoHandler=void 0;const n=r(28354),o=r(90622),i=r(16593),a=r(86562),s=r(20810);t.initSecureFilesStorageInfoHandler=async function({wsService:e,storeService:t}){const r=(0,i.userIdSelector)(t.getState());let c=null;try{c=await e.secureFile.getUploadLink({contentLength:0,secureFileInfoId:(0,n.v4)(),login:r,uki:(0,o.ukiSelector)(t.getState())})}catch(e){return{success:!1,error:{code:a.SecureFileResultErrorCode.SERVER_ERROR}}}return 200===c.code?(t.dispatch((0,s.secureFileSetStorageInfoAction)(c.content.quota)),{success:!0}):(t.dispatch((0,s.secureFileSetStorageInfoAction)(null)),{success:!1})}},32818:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.validateSecureFileHandler=void 0;const n=r(38250),o=r(99994);t.validateSecureFileHandler=async function(e,t){return(0,o.validateSecureFile)(t.fileName,t.fileType)?{success:!0}:{success:!1,error:{code:n.SecureFileResultErrorCode.INVALID_FILE_TYPE}}}},27416:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.secureFilesQuota$=t.getFileUploadProgress$=t.getFileDownloadProgress$=void 0;const n=r(18948),o=r(3343),i=r(89642);t.getFileDownloadProgress$=e=>{const t=(0,i.getSecureFileDownloadSelector)(e);return(0,n.pipe)((0,o.map)(t),(0,o.distinctUntilChanged)())},t.getFileUploadProgress$=()=>(0,n.pipe)((0,o.map)(i.secureFileUploadSelector),(0,o.distinctUntilChanged)()),t.secureFilesQuota$=()=>(0,n.pipe)((0,o.map)(i.secureFilesQuotaSelector),(0,o.distinctUntilChanged)())},89642:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.secureFilesQuotaSelector=t.getSecureFileDownloadSelector=t.secureFileUploadSelector=t.secureFileDownloadSelector=t.secureFileInfoSelector=void 0;const n=r(38250),o=r(16516);t.secureFileInfoSelector=e=>e.userSession.personalData.secureFileInfo,t.secureFileDownloadSelector=(e,t)=>{const r=e.userSession.secureFileStorageState.downloads[t];if(!r)return null;const i=r?.status===n.FileDownloadStatus.ChunkReady?{chunk:r.chunks[r.currentChunkIndex]}:{};return{...(0,o.omit)(["chunks","currentChunkIndex"],r),...i}},t.secureFileUploadSelector=e=>e.userSession.secureFileStorageState.upload,t.getSecureFileDownloadSelector=e=>r=>(0,t.secureFileDownloadSelector)(r,e),t.secureFilesQuotaSelector=e=>e.userSession.secureFileStorageState.quota},22349:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.decipherSecureFileContent=void 0;const n=r(16038),o=r(46445),i=r(69530),a=r(65675);t.decipherSecureFileContent=async(e,t)=>{const r=(0,a.parseCipheredData)(e),s=r.cryptoConfig;if(!(0,a.isDashlaneSecureDataFlexible)(r)||!(0,a.isNoDerivation)(s.derivation))return null;const c=await(0,o.hashAndSplitKey)((0,n.base64ToBuffer)(t)),u=await(0,i.signHashHmacSHA256)({key:c.hmac,data:(0,n.concatBuffers)(r.iv,r.cipheredContent)});return(0,n.bufferToBase64)(u)!==(0,n.bufferToBase64)(r.hash)?null:await(0,i.decryptAES256)({key:c.aes,iv:r.iv,encryptedData:r.cipheredContent})}},37104:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.downloadFileFromStorage=void 0;const n=r(20810);t.downloadFileFromStorage=async(e,t,r)=>{try{const o=await fetch(t);if(!o.ok)return{success:!1};const i=o.body.getReader(),a=[],s=o.headers.get("Content-Length");e.storeService.dispatch((0,n.secureFileStartDownloadAction)(r.downloadKey,Number.parseInt(s,10)));let c=0,u=!0,d=0;for(;u;){const{done:t,value:o}=await i.read();u=!t,u&&(a.push(new Uint8Array(o)),c+=o.length,d+=o.length,d>1e5&&(e.storeService.dispatch((0,n.secureFileDownloadChunkAction)(r.downloadKey,d)),d=0))}let l=0;const p=new Uint8Array(c);return a.forEach((e=>{p.set(e,l),l+=e.length})),{success:!0,chunks:p}}catch(e){return{success:!1}}}},71422:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getDownloadLink=void 0;const n=r(90622),o=r(95623),i=r(16593),a=r(20810);t.getDownloadLink=async(e,t)=>{const{storeService:r,wsService:s}=e,c=r.getState(),u=(0,i.userIdSelector)(c),d=(0,n.ukiSelector)(c);let l=null;try{l=await s.secureFile.getDownloadLink({login:u,uki:d,key:t.downloadKey})}catch(r){return(0,o.logDebug)({tag:["SecureFile"],message:"Error while getting S3 download link",details:{error:r}}),e.storeService.dispatch((0,a.secureFileDownloadErrorAction)(t.downloadKey)),null}return 200!==l.code?(e.storeService.dispatch((0,a.secureFileDownloadErrorAction)(t.downloadKey)),null):l.content.url}},99994:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.validateSecureFile=void 0;const n=r(98337);t.validateSecureFile=(e,t)=>{const r=e.split(".").pop().toLowerCase();return((e,t)=>"rar"===e&&!t)(r,t)||(e=>(0,n.getSecureDocumentsAllowedMimeTypes)().includes(e))(t)&&(e=>(0,n.getSecureDocumentsAllowedExtensions)().includes(`.${e}`))(r)}},86562:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FileUploadStatus=t.FileDownloadStatus=t.SecureFileResultErrorCode=void 0,function(e){e.MAX_CONTENT_LENGTH_EXCEEDED="MAX_CONTENT_LENGTH_EXCEEDED",e.QUOTA_EXCEEDED="QUOTA_EXCEEDED",e.INVALID_FILE_TYPE="INVALID_FILE_TYPE",e.INTERNAL_ERROR="INTERNAL_ERROR",e.SERVER_ERROR="SERVER_ERROR",e.FILE_NOT_FOUND="FILE_NOT_FOUND"}(t.SecureFileResultErrorCode||(t.SecureFileResultErrorCode={})),function(e){e.Initial="Initial",e.Downloading="Downloading",e.Deciphering="Deciphering",e.Error="Error",e.ChunkReady="ChunkReady",e.ChunkDownloaded="ChunkDownloaded",e.TransferComplete="TransferComplete"}(t.FileDownloadStatus||(t.FileDownloadStatus={})),function(e){e.None="None",e.Initial="Initial",e.Uploading="Uploading",e.Ciphering="Ciphering",e.Done="Done",e.Error="Error"}(t.FileUploadStatus||(t.FileUploadStatus={}))},74172:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const n=r(94187);t.config={commands:{setupDefaultNoteCategories:{handler:n.setupDefaultNoteCategoriesHandler}},queries:{},liveQueries:{}}},94187:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setupDefaultNoteCategoriesHandler=void 0;const n=r(92233),o=r(54565),i=r(23136);t.setupDefaultNoteCategoriesHandler=async function(e,t){try{const{storeService:r,sessionService:a}=e;if(!r.isAuthenticated())return{success:!1};const s=r.getPersonalData().noteCategories;return s&&0!==s.length||(t.categories.forEach((e=>{(0,o.saveNoteCategory)(r,{name:e})})),a.getInstance().user.persistPersonalData(),(0,i.getDebounceSync)(r,a)({immediateCall:!0},n.Trigger.Save)),{success:!0}}catch(e){return{success:!1}}}},54565:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.saveNoteCategory=t.getUpdatedNoteCategory=t.getNewNoteCategory=void 0;const n=r(45291),o=r(95623),i=r(78320),a=r(49551);function s(e){return{kwType:"KWSecureNoteCategory",Id:(0,i.generateItemUuid)(),CategoryName:e.trim(),LastBackupTime:0}}function c(e,t){const r=(0,a.findDataModelObject)(t.id,e);if(!r)throw new Error("UI asks to update an unknown Note Category");return{...r,CategoryName:t.name.trim()}}t.getNewNoteCategory=s,t.getUpdatedNoteCategory=c,t.saveNoteCategory=function(e,t){if(!e.isAuthenticated())return void(0,o.logError)({message:"No session available to save note category"});const r=e.getPersonalData().noteCategories;if(!function(e,t){return"string"==typeof t&&""!==t.trim()&&!e.some((e=>e.CategoryName===t))}(r,t.name))return void(0,o.logError)({message:"Category name is invalid"});const i=t.id?c(r,t):s(t.name);return e.dispatch((0,n.saveNoteCategory)(i)),i}},80818:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const n=r(81438),o=r(49293),i=r(77749);t.config={commands:{addSecureNote:{handler:o.addSecureNoteHandler},updateSecureNote:{handler:o.updateSecureNoteHandler},deleteSecureNote:{handler:o.deleteSecureNoteHandler}},queries:{getNote:{selector:n.viewedNoteSelector},getNoteCategories:{selector:n.viewedNoteCategoriesSelector},getNotes:{selector:n.viewedQueriedNotesSelector},getNotesCount:{selector:n.notesCountSelector},getNotesPage:{selector:n.notesPageSelector},getNotesPaginationToken:{selector:n.notesPaginationTokenSelector}},liveQueries:{liveNote:{operator:i.getNote$},liveNotes:{operator:i.notes$},liveNotesBatch:{operator:i.notesBatch$},liveNotesCount:{operator:i.notesCount$}}}},76707:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(13151),t)},46083:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.handleLimitedSharedNotes=void 0;const n=r(89489),o=r(37275);t.handleLimitedSharedNotes=function(e,t,r){const i=(0,o.getSharingDataWithCollections)(t),a=(0,n.getLimitedSharedItemIds)(t,i.collections,i.itemGroups,r);return e.map((e=>({...e,...a[e.Id]?{limitedPermissions:!0}:{}})))}},67859:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addSecureNoteHandler=t.noteFormatter=void 0;const n=r(92233),o=r(53576),i=r(23136),a=r(71141),s=r(48313),c=r(47408),u=r(78320),d=r(70252),l=r(13675),p=r(79980),m=r(73566),g=r(85225),f=r(56915);t.noteFormatter=e=>{const t=(0,l.sanitizeInputPersonalData)(e),r=(0,c.getUnixTimestamp)();return{kwType:"KWSecureNote",AnonId:(0,u.generateItemUuid)(),CreationDatetime:r,Id:(0,u.generateItemUuid)(),LocaleFormat:o.Country.US,SpaceId:t.spaceId||"",UserModificationDatetime:r,LastBackupTime:0,Title:t.title||"Untitled note",Content:t.content||"",Category:t.category||"noCategory",Secured:t.secured||!1,Type:t.type||"GRAY",Attachments:t.attachments||[]}},t.addSecureNoteHandler=async(e,r)=>{try{return await(async({applicationModulesAccess:e,storeService:r,sessionService:n,eventLoggerService:o},a)=>{const c=r.getPersonalData(),u=(0,t.noteFormatter)(a);if(!u.SpaceId){const t=await(0,i.getDefaultSpaceId)(e,r);u.SpaceId=t}(0,p.logAddVaultItem)(r,o,u);const d=(0,m.getUpdatedItemChangeHistory)({deviceName:r.getLocalSettings().deviceName,personalData:c,change:(0,g.makeUpdateChange)(u),userLogin:r.getUserLogin(),platformInfo:(0,f.platformInfoSelector)(r.getState())});r.dispatch((0,s.savePersonalDataItem)(u,u.kwType,d)),n.getInstance().user.persistPersonalData()})(e,r),(0,i.getDebounceSync)(e.storeService,e.sessionService)({immediateCall:!0},n.Trigger.Save),Promise.resolve({success:!0})}catch(e){return(0,d.sendExceptionLog)({error:e}),e instanceof a.RequestError&&void 0!==e.code?Promise.resolve({success:!1,error:{code:e.code}}):Promise.resolve({success:!1})}}},5948:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.deleteSecureNoteHandler=void 0;const n=r(92233),o=r(23136),i=r(81438),a=r(13151),s=r(70252),c=r(45291),u=r(79980),d=r(36513),l=r(90622),p=r(36884),m=r(58107),g=r(71646),f=r(63698),S=r(45157),h=r(16593),y=r(52102);t.deleteSecureNoteHandler=async function(e,{id:t}){const r=await(async({storeService:e,eventLoggerService:t,wsService:r},n)=>{const o=e.getState();try{let s=null;const v=(0,i.noteSelector)(o,n);if(!v)return{success:!1,error:{code:a.DeleteSecureNoteErrorCode.NOT_FOUND}};const E=await(0,d.makeCryptoService)(),A=(0,h.userLoginSelector)(o),_=(0,l.ukiSelector)(e.getState()),{makeRefuseItemGroupEvent:T}=(0,p.makeItemGroupService)(r,E),{Id:I}=v,{userGroups:b,itemGroups:w}=(0,y.sharingDataSelector)(o),C=(0,g.findItemItemGroup)(I,w);if(C){const t=(0,m.isUserLastAdmin)(C,A),r=(0,m.doesUserReceiveItemGroupViaGroup)(C,b,A);if(t||r)return{success:!1,error:{code:t?a.DeleteSecureNoteErrorCode.LEAVE_SHARING_FORBIDDEN_LAST_ADMIN:a.DeleteSecureNoteErrorCode.LEAVE_SHARING_FORBIDDEN_GROUP_ITEM}};try{const{groupId:e,revision:t}=C,{refuseItemGroup:r}=(0,f.makeItemGroupWS)(),n=await T(e,t,null);await r(A,_,n)}catch(e){return{success:!1,error:{code:a.DeleteSecureNoteErrorCode.LEAVE_SHARING_FAILED}}}}s=(0,S.getRemoveChangeHistory)(e,v);const D=(0,c.removePersonalItem)(v.kwType,v.Id,s);return e.dispatch(D),(0,u.logDeleteVaultItem)(e,t,v),{success:!0}}catch(e){const t=new Error(`[SecureNotes] - deleteSecureNote: ${e}`);return(0,s.sendExceptionLog)({error:t}),{success:!1,error:{code:a.DeleteSecureNoteErrorCode.INTERNAL_ERROR}}}})(e,t);return r.success&&(0,o.getDebounceSync)(e.storeService,e.sessionService)({immediateCall:!0},n.Trigger.Save),Promise.resolve(r)}},49293:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(67859),t),o(r(71407),t),o(r(5948),t)},71407:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.updateSecureNoteHandler=t.getUpdatedSecureNote=void 0;const n=r(92233),o=r(81438),i=r(23136),a=r(71141),s=r(48313),c=r(47408),u=r(70252),d=r(13675),l=r(13151),p=r(79980),m=r(72079),g=r(73566),f=r(85225),S=r(56915),h=r(84511);function y(e,t){if(!e)throw new a.RequestError("[updateSecureNote]: unable to find secure note to update.",l.SecureNoteSaveResultErrorCode.NOT_FOUND);const r=(0,d.sanitizeInputPersonalData)(t),n=(0,c.getUnixTimestamp)(),o={Title:r.title??e.Title,Content:r.content??e.Content,Category:r.category??e.Category,Secured:r.secured??e.Secured,Type:r.type??e.Type,SpaceId:r.spaceId??e.SpaceId,UserModificationDatetime:n,Attachments:r.attachments??e.Attachments};return{...e,...o}}t.getUpdatedSecureNote=y,t.updateSecureNoteHandler=async function(e,t){try{!function({storeService:e,sessionService:t,eventLoggerService:r},n){if(!e.isAuthenticated())throw new Error("No session available to updateSecureNote");const i=e.getPersonalData(),a=(0,o.noteSelector)(e.getState(),n.id),c=y(a,n);(0,m.notifySharersNoteUpdated)(e,a,c),(0,p.logEditVaultItem)(e,r,c,a);const u=(0,g.getUpdatedItemChangeHistory)({deviceName:e.getLocalSettings().deviceName,personalData:i,change:(0,f.makeUpdateChange)(c),userLogin:e.getUserLogin(),platformInfo:(0,S.platformInfoSelector)(e.getState())});e.dispatch((0,s.savePersonalDataItem)(c,c.kwType,u)),t.getInstance().user.persistPersonalData()}(e,t);const r=e.storeService.getState();return(0,h.isSharedSelector)(r,t.id)?await e.sessionService.getInstance().user.attemptSync(n.Trigger.SettingsChange):(0,i.getDebounceSync)(e.storeService,e.sessionService)({immediateCall:!0},n.Trigger.Save),Promise.resolve({success:!0})}catch(e){return(0,u.sendExceptionLog)({error:e}),e instanceof a.RequestError&&void 0!==e.code?Promise.resolve({success:!1,error:{code:e.code}}):Promise.resolve({success:!1})}}},71141:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.updatedAt=t.createdAt=t.getCategory=t.RequestError=void 0;const n=r(16516);class o extends Error{constructor(e,t){super(e),Object.setPrototypeOf(this,new.target.prototype),this.name="RequestError",this.code=t}}t.RequestError=o,t.getCategory=(0,n.curry)(((e,t)=>e.find((e=>e.Id===t)))),t.createdAt=e=>(0,n.isNil)(e.CreationDatetime)?(0,n.isNil)(e.CreationDate)?0:e.CreationDate:e.CreationDatetime,t.updatedAt=e=>(0,n.isNil)(e.UserModificationDatetime)?(0,n.isNil)(e.UpdateDate)?0:e.UpdateDate:e.UserModificationDatetime},72079:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.notifySharersNoteUpdated=t.makeNoteSpecificProps=t.makeNewNote=t.makeUpdatedNote=t.sharedFields=void 0;const n=r(16516),o=r(47408),i=r(70252),a=r(78163);function s(e,t){const r=t?t.CreationDate:(0,o.getUnixTimestamp)(),n=t?e.content!==t.Content?(0,o.getUnixTimestamp)():t.UpdateDate:r;return{Title:e.title||"Untitled note",Content:e.content||"",Category:e.category||"noCategory",Secured:e.secured||!1,Type:e.type||"GRAY",CreationDate:r,UpdateDate:n}}t.sharedFields=["Title","Content"],t.makeUpdatedNote=async function(e,t){return{...t,...(0,a.makeUpdatedPersonalDataItemBase)({existingItem:t,updatedItem:e,itemUpdateDate:(0,o.getUnixTimestamp)()}),...s(e.content,t)}},t.makeNewNote=async function(e){return{...(0,a.makeNewPersonalDataItemBase)(e),...s(e.content)}},t.makeNoteSpecificProps=s,t.notifySharersNoteUpdated=async function(e,r,o){!(0,n.equals)((0,n.pick)(t.sharedFields,r),(0,n.pick)(t.sharedFields,o))&&await(0,a.notifySharersOnUpdate)(e,o).catch((e=>{const t=new Error(`[Sharing] - notifySharersNoteUpdated: ${e}`);(0,i.sendExceptionLog)({error:t})}))}},77749:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.notes$=t.notesCount$=t.getNote$=t.notesBatch$=void 0;const n=r(18948),o=r(3343),i=r(81438),a=r(35893),s=r(55220),c=r(33627);t.notesBatch$=e=>{const t=(0,a.parseToken)(e),r=(0,i.getViewedNotesBatchSelector)(t);return(0,n.pipe)((0,o.map)(r),(0,o.distinctUntilChanged)(c.sameBatch))},t.getNote$=e=>{const t=(0,i.getViewedNoteSelector)(e);return(0,n.pipe)((0,o.map)(t),(0,o.distinctUntilChanged)())},t.notesCount$=e=>{const t=(0,a.parseToken)(e);return(0,n.pipe)((0,o.map)((e=>(0,i.notesCountSelector)(e,t))),(0,o.distinctUntilChanged)())},t.notes$=(0,s.getLivePersonalInfo)(i.getLiveNotesSelector)},3113:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getNoteMappers=void 0;const n=r(16516),o=r(71141),i=r(83539),a=r(71646),s=(0,n.curry)(((e,t)=>{const r=t.Category,n=(e||[]).find((e=>e.Id===r));return n&&n.CategoryName?n.CategoryName:"zzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzz"})),c=e=>!!e.Attachments&&e.Attachments.length>0,u=(0,n.curry)(((e,t)=>!!e[t.Id]));t.getNoteMappers=(e,t,r)=>({category:s(e),groupIds:e=>(0,a.getItemUserGroupIds)(r,e.Id),sharingUserIds:e=>(0,a.getItemUserIds)(r,e.Id),createdAt:o.createdAt,hasAttachments:c,id:e=>e.Id,isLimited:u(t),lastUse:i.lastUseMapper,spaceId:e=>e.SpaceId,title:e=>e.Title,updatedAt:o.updatedAt})},93534:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getNotesBatch=t.viewNotesBatch=t.getNotesFirstToken=t.getNotesSortToken=t.getNotesFilterToken=void 0;const n=r(16516),o=r(20553),i=r(80010),a=r(83687),s=r(71141);t.getNotesFilterToken=({filterCriteria:e})=>({filterCriteria:e||[]}),t.getNotesSortToken=({sortCriteria:e})=>({uniqField:"id",sortCriteria:e||[]}),t.getNotesFirstToken=(e,t,r,n)=>(0,o.generateFirstToken)(e,t,r.initialBatchSize||30,n),t.viewNotesBatch=(e,t,r,n)=>{const o=(0,a.getSharingStatusItem)(t,r),c=(0,s.getCategory)(n);return(0,i.listView)(o,c,e)},t.getNotesBatch=(0,n.curry)(((e,t,r)=>(0,o.getBatch)(r,e,t)))},55498:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.noteMatch=t.searchGetters=t.limitedSearchGetters=void 0;const n=r(64455),o=r(82234);t.limitedSearchGetters=[(0,o.stringProp)("Title")],t.searchGetters=[...t.limitedSearchGetters,(0,o.stringProp)("Content")],t.noteMatch=(e,r)=>{const o=r.Secured?t.limitedSearchGetters:t.searchGetters;return(0,n.match)(o)(e,r)}},81438:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.notesCountSelector=t.viewedQueriedNotesSelector=t.queryNotesSelector=t.getViewedNoteSelector=t.getLiveNotesSelector=t.getViewedNotesBatchSelector=t.notesQuerySelector=t.fieldMappersSelector=t.viewedNoteCategoriesSelector=t.notesPaginationTokenSelector=t.notesPageSelector=t.viewedNoteSelector=t.noteSelector=t.noteCategoriesSelector=void 0;const n=r(16516),o=r(32034),i=r(93534),a=r(3113),s=r(23875),c=r(20553),u=r(35893),d=r(91210),l=r(80993),p=r(49551),m=r(55498),g=r(24589),f=r(63566),S=r(52102),h=r(16593),y=r(97006),v=r(26703),E=r(75705),A=r(89698);t.noteCategoriesSelector=e=>e.userSession.personalData.noteCategories,t.noteSelector=(e,t)=>{const r=(0,E.notesSelector)(e);return(0,p.findDataModelObject)(t,r)},t.viewedNoteSelector=(e,r)=>{const n=(0,t.noteSelector)(e,r);if(!n)return;const o=(0,t.noteCategoriesSelector)(e),i=(0,S.sharingDataSelector)(e),a=(0,h.userIdSelector)(e),c=(0,d.limitedSharingItemsSelector)(e);return(0,s.viewNote)(n,i,a,c,o)},t.notesPageSelector=(e,r)=>{const n=(0,u.parseToken)(r),{sortToken:o,filterToken:i}=n,a={sortToken:o,filterToken:i},s=(0,t.fieldMappersSelector)(e),d=(0,t.notesQuerySelector)(e,a),l=b(e),p=(0,c.generateNextToken)(s,n,d),m=(0,c.generatePrevToken)(s,n,d),g=(0,c.getBatch)(s,n,d),f=(0,u.stringifyToken)(p),S=(0,u.stringifyToken)(m);return{batch:l(g),nextToken:f,prevToken:S}},t.notesPaginationTokenSelector=(e,r)=>{const n=(0,i.getNotesSortToken)(r),o=(0,i.getNotesFilterToken)(r),a=(0,t.fieldMappersSelector)(e),s={sortToken:n,filterToken:o},c=(0,t.notesQuerySelector)(e,s),d=(0,i.getNotesFirstToken)(a,s,r,c);return(0,u.stringifyToken)(d)},t.viewedNoteCategoriesSelector=(0,o.createSelector)(t.noteCategoriesSelector,(e=>({items:(0,v.listView)(e),matchingCount:e.length}))),t.fieldMappersSelector=(0,o.createSelector)(t.noteCategoriesSelector,d.limitedSharingItemsSelector,A.acceptedItemGroupsSelector,a.getNoteMappers);const _=(0,u.createOptimizedSortTokenSelector)(((e,{sortToken:t})=>t),n.identity),T=(0,u.createOptimizedFilterTokenSelector)(((e,{filterToken:t})=>t),n.identity),I=()=>m.noteMatch;t.notesQuerySelector=(0,o.createSelector)(t.fieldMappersSelector,I,_,T,E.notesSelector,u.queryData),t.getViewedNotesBatchSelector=e=>{const{sortToken:r,filterToken:n}=e,a={sortToken:r,filterToken:n},s=(0,i.getNotesBatch)(e),c=(0,o.createSelector)((e=>(0,t.notesQuerySelector)(e,a)),t.fieldMappersSelector,s),p=(0,u.optimizeBatchSelector)(c);return(0,o.createSelector)(p,l.sortedSharedItemIdsSelector,d.limitedSharingItemsSelector,t.noteCategoriesSelector,i.viewNotesBatch)};const b=e=>{const r=(0,l.sortedSharedItemIdsSelector)(e),n=(0,d.limitedSharingItemsSelector)(e),o=(0,t.noteCategoriesSelector)(e);return e=>(0,i.viewNotesBatch)(e,r,n,o)};t.getLiveNotesSelector=(0,y.makeLiveSelectorGetter)(E.notesSelector,b,I,t.fieldMappersSelector),t.getViewedNoteSelector=e=>{const r=(0,o.createSelector)(E.notesSelector,(t=>(0,p.findDataModelObject)(e,t)));return(0,o.createSelector)(r,S.sharingDataSelector,h.userIdSelector,d.limitedSharingItemsSelector,t.noteCategoriesSelector,s.viewNote)},t.queryNotesSelector=(0,g.getQuerySelector)(E.notesSelector,I,t.fieldMappersSelector),t.viewedQueriedNotesSelector=(e,r)=>{const n=(0,t.queryNotesSelector)(e,r),o=b(e);return(0,f.viewListResults)(o)(n)},t.notesCountSelector=(0,o.createSelector)(t.fieldMappersSelector,I,T,E.notesSelector,((e,t,r,n)=>(0,u.filterData)(e,t,r,n).length))},75705:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.notesSelector=void 0;const n=r(32034),o=r(40602),i=r(57989);t.notesSelector=(0,n.createSelector)((e=>e.userSession.personalData.notes),i.quarantinedSpacesSelector,o.filterOutQuarantinedItems)},13151:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DeleteSecureNoteErrorCode=t.SecureNoteSaveResultErrorCode=void 0,function(e){e.NOT_FOUND="NOT_FOUND"}(t.SecureNoteSaveResultErrorCode||(t.SecureNoteSaveResultErrorCode={})),function(e){e.NOT_FOUND="NOT_FOUND",e.INTERNAL_ERROR="INTERNAL_ERROR",e.LEAVE_SHARING_FAILED="LEAVE_SHARING_FAILED",e.LEAVE_SHARING_FORBIDDEN_LAST_ADMIN="LEAVE_SHARING_FORBIDDEN_LAST_ADMIN",e.LEAVE_SHARING_FORBIDDEN_GROUP_ITEM="LEAVE_SHARING_FORBIDDEN_GROUP_ITEM"}(t.DeleteSecureNoteErrorCode||(t.DeleteSecureNoteErrorCode={}))},23875:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.viewNote=void 0;const n=r(83687),o=r(71141),i=r(83881);t.viewNote=function(e,t,r,a,s){if(!e)return;const c=(0,n.getSharingStatusDetail)(a,t,r),u=(0,o.getCategory)(s);return(0,i.detailView)(c,u,e)}},26703:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.listView=t.detailView=void 0;const n=(0,r(16516).defaultTo)("");t.detailView=e=>{if(e)return{id:e.Id,categoryName:n(e.CategoryName)}},t.listView=e=>e.map(t.detailView)},83881:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.detailView=void 0;const n=r(16516),o=r(82043),i=r(26703),a=r(71141),s=(0,n.defaultTo)("");t.detailView=(0,n.curry)(((e,t,r)=>{const c=t(r.Category);return{...(0,o.dataModelDetailView)(r),category:(0,i.detailView)(c),color:r.Type,content:s(r.Content),createdAt:(0,a.createdAt)(r),secured:(0,n.defaultTo)(!1,r.Secured),sharingStatus:e(r.Id),title:s(r.Title),updatedAt:(0,a.updatedAt)(r)}}))},80010:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.listView=t.itemView=void 0;const n=r(16516),o=r(82043),i=r(26703),a=r(71141),s=(0,n.defaultTo)("");t.itemView=(0,n.curry)(((e,t,r)=>{const n=t(r.Category),c=r.Secured?"*******":(e=>{if(e.length>30)return e.slice(0,27)+"…"})(s(r.Content));return{...(0,o.dataModelItemView)(r),abbrContent:c,category:(0,i.detailView)(n),color:r.Type,createdAt:(0,a.createdAt)(r),secured:r.Secured||!1,sharingStatus:e(r.Id),title:s(r.Title),updatedAt:(0,a.updatedAt)(r)}})),t.listView=(e,r,n)=>{const o=(0,t.itemView)(e,r);return n.map(o)}},60309:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const n=r(43767),o=r(16593),i=r(64717),a=r(17250);t.config={commands:{updateProtectPasswordsSetting:{handler:a.updateProtectPasswordsSettingHandler},toggleDashlane:{handler:a.toggleDashlaneHandler},updateAutofillSettings:{handler:a.updateAutofillSettingsHandler}},queries:{getAnonymousUserId:{selector:n.anonymousUserIdSelector},getIsUrlBanished:{selector:n.getIsUrlBanishedSelector},arePasswordsProtected:{selector:o.protectPasswordsSettingSelector}},liveQueries:{liveArePasswordsProtected:{operator:i.protectPasswordsSetting$}}}},17250:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.updateAutofillSettingsHandler=t.toggleDashlaneHandler=t.updateProtectPasswordsSettingHandler=void 0;const n=r(92233),o=r(70252),i=r(90503),a=r(23136),s=r(29954),c=r(86903),u=r(68857);t.updateProtectPasswordsSettingHandler=(e,t)=>{try{const r={ProtectPasswords:t};return(0,s.updatePersonalSettings)(e.storeService,e.sessionService,r),(0,c.sendUserSettingsLog)(e),Promise.resolve()}catch(e){const t=new Error(`updateProtectPasswordsSettingHandler: ${e}`);(0,o.sendExceptionLog)({error:t,code:i.ExceptionCriticality.WARNING})}},t.toggleDashlaneHandler=({sessionService:e,storeService:t},r)=>{const o=(0,a.getDebounceSync)(t,e),i=t.getPersonalSettings(),c=(0,u.toggleDashlaneOnSiteToPersonalSettingsPartial)(i,r);(0,s.updatePersonalSettings)(t,e,c),o({immediateCall:!0},n.Trigger.SettingsChange)},t.updateAutofillSettingsHandler=({sessionService:e,storeService:t},r)=>{const o=(0,a.getDebounceSync)(t,e);(0,s.updatePersonalSettings)(t,e,{AutofillSettings:r.AutofillSettings}),o({immediateCall:!0},n.Trigger.SettingsChange)}},64717:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.protectPasswordsSetting$=void 0;const n=r(18948),o=r(3343),i=r(16593);t.protectPasswordsSetting$=()=>(0,n.pipe)((0,o.map)(i.protectPasswordsSettingSelector),(0,o.distinctUntilChanged)())},91315:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(80518),t)},68857:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.toggleDashlaneOnSiteToPersonalSettingsPartial=void 0;const n=r(16516),o=r(21178);t.toggleDashlaneOnSiteToPersonalSettingsPartial=function(e,t){const r=new o.ParsedURL(t.url).getRootDomain();let i=e.AutofillSettings;return i={...i,disabledDomains:t.autofill?(0,n.without)([r],e.AutofillSettings.disabledDomains):(0,n.uniq)(e.AutofillSettings.disabledDomains.concat(r))},{AutofillSettings:i}}},29954:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.pickUpdatedPersonalSettings=t.isSaveCredentialDisabledOnDomain=t.signalSaveCredentialDisabled=t.updatePersonalSettings=void 0;const n=r(21178),o=r(95623),i=r(16516),a=r(27517);t.updatePersonalSettings=function(e,r,n){if(!e.isAuthenticated())return void o.default.log("No session available to updatePersonalSettings");const i=(0,t.pickUpdatedPersonalSettings)(e.getPersonalSettings(),n);e.dispatch((0,a.editPersonalSettings)(i)),r.getInstance().user.persistPersonalSettings()},t.signalSaveCredentialDisabled=function(e,t,r){if(!e.isAuthenticated())return void o.default.log("No session available, in theory this should not be called");const n=Array.isArray(e.getPersonalSettings().BanishedUrlsList)?e.getPersonalSettings().BanishedUrlsList:[];n.indexOf(r.fullDomain)>0||(e.dispatch((0,a.editPersonalSettings)({BanishedUrlsList:[...n,r.fullDomain]})),t.getInstance().user.persistPersonalSettings())},t.isSaveCredentialDisabledOnDomain=function(e,t){return e.isAuthenticated()?(Array.isArray(e.getPersonalSettings().BanishedUrlsList)?e.getPersonalSettings().BanishedUrlsList:[]).map((e=>new n.ParsedURL(e))).some((e=>e.getHostname()===t.fullDomain)):(o.default.log("No session available, save credential is enabled by default"),!1)},t.pickUpdatedPersonalSettings=(e,t)=>{const r=(0,i.pick)(Object.keys(t))(e),n=(0,i.unapply)(i.identity);return(0,i.mergeAll)((0,i.difference)(n(t),n(r)))}},43767:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getIsUrlBanishedSelector=t.banishedUrlsListSelector=t.securedDataAutofillCreditcardSelector=t.anonymousUserIdSelector=void 0;const n=r(21178),o=r(16593);t.anonymousUserIdSelector=e=>e.userSession.personalSettings.AnonymousUserId,t.securedDataAutofillCreditcardSelector=e=>{const t=e.userSession.personalSettings.SecuredDataAutofillCreditcard;return"boolean"!=typeof t||t},t.banishedUrlsListSelector=e=>(0,o.personalSettingsSelector)(e).BanishedUrlsList??[],t.getIsUrlBanishedSelector=(e,r)=>{const o=new n.ParsedURL(r).getHostname();return(0,t.banishedUrlsListSelector)(e).map((e=>new n.ParsedURL(e).getHostname())).some((e=>e===o))}},80518:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AutofillOptions=t.AnalysisDisabledStatus=void 0,function(e){e.ANALYSIS_ENABLED="ANALYSIS_ENABLED",e.ANALYSIS_DISABLED_BY_USER="ANALYSIS_DISABLED_BY_USER",e.ANALYSIS_DISABLED_BY_B2B_ADMIN="ANALYSIS_DISABLED_BY_B2B_ADMIN",e.ANALYSIS_DISABLED_BY_KILLSWITCH="ANALYSIS_DISABLED_BY_KILLSWITCH",e.ANALYSIS_DISABLED_BY_2FA_ENFORCEMENT="ANALYSIS_DISABLED_BY_2FA_ENFORCEMENT"}(t.AnalysisDisabledStatus||(t.AnalysisDisabledStatus={})),function(e){e.ANALYSIS_ENABLED_ON_ALL_FORMS="ANALYSIS_ENABLED_ON_ALL_FORMS",e.ANALYSIS_ENABLED_ONLY_ON_LOGINS_AND_PASSWORDS="ANALYSIS_ENABLED_ONLY_ON_LOGINS_AND_PASSWORDS"}(t.AutofillOptions||(t.AutofillOptions={}))},68979:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TeamDomainsMatchResult=void 0,r(84977),function(e){e[e.SomeFieldsMatch=0]="SomeFieldsMatch",e[e.NoFieldMatch=1]="NoFieldMatch"}(t.TeamDomainsMatchResult||(t.TeamDomainsMatchResult={}))},11700:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isItemToForceCategorize=t.isItemForceCategorizable=t.pickBestTeamSpaceForForcedCategorization=t.ForceCategorizableKWTypes=t.isTeamSpaceAfterGracePeriod=t.isTeamSpaceQuarantined=void 0;const n=r(16516),o=r(53576),i=r(68979),a=r(87496),s=r(43145),c=r(6205),u=(e,t)=>(t||[]).some((t=>{if("string"!=typeof t)return!1;const r=t.toLowerCase();return(e||[]).some((e=>"string"==typeof e&&e.toLowerCase().includes(r)))})),d=e=>[e.Login,e.SecondaryLogin,e.Email,(0,a.getBestUrl)(e),...(0,c.getUserAddedLinkedWebsiteDomains)(e)],l=(e,t)=>{const r=[e.Domain],n=(0,s.findAssociatedCredential)(e,t);return[...r,...n?d(n):[]]},p={[o.DataModelType.KWAuthentifiant]:d,[o.DataModelType.KWGeneratedPassword]:l,[o.DataModelType.KWEmail]:e=>[e.Email]};function m(e){const t=p[e.kwType];return t?t(e):[]}t.isTeamSpaceQuarantined=e=>"revoked"===e.status,t.isTeamSpaceAfterGracePeriod=e=>(0,t.isTeamSpaceQuarantined)(e)&&Boolean(e.shouldDelete),t.ForceCategorizableKWTypes=[o.DataModelType.KWAuthentifiant,o.DataModelType.KWEmail,o.DataModelType.KWGeneratedPassword],t.pickBestTeamSpaceForForcedCategorization=(e,r,a)=>{const s=r.SpaceId,c=(0,o.isGeneratedPassword)(r)?l(r,a):m(r),d=e.reduce(((e,t)=>{const r=u(c,t.info.teamDomains);return{...e,[t.teamId]:r}}),{}),p=e.filter((e=>d[e.teamId]||(0,t.isTeamSpaceQuarantined)(e)&&e.teamId===s)),[g,f]=(0,n.partition)(t.isTeamSpaceQuarantined,p),[S,h]=(0,n.partition)(t.isTeamSpaceAfterGracePeriod,g),[y,v]=(0,n.partition)((e=>t=>e.SpaceId===t.teamId)(r),f),E=[...S,...h,...y,...v];if(0===E.length)return null;const A=E[0];return A.teamId!==r.SpaceId||(0,t.isTeamSpaceQuarantined)(A)?{teamSpace:A,domainsMatchResult:d[A.teamId]?i.TeamDomainsMatchResult.SomeFieldsMatch:i.TeamDomainsMatchResult.NoFieldMatch}:null},t.isItemForceCategorizable=function(e){return e.kwType in p},t.isItemToForceCategorize=(e,t)=>{if(!t?.info)return!1;const{forcedDomainsEnabled:r,teamDomains:n}=t.info;if(!r)return!1;const o=m(e);return u(o,n)}},57989:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.quarantinedSpacesSelector=t.forceCategorizableItemsSelector=t.spacesWithForcedCategorizationEnabledSelector=void 0;const n=r(32034),o=r(7944),i=r(11700),a=r(95458),s=r(72678);t.spacesWithForcedCategorizationEnabledSelector=e=>(e.userSession?.spaceData?.spaces||[]).filter((e=>e?.details?.info&&Array.isArray(e.details.info.teamDomains)&&e.details.info.teamDomains.length>0&&Boolean(e.details.info.forcedDomainsEnabled))),t.forceCategorizableItemsSelector=e=>(0,s.personalDataItemsOfTypeSelector)(e,i.ForceCategorizableKWTypes),t.quarantinedSpacesSelector=(0,n.createSelector)(o.spacesSelector,(e=>e.filter(a.isQuarantined)))},92307:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getSmartCategorizedSpace=t.getCategory=void 0;const n=r(16516),o=r(52578);t.getCategory=(0,n.curry)(((e,t)=>e.find((e=>e.Id===t)))),t.getSmartCategorizedSpace=e=>t=>{const r=(e=>e.filter((e=>"accepted"===e.details?.status&&e.details?.info?.forcedDomainsEnabled)))(e),n=r?.[0]?.details?.info?.teamDomains??[];return(0,o.isCredentialSmartCategorized)(t,n)?r[0]:null}},76226:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.applyTeamSpaceContentControlRules=void 0;const n=r(53576),o=r(70252),i=r(45291),a=r(24525),s=r(45962),c=r(90622);async function u(e,t,r){const{updates:n,deletions:o,changeHistories:a}=r,s=n.length>0,c=function({deletions:e}){return Object.keys(e).reduce(((t,r)=>t+e[r].length),0)}(r)>0;(s||c)&&(t.dispatch((0,i.teamSpaceContentControlApplied)(n,o,a)),await e.getInstance().user.persistPersonalData())}t.applyTeamSpaceContentControlRules=async function(e,t,r,i,d){try{const o=(0,a.teamSpaceContentControlStateSelector)(r.getState()),l=(0,s.controlTeamSpacesContent)(o),p=l.deletions.KWAuthentifiant||[],m=l.updates.filter(n.isCredential).map((e=>e.Id)),g=l.hiddenItemIds,f=[...p,...m,...g];if(await u(t,r,l),function(e,t,r){const n=e.getUserLogin(),o=(0,c.ukiSelector)(e.getState());r.forEach((e=>{t.teamPlans.spaceDeleted({login:n,uki:o,teamId:Number(e.teamId)})}))}(r,i,o.spaces.filter((e=>e.details.shouldDelete))),function(e,t){const{deletions:r,hiddenItemIds:n,updates:o}=t,i={deletedItemIds:Object.keys(r).reduce(((e,t)=>[...e,...r[t]]),[]),hiddenItemIds:n,updatedItemIds:o.map((e=>e.Id))};e.teamSpaceContentControlDone(i)}(e,l),f.length>0){const{commands:{recalculatePasswordHealth:e}}=d.createClients().passwordHealth;e()}}catch(e){const t=new Error(`[Spaces] - runTeamSpaceContentControlJob: ${e}`);(0,o.sendExceptionLog)({error:t})}}},45962:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.controlTeamSpacesContent=void 0;const n=r(53576),o=r(17825),i=r(49901),a=r(68979),s=r(11700),c=r(73566),u=r(85225);function d(e,t){return{...e,SpaceId:t}}function l(e,t,r,s){const{domainsMatchResult:l}=t;switch(l){case a.TeamDomainsMatchResult.SomeFieldsMatch:return function(e,t,r){const{deletions:o,changeHistories:i}=t,{deviceName:a,login:s,personalData:d,platformInfo:l}=e,{kwType:p}=r,m=(0,n.isCredential)(r)?(0,c.getUpdatedItemChangeHistory)({change:(0,u.makeRemovalChange)(r),deviceName:a,personalData:d,userLogin:s,platformInfo:l}):null;return{...t,deletions:{...o,[p]:o[p].concat(r.Id)},changeHistories:m?i.concat(m):i}}(e,s,r);case a.TeamDomainsMatchResult.NoFieldMatch:return function(e,t,r){const{updates:o,changeHistories:a}=t,{deviceName:s,login:l,personalData:p,platformInfo:m}=e,g=d(r,i.PERSONAL_SPACE_ID),f=(0,n.isCredential)(g)?(0,c.getUpdatedItemChangeHistory)({change:(0,u.makeUpdateChange)(g),deviceName:s,personalData:p,userLogin:l,platformInfo:m}):null;return{...t,updates:o.concat(g),changeHistories:f?a.concat(f):a}}(e,s,r);default:return(0,o.assertUnreachable)(l)}}const p=e=>e.info.removeForcedContentEnabled&&e.shouldDelete;t.controlTeamSpacesContent=function(e){const t={deletions:{KWAuthentifiant:[],KWEmail:[],KWGeneratedPassword:[]},updates:[],changeHistories:[],hiddenItemIds:[]};return 0===e.spaces.length?t:e.items.reduce(((t,r)=>function(e,t,r){const o=e.spaces.map((e=>e.details)),i=(0,s.pickBestTeamSpaceForForcedCategorization)(o,r,e.credentials);if(!i)return t;const{teamSpace:m}=i,{status:g}=m;switch(g){case"accepted":return function(e,t,r,o){const{updates:i,changeHistories:a}=t,{teamId:s}=r,{deviceName:l,login:p,personalData:m,platformInfo:g}=e,f=d(o,s),S=(0,n.isCredential)(f)?(0,c.getUpdatedItemChangeHistory)({change:(0,u.makeUpdateChange)(f),deviceName:l,personalData:m,userLogin:p,platformInfo:g}):null;return{...t,updates:i.concat(f),changeHistories:S?a.concat(S):a}}(e,t,m,r);case"revoked":return function(e,t,r,n){const{teamSpace:o,domainsMatchResult:i}=t,{hiddenItemIds:s}=n;return{...p(o)?l(e,t,r,n):n,hiddenItemIds:i===a.TeamDomainsMatchResult.SomeFieldsMatch?[...s,r.Id]:s}}(e,i,r,t);default:return t}}(e,t,r)),t)}},24525:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.teamSpaceContentControlStateSelector=void 0;const n=r(56915),o=r(16593),i=r(73299),a=r(72678),s=r(7944),c=r(92598),u=r(26147),d=r(74380),l=r(83659),p=r(57989),m=e=>({KWAuthentifiant:(0,d.countAllCredentialsSelector)(e),KWEmail:(0,u.countAllEmailsSelector)(e),KWGeneratedPassword:(0,c.countAllGeneratedPasswordsSelector)(e)});t.teamSpaceContentControlStateSelector=e=>({anonymousSpaceIds:(0,s.anonymousSpaceIdsSelector)(e),credentials:(0,l.unsafeAllCredentialsSelector)(e),itemCountByType:m(e),items:(0,p.forceCategorizableItemsSelector)(e),spaces:(0,p.spacesWithForcedCategorizationEnabledSelector)(e),personalData:(0,a.personalDataSelector)(e),platformInfo:(0,n.platformInfoSelector)(e),login:(0,o.userLoginSelector)(e),deviceName:(0,i.deviceNameSelector)(e)})},67631:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setupSubscriptions=void 0;const n=r(76226);t.setupSubscriptions=async function(e,t){const{sessionService:r,storeService:o,wsService:i,applicationModulesAccess:a}=t;e.sessionOpened.on((()=>{(0,n.applyTeamSpaceContentControlRules)(e,r,o,i,a)}))}},45665:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const n=r(7944);t.config={commands:{},queries:{getSpace:{selectorFactory:async e=>(await(0,n.makeSpacesSelectors)(e)).viewedSpaceSelector},getSpaces:{selectorFactory:async e=>(await(0,n.makeSpacesSelectors)(e)).viewedSpacesSelector}},liveQueries:{}}},52490:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},77163:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.associateTeamSpaceId=void 0;const n=r(11700);t.associateTeamSpaceId=function(e,t,r){if(!(0,n.isItemForceCategorizable)(e)||!t||0===t.length)return e;const o=(e=>e.filter((e=>e.info.forcedDomainsEnabled&&e.info.teamDomains.length&&!(0,n.isTeamSpaceQuarantined)(e))))(t);if(!o.length)return e;const i=(0,n.pickBestTeamSpaceForForcedCategorization)(o,e,r);return i?{...e,SpaceId:i.teamSpace.teamId}:e}},49901:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PERSONAL_SPACE_ID=void 0,t.PERSONAL_SPACE_ID=""},69105:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getDefaultPersonalSpace=t.isSpaceItem=void 0;const n=r(53576),o=r(49901);t.isSpaceItem=e=>"SpaceId"in e&&"string"==typeof e.SpaceId,t.getDefaultPersonalSpace=()=>({associatedEmail:null,billingAdmins:[],color:"",companyName:null,info:{name:"",forcedDomainsEnabled:!1,teamDomains:[]},invitationDate:null,isBillingAdmin:!1,isSSOUser:!1,isTeamAdmin:!1,joinDate:null,letter:"",membersNumber:null,planType:null,revokeDate:null,status:n.SpaceStatus.Accepted,teamAdmins:[],teamId:o.PERSONAL_SPACE_ID,teamName:null,tier:n.SpaceTier.Free,shouldDelete:!1})},95458:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isQuarantined=t.isPremiumStatusSpaceQuarantined=void 0,t.isPremiumStatusSpaceQuarantined=e=>e?.status&&"accepted"!==e.status.toLowerCase()&&e.info&&Array.isArray(e.info.teamDomains)&&e.info.teamDomains.length>0&&Boolean(e.info.removeForcedContentEnabled),t.isQuarantined=e=>e&&(0,t.isPremiumStatusSpaceQuarantined)(e.details)},7944:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makeSpacesSelectors=t.anonymousSpaceIdsSelector=t.viewedSpaceSelector=t.viewedSpacesSelector=t.activeSpacesDetailsSelector=t.activeSpacesSelector=t.spacesSelector=void 0;const n=r(69105),o=r(664),i=r(88205),a="onboarding_web_disablepersonalspace_v2_dev";t.spacesSelector=e=>e.userSession?.spaceData?.spaces??[],t.activeSpacesSelector=e=>((0,t.spacesSelector)(e)||[]).filter((e=>e.details&&"accepted"===e.details.status)),t.activeSpacesDetailsSelector=e=>(0,t.activeSpacesSelector)(e).map((e=>e.details)),t.viewedSpacesSelector=(e,r)=>r&&(0,t.activeSpacesDetailsSelector)(e).length?(0,o.listView)([...(0,t.activeSpacesDetailsSelector)(e)]):(0,o.listView)([...(0,t.activeSpacesDetailsSelector)(e),(0,n.getDefaultPersonalSpace)()]);const s=async e=>{const{applicationModulesAccess:r,storeService:n}=e,o=n.getState(),s=(await(0,i.makeFeatureFlipsSelectors)(r).featureFlipsSelector())[a];return()=>(0,t.viewedSpacesSelector)(o,s)};t.viewedSpaceSelector=(e,r,n)=>(0,t.viewedSpacesSelector)(e,r).find((e=>e.spaceId===n));const c=async e=>{const{applicationModulesAccess:r}=e,n=(await(0,i.makeFeatureFlipsSelectors)(r).featureFlipsSelector())[a];return(e,r)=>(0,t.viewedSpaceSelector)(e,n,r)};t.anonymousSpaceIdsSelector=e=>e.userSession.personalSettings.SpaceAnonIds,t.makeSpacesSelectors=async e=>({viewedSpacesSelector:await s(e),viewedSpaceSelector:await c(e)})},664:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.listView=t.itemView=void 0,t.itemView=({color:e,letter:t,info:r,teamId:n,isSSOUser:o})=>({spaceId:n,displayName:r.name??"",color:e,letter:t,settings:{enableForcedCategorization:r.forcedDomainsEnabled,spaceForcedDomains:r.teamDomains},isSSOUser:o}),t.listView=e=>e.map(t.itemView)},16458:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.vaultConfig=void 0;const n=r(98518),o=r(56316);t.vaultConfig={commands:{disableVaultItemProtection:{handler:n.disableVaultProtectionHandler}},queries:{getAutofillProtectionContext:{selector:o.autofillProtectionContextSelector}},liveQueries:{}}},15874:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VaultItemDisableProtectionMode=void 0,function(e){e[e.CannotDisable=0]="CannotDisable",e[e.DisableSpecificVaultItem=1]="DisableSpecificVaultItem",e[e.DisableGeneralSetting=2]="DisableGeneralSetting"}(t.VaultItemDisableProtectionMode||(t.VaultItemDisableProtectionMode={}))},98518:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.disableVaultProtectionHandler=void 0;const n=r(19736),o=r(17250),i=r(18344),a=r(16593);t.disableVaultProtectionHandler=async(e,t)=>{const r=e.storeService.getState();if((0,n.credentialSelector)(r,t)){if((0,a.protectPasswordsSettingSelector)(r))return void(0,o.updateProtectPasswordsSettingHandler)(e,!1);(0,i.disableCredentialProtection)(e,t)}}},56316:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.autofillProtectionContextSelector=void 0;const n=r(38250),o=r(19736),i=r(27147),a=r(58235),s=r(43767),c=r(81846),u=r(16593);t.autofillProtectionContextSelector=(e,t)=>{if(!t)return{disableMode:n.VaultItemDisableProtectionMode.CannotDisable,isProtected:!1};const r=(0,c.areProtectedItemsUnlockedSelector)(e);if((0,a.paymentCardSelector)(e,t))return{disableMode:n.VaultItemDisableProtectionMode.CannotDisable,isProtected:(0,s.securedDataAutofillCreditcardSelector)(e)&&!r};if((0,i.socialSecurityIdSelector)(e,t))return{disableMode:n.VaultItemDisableProtectionMode.CannotDisable,isProtected:(0,s.securedDataAutofillCreditcardSelector)(e)&&!r};const d=(0,o.credentialSelector)(e,t);return d?(0,u.protectPasswordsSettingSelector)(e)?{disableMode:n.VaultItemDisableProtectionMode.DisableGeneralSetting,isProtected:!r}:{disableMode:n.VaultItemDisableProtectionMode.DisableSpecificVaultItem,isProtected:d.AutoProtected&&!r}:{disableMode:n.VaultItemDisableProtectionMode.CannotDisable,isProtected:!1}}},70660:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0;const n=r(76235);t.bootstrap=e=>{e.register(n.config)}},78163:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.computeAndSendCSVImportActivityLog=t.computeAndSendDeletedCredentialActivityLog=t.computeAndSendModifiedCredentialActivityLog=t.computeAndSendCreatedCredentialActivityLog=t.shouldSendCreateOrModifiedCredentialActivityLog=t.hasVaultAuditLogsFFActivated=t.notifySharersOnUpdate=t.makeNewPersonalDataItemBase=t.makeUpdatedPersonalDataItemBase=void 0;const n=r(16516),o=r(18948),i=r(28354),a=r(53576),s=r(61475),c=r(97494),u=r(21178),d=r(10294),l=r(98892),p=r(58107),m=r(36513),g=r(56915),f=r(47408),S=r(78320),h=r(10360),y=r(92310),v=r(11700),E=r(16593),A=r(70252),_=r(88205);function T(e){const t=(0,n.defaultTo)(""),r="MANUAL"===e.updatedItem.origin?{UserModificationDatetime:e.itemUpdateDate}:{};return{LocaleFormat:(0,h.getLocaleFormat)(e.existingItem,e.updatedItem),SpaceId:t(e.updatedItem.content.spaceId),Attachments:e.updatedItem.attachments,...r}}async function I(e){return(await(0,_.makeFeatureFlipsSelectors)(e).featureFlipsSelector()).audit_logs_vault}function b(e){return async(t,r)=>{const n={domain_url:new u.ParsedURL(r.domainUrl).getRootDomain()??""},o={import_count:r.importCount??0},a={category:c.ActivityLogCategory.VaultPasswords,log_type:e,properties:e===c.ActivityLogType.UserImportedCredentials?o:n,is_sensitive:e!==c.ActivityLogType.UserImportedCredentials||void 0,date_time:(new Date).getTime(),schema_version:"1.0.0",uuid:`{${(0,i.v4)().toUpperCase()}}`};await t.createClients().activityLogs.commands.storeActivityLogs({activityLogs:[a]})}}t.makeUpdatedPersonalDataItemBase=T,t.makeNewPersonalDataItemBase=function(e,t=(0,f.getUnixTimestamp)()){return{kwType:e.kwType,Id:(0,S.generateItemUuid)(),AnonId:(0,S.generateItemUuid)(),CreationDatetime:t,LastBackupTime:0,LastUse:t,...T({updatedItem:e,itemUpdateDate:t})}},t.notifySharersOnUpdate=async function(e,t,r){const n=(0,d.makeItemService)(),i=(0,l.makeItemWS)(),a=e.getSharingData(),c=e.getUserLogin(),u=(0,g.ukiSelector)(e.getState()),{privateKey:f}=e.getUserSession().keyPair,S=(a.items||[]).find((e=>e.itemId===t.Id));if(!S)return;if(r)try{const{queries:e}=r.createClients().sharingCollections,t=await(0,o.firstValueFrom)(e.getSharedCollections());a.collections=(0,s.isSuccess)(t)&&Array.isArray(t.data)?t.data:[]}catch(e){const t=new Error(`[SharingSync] - getSharedCollections failed: ${e}`);(0,A.sendExceptionLog)({error:t})}const h=(a.itemGroups||[]).find((e=>(e.items||[]).map((e=>e.itemId)).includes(t.Id)));if(!h)throw new Error("ItemGroup containing item not found in sharingData");const{timestamp:y}=S,v=await(0,p.getItemGroupKey)(h,a.userGroups,f,c,a.collections);if(!v)throw new Error("Could not decipher itemGroupKey for itemGroup");const E=h.items.find((e=>e.itemId===t.Id));if(!E)throw new Error("Could not find itemKey for item in itemGroup");const _=await(0,m.makeSymmetricEncryption)().decryptAES256(v,E.itemKey),T=await n.makeUpdateItemEvent(y,_,{item:t});return i.updateItem(c,u,T)},t.hasVaultAuditLogsFFActivated=I,t.shouldSendCreateOrModifiedCredentialActivityLog=function(e,t,r,n){const o=(0,y.currentTeamIdSelector)(e.getState()),i=(0,E.activeSpacesSelector)(e.getState())[0],s=(0,v.isItemToForceCategorize)(r,i);return I(t)&&n!==a.SaveOrigin.IMPORT&&(r.SpaceId===o||s)},t.computeAndSendCreatedCredentialActivityLog=b(c.ActivityLogType.UserCreatedCredential),t.computeAndSendModifiedCredentialActivityLog=b(c.ActivityLogType.UserModifiedCredential),t.computeAndSendDeletedCredentialActivityLog=b(c.ActivityLogType.UserDeletedCredential),t.computeAndSendCSVImportActivityLog=b(c.ActivityLogType.UserImportedCredentials)},99293:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=t.setupSubscriptions=void 0;const n=r(38390);Object.defineProperty(t,"setupSubscriptions",{enumerable:!0,get:function(){return n.setupSubscriptions}});var o=r(70660);Object.defineProperty(t,"bootstrap",{enumerable:!0,get:function(){return o.bootstrap}})},97006:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makeLiveSelectorGetter=void 0;const n=r(32034),o=r(63566),i=r(24589);t.makeLiveSelectorGetter=(e,t,r,a)=>s=>(0,n.createSelector)(e,a,r,t,((e,t,r,n)=>(0,o.viewListResults)(n)((0,i.applyQuery)(r,t,s,e))))},40602:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.filterOutQuarantinedItems=t.itemIsNotQuarantined=void 0,t.itemIsNotQuarantined=(e,t)=>{const r=((e,t)=>{const r=t.find((t=>t.details&&t.teamId===e.SpaceId));return r?r.details:null})(t,e);return!r||!((e,t)=>e.SpaceId===t.teamId)(t,r)},t.filterOutQuarantinedItems=(e,r)=>0===r.length?e:e.filter((e=>(0,t.itemIsNotQuarantined)(r,e)))},24589:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.applyQuery=t.getQuerySelector=void 0;const n=r(35893),o=r(32541);t.getQuerySelector=(e,r,n)=>(o,i)=>{const a=e(o),s=n(o),c=r(o);return(0,t.applyQuery)(c,s,i,a)},t.applyQuery=(e,t,r,i)=>{const{sortToken:a,filterToken:s,limit:c}=r,u=(r=>(0,n.filterData)(t,e,s,r))(i),d=(e=>(0,o.sortData)(t,a,e))(u);return{items:c?d.slice(0,c):d,matchingCount:d.length}}},10360:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getValidState=t.isProposedLocaleLocalized=t.getLocaleFormat=void 0;const n=r(53576),o=r(38495),i=r(86056),a=r(95623);function s(e){return!!n.Country[e]&&[n.Country.NO_TYPE,n.Country.UNIVERSAL].every((t=>t!==e))}t.getLocaleFormat=function(e,t){if(!n.isObjectLocalized(t))return n.Country.UNIVERSAL;const r=n.Country[t.content.localeFormat],o=s(r),a=e&&e.LocaleFormat?e.LocaleFormat:n.Country[(0,i.getPlatformInfo)().country]||n.Country.US;return r&&o?r:a},t.isProposedLocaleLocalized=s,t.getValidState=function(e,t){return(0,o.isStateValid)(e,t)?t:(a.default.log(`[Data] Given value (${t}) is not a valid state value for country code ${e}`),"")}},38390:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setupSubscriptions=void 0;const n=r(67631),o=r(79405),i=r(8566);t.setupSubscriptions=async function(e,t){(0,n.setupSubscriptions)(e,t),(0,o.setupSubscriptions)(e,t),(0,i.setupSubscriptions)(e,t)}},72883:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isDataKeyVaultItem=t.PERSONAL_DATA_META_DATA=void 0,t.PERSONAL_DATA_META_DATA=["changeHistories","changesToUpload","generatedPasswords","securityBreaches","securityBreachesMetadata","breachesUpdaterStatus","versionedBreaches","secureFileInfo","noteCategories","paypalAccounts"],t.isDataKeyVaultItem=function(e){return!t.PERSONAL_DATA_META_DATA.includes(e)}},23136:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getDefaultSpaceId=t.getCurrentItems=t.getDebounceSync=t.WAIT_MS_BEFORE_SYNC=t.nextTick=void 0,t.nextTick=r(28255);const n=r(88205),o=r(63311),i=r(95623),a=r(58639),s=r(84977),c=r(26634),u=r(49901),d=r(7944);t.WAIT_MS_BEFORE_SYNC=6e4,t.getDebounceSync=(e,r)=>(0,o.debounce)((n=>{i.Debugger.log("DebounceSync called => informClientsAndSyncPersonalDataChange()"),function(e,r,n){(0,a.reportDataUpdate)(e),(0,t.nextTick)((()=>{r.getInstance().user.attemptSync(n)}))}(e,r,n)}),t.WAIT_MS_BEFORE_SYNC),t.getCurrentItems=(e,t)=>{const r=s.default[e];return t?.[r]||[]},t.getDefaultSpaceId=async(e,t)=>{const r=t.getState(),o=(await(0,n.makeFeatureFlipsSelectors)(e).featureFlipsSelector()).onboarding_web_disablepersonalspace_v2_dev&&!(0,c.isPersonalSpaceEnabledSelector)(r),i=(0,d.activeSpacesSelector)(r)[0];return o?i.teamId:u.PERSONAL_SPACE_ID}},82043:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.maybeDataModelDetailView=t.dataModelDetailView=t.dataModelItemView=void 0;const r=e=>({id:e.Id});t.dataModelItemView=e=>({...r(e),anonId:e.AnonId,hasAttachments:Array.isArray(e.Attachments)&&e.Attachments.length>0,kwType:e.kwType,lastUse:e.LastUse,localeFormat:e.LocaleFormat,spaceId:e.SpaceId});const n=e=>({id:e.Id});t.dataModelDetailView=e=>({...n(e),anonId:e.AnonId,attachments:e.Attachments||[],kwType:e.kwType,lastUse:e.LastUse,localeFormat:e.LocaleFormat,spaceId:e.SpaceId}),t.maybeDataModelDetailView=e=>t=>t?e(t):void 0},8581:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const n=r(5600),o=r(56915);t.config={commands:{},queries:{getAnonymousComputerId:{selector:n.anonymousComputerIdSelector},getPlatformInfo:{selector:o.platformInfoSelector}},liveQueries:{}}},9486:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.triggerABTestingChanged=void 0;const n=r(19697);t.triggerABTestingChanged=function(e){(0,n.default)().abTestingChanged({version:e.version})}},88322:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.loadAnonymousApplicationId=t.ANONYMOUS_APPLICATION_ID_KEY=void 0;const n=r(28354),o=r(93564),i=r(95623),a=r(70252),s=r(12995);async function c(e){const r=e.getLocalStorage();if(await r.itemExists(t.ANONYMOUS_APPLICATION_ID_KEY)){const e=await r.readItem(t.ANONYMOUS_APPLICATION_ID_KEY);if("string"==typeof e)return e}const i=await async function(e){const r=(0,o.getWindowLocalStorage)();if(!r)return null;const n=r.getItem(t.ANONYMOUS_APPLICATION_ID_KEY);if(!n)return null;const i=n.replaceAll('"',"");return await e.writeItem(t.ANONYMOUS_APPLICATION_ID_KEY,i),i}(r);return i||(0,n.v4)()}t.ANONYMOUS_APPLICATION_ID_KEY="anonymousApplicationId",t.loadAnonymousApplicationId=async(e,t)=>{(0,i.log)({message:"Load anonymousApplicationId"});try{const r=await c(e);(0,i.logInfo)({message:"anonymousApplicationId has been fetched successfully"}),t.dispatch((0,s.loadedAnonymousComputerId)(r))}catch(e){const t=`An error occurred when trying to load anonymousApplicationId ${e} `;(0,a.sendExceptionLog)({message:t})}}},91122:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.killswitchStateUpdated=void 0;const n=r(5307);t.killswitchStateUpdated=e=>({type:n.KILLSWITCH_STATE_UPDATED,killswitchState:e})},73651:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getEmptyKillswitchState=void 0,t.getEmptyKillswitchState=function(){return{disableAutofill:!1,disableLoginFlowMigration:!1,brazeContentCardsDisabled:!1,disableAutoSSOLogin:!1}},t.default=(e={disableAutofill:!1,disableLoginFlowMigration:!1,brazeContentCardsDisabled:!1,disableAutoSSOLogin:!1},t)=>({...e,...t.killswitchState})},5307:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.KILLSWITCH_STATE_UPDATED=void 0,t.KILLSWITCH_STATE_UPDATED="KILLSWITCH_STATE_UPDATED"},53439:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.blacklistedDeviceKeys=void 0,t.blacklistedDeviceKeys=["remoteFile"]},3163:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0;const n=r(8581);t.bootstrap=e=>{e.register(n.config)}},55861:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0;var n=r(3163);Object.defineProperty(t,"bootstrap",{enumerable:!0,get:function(){return n.bootstrap}})},19399:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.secureDeviceName=void 0,t.secureDeviceName=function(e){return e?e.replace(/https?:\/\//g," "):e}},5600:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.anonymousComputerIdSelector=void 0;const n=r(2246);t.anonymousComputerIdSelector=()=>(0,n.getCommonAppSetting)("anonymousComputerId")},12787:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EventBusConnectors=void 0;const n=r(71796);t.EventBusConnectors={sessionOpened:(0,n.slot)(),syncFailure:(0,n.slot)(),syncSuccess:(0,n.slot)(),teamSpaceContentControlDone:(0,n.slot)(),sessionClosed:(0,n.slot)(),familyMemberLeft:(0,n.slot)(),remoteFileChanged:(0,n.slot)(),appInitialized:(0,n.slot)(),coreServicesReady:(0,n.slot)()}},73297:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),t.makeEventBusService=void 0;const i=r(71796),a=r(12787);t.makeEventBusService=()=>(0,i.createEventBus)({events:a.EventBusConnectors}),o(r(6775),t)},6775:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},28207:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.carbonEventHooks=void 0;const n=r(49352);t.carbonEventHooks={iconsUpdates:n.iconsUpdatesHook}},15660:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.defaultCarbonEventStore=void 0,t.defaultCarbonEventStore={iconsUpdates:[]}},86691:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.clearInstance=t.getInstance=t.setInstance=void 0;const n=r(42898),o=r(28207);let i=null;t.setInstance=e=>{i=new n.EventStoreConsumer(e,o.carbonEventHooks)},t.getInstance=()=>{if(!i)throw new Error("Cannot get EventStoreConsumer instance");return i},t.clearInstance=()=>{i&&i.teardown(),i=null}},12362:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.clearInstance=t.getInstance=t.setInstance=void 0;let r=null;t.setInstance=e=>{r=e},t.getInstance=()=>{if(!r)throw new Error("Cannot get EventStore instance");return r},t.clearInstance=()=>{r&&r.teardown(),r=null}},46414:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const n=r(8821),o=r(306),i=r(99319);t.config={commands:{joinFamily:{handler:n.joinFamilyRequest},leaveFamily:{handler:i.leaveFamilyRequest},removeFamilyMember:{handler:n.removeFamilyMemberRequest},resetFamilyJoinToken:{handler:n.resetFamilyJoinTokenRequest},getFamilyDetails:{handler:o.getFamilyDetailsRequest}},queries:{},liveQueries:{}}},96463:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FamilyRenewalPlatform=t.FamilyMemberRole=t.FamilyStatusCode=t.JoinFamilyUserStatus=void 0;var n=r(38443);Object.defineProperty(t,"JoinFamilyUserStatus",{enumerable:!0,get:function(){return n.JoinFamilyUserStatus}}),Object.defineProperty(t,"FamilyStatusCode",{enumerable:!0,get:function(){return n.FamilyStatusCode}}),Object.defineProperty(t,"FamilyMemberRole",{enumerable:!0,get:function(){return n.FamilyMemberRole}}),Object.defineProperty(t,"FamilyRenewalPlatform",{enumerable:!0,get:function(){return n.FamilyRenewalPlatform}})},59047:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0;const n=r(46414);t.bootstrap=e=>{e.register(n.config)}},49409:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0,o(r(96463),t);var i=r(59047);Object.defineProperty(t,"bootstrap",{enumerable:!0,get:function(){return i.bootstrap}})},306:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getFamilyDetailsRequest=void 0;const n=r(38443),o=r(66374),i=r(95623),a=r(46298),s=r(16593),c=r(4933);t.getFamilyDetailsRequest=async function(e){const{storeService:t}=e,r=(0,s.userLoginSelector)(t.getState());try{const e=await(0,a.getFamilyDetails)(t,r);if((0,a.isApiError)(e))return{success:!1,error:{code:(0,a.getCode)(e.code,[c.UserMustBeFamilyAdmin])}};const{name:i,id:s,joinToken:u,statusCode:d,members:l,maxMembers:p}=e;return{success:!0,response:{name:i,id:s,joinToken:u,statusCode:d,members:{admin:(0,o.getAdmin)(l),regular:(0,o.getMembersByRole)(l,n.FamilyMemberRole.REGULAR),removed:(0,o.getMembersByRole)(l,n.FamilyMemberRole.REMOVED)},spots:(0,o.getSpots)(l,p)}}}catch(e){return i.Debugger.error(`[Family] getFamilyDetailsRequest - Failed: ${e}`),{success:!1,error:{code:a.UnknownError}}}}},66374:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getSpots=t.getMembersCount=t.getMembersByRole=t.getAdmin=void 0;const n=r(38443);function o(e,t){return e.filter((e=>e.role===t))}function i(e){return o(e,n.FamilyMemberRole.ADMIN).length+o(e,n.FamilyMemberRole.REGULAR).length}t.getAdmin=function(e){return e.find((e=>e.role===n.FamilyMemberRole.ADMIN))},t.getMembersByRole=o,t.getMembersCount=i,t.getSpots=function(e,t){return t-i(e)}},3698:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getRenewalInformation=void 0;const n=r(38443),o=r(46298);t.getRenewalInformation=e=>{if(!e||e.state===o.FamilyStopRenewalState.STOPPED)return{showRenewalMessage:!1};const t=(r=e.platform)===o.FamilyStopRenewalPlatform.IOS_APP_STORE?n.FamilyRenewalPlatform.IOS_APP_STORE:r===o.FamilyStopRenewalPlatform.MAC_STORE?n.FamilyRenewalPlatform.MAC_STORE:r===o.FamilyStopRenewalPlatform.PLAY_STORE?n.FamilyRenewalPlatform.PLAY_STORE:null;var r;return t?{showRenewalMessage:!0,platform:t}:{showRenewalMessage:!1}}},68385:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getUserStatus=void 0;const n=r(53576),o=r(38443);t.getUserStatus=(e,t)=>{switch(e){case n.PremiumStatusCode.NEW_USER:return o.JoinFamilyUserStatus.NEW_USER;case n.PremiumStatusCode.NO_PREMIUM:return t?o.JoinFamilyUserStatus.EXISTING_FREE_USER:o.JoinFamilyUserStatus.NEW_USER;case n.PremiumStatusCode.OLD_ACCOUNT:return o.JoinFamilyUserStatus.EXISTING_FREE_USER;case n.PremiumStatusCode.PREMIUM:case n.PremiumStatusCode.PREMIUM_CANCELLED:return o.JoinFamilyUserStatus.EXISTING_PREMIUM_USER;default:throw new Error("Family getUserStatus: impossible to identify user status")}}},8821:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(50794),t),o(r(98995),t),o(r(49828),t)},50794:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.joinFamilyRequest=void 0;const n=r(95623),o=r(46298),i=r(68385),a=r(3698),s=r(4933);t.joinFamilyRequest=async function(e,t){const{storeService:r}=e,{login:c,joinToken:u}=t;try{const e=await(0,o.joinFamily)(r,{login:c,joinToken:u});if((0,o.isApiError)(e))return{success:!1,error:{code:(0,o.getCode)(e.code,s.joinFamilyErrors)}};const{name:t,userExists:n,statusCode:d,stopRenewalResult:l}=e,p=(0,a.getRenewalInformation)(l);return{success:!0,response:{name:t,userExists:n,userStatus:(0,i.getUserStatus)(d,n),renewalInformation:p}}}catch(e){return n.Debugger.error(`[Family] joinFamilyRequest - Failed: ${e}`),{success:!1,error:{code:o.UnknownError}}}}},99319:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.leaveFamilyRequest=void 0;const n=r(95623),o=r(46298),i=r(16593),a=r(4933);t.leaveFamilyRequest=async function(e){const{storeService:t,eventBusService:r}=e,s=(0,i.userLoginSelector)(t.getState());try{const e=await(0,o.leaveFamily)(t,s);return(0,o.isApiError)(e)?{success:!1,error:{code:(0,o.getCode)(e.code,a.leaveFamilyErrors)}}:(r.familyMemberLeft(),{success:!0,response:{}})}catch(e){return n.Debugger.error(`[Family] leaveFamilyRequest - Failed: ${e}`),{success:!1,error:{code:o.UnknownError}}}}},98995:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.removeFamilyMemberRequest=void 0;const n=r(95623),o=r(46298),i=r(16593),a=r(4933);t.removeFamilyMemberRequest=async function(e,t){const{storeService:r}=e,s=(0,i.userLoginSelector)(r.getState());try{const e=await(0,o.removeFamilyMember)(r,s,{userId:t.userId});return(0,o.isApiError)(e)?{success:!1,error:{code:(0,o.getCode)(e.code,a.removeFamilyMemberErrors)}}:{success:!0,response:{}}}catch(e){return n.Debugger.error(`[Family] removeFamilyMemberRequest - Failed: ${e}`),{success:!1,error:{code:o.UnknownError}}}}},49828:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.resetFamilyJoinTokenRequest=void 0;const n=r(95623),o=r(46298),i=r(16593),a=r(4933);t.resetFamilyJoinTokenRequest=async function(e){const{storeService:t}=e,r=(0,i.userLoginSelector)(t.getState());try{const e=await(0,o.resetFamilyJoinToken)(t,r);if((0,o.isApiError)(e))return{success:!1,error:{code:(0,o.getCode)(e.code,[a.UserMustBeFamilyAdmin])}};const{joinToken:n}=e;return{success:!0,response:{joinToken:n}}}catch(e){return n.Debugger.error(`[Family] resetFamilyJoinTokenRequest - Failed: ${e}`),{success:!1,error:{code:o.UnknownError}}}}},38443:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FamilyRenewalPlatform=t.FamilyMemberRole=t.FamilyStatusCode=t.JoinFamilyUserStatus=void 0,function(e){e.NEW_USER="NEW_USER",e.EXISTING_FREE_USER="EXISTING_FREE_USER",e.EXISTING_PREMIUM_USER="EXISTING_PREMIUM_USER"}(t.JoinFamilyUserStatus||(t.JoinFamilyUserStatus={})),function(e){e[e.DISCONTINUED=0]="DISCONTINUED",e[e.PREMIUM=1]="PREMIUM",e[e.PREMIUM_PLUS=2]="PREMIUM_PLUS"}(t.FamilyStatusCode||(t.FamilyStatusCode={})),function(e){e.ADMIN="admin",e.REGULAR="regular",e.REMOVED="removed"}(t.FamilyMemberRole||(t.FamilyMemberRole={})),function(e){e.IOS_APP_STORE="ios",e.MAC_STORE="mac",e.PLAY_STORE="playstore"}(t.FamilyRenewalPlatform||(t.FamilyRenewalPlatform={}))},57362:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const n=r(88205);t.config={commands:{},queries:{getHasFeature:{selectorFactory:async e=>(await(0,n.makeFeatureFlipsSelectors)(e.applicationModulesAccess)).getHasFeatureSelector},getFeatures:{selectorFactory:async e=>(await(0,n.makeFeatureFlipsSelectors)(e.applicationModulesAccess)).featureFlipsSelector}},liveQueries:{}}},7279:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},72175:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0;const n=r(57362);t.bootstrap=e=>{e.register(n.config)}},43542:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0,o(r(84846),t);var i=r(72175);Object.defineProperty(t,"bootstrap",{enumerable:!0,get:function(){return i.bootstrap}})},88205:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makeFeatureFlipsSelectors=t.makeGetHasFeatureSelector=t.makeFeatureFlipsSelector=void 0;const n=r(18948),o=r(61475);t.makeFeatureFlipsSelector=e=>async()=>{const{queries:t}=e.createClients().featureFlips,r=await(0,n.firstValueFrom)(t.userFeatureFlips());return(0,o.isSuccess)(r)?r.data:{}},t.makeGetHasFeatureSelector=e=>async(t,r)=>{const{queries:i}=e.createClients().featureFlips,a=await(0,n.firstValueFrom)(i.userFeatureFlips());if((0,o.isSuccess)(a))return a.data[r]},t.makeFeatureFlipsSelectors=e=>({featureFlipsSelector:(0,t.makeFeatureFlipsSelector)(e),getHasFeatureSelector:(0,t.makeGetHasFeatureSelector)(e)})},84846:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},88485:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const n=r(78671);t.config={commands:{setGlobalExtensionSettings:{handler:n.setGlobalExtensionSettings},getGlobalExtensionSettings:{handler:n.getGlobalExtensionSettings}},queries:{},liveQueries:{}}},17644:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setGlobalExtensionSettingsState=t.SET_GLOBAL_EXTENSION_SETTINGS=void 0,t.SET_GLOBAL_EXTENSION_SETTINGS="SET_GLOBAL_EXTENSION_SETTINGS",t.setGlobalExtensionSettingsState=e=>({type:t.SET_GLOBAL_EXTENSION_SETTINGS,extensionSettings:e})},45316:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.globalExtensionSettingsReducer=void 0;var n=r(22018);Object.defineProperty(t,"globalExtensionSettingsReducer",{enumerable:!0,get:function(){return n.globalExtensionSettingsReducer}})},22018:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.globalExtensionSettingsReducer=void 0;const n=r(17644);t.globalExtensionSettingsReducer=(e={},t)=>t.type===n.SET_GLOBAL_EXTENSION_SETTINGS?Object.assign({},e,{extensionSettings:t.extensionSettings}):e},84838:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0;const n=r(88485);t.bootstrap=e=>{e.register(n.config)}},78671:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setGlobalExtensionSettings=t.getGlobalExtensionSettings=void 0;const n=r(66102),o=r(17644),i=r(70252),a="consents",s={interactionDataConsent:"interactionData",personalDataConsent:"personalData"},c={interactionDataConsent:null,personalDataConsent:null};t.getGlobalExtensionSettings=async e=>{const t=e.storageService.getLocalStorage();try{return((e=null)=>{const t=JSON.parse(e);return!t||"object"!=typeof t||Array.isArray(t)?c:Object.values(s).every((e=>Object.prototype.hasOwnProperty.call(t,e)))?{interactionDataConsent:t[s.interactionDataConsent],personalDataConsent:t[s.personalDataConsent]}:c})(await t.readItem(a))}catch{return console.warn("failed parsing user consent values; proceeding as if they haven't been set."),{interactionDataConsent:null,personalDataConsent:null}}},t.setGlobalExtensionSettings=async(e,t)=>{const r=e.storageService.getLocalStorage();try{await r.writeItem(a,JSON.stringify({[s.interactionDataConsent]:t.interactionDataConsent,[s.personalDataConsent]:t.personalDataConsent})),e.storeService.dispatch((0,o.setGlobalExtensionSettingsState)(t)),(0,i.setAllowedToSendExceptionLog)(!1!==t.interactionDataConsent),(0,n.logToggleAnalyticsEvent)(e)}catch{return{success:!1}}return{success:!0}}},44389:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0;var n=r(84838);Object.defineProperty(t,"bootstrap",{enumerable:!0,get:function(){return n.bootstrap}})},64090:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const n=r(47975);t.config={commands:{evaluatePassword:{handler:n.evaluatePassword}},queries:{},liveQueries:{}}},45968:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},10925:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.load=void 0;const n=r(55539);t.load=async e=>{const{data:t}=await(0,n.httpGetUsingFetch)(`${e}assets/frequency_lists.json`);return t}},47975:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.evaluatePassword=t.evaluatePasswordStrength=t.loadFrequencyLists=void 0;const n=r(85465),o=r(2646),i=r(10925);let a=()=>{};const s=new Promise((e=>{a=e}));t.loadFrequencyLists=async()=>{const e=(0,o.getPublicPath)(),t=await(0,i.load)(e);(0,n.setFrequencyLists)(t),a()};const c=async e=>(await s,(0,n.evaluate)(e));t.evaluatePasswordStrength=async e=>(await c(e)).score,t.evaluatePassword=async(e,t)=>{const{score:r,feedback:n}=await c(t.password);return{score:r,feedback:n}}},64948:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.evaluatePasswordStrengthOutOfFive=void 0;const n=r(47975);t.evaluatePasswordStrengthOutOfFive=async e=>{if(e)return await(0,n.evaluatePasswordStrength)(e)/25}},61566:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0;const n=r(64090);t.bootstrap=e=>{e.register(n.config)}},16359:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0;var n=r(61566);Object.defineProperty(t,"bootstrap",{enumerable:!0,get:function(){return n.bootstrap}})},17825:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.assertUnreachable=void 0,t.assertUnreachable=function(e,t="Didn't expect to reach this code."){throw new Error(t)}},32663:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.asyncFilter=void 0,t.asyncFilter=async function(e,t){const r=await Promise.all(e.map(t));return e.filter(((e,t)=>r[t]))}},27627:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.asyncMapLimit=void 0;const n=r(4939);t.asyncMapLimit=(e,t,r,o=e.length)=>{const i=e.length;let a=0;const s=[];let c=0;const u=n=>o=>{if(s[n]=o,a++,i===a)return r(s);c<i-1&&(c++,t(e[c],u(c)))},d=Math.max(Math.min(i,o),1);c=d-1;for(let r=0;r<d;r++)t(e[r],u(r)).catch((e=>(0,n.logWarn)({message:e.message})))}},63311:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.debounce=void 0,t.debounce=function(e,t){let r;return function(n,...o){var i=this;clearTimeout(r),n.immediateCall?(r=null,e.apply(i,o)):r=setTimeout((function(){r=null,e.apply(i,o)}),t)}}},5851:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.decipherDatabaseRules=void 0;const n=r(56668),o=r(83570);t.decipherDatabaseRules=(e,t)=>(async(e,t)=>{const r=await(0,n.decipherDashlaneSecureData)(t,e,"",(0,o.makeGetDerivateKeyWithCacheAndQueue)());return(0,n.deflatedUtf8ToUtf16)(r)})(e,t)},82761:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sanitizeTransactions=void 0,t.sanitizeTransactions=e=>e.filter(Boolean)},93564:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getWindowLocalStorage=void 0,t.getWindowLocalStorage=function(){return self.localStorage||null}},96186:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.inMemoryInterSessionUnsyncedSliceReducer=void 0;var n=r(75486);Object.defineProperty(t,"inMemoryInterSessionUnsyncedSliceReducer",{enumerable:!0,get:function(){return n.inMemoryInterSessionUnsyncedSliceReducer}})},16373:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.resetAllLoginNotification=t.addNewLoginNotification=t.RESET_ALL_LOGIN_NOTIFICATIONS=t.ADD_NEW_LOGIN_NOTIFICATION=void 0,t.ADD_NEW_LOGIN_NOTIFICATION="ADD_NEW_LOGIN_NOTIFICATION",t.RESET_ALL_LOGIN_NOTIFICATIONS="RESET_ALL_LOGIN_NOTIFICATIONS",t.addNewLoginNotification=e=>({type:t.ADD_NEW_LOGIN_NOTIFICATION,notification:e}),t.resetAllLoginNotification=()=>({type:t.RESET_ALL_LOGIN_NOTIFICATIONS})},71907:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(16373);t.default=(e=[],t)=>{switch(t.type){case n.ADD_NEW_LOGIN_NOTIFICATION:return[...e,t.notification];case n.RESET_ALL_LOGIN_NOTIFICATIONS:return[];default:return e}}},75486:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.inMemoryInterSessionUnsyncedSliceReducer=void 0;const n=r(98160),o=r(71907);t.inMemoryInterSessionUnsyncedSliceReducer=(0,n.combineReducers)({loginNotification:o.default})},96637:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TsEventBusCommandQueryBus=void 0;var n=r(42278);Object.defineProperty(t,"TsEventBusCommandQueryBus",{enumerable:!0,get:function(){return n.TsEventBusCommandQueryBus}})},42278:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TsEventBusCommandQueryBus=void 0;const n=r(71796),o=r(30137),i=r(7036);class a extends o.CommandQueryBus{constructor(e,t,r){super(e),this.bus=r,r||(this.bus=(0,n.createEventBus)({events:t}))}registerCommand(e,t){this.bus[e].on(t)}registerQuery(e,t){this.bus[e].on(t)}registerLiveQuery(e,t){(0,i.connectLazySlot)(this.bus[e],t)}}t.TsEventBusCommandQueryBus=a},76901:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LocalStorageEventStore=void 0;const n=r(33968),o=r(15660);class i extends n.EventStore{constructor(e){super(),this.localStorageService=e}async store(e){await this.localStorageService.getInstance().storeEventStore(e)}async retrieve(){const e=await this.localStorageService.getInstance().getEventStore();return null===e?o.defaultCarbonEventStore:{iconsUpdates:e.iconsUpdates||o.defaultCarbonEventStore.iconsUpdates}}}t.LocalStorageEventStore=i},42898:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EventStoreConsumer=void 0;const n=r(28354);t.EventStoreConsumer=class{constructor(e,t){this.eventStore=e,this.hooks=t,this.liveConsumptionSubs={},this.lockIds={},this.startTopic=e=>{this.startLiveConsumption(e),this.consumeTopic(e)},this.lockTopic=e=>{this.stopLiveConsumption(e);const t=(0,n.v4)();return this.lockIds[e]=(this.lockIds[e]||new Set).add(t),t},this.releaseTopic=(e,t)=>{const r=this.lockIds[e];r&&r.delete(t),r&&0!==r.size||this.startTopic(e)},this.teardown=()=>{Object.keys(this.liveConsumptionSubs).forEach(this.stopLiveConsumption)},this.consumeTopic=async e=>{const t=await this.eventStore.getItems(e);for(const r of t)this.handleItem(e,r)},this.startLiveConsumption=e=>{this.liveConsumptionSubs[e]||(this.liveConsumptionSubs[e]=this.eventStore.newItems$(e).subscribe((t=>this.handleItem(e,t))))},this.stopLiveConsumption=e=>{this.liveConsumptionSubs[e]&&(this.liveConsumptionSubs[e].unsubscribe(),delete this.liveConsumptionSubs[e])},this.handleItem=async(e,t)=>{const r=this.hooks[e];r||await this.eventStore.remove(e,t.id),await r(t.event)&&await this.eventStore.remove(e,t.id)}}}},36606:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DebugConnector=void 0;const n=r(71796);t.DebugConnector={log:(0,n.slot)(),info:(0,n.slot)(),warning:(0,n.slot)(),error:(0,n.slot)()}},44261:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},92231:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(44261),t),o(r(36606),t)},31335:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const n=r(78759),o=r(91296);t.config={commands:{},queries:{getIsBrazeContentDisabled:{selector:n.disableBrazeContentCardsSelector},getIsLoginFlowMigrationDisabled:{selector:n.disableLoginFlowMigrationSelector},getIsAutoSSOLoginDisabled:{selector:n.disableAutoSSOLoginSelector}},liveQueries:{liveIsBrazeContentDisabled:{operator:o.disableBrazeContentCardsOperator$},liveIsLoginFlowMigrationDisabled:{operator:o.disableLoginFlowMigrationOperator$},liveIsAutoSSOLoginDisabled:{operator:o.disableAutoSSOLoginOperator$}}}},19469:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0;const n=r(31335);t.bootstrap=e=>{e.register(n.config)}},13240:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RequestedKillSwitches=void 0,function(e){e.DisableAutofill="disableAutofill",e.BrazeContentCardsDisabled="brazeContentCardsDisabled",e.DisableLoginFlowMigration="disableLoginFlowMigration",e.DisableAutoSSOLogin="disableAutoSSOLogin"}(t.RequestedKillSwitches||(t.RequestedKillSwitches={}))},36641:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.triggerKillswitchCron=void 0;const n=r(55030);let o=null;t.triggerKillswitchCron=function(e){return o||((0,n.updateKillswitchState)(e),o=setInterval((()=>{try{(0,n.updateKillswitchState)(e)}catch{}}),36e5)),o}},61:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0;var n=r(19469);Object.defineProperty(t,"bootstrap",{enumerable:!0,get:function(){return n.bootstrap}})},55030:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.updateKillswitchState=void 0;const n=r(66677),o=r(46298),i=r(91122),a=r(13240);t.updateKillswitchState=async e=>{const t=Object.values(a.RequestedKillSwitches),r=await(0,n.getKillSwitches)(e,t);if((0,o.isApiError)(r))throw new Error(`[Killswitch] - updateKillswitchState : ${r.message} (${r.code})`);e.dispatch((0,i.killswitchStateUpdated)({disableAutofill:r.disableAutofill||!1,brazeContentCardsDisabled:r.brazeContentCardsDisabled||!1,disableLoginFlowMigration:r.disableLoginFlowMigration||!1,disableAutoSSOLogin:r.disableAutoSSOLogin||!1}))}},91296:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.disableAutoSSOLoginOperator$=t.disableLoginFlowMigrationOperator$=t.disableBrazeContentCardsOperator$=void 0;const n=r(18948),o=r(3343),i=r(78759);t.disableBrazeContentCardsOperator$=()=>(0,n.pipe)((0,o.map)(i.disableBrazeContentCardsSelector),(0,o.distinctUntilChanged)()),t.disableLoginFlowMigrationOperator$=()=>(0,n.pipe)((0,o.map)(i.disableLoginFlowMigrationSelector),(0,o.distinctUntilChanged)()),t.disableAutoSSOLoginOperator$=()=>(0,n.pipe)((0,o.map)(i.disableAutoSSOLoginSelector),(0,o.distinctUntilChanged)())},78759:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.disableAutoSSOLoginSelector=t.disableLoginFlowMigrationSelector=t.disableBrazeContentCardsSelector=t.disableAutofillSelector=t.killswitchSelector=void 0;const n=r(73651);t.killswitchSelector=e=>e.device.killswitch||(0,n.getEmptyKillswitchState)(),t.disableAutofillSelector=e=>(0,t.killswitchSelector)(e).disableAutofill||!1,t.disableBrazeContentCardsSelector=e=>(0,t.killswitchSelector)(e).brazeContentCardsDisabled||!1,t.disableLoginFlowMigrationSelector=e=>(0,t.killswitchSelector)(e).disableLoginFlowMigration||!1,t.disableAutoSSOLoginSelector=e=>(0,t.killswitchSelector)(e).disableAutoSSOLogin},23299:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setupSubscriptions=void 0;const n=r(36641);t.setupSubscriptions=function(e,t){e.appInitialized.on((()=>{const{storeService:e}=t;(0,n.triggerKillswitchCron)(e)}))}},89855:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isBackupCryptError=t.BackupCryptError=t.BackupCryptErrorMessages=t.BackupCryptErrorCode=void 0;const n=r(92263);var o;!function(e){e[e.TRANSACTION_CLEAR_CONTENT_EMPTY=0]="TRANSACTION_CLEAR_CONTENT_EMPTY",e[e.EMPTY_CLEAR_FULL_BACKUP_FILE_XML=1]="EMPTY_CLEAR_FULL_BACKUP_FILE_XML",e[e.CLEAR_FULL_BACKUP_FILE_XML_NOT_AN_ARRAY=2]="CLEAR_FULL_BACKUP_FILE_XML_NOT_AN_ARRAY",e[e.EMPTY_FULL_BACKUP_FILE=3]="EMPTY_FULL_BACKUP_FILE",e[e.NULL_FULL_BACKUP_FILE_MAP=4]="NULL_FULL_BACKUP_FILE_MAP",e[e.EMPTY_FULL_BACKUP_FILE_MAP=5]="EMPTY_FULL_BACKUP_FILE_MAP",e[e.EMPTY_CLEAR_FULL_BACKUP_FILE=6]="EMPTY_CLEAR_FULL_BACKUP_FILE",e[e.CLEAR_FULL_BACKUP_FILE_NOT_XML=7]="CLEAR_FULL_BACKUP_FILE_NOT_XML",e[e.FULL_BACKUP_FILE_ITEM_WITHOUT_KWTYPE=8]="FULL_BACKUP_FILE_ITEM_WITHOUT_KWTYPE",e[e.FULL_BACKUP_FILE_ITEM_WITHOUT_ID=9]="FULL_BACKUP_FILE_ITEM_WITHOUT_ID",e[e.TRANSACTION_CONTENT_NOT_XML=10]="TRANSACTION_CONTENT_NOT_XML"}(o=t.BackupCryptErrorCode||(t.BackupCryptErrorCode={})),t.BackupCryptErrorMessages={[o.TRANSACTION_CLEAR_CONTENT_EMPTY]:"Empty transaction content",[o.EMPTY_CLEAR_FULL_BACKUP_FILE_XML]:"Empty full backup file XML",[o.CLEAR_FULL_BACKUP_FILE_XML_NOT_AN_ARRAY]:"Full backup file XML not resolved as an array",[o.EMPTY_FULL_BACKUP_FILE]:"Empty full backup file",[o.NULL_FULL_BACKUP_FILE_MAP]:"Null full backup file map",[o.EMPTY_FULL_BACKUP_FILE_MAP]:"Empty full backup file map",[o.EMPTY_CLEAR_FULL_BACKUP_FILE]:"Deciphered full backup file content is empty",[o.CLEAR_FULL_BACKUP_FILE_NOT_XML]:"WRONG_PASSWORD",[o.FULL_BACKUP_FILE_ITEM_WITHOUT_KWTYPE]:"Full backup file item without kwType",[o.FULL_BACKUP_FILE_ITEM_WITHOUT_ID]:"Full backup file item without Id",[o.TRANSACTION_CONTENT_NOT_XML]:"WRONG_PASSWORD"},t.BackupCryptError={codes:o,name:"BackupCryptError",messages:t.BackupCryptErrorMessages},t.isBackupCryptError=e=>(0,n.isCarbonError)(e,t.BackupCryptError)},46e3:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.decryptFullBackupFile=void 0;const n=r(80469),o=r(89855),i=r(83638),a=r(56668),s=r(92263),c=r(61797),u=r(70252),d=r(58582),l=async(e,t)=>{try{const e=await(0,c.parseDashlaneXml)(t);if(!e)throw new s.CarbonError(o.BackupCryptError,o.BackupCryptErrorCode.EMPTY_CLEAR_FULL_BACKUP_FILE_XML);if(!Array.isArray(e))throw new s.CarbonError(o.BackupCryptError,o.BackupCryptErrorCode.CLEAR_FULL_BACKUP_FILE_XML_NOT_AN_ARRAY);return e}catch(t){throw e(d.announcements.decipherFullBackupParseFailed(t)),t}},p=(e,t,r)=>{if(null==t)return e(d.announcements.decipherFullBackupSkipped()),!1;if(""===t)throw new s.CarbonError(o.BackupCryptError,o.BackupCryptErrorCode.EMPTY_FULL_BACKUP_FILE);if(null===r)throw new s.CarbonError(o.BackupCryptError,o.BackupCryptErrorCode.NULL_FULL_BACKUP_FILE_MAP);if(t&&0===r.size)throw new s.CarbonError(o.BackupCryptError,o.BackupCryptErrorCode.EMPTY_FULL_BACKUP_FILE_MAP);return!0},m=async(e,t,r)=>{try{const t=await e.decrypt(r),n=(0,a.deflatedUtf8ToUtf16)(t);if(!n){const e=new s.CarbonError(o.BackupCryptError,o.BackupCryptErrorCode.EMPTY_CLEAR_FULL_BACKUP_FILE);throw u.sendExceptionLog({error:e}),e}if("string"==typeof n&&!n.trim().startsWith("<"))throw new s.CarbonError(o.BackupCryptError,o.BackupCryptErrorCode.CLEAR_FULL_BACKUP_FILE_NOT_XML);return n}catch(o){const i=(0,n.attemptReadCryptoPayload)(e,r);throw t(d.announcements.decipherFullBackupDecipherFailed(o,i)),o}},g=(e,t,r)=>{const{Id:n,kwType:a}=t,c=r.get(n);if(void 0===c)return e(d.announcements.decipherFullBackupItemSkipped(new Error("Transaction not in full backup list skipped"),{itemType:a,itemId:n})),null;const u=t instanceof Object?Object.keys(t):[];if(!a){const t=new s.CarbonError(o.BackupCryptError,o.BackupCryptErrorCode.FULL_BACKUP_FILE_ITEM_WITHOUT_KWTYPE);throw e(d.announcements.decipherFullBackupItemReadFailed(t.addAdditionalInfo({itemId:n,itemKeys:u}),n)),t}return n?(e(d.announcements.decipherFullBackupItemRead(a,n,c)),{type:(0,i.getTransactionTypeFromDataModelType)(a),backupDate:c,action:"BACKUP_EDIT",identifier:n,content:t}):(e(d.announcements.decipherFullBackupItemSkipped(new Error("Transaction without id skipped"),{itemType:a})),null)};t.decryptFullBackupFile=async function(e,t,r,i){try{if(!p(t,r,i))return[];t(d.announcements.decipherFullBackupStarted());const o=await m(e,t,r),a=await l(t,o),s=((e,t,r)=>{const n=t.length,o=[],i=new Set;for(let a=0;a<n;++a){const n=t[a];n.Id&&i.add(n.Id);const s=g(e,n,r);s&&o.push(s)}return((e,t,r)=>{for(const n in t.keys())r.has(n)||e(d.announcements.decipherFullBackupItemSkipped(new Error("Missing full backup item content"),{itemId:n}))})(e,r,i),o})(t,(0,n.fixKwType)(a),i);return t(d.announcements.decipherFullBackupFinished(s.length)),s}catch(e){if(t(d.announcements.decipherFullBackupFailed(e)),(0,s.isCarbonError)(e,o.BackupCryptError,o.BackupCryptErrorCode.EMPTY_CLEAR_FULL_BACKUP_FILE))return[];throw e}}},63713:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.encryptSingleTransaction=t.decrypt=void 0;const n=r(16516),o=r(46e3),i=r(16859);Object.defineProperty(t,"encryptSingleTransaction",{enumerable:!0,get:function(){return i.encryptSingleTransaction}});const a=r(59700),s=r(58582),c=e=>(0,n.partition)((e=>"SETTINGS"===e.type),e),u=e=>(0,n.partition)((e=>!!e.content),e);t.decrypt=async function(e,t,r,n,d){if(null===d)throw new Error("null transactions");const l=Number(r&&n.size);t(s.announcements.decipherStarted(l));const p=await(0,o.decryptFullBackupFile)(e,t,r,n);t(s.announcements.decipherTransactionsStarted());const[m,g]=c(d),f=await(0,i.decryptSingleTransactions)(e,t,m),[S,h]=u(g),y=(0,a.makeOpenSessionProgressService)();y.init(S.length);const v=await(0,i.decryptSingleTransactions)(e,t,S,y),E=(e=>e.map((e=>({...e,content:null}))))(h);t(s.announcements.decipherTransactionsFinished());const A=[...p,...f,...E,...v];return t(s.announcements.decipherFinished(A)),A}},59700:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makeOpenSessionProgressService=void 0;const n=r(19697);t.makeOpenSessionProgressService=()=>{let e,t,r,o;const i=(i=!1)=>{const a=(0,n.default)();if(!a)return;const s=t/e*100;(i||Date.now()-o>=500&&s!==r)&&(r=s,o=Date.now(),a.openSessionProgressChanged({statusDescription:"percentage of work done before session opening",statusProgress:r}))};return{init(n){e=n,t=0,r=0,o=Date.now(),i(!0)},incrementJobsDone(){if(void 0===e)throw new Error("openSessionProgressService must be initialized before begin used");t++,i()},decrementJobsTodo(){e--}}}},16859:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.encryptSingleTransaction=t.decryptSingleTransactions=t.decryptSingleTransaction=t.parseTransactionContentXml=t.decryptTransactionContent=void 0;const n=r(53576),o=r(80469),i=r(89855),a=r(92263),s=r(61797),c=r(70252),u=r(56668),d=r(58582);t.decryptTransactionContent=async(e,t,{content:r})=>{try{const t=await e.decrypt(r);return(0,u.deflatedUtf8ToUtf16)(t)}catch(n){const i=(0,o.attemptReadCryptoPayload)(e,r);throw t(d.announcements.decipherTransactionDecipherFailed(n,i)),n}},t.parseTransactionContentXml=async(e,t)=>{try{return(e=>{if(!e){const e=new a.CarbonError(i.BackupCryptError,i.BackupCryptErrorCode.TRANSACTION_CLEAR_CONTENT_EMPTY);throw c.sendExceptionLog({error:e}),e}})(t),(e=>{if("string"==typeof e&&!e.trim().startsWith("<"))throw new a.CarbonError(i.BackupCryptError,i.BackupCryptErrorCode.TRANSACTION_CONTENT_NOT_XML)})(t),await(0,s.parseDashlaneXml)(t)}catch(t){throw e(d.announcements.decipherTransactionParseFailed(t)),t}};const l=(e,t)=>Object.assign({},e,{content:t});async function p(e,r,a){try{r(d.announcements.decipherTransactionStarted(a));const n=await(0,t.decryptTransactionContent)(e,r,a),i=await(0,t.parseTransactionContentXml)(r,n),s=(0,o.fixKwType)(i),c=l(a,s);return r(d.announcements.decipherTransactionFinished(a)),c}catch(e){const{type:t}=a;if((0,i.isBackupCryptError)(e)){const{action:r,backupDate:o,identifier:i}=a,s=(0,n.getDataModelTypeFromTransactionType)(t);e.addAdditionalInfo({itemId:i,itemType:s,action:r,backupDate:o})}if(r(d.announcements.decipherTransactionFailed(e,a)),"SETTINGS"===t)throw e;return null}}t.decryptSingleTransaction=p,t.decryptSingleTransactions=async function(e,t,r,n){const o=r.map((async r=>{const o=await p(e,t,r);return n&&n.incrementJobsDone(),o}));return(await Promise.all(o)).filter(Boolean)},t.encryptSingleTransaction=async function(e,t,r={}){const n=(0,u.utf16ToDeflatedUtf8)(t.content),o=await e.getInstance().encrypt(n,r);return{...t,content:o}}},80469:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fixKwType=t.attemptReadCryptoPayload=void 0;const n=r(54218);t.attemptReadCryptoPayload=(e,t)=>{try{return e.readCryptoPayload(t)}catch(e){}return""},t.fixKwType=function e(t){return Array.isArray(t)?t.map((t=>e(t))):(0,n.default)(t)?Object.keys(t).reduce(((r,n)=>{const o=t[n];return"__type__"===n?r.kwType=o:r[n]=e(o),r}),{}):t}},17936:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(44317),t)},44317:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makeDiagnosticReportMonitor=void 0;const n=r(53576),o=r(54034),i=r(92263),a=r(89855);t.makeDiagnosticReportMonitor=()=>{let e="",t="";const r="fullBackupFile";return(s,{timestamp:c})=>{switch(s.type){case"DecipherFullBackupStarted":(0,o.triggerSendTransactionDecipheringDiagnosticLog)({date:c,identifier:r,message:"[decryptFullBackupFile] - Start Decryption"});break;case"DecipherFullBackupItemRead":{const{itemId:e}=s;(0,o.triggerSendTransactionDecipheringDiagnosticLog)({date:c,identifier:r,message:`[fullBackupFileItemsContent] - ${e} succeed`,status:"succeed"})}break;case"DecipherFullBackupItemSkipped":{const{itemId:e}=s;(0,o.triggerSendTransactionDecipheringDiagnosticLog)({date:c,identifier:r,message:e?`[fullBackupFileItemsContent] - ${e} does not have backupDate => return null`:"[fullBackupFileItemsContent] - does not have id => return null",status:"failed"})}break;case"DecipherFullBackupParseFailed":{const{error:t}=s;e=(0,i.isCarbonError)(t,a.BackupCryptError,a.BackupCryptErrorCode.EMPTY_CLEAR_FULL_BACKUP_FILE_XML)?"parseXml does not failed but result nothing => reject err: WRONG_PASSWORD":(0,i.isCarbonError)(t,a.BackupCryptError,a.BackupCryptErrorCode.CLEAR_FULL_BACKUP_FILE_XML_NOT_AN_ARRAY)?"parseXml result not an Array => reject err: fullBackupFileItemsContent is not an Array":`parseXml failed => reject err: ${t}`}break;case"DecipherFullBackupDecipherFailed":{const{error:t}=s;e=(0,i.isCarbonError)(t,a.BackupCryptError,a.BackupCryptErrorCode.CLEAR_FULL_BACKUP_FILE_NOT_XML)?'decrypt result with xml string which does not start with "<" => throw new Error WRONG_PASSWORD':(0,i.isCarbonError)(t,a.BackupCryptError,a.BackupCryptErrorCode.EMPTY_CLEAR_FULL_BACKUP_FILE)?"decrypt result with empty xml => throw new Error (Decrypt FullBackupFile empty result)":"failed to decipher fullBackupFile"}break;case"DecipherFullBackupFailed":(0,o.triggerSendTransactionDecipheringDiagnosticLog)({date:c,identifier:r,message:`[decryptFullBackupFile] - ${e}: null`,status:"failed"});break;case"DecipherFullBackupFinished":(0,o.triggerSendTransactionDecipheringDiagnosticLog)({date:c,identifier:r,message:`[decryptFullBackupFile] - ${e}: null`,status:"succeed"});break;case"DecipherTransactionStarted":{const{identifier:e,action:r,backupDate:i,time:a,transactionType:u}=s;t=e,(0,o.triggerSendTransactionDecipheringDiagnosticLog)({identifier:e,action:r,backupDate:i,time:a,type:n.TransactionType[u],date:c,message:"[decryptSingleTransaction] - Start Decryption"})}break;case"DecipherTransactionDecipherFailed":{const{error:t}=s;e=(0,i.isCarbonError)(t,a.BackupCryptError,a.BackupCryptErrorCode.TRANSACTION_CONTENT_NOT_XML)?'decrypt resolve with xml string that does not start with "<"':(0,i.isCarbonError)(t,a.BackupCryptError,a.BackupCryptErrorCode.TRANSACTION_CLEAR_CONTENT_EMPTY)?"decrypt resolve empty xml content":"Decryption failed with error"}break;case"DecipherTransactionParseFailed":e="failed to parse XML content";break;case"DecipherTransactionFailed":(0,o.triggerSendTransactionDecipheringDiagnosticLog)({date:c,identifier:t,message:`[decryptSingleTransaction] - ${e}: null`,status:"failed"});break;case"DecipherTransactionFinished":(0,o.triggerSendTransactionDecipheringDiagnosticLog)({date:c,identifier:t,message:"[decryptSingleTransaction] - Success",status:"succeed"})}}}},91453:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.formatStep=void 0;const n=r(2695),o=r(17825);t.formatStep=e=>{switch(e){case n.SyncLoggerStep.Main:return"[Sync]";case n.SyncLoggerStep.Chronological:return"[Sync|Chrono]";case n.SyncLoggerStep.Latest:return"[Sync|Latest]";case n.SyncLoggerStep.Decipher:return"[Sync|Decipher]";case n.SyncLoggerStep.DecipherFullBackup:return"[Sync|Decipher|FullBackup]";case n.SyncLoggerStep.DecipherTransactions:return"[Sync|Decipher|Transactions]";case n.SyncLoggerStep.Duplicate:return"[Sync|Duplicate]";case n.SyncLoggerStep.Cipher:return"[Sync|Cipher]";case n.SyncLoggerStep.Upload:return"[Sync|Upload]";case n.SyncLoggerStep.Save:return"[Sync|Save]";case n.SyncLoggerStep.TreatProblem:return"[Sync|TreatProblem]";case n.SyncLoggerStep.TreatProblemSummary:return"[Sync|TreatProblem|Summary]";case n.SyncLoggerStep.Sharing:return"[Sync|Sharing]";case n.SyncLoggerStep.TeamAdminData:return"[Sync|TeamAdminData]";default:(0,o.assertUnreachable)(e)}}},92221:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(71044),t)},71369:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.logSyncVerbose=t.logSyncDebug=t.logSyncInfo=t.logSyncWarn=t.logSyncError=void 0;const n=r(95623),o=(0,n.withTag)("Sync");t.logSyncError=o(n.logError),t.logSyncWarn=o(n.logWarn),t.logSyncInfo=o(n.logInfo),t.logSyncDebug=o(n.logDebug),t.logSyncVerbose=o(n.logVerbose)},71044:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makeSyncLoggerMonitor=void 0;const n=r(58582),o=r(2695),i=r(90635),a=r(91453),s=r(71369);t.makeSyncLoggerMonitor=()=>{let e=null;const t=e=>"object"==typeof e&&e.message||`${e}`,r=(e,t)=>`${(0,a.formatStep)(e)} ${t}`;return(a,{timestamp:c})=>{switch(a.type){case"SyncStarted":{const{syncType:t}=a;e=c,(0,s.logSyncInfo)({message:r(o.SyncLoggerStep.Main,"Start"),details:{step:o.SyncLoggerStep.Main,Type:(0,i.syncTypeForSyncLogger)(t)}})}break;case"ChronologicalSyncStarted":{const{updatesCount:t,deletesCount:n}=a;(0,s.logSyncDebug)({message:r(o.SyncLoggerStep.Chronological,"Start"),details:{step:o.SyncLoggerStep.Chronological,Timestamp:e,Update:t,Delete:n}})}break;case"LatestRequested":{const{lock:t,needsKeys:n}=a;(0,s.logSyncDebug)({message:r(o.SyncLoggerStep.Latest,"Request"),details:{step:o.SyncLoggerStep.Latest,Timestamp:e,Lock:t,SharingKeys:n}})}break;case"LatestSucceeded":{const{updatesCount:t,deletesCount:n,fullBackupSize:i}=a;(0,s.logSyncDebug)({message:r(o.SyncLoggerStep.Latest,"Success"),details:{step:o.SyncLoggerStep.Latest,Timestamp:e,Update:t,Delete:n,FullBackup:i}})}break;case"LatestFailed":{const{error:e}=a;(0,s.logSyncWarn)({message:r(o.SyncLoggerStep.Latest,"Error"),details:{step:o.SyncLoggerStep.Latest,Cause:t(e)}})}break;case"DecipherStarted":{const{fullBackupFileSize:e}=a;(0,s.logSyncVerbose)({message:r(o.SyncLoggerStep.Decipher,"Start"),details:{step:o.SyncLoggerStep.Decipher,Count:e}})}break;case"DecipherFullBackupSkipped":(0,s.logSyncVerbose)({message:r(o.SyncLoggerStep.DecipherFullBackup,"Skip"),details:{step:o.SyncLoggerStep.DecipherFullBackup}});break;case"DecipherFullBackupStarted":(0,s.logSyncVerbose)({message:r(o.SyncLoggerStep.DecipherFullBackup,"Start"),details:{step:o.SyncLoggerStep.DecipherFullBackup}});break;case"DecipherFullBackupItemRead":{const{itemType:e,itemId:t,backupDate:n}=a;(0,s.logSyncDebug)({message:r(o.SyncLoggerStep.DecipherFullBackup,"Transaction"),details:{step:o.SyncLoggerStep.DecipherFullBackup,Type:e,Id:t,Date:n}})}break;case"DecipherFullBackupItemSkipped":{const{error:e,itemType:n,itemId:i}=a;(0,s.logSyncDebug)({message:r(o.SyncLoggerStep.DecipherFullBackup,"TransactionSkipped"),details:{step:o.SyncLoggerStep.DecipherFullBackup,Type:n,Id:i,Cause:t(e)}})}break;case"DecipherFullBackupFinished":{const{itemsCount:e}=a;(0,s.logSyncVerbose)({message:r(o.SyncLoggerStep.DecipherFullBackup,"Done"),details:{step:o.SyncLoggerStep.DecipherFullBackup,Count:e}})}break;case"DecipherFullBackupFailed":{const{error:e}=a;(0,s.logSyncWarn)({message:r(o.SyncLoggerStep.DecipherFullBackup,"Error"),details:{step:o.SyncLoggerStep.DecipherFullBackup,Cause:t(e)}})}break;case"DecipherTransactionsStarted":(0,s.logSyncVerbose)({message:r(o.SyncLoggerStep.DecipherTransactions,"Start"),details:{step:o.SyncLoggerStep.DecipherTransactions}});break;case"DecipherTransactionFinished":{const{action:e,transactionType:t,identifier:n,backupDate:i}=a;(0,s.logSyncDebug)({message:r(o.SyncLoggerStep.DecipherTransactions,"Transaction"),details:{step:o.SyncLoggerStep.DecipherTransactions,Action:e,Type:t,Id:n,Date:i}})}break;case"DecipherTransactionFailed":{const{error:e,transactionType:n,identifier:i,backupDate:c}=a;(0,s.logSyncWarn)({message:r(o.SyncLoggerStep.DecipherTransactions,"Error"),details:{step:o.SyncLoggerStep.DecipherTransactions,Cause:t(e),Type:n,Id:i,Date:c}})}break;case"DecipherTransactionsFinished":(0,s.logSyncVerbose)({message:r(o.SyncLoggerStep.DecipherTransactions,"Done"),details:{step:o.SyncLoggerStep.DecipherTransactions}});break;case"DecipherFinished":{const{updatesCount:e,deletesCount:t}=a;(0,s.logSyncVerbose)({message:r(o.SyncLoggerStep.Decipher,"Done"),details:{step:o.SyncLoggerStep.Decipher,Transactions:e+t}})}break;case"TransactionDuplicated":{const{transactionType:e,identifier:t,backupDate:n}=a;(0,s.logSyncWarn)({message:r(o.SyncLoggerStep.Duplicate,"Transaction"),details:{step:o.SyncLoggerStep.Duplicate,Type:e,Id:t,Date:n}})}break;case"CipherStarted":(0,s.logSyncVerbose)({message:r(o.SyncLoggerStep.Cipher,"Start"),details:{step:o.SyncLoggerStep.Cipher}});break;case"TransactionCiphered":{const{transactionType:e,itemId:t,backupDate:n}=a;(0,s.logSyncDebug)({message:r(o.SyncLoggerStep.Cipher,"Transaction"),details:{step:o.SyncLoggerStep.Cipher,Type:e,Id:t,Date:n}})}break;case"CipherFinished":(0,s.logSyncVerbose)({message:r(o.SyncLoggerStep.Cipher,"Done"),details:{step:o.SyncLoggerStep.Cipher}});break;case"UploadRequested":{const{updatedCount:e,deletedCount:t}=a;(0,s.logSyncDebug)({message:r(o.SyncLoggerStep.Upload,"Request"),details:{step:o.SyncLoggerStep.Upload,Update:e,Delete:t}})}break;case"UploadSucceeded":{const{timestamp:e}=a;(0,s.logSyncDebug)({message:r(o.SyncLoggerStep.Upload,"Success"),details:{step:o.SyncLoggerStep.Upload,Timestamp:e}})}break;case"UploadFailed":{const{error:e}=a;(0,s.logSyncWarn)({message:r(o.SyncLoggerStep.Upload,"Error"),details:{step:o.SyncLoggerStep.Upload,Cause:t(e)}})}break;case"SaveStarted":(0,s.logSyncVerbose)({message:r(o.SyncLoggerStep.Save,"Start"),details:{step:o.SyncLoggerStep.Save}});break;case"SaveFinished":(0,s.logSyncVerbose)({message:r(o.SyncLoggerStep.Save,"Done"),details:{step:o.SyncLoggerStep.Save}});break;case"ChronologicalSyncFinished":{const{summarySize:e}=a;(0,s.logSyncDebug)({message:r(o.SyncLoggerStep.Chronological,"Done"),details:{step:o.SyncLoggerStep.Chronological,Summary:e}})}break;case"TreatProblemStarted":(0,s.logSyncDebug)({message:r(o.SyncLoggerStep.TreatProblem,"Start"),details:{step:o.SyncLoggerStep.TreatProblem}});break;case"TreatProblemSummaryStarted":{const{localItemsCount:e,remoteItemsCount:t}=a;(0,s.logSyncDebug)({message:r(o.SyncLoggerStep.TreatProblemSummary,"Start"),details:{step:o.SyncLoggerStep.TreatProblemSummary,Local:e,Remote:t}})}break;case"TreatProblemSummaryCompared":{const{result:e,cause:t,transactionType:i,identifier:c,localDate:u,remoteDate:d}=a,l=void 0!==d?{RemoteDate:d}:{},p=t?{Cause:n.TreatProblemSummaryComparedCause[t]}:{},m=u?{LocalDate:u}:{};(0,s.logSyncDebug)({message:r(o.SyncLoggerStep.TreatProblemSummary,"Comparison"),details:{step:o.SyncLoggerStep.TreatProblemSummary,Result:n.TreatProblemSummaryComparedResult[e],...p,Type:i,Id:c,...m,...l}})}break;case"TreatProblemSummaryFinished":(0,s.logSyncDebug)({message:r(o.SyncLoggerStep.TreatProblemSummary,"Done"),details:{step:o.SyncLoggerStep.TreatProblemSummary}});break;case"TreatProblemDiffComputed":{const{transactionsToDownloadCount:e,transactionsToUploadCount:t}=a;0===e&&0===t?(0,s.logSyncVerbose)({message:r(o.SyncLoggerStep.TreatProblem,"Diff UpToDate"),details:{step:o.SyncLoggerStep.TreatProblem}}):(0,s.logSyncWarn)({message:r(o.SyncLoggerStep.TreatProblem,"Diff"),details:{step:o.SyncLoggerStep.TreatProblem,Download:e,Upload:t}})}break;case"TreatProblemFinished":(0,s.logSyncDebug)({message:r(o.SyncLoggerStep.TreatProblem,"Done"),details:{step:o.SyncLoggerStep.TreatProblem}});break;case"TeamAdminDataSyncStarted":(0,s.logSyncDebug)({message:r(o.SyncLoggerStep.TeamAdminData,"Start"),details:{step:o.SyncLoggerStep.TeamAdminData}});break;case"TeamAdminDataSyncFinished":(0,s.logSyncDebug)({message:r(o.SyncLoggerStep.TeamAdminData,"Done"),details:{step:o.SyncLoggerStep.TeamAdminData}});break;case"SharingSyncStarted":(0,s.logSyncDebug)({message:r(o.SyncLoggerStep.Sharing,"Start"),details:{step:o.SyncLoggerStep.Sharing}});break;case"SharingSyncFinished":(0,s.logSyncDebug)({message:r(o.SyncLoggerStep.Sharing,"Done"),details:{step:o.SyncLoggerStep.Sharing}});break;case"SyncFinished":(0,s.logSyncInfo)({message:r(o.SyncLoggerStep.Main,"Done"),details:{step:o.SyncLoggerStep.Main}});break;case"SyncFailed":{const{error:e}=a;(0,s.logSyncError)({message:r(o.SyncLoggerStep.Main,"Failed"),details:{step:o.SyncLoggerStep.Main,Cause:t(e)}})}}}}},2695:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SyncLoggerStep=void 0,function(e){e[e.Main=0]="Main",e[e.Chronological=1]="Chronological",e[e.Latest=2]="Latest",e[e.Decipher=3]="Decipher",e[e.DecipherFullBackup=4]="DecipherFullBackup",e[e.DecipherTransactions=5]="DecipherTransactions",e[e.Duplicate=6]="Duplicate",e[e.Cipher=7]="Cipher",e[e.Upload=8]="Upload",e[e.Save=9]="Save",e[e.TreatProblem=10]="TreatProblem",e[e.TreatProblemSummary=11]="TreatProblemSummary",e[e.Sharing=12]="Sharing",e[e.TeamAdminData=13]="TeamAdminData"}(t.SyncLoggerStep||(t.SyncLoggerStep={}))},90635:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.syncTypeForSyncLogger=void 0;const n=r(37898),o=r(17825);t.syncTypeForSyncLogger=e=>{switch(e){case n.SyncType.LIGHT_SYNC:return"Light";case n.SyncType.FULL_SYNC:return"Full";case n.SyncType.FIRST_SYNC:return"Initial";default:(0,o.assertUnreachable)(e)}}},98083:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.treatProblemSummaryFinished=t.treatProblemSummaryCompared=t.treatProblemSummaryStarted=t.transactionDuplicated=t.decipherTransactionFinished=t.decipherTransactionFailed=t.decipherTransactionParseFailed=t.decipherTransactionDecipherFailed=t.decipherTransactionStarted=t.decipherFullBackupFinished=t.decipherFullBackupFailed=t.decipherFullBackupItemReadFailed=t.decipherFullBackupItemSkipped=t.decipherFullBackupItemRead=t.decipherFullBackupDecipherFailed=t.decipherFullBackupParseFailed=t.decipherFullBackupStarted=t.decipherFullBackupSkipped=t.cipherFinished=t.transactionCiphered=t.cipherStarted=t.uploadFailed=t.uploadSucceeded=t.uploadRequested=t.syncTypeChanged=t.syncFailed=t.syncFinished=t.decipherTransactionsFinished=t.decipherTransactionsStarted=t.decipherFinished=t.decipherStarted=t.latestFailed=t.latestSucceeded=t.latestRequested=t.teamAdminDataSyncFinished=t.teamAdminDataSyncFailed=t.teamAdminDataSyncStarted=t.sharingSyncFinished=t.sharingSyncFailed=t.sharingSyncInvalidSyncData=t.sharingSyncStarted=t.treatSharingKeysFailed=t.treatProblemFinished=t.treatProblemDiffComputed=t.treatProblemFailed=t.treatProblemStarted=t.chronologicalSyncFinished=t.chronologicalSyncFailed=t.chronologicalSyncStarted=t.syncStarted=void 0,t.saveFinished=t.saveStarted=void 0;const n=r(31982),o=r(90826),i=r(1347),a=r(63002);t.syncStarted=(e,t)=>({type:"SyncStarted",trigger:e,syncType:t}),t.chronologicalSyncStarted=e=>({type:"ChronologicalSyncStarted",updatesCount:(0,a.countEditionUploadChanges)(e?.changesToUpload||[]),deletesCount:(0,a.countDeletionUploadChanges)(e?.changesToUpload||[])}),t.chronologicalSyncFailed=e=>({type:"ChronologicalSyncFailed",error:e}),t.chronologicalSyncFinished=(e,t)=>({type:"ChronologicalSyncFinished",summarySize:(0,n.countSyncSummaryTransactions)(e),fullBackupFileSize:t}),t.treatProblemStarted=()=>({type:"TreatProblemStarted"}),t.treatProblemFailed=e=>({type:"TreatProblemFailed",error:e}),t.treatProblemDiffComputed=(e,t)=>({type:"TreatProblemDiffComputed",transactionsToDownloadCount:e,transactionsToUploadCount:t}),t.treatProblemFinished=()=>({type:"TreatProblemFinished"}),t.treatSharingKeysFailed=e=>({type:"TreatSharingKeysFailed",error:e}),t.sharingSyncStarted=()=>({type:"SharingSyncStarted"}),t.sharingSyncInvalidSyncData=(e,t)=>({type:"SharingSyncInvalidSyncData",itemGroupId:e,errorName:t}),t.sharingSyncFailed=e=>({type:"SharingSyncFailed",error:e}),t.sharingSyncFinished=()=>({type:"SharingSyncFinished"}),t.teamAdminDataSyncStarted=()=>({type:"TeamAdminDataSyncStarted"}),t.teamAdminDataSyncFailed=e=>({type:"TeamAdminDataSyncFailed",error:e}),t.teamAdminDataSyncFinished=()=>({type:"TeamAdminDataSyncFinished"}),t.latestRequested=(e,t)=>({type:"LatestRequested",lock:"nolock"!==e,needsKeys:t}),t.latestSucceeded=e=>({type:"LatestSucceeded",updatesCount:(0,o.countEditionTransactions)(e.transactionList),deletesCount:(0,o.countRemoveTransactions)(e.transactionList),fullBackupSize:(e.fullBackupFileList||[]).length}),t.latestFailed=e=>({type:"LatestFailed",error:e}),t.decipherStarted=e=>({type:"DecipherStarted",fullBackupFileSize:e}),t.decipherFinished=e=>({type:"DecipherFinished",updatesCount:(0,o.countEditionTransactions)(e),deletesCount:(0,o.countRemoveTransactions)(e)}),t.decipherTransactionsStarted=()=>({type:"DecipherTransactionsStarted"}),t.decipherTransactionsFinished=()=>({type:"DecipherTransactionsFinished"}),t.syncFinished=()=>({type:"SyncFinished"}),t.syncFailed=e=>({type:"SyncFailed",error:e}),t.syncTypeChanged=e=>({type:"SyncTypeChanged",syncType:e}),t.uploadRequested=(e,t)=>({type:"UploadRequested",updatedCount:e,deletedCount:t}),t.uploadSucceeded=(e,t,r)=>({type:"UploadSucceeded",updatedCount:e,deletedCount:t,timestamp:r}),t.uploadFailed=e=>({type:"UploadFailed",error:e}),t.cipherStarted=()=>({type:"CipherStarted"}),t.transactionCiphered=(e,t,r)=>({type:"TransactionCiphered",transactionType:e,itemId:t,backupDate:r}),t.cipherFinished=()=>({type:"CipherFinished"}),t.decipherFullBackupSkipped=()=>({type:"DecipherFullBackupSkipped"}),t.decipherFullBackupStarted=()=>({type:"DecipherFullBackupStarted"}),t.decipherFullBackupParseFailed=e=>({type:"DecipherFullBackupParseFailed",error:e}),t.decipherFullBackupDecipherFailed=(e,t)=>({type:"DecipherFullBackupDecipherFailed",error:e,cryptoPayload:t}),t.decipherFullBackupItemRead=(e,t,r)=>({type:"DecipherFullBackupItemRead",itemType:e,itemId:t,backupDate:r}),t.decipherFullBackupItemSkipped=(e,t)=>({type:"DecipherFullBackupItemSkipped",itemType:t?.itemType,itemId:t?.itemId,error:e}),t.decipherFullBackupItemReadFailed=(e,t)=>({type:"DecipherFullBackupItemReadFailed",error:e,itemId:t}),t.decipherFullBackupFailed=e=>({type:"DecipherFullBackupFailed",error:e}),t.decipherFullBackupFinished=e=>({type:"DecipherFullBackupFinished",itemsCount:e}),t.decipherTransactionStarted=({action:e,backupDate:t,identifier:r,time:n,type:o})=>({type:"DecipherTransactionStarted",time:n,action:e,backupDate:t,identifier:r,transactionType:o}),t.decipherTransactionDecipherFailed=(e,t)=>({type:"DecipherTransactionDecipherFailed",error:e,cryptoPayload:t}),t.decipherTransactionParseFailed=e=>({type:"DecipherTransactionParseFailed",error:e}),t.decipherTransactionFailed=(e,{backupDate:t,identifier:r,type:n})=>({type:"DecipherTransactionFailed",error:e,transactionType:n,identifier:r,backupDate:t}),t.decipherTransactionFinished=({action:e,backupDate:t,identifier:r,type:n})=>({type:"DecipherTransactionFinished",action:e,transactionType:n,identifier:r,backupDate:t}),t.transactionDuplicated=(e,t,r)=>({type:"TransactionDuplicated",transactionType:e,identifier:t,backupDate:r}),t.treatProblemSummaryStarted=(e,t)=>({type:"TreatProblemSummaryStarted",localItemsCount:(0,i.countPersonalDataItems)(e),remoteItemsCount:(0,n.countSyncSummaryTransactions)(t)}),t.treatProblemSummaryCompared=(e,t,r,n)=>({type:"TreatProblemSummaryCompared",result:e,transactionType:t,identifier:r,...n?.cause?{cause:n.cause}:{},...n?.localDate?{localDate:n.localDate}:{},...n?.remoteDate?{remoteDate:n.remoteDate}:{}}),t.treatProblemSummaryFinished=()=>({type:"TreatProblemSummaryFinished"}),t.saveStarted=()=>({type:"SaveStarted"}),t.saveFinished=()=>({type:"SaveFinished"})},58582:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),t.announcements=void 0;const i=r(98083);t.announcements=i,o(r(76921),t)},76921:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TreatProblemSummaryComparedCause=t.TreatProblemSummaryComparedResult=void 0,function(e){e[e.UpToDate=0]="UpToDate",e[e.Upload=1]="Upload",e[e.Download=2]="Download"}(t.TreatProblemSummaryComparedResult||(t.TreatProblemSummaryComparedResult={})),function(e){e[e.OutOfDate=0]="OutOfDate",e[e.Missing=1]="Missing"}(t.TreatProblemSummaryComparedCause||(t.TreatProblemSummaryComparedCause={}))},32523:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.generateLocalDuplicates=void 0;const n=r(16516),o=r(70705),i=r(49551),a=r(78320),s=r(30144),c=r(75270),u=r(53628),d=r(21178),l=(e,t)=>{const r=o.mergingRules[t.type];if(!r||0===r.length)return!1;if(!t.content)return!1;const n=(0,u.fixPersonalDataItemFromExternalSource)(t.content,t.identifier);for(const{property:o,canonize:i}of r){let r=e[o],a=n[o];if("Domain"===o&&"AUTHENTIFIANT"===t.type&&r&&a&&(r=new d.ParsedURL(e.Url).getRootDomain(),a=new d.ParsedURL(n.Url).getRootDomain()),(i?(0,s.canonizeText)(r):r)!==(i?(0,s.canonizeText)(a):a))return!0}return!1};t.generateLocalDuplicates=function(e,t,r){return(0,i.filterDataModelObjects)(t,e,["changeHistories"]).reduce(((e,t)=>{const o=(e=>{const t=(0,c.findTransaction)(e.Id,r);return!t||(0,c.isRemovalTransaction)(t)?null:l(e,t)?{duplicate:{...(0,n.clone)(e),AnonId:(0,a.generateItemUuid)(),Id:(0,a.generateItemUuid)()},duplicatedFromId:e.Id}:null})(t);return o?(e.push(o),e):e}),[])}},70705:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mergingRules=void 0,t.mergingRules={ADDRESS:[{property:"AddressFull",canonize:!1},{property:"City",canonize:!1},{property:"ZipCode",canonize:!0}],AUTH_CATEGORY:[{property:"CategoryName",canonize:!1}],AUTHENTIFIANT:[{property:"Domain",canonize:!1},{property:"Email",canonize:!1},{property:"Login",canonize:!1},{property:"Note",canonize:!1},{property:"OtpSecret",canonize:!1},{property:"OtpUrl",canonize:!1},{property:"Password",canonize:!1},{property:"SubdomainOnly",canonize:!1},{property:"Title",canonize:!1},{property:"TrustedUrl",canonize:!1},{property:"UseFixedUrl",canonize:!1}],BANKSTATEMENT:[{property:"BankAccountIBAN",canonize:!0}],COMPANY:[{property:"Name",canonize:!1},{property:"JobTitle",canonize:!1}],DATA_CHANGE_HISTORY:[{property:"ObjectId",canonize:!0}],DRIVERLICENCE:[{property:"Number",canonize:!0}],EMAIL:[{property:"Email",canonize:!0}],FISCALSTATEMENT:[{property:"FiscalNumber",canonize:!0},{property:"TeledeclarantNumber",canonize:!0}],GENERATED_PASSWORD:[{property:"Domain",canonize:!1},{property:"GeneratedDate",canonize:!1},{property:"Password",canonize:!1}],IDCARD:[{property:"Number",canonize:!0}],IDENTITY:[{property:"FirstName",canonize:!1},{property:"LastName",canonize:!1}],PASSPORT:[{property:"Number",canonize:!0}],PAYMENTMEAN_PAYPAL:[{property:"Login",canonize:!1},{property:"Password",canonize:!1}],PAYMENTMEANS_CREDITCARD:[{property:"Bank",canonize:!0},{property:"CardNumber",canonize:!0},{property:"CardNumberLastDigits",canonize:!0},{property:"ExpireMonth",canonize:!0},{property:"ExpireYear",canonize:!0},{property:"OwnerName",canonize:!0}],PERSONALWEBSITE:[{property:"Website",canonize:!1}],PHONE:[{property:"Number",canonize:!0}],PURCHASE_CATEGORY:[{property:"CategoryName",canonize:!1}],PURCHASEBASKET:[{property:"Id",canonize:!1}],PURCHASEPAIDBASKET:[{property:"AutoTitle",canonize:!1},{property:"Comment",canonize:!1},{property:"DeliveryAddressDescription",canonize:!1},{property:"DeliveryAddressName",canonize:!1},{property:"MerchantDomain",canonize:!0},{property:"PaymentMeanDescription",canonize:!1},{property:"PaymentMeanName",canonize:!1},{property:"PurchaseDate",canonize:!0},{property:"TotalAmount",canonize:!0},{property:"UserTitle",canonize:!1}],SECURENOTE:[{property:"Title",canonize:!1},{property:"Content",canonize:!1}],SECURENOTE_CATEGORY:[{property:"CategoryName",canonize:!1}],SOCIALSECURITYSTATEMENT:[{property:"SocialSecurityNumber",canonize:!0}]}},96457:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mergeChangeHistories=void 0;const n=r(16516);t.mergeChangeHistories=function(e,t){const r=(0,n.eqBy)((0,n.prop)("Id")),o=(0,n.ascend)((0,n.prop)("ModificationDate")),i=(0,n.unionWith)(r,e.ChangeSets,t.ChangeSets);return{...e,ChangeSets:(0,n.sort)(o,i)}}},1947:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mergeLocalAndRemote=t.getMergeableTransactions=t.supportedTransactionTypesForMerge=t.unMergeableTransaction=void 0;const n=r(16516),o=r(96457),i=r(75270);t.unMergeableTransaction=["DEFAULT_AUTHENTIFIANT","DEFAULT_CONFIDENTIAL","DEFAULT_IDENTITY","DEFAULT_PAYMENTMEANS","DEFAULT_MISC","DEFAULT_REWARDCARD","POINTS","SETTINGS","SECURITYALERTS"],t.supportedTransactionTypesForMerge=["DATA_CHANGE_HISTORY"],t.getMergeableTransactions=function(e,r){const o=(0,n.map)((0,n.prop)("itemId"),r);return e.filter((e=>!t.unMergeableTransaction.includes(e.type))).filter((e=>"BACKUP_REMOVE"!==e.action)).filter((e=>o.includes(e.identifier))).filter((e=>t.supportedTransactionTypesForMerge.includes(e.type)))},t.mergeLocalAndRemote=function(e,t){const r=[],n=e.changeHistories.map((e=>{const n=(0,i.findTransaction)(e.Id,t),a=o.mergeChangeHistories(e,n.content);return r.push({...n,content:a}),a}));return{personalData:{...e,changeHistories:n},remoteTransactions:r}}},37744:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(16516),o=r(95623),i=r(1347),a=r(70252),s=r(90503),c=r(1947),u=r(63002),d=r(75270),l=r(83638),p=r(32523),m=r(58582),g=r(51064);t.default=function(e,t,r,f){const{changesToUpload:S,editConflicts:h,transactionsToDownload:y}=function(e,t,r){if(0===t.length)return{changesToUpload:e,transactionsToDownload:t,editConflicts:[]};const o=(0,n.intersection)((0,n.pluck)("identifier",t),(0,n.pluck)("itemId",e));if(0===e.filter((e=>o.includes(e.itemId))).length)return{changesToUpload:e,transactionsToDownload:t,editConflicts:[]};const i=(0,n.reject)((e=>(0,u.isRemovalUploadChange)(e)&&o.includes(e.itemId)),e),a=(0,n.reject)((e=>((0,d.isRemovalTransaction)(e)||r.has(e.identifier))&&o.includes(e.identifier)),t);return{changesToUpload:i,transactionsToDownload:a,editConflicts:(0,n.intersection)((0,n.pluck)("identifier",a),(0,n.pluck)("itemId",i))}}(t.changesToUpload,f,r);if(0===h.length)return{personalData:{...t,changesToUpload:S},remoteTransactions:[...y]};const v=`[Sync] conflict on local/remote changes, ${h.length} conflicts`;o.default.log(v),(0,a.sendExceptionLog)({error:new Error(v),code:s.ExceptionCriticality.WARNING});const{duplicateObjects:E,uploadChangesWithDuplicates:A,usableRemoteTransactions:_}=function(e,t,r,n,o){if(0===o.length)return{uploadChangesWithDuplicates:r,usableRemoteTransactions:n,duplicateObjects:[]};const i=(0,p.generateLocalDuplicates)(o,t,n),a=i.map((e=>e.duplicate)),s=a.map((e=>({action:"BACKUP_EDIT",backupDate:0,identifier:e.Id,objectType:"transaction",time:Date.now(),type:(0,l.getTransactionTypeFromDataModelType)(e.kwType),content:e})));s.forEach((({backupDate:t,identifier:r,type:n})=>{e(m.announcements.transactionDuplicated(n,r,t))}));const c=i.map((e=>e.duplicatedFromId));return{uploadChangesWithDuplicates:r.filter((e=>!c.includes(e.itemId))).concat(a.map(g.createUploadChangeForItem)),duplicateObjects:a,usableRemoteTransactions:n.filter((e=>!o.includes(e.identifier)||c.includes(e.identifier))).concat(s)}}(e,t,S,y,h),T=(0,i.saveObjects)(t,E),I=c.getMergeableTransactions(_,A);if(0===I.length)return{personalData:{...T,changesToUpload:A},remoteTransactions:[..._]};const b=c.mergeLocalAndRemote(T,I);return{personalData:{...b.personalData,changesToUpload:A},remoteTransactions:[..._,...b.remoteTransactions]}}},67805:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getSyncEventErrorName=t.getSyncEventExtent=t.createInitialSyncEvent=void 0;const n=r(37898),o=r(25576),i=r(17825),a=r(92263),s=r(14656),c=r(20750),u=r(92233);t.createInitialSyncEvent=(e,r,n)=>({extent:(0,t.getSyncEventExtent)(e),trigger:r,timestamp:n,duration:{sync:0,chronological:0,treat_problem:0,sharing:0}}),t.getSyncEventExtent=e=>{switch(e){case n.SyncType.LIGHT_SYNC:return u.Extent.Light;case n.SyncType.FULL_SYNC:return u.Extent.Full;case n.SyncType.FIRST_SYNC:return u.Extent.Initial;default:(0,i.assertUnreachable)(e)}},t.getSyncEventErrorName=function(e){let t=u.ErrorName.Other;return(0,a.isCarbonError)(e)&&(e.errorType===s.HttpError?t=(({errorCode:e})=>e===s.HttpErrorCode.CLIENT_ERROR||e===s.HttpErrorCode.SERVER_ERROR||e===s.HttpErrorCode.STATUS_CODE)(e)?u.ErrorName.HttpStatus:u.ErrorName.HttpIo:e.errorType===c.WSError&&(t=u.ErrorName.ResponseContent)),e instanceof Error&&e?.message&&void 0!==o.AuthenticationCode[e.message]&&(t=u.ErrorName.Authentication),t}},41007:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(37729),t)},37729:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makeEventLoggerSyncMonitor=void 0;const n=r(75439),o=r(92233);t.makeEventLoggerSyncMonitor=(e,t={sendLogOnSyncComplete:!0})=>{let r=(0,n.getEmptyState)();return{monitor:async(i,a)=>{r=(0,n.reduceState)(r,i,a);const{syncEvent:s}=r,c=t.sendLogOnSyncComplete;switch(i.type){case"SharingSyncInvalidSyncData":await e.logSync(new o.UserSyncEvent({errorStep:o.ErrorStep.Sharing,errorName:i.errorName,itemGroupId:i.itemGroupId,duration:s.duration,error:s.error,extent:s.extent,fullBackupSize:s.fullBackupSize,incomingDeleteCount:s.incomingDeleteCount,incomingUpdateCount:s.incomingUpdateCount,outgoingDeleteCount:s.outgoingDeleteCount,outgoingUpdateCount:s.outgoingUpdateCount,timestamp:s.timestamp,trigger:s.trigger,treatProblem:s.treatProblem}));break;case"SyncFinished":case"SyncFailed":c&&(await e.logSync(new o.UserSyncEvent({duration:s.duration,error:s.error,extent:s.extent,fullBackupSize:s.fullBackupSize,incomingDeleteCount:s.incomingDeleteCount,incomingUpdateCount:s.incomingUpdateCount,outgoingDeleteCount:s.outgoingDeleteCount,outgoingUpdateCount:s.outgoingUpdateCount,timestamp:s.timestamp,trigger:s.trigger,treatProblem:s.treatProblem})),e.flushEventQueue())}},getSyncEvent:()=>r.syncEvent}}},75439:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.reduceState=t.getEmptyState=void 0;const n=r(67805),o=r(92233),i=(e,t)=>({...e,syncEvent:{...e.syncEvent,...t}}),a=(e,t)=>e>0&&t>0?o.TreatProblem.UploadAndDownload:t>0?o.TreatProblem.Upload:e>0?o.TreatProblem.Download:o.TreatProblem.NotNeeded,s=e=>Date.now()-e;t.getEmptyState=()=>({syncStartTimestamp:null,chronologicalStartTimestamp:null,treatProblemStartTimestamp:null,sharingSyncStartTimestamp:null,syncEvent:null}),t.reduceState=(e,t,r)=>{switch(t.type){case"SyncStarted":return((e,{trigger:t,syncType:r},{timestamp:o})=>({...e,syncStartTimestamp:o,syncEvent:(0,n.createInitialSyncEvent)(r,t,Math.floor(o/1e3))}))(e,t,r);case"ChronologicalSyncStarted":return((e,{timestamp:t})=>({...e,chronologicalStartTimestamp:t}))(e,r);case"ChronologicalSyncFinished":return((e,{fullBackupFileSize:t})=>i(e,{duration:{...e.syncEvent.duration,chronological:s(e.chronologicalStartTimestamp)},fullBackupSize:t||0}))(e,t);case"ChronologicalSyncFailed":return(e=>i(e,{duration:{...e.syncEvent.duration,chronological:s(e.chronologicalStartTimestamp)},error:{step:o.ErrorStep.Chronological,name:o.ErrorName.Other}}))(e);case"TreatProblemStarted":return((e,{timestamp:t})=>({...e,treatProblemStartTimestamp:t}))(e,r);case"TreatProblemDiffComputed":return((e,{transactionsToDownloadCount:t,transactionsToUploadCount:r})=>i(e,{treatProblem:a(t,r)}))(e,t);case"TreatProblemFinished":return(e=>i(e,{duration:{...e.syncEvent.duration,treat_problem:s(e.treatProblemStartTimestamp)}}))(e);case"TreatProblemFailed":return(e=>i(e,{duration:{...e.syncEvent.duration,treat_problem:s(e.treatProblemStartTimestamp)},error:{step:o.ErrorStep.TreatProblem,name:o.ErrorName.Other}}))(e);case"TreatSharingKeysFailed":return(e=>i(e,{error:{step:o.ErrorStep.TreatProblem,name:o.ErrorName.Other}}))(e);case"SharingSyncStarted":return((e,{timestamp:t})=>({...e,sharingSyncStartTimestamp:t}))(e,r);case"SharingSyncFinished":return(e=>i(e,{duration:{...e.syncEvent.duration,sharing:s(e.sharingSyncStartTimestamp)}}))(e);case"SharingSyncFailed":return(e=>i(e,{duration:{...e.syncEvent.duration,sharing:s(e.sharingSyncStartTimestamp)},error:{step:o.ErrorStep.Sharing,name:o.ErrorName.Other}}))(e);case"DecipherFinished":return((e,{updatesCount:t,deletesCount:r})=>{const n=e.syncEvent.incomingUpdateCount||0,o=e.syncEvent.incomingDeleteCount||0;return i(e,{incomingUpdateCount:n+t,incomingDeleteCount:o+r})})(e,t);case"UploadSucceeded":return((e,{updatedCount:t,deletedCount:r})=>{const n=e.syncEvent.outgoingUpdateCount||0,o=e.syncEvent.outgoingDeleteCount||0;return i(e,{outgoingUpdateCount:n+t,outgoingDeleteCount:o+r})})(e,t);case"SyncFinished":return(e=>i(e,{duration:{...e.syncEvent.duration,sync:s(e.syncStartTimestamp)}}))(e);case"SyncFailed":return((e,{error:t})=>i(e,{duration:{...e.syncEvent.duration,sync:s(e.syncStartTimestamp)},error:{...e.syncEvent.error,name:(0,n.getSyncEventErrorName)(t)}}))(e,t);case"SyncTypeChanged":return((e,{syncType:t})=>i(e,{extent:(0,n.getSyncEventExtent)(t)}))(e,t)}return e}},75270:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.findTransaction=t.isRemovalTransaction=t.isEditionTransaction=t.createNewTransaction=t.getTransactionXml=t.supportedForUploadKwTypeToTransactionTypeMap=t.supportedDataTypesForUpload=void 0;const n=r(16516),o=r(83638),i=r(95623),a=r(70252),s=r(90503),c=r(47408),u=r(56668),d=r(61797),l=r(58582);function p(e){return t.supportedForUploadKwTypeToTransactionTypeMap[e.kwType]?(0,d.getDashlaneXml)(e):(i.default.error(`Unsupported kwType "${e.kwType}" for transformation to XML`),"")}t.supportedDataTypesForUpload=["KWAddress","KWAuthCategory","KWAuthentifiant","KWBankStatement","KWCollection","KWCompany","KWDataChangeHistory","KWDriverLicence","KWEmail","KWFiscalStatement","KWGeneratedPassword","KWIdentity","KWIDCard","KWPasskey","KWPassport","KWPaymentMean_creditCard","KWPersonalWebsite","KWPhone","KWSecureFileInfo","KWSecureNote","KWSecureNoteCategory","KWSecurityBreach","KWSettingsManagerApp","KWSocialSecurityStatement"],t.supportedForUploadKwTypeToTransactionTypeMap=(0,n.pick)(t.supportedDataTypesForUpload,o.DATAMODEL_TYPE_TO_TRANSACTION_TYPE),t.getTransactionXml=p,t.createNewTransaction=async function(e,r,n){try{const{itemId:o,kwType:i,content:a}=n,s=t.supportedForUploadKwTypeToTransactionTypeMap[i];if("REMOVE"===n.action){const e={type:s,action:"BACKUP_REMOVE",identifier:o,objectType:"transaction",time:(0,c.getUnixTimestamp)(),backupDate:0,content:""};return Promise.resolve(e)}const d=(0,u.utf16ToDeflatedUtf8)(p(a)),m=await e.encrypt(d),g=0,f={type:s,action:"BACKUP_EDIT",identifier:o,objectType:"transaction",time:(0,c.getUnixTimestamp)(),backupDate:g,content:m};return r(l.announcements.transactionCiphered(s,o,g)),f}catch(e){const t=new Error(`[Sync] - upload: failed to create transaction. ${e}`);return(0,a.sendExceptionLog)({error:t,code:s.ExceptionCriticality.ERROR}),null}};const m=(0,n.propEq)("identifier");t.isEditionTransaction=(0,n.propEq)("action","BACKUP_EDIT"),t.isRemovalTransaction=(0,n.propEq)("action","BACKUP_REMOVE"),t.findTransaction=(0,n.curry)(((e,t)=>(0,n.find)(m(e),t)))},83638:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TransactionType=t.getTransactionTypeFromDataModelType=t.getDataModelTypeFromTransactionType=t.DATAMODEL_TYPE_TO_TRANSACTION_TYPE=void 0;const n=r(53576);Object.defineProperty(t,"DATAMODEL_TYPE_TO_TRANSACTION_TYPE",{enumerable:!0,get:function(){return n.DATAMODEL_TYPE_TO_TRANSACTION_TYPE}}),Object.defineProperty(t,"getDataModelTypeFromTransactionType",{enumerable:!0,get:function(){return n.getDataModelTypeFromTransactionType}}),Object.defineProperty(t,"getTransactionTypeFromDataModelType",{enumerable:!0,get:function(){return n.getTransactionTypeFromDataModelType}}),Object.defineProperty(t,"TransactionType",{enumerable:!0,get:function(){return n.TransactionType}})},90826:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.countRemoveTransactions=t.countEditionTransactions=void 0;const r=(e,t)=>e.reduce(((e,r)=>r.identifier&&r.action===t?e+1:e),0);t.countEditionTransactions=e=>r(e,"BACKUP_EDIT"),t.countRemoveTransactions=e=>r(e,"BACKUP_REMOVE")},58217:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getMissingIdentifiers=void 0;const n=r(53576),o=r(16516),i=r(84977),a=r(58582),s=r(51064);t.getMissingIdentifiers=function(e,t,r){e(a.announcements.treatProblemSummaryStarted(t,r));const c=n.transactionTypes.reduce(((c,u)=>{return d=c,l=function(e,t,r,c){const u=n.TRANSACTION_TYPE_TO_DATAMODEL_TYPE[t];if(!u||!i.default[u])return{missingLocally:[],missingRemotely:[]};const d=i.default[u];if(!r[d])return{missingLocally:[],missingRemotely:[]};const l=c.transactions[t]||{},p=new Set(r.changesToUpload.filter((({kwType:e})=>e===u)).map((({itemId:e})=>e))),m=r[d].filter((({Id:e})=>!p.has(e))),g=Object.keys(l).filter((e=>!p.has(e))),f=(0,o.difference)(g,(0,o.pluck)("Id",m));f.forEach((r=>{e(a.announcements.treatProblemSummaryCompared(a.TreatProblemSummaryComparedResult.Download,t,r,{cause:a.TreatProblemSummaryComparedCause.Missing,remoteDate:l[r]}))}));const S=a.announcements.treatProblemSummaryCompared;return m.reduce(((r,{Id:n,LastBackupTime:o})=>{const i=l[n],c=1e3*o;if(!i||i/1e3<o){const o=i?{remoteDate:i}:{};e(S(a.TreatProblemSummaryComparedResult.Upload,t,n,{cause:i?a.TreatProblemSummaryComparedCause.OutOfDate:a.TreatProblemSummaryComparedCause.Missing,localDate:c,...o}));const d=(0,s.createUploadChange)({action:"EDIT",kwType:u,itemId:n});return{missingLocally:r.missingLocally,missingRemotely:[...r.missingRemotely,d]}}return i/1e3>o?(e(S(a.TreatProblemSummaryComparedResult.Download,t,n,{cause:a.TreatProblemSummaryComparedCause.OutOfDate,localDate:c,remoteDate:i})),{missingLocally:[...r.missingLocally,n],missingRemotely:r.missingRemotely}):(e(S(a.TreatProblemSummaryComparedResult.UpToDate,t,n,{localDate:c})),r)}),{missingLocally:f,missingRemotely:[]})}(e,u,t,r),{missingLocally:[...d.missingLocally,...l.missingLocally],missingRemotely:[...d.missingRemotely,...l.missingRemotely]};var d,l}),{missingLocally:[],missingRemotely:[]});return e(a.announcements.treatProblemSummaryFinished()),c}},63002:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getUploadChangesWithoutSettings=t.isSettingUploadChange=t.countDeletionUploadChanges=t.countEditionUploadChanges=t.findUploadChange=t.isRemovalUploadChange=t.isEditionUploadChange=void 0;const n=r(16516),o=(0,n.propEq)("itemId");t.isEditionUploadChange=(0,n.propEq)("action","EDIT"),t.isRemovalUploadChange=(0,n.propEq)("action","REMOVE"),t.findUploadChange=(0,n.curry)(((e,t)=>(0,n.find)(o(e),t))),t.countEditionUploadChanges=e=>e.filter((e=>(0,t.isEditionUploadChange)(e))).length,t.countDeletionUploadChanges=e=>e.filter((e=>(0,t.isRemovalUploadChange)(e))).length,t.isSettingUploadChange=(0,n.propEq)("kwType","KWSettingsManagerApp"),t.getUploadChangesWithoutSettings=e=>(0,n.reject)(t.isSettingUploadChange,e)},39048:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UploadChangeStatus=void 0,function(e){e.ReadyForNextSync="ReadyForNextSync",e.ScheduledForSync="ScheduledForSync"}(t.UploadChangeStatus||(t.UploadChangeStatus={}))},62210:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.markChangeAsReadyForNextSync=t.markChangeAsScheduled=t.filterOutUploadedChanges=void 0;const n=r(39048);t.filterOutUploadedChanges=(e,t)=>e.filter((({itemId:e,status:r})=>!t.includes(e)||r!==n.UploadChangeStatus.ScheduledForSync));const o=e=>t=>({...t,status:e});t.markChangeAsScheduled=o(n.UploadChangeStatus.ScheduledForSync),t.markChangeAsReadyForNextSync=o(n.UploadChangeStatus.ReadyForNextSync)},51064:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createUploadChangeForDeletion=t.createUploadChangeForItem=t.createUploadChange=void 0;const n=r(39048);t.createUploadChange=({itemId:e,kwType:t,action:r="EDIT",status:o=n.UploadChangeStatus.ReadyForNextSync})=>({itemId:e,kwType:t,action:r,status:o}),t.createUploadChangeForItem=e=>(0,t.createUploadChange)((e=>({itemId:e.Id,kwType:e.kwType}))(e)),t.createUploadChangeForDeletion=e=>r=>(0,t.createUploadChange)({itemId:r,kwType:e,action:"REMOVE"})},26632:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isUploadNeeded=t.upload=t.gatherContentsToUpload=void 0;const n=r(16516),o=r(63002),i=r(75270),a=r(90826),s=r(84977),c=r(58582),u=Object.keys(i.supportedForUploadKwTypeToTransactionTypeMap),d=(0,n.flip)(n.contains)(u),l=(0,n.compose)(n.uniq,(0,n.filter)((0,n.propSatisfies)(d,"kwType")),(0,n.filter)((0,n.propSatisfies)(Boolean,"itemId")),(0,n.defaultTo)([]));function p(e,t){return l(e.changesToUpload).map((r=>{const{action:i,kwType:a,itemId:c}=r,u=s.default[a];if((0,o.isRemovalUploadChange)(r))return{action:i,kwType:a,itemId:c,content:null};if("KWSettingsManagerApp"===r.kwType&&"SETTINGS_userId"===c)return{action:i,kwType:a,itemId:c,content:t};const d=(0,n.find)((0,n.propEq)("Id",c),e[u]);return d?{action:i,kwType:a,itemId:c,content:d}:null})).filter(n.identity)}t.gatherContentsToUpload=p;const m=async(e,t,r)=>{t(c.announcements.cipherStarted());const n=r.map((r=>(0,i.createNewTransaction)(e,t,r))),o=await Promise.all(n);return t(c.announcements.cipherFinished()),o.filter(Boolean)};t.upload=async function(e){const{announce:t,cryptoCenterService:r,personalData:n,personalSettings:o}=e,i=p(n,o),s=await m(r,t,i);if(0===s.length)return{uploadedTransactionsId:[]};try{const r=(0,a.countEditionTransactions)(s),n=(0,a.countRemoveTransactions)(s);t(c.announcements.uploadRequested(r,n));const o=await e.ws.backup.upload({login:e.login,uki:e.uki,lock:e.lock,transactions:s,privateKey:e.privateKey,publicKey:e.publicKey}),i=s.reduce(((e,t)=>(t.identifier&&e.push(t.identifier),e)),[]);return t(c.announcements.uploadSucceeded(r,n,o.timestamp)),{uploadedTransactionsId:i,lastSyncTimestamp:Number(o.timestamp),summary:o.summary}}catch(e){throw t(c.announcements.uploadFailed(e)),e}},t.isUploadNeeded=function(e){const t=(0,n.propOr)([],"changesToUpload",e);return 0!==t.length&&l(t).length>0}},31982:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.countSyncSummaryTransactions=void 0,t.countSyncSummaryTransactions=function(e){return e?Object.keys(e.transactions).reduce(((t,r)=>t+(Object.keys(e.transactions[r])||[]).length),0):0}},25963:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getLastSuccessfulSyncTimestamp=t.sync=t.MAX_SYNC_TIMESTAMP=t.MIN_SYNC_TIMESTAMP=void 0;const n=r(16516),o=r(37898),i=r(36081),a=r(26632),s=r(37744),c=r(95623),u=r(62844),d=r(58582),l=r(35668),p=r(63002),m=r(45291),g=r(70252),f=r(92263);function S(e,t){const r=Number(t);return""===t||(0,n.isNil)(t)||isNaN(r)?e:r}t.MIN_SYNC_TIMESTAMP=999999999999,t.MAX_SYNC_TIMESTAMP=2070753783e3,t.sync=async function(e){const{announce:r,storeService:h}=e;let y;try{const v=h.getState();!function(e){switch(e.syncType){case o.SyncType.FIRST_SYNC:{if(0!==e.lastSyncTimestamp)throw new Error("Sync Error: lastSyncTimestamp should be 0 on First Sync");const t=(0,p.getUploadChangesWithoutSettings)(e.personalData?.changesToUpload??[]);if(t?.length)throw new Error("Sync Error: should not have changes to upload on First Sync");break}case o.SyncType.LIGHT_SYNC:case o.SyncType.FULL_SYNC:if(null===e.lastSyncTimestamp||e.lastSyncTimestamp<t.MIN_SYNC_TIMESTAMP||e.lastSyncTimestamp>t.MAX_SYNC_TIMESTAMP){const t=new Error("Sync Error: non valid lastSyncTimestamp"),r=f.CarbonError.fromAnyError(t).addContextInfo("SYNC","verifySyncArgs").addAdditionalInfo({libError:`lastSyncTimestamp: ${e.lastSyncTimestamp}`});throw(0,g.sendExceptionLog)({error:r}),t}break;default:{const t=new Error("Sync Error: unexpected syncType"),r=f.CarbonError.fromAnyError(t).addContextInfo("SYNC","verifySyncArgs").addAdditionalInfo({libError:`syncType: ${e.syncType}`});throw(0,g.sendExceptionLog)({error:r}),t}}}(e);const E=e.personalData||h.getPersonalData(),{isUploadEnabled:A}=h.getSyncStatus();c.Debugger.log(`[Sync] User allowed to Upload: ${A}`),A&&(0,a.isUploadNeeded)(E)&&(c.Debugger.log("[Sync] Found local data to upload"),e.syncType=o.SyncType.FULL_SYNC,r(d.announcements.syncTypeChanged(e.syncType))),h.dispatch((0,m.scheduleChangesForSync)()),y=await(0,i.latest)(e);const _=()=>({...(0,n.dissoc)("lock",y),syncType:e.syncType,isUploadEnabled:y.isUploadEnabled,lastSyncTimestamp:S(e.lastSyncTimestamp,y.lastSyncTimestamp),uploadedTransactions:[],summary:y.summary});if((0,u.changeMPinProgressSelector)(v))return await(0,l.unlock)(e,y.lock),_();if(e.syncType!==o.SyncType.FULL_SYNC||!y.isUploadEnabled)return y.isUploadEnabled&&await(0,l.unlock)(e,y.lock),_();const T=((e,t)=>{const r=new Set,n=e&&e.items||[];for(const e of n)e&&"object"==typeof e&&e.id&&r.add(e.id);for(const e of t.items)e&&"object"==typeof e&&e.itemId&&r.add(e.itemId);return r})(y.sharing2,h.getSharingData()),{personalData:I,remoteTransactions:b}=(0,s.default)(r,E,T,y.clearTransactions),w=(0,n.isNil)(e.pushKeysToServer)?null:{publicKey:e.pushKeysToServer.public,privateKey:e.pushKeysToServer.private},C={login:e.login,uki:e.uki,lock:y.lock,ws:e.ws,cryptoCenterService:e.dataEncryptorService.getInstance(),personalData:I,personalSettings:h.getPersonalSettings(),...w,announce:r},D=await(0,a.upload)(C);return 0===D.uploadedTransactionsId.length&&(0,l.unlock)(e,y.lock),h.dispatch((0,m.clearUploadedChanges)(D.uploadedTransactionsId)),{...(0,n.dissoc)("lock",y),clearTransactions:b,syncType:e.syncType,isUploadEnabled:y.isUploadEnabled,uploadedTransactions:D.uploadedTransactionsId,lastSyncTimestamp:S(e.lastSyncTimestamp,D.lastSyncTimestamp),summary:D.summary||y.summary}}catch(t){throw y&&await(0,l.unlock)(e,y.lock),t&&t.message,t}finally{h.dispatch((0,m.unscheduleRemainingChanges)())}},t.getLastSuccessfulSyncTimestamp=S},36081:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.buildFullBackupFileMap=t.buildLatestArgs=t.latest=void 0;const n=r(28354),o=r(16516),i=r(63713),a=r(95623),s=r(25576),c=r(37898),u=r(58582),d=r(35668),l=r(92263),p=r(70252);function m(e){const{lastSyncTimestamp:t,login:r,needsKeys:o,storeService:i,syncType:a,transactionIds:s,uki:u}=e,d=s&&s.length,m={lock:a===c.SyncType.FULL_SYNC||d?(0,n.v4)():"nolock",login:r,needsKeys:o,sharing2:!0,teamAdminGroups:!0,timestamp:t,version:i.getPlatform().info.appVersion,uki:u};switch(s&&(m.transactions=s),a){case c.SyncType.FIRST_SYNC:if(0!==m.timestamp)throw new Error("timestamp should be null for FIRST_SYNC");break;case c.SyncType.LIGHT_SYNC:case c.SyncType.FULL_SYNC:if(isNaN(m.timestamp))m.timestamp=0;else if(null===m.timestamp||m.timestamp<999999999999||m.timestamp>2070753783e3){const e=new Error("non valid lastSyncTimestamp"),t=l.CarbonError.fromAnyError(e).addContextInfo("SYNC","buildLatestArgs").addAdditionalInfo({libError:`lastSyncTimestamp: ${m.timestamp}`});throw(0,p.sendExceptionLog)({error:t}),e}break;default:{const e=new Error("unexpected syncType"),t=l.CarbonError.fromAnyError(e).addContextInfo("SYNC","buildLatestArgs").addAdditionalInfo({libError:`syncType: ${a}`});throw(0,p.sendExceptionLog)({error:t}),e}}return m}function g(e){const t=new Map;return e&&e.forEach((e=>{t.set(e.identifier,e.backupDate)})),t}t.latest=async function(e){const t=m(e),{announce:r}=e;let n;try{const{lock:o,needsKeys:i}=t;if(r(u.announcements.latestRequested(o,i)),n=await e.ws.backup.latest(t),"message"===n.objectType)throw"Incorrect authentification"===n.content?new Error(s.AuthenticationCode[s.AuthenticationCode.INVALID_UKI]):"Temporarily disabled"===n.content?new Error("Sync service unavailable"):new Error(s.AuthenticationCode[s.AuthenticationCode.UNKNOWN_SYNC_ERROR]);if(void 0!==n.objectType)throw new Error("unexpected objectType");if(!n.transactionList)throw a.default.log("Backup sync failed"),new Error("Backup sync failed");if(!function(e){return!e.find((e=>!e.backupDate||e.backupDate<999999999999||e.backupDate>2070753783e3))}(n.transactionList))throw new Error("wrongly formatted backupDate")}catch(e){throw r(u.announcements.latestFailed(e)),e}r(u.announcements.latestSucceeded(n));const c=g(n.fullBackupFileList);try{return{clearTransactions:await i.decrypt(e.dataEncryptorService.getInstance(),r,n.fullBackupFile,c,n.transactionList),sharing2:n.sharing2,lastSyncTimestamp:n.timestamp,lock:t.lock,keys:n.keys,isUploadEnabled:(0,o.defaultTo)(!1,n.uploadEnabled),summary:n.summary,fullBackupFileSize:c.size}}catch(r){throw(0,d.unlock)(e,t.lock),r}},t.buildLatestArgs=m,t.buildFullBackupFileMap=g},37898:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SyncType=void 0,function(e){e[e.FIRST_SYNC=0]="FIRST_SYNC",e[e.LIGHT_SYNC=1]="LIGHT_SYNC",e[e.FULL_SYNC=2]="FULL_SYNC"}(t.SyncType||(t.SyncType={}))},35668:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.unlock=void 0;const n=r(95623);t.unlock=async function(e,t){if(!function(e){return e&&"nolock"!==e}(t))return;const{login:r,ws:o,uki:i}=e;try{await o.backup.unlock({login:r,uki:i,lock:t})}catch(e){(0,n.logWarn)({tag:"Sync",message:`Unlock failed: ${e}`})}}},59890:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.binaryFindLastIndex=t.binaryFindIndex=t.binaryContains=void 0;const n=r(16516);t.binaryContains=(0,n.curry)((function e(t,r){const n=t.length;if(0===n)return!1;const o=Math.floor(n/2),i=t[o];return i===r||e(i<r?t.slice(o+1,n):t.slice(0,o),r)})),t.binaryFindIndex=function e(t,r,n){const o=t.length;if(0===o)return-1;const i=n?Math.min(n,o-1):Math.floor(o/2);if(r(t[i])){const n=e(t.slice(0,i),r);return-1===n?i:n}{const n=e(t.slice(i+1,o),r);return-1===n?-1:i+n+1}},t.binaryFindLastIndex=function e(t,r,n){const o=t.length;if(0===o)return-1;const i=n?Math.min(n,o-1):Math.floor(o/2);if(r(t[i])){const n=e(t.slice(i+1,o),r);return-1===n?i:i+n+1}return e(t.slice(0,i),r)}},72365:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makeDataEncryptorService=t.setObfuscatingKey=void 0;const n=r(56668);t.setObfuscatingKey=function(e){return e.setInstance({raw:[214,238,100,106,146,140,114].concat([110,232,72,104,108,100,204]).map((e=>e/2)).map((e=>String.fromCharCode(e))).join("")},""),e},t.makeDataEncryptorService=function(e){let t=null;return{setInstance:(r,o,i)=>{t=(0,n.makeCryptoCenterService)(r,o,e,i)},getInstance:()=>{if(!t)throw new Error("makeDataEncryptorService: you must call setInstance(password,serverKey) before getting the instance");return t},close:()=>{t=null},hasBeenSet:()=>Boolean(t)}}},56584:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.convertDashlaneSecureDataKWC3ToTransportableData=void 0;const n=r(16038);t.convertDashlaneSecureDataKWC3ToTransportableData=e=>{const t=e.salt,r=(0,n.utf8ToBase64Buffer)(e.version),o=e.encryptedData;return(0,n.concatBuffers)(t,r,o)}},16038:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.convertBufferToHex=t.deflateBuffer=t.removeQtCompressionHeader=t.addQtCompressHeader=t.isBase64Encoded=t.getSubDataByteArray=t.concatBuffers=t.ab2str=t.str2ab=t.base64ToBigInteger=t.pemToSpki=t.spkitoPem=t.pkcs8toPem=t.CrlfToLF=t.pemTopkcs8=t.base64BufferToText=t.utf8ToBase64=t.base64ToUtf8=t.utf8ToBase64Buffer=t.base64BufferToUtf8=t.arrayBufferToText=t.uint8ArrayToText=t.utf8ChunkDecode=t.utf8ChunkEncode=t.base64ToBuffer=t.bufferToBase64=t.applyXorOnBuffers=void 0;const n=r(93513),o=r(63969),i=r(63290),a=r(97224),s=r(10001),c=r(93347),u=r(30543),d=16383,l=Math.pow(10,6),p="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",m=new Uint8Array(256);for(let e=0;e<p.length;e++)m[p.charCodeAt(e)]=e;function g(e){const t=e.length,r=[];for(let n=0;n<t;n+=3)r.push(p[e[n]>>2]),r.push(p[(3&e[n])<<4|e[n+1]>>4]),r.push(p[(15&e[n+1])<<2|e[n+2]>>6]),r.push(p[63&e[n+2]]);return r.join("")}function f(e,t=l){const r=new Uint8Array(e),n=r.length,o=t%3,i=0===o?t:t+(3-o),a=Math.ceil(n/i);let s="",c=-1;for(;c++<a;){const e=c*i,t=c===a-1?n:(c+1)*i,o=g(r.slice(e,t));s=s.concat(o)}return n%3==2?s.substring(0,s.length-1)+"=":n%3==1?s.substring(0,s.length-2)+"==":s}function S(e){let t=.75*e.length;const r=e.length;let n,o,i,a,s,c=0;e.endsWith("=")&&(t--,"="===e[e.length-2]&&t--);const u=new ArrayBuffer(t),d=new Uint8Array(u);for(n=0;n<r;n+=4)o=m[e.charCodeAt(n)],i=m[e.charCodeAt(n+1)],a=m[e.charCodeAt(n+2)],s=m[e.charCodeAt(n+3)],d[c++]=o<<2|i>>4,d[c++]=(15&i)<<4|a>>2,d[c++]=(3&a)<<6|63&s;return u}function h(e,t=l){const r=e.length;if(0===r)return"";let n="",o=0,i=Math.min(o+t,r);for(;i<=r;){const a=e.charCodeAt(i-1);if(a>=55296&&a<=56319){if(i++,i>r)throw new Error("Invalid string provided to utf8ChunkEncode");continue}const s=e.slice(o,i),c=u.encode(s);if(n=n.concat(c),i===r)break;o=i,i=Math.min(o+t,r)}return n}function y(e){return e>>6==2}function v(e,t=l){const r=e.length;if(0===r)return"";let n="",o=0,i=Math.min(o+t,r);for(;i<=r;){if((y(a=e.charCodeAt(i-1))||function(e){return e>>5==6||e>>4==14||e>>3==30}(a))&&i<r&&y(e.charCodeAt(i))){i++;continue}const s=e.slice(o,i),c=u.decode(s);if(n=n.concat(c),i===r)break;o=i,i=Math.min(o+t,r)}var a;return n}function E(e){const t=new Uint16Array(e),r=t.length;let n="",o=d;for(let e=0;e<r;e+=o)e+o>r&&(o=r-e),n+=String.fromCharCode.apply(null,t.subarray(e,e+o));return n}function A(e){return E(new Uint8Array(e))}function _(e){const t=new ArrayBuffer(e.length),r=new Uint8Array(t);for(let t=0;t<e.length;++t)r[t]=e.charCodeAt(t);return t}function T(...e){const t=e.reduce(((e,t)=>e+t.byteLength),0),r=new Uint8Array(t);return e.reduce(((e,t)=>(r.set(new Uint8Array(t),e),e+t.byteLength)),0),r.buffer}t.applyXorOnBuffers=function(e,t){if(e.byteLength!==t.byteLength)throw new Error("xorBuffer: buffers are not same length");const r=new Uint8Array(e),n=new Uint8Array(t),o=e.byteLength,i=new Uint8Array(o);for(let e=0;e<o;e++)i[e]=r[e]^n[e];return i.buffer},t.bufferToBase64=f,t.base64ToBuffer=S,t.utf8ChunkEncode=h,t.utf8ChunkDecode=v,t.uint8ArrayToText=E,t.arrayBufferToText=A,t.base64BufferToUtf8=function(e){const t=f(e);return v(n.decode(t))},t.utf8ToBase64Buffer=function(e){const t=h(e);return S(n.encode(t))},t.base64ToUtf8=function(e){return v(n.decode(e))},t.utf8ToBase64=function(e){const t=h(e);return n.encode(t)},t.base64BufferToText=function(e){const t=f(e);return n.decode(t)},t.pemTopkcs8=function(e){const t=o.privateKeyFromPem(e),r=o.privateKeyToAsn1(t),n=o.wrapRsaPrivateKey(r);return _(s.toDer(n).getBytes())},t.CrlfToLF=e=>e.replace(/(?:\\[r]|[\r\n]+)+/g,"\n"),t.pkcs8toPem=function(e){const r=new i.ByteBuffer(e),n=s.fromDer(r),a=o.privateKeyFromAsn1(n),c=o.privateKeyToPem(a);return(0,t.CrlfToLF)(c)},t.spkitoPem=function(e){const r=new i.ByteBuffer(e),n=s.fromDer(r),a=o.publicKeyFromAsn1(n),c=o.publicKeyToRSAPublicKeyPem(a);return(0,t.CrlfToLF)(c)},t.pemToSpki=function(e){const t=o.publicKeyFromPem(e),r=o.publicKeyToAsn1(t);return _(s.toDer(r).getBytes())},t.base64ToBigInteger=function(e){const t=(e+"===".slice((e.length+3)%4)).replace(/\-/g,"+").replace(/_/g,"/"),r=i.decode64(t);return new a.BigInteger(i.bytesToHex(r),16)},t.str2ab=_,t.ab2str=A,t.concatBuffers=T,t.getSubDataByteArray=function(e,t,r){return e.slice(t,r)},t.isBase64Encoded=function(e){return e&&/^([A-Za-z0-9+/]{4})*([A-Za-z0-9+/]{4}|[A-Za-z0-9+/]{3}=|[A-Za-z0-9+/]{2}==)$/.test(e)},t.addQtCompressHeader=function(e){var t;return T((t=e.byteLength,new Uint8Array([(4278190080&t)>>24,(16711680&t)>>16,(65280&t)>>8,255&t]).buffer),e)},t.removeQtCompressionHeader=function(e){return e.slice(4)},t.deflateBuffer=function(e){return c.deflate(new Uint8Array(e),{level:7}).buffer},t.convertBufferToHex=function(e){return Array.prototype.map.call(new Uint8Array(e),(e=>("00"+e.toString(16)).slice(-2))).join("")}},55623:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getRandomValues=void 0;const n=r(97588),o=r(81106);t.getRandomValues=function(e){const t=(0,o.getWebCrypto)();return t?t.getRandomValues(new Uint8Array(e)):(0,n.generateRandomValues)(e)}},3678:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.jwkToSpki=t.evpBytesToKey=void 0;const n=r(63969),o=r(10001),i=r(46445),a=r(16038);t.evpBytesToKey=async function(e){const{derivedKey:t,salt:r,keyLength:n,ivLength:o}=e,s=(0,a.concatBuffers)(t,r.slice(0,8)),c=await(0,i.computeHashSha1)(s),u=await(0,i.computeHashSha1)((0,a.concatBuffers)(c,s)),d=await(0,i.computeHashSha1)((0,a.concatBuffers)(u,s)),l=(0,a.concatBuffers)(c,u,d);return Promise.resolve(l.slice(n,n+o))},t.jwkToSpki=e=>{const{modulus:t,exponent:r}=e,i=n.setRsaPublicKey((0,a.base64ToBigInteger)(t),(0,a.base64ToBigInteger)(r)),s=n.publicKeyToAsn1(i),c=o.toDer(s).getBytes();return(0,a.str2ab)(c)}},64910:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getNoDerivationCryptoConfig=void 0;const n=r(65675),o=r(91301);t.getNoDerivationCryptoConfig=function(){return(0,n.parsePayload)(o.CRYPTO_NODERIVATION_HMAC64).cryptoConfig}},81106:(e,t)=>{"use strict";function r(){return self.crypto||null}Object.defineProperty(t,"__esModule",{value:!0}),t.getWebCryptoSubtle=t.getWebCrypto=void 0,t.getWebCrypto=r,t.getWebCryptoSubtle=function(){const e=r();return e?e.subtle?e.subtle:e.webkitSubtle?e.webkitSubtle:null:null}},33769:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.generateLocalkeyAndSetupEncryptorService=t.getEncryptionKeyBuffer=void 0;const n=r(64910),o=r(16038),i=r(69530),a=r(16356),s=r(25576);t.getEncryptionKeyBuffer=function(e,t,r){if(r.skipDerivation){if(e.byteLength<64)throw new Error(`createEncryptionKey: password should be at least 64 bytes long but is: ${e.byteLength}`);return(0,o.applyXorOnBuffers)(e,t)}return(0,o.concatBuffers)(t,e)},t.generateLocalkeyAndSetupEncryptorService=async function(e,t,r,c){const u=await(0,i.generate64BytesKey)(),d=(0,o.base64BufferToText)(u),l=(0,n.getNoDerivationCryptoConfig)();e.setInstance({raw:d},"",l),t.dispatch((0,a.updateLocalKey)(d)),c===s.PersistData.PERSIST_DATA_YES&&await r.getInstance().user.persistLocalKey(d)}},83570:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makeGetDerivateKeyWithCacheAndQueue=void 0;const n=r(65675),o=r(16038),i=r(86723),a=r(46445);t.makeGetDerivateKeyWithCacheAndQueue=function(){const e=new Map,t=new Map;function r(t){return e.get(t)}function s(r,n){const o=t.get(r);o&&o.forEach((({resolve:e})=>e(n))),t.set(r,[]),e.set(r,n)}function c(r,n,o,a){return new Promise(((c,u)=>{const d=t.get(r)||[];d.push({resolve:c,reject:u}),t.set(r,d);const l=e.get(r);l?s(r,l):1===d.length&&{pbkdf2:i.deriveKeyWithPBKDF2,argon2d:i.deriveKeyWithArgon2d}[a.method](n,o,a).then((e=>{s(r,e)})).catch((n=>{!function(r,n){const o=t.get(r);o&&o.forEach((({reject:e})=>e(n))),t.set(r,[]),e.delete(r)}(r,n)}))}))}return(e,t,i)=>function(e,t,r,i,s){return function(e,t,r){if((0,n.isNoDerivation)(r))return Promise.resolve((0,o.arrayBufferToText)(e));const i=(0,n.isPbkdf2Derivation)(r)?r.iterations:r.t_cost;return new Promise(((n,s)=>{(0,a.computeHashSha256)((0,o.str2ab)(`${(0,o.arrayBufferToText)(e)}_${(0,o.arrayBufferToText)(t)}_${r.method}_${i}`)).then((e=>(0,o.arrayBufferToText)(e))).then(n,s)}))}(r,i,s).then((n=>e(n)||t(n,r,i,s)))}(r,c,e,t,i)}},56984:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.verify=t.sign=t.decrypt=t.encrypt=t.generateRsaOaepKeyPair=t.DefaultAsymmetricOptions=t.HashAlgorithm=t.RSASA_PKCS1=t.RSA_OAEP=void 0;const n=r(16038);t.RSA_OAEP="RSA-OAEP",t.RSASA_PKCS1="RSASSA-PKCS1-v1_5";const o=new Uint8Array([1,0,1]);var i;!function(e){e.SHA_1="SHA-1",e.SHA_256="SHA-256"}(i=t.HashAlgorithm||(t.HashAlgorithm={})),t.DefaultAsymmetricOptions={hashAlgorithm:i.SHA_256};const a=e=>({name:t.RSASA_PKCS1,hash:{name:e}}),s=e=>({name:t.RSA_OAEP,hash:{name:e}});t.generateRsaOaepKeyPair=async(e=i.SHA_256)=>{const r=await self.crypto.subtle.generateKey({name:t.RSA_OAEP,modulusLength:2048,publicExponent:o,hash:{name:e}},!0,["encrypt","decrypt"]),{publicKey:a,privateKey:s}=await async function({privateKey:e,publicKey:t}){return{privateKey:await self.crypto.subtle.exportKey("pkcs8",e),publicKey:await self.crypto.subtle.exportKey("spki",t)}}({...r});return function({publicKey:e,privateKey:t}){return{publicKey:(0,n.spkitoPem)(e),privateKey:(0,n.pkcs8toPem)(t)}}({publicKey:a,privateKey:s})},t.encrypt=async function({publicKey:e,data:r,options:n=t.DefaultAsymmetricOptions}){const o=await self.crypto.subtle.importKey("spki",e,s(n.hashAlgorithm),!1,["encrypt"]);return await self.crypto.subtle.encrypt(s(n.hashAlgorithm),o,r)},t.decrypt=async function({privateKey:e,data:r,options:n=t.DefaultAsymmetricOptions}){const o=await self.crypto.subtle.importKey("pkcs8",e,s(n.hashAlgorithm),!1,["decrypt"]);return await self.crypto.subtle.decrypt(s(n.hashAlgorithm),o,r)},t.sign=async function({privateKey:e,data:r,options:n=t.DefaultAsymmetricOptions}){const o=await self.crypto.subtle.importKey("pkcs8",e,a(n.hashAlgorithm),!1,["sign"]);return await self.crypto.subtle.sign(a(n.hashAlgorithm),o,r)},t.verify=async function({publicKey:e,signature:r,data:n,options:o=t.DefaultAsymmetricOptions}){const i=await self.crypto.subtle.importKey("spki",e,a(o.hashAlgorithm),!1,["verify"]);return await self.crypto.subtle.verify(a(o.hashAlgorithm),i,r,n)}},73626:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.deriveKeyWithArgon2d=void 0;const n=r(57323),o=r(95623),i=r(70252),a=r(35558);t.deriveKeyWithArgon2d=async(e,t,r)=>{try{if(null===e||null===t||null===r)throw new Error("deriveKeyWithArgon2d parameters are null");if(!n.env.isBrowserEnvironment()&&!n.env.isWorkerEnvironment())throw new Error("Environment is not supported");return(async(e,t,r)=>{const n={argon2d:a.ArgonType.Argon2d,argon2i:a.ArgonType.Argon2i},{hash:o}=await(0,a.hash)({pass:new Uint8Array(e),salt:new Uint8Array(t),time:r.t_cost,mem:r.m_cost,hashLen:32,parallelism:r.parallelism,type:n[r.method]});return o})(e,t,r)}catch(e){const t=new Error(`[Derivation] - deriveKeyWithArgon2d: ${e}`);throw o.Debugger.error(t),(0,i.sendExceptionLog)({error:t}),e}}},86723:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.deriveKeyWithArgon2d=t.deriveKeyWithPBKDF2=void 0;var n=r(33713);Object.defineProperty(t,"deriveKeyWithPBKDF2",{enumerable:!0,get:function(){return n.deriveKeyWithPBKDF2}});var o=r(73626);Object.defineProperty(t,"deriveKeyWithArgon2d",{enumerable:!0,get:function(){return o.deriveKeyWithArgon2d}})},33713:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.deriveKeyWithPBKDF2=void 0;const n=r(81106),o=r(97588),i=r(975),a=r(95623),s=r(4673),c={sha1:"SHA-1",sha256:"SHA-256"};t.deriveKeyWithPBKDF2=async(e,t,r)=>{if(null===e||null===t||null===r)throw new Error("deriveKeyWithPBKDF2 parameters are null");const u=(0,s.getPlugins)().pbkdf2Plugin;if(u)return new Promise((n=>{n(u.deriveKey(new Uint8Array(e),new Uint8Array(t),r.iterations,r.hashMethod?c[r.hashMethod]:"SHA-256",32).buffer)}));const d=(0,n.getWebCryptoSubtle)();if(!d)return(0,o.deriveKeyPolyfill)(e,t,r);try{const n=await d.importKey("raw",e,"PBKDF2",!1,["deriveKey"]);return await d.deriveKey({name:"PBKDF2",salt:t,iterations:r.iterations,hash:{name:r.hashMethod?c[r.hashMethod]:"SHA-256"}},n,{name:i.AES_CBC,length:256},!0,["encrypt","decrypt"]).then((e=>d.exportKey("raw",e)))}catch(n){return(n=>{const i=new Error(`[Derivation] - deriveKeyWithPBKDF2: ${n}`);return a.Debugger.error(i),(0,o.deriveKeyPolyfill)(e,t,r)})(n)}}},46445:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.hashAndSplitKey=t.computeHashMD5=t.computeHashSha512=t.computeHashSha256=t.computeHashSha1=void 0;const n=r(30960),o=r(16038);async function i({hashAlgorithm:e,data:t}){return await self.crypto.subtle.digest({name:e},t)}async function a(e){return await i({hashAlgorithm:"SHA-512",data:e})}t.computeHashSha1=async function(e){return await i({hashAlgorithm:"SHA-1",data:e})},t.computeHashSha256=async function(e){return await i({hashAlgorithm:"SHA-256",data:e})},t.computeHashSha512=a,t.computeHashMD5=e=>{const t=n.create();return t.update(e),t.digest().toHex()},t.hashAndSplitKey=async function(e){const t=await a(e),r=t.byteLength,n=(0,o.getSubDataByteArray)(new Uint8Array(t),0,r/2),i=(0,o.getSubDataByteArray)(new Uint8Array(t),r/2,r);return{aes:n.buffer,hmac:i.buffer}}},69530:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.verifyHashHmacSHA256=t.signHashHmacSHA256=t.decryptAES256=t.encryptAES256=t.importKeyAES256=t.generate64BytesKey=t.generateAESKey=void 0;const n=r(16038),o="AES-CBC",i=256,a={name:"HMAC",hash:{name:"SHA-256"}};async function s(){const e=await self.crypto.subtle.generateKey({name:o,length:i},!0,["encrypt","decrypt"]);return await self.crypto.subtle.exportKey("raw",e)}async function c(e){return await self.crypto.subtle.importKey("raw",e,o,!1,["encrypt","decrypt"])}async function u(e){return await self.crypto.subtle.importKey("raw",e,{name:"HMAC",hash:{name:"SHA-256"}},!0,["sign","verify"])}t.generateAESKey=s,t.generate64BytesKey=async function(){const e=await s(),t=await s();return(0,n.concatBuffers)(e,t)},t.importKeyAES256=c,t.encryptAES256=async function({key:e,iv:t,clearData:r}){const n=await c(e);return await self.crypto.subtle.encrypt({name:o,iv:t},n,r)},t.decryptAES256=async function({key:e,iv:t,encryptedData:r}){const n=await c(e);return await self.crypto.subtle.decrypt({name:o,iv:t},n,r)},t.signHashHmacSHA256=async function({key:e,data:t}){const r=await u(e);return await self.crypto.subtle.sign(a,r,t)},t.verifyHashHmacSHA256=async function({key:e,signature:t,data:r}){const n=await u(e);return await self.crypto.subtle.verify(a,n,t,r)}},975:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AES_KEY_SIZE=t.AES_CBC=void 0,t.AES_CBC="AES-CBC",t.AES_KEY_SIZE=32},97588:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.verifyRsa=t.signRSA=t.decryptRSA=t.encryptRSA=t.generateRsaKeyPair=t.deriveKeyPolyfill=t.verifyHashHmacSHA256=t.signHashHmacSHA256=t.decryptAES256=t.encryptAES256=t.generateAESKey=t.computeHashSha512=t.computeHashSha256=t.computeHashSha1=t.generateRandomValues=t.arrayBufferToBuffer=void 0;const n=r(61384),o=r(16038),i=r(95623),a=r(56984),s=r(975),c=r(63969),u=r(59018),d=r(58654),l=r(63290),p=r(11087),m=r(85469),g=r(33803),f=r(15313).Buffer;function S(e){const t=new f(e.byteLength),r=new Uint8Array(e);for(let e=0;e<t.length;++e)t[e]=r[e];return t}t.arrayBufferToBuffer=S,t.generateRandomValues=function(e){const t=u.getBytesSync(e);return(0,o.str2ab)(t)},t.computeHashSha1=e=>new Promise(((t,r)=>{try{const r=(0,o.base64BufferToText)(e),n=p.sha1.create();return n.update(r),t((0,o.str2ab)(n.digest().data))}catch(e){return i.Debugger.log("Error while using Webcrypto  Polyfill - [computeHashSha1]",e),r(e)}})),t.computeHashSha256=e=>new Promise(((t,r)=>{try{const r=(0,o.base64BufferToText)(e),n=p.sha256.create();return n.update(r),t((0,o.str2ab)(n.digest().data))}catch(e){return i.Debugger.log("Error while using Webcrypto  Polyfill - [computeHashSha256]",e),r(e)}})),t.computeHashSha512=e=>new Promise(((t,r)=>{try{const r=(0,o.base64BufferToText)(e),n=p.sha512.create();return n.update(r),t((0,o.str2ab)(n.digest().data))}catch(e){return i.Debugger.log("Error while using Webcrypto  Polyfill - [computeHashSha512]",e),r(e)}})),t.generateAESKey=()=>new Promise(((e,t)=>{try{u.getBytes(s.AES_KEY_SIZE,(function(r,n){return r?t(r):e((0,o.str2ab)(n))}))}catch(e){return i.Debugger.log("Error while using Webcrypto  Polyfill - [generateAESKey]",e),t(e)}})),t.encryptAES256=(e,t,r)=>new Promise(((n,a)=>{try{const i=new l.ByteBuffer(e),a=new l.ByteBuffer(t),c=new l.ByteBuffer(r),u=d.createCipher(s.AES_CBC,i);u.start({iv:a}),u.update(c),u.finish();const p=u.output.data;return n((0,o.str2ab)(p))}catch(e){return i.Debugger.log("Error while using Webcrypto  Polyfill - [encryptAES256]",e),a(e)}})),t.decryptAES256=(e,t,r)=>new Promise(((n,a)=>{try{const i=new l.ByteBuffer(e),a=new l.ByteBuffer(t),c=new l.ByteBuffer(r),u=d.createDecipher(s.AES_CBC,i);u.start({iv:a}),u.update(c),u.finish();const p=u.output.data;return n((0,o.str2ab)(p))}catch(e){return i.Debugger.log("Error while using Webcrypto  Polyfill - [decryptAES256]",e),a(e)}})),t.signHashHmacSHA256=(e,t)=>new Promise(((r,n)=>{try{const n=(0,o.base64BufferToText)(t),i=(0,o.base64BufferToText)(e),a=m.create();return a.start("sha256",i),a.update(n),r((0,o.str2ab)(a.digest().data))}catch(e){return i.Debugger.log("Error while using Webcrypto  Polyfill - [signHashHmacSHA256]",e),n(e)}})),t.verifyHashHmacSHA256=(e,r)=>{try{return(0,t.signHashHmacSHA256)(e,r).then((e=>e==e))}catch(e){return i.Debugger.log("Error while using Webcrypto  Polyfill - [verifyHashHmacSHA256]",e),Promise.reject(e)}},t.deriveKeyPolyfill=(e,t,r)=>new Promise(((o,a)=>{try{const i=(0,n.getWorkerPath)("pbkdf2PolyfillWorker");if(void 0===i){const n=S(e),i=S(t);return void g.pbkdf2(n,i,r.iterations,32,r.hashMethod,((e,t)=>{e?a(e):o(t.buffer)}))}(0,n.getWorker)(i).then((i=>{i.onmessage=function(e){o(e.data),(0,n.freeWorker)(i)},i.onerror=function(e){a(new Error(`[WebCryptoPolyfill] - deriveKeyPolyfill: ${e.message}`)),(0,n.freeWorker)(i)},i.postMessage([e,t,r.iterations,32,r.hashMethod])}))}catch(e){return i.Debugger.log("Error while using Webcrypto  Polyfill - [deriveKeyFrom]",e),void a(e)}})),t.generateRsaKeyPair=()=>new Promise(((e,t)=>{try{const r=(0,n.getWorkerPath)("WebCryptoPolyfill");c.rsa.generateKeyPair({bits:2048,workers:-1,workerScript:r},(function(r,n){if(r)return t(r);const i={publicKey:(0,o.CrlfToLF)(c.publicKeyToRSAPublicKeyPem(n.publicKey)),privateKey:(0,o.CrlfToLF)(c.privateKeyToPem(n.privateKey))};return e(i)}))}catch(e){return i.Debugger.log("Error while using Webcrypto  Polyfill - [generateRsaKeyPair]",e),t(e)}})),t.encryptRSA=(e,t)=>new Promise(((r,n)=>{try{const n=(0,o.spkitoPem)(e),i=c.publicKeyFromPem(n),s=(0,o.base64BufferToText)(t),u=i.encrypt(s,a.RSA_OAEP,{md:p.sha256.create()});return r((0,o.str2ab)(u))}catch(e){return i.Debugger.log("Error while using Webcrypto  Polyfill - [encryptRSA]",e),n(e)}})),t.decryptRSA=(e,t,r=a.HashAlgorithm.SHA_256)=>new Promise(((n,s)=>{try{const i=(0,o.pkcs8toPem)(e),s=c.privateKeyFromPem(i),u=(0,o.base64BufferToText)(t),d=s.decrypt(u,a.RSA_OAEP,{md:r===a.HashAlgorithm.SHA_256?p.sha256.create():p.sha1.create()});return n((0,o.str2ab)(d))}catch(e){return i.Debugger.log("Error while using Webcrypto  Polyfill - [decryptRSA]",e),s(e)}})),t.signRSA=(e,t)=>new Promise(((r,n)=>{try{const n=(0,o.pkcs8toPem)(e),i=c.privateKeyFromPem(n),a=(0,o.base64BufferToText)(t),s=p.sha256.create();s.update(a);const u=i.sign(s);return r((0,o.str2ab)(u))}catch(e){return i.Debugger.log("Error while using Webcrypto  Polyfill - [signRSA]",e),n(e)}})),t.verifyRsa=(e,t,r)=>new Promise(((n,a)=>{try{const i=(0,o.spkitoPem)(e),a=c.publicKeyFromPem(i),s=(0,o.base64BufferToText)(r),u=(0,o.base64BufferToText)(t),d=p.sha256.create();return d.update(s),n(a.verify(d.digest().bytes(),u))}catch(e){return i.Debugger.log("Error while using Webcrypto  Polyfill - [verifyRsa]",e),a(e)}}))},36513:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makeAsymmetricEncryption=t.makeSymmetricEncryption=t.makeCryptoService=void 0;const n=r(93347),o=r(56668),i=r(53576),a=r(61797),s=r(69530),c=r(27993),u=r(56984),d=r(16038),l=r(3678),p=r(46445),m=r(63985);async function g(e,t){const r=(0,d.base64ToBuffer)(t),n=(0,d.base64ToBuffer)(e),o=await(0,p.hashAndSplitKey)(n),i=(0,c.parseDashlaneKw5SecureData)(new Uint8Array(r)),a=(0,d.concatBuffers)(i.iv,i.secured),u=await(0,s.signHashHmacSHA256)({key:o.hmac,data:a});if((0,d.bufferToBase64)(u)!==(0,d.bufferToBase64)(i.hash))throw new Error("Sharing - Data has been tampered with");return(0,s.decryptAES256)({key:o.aes,iv:i.iv,encryptedData:i.secured})}t.makeCryptoService=()=>({symmetricEncryption:(0,t.makeSymmetricEncryption)(),asymmetricEncryption:(0,t.makeAsymmetricEncryption)()}),t.makeSymmetricEncryption=()=>({generateNewAESKey:()=>(0,s.generateAESKey)().then(d.bufferToBase64),encryptAES256:async(e,t)=>{const r=(0,d.base64ToBuffer)(t),n=(0,d.base64ToBuffer)(e),o=await(0,p.hashAndSplitKey)(n),i=(0,c.generateIV)();return(0,s.encryptAES256)({key:o.aes,iv:i,clearData:r}).then((async e=>{const t=(0,d.concatBuffers)(i,e),n=await(0,s.signHashHmacSHA256)({key:o.hmac,data:t}),a=(0,c.makeKWC5DashlaneSecureData)(r,e,i,n),u=(0,c.convertKw5ToTransportableData)(a);return(0,d.bufferToBase64)(u)}))},encryptSharingItem:async(e,r)=>{const o=(0,t.makeSymmetricEncryption)(),i=(0,a.getDashlaneXml)(r),s=(0,d.utf8ToBase64)(i),c=(0,d.base64ToBuffer)(s),u=n.deflate(new Uint8Array(c)).buffer,l=(0,d.addQtCompressHeader)(u),p=(0,d.bufferToBase64)(l);return o.encryptAES256(e,p)},decryptAES256:async(e,t)=>{const r=await g(e,t);let n="";try{n=(0,d.base64BufferToUtf8)(r)}catch{n=(0,d.bufferToBase64)(r)}return n},decryptSharingItem:async(e,t)=>{const r=await g(e,t);try{const e=new Uint8Array(r),t=(0,d.uint8ArrayToText)(e);return JSON.parse(t)}catch{const e=(0,o.deflatedUtf8ToUtf16)(r),{__type__:t,...n}=await(0,a.parseDashlaneXml)(e),s={...n,kwType:n.kwType||t};return(0,i.isCredential)(s)?(0,m.fixCredentialTypesFromTransaction)(s):(0,i.isNote)(s)?(0,m.fixNoteTypesFromTransaction)(s):s}},signHmacSHA256:(e,t)=>{const r=(0,d.base64ToBuffer)(t),n=(0,d.base64ToBuffer)(e);return(0,s.signHashHmacSHA256)({key:n,data:r}).then((e=>(0,d.bufferToBase64)(e)))},verifyHmacSHA256:(e,t,r)=>{const n=(0,d.base64ToBuffer)(r),o=(0,d.base64ToBuffer)(e),i=(0,d.base64ToBuffer)(t);return(0,s.verifyHashHmacSHA256)({key:o,signature:i,data:n})}}),t.makeAsymmetricEncryption=(e=u.DefaultAsymmetricOptions)=>({generateRsaKeyPair:()=>(0,u.generateRsaOaepKeyPair)(e.hashAlgorithm),encrypt:(t,r)=>{const n=(0,d.base64ToBuffer)(r),o=(0,d.pemToSpki)(t);return(0,u.encrypt)({publicKey:o,data:n,options:e}).then(d.bufferToBase64)},decrypt:(t,r)=>{const n=(0,d.base64ToBuffer)(r),o=(0,d.pemTopkcs8)(t);return(0,u.decrypt)({privateKey:o,data:n,options:e}).then(d.bufferToBase64)},sign:(t,r)=>{const n=(0,d.pemTopkcs8)(t),o=(0,d.base64ToBuffer)(r);return(0,u.sign)({privateKey:n,data:o,options:e}).then(d.bufferToBase64)},verify:(t,r,n)=>{const o=(0,d.pemToSpki)(t),i=(0,d.base64ToBuffer)(n),a=(0,d.base64ToBuffer)(r);return(0,u.verify)({publicKey:o,signature:a,data:i,options:e})},verifyJwk:(t,r,n)=>{const o=(0,l.jwkToSpki)(t),i=(0,d.base64ToBuffer)(r),a=(0,d.base64ToBuffer)(n);return(0,u.verify)({publicKey:o,signature:i,data:a,options:e})}})},1860:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makeKeyBasedCrypto=t.makeKeyDataEncryptorService=t.DATA_TAMPERED_ERROR=void 0;const n=r(95623),o=r(70252),i=r(16038),a=r(46445),s=r(27993),c=r(69530);t.DATA_TAMPERED_ERROR="KeyBasedCrypto - Data has been tampered with",t.makeKeyDataEncryptorService=function(){let e=null;return{setInstance:r=>{e=(0,t.makeKeyBasedCrypto)(r)},getInstance:()=>{if(!e)throw new Error("makeKeyDataEncryptorService: you must call setInstance(password,serverKey) before getting the instance");return e},close:()=>{e=null},hasBeenSet:()=>Boolean(e)}},t.makeKeyBasedCrypto=e=>{const r=function(e){return e.raw&&(0,i.isBase64Encoded)(e.raw)?(0,i.base64ToBuffer)(e.raw):e.raw?(0,i.str2ab)(e.raw):e.buffer}(e);return{isKey:()=>{throw new Error("makeKeyBasedCrypto:isKey not implemented")},encrypt:e=>Promise.resolve().then((()=>(0,a.hashAndSplitKey)(r).then((t=>{const r=(0,s.generateIV)();return(0,c.encryptAES256)({key:t.aes,iv:r,clearData:e}).then((n=>{const o=(0,i.concatBuffers)(r,n);return(0,c.signHashHmacSHA256)({key:t.hmac,data:o}).then((t=>{const o=(0,s.makeKWC5DashlaneSecureData)(e,n,r,t),a=(0,s.convertKw5ToTransportableData)(o);return(0,i.bufferToBase64)(a)}))}))})))).catch((e=>(function(e,t){const r=new Error(`[makeKeyBasedCrypto] - Error while encrypting data.: ${t}`);throw(0,o.sendExceptionLog)({error:r}),n.Debugger.log(r),r}(0,e),null))),decrypt:e=>Promise.resolve().then((()=>{const n=(0,i.base64ToBuffer)(e);return(0,a.hashAndSplitKey)(r).then((e=>{const r=(0,s.parseDashlaneKw5SecureData)(new Uint8Array(n)),o=(0,i.concatBuffers)(r.iv,r.secured);return(0,c.signHashHmacSHA256)({key:e.hmac,data:o}).then((n=>{if((0,i.bufferToBase64)(n)!==(0,i.bufferToBase64)(r.hash))throw new Error(t.DATA_TAMPERED_ERROR);return(0,c.decryptAES256)({key:e.aes,iv:r.iv,encryptedData:r.secured})}))}))})),prepareCrypto:()=>Promise.resolve(),readCryptoPayload:e=>{const t=(0,i.base64ToBuffer)(e);return(0,s.parseDashlaneKw5SecureData)(new Uint8Array(t)).version}}}},91301:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CRYPTO_NODERIVATION_HMAC64=void 0,t.CRYPTO_NODERIVATION_HMAC64="$1$noderivation$aes256$cbchmac64$16$"},56668:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.prepareCrypto=t.deflatedUtf8ToUtf16=t.utf16ToDeflatedUtf8=t.inflateUtf16=t.deflateUtf16=t.cipherDashlaneSecureData=t.decipherDashlaneSecureData=t.makeCryptoCenterService=t.PBKDF2_DEFAULT_PAYLOAD=t.ARGON2_DEFAULT_PAYLOAD=void 0;const n=r(93347),o=r(62802),i=r(16038),a=r(3678),s=r(65675);Object.defineProperty(t,"ARGON2_DEFAULT_PAYLOAD",{enumerable:!0,get:function(){return s.ARGON2_DEFAULT_PAYLOAD}}),Object.defineProperty(t,"PBKDF2_DEFAULT_PAYLOAD",{enumerable:!0,get:function(){return s.PBKDF2_DEFAULT_PAYLOAD}});const c=r(69530),u=r(46445),d=r(55623),l=r(56584),p=r(83570),m=r(95623),g=r(16356),f=r(27517);function S(e,t,r){const n=t+r;return(0,s.isCryptoConfigKWC3)(e.derivation)?(0,i.str2ab)(n):(0,i.utf8ToBase64Buffer)(n)}t.makeCryptoCenterService=function(e,r,n,o){const a=(0,p.makeGetDerivateKeyWithCacheAndQueue)(),c=e.raw,u=(0,i.str2ab)(r+c);return{isKey:(e,t)=>e+t===r+c,decrypt:(e,n={})=>(0,t.decipherDashlaneSecureData)(e,c,r,a,n),encrypt:(e,i={})=>{const{cryptoConfig:s}=i,u=s||o,d={...i,cryptoConfig:u};return(0,t.cipherDashlaneSecureData)(c,r,e,n,a,d)},prepareCrypto:()=>_(n,u,a,o),readCryptoPayload:e=>(0,s.readCryptoPayload)(e)}},t.decipherDashlaneSecureData=async(e,t,r,n,o={})=>{const{forceKeyKWC5:a,forceSalt:u}=o,d=(0,i.base64ToBuffer)(e),l=(0,s.parseCipheredData)(new Uint8Array(d)),p=l.cryptoConfig;let m,g;if(((0,s.isDashlaneSecureDataFlexible)(l)||(0,s.isDashlaneSecureDataKWC3)(l))&&(m=u||l.salt),(0,s.isDashlaneSecureDataKWC5)(l)&&a)g=a;else if((0,s.isNoDerivation)(p.derivation))g=(0,i.str2ab)(t);else{const e=S(p,r,t);g=await n(e,m,p.derivation)}const f=await async function(e,t,r){return"evpByteToKey"===e.cryptoConfig.ciphering.options.ivGeneration.method?h(e.cryptoConfig,t,r):(0,s.isDashlaneSecureDataFlexible)(e)||(0,s.isDashlaneSecureDataKWC5)(e)?e.iv:void 0}(l,m,g),{signatureKey:E,cipheringKey:A}=await y(l.cryptoConfig,g);return await v(l,E,f),await(0,c.decryptAES256)({key:A,iv:f,encryptedData:l.cipheredContent})};const h=async(e,t,r)=>{const n={derivedKey:r,salt:t,keyLength:32,ivLength:e.ciphering.options.ivLength};return(0,a.evpBytesToKey)(n)},y=async(e,t)=>{if("skip"===e.signature.method)return{signatureKey:new ArrayBuffer(0),cipheringKey:t};const r="hmac64"===e.signature.method?t:await(0,u.computeHashSha512)(t);if(64!==r.byteLength)throw new Error(`[cryptoCenter][prepareKeys] - cryptoKey's length must be 64B but is ${r.byteLength}B`);return{cipheringKey:(0,i.getSubDataByteArray)(new Uint8Array(r),0,r.byteLength/2).buffer,signatureKey:(0,i.getSubDataByteArray)(new Uint8Array(r),r.byteLength/2,r.byteLength).buffer}},v=(e,t,r)=>{if("skip"===e.cryptoConfig.signature.method)return Promise.resolve();const n=(0,i.concatBuffers)(r,e.cipheredContent),o=e;return(0,c.signHashHmacSHA256)({key:t,data:n}).then((e=>{if((0,i.bufferToBase64)(e)!==(0,i.bufferToBase64)(o.hash))throw new Error("[decipherFlexibleMarker] Data are corrupted: HMAC signature cannot be verified")}))};t.cipherDashlaneSecureData=async(e,t,r,n,o,a={})=>{const{cryptoConfig:u,forceSalt:l,forceIv:p}=a,m=u||(0,s.getCryptoConfig)(n);let g,f;if((0,s.isNoDerivation)(m.derivation))g=(0,i.str2ab)(e);else{f=l||T(n,m.derivation);const r=S(m,t,e);g=await o(r,f,m.derivation)}const v=p||await async function(e,t,r){return"evpByteToKey"===e.ciphering.options.ivGeneration.method?h(e,t,r):(0,d.getRandomValues)(e.ciphering.options.ivLength)}(m,f,g),{signatureKey:_,cipheringKey:I}=await y(m,g),b=await(0,c.encryptAES256)({key:I,iv:v,clearData:r}),w=await E(b,m,_,v);return A(f,v,w,b,m)},t.deflateUtf16=e=>n.deflate(e,{level:7}),t.inflateUtf16=e=>{const t=new Uint8Array(e);return n.inflate(t,{to:"string"})},t.utf16ToDeflatedUtf8=(e,t={})=>{const{skipDeflate:r,skipUtf8Encoding:n}=t,o=n?e:(0,i.utf8ChunkEncode)(e),a=(0,i.str2ab)(o);return r?a:(0,i.addQtCompressHeader)((0,i.deflateBuffer)(a))},t.deflatedUtf8ToUtf16=(e,t={})=>{const{skipUtf8Decoding:r,skipInflate:a,unescapeXml:s}=t,c=new Uint8Array(e),u=a?c:(e=>{const t=(0,i.removeQtCompressionHeader)(e),r=Math.pow(2,14)-1,a=new n.Inflate({chunkSize:r});if(a.push(t,o.Z_FINISH),a.err)throw new Error(`[Crypto] - postTreatData: unable to uncompress data - ${a.msg} (code ${a.err})`);return a.result})(c);let d=(0,i.uint8ArrayToText)(u);if(s&&(d=decodeURI(d)),!r)try{d=(0,i.utf8ChunkDecode)(d)}catch(e){m.Debugger.log("Cannot utf8.decode "+e)}return d};const E=(e,t,r,n)=>{if("skip"===t.signature.method)return Promise.resolve().then((()=>new ArrayBuffer(0)));const o=(0,i.concatBuffers)(n,e);return(0,c.signHashHmacSHA256)({key:r,data:o})},A=(e,t,r,n,o)=>{if((0,s.isCryptoConfigKWC3)(o.derivation)){const t=(0,l.convertDashlaneSecureDataKWC3ToTransportableData)({encryptedData:n,salt:e,version:"KWC3"});return(0,i.bufferToBase64)(t)}const a={salt:e,iv:t,hash:r,cipheredContent:n,cryptoConfig:o},c=(0,s.convertDashlaneSecureDataFlexibleToTransportableData)(a);return(0,i.bufferToBase64)(c)};async function _(e,t,r,n){const o=n??(0,s.getCryptoConfig)(e),i=o.derivation;if("noderivation"===i.method)return;const a=T(e,o.derivation);await r(t,a,i)}function T(e,t){return(0,s.isCryptoConfigKWC3)(t)?function(e){if(e.getUserSession().cryptoKwc3FixedSalt)return(0,i.base64ToBuffer)(e.getUserSession().cryptoKwc3FixedSalt);const t=(0,d.getRandomValues)(32),r=(0,i.bufferToBase64)(t);return e.dispatch((0,g.updateCryptoKwc3FixedSalt)(r)),t}(e):function(e){if(e.getPersonalSettings().CryptoFixedSalt)return(0,i.base64ToBuffer)(e.getPersonalSettings().CryptoFixedSalt);const t=(0,d.getRandomValues)(16),r={CryptoFixedSalt:(0,i.bufferToBase64)(t)};return e.dispatch((0,f.editPersonalSettings)(r)),t}(e)}t.prepareCrypto=_},27993:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makeKWC5DashlaneSecureData=t.generateIV=t.parseDashlaneKw5SecureData=t.convertKw5ToTransportableData=void 0;const n=r(55623),o=r(16038);t.convertKw5ToTransportableData=e=>{let t=new ArrayBuffer(32);if("KWC5"!==e.version)throw new Error("Version must be KWC5");if(null===e.hash)throw new Error("hmacSha2 from DashlaneSecureData is null");if(null===e.iv)throw new Error("iv from DashlaneSecureData is null");e.iv&&(t=(0,o.concatBuffers)(e.iv,(0,n.getRandomValues)(16)));const r=(0,o.utf8ToBase64Buffer)(e.version);return(0,o.concatBuffers)(t,r,e.hash,e.secured)},t.parseDashlaneKw5SecureData=e=>{if(e.byteLength<36)throw new Error(`Data length should be at least 36 long but was ${e.byteLength}`);let t=0;const r=(0,o.getSubDataByteArray)(e,t,16).buffer;t+=32;const n=(0,o.getSubDataByteArray)(e,t,t+4),i=(0,o.uint8ArrayToText)(n);if("KWC5"!==i)throw new Error("Version must be KWC5");t+=4;const a=(0,o.getSubDataByteArray)(e,t,t+32).buffer;return t+=32,{iv:r,version:i,hash:a,secured:(0,o.getSubDataByteArray)(e,t,e.byteLength).buffer}},t.generateIV=()=>(0,n.getRandomValues)(16),t.makeKWC5DashlaneSecureData=(e,t,r,n)=>({version:"KWC5",clearData:e,secured:t,iv:r,hash:n})},65675:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PBKDF2_DEFAULT_PAYLOAD=t.ARGON2_DEFAULT_PAYLOAD=t.KWC3_DEFAULT_PAYLOAD=t.getUserCryptoPayload=t.getCryptoUserPayload=t.getCryptoConfig=t.makeFlexibleMarkerCryptoConfig=t.makeFlexibleMarkerPbkdf2Config=t.makeFlexibleMarkerArgon2dConfig=t.makeKWC3CryptoConfig=t.convertDashlaneSecureDataFlexibleToTransportableData=t.makeFlexibleMarkerPayloadBuffer=t.makeFlexibleMarkerPayloadString=t.makeFlexibleCryptoConfig=t.readCryptoPayload=t.parseCipheredData=t.getFlexibleSecureData=t.getLegacySecureData=t.getLegacyMarker=t.getLegacyCryptoConfig=t.parsePayload=t.getSignatureConfig=t.getCipheringConfiguration=t.getDerivationConfiguration=t.getPbkdf2DerivationConfig=t.getArgon2DerivationConfig=t.extractNextPayloadComponent=t.isDashlaneSecureDataFlexible=t.isDashlaneSecureDataKWC5=t.isDashlaneSecureDataKWC3=t.DashlaneCipherVersion=t.isSupportedAESMode=t.isSupportedDerivationMethod=t.isCryptoConfigKWC3=t.isNoDerivation=t.isArgon2Derivation=t.isPbkdf2Derivation=void 0;const n=r(16516),o=r(50415),i=r(16038);function a(e){return"pbkdf2"===e.method}function s(e){return"noderivation"===e.method||"skip"===e.method}function c(e){return Boolean(["argon2d","pbkdf2","noderivation","skip"].find((t=>t===e)))}function u(e){return Boolean(["cbchmac","cbchmac64","cbc","gcm"].find((t=>t===e)))}function d(e){return{derivation:"argon2d"===e?{method:"argon2d",saltLength:16,t_cost:3,m_cost:32768,parallelism:2}:{method:"pbkdf2",saltLength:16,iterations:2e5,hashMethod:"sha256"},signature:{method:"hmac"},ciphering:{method:"aes256",options:{mode:"cbchmac",ivLength:16,ivGeneration:{method:"data"}}}}}function l(e){return e.getPersonalSettings().CryptoUserPayload||t.ARGON2_DEFAULT_PAYLOAD}t.isPbkdf2Derivation=a,t.isArgon2Derivation=function(e){return"argon2d"===e.method},t.isNoDerivation=s,t.isCryptoConfigKWC3=function(e){return a(e)&&10204===e.iterations&&"sha1"===e.hashMethod},t.isSupportedDerivationMethod=c,t.isSupportedAESMode=u,t.DashlaneCipherVersion=(0,o.Enum)("KWC3","KWC5"),t.isDashlaneSecureDataKWC3=e=>e.marker===t.DashlaneCipherVersion.KWC3,t.isDashlaneSecureDataKWC5=e=>e.marker===t.DashlaneCipherVersion.KWC5,t.isDashlaneSecureDataFlexible=e=>void 0!==e.iv,t.extractNextPayloadComponent=e=>{if(null===e)return"";let t=e;return t.startsWith("$")&&(t=t.substring(1,e.length)),t.substring(0,t.indexOf("$"))},t.getArgon2DerivationConfig=e=>{let r=0;const n={};if(n.saltLength=Number((0,t.extractNextPayloadComponent)(e.substring(r,e.length))),r+=n.saltLength.toString().length+1,n.t_cost=Number((0,t.extractNextPayloadComponent)(e.substring(r,e.length))),r+=n.t_cost.toString().length+1,n.m_cost=Number((0,t.extractNextPayloadComponent)(e.substring(r,e.length))),r+=n.m_cost.toString().length+1,n.parallelism=Number((0,t.extractNextPayloadComponent)(e.substring(r,e.length))),r+=n.parallelism.toString().length+1,isNaN(n.saltLength)||0===n.saltLength||isNaN(n.t_cost)||0===n.t_cost||isNaN(n.m_cost)||0===n.m_cost||isNaN(n.parallelism)||0===n.parallelism)throw new Error("Wrong parameters in payload");return n},t.getPbkdf2DerivationConfig=e=>{let r=0;const n={};if(n.saltLength=Number((0,t.extractNextPayloadComponent)(e.substring(r,e.length))),r+=n.saltLength.toString().length+1,n.iterations=Number((0,t.extractNextPayloadComponent)(e.substring(r,e.length))),r+=n.iterations.toString().length+1,n.hashMethod=String((0,t.extractNextPayloadComponent)(e.substring(r,e.length))),r+=n.hashMethod.length+1,isNaN(n.saltLength)||isNaN(n.iterations))throw new Error("Wrong parameters in payload");return n},t.getDerivationConfiguration=e=>{let r=0,n={};const o=String((0,t.extractNextPayloadComponent)(e.substring(r,e.length)));if(!c(o))throw new Error("Derivation method not supported");if(n.method=o,"noderivation"===o||"skip"===o)return n;if(r+=n.method.length+1,"argon2d"===n.method){const o=(0,t.getArgon2DerivationConfig)(e.substring(r,e.length));n={...n,...o}}if("pbkdf2"===n.method){const o=(0,t.getPbkdf2DerivationConfig)(e.substring(r,e.length));n={...n,...o}}return n},t.getCipheringConfiguration=e=>{const r={options:{}};let n=0;if(r.method=String((0,t.extractNextPayloadComponent)(e.substring(n,e.length))),n+=r.method.length+1,"aes256"!==r.method)throw new Error(`[getCipheringConfiguration]: Wrong ciphering method expected "aes256" but get ${r.method}`);{const o=String((0,t.extractNextPayloadComponent)(e.substring(n,e.length)));if(!u(o))throw new Error("[getCipheringConfiguration]: unsupported AES mode");if(r.options.mode=o,n+=r.options.mode.length+1,r.options.ivLength=Number((0,t.extractNextPayloadComponent)(e.substring(n,e.length))),isNaN(r.options.ivLength)||0===r.options.ivLength)throw new Error("[getCipheringConfiguration]: Wrong parameters in payload")}return r},t.getSignatureConfig=e=>{const t={method:"skip"};return"cbchmac"===e&&(t.method="hmac"),"cbchmac64"===e&&(t.method="hmac64"),t},t.parsePayload=e=>{if(null===e)throw new Error("parsePayload: No payload to parse");if(e.startsWith("$")){let r=0;const o=Number((0,t.extractNextPayloadComponent)(e.substring(r,e.length)));if(1!==o)throw new Error(`parsePayload: version should be 1 but is ${o}`);r+=o.toString().length+1;const i=(0,t.getDerivationConfiguration)(e.substring(r,e.length)),a=(0,n.reduce)(((e,t)=>e+(`${t}`.length+1)));r=a(r,(0,n.values)(i));const s=(0,t.getCipheringConfiguration)(e.substring(r,e.length));r+=String(s.method).length+1,r=a(r,(0,n.values)(s.options));const c={method:"data"};return{cryptoConfig:{derivation:i,signature:(0,t.getSignatureConfig)(s.options.mode),ciphering:{method:s.method,options:{...s.options,ivGeneration:c}}},payloadLength:r+1}}throw new Error("parsePayload: Unable to parse payload")},t.getLegacyCryptoConfig=e=>{if("KWC3"===e)return{derivation:{method:"pbkdf2",saltLength:32,iterations:10204,hashMethod:"sha1"},signature:{method:"skip"},ciphering:{method:"aes256",options:{mode:"cbc",ivLength:16,ivGeneration:{method:"evpByteToKey"}}}};if("KWC5"===e)return{derivation:{method:"skip"},signature:{method:"hmac"},ciphering:{method:"aes256",options:{mode:"cbchmac",ivLength:16,ivGeneration:{method:"data"}}}};throw new Error("Wrong marker")},t.getLegacyMarker=e=>{const r=(0,i.getSubDataByteArray)(e,32,36),n=(0,i.uint8ArrayToText)(r);return n===t.DashlaneCipherVersion.KWC3||n===t.DashlaneCipherVersion.KWC5?n:null},t.getLegacySecureData=(e,r)=>{if(e===t.DashlaneCipherVersion.KWC3)return{marker:e,salt:(0,i.getSubDataByteArray)(r,0,32).buffer,cipheredContent:(0,i.getSubDataByteArray)(r,36,r.byteLength).buffer,cryptoConfig:(0,t.getLegacyCryptoConfig)(e)};if(e===t.DashlaneCipherVersion.KWC5){const n=16,o=32;return{marker:e,iv:(0,i.getSubDataByteArray)(r,0,n).buffer,hash:(0,i.getSubDataByteArray)(r,36,36+o).buffer,cipheredContent:(0,i.getSubDataByteArray)(r,36+o,r.byteLength).buffer,cryptoConfig:(0,t.getLegacyCryptoConfig)(e)}}throw new Error("Wrong marker")},t.getFlexibleSecureData=e=>{const r=(0,i.uint8ArrayToText)(e),{cryptoConfig:n,payloadLength:o}=(0,t.parsePayload)(r);let a=o;const c=s(n.derivation)?0:n.derivation.saltLength,u=n.ciphering.options.ivLength,d=(0,i.getSubDataByteArray)(e,a,a+c).buffer;a+=c;const l=(0,i.getSubDataByteArray)(e,a,a+u).buffer;a+=u;const p=(0,i.getSubDataByteArray)(e,a,a+32).buffer;return a+=32,{salt:d,iv:l,hash:p,cipheredContent:(0,i.getSubDataByteArray)(e,a,e.length).buffer,cryptoConfig:n}},t.parseCipheredData=e=>{const r=(0,t.getLegacyMarker)(e);if(r)return(0,t.getLegacySecureData)(r,e);if("$"===(0,i.uint8ArrayToText)((0,i.getSubDataByteArray)(e,0,1)))return(0,t.getFlexibleSecureData)(e);throw new Error("Unable to parse ciphered data")},t.readCryptoPayload=e=>{const r=(0,i.base64ToBuffer)(e),n=new Uint8Array(r),o=(0,t.getLegacyMarker)(n);if(o)return o;const a=(0,i.uint8ArrayToText)(n),{payloadLength:s}=(0,t.parsePayload)(a);return a.substr(0,s)},t.makeFlexibleCryptoConfig=e=>e.cryptoConfig,t.makeFlexibleMarkerPayloadString=e=>{let t="$1";const r=(0,n.reduce)(((e,t)=>"string"==typeof t||"number"==typeof t?e+`$${String(t)}`:e));return t=r(t,(0,n.values)(e.derivation)),t=r(t,[e.ciphering.method]),t=r(t,(0,n.values)((0,n.omit)(["ivGeneration"],e.ciphering.options))),t+="$",t},t.makeFlexibleMarkerPayloadBuffer=e=>{const r=(0,t.makeFlexibleMarkerPayloadString)(e);return(0,i.str2ab)(r)},t.convertDashlaneSecureDataFlexibleToTransportableData=e=>{const{cipheredContent:r,cryptoConfig:n,hash:o,iv:a,salt:c}=e,u=(0,t.makeFlexibleMarkerPayloadBuffer)(n);return s(n.derivation)?(0,i.concatBuffers)(u,a,o,r):(0,i.concatBuffers)(u,c,a,o,r)},t.makeKWC3CryptoConfig=function(){return{derivation:{method:"pbkdf2",saltLength:32,iterations:10204,hashMethod:"sha1"},signature:{method:"skip"},ciphering:{method:"aes256",options:{mode:"cbc",ivLength:16,ivGeneration:{method:"evpByteToKey"}}}}},t.makeFlexibleMarkerArgon2dConfig=function(){return{method:"argon2d",saltLength:16,t_cost:3,m_cost:32768,parallelism:2}},t.makeFlexibleMarkerPbkdf2Config=function(){return{method:"pbkdf2",saltLength:16,iterations:2e5,hashMethod:"sha256"}},t.makeFlexibleMarkerCryptoConfig=d,t.getCryptoConfig=function(e){const r=l(e);return(0,n.isNil)(r)?d("argon2d"):"KWC3"===r?{derivation:{method:"pbkdf2",saltLength:32,iterations:10204,hashMethod:"sha1"},signature:{method:"skip"},ciphering:{method:"aes256",options:{mode:"cbc",ivLength:16,ivGeneration:{method:"evpByteToKey"}}}}:(0,t.parsePayload)(r).cryptoConfig},t.getCryptoUserPayload=l,t.getUserCryptoPayload=e=>{if("pbkdf2_kwc3"===e)return{CryptoUserPayload:t.KWC3_DEFAULT_PAYLOAD};const r="argon2"===e?"argon2d":"pbkdf2";return{CryptoUserPayload:(0,n.compose)(i.base64BufferToUtf8,t.makeFlexibleMarkerPayloadBuffer,d)(r)}},t.KWC3_DEFAULT_PAYLOAD="KWC3",t.ARGON2_DEFAULT_PAYLOAD="$1$argon2d$16$3$32768$2$aes256$cbchmac$16$",t.PBKDF2_DEFAULT_PAYLOAD="$1$pbkdf2$16$200000$sha256$aes256$cbchmac$16$"},15215:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makeCanonicalRequest=void 0;const n=r(16516);t.makeCanonicalRequest=e=>{const t=e=>e.toLowerCase(),r=o(e.headers),i=e.headersToSign?n.pick(n.map(t,n.values(e.headersToSign)),n.mapObjIndexed(t,r)):r,d=a(e.uri),l=s(e.query),p=c(i),m=u(i);return{canonicalRequest:[e.method,d,l,p,m,e.hashedPayload].join("\n"),signedHeaders:m}};const o=e=>n.pipe(n.toPairs,n.map((([e,t])=>[e.toLowerCase(),t])),d)(e),i=e=>e.replace(/[^A-Za-z0-9_.~\-]/g,(e=>"%"+e.charCodeAt(0).toString(16).toUpperCase())),a=e=>(e=>e.split("/").map((e=>i(e))).join("/"))(e),s=e=>n.pipe((e=>n.toPairs(e)),n.sortBy((e=>e[0])),n.map((([e,t])=>((e,t)=>{const r=i(e),o=Array.isArray(t)?t:[t];return n.pipe(n.map((e=>i(e))),n.map((e=>[r,e])),n.sortBy(n.reduce(n.concat,"")))(o)})(e,t))),n.unnest,n.map((([e,t])=>`${e}=${t}`)),n.join("&"))(e),c=e=>n.pipe((e=>n.toPairs(e)),n.sortBy((e=>e[0].toLowerCase())),n.map((([e,t])=>((e,t)=>e.toLowerCase()+":"+t.trim().replace(/\s+/g," ")+"\n")(e,t))),n.join(""))(e),u=e=>n.pipe(n.keys,n.map((e=>e.toLowerCase())),n.sortBy(n.identity),n.join(";"))(e),d=e=>{const t={};for(let r=0;r<e.length;++r)t[e[r][0]]=e[r][1];return t}},51907:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getApiCredentials=void 0;const n=r(56915),o=r(17825),i=r(45956);t.getApiCredentials=function(e,t){if(t.authenticationType===i.ApiAuthType.None)return{type:t.authenticationType};const r={appKeys:(0,n.appKeysSelector)(e)};switch(t.authenticationType){case i.ApiAuthType.App:return{type:i.ApiAuthType.App,...r};case i.ApiAuthType.UserDevice:return{type:i.ApiAuthType.UserDevice,...r,login:t.login,deviceKeys:(0,n.deviceKeysSelector)(e)};case i.ApiAuthType.Session:return{type:i.ApiAuthType.Session,...r,login:t.login,sessionKeys:(0,n.sessionKeysSelector)(e),deviceId:(0,n.getDeviceIdSelector)(e,t.login)};case i.ApiAuthType.TeamDevice:return{type:i.ApiAuthType.TeamDevice,...r,teamUuid:t.teamUuid,deviceKeys:(0,n.deviceKeysSelector)(e)};default:(0,o.assertUnreachable)(t.authenticationType)}}},90338:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.prepareApiEndpoint=void 0;const n=r(45956),o=r(55730);t.prepareApiEndpoint=function(e){const{authenticationType:t,endpoint:r,group:i,method:a,version:s,accept:c,responseType:u}=e,d=`/${n.ApiVersion[s]}/${i}/${r}`;return(0,o.getMakeApiRequest)(d,t,a,u??"json",c)}},27054:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makeSafeDeviceName=t.makeSafeLanguage=t.makeSafeCountry=void 0;t.makeSafeCountry=function(e){return!e||e.length<2||e.length>5?"ZZ":e};t.makeSafeLanguage=function(e){return!e||e.length<2||e.length>5?"und":e};t.makeSafeDeviceName=function(e){return e||"Device"}},2978:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getCode=void 0;const n=r(45956);t.getCode=(e,t)=>{const r=t.indexOf(e);return r<0?n.UnknownError:t[r]}},56020:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(27054),t),o(r(85188),t),o(r(2978),t)},85188:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isExtraDeviceTokenValid=t.isEmailTokenValid=void 0,t.isEmailTokenValid=function(e){return/^\d{6}$/.test(e)},t.isExtraDeviceTokenValid=function(e){return/^[A-Za-z0-9+/]{64}$/.test(e)}},46298:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),t.UnknownError=t.isApiErrorOfType=t.isApiError=void 0;var i=r(45956);Object.defineProperty(t,"isApiError",{enumerable:!0,get:function(){return i.isApiError}}),Object.defineProperty(t,"isApiErrorOfType",{enumerable:!0,get:function(){return i.isApiErrorOfType}}),Object.defineProperty(t,"UnknownError",{enumerable:!0,get:function(){return i.UnknownError}}),o(r(91503),t),o(r(56020),t)},55730:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getApiClientAgentHeader=t.validateStatus=t.makeApiResponse=t.getMethodParams=t.getAuthParams=t.getMakeApiRequest=void 0;const n=r(47408),o=r(17825),i=r(86056),a=r(14656),s=r(56915),c=r(45956),u=r(78577),d=r(51907),l=r(48749),p=r(45800);function m(e,{login:t,teamUuid:r}){switch(e){case c.ApiAuthType.App:case c.ApiAuthType.None:return{authenticationType:e};case c.ApiAuthType.UserDevice:case c.ApiAuthType.Session:return{authenticationType:e,login:t};case c.ApiAuthType.TeamDevice:return{authenticationType:e,teamUuid:r};default:(0,o.assertUnreachable)(e)}}function g(e,t){switch(e){case c.ApiRequestMethod.GET:return{method:e};case c.ApiRequestMethod.POST:return{method:e,payload:t};default:(0,o.assertUnreachable)(e)}}function f(e){const t=function({errors:e}){return Array.isArray(e)&&e.length>0?e[0]:null}(e);return t||function(e){return{code:"success",data:e.data?null:e,...e.data}}(e)}function S(e){return JSON.stringify({platform:e.platformName||"unknown",version:e.appVersion||"unknown",osversion:e.osVersion||"unknown",language:e.lang||"unknown"})}t.getMakeApiRequest=function(e,r,h,y,v){return async(E,A)=>{const _={login:"",teamUuid:"",payload:{},...A||{}},T=g(h,_.payload),I=m(r,{login:_.login,teamUuid:_.teamUuid}),b=(0,d.getApiCredentials)(E.getState(),I),w={Accept:v??"application/json","Content-Type":"application/json; charset=UTF-8","dashlane-client-agent":S((0,i.getPlatformInfo)())},C={...w,Host:new URL(l.config.DASHLANE_API_HOST_WITH_SCHEME).hostname},D=await async function(e,t,r,i,a){if(r.type===c.ApiAuthType.None)return{};const d=(0,s.dashlaneServerDeltaTimestampSelector)(e.getState())||0,l=Math.round((0,n.getUnixTimestamp)()-d),p=function(e){switch(e.method){case c.ApiRequestMethod.GET:return"";case c.ApiRequestMethod.POST:return JSON.stringify(e.payload);default:(0,o.assertUnreachable)(e)}}(a),{method:m}=a,g={pathname:t,method:m,rawBody:p,headers:i};return{Authorization:await(0,u.signRequest)({request:g,timestamp:l,credentials:r})}}(E,e,b,C,T),O={...w,...D,...(0,p.getCloudflareHeaders)()},P=`${l.config.DASHLANE_API_HOST_WITH_SCHEME}${e}`,{data:N}=await function(e,r,n,i){const s={headers:n,validateStatus:t.validateStatus,responseType:i};switch(e.method){case c.ApiRequestMethod.GET:return(0,a.get)(r,s);case c.ApiRequestMethod.POST:return(0,a.post)(r,e.payload,s);default:(0,o.assertUnreachable)(e)}}(T,P,O,y);return f(N)}},t.getAuthParams=m,t.getMethodParams=g,t.makeApiResponse=f,t.validateStatus=e=>e>=100&&e<=500,t.getApiClientAgentHeader=S},41075:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getAndEvaluateForUser=void 0;const n=r(45956),o=r(90338),i={group:n.ApiEndpointGroups.abtesting,version:n.ApiVersion.v1,method:n.ApiRequestMethod.POST,authenticationType:n.ApiAuthType.UserDevice,endpoint:"GetAndEvaluateForUser"},a=(0,o.prepareApiEndpoint)(i);t.getAndEvaluateForUser=async function(e,t,r){return a(e,{login:t,payload:r})}},61394:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.deactivateAccountRecoveryKey=void 0;const n=r(45956),o=r(90338),i={group:n.ApiEndpointGroups.accountRecovery,version:n.ApiVersion.v1,method:n.ApiRequestMethod.POST,authenticationType:n.ApiAuthType.UserDevice,endpoint:"Deactivate"},a=(0,o.prepareApiEndpoint)(i);t.deactivateAccountRecoveryKey=function(e,t,r){return a(e,{login:t,payload:r})}},14651:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.accountInfo=void 0;const n=r(90338),o=r(45956),i={group:o.ApiEndpointGroups.account,version:o.ApiVersion.v1,method:o.ApiRequestMethod.POST,authenticationType:o.ApiAuthType.UserDevice,endpoint:"AccountInfo"},a=(0,n.prepareApiEndpoint)(i);t.accountInfo=async function(e,t){return a(e,{login:t,payload:{}})}},45468:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createUserWithSSO=void 0;const n=r(90338),o=r(45956),i={authenticationType:o.ApiAuthType.App,endpoint:"CreateUserWithSSO",group:o.ApiEndpointGroups.account,method:o.ApiRequestMethod.POST,version:o.ApiVersion.v1},a=(0,n.prepareApiEndpoint)(i);t.createUserWithSSO=async function(e,t){return a(e,{payload:t})}},55710:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createUser=t.MissingContactPhone=void 0;const n=r(90338),o=r(45956);t.MissingContactPhone="missing_contact_phone";const i={group:o.ApiEndpointGroups.account,version:o.ApiVersion.v1,method:o.ApiRequestMethod.POST,authenticationType:o.ApiAuthType.App,endpoint:"CreateUser"},a=(0,n.prepareApiEndpoint)(i);t.createUser=async function(e,t){return a(e,{payload:t})}},25011:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getPremiumStatus=void 0;const n=r(90338),o=r(45956),i={group:o.ApiEndpointGroups.premium,version:o.ApiVersion.v1,method:o.ApiRequestMethod.POST,authenticationType:o.ApiAuthType.UserDevice,endpoint:"GetPremiumStatus"},a=(0,n.prepareApiEndpoint)(i);t.getPremiumStatus=function(e,t){return a(e,{login:t,payload:{}}).then((e=>e))}},31375:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getSubscriptionInformation=void 0;const n=r(90338),o=r(45956),i={group:o.ApiEndpointGroups.premium,version:o.ApiVersion.v1,method:o.ApiRequestMethod.POST,authenticationType:o.ApiAuthType.UserDevice,endpoint:"GetSubscriptionInfo"},a=(0,n.prepareApiEndpoint)(i);t.getSubscriptionInformation=function(e,t){return a(e,{login:t,payload:{}}).then((e=>e))}},97421:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.requestAccountCreation=t.AccountExistsStatus=void 0;const n=r(90338),o=r(45956);!function(e){e.AccountExists="yes",e.AccountDoesntExist="no",e.AccountDoesntExistInvalid="no_invalid",e.AccountDoesntExistUnlikely="no_unlikely"}(t.AccountExistsStatus||(t.AccountExistsStatus={}));const i={group:o.ApiEndpointGroups.account,version:o.ApiVersion.v1,method:o.ApiRequestMethod.POST,authenticationType:o.ApiAuthType.App,endpoint:"RequestAccountCreation"},a=(0,n.prepareApiEndpoint)(i);t.requestAccountCreation=function(e,t){return a(e,{payload:t})}},63339:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.updateContactInfo=void 0;const n=r(90338),o=r(45956),i={group:o.ApiEndpointGroups.account,version:o.ApiVersion.v1,method:o.ApiRequestMethod.POST,authenticationType:o.ApiAuthType.UserDevice,endpoint:"UpdateContactInfo"},a=(0,n.prepareApiEndpoint)(i);t.updateContactInfo=async function(e,t,r){return a(e,{login:t,payload:r})}},34957:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ExistingSecureRemembermeSession=t.MismatchedSessionSecurity=t.SessionNotFound=t.AuthenticatorNotAvailableOnDevice=t.AuthenticationTypeNotSupported=t.AuthenticatorNotRegistered=t.AssertionRejected=t.AttestationRejected=t.ChallengeVerificationFailed=t.ChallengeExpired=t.ChallengeNotFound=t.InvalidAuthentication=t.TwofaEmailTokenNotEnabled=t.UserHasNoActiveAuthenticator=t.FailedToContactAuthenticatorDevice=t.VerificationMethodDisabled=t.VerificationFailed=t.ClientVersionDoesNotSupportSSOMigration=t.TeamGenericError=t.SSOBlocked=t.UserNotFound=t.U2fBadRequest=t.InvalidOTPBlocked=t.InvalidOTPAlreadyUsed=t.DeviceNotFound=t.DeviceDeactivated=void 0,t.DeviceDeactivated="device_deactivated",t.DeviceNotFound="device_not_found",t.InvalidOTPAlreadyUsed="invalid_otp_already_used",t.InvalidOTPBlocked="invalid_otp_blocked",t.U2fBadRequest="u2f_bad_request",t.UserNotFound="user_not_found",t.SSOBlocked="SSO_BLOCKED",t.TeamGenericError="TEAM_GENERIC_ERROR",t.ClientVersionDoesNotSupportSSOMigration="CLIENT_VERSION_DOES_NOT_SUPPORT_SSO_MIGRATION",t.VerificationFailed="verification_failed",t.VerificationMethodDisabled="verification_method_disabled",t.FailedToContactAuthenticatorDevice="FAILED_TO_CONTACT_AUTHENTICATOR_DEVICE",t.UserHasNoActiveAuthenticator="USER_HAS_NO_ACTIVE_AUTHENTICATOR",t.TwofaEmailTokenNotEnabled="TWOFA_EMAIL_TOKEN_NOT_ENABLED",t.InvalidAuthentication="invalid_authentication",t.ChallengeNotFound="CHALLENGE_NOT_FOUND",t.ChallengeExpired="CHALLENGE_EXPIRED",t.ChallengeVerificationFailed="CHALLENGE_VERIFICATION_FAILED",t.AttestationRejected="ATTESTATION_REJECTED",t.AssertionRejected="ASSERTION_REJECTED",t.AuthenticatorNotRegistered="AUTHENTICATOR_NOT_REGISTERED",t.AuthenticationTypeNotSupported="AUTHENTICATION_TYPE_NOT_SUPPORTED",t.AuthenticatorNotAvailableOnDevice="AUTHENTICATOR_NOT_AVAILABLE_ON_DEVICE",t.SessionNotFound="SESSION_NOT_FOUND",t.MismatchedSessionSecurity="MISMATCHED_SESSION_SECURITY",t.ExistingSecureRemembermeSession="EXISTING_SECURE_REMEMBERME_SESSION"},8124:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.completeDeviceRegistrationWithAuthTicket=void 0;const n=r(45956),o=r(90338),i={group:n.ApiEndpointGroups.authentication,version:n.ApiVersion.v1,method:n.ApiRequestMethod.POST,authenticationType:n.ApiAuthType.App,endpoint:"CompleteDeviceRegistrationWithAuthTicket"},a=(0,o.prepareApiEndpoint)(i);t.completeDeviceRegistrationWithAuthTicket=async function(e,t){return a(e,{payload:t})}},67747:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.completeExtraDeviceRegistrationWithToken=void 0;const n=r(45956),o=r(90338),i={group:n.ApiEndpointGroups.authentication,version:n.ApiVersion.v1,method:n.ApiRequestMethod.POST,authenticationType:n.ApiAuthType.App,endpoint:"CompleteExtraDeviceRegistrationWithToken"},a=(0,o.prepareApiEndpoint)(i);t.completeExtraDeviceRegistrationWithToken=async function(e,t){return a(e,{payload:t})}},62712:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.completeLoginWithAuthTicket=void 0;const n=r(45956),o=r(90338),i={authenticationType:n.ApiAuthType.App,endpoint:"CompleteLoginWithAuthTicket",group:n.ApiEndpointGroups.authentication,method:n.ApiRequestMethod.POST,version:n.ApiVersion.v1},a=(0,o.prepareApiEndpoint)(i);t.completeLoginWithAuthTicket=async function(e,t){return a(e,{payload:t})}},13271:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.completeRememberMeOpenSession=void 0;const n=r(45956),o=r(90338),i={group:n.ApiEndpointGroups.authentication,version:n.ApiVersion.v1,method:n.ApiRequestMethod.POST,authenticationType:n.ApiAuthType.Session,endpoint:"CompleteRememberMeOpenSession"},a=(0,o.prepareApiEndpoint)(i);t.completeRememberMeOpenSession=async function(e,t,r){return a(e,{login:t,payload:r})}},51837:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.completeRememberMeRegistration=void 0;const n=r(45956),o=r(90338),i={group:n.ApiEndpointGroups.authentication,version:n.ApiVersion.v1,method:n.ApiRequestMethod.POST,authenticationType:n.ApiAuthType.UserDevice,endpoint:"CompleteRememberMeRegistration"},a=(0,o.prepareApiEndpoint)(i);t.completeRememberMeRegistration=async function(e,t,r){return a(e,{login:t,payload:r})}},34569:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.completeTotpActivation=void 0;const n=r(45956),o=r(90338),i={authenticationType:n.ApiAuthType.UserDevice,endpoint:"CompleteTOTPActivation",group:n.ApiEndpointGroups.authentication,method:n.ApiRequestMethod.POST,version:n.ApiVersion.v1},a=(0,o.prepareApiEndpoint)(i);t.completeTotpActivation=async function(e,t,r){return a(e,{login:t,payload:r})}},61054:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.completeWebAuthnAuthenticatorRegistration=void 0;const n=r(45956),o=r(90338),i={group:n.ApiEndpointGroups.authentication,version:n.ApiVersion.v1,method:n.ApiRequestMethod.POST,authenticationType:n.ApiAuthType.UserDevice,endpoint:"CompleteWebAuthnAuthenticatorRegistration"},a=(0,o.prepareApiEndpoint)(i);t.completeWebAuthnAuthenticatorRegistration=async function(e,t,r){return a(e,{login:t,payload:r})}},8111:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.deactivateRememberMe=void 0;const n=r(45956),o=r(90338),i={group:n.ApiEndpointGroups.authentication,version:n.ApiVersion.v1,method:n.ApiRequestMethod.POST,authenticationType:n.ApiAuthType.UserDevice,endpoint:"DeactivateRememberMe"},a=(0,o.prepareApiEndpoint)(i);t.deactivateRememberMe=async function(e,t,r){return a(e,{login:t,payload:r})}},39446:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.deactivateTotpVerification=void 0;const n=r(45956),o=r(90338),i={authenticationType:n.ApiAuthType.UserDevice,endpoint:"DeactivateTOTP",group:n.ApiEndpointGroups.authentication,method:n.ApiRequestMethod.POST,version:n.ApiVersion.v1},a=(0,o.prepareApiEndpoint)(i);t.deactivateTotpVerification=async function(e,t,r){return a(e,{login:t,payload:r})}},36602:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.deactivateWebAuthnAuthenticator=void 0;const n=r(45956),o=r(90338),i={group:n.ApiEndpointGroups.authentication,version:n.ApiVersion.v1,method:n.ApiRequestMethod.POST,authenticationType:n.ApiAuthType.UserDevice,endpoint:"DeactivateWebAuthnAuthenticator"},a=(0,o.prepareApiEndpoint)(i);t.deactivateWebAuthnAuthenticator=async function(e,t,r){return a(e,{login:t,payload:r})}},15152:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getAuthenticationMethodsForDevice=void 0;const n=r(45956),o=r(90338),i={group:n.ApiEndpointGroups.authentication,version:n.ApiVersion.v1,method:n.ApiRequestMethod.POST,authenticationType:n.ApiAuthType.App,endpoint:"GetAuthenticationMethodsForDevice"},a=(0,o.prepareApiEndpoint)(i);t.getAuthenticationMethodsForDevice=async function(e,t){return a(e,{payload:t})}},13328:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getAuthenticationMethodsForLogin=void 0;const n=r(45956),o=r(90338),i={group:n.ApiEndpointGroups.authentication,version:n.ApiVersion.v1,method:n.ApiRequestMethod.POST,authenticationType:n.ApiAuthType.App,endpoint:"GetAuthenticationMethodsForLogin"},a=(0,o.prepareApiEndpoint)(i);t.getAuthenticationMethodsForLogin=async function(e,t){return a(e,{payload:t})}},32924:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getAuthenticationTokenForCardUpdate=void 0;const n=r(90338),o=r(45956),i={group:o.ApiEndpointGroups.authentication,version:o.ApiVersion.v1,method:o.ApiRequestMethod.POST,authenticationType:o.ApiAuthType.UserDevice,endpoint:"CreateTokenExtAuth"},a=(0,n.prepareApiEndpoint)(i);t.getAuthenticationTokenForCardUpdate=function(e,t,r){return a(e,{login:t,payload:r})}},60132:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getAvailableWebAuthnAuthenticators=void 0;const n=r(45956),o=r(90338),i={group:n.ApiEndpointGroups.authentication,version:n.ApiVersion.v1,method:n.ApiRequestMethod.POST,authenticationType:n.ApiAuthType.Session,endpoint:"GetAvailableWebAuthnAuthenticators"},a=(0,o.prepareApiEndpoint)(i);t.getAvailableWebAuthnAuthenticators=async function(e,t){return a(e,{login:t,payload:{}})}},12407:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getMasterPasswordCipheringKey=void 0;const n=r(90338),o=r(45956),i={group:o.ApiEndpointGroups.authentication,version:o.ApiVersion.v1,method:o.ApiRequestMethod.POST,authenticationType:o.ApiAuthType.Session,endpoint:"GetMasterPasswordCipheringKey"},a=(0,n.prepareApiEndpoint)(i);t.getMasterPasswordCipheringKey=async function(e,t){return a(e,{login:t,payload:{}})}},56736:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getTokens=void 0;const n=r(90338),o=r(45956),i={group:o.ApiEndpointGroups.authentication,version:o.ApiVersion.v1,method:o.ApiRequestMethod.GET,authenticationType:o.ApiAuthType.App,endpoint:"GetTokens"},a=(0,n.prepareApiEndpoint)(i);t.getTokens=async function(e){return a(e)}},80585:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getTwoFactorAuthenticationStatus=void 0;const n=r(90338),o=r(45956),i={group:o.ApiEndpointGroups.authentication,version:o.ApiVersion.v1,method:o.ApiRequestMethod.POST,authenticationType:o.ApiAuthType.UserDevice,endpoint:"Get2FAStatus"},a=(0,n.prepareApiEndpoint)(i);t.getTwoFactorAuthenticationStatus=function(e,t){return a(e,{login:t,payload:{}})}},6862:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getU2FDevices=void 0;const n=r(45956),o=r(90338),i={authenticationType:n.ApiAuthType.UserDevice,endpoint:"GetU2FDevices",group:n.ApiEndpointGroups.authentication,method:n.ApiRequestMethod.POST,version:n.ApiVersion.v1},a=(0,o.prepareApiEndpoint)(i);t.getU2FDevices=async function(e,t){return a(e,{login:t,payload:{}})}},48974:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getUnauthorizedProfiles=void 0;const n=r(45956),o=r(90338),i={group:n.ApiEndpointGroups.authentication,version:n.ApiVersion.v1,method:n.ApiRequestMethod.POST,authenticationType:n.ApiAuthType.App,endpoint:"GetUnauthorizedProfiles"},a=(0,o.prepareApiEndpoint)(i);t.getUnauthorizedProfiles=async function(e,t){return a(e,{payload:t})}},97343:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getUserSSOInfo=void 0;const n=r(45956),o=r(90338),i={group:n.ApiEndpointGroups.authentication,version:n.ApiVersion.v1,method:n.ApiRequestMethod.POST,authenticationType:n.ApiAuthType.TeamDevice,endpoint:"GetUserSSOInfo"},a=(0,o.prepareApiEndpoint)(i);t.getUserSSOInfo=async function(e,t){const{login:r,teamUuid:n,userServiceProviderKey:o}=t;return a(e,{login:r,teamUuid:n,payload:{login:r,userServiceProviderKey:o}})}},99850:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getWebAuthnAuthenticators=void 0;const n=r(45956),o=r(90338),i={group:n.ApiEndpointGroups.authentication,version:n.ApiVersion.v1,method:n.ApiRequestMethod.POST,authenticationType:n.ApiAuthType.UserDevice,endpoint:"GetWebAuthnAuthenticators"},a=(0,o.prepareApiEndpoint)(i);t.getWebAuthnAuthenticators=async function(e,t){return a(e,{login:t,payload:{}})}},43339:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.initRememberMasterPassword=void 0;const n=r(90338),o=r(45956),i={group:o.ApiEndpointGroups.authentication,version:o.ApiVersion.v1,method:o.ApiRequestMethod.POST,authenticationType:o.ApiAuthType.UserDevice,endpoint:"InitRememberMasterPassword"},a=(0,n.prepareApiEndpoint)(i);t.initRememberMasterPassword=async function(e,t,r){return a(e,{login:t,payload:r})}},71336:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.performDashlaneAuthenticatorVerification=t.verificationTimeoutError=void 0;const n=r(59821),o=r(45956),i=r(90338);t.verificationTimeoutError={code:n.VerificationTimeout,message:"The authentication request has timed out",type:n.BusinessError};const a={authenticationType:o.ApiAuthType.App,endpoint:"PerformDashlaneAuthenticatorVerification",group:o.ApiEndpointGroups.authentication,method:o.ApiRequestMethod.POST,version:o.ApiVersion.v1},s=(0,i.prepareApiEndpoint)(a);t.performDashlaneAuthenticatorVerification=async function(e,t){return s(e,{payload:t})}},87992:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.performDuoPushVerification=void 0;const n=r(45956),o=r(90338),i={authenticationType:n.ApiAuthType.App,endpoint:"PerformDuoPushVerification",group:n.ApiEndpointGroups.authentication,method:n.ApiRequestMethod.POST,version:n.ApiVersion.v1},a=(0,o.prepareApiEndpoint)(i);t.performDuoPushVerification=async function(e,t){return a(e,{payload:t})}},4685:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.performEmailTokenVerification=void 0;const n=r(45956),o=r(90338),i={authenticationType:n.ApiAuthType.App,endpoint:"PerformEmailTokenVerification",group:n.ApiEndpointGroups.authentication,method:n.ApiRequestMethod.POST,version:n.ApiVersion.v1},a=(0,o.prepareApiEndpoint)(i);t.performEmailTokenVerification=async function(e,t){return a(e,{payload:t})}},78876:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.performSsoVerification=void 0;const n=r(45956),o=r(90338),i={authenticationType:n.ApiAuthType.App,endpoint:"PerformSsoVerification",group:n.ApiEndpointGroups.authentication,method:n.ApiRequestMethod.POST,version:n.ApiVersion.v1},a=(0,o.prepareApiEndpoint)(i);t.performSsoVerification=async function(e,t){return a(e,{payload:t})}},96425:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.performTotpVerification=void 0;const n=r(45956),o=r(90338),i={authenticationType:n.ApiAuthType.App,endpoint:"PerformTotpVerification",group:n.ApiEndpointGroups.authentication,method:n.ApiRequestMethod.POST,version:n.ApiVersion.v1},a=(0,o.prepareApiEndpoint)(i);t.performTotpVerification=async function(e,t){return a(e,{payload:t})}},99289:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.performU2FVerification=void 0;const n=r(45956),o=r(90338),i={authenticationType:n.ApiAuthType.App,endpoint:"PerformU2FVerification",group:n.ApiEndpointGroups.authentication,method:n.ApiRequestMethod.POST,version:n.ApiVersion.v1},a=(0,o.prepareApiEndpoint)(i);t.performU2FVerification=async function(e,t){return a(e,{payload:t})}},10954:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.requestEmailTokenVerification=void 0;const n=r(45956),o=r(90338),i={group:n.ApiEndpointGroups.authentication,version:n.ApiVersion.v1,method:n.ApiRequestMethod.POST,authenticationType:n.ApiAuthType.App,endpoint:"RequestEmailTokenVerification"},a=(0,o.prepareApiEndpoint)(i);t.requestEmailTokenVerification=async function(e,t){return a(e,{payload:t})}},58539:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.requestExternalDeviceRegistration=void 0;const n=r(90338),o=r(45956),i={group:o.ApiEndpointGroups.authentication,version:o.ApiVersion.v1,method:o.ApiRequestMethod.POST,authenticationType:o.ApiAuthType.App,endpoint:"RequestExternalDeviceRegistration"},a=(0,n.prepareApiEndpoint)(i);t.requestExternalDeviceRegistration=async function(e,t){return a(e,{payload:t})}},1371:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.requestExtraDeviceRegistration=void 0;const n=r(45956),o=r(90338),i={group:n.ApiEndpointGroups.authentication,version:n.ApiVersion.v1,method:n.ApiRequestMethod.POST,authenticationType:n.ApiAuthType.UserDevice,endpoint:"RequestExtraDeviceRegistration"},a=(0,o.prepareApiEndpoint)(i);t.requestExtraDeviceRegistration=async function(e,t){return a(e,{login:t,payload:{tokenType:"shortLived"}})}},51296:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.requestTOTPActivation=t.RequestTOTPActivationError=void 0;const n=r(45956),o=r(90338);!function(e){e.INTERNAL_ERROR="internal_error",e.CANNOT_SEED_FOR_USER_WITH_TOTP_ENABLED="cannot_seed_for_user_with_TOTP_enabled",e.OTP_FAILED="otp_failed",e.TOTP_TYPE_IS_NOT_SET_TO_EMAIL_TOKEN="totp_type_is_not_set_to_email_token",e.PHONE_VALIDATION_FAILED="phone_validation_failed"}(t.RequestTOTPActivationError||(t.RequestTOTPActivationError={}));const i={authenticationType:n.ApiAuthType.UserDevice,endpoint:"RequestTOTPActivation",group:n.ApiEndpointGroups.authentication,method:n.ApiRequestMethod.POST,version:n.ApiVersion.v1},a=(0,o.prepareApiEndpoint)(i);t.requestTOTPActivation=async function(e,t,r){return a(e,{login:t,payload:r})}},48253:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.removeU2FAuthenticator=t.U2FAuthenticatorRemovalBusinessErrors=void 0;const n=r(90338),o=r(45956);!function(e){e.VERIFICATION_METHOD_INVALID="verification_method_invalid",e.INVALID_AUTH_TICKET="invalid_auth_ticket",e.NO_KEYHANDLE_FOUND="NO_KEYHANDLE_FOUND"}(t.U2FAuthenticatorRemovalBusinessErrors||(t.U2FAuthenticatorRemovalBusinessErrors={}));const i={group:o.ApiEndpointGroups.authentication,version:o.ApiVersion.v1,method:o.ApiRequestMethod.POST,authenticationType:o.ApiAuthType.UserDevice,endpoint:"DeactivateU2FDevice"},a=(0,n.prepareApiEndpoint)(i);t.removeU2FAuthenticator=async function(e,t,r){return a(e,{login:t,payload:r})}},48730:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.requestWebauthnOpenSession=void 0;const n=r(45956),o=r(90338),i={group:n.ApiEndpointGroups.authentication,version:n.ApiVersion.v1,method:n.ApiRequestMethod.POST,authenticationType:n.ApiAuthType.Session,endpoint:"RequestWebauthnOpenSession"},a=(0,o.prepareApiEndpoint)(i);t.requestWebauthnOpenSession=async function(e,t){return a(e,{login:t,payload:{}})}},24925:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.requestWebauthnRegistration=void 0;const n=r(45956),o=r(90338),i={group:n.ApiEndpointGroups.authentication,version:n.ApiVersion.v1,method:n.ApiRequestMethod.POST,authenticationType:n.ApiAuthType.UserDevice,endpoint:"RequestWebauthnRegistration"},a=(0,o.prepareApiEndpoint)(i);t.requestWebauthnRegistration=async function(e,t){return a(e,{login:t,payload:{}})}},31197:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addPrivateBreach=void 0;const n=r(45956),o=r(90338),i={group:n.ApiEndpointGroups.dataleakQA,version:n.ApiVersion.v1,method:n.ApiRequestMethod.POST,authenticationType:n.ApiAuthType.App,endpoint:"AddTestLeak"},a=(0,o.prepareApiEndpoint)(i);t.addPrivateBreach=async function(e,t){return a(e,{payload:{...t}})}},77074:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createOrUpdateDarkWebBreach=void 0;const n=r(45956),o=r(90338),i={group:n.ApiEndpointGroups.dataleakQA,version:n.ApiVersion.v1,method:n.ApiRequestMethod.POST,authenticationType:n.ApiAuthType.App,endpoint:"SetTestDataBreach"},a=(0,o.prepareApiEndpoint)(i);t.createOrUpdateDarkWebBreach=async function(e,t){return a(e,{payload:{...t}})}},72579:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createPublicBreach=void 0;const n=r(45956),o=r(90338),i={group:n.ApiEndpointGroups.breachesQA,version:n.ApiVersion.v1,method:n.ApiRequestMethod.POST,authenticationType:n.ApiAuthType.App,endpoint:"CreateTestBreach"},a=(0,o.prepareApiEndpoint)(i);t.createPublicBreach=async function(e,t){return a(e,{payload:t})}},82512:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getDarkWebInsightReport=void 0;const n=r(45956),o=r(90338),i={group:n.ApiEndpointGroups.teams,version:n.ApiVersion.v1,method:n.ApiRequestMethod.POST,authenticationType:n.ApiAuthType.UserDevice,endpoint:"GetDarkWebInsightsReportDetails"},a=(0,o.prepareApiEndpoint)(i);t.getDarkWebInsightReport=async function(e,t,r){return a(e,{login:t,payload:r})}},19667:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getDarkWebInsightsSummaryRequest=void 0;const n=r(45956),o=r(90338),i={group:n.ApiEndpointGroups.teams,version:n.ApiVersion.v1,method:n.ApiRequestMethod.POST,authenticationType:n.ApiAuthType.UserDevice,endpoint:"GetDarkWebInsightsSummary"},a=(0,o.prepareApiEndpoint)(i);t.getDarkWebInsightsSummaryRequest=async function(e,t){return a(e,{login:t,payload:{}})}},91063:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.deactivateDevices=t.CLIENT_STILL_OVERFLOWING=t.PAIRING_GROUPS_NOT_FOUND=t.CLIENT_DEVICES_NOT_FOUND=void 0;const n=r(45956),o=r(90338);t.CLIENT_DEVICES_NOT_FOUND="CLIENT_DEVICES_NOT_FOUND",t.PAIRING_GROUPS_NOT_FOUND="PAIRING_GROUPS_NOT_FOUND",t.CLIENT_STILL_OVERFLOWING="CLIENT_STILL_OVERFLOWING";const i={group:n.ApiEndpointGroups.devices,version:n.ApiVersion.v1,method:n.ApiRequestMethod.POST,authenticationType:n.ApiAuthType.UserDevice,endpoint:"DeactivateDevices"},a=(0,o.prepareApiEndpoint)(i);t.deactivateDevices=async function(e,t,r){return a(e,{login:t,payload:r})}},18625:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.listDevices=void 0;const n=r(45956),o=r(90338),i={group:n.ApiEndpointGroups.devices,version:n.ApiVersion.v1,method:n.ApiRequestMethod.POST,authenticationType:n.ApiAuthType.UserDevice,endpoint:"ListDevices"},a=(0,o.prepareApiEndpoint)(i);t.listDevices=async function(e,t){return a(e,{login:t,payload:{}})}},59821:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InvalidTeamDeviceLogin=t.BasicConfigNotFound=t.DeactivatedTeamDevice=t.DeviceKeyNotFound=t.DeviceAccountMappingAlreadyExists=t.B2bSsoUserNotFound=t.NoFreeSlot=t.NotProposedNeitherAccepted=t.InvalidSsoToken=t.InvalidUser=t.DomainNotValidForTeam=t.TotpActiveOrNotSeeded=t.ConfigurationNotFound=t.TeamDeviceEncryptedConfigNotFound=t.InvalidTOTPStatus=t.VerificationMethodInvalid=t.InvalidAuthTicket=t.WrongPublicKey=t.VerificationTimeout=t.VerificationRequiresRequest=t.VerificationFailedTooManyTimes=t.UpdateOfVerificationMethodNotSupported=t.UnexpectedError=t.UnchangedPrivateKey=t.TwofaSettingSameAsCurrent=t.TwofaServerKeyProvidedIncorrectly=t.TwofaServerKeyNotProvided=t.TeamDoesNotExist=t.TemporaryDisabled=t.NoMpEncryptionKey=t.NotAdmin=t.NoSharingKeys=t.NothingToUpdate=t.NoExternalToken=t.MissingSettingsTransaction=t.InvalidSessionAccessKey=t.InvalidKey=t.InsufficientTier=t.ExternalTokenSignatureNotAvailableForPartner=t.Current2faSettingCannotBeChangedAtUpload=t.ConflictingUpload=t.AccountBlockedContactSupport=t.ServerError=t.RateLimitError=t.InvalidRequestError=t.InjectedError=t.BusinessError=void 0,t.BusinessError="business_error",t.InjectedError="injected_error",t.InvalidRequestError="invalid_request_error",t.RateLimitError="rate_limit_error",t.ServerError="server_error",t.AccountBlockedContactSupport="account_blocked_contact_support",t.ConflictingUpload="conflicting_upload",t.Current2faSettingCannotBeChangedAtUpload="current_2fa_setting_cannot_be_changed_at_upload",t.ExternalTokenSignatureNotAvailableForPartner="external_token_signature_not_available_for_partner",t.InsufficientTier="INSUFFICIENT_TIER",t.InvalidKey="invalid_key",t.InvalidSessionAccessKey="invalid_session_access_key",t.MissingSettingsTransaction="MISSING_SETTINGS_TRANSACTION",t.NoExternalToken="no_external_token",t.NothingToUpdate="NOTHING_TO_UPDATE",t.NoSharingKeys="NO_SHARING_KEYS",t.NotAdmin="NOT_ADMIN",t.NoMpEncryptionKey="no_mp_encryption_key",t.TemporaryDisabled="temporary_disabled",t.TeamDoesNotExist="TEAM_DOES_NOT_EXIST",t.TwofaServerKeyNotProvided="2fa_server_key_not_provided",t.TwofaServerKeyProvidedIncorrectly="2fa_server_key_provided_incorrectly",t.TwofaSettingSameAsCurrent="2fa_setting_same_as_current",t.UnchangedPrivateKey="UNCHANGED_PRIVATE_KEY",t.UnexpectedError="unexpected_error",t.UpdateOfVerificationMethodNotSupported="UPDATE_OF_VERIFICATION_METHOD_NOT_SUPPORTED",t.VerificationFailedTooManyTimes="verification_failed_too_many_times",t.VerificationRequiresRequest="verification_requires_request",t.VerificationTimeout="verification_timeout",t.WrongPublicKey="WRONG_PUBLIC_KEY",t.InvalidAuthTicket="invalid_auth_ticket",t.VerificationMethodInvalid="verification_method_invalid",t.InvalidTOTPStatus="invalid_totp_status",t.TeamDeviceEncryptedConfigNotFound="TEAM_DEVICE_CONFIGURATION_NOT_FOUND",t.ConfigurationNotFound="TEAM_DEVICE_CONFIGURATION_NOT_FOUND",t.TotpActiveOrNotSeeded="totp_active_or_not_seeded",t.DomainNotValidForTeam="DOMAIN_NOT_VALID_FOR_TEAM",t.InvalidUser="invalid_user",t.InvalidSsoToken="invalid_sso_token",t.NotProposedNeitherAccepted="not_proposed_neither_accepted",t.NoFreeSlot="no_free_slot",t.B2bSsoUserNotFound="B2B_SSO_USER_NOT_FOUND",t.DeviceAccountMappingAlreadyExists="DEVICE_ACCOUNT_MAPPING_ALREADY_EXISTS",t.DeviceKeyNotFound="DEVICE_KEY_NOT_FOUND",t.DeactivatedTeamDevice="DEACTIVATED_TEAM_DEVICE",t.BasicConfigNotFound="BASIC_CONFIGURATION_NOT_FOUND",t.InvalidTeamDeviceLogin="INVALID_TEAM_DEVICE_LOGIN"},4933:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.removeFamilyMemberErrors=t.leaveFamilyErrors=t.joinFamilyErrors=t.UserMustCancelPremiumPlusRenewalToDowngradeToFamily=t.UserNotMemberOfFamily=t.CannotRemoveFamilyAdmin=t.UserMustBeFamilyAdmin=t.FamilyHasBeenDiscontinued=t.UserSubscriptionIsUpForRenewal=t.JoinFamilyTokenNotFound=t.AlreadyJoinedThisFamily=t.CannotJoinMultipleFamilies=t.FamilyFull=t.BadLogin=void 0,t.BadLogin="BAD_LOGIN",t.FamilyFull="FAMILY_FULL",t.CannotJoinMultipleFamilies="CANNOT_JOIN_MULTIPLE_FAMILIES",t.AlreadyJoinedThisFamily="ALREADY_JOINED_THIS_FAMILY",t.JoinFamilyTokenNotFound="JOIN_FAMILY_TOKEN_NOT_FOUND",t.UserSubscriptionIsUpForRenewal="USER_SUBSCRIPTION_IS_UP_FOR_RENEWAL",t.FamilyHasBeenDiscontinued="FAMILY_HAS_BEEN_DISCONTINUED",t.UserMustBeFamilyAdmin="USER_MUST_BE_FAMILY_ADMIN",t.CannotRemoveFamilyAdmin="CANNOT_REMOVE_FAMILY_ADMIN",t.UserNotMemberOfFamily="USER_NOT_MEMBER_OF_FAMILY",t.UserMustCancelPremiumPlusRenewalToDowngradeToFamily="USER_MUST_CANCEL_PREMIUM_PLUS_RENEWAL_TO_DOWNGRADE_TO_FAMILY",t.joinFamilyErrors=[t.BadLogin,t.FamilyFull,t.CannotJoinMultipleFamilies,t.AlreadyJoinedThisFamily,t.JoinFamilyTokenNotFound,t.UserSubscriptionIsUpForRenewal,t.FamilyHasBeenDiscontinued,t.UserMustCancelPremiumPlusRenewalToDowngradeToFamily],t.leaveFamilyErrors=[t.CannotRemoveFamilyAdmin,t.UserNotMemberOfFamily],t.removeFamilyMemberErrors=[t.UserMustBeFamilyAdmin,t.CannotRemoveFamilyAdmin,t.UserNotMemberOfFamily]},53e3:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getFamilyDetails=void 0;const n=r(90338),o=r(45956),i={group:o.ApiEndpointGroups.familyplan,version:o.ApiVersion.v1,method:o.ApiRequestMethod.POST,authenticationType:o.ApiAuthType.UserDevice,endpoint:"GetFamilyDetails"},a=(0,n.prepareApiEndpoint)(i);t.getFamilyDetails=async function(e,t){return a(e,{login:t,payload:{}})}},11560:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.joinFamily=t.FamilyStopRenewalPlatform=t.FamilyStopRenewalState=void 0;const n=r(90338),o=r(45956);!function(e){e.STOPPED="stopped",e.NOT_STOPPED="not_stopped"}(t.FamilyStopRenewalState||(t.FamilyStopRenewalState={})),function(e){e.IOS_APP_STORE="ios",e.MAC_STORE="mac",e.PLAY_STORE="playstore",e.PAYPAL="paypal",e.STRIPE="stripe",e.PROCESSOUT="processout"}(t.FamilyStopRenewalPlatform||(t.FamilyStopRenewalPlatform={}));const i={group:o.ApiEndpointGroups.familyplan,version:o.ApiVersion.v1,method:o.ApiRequestMethod.POST,authenticationType:o.ApiAuthType.App,endpoint:"JoinFamily"},a=(0,n.prepareApiEndpoint)(i);t.joinFamily=async function(e,t){return a(e,{payload:t})}},86661:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.leaveFamily=void 0;const n=r(90338),o=r(45956),i={group:o.ApiEndpointGroups.familyplan,version:o.ApiVersion.v1,method:o.ApiRequestMethod.POST,authenticationType:o.ApiAuthType.UserDevice,endpoint:"LeaveFamily"},a=(0,n.prepareApiEndpoint)(i);t.leaveFamily=async function(e,t){return a(e,{login:t,payload:{}})}},15244:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.removeFamilyMember=void 0;const n=r(90338),o=r(45956),i={group:o.ApiEndpointGroups.familyplan,version:o.ApiVersion.v1,method:o.ApiRequestMethod.POST,authenticationType:o.ApiAuthType.UserDevice,endpoint:"RemoveFamilyMember"},a=(0,n.prepareApiEndpoint)(i);t.removeFamilyMember=async function(e,t,r){return a(e,{login:t,payload:r})}},29591:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.resetFamilyJoinToken=void 0;const n=r(90338),o=r(45956),i={group:o.ApiEndpointGroups.familyplan,version:o.ApiVersion.v1,method:o.ApiRequestMethod.POST,authenticationType:o.ApiAuthType.UserDevice,endpoint:"ResetJoinToken"},a=(0,n.prepareApiEndpoint)(i);t.resetFamilyJoinToken=async function(e,t){return a(e,{login:t,payload:{}})}},47521:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getFeatureFlip=void 0;const n=r(90338),o=r(45956),i={group:o.ApiEndpointGroups.features,version:o.ApiVersion.v1,method:o.ApiRequestMethod.POST,authenticationType:o.ApiAuthType.UserDevice,endpoint:"GetAndEvaluateForUser"},a=(0,n.prepareApiEndpoint)(i);t.getFeatureFlip=function(e,t,r){return a(e,{login:t,payload:{features:[r]}})}},64272:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isGetFilesMetaSuccess=t.getFilesMeta=t.endpoint=void 0;const n=r(90338),o=r(45956);t.endpoint="GetFileMeta";const i={group:o.ApiEndpointGroups.file,version:o.ApiVersion.v1,method:o.ApiRequestMethod.POST,authenticationType:o.ApiAuthType.UserDevice,endpoint:t.endpoint},a=(0,n.prepareApiEndpoint)(i);t.getFilesMeta=(e,t,r)=>a(e,{login:t,payload:r}),t.isGetFilesMetaSuccess=e=>"success"===e.code},91503:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(59821),t),o(r(97421),t),o(r(55710),t),o(r(63339),t),o(r(45468),t),o(r(91063),t),o(r(18625),t),o(r(11560),t),o(r(53e3),t),o(r(15244),t),o(r(29591),t),o(r(86661),t),o(r(34957),t),o(r(8124),t),o(r(67747),t),o(r(62712),t),o(r(13271),t),o(r(51837),t),o(r(61054),t),o(r(39446),t),o(r(8111),t),o(r(36602),t),o(r(13328),t),o(r(15152),t),o(r(60132),t),o(r(12407),t),o(r(56736),t),o(r(80585),t),o(r(6862),t),o(r(99850),t),o(r(48974),t),o(r(43339),t),o(r(87992),t),o(r(4685),t),o(r(78876),t),o(r(96425),t),o(r(99289),t),o(r(71336),t),o(r(1371),t),o(r(10954),t),o(r(58539),t),o(r(48253),t),o(r(51296),t),o(r(24925),t),o(r(48730),t),o(r(3278),t),o(r(71633),t),o(r(19336),t),o(r(13445),t),o(r(49481),t),o(r(86680),t),o(r(18959),t),o(r(98802),t),o(r(36420),t),o(r(32042),t),o(r(42216),t),o(r(54268),t),o(r(56026),t),o(r(81926),t),o(r(28974),t),o(r(46583),t),o(r(43775),t),o(r(9161),t),o(r(34252),t),o(r(92006),t),o(r(80474),t),o(r(10554),t),o(r(41780),t),o(r(25094),t),o(r(3330),t),o(r(80359),t),o(r(74895),t)},66677:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getKillSwitches=void 0;const n=r(90338),o=r(45956),i={group:o.ApiEndpointGroups.killswitch,version:o.ApiVersion.v1,method:o.ApiRequestMethod.POST,authenticationType:o.ApiAuthType.App,endpoint:"GetKillSwitches"},a=(0,n.prepareApiEndpoint)(i);t.getKillSwitches=async function(e,t){return a(e,{payload:{requestedKillswitches:t}})}},3330:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.requestPairing=void 0;const n=r(90338),o=r(45956),i={group:o.ApiEndpointGroups.pairing,version:o.ApiVersion.v1,method:o.ApiRequestMethod.POST,authenticationType:o.ApiAuthType.UserDevice,endpoint:"RequestPairing"},a=(0,n.prepareApiEndpoint)(i);t.requestPairing=async function(e,t){return a(e,{login:t,payload:{}})}},48008:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getCustomerInvoice=void 0;const n=r(90338),o=r(45956),i={group:o.ApiEndpointGroups.payments,version:o.ApiVersion.v1,method:o.ApiRequestMethod.POST,authenticationType:o.ApiAuthType.UserDevice,endpoint:"GetCustomerInvoice",accept:"application/pdf",responseType:"arraybuffer"},a=(0,n.prepareApiEndpoint)(i);t.getCustomerInvoice=async function(e,t,r){return a(e,{login:t,payload:r})}},36273:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.listInvoices=void 0;const n=r(90338),o=r(45956),i={group:o.ApiEndpointGroups.payments,version:o.ApiVersion.v1,method:o.ApiRequestMethod.POST,authenticationType:o.ApiAuthType.UserDevice,endpoint:"ListInvoices"},a=(0,n.prepareApiEndpoint)(i);t.listInvoices=async function(e,t){return a(e,{login:t,payload:{}})}},48523:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.grantFullRefundAndCancelSubscription=void 0;const n=r(90338),o=r(45956),i={group:o.ApiEndpointGroups.payments,version:o.ApiVersion.v1,method:o.ApiRequestMethod.POST,authenticationType:o.ApiAuthType.UserDevice,endpoint:"GrantFullRefundAndCancelSubscription"},a=(0,n.prepareApiEndpoint)(i);t.grantFullRefundAndCancelSubscription=async function(e,t,r){return a(e,{login:t,payload:r})}},80359:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getHashes=void 0;const n=r(90338),o=r(45956),i={group:o.ApiEndpointGroups.pwleak,version:o.ApiVersion.v1,method:o.ApiRequestMethod.POST,authenticationType:o.ApiAuthType.App,endpoint:"GetHashes"},a=(0,n.prepareApiEndpoint)(i);t.getHashes=async function(e,t){return a(e,{payload:t})}},3278:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.confirmMasterPasswordChangeDone=void 0;const n=r(45956),o=r(90338),i={authenticationType:n.ApiAuthType.UserDevice,endpoint:"ConfirmMasterPasswordChangeDone",group:n.ApiEndpointGroups.sync,method:n.ApiRequestMethod.POST,version:n.ApiVersion.v1},a=(0,o.prepareApiEndpoint)(i);t.confirmMasterPasswordChangeDone=async function(e,t,r){return a(e,{login:t,payload:r})}},71633:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getDataForMasterPasswordChange=void 0;const n=r(45956),o=r(90338),i={authenticationType:n.ApiAuthType.UserDevice,endpoint:"GetDataForMasterPasswordChange",group:n.ApiEndpointGroups.sync,method:n.ApiRequestMethod.POST,version:n.ApiVersion.v1},a=(0,o.prepareApiEndpoint)(i);t.getDataForMasterPasswordChange=async function(e,t,r){return a(e,{login:t,payload:r})}},19336:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getLatestContent=void 0;const n=r(45956),o=r(90338),i={group:n.ApiEndpointGroups.sync,version:n.ApiVersion.v1,method:n.ApiRequestMethod.POST,authenticationType:n.ApiAuthType.UserDevice,endpoint:"GetLatestContent"},a=(0,o.prepareApiEndpoint)(i);t.getLatestContent=async function(e,t,r){return a(e,{login:t,payload:r})}},69214:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.uploadDataForCryptoChange=void 0;const n=r(90338),o=r(45956),i={authenticationType:o.ApiAuthType.UserDevice,endpoint:"UploadDataForCryptoUpdate",group:o.ApiEndpointGroups.sync,method:o.ApiRequestMethod.POST,version:o.ApiVersion.v1},a=(0,n.prepareApiEndpoint)(i);t.uploadDataForCryptoChange=async function(e,t,r){return await a(e,{login:t,payload:r})}},13445:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.uploadDataForMasterPasswordChange=void 0;const n=r(45956),o=r(90338),i={authenticationType:n.ApiAuthType.UserDevice,endpoint:"UploadDataForMasterPasswordChange",group:n.ApiEndpointGroups.sync,method:n.ApiRequestMethod.POST,version:n.ApiVersion.v1},a=(0,o.prepareApiEndpoint)(i);t.uploadDataForMasterPasswordChange=async function(e,t,r){return a(e,{login:t,payload:r})}},49481:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.lastADSyncDate=t.lastADSyncDateErrors=void 0;const n=r(46298),o=r(90338),i=r(45956);t.lastADSyncDateErrors=[n.NotAdmin,n.InsufficientTier,n.UnknownError];const a={group:i.ApiEndpointGroups.teams,version:i.ApiVersion.v1,method:i.ApiRequestMethod.POST,authenticationType:i.ApiAuthType.UserDevice,endpoint:"LastADSyncDate"},s=(0,o.prepareApiEndpoint)(a);t.lastADSyncDate=function(e,t){return s(e,{login:t,payload:{}})}},11848:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addSeatsRequest=void 0;const n=r(45956),o=r(90338),i={group:n.ApiEndpointGroups.teams,version:n.ApiVersion.v1,method:n.ApiRequestMethod.POST,authenticationType:n.ApiAuthType.UserDevice,endpoint:"AddSeats"},a=(0,o.prepareApiEndpoint)(i);t.addSeatsRequest=async function(e,t,r){return await a(e,{login:t,payload:{seats:r}})}},18959:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getAuditLogsQueryResults=t.InternalErrorCode=t.NotAdminErrorCode=void 0;const n=r(90338),o=r(45956);t.NotAdminErrorCode="NOT_ADMIN",t.InternalErrorCode="internal_error";const i={group:o.ApiEndpointGroups.teams,version:o.ApiVersion.v1,method:o.ApiRequestMethod.POST,authenticationType:o.ApiAuthType.UserDevice,endpoint:"GetAuditLogQueryResults"},a=(0,n.prepareApiEndpoint)(i);t.getAuditLogsQueryResults=function(e,t,r){return a(e,{login:t,payload:r})}},86680:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.startAuditLogsQuery=void 0;const n=r(90338),o=r(45956),i={group:o.ApiEndpointGroups.teams,version:o.ApiVersion.v1,method:o.ApiRequestMethod.POST,authenticationType:o.ApiAuthType.UserDevice,endpoint:"StartAuditLogsQuery"},a=(0,n.prepareApiEndpoint)(i);t.startAuditLogsQuery=function(e,t,r){return a(e,{login:t,payload:r})}},38115:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.changeTierMidCycleRequest=void 0;const n=r(45956),o=r(90338),i={group:n.ApiEndpointGroups.teams,version:n.ApiVersion.v1,method:n.ApiRequestMethod.POST,authenticationType:n.ApiAuthType.UserDevice,endpoint:"ChangeTierMidCycle"},a=(0,o.prepareApiEndpoint)(i);t.changeTierMidCycleRequest=async function(e,t,r,n,o,i,s,c){return await a(e,{login:t,payload:{amountToPay:r,taxes:n,planId:o,couponCode:i,seatsToAdd:s,billingContactEmail:c}})}},21712:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.computePlanPricingRequest=void 0;const n=r(45956),o=r(90338),i={group:n.ApiEndpointGroups.teams,version:n.ApiVersion.v1,method:n.ApiRequestMethod.POST,authenticationType:n.ApiAuthType.UserDevice,endpoint:"ComputePlanPricing"},a=(0,o.prepareApiEndpoint)(i);t.computePlanPricingRequest=async function(e,t,r){return await a(e,{login:t,payload:{seats:r}})}},81926:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.listTeamDevicesErrors=t.getTeamDeviceErrors=t.createTeamDeviceAccountErrors=t.deactivateTeamDeviceErrors=t.registerTeamDeviceErrors=t.TeamDevicePlatform=void 0;const n=r(59821),o=r(45956);!function(e){e.SSO_CONNECTOR="sso_connector",e.ENCRYPTION_SERVICE="encryption_service",e.NITRO="nitro_encryption_service"}(t.TeamDevicePlatform||(t.TeamDevicePlatform={})),t.registerTeamDeviceErrors=[n.NotAdmin,o.UnknownError],t.deactivateTeamDeviceErrors=[n.NotAdmin,o.UnknownError,n.DeviceKeyNotFound,n.DeactivatedTeamDevice],t.createTeamDeviceAccountErrors=[n.NotAdmin,o.UnknownError,n.DeviceAccountMappingAlreadyExists,n.InvalidTeamDeviceLogin],t.getTeamDeviceErrors=[n.NotAdmin,o.UnknownError],t.listTeamDevicesErrors=[n.NotAdmin,o.UnknownError]},28974:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createTeamDeviceAccount=void 0;const n=r(90338),o=r(45956),i={group:o.ApiEndpointGroups.teams,version:o.ApiVersion.v1,method:o.ApiRequestMethod.POST,authenticationType:o.ApiAuthType.UserDevice,endpoint:"CreateTeamDeviceAccount"},a=(0,n.prepareApiEndpoint)(i);t.createTeamDeviceAccount=(e,t,r)=>a(e,{login:t,payload:r})},43775:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.deactivateTeamDevice=void 0;const n=r(90338),o=r(45956),i={group:o.ApiEndpointGroups.teams,version:o.ApiVersion.v1,method:o.ApiRequestMethod.POST,authenticationType:o.ApiAuthType.UserDevice,endpoint:"DeactivateTeamDevice"},a=(0,n.prepareApiEndpoint)(i);t.deactivateTeamDevice=function(e,t,r){return a(e,{login:t,payload:r})}},9161:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getTeamDevice=void 0;const n=r(90338),o=r(45956),i={group:o.ApiEndpointGroups.teams,version:o.ApiVersion.v1,method:o.ApiRequestMethod.POST,authenticationType:o.ApiAuthType.UserDevice,endpoint:"GetTeamDevice"},a=(0,n.prepareApiEndpoint)(i);t.getTeamDevice=async function(e,t,r){return await a(e,{login:t,payload:r})}},34252:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.listTeamDevices=void 0;const n=r(90338),o=r(45956),i={group:o.ApiEndpointGroups.teams,version:o.ApiVersion.v1,method:o.ApiRequestMethod.POST,authenticationType:o.ApiAuthType.UserDevice,endpoint:"ListTeamDevices"},a=(0,n.prepareApiEndpoint)(i);t.listTeamDevices=async(e,t)=>await a(e,{login:t,payload:{}})},46583:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.registerTeamDevice=void 0;const n=r(90338),o=r(45956),i={group:o.ApiEndpointGroups.teams,version:o.ApiVersion.v1,method:o.ApiRequestMethod.POST,authenticationType:o.ApiAuthType.UserDevice,endpoint:"RegisterTeamDevice"},a=(0,n.prepareApiEndpoint)(i);t.registerTeamDevice=function(e,t,r){return a(e,{login:t,payload:r})}},98802:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DomainStatusResponse=void 0,function(e){e.pending="pending",e.valid="valid",e.expired="expired",e.invalid="invalid"}(t.DomainStatusResponse||(t.DomainStatusResponse={}))},36420:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.completeDomainRegistrationErrors=t.completeDomainRegistration=void 0;const n=r(90338),o=r(45956),i=r(59821),a={group:o.ApiEndpointGroups.teams,version:o.ApiVersion.v1,method:o.ApiRequestMethod.POST,authenticationType:o.ApiAuthType.UserDevice,endpoint:"CompleteDomainsRegistration"},s=(0,n.prepareApiEndpoint)(a);t.completeDomainRegistration=async function(e,t){return s(e,{login:t,payload:{}})},t.completeDomainRegistrationErrors=[i.NotAdmin]},32042:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.deactivateDomain=t.deactivateDomainErrors=void 0;const n=r(90338),o=r(45956),i=r(59821);t.deactivateDomainErrors=[i.NotAdmin,i.DomainNotValidForTeam];const a={group:o.ApiEndpointGroups.teams,version:o.ApiVersion.v1,method:o.ApiRequestMethod.POST,authenticationType:o.ApiAuthType.UserDevice,endpoint:"DeactivateDomain"},s=(0,n.prepareApiEndpoint)(a);t.deactivateDomain=async function(e,t,r){return s(e,{login:t,payload:r})}},42216:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.listDomains=t.listDomainErrors=void 0;const n=r(90338),o=r(45956),i=r(59821);t.listDomainErrors=[i.ServerError,i.InvalidRequestError];const a={group:o.ApiEndpointGroups.teams,version:o.ApiVersion.v1,method:o.ApiRequestMethod.POST,authenticationType:o.ApiAuthType.UserDevice,endpoint:"ListDomains"},s=(0,n.prepareApiEndpoint)(a);t.listDomains=async function(e,t){return s(e,{login:t,payload:{}})}},54268:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.requestDomainRegistration=t.requestDomainRegistrationErrors=t.DomainContainsNonTeamUsers=t.InvalidPublicDomain=t.DomainAlreadyExists=void 0;const n=r(90338),o=r(45956),i=r(59821);t.DomainAlreadyExists="DOMAIN_ALREADY_EXISTS",t.InvalidPublicDomain="INVALID_PUBLIC_DOMAIN",t.DomainContainsNonTeamUsers="DOMAIN_CONTAINS_EXISTING_NONTEAM_USERS",t.requestDomainRegistrationErrors=[i.TeamDoesNotExist,t.DomainAlreadyExists,i.NotAdmin,t.InvalidPublicDomain,t.DomainContainsNonTeamUsers];const a={group:o.ApiEndpointGroups.teams,version:o.ApiVersion.v1,method:o.ApiRequestMethod.POST,authenticationType:o.ApiAuthType.UserDevice,endpoint:"RequestDomainRegistration"},s=(0,n.prepareApiEndpoint)(a);t.requestDomainRegistration=function(e,t,r){return s(e,{login:t,payload:r})}},30782:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getExpectedTaxInformationRequest=void 0;const n=r(45956),o=r(90338),i={group:n.ApiEndpointGroups.teams,version:n.ApiVersion.v1,method:n.ApiRequestMethod.POST,authenticationType:n.ApiAuthType.UserDevice,endpoint:"GetExpectedTaxInformation"},a=(0,o.prepareApiEndpoint)(i);t.getExpectedTaxInformationRequest=async function(e,t,r){return await a(e,{login:t,payload:{priceInCents:r}})}},78607:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getMidCycleTierUpgradePriceRequest=void 0;const n=r(45956),o=r(90338),i={group:n.ApiEndpointGroups.teams,version:n.ApiVersion.v1,method:n.ApiRequestMethod.POST,authenticationType:n.ApiAuthType.UserDevice,endpoint:"GetMidCycleTierUpgradePrice"},a=(0,o.prepareApiEndpoint)(i);t.getMidCycleTierUpgradePriceRequest=async function(e,t,r,n){return await a(e,{login:t,payload:{numberOfSeats:n,newPlan:r}})}},47115:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getTeamOffersRequest=void 0;const n=r(45956),o=r(90338),i={group:n.ApiEndpointGroups.teams,version:n.ApiVersion.v1,method:n.ApiRequestMethod.POST,authenticationType:n.ApiAuthType.UserDevice,endpoint:"GetTeamOffers"},a=(0,o.prepareApiEndpoint)(i);t.getTeamOffersRequest=async function(e,t,r){return await a(e,{login:t,payload:{couponCode:r,withStarterOffer:!0}})}},93934:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.changeInviteLinkTeamKey=void 0;const n=r(90338),o=r(45956),i={group:o.ApiEndpointGroups.teams,version:o.ApiVersion.v1,method:o.ApiRequestMethod.POST,authenticationType:o.ApiAuthType.UserDevice,endpoint:"ChangeTeamKey"},a=(0,n.prepareApiEndpoint)(i);t.changeInviteLinkTeamKey=(e,t,r)=>a(e,{login:t,payload:r})},5928:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getInviteLinkErrors=void 0;const n=r(38250);t.getInviteLinkErrors=[n.InviteLinkResponseErrorCode.NotAdmin,n.InviteLinkResponseErrorCode.InviteLinkNotFound,n.InviteLinkResponseErrorCode.TeamKeyNotFound,n.InviteLinkResponseErrorCode.UserInviteLinkNotFound]},32811:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createInviteLink=void 0;const n=r(90338),o=r(45956),i={group:o.ApiEndpointGroups.teams,version:o.ApiVersion.v1,method:o.ApiRequestMethod.POST,authenticationType:o.ApiAuthType.UserDevice,endpoint:"CreateTeamSignUpPage"},a=(0,n.prepareApiEndpoint)(i);t.createInviteLink=(e,t,r)=>a(e,{login:t,payload:r})},44609:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getInviteLinkForAdmin=void 0;const n=r(90338),o=r(45956),i={group:o.ApiEndpointGroups.teams,version:o.ApiVersion.v1,method:o.ApiRequestMethod.POST,authenticationType:o.ApiAuthType.UserDevice,endpoint:"GetTeamSignUpPageForAdmin"},a=(0,n.prepareApiEndpoint)(i);t.getInviteLinkForAdmin=(e,t,r)=>a(e,{login:t,payload:r})},6563:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getInviteLink=void 0;const n=r(90338),o=r(45956),i={group:o.ApiEndpointGroups.teams,version:o.ApiVersion.v1,method:o.ApiRequestMethod.POST,authenticationType:o.ApiAuthType.App,endpoint:"GetTeamSignUpPage"},a=(0,n.prepareApiEndpoint)(i);t.getInviteLink=(e,t)=>a(e,{payload:t})},41780:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(5928),t),o(r(93934),t),o(r(32811),t),o(r(6563),t),o(r(44609),t),o(r(92020),t),o(r(25731),t)},25731:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.requestInviteLinkToken=void 0;const n=r(90338),o=r(45956),i={group:o.ApiEndpointGroups.teams,version:o.ApiVersion.v1,method:o.ApiRequestMethod.POST,authenticationType:o.ApiAuthType.App,endpoint:"RequestTeamInviteToken"},a=(0,n.prepareApiEndpoint)(i);t.requestInviteLinkToken=(e,t)=>a(e,{payload:t})},92020:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.toggleInviteLink=void 0;const n=r(90338),o=r(45956),i={group:o.ApiEndpointGroups.teams,version:o.ApiVersion.v1,method:o.ApiRequestMethod.POST,authenticationType:o.ApiAuthType.UserDevice,endpoint:"ToggleTeamSignUpPage"},a=(0,n.prepareApiEndpoint)(i);t.toggleInviteLink=(e,t,r)=>a(e,{login:t,payload:r})},74528:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getRecoveryCodesAsTeamCaptain=t.GetRecoveryCodesAsTeamCaptainInternalErrorCode=t.GetRecoveryCodesAsTeamCaptainNotAdminErrorCode=void 0;const n=r(90338),o=r(45956);t.GetRecoveryCodesAsTeamCaptainNotAdminErrorCode="not_billing_admin",t.GetRecoveryCodesAsTeamCaptainInternalErrorCode="internal_error";const i={group:o.ApiEndpointGroups.teams,version:o.ApiVersion.v1,method:o.ApiRequestMethod.POST,authenticationType:o.ApiAuthType.UserDevice,endpoint:"GetRecoveryCodesAsTeamCaptain"},a=(0,n.prepareApiEndpoint)(i);t.getRecoveryCodesAsTeamCaptain=function(e,t,r){return a(e,{login:t,payload:r})}},95375:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getTeamMembers=t.GetTeamMembersInternalErrorCode=t.GetTeamMembersInvalidLimitErrorCode=void 0;const n=r(90338),o=r(45956);t.GetTeamMembersInvalidLimitErrorCode="invalid_limit",t.GetTeamMembersInternalErrorCode="internal_error";const i={group:o.ApiEndpointGroups.teams,version:o.ApiVersion.v1,method:o.ApiRequestMethod.POST,authenticationType:o.ApiAuthType.UserDevice,endpoint:"GetTeamMembers"},a=(0,n.prepareApiEndpoint)(i);t.getTeamMembers=function(e,t,r){return a(e,{login:t,payload:r})}},92006:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.updateTeamDeviceEncryptedConfigErrors=t.getTeamDeviceEncryptedConfigErrors=void 0;const n=r(59821),o=r(45956);t.getTeamDeviceEncryptedConfigErrors=[n.TeamDeviceEncryptedConfigNotFound,n.NotAdmin,o.UnknownError],t.updateTeamDeviceEncryptedConfigErrors=[n.NotAdmin,o.UnknownError,n.DeviceAccountMappingAlreadyExists,n.DeviceKeyNotFound]},80474:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getTeamDeviceEncryptedConfig=void 0;const n=r(90338),o=r(45956),i={group:o.ApiEndpointGroups.teams,version:o.ApiVersion.v1,method:o.ApiRequestMethod.POST,authenticationType:o.ApiAuthType.UserDevice,endpoint:"GetTeamDeviceEncryptedConfiguration"},a=(0,n.prepareApiEndpoint)(i);t.getTeamDeviceEncryptedConfig=(e,t,r)=>a(e,{login:t,payload:r})},10554:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.updateTeamDeviceEncryptedConfig=void 0;const n=r(90338),o=r(45956),i={group:o.ApiEndpointGroups.teams,version:o.ApiVersion.v1,method:o.ApiRequestMethod.POST,authenticationType:o.ApiAuthType.UserDevice,endpoint:"UpdateTeamDeviceEncryptedConfiguration"},a=(0,n.prepareApiEndpoint)(i);t.updateTeamDeviceEncryptedConfig=(e,t,r)=>a(e,{login:t,payload:r})},56026:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.teamStatus=void 0;const n=r(90338),o=r(45956),i={group:o.ApiEndpointGroups.teams,version:o.ApiVersion.v1,method:o.ApiRequestMethod.POST,authenticationType:o.ApiAuthType.UserDevice,endpoint:"TeamStatus"},a=(0,n.prepareApiEndpoint)(i);t.teamStatus=function(e,t){return a(e,{login:t,payload:{}})}},25094:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getRemoteTime=void 0;const n=r(90338),o=r(45956),i={group:o.ApiEndpointGroups.time,version:o.ApiVersion.v1,method:o.ApiRequestMethod.POST,authenticationType:o.ApiAuthType.None,endpoint:"GetRemoteTime"},a=(0,n.prepareApiEndpoint)(i);t.getRemoteTime=async function(e,t){return a(e,{payload:t??{}})}},74895:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.generateCredential=t.GetVpnCredentialBusinessErrors=void 0;const n=r(90338),o=r(45956);!function(e){e.USER_DOESNT_HAVE_VPN_CAPABILITY="USER_DOESNT_HAVE_VPN_CAPABILITY",e.USER_ALREADY_HAS_AN_ACCOUNT="USER_ALREADY_HAS_AN_ACCOUNT",e.USER_ALREADY_HAS_AN_ACCOUNT_FOR_PROVIDER="USER_ALREADY_HAS_AN_ACCOUNT_FOR_PROVIDER",e.USER_ALREADY_HAVE_ACTIVE_VPN_SUBSCRIPTION="USER_ALREADY_HAVE_ACTIVE_VPN_SUBSCRIPTION"}(t.GetVpnCredentialBusinessErrors||(t.GetVpnCredentialBusinessErrors={}));const i={group:o.ApiEndpointGroups.vpn,version:o.ApiVersion.v1,method:o.ApiRequestMethod.POST,authenticationType:o.ApiAuthType.UserDevice,endpoint:"GetCredentials"},a=(0,n.prepareApiEndpoint)(i);t.generateCredential=async(e,t,r)=>await a(e,{login:t,payload:r})},78577:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.signRequest=t.allowedUnsignedHeaders=t.allowedUnsignedProxyHeaders=t.allowedUnsignedClientHeaders=t.signatureAlgorithm=void 0;const n=r(16516),o=r(46445),i=r(16038),a=r(69530),s=r(47408),c=r(45956),u=r(15215),d=r(17825);function l(e){const{appKeys:t}=e,r=["AppAccessKey="+t.accessKey];switch(e.type){case c.ApiAuthType.App:return r;case c.ApiAuthType.UserDevice:{const{login:t,deviceKeys:n}=e;return[`Login=${t}`,...r,`DeviceAccessKey=${n.accessKey}`]}case c.ApiAuthType.Session:{const{deviceId:t,login:n,sessionKeys:o}=e;return[`Login=${n}`,...r,`SessionAccessKey=${o.accessKey}`,`DeviceAccessKey=${t}`]}case c.ApiAuthType.TeamDevice:{const{teamUuid:t,deviceKeys:n}=e;return[`TeamUuid=${t}`,...r,`DeviceAccessKey=${n.accessKey}`]}default:(0,d.assertUnreachable)(e)}}t.signatureAlgorithm="DL1-HMAC-SHA256",t.allowedUnsignedClientHeaders=["origin","content-length","content-encoding","authorization","user-agent","accept-encoding"],t.allowedUnsignedProxyHeaders=["x-forwarded-for","x-forwarded-proto","x-forwarded-port","x-amzn-trace-id"],t.allowedUnsignedHeaders=[...t.allowedUnsignedClientHeaders,...t.allowedUnsignedProxyHeaders],t.signRequest=async e=>{const{request:r,credentials:p,headersToSign:m,timestamp:g=(0,s.getUnixTimestamp)()}=e,{method:f,pathname:S,headers:h,query:y={},rawBody:v}=r,E=e=>Promise.resolve(e),A=(0,n.compose)(i.str2ab,i.utf8ChunkEncode),_=(0,n.composeP)((0,n.compose)(E,i.convertBufferToHex),o.computeHashSha256,(0,n.compose)(E,A)),T=await _(v),{canonicalRequest:I,signedHeaders:b}=(0,u.makeCanonicalRequest)({method:f,uri:S,headers:h,query:y,hashedPayload:T,headersToSign:m}),w=await _(I),C=[t.signatureAlgorithm,g,w].join("\n"),D=function(e){const{appKeys:t}=e;switch(e.type){case c.ApiAuthType.App:return t.secretKey;case c.ApiAuthType.UserDevice:{const{deviceKeys:r}=e;return`${t.secretKey}\n${r.secretKey}`}case c.ApiAuthType.Session:{const{sessionKeys:r}=e;return`${t.secretKey}\n${r.secretKey}`}case c.ApiAuthType.TeamDevice:{const{deviceKeys:r}=e;return`${t.secretKey}\n${r.secretKey}`}default:(0,d.assertUnreachable)(e)}}(p),O=A(C),P=await(0,a.signHashHmacSHA256)({key:(0,i.str2ab)(D),data:O}),N=(0,i.convertBufferToHex)(P);return t.signatureAlgorithm+" "+[...l(p),`Timestamp=${g}`,`SignedHeaders=${b}`,`Signature=${N}`].join(",")}},45956:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isApiErrorOfType=t.isApiError=t.UnknownError=t.ApiEndpointGroups=t.ApiVersion=t.ApiRequestMethod=t.ApiAuthType=void 0,t.ApiAuthType={App:"App",UserDevice:"UserDevice",None:"None",Session:"Session",TeamDevice:"TeamDevice"},t.ApiRequestMethod={GET:"GET",POST:"POST"},function(e){e[e.v1=0]="v1"}(t.ApiVersion||(t.ApiVersion={})),function(e){e.abtesting="abtesting",e.account="account",e.accountRecovery="accountrecovery",e.authentication="authentication",e.breachesQA="breaches-qa",e.dataleak="dataleak",e.dataleakQA="dataleak-qa",e.darkwebinsights="darkwebinsights",e.devices="devices",e.familyplan="familyplan",e.features="features",e.file="file",e.killswitch="killswitch",e.pairing="pairing",e.premium="premium",e.pwleak="pwleak",e.sync="sync",e.teams="teams",e.time="time",e.payments="payments",e.vpn="vpn"}(t.ApiEndpointGroups||(t.ApiEndpointGroups={})),t.UnknownError="UNKNOWN_ERROR",t.isApiError=function(e){return"object"==typeof e&&"success"!==e.code},t.isApiErrorOfType=function(e,t){return"object"==typeof t&&t.type===e}},90190:(e,t)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.UnknownError=t.UnknownErrorMessages=t.UnknownErrorCode=void 0,function(e){e[e.UNKNOWN_ERROR=0]="UNKNOWN_ERROR"}(r=t.UnknownErrorCode||(t.UnknownErrorCode={})),t.UnknownErrorMessages={[r.UNKNOWN_ERROR]:"Unknown error"},t.UnknownError={codes:r,name:"UnknownError",messages:t.UnknownErrorMessages}},92263:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),t.isCarbonError=t.CarbonError=void 0;const i=r(90190);class a extends Error{constructor(e,t){super(e.messages[t]),this.errorType=e,this.errorCode=t,this.additionalInfo={},Object.setPrototypeOf(this,a.prototype),this.name="CarbonError",Error.captureStackTrace&&Error.captureStackTrace(this,a)}errorTypeName(){return this.errorType.name}stringErrorCode(){const{errorType:{codes:e,name:t},errorCode:r}=this;return`${t}#${e[r]}`}addAdditionalInfo(e){return this.additionalInfo={...this.additionalInfo,...e},this}getAdditionalInfo(){return this.additionalInfo}addContextInfo(e,t){const{errorCode:r,errorType:n}=this;return this.message=`[${e}] - ${t}: ${n.messages[r]}`,this}toString(){return`CarbonError: ${this.message} (code ${this.stringErrorCode()})`}static fromAnyError(e,t,r){if(s(e))return e;const n=new a(t||i.UnknownError,void 0===r?i.UnknownErrorCode.UNKNOWN_ERROR:r);return s(n,i.UnknownError,i.UnknownErrorCode.UNKNOWN_ERROR)&&(n.message=e.message||`${e}`),e.stack&&(n.stack=e.stack),n}}function s(e,t,r){return e instanceof Error&&"CarbonError"===e.name&&(void 0===t||t===e.errorType)&&(void 0===r||r===e.errorCode)}t.CarbonError=a,t.isCarbonError=s,o(r(35706),t)},35706:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},45800:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getCloudflareHeaders=t.setCloudflareHeaders=void 0;let r={};t.setCloudflareHeaders=(e,t)=>{if(Object.isFrozen(r))throw new Error("Trying to set Cloudflare headers after initialization");e&&t&&(r={"CF-Access-Client-Id":e,"CF-Access-Client-Secret":t},Object.freeze(r))},t.getCloudflareHeaders=()=>Object.isFrozen(r)?r:{}},39266:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isHttpError=t.HttpError=t.HttpErrorMessages=t.HttpErrorCode=void 0;const n=r(92263);var o;!function(e){e[e.CLIENT_ERROR=0]="CLIENT_ERROR",e[e.SERVER_ERROR=1]="SERVER_ERROR",e[e.STATUS_CODE=2]="STATUS_CODE",e[e.CONNECTION_ABORTED=3]="CONNECTION_ABORTED",e[e.CONNECTION_TIMED_OUT=4]="CONNECTION_TIMED_OUT",e[e.NETWORK_ERROR=5]="NETWORK_ERROR",e[e.NO_RESPONSE=6]="NO_RESPONSE",e[e.SETUP_FAILED=7]="SETUP_FAILED"}(o=t.HttpErrorCode||(t.HttpErrorCode={})),t.HttpErrorMessages={[o.CLIENT_ERROR]:"Http response with client error status",[o.SERVER_ERROR]:"Http response with server error status",[o.STATUS_CODE]:"Http response with non-succesful status",[o.CONNECTION_ABORTED]:"Connection aborted",[o.CONNECTION_TIMED_OUT]:"Connection timed out",[o.NETWORK_ERROR]:"Network error",[o.NO_RESPONSE]:"No response to Http request",[o.SETUP_FAILED]:"Failed to setup Http request"},t.HttpError={codes:o,name:"HttpError",messages:t.HttpErrorMessages},t.isHttpError=(e,r)=>(0,n.isCarbonError)(e,t.HttpError,r)},62628:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.get=void 0;const n=r(55539);t.get=function(e,t={}){return(0,n.httpGetUsingFetch)(e,t)}},55539:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.httpGetUsingFetch=void 0;const n=r(87248);t.httpGetUsingFetch=async function(e,t={}){const r=(0,n.setTimeoutAbort)();try{const o={credentials:"omit",signal:r},i=t.headers?{...o,headers:t.headers}:o,a=await fetch(e,i);if((t.validateStatus&&!t.validateStatus(a.status))??!a.ok){const t=new n.FetchError(`HTTP ${a.status} - ${e}`);throw t.response=a,t}const s=await(0,n.getResponseBody)(a,t.responseType);return{headers:a.headers,data:s,status:a.status,statusText:a.statusText}}catch(e){throw(0,n.getCarbonHttpError)(e,r)}}},87248:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getCarbonHttpError=t.FetchError=t.setTimeoutAbort=t.getResponseBody=t.HttpStatusCode=void 0;const n=r(17825),o=r(92263),i=r(39266);!function(e){e[e.GATEWAY_TIMEOUT=504]="GATEWAY_TIMEOUT"}(t.HttpStatusCode||(t.HttpStatusCode={})),t.getResponseBody=async function(e,t="json"){switch(t){case"json":return e.json();case"text":return e.text();case"arraybuffer":return e.arrayBuffer();default:(0,n.assertUnreachable)(t)}},t.setTimeoutAbort=function(e=6e4){const t=new AbortController;return setTimeout((()=>t.abort()),e),t.signal};class a extends Error{constructor(e){super(e),this.response=void 0}}t.FetchError=a,t.getCarbonHttpError=(e,t)=>{let r=null;if(function(e){return e instanceof a}(e)&&e.response){const{response:t}=e,{status:n}=t;r=n>=400&&n<500?new o.CarbonError(i.HttpError,i.HttpErrorCode.CLIENT_ERROR):n>=500?new o.CarbonError(i.HttpError,i.HttpErrorCode.SERVER_ERROR):new o.CarbonError(i.HttpError,i.HttpErrorCode.STATUS_CODE),r.addAdditionalInfo({response:t})}else r="AbortError"===e.name&&t.aborted?new o.CarbonError(i.HttpError,i.HttpErrorCode.CONNECTION_TIMED_OUT):"AbortError"===e.name?new o.CarbonError(i.HttpError,i.HttpErrorCode.CONNECTION_ABORTED):self?.navigator?.onLine?new o.CarbonError(i.HttpError,i.HttpErrorCode.SETUP_FAILED):new o.CarbonError(i.HttpError,i.HttpErrorCode.NETWORK_ERROR);return r.addAdditionalInfo({libError:e.message}),r}},14656:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),t.post=t.get=void 0;var i=r(62628);Object.defineProperty(t,"get",{enumerable:!0,get:function(){return i.get}});var a=r(68109);Object.defineProperty(t,"post",{enumerable:!0,get:function(){return a.post}}),o(r(39266),t)},68109:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.post=void 0;const n=r(80057);t.post=function(e,t,r={}){return(0,n.httpPostUsingFetch)(e,t,r)}},80057:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.httpPostUsingFetch=void 0;const n=r(87248);t.httpPostUsingFetch=async function(e,t,r={}){const o=(0,n.setTimeoutAbort)();try{const i=r.headers||{},a=function(e,t="application/json"){const r=t.trim().toLowerCase();if(r.startsWith("application/json"))return JSON.stringify(e);if(r.startsWith("application/x-www-form-urlencoded"))return new URLSearchParams(function(e){return"string"==typeof e?e:Object.keys(e).reduce(((t,r)=>{const n=e[r];return void 0===n||(t[r]="string"==typeof n?n:JSON.stringify(n)),t}),{})}(e));if(r.startsWith("multipart/form-data")){const t=new FormData;for(const[r,n]of Object.entries(e))t.append(r,n);return t}if((r.startsWith("text/plain")||r.startsWith("application/x-jsonlines"))&&"string"==typeof e)return e;throw new Error("Unsupported Content-Type for HTTP POST")}(t,i["Content-Type"]),s={method:"POST",headers:i,body:a,credentials:"omit",signal:o},c=await fetch(e,s);if((r.validateStatus&&!r.validateStatus(c.status))??!c.ok){const t=new n.FetchError(`HTTP ${c.status} - ${e}`);throw t.response=c,t}const u=await(0,n.getResponseBody)(c,r.responseType);return{headers:c.headers,data:u,status:c.status,statusText:c.statusText}}catch(e){throw(0,n.getCarbonHttpError)(e,o)}}},36540:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},89021:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getBatch=void 0;const n=r(78912),o=r(59890);t.getBatch=function(e,t,r){const i="zero"===t.startCursor.type?0:(0,o.binaryFindIndex)(r,(r=>(0,n.isAfterTokenStart)(e,t,!1,r)));if(-1===i)return[];const a=r.slice(i),s="infinite"===t.endCursor.type?a.length:(0,o.binaryFindIndex)(a,(r=>(0,n.isAfterTokenEnd)(e,t,!1,r)),t.initialBatchSize),c=-1===s?a.length:s;return a.slice(0,c)}},20553:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getBatch=t.generatePrevToken=t.generateNextToken=t.generateFirstToken=void 0;var n=r(93669);Object.defineProperty(t,"generateFirstToken",{enumerable:!0,get:function(){return n.generateFirstToken}}),Object.defineProperty(t,"generateNextToken",{enumerable:!0,get:function(){return n.generateNextToken}}),Object.defineProperty(t,"generatePrevToken",{enumerable:!0,get:function(){return n.generatePrevToken}});var o=r(89021);Object.defineProperty(t,"getBatch",{enumerable:!0,get:function(){return o.getBatch}})},78912:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isBeforeTokenStart=t.isAfterTokenEnd=t.isBeforeTokenEnd=t.isAfterTokenStart=void 0;const n=r(16516),o=r(35893);function i(e,t){return e>t}function a(e,t){return e<t}function s(e,t){return(0,n.compose)(o.normalizeStringMapper,e[t])}const c=(0,n.curry)((function(e,t,{0:r,1:n}){const{direction:c,field:u}=r,d=s(e,u);return(e=>"ascend"===e?i:a)(c)(d(t),(0,o.normalizeStringMapper)(n))})),u=(0,n.curry)((function(e,t,{0:r,1:n}){const{direction:o,field:c}=r,u=s(e,c);return(e=>"ascend"===e?a:i)(o)(u(t),n)})),d=(0,n.curry)((function(e,t,{0:r,1:n}){const{field:o}=r;return s(e,o)(t)===n}));function l(e){return void 0!==e&&[!0,!1].includes(e)}function p(e){return{direction:"ascend",field:e}}const m=(e,t)=>(r,o,i,a)=>{const{sortCriteria:s,uniqField:m}=o.sortToken,g="start"===t?o.startCursor:o.endCursor;if("zero"===g.type)return"after"===e;if("infinite"===g.type)return"before"===e;const f=d(r,a),S=((e,t)=>r=>r.reduce(((r,n)=>l(r)?r:function(e,t,r){return!!e(r)||!!t(r)&&void 0}(e,t,n)),void 0))("before"===e?u(r,a):c(r,a),f),h=S((0,n.zip)(s,g.sortValues));if(l(h))return h;const y=S([{0:p(m),1:g.uniqValue}]);return l(y)?y:!i};t.isAfterTokenStart=m("after","start"),t.isBeforeTokenEnd=m("before","end"),t.isAfterTokenEnd=m("after","end"),t.isBeforeTokenStart=m("before","start")},33627:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sameBatch=void 0;const n=r(16516);t.sameBatch=function(e,t){return e.length===t.length&&e.every(((e,r)=>(0,n.equals)(t[r],e)))}},93669:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.generateFirstToken=t.generatePrevToken=t.generateNextToken=t.zeroCursor=t.infiniteCursor=void 0;const n=r(16516),o=r(35893),i=r(59890),a=r(78912);function s(e,t,r){return r.sortCriteria.map((r=>{const{field:i}=r;return(0,n.compose)(o.normalizeStringMapper,e[i])(t)}))}function c(e,r,n,o,i){const a=o+n-1;if(a>=i.length-1)return t.infiniteCursor;const c=i[a];return{type:"positional",sortValues:s(e,c,r),uniqValue:String(e[r.uniqField](c))}}function u(e,r,n){const{initialBatchSize:o,startCursor:c,sortToken:u}=r;if("zero"===c.type)throw new Error("Cannot generate cursor before zero start cursor.");const d=(0,i.binaryFindLastIndex)(n,(t=>(0,a.isBeforeTokenStart)(e,r,!0,t)));if(-1===d)return t.zeroCursor;const l=function(e,r,n,o,i){const a=o-n+1;if(a<0)return t.zeroCursor;const c=i[a];return{type:"positional",sortValues:s(e,c,r),uniqValue:String(e[r.uniqField](c))}}(e,u,o,d,n);return l}t.infiniteCursor={type:"infinite"},t.zeroCursor={type:"zero"},t.generateNextToken=function(e,r,n){if("infinite"===r.endCursor.type)return;const o=function(e,r,n){const{initialBatchSize:o,endCursor:s,sortToken:u}=r;if("infinite"===s.type)throw new Error("Cannot generate cursor after infinite end cursor.");const d=(0,i.binaryFindIndex)(n,(t=>(0,a.isAfterTokenEnd)(e,r,!1,t)));return-1===d?t.infiniteCursor:c(e,u,o,d,n)}(e,r,n);return{...r,startCursor:r.endCursor,endCursor:o}},t.generatePrevToken=function(e,t,r){if("zero"===t.startCursor.type)return;const n=u(e,t,r);return{...t,startCursor:n,endCursor:t.startCursor}},t.generateFirstToken=function(e,r,n,o){const{sortToken:i,filterToken:a}=r,s=c(e,i,n,0,o);return{sortToken:i,filterToken:a,initialBatchSize:n,startCursor:t.zeroCursor,endCursor:s}}},4673:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getPlugins=t.setPlugins=void 0;let r={};t.setPlugins=function(e){r=e},t.getPlugins=function(){return r}},60946:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(74211),t),o(r(20378),t)},20378:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setupProbe=void 0;const n=r(16516),o=r(95623);t.setupProbe=(...e)=>(...t)=>{const r={timestamp:Date.now()};(0,n.forEach)(((e,t)=>r=>(0,n.forEach)(((e,t)=>r=>{try{e(r,t)}catch(e){(0,o.logWarn)({message:`Monitor raised an error on announcement ${r.type}`,tag:"Probe",details:{error:e}})}})(r,t),e))(t,r),e)}},74211:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},59865:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.filterData=void 0;const n=r(16516),o=r(2974),i=r(17825);t.filterData=function(e,t,r,a){return r.filterCriteria.reduce(((r,a)=>{const s=function(e,t,r){const{value:a}=r,s=(0,o.normalizeStringMapper)(a),c=t=>(0,n.compose)(o.normalizeStringMapper,e[t]);switch(r.type){case"equals":return e=>c(r.field)(e)===s;case"differs":return e=>c(r.field)(e)!==s;case"matches":return e=>t(s,e);case"in":return e=>{const t=c(r.field)(e);return s.indexOf(t)>-1};case"contains":return e=>{const t=c(r.field)(e);if(!Array.isArray(t))throw new Error("[Query] - filter: expected an array");return t.includes(s)};default:(0,i.assertUnreachable)(r)}}(e,t,a);return r.filter(s)}),a)}},35893:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.normalizeStringMapper=t.queryData=t.sortData=t.filterData=t.stringifyToken=t.parseToken=t.optimizeBatchSelector=t.createOptimizedSortTokenSelector=t.createOptimizedFilterTokenSelector=void 0;var n=r(23736);Object.defineProperty(t,"createOptimizedFilterTokenSelector",{enumerable:!0,get:function(){return n.createOptimizedFilterTokenSelector}}),Object.defineProperty(t,"createOptimizedSortTokenSelector",{enumerable:!0,get:function(){return n.createOptimizedSortTokenSelector}}),Object.defineProperty(t,"optimizeBatchSelector",{enumerable:!0,get:function(){return n.optimizeBatchSelector}});var o=r(54410);Object.defineProperty(t,"parseToken",{enumerable:!0,get:function(){return o.parseToken}}),Object.defineProperty(t,"stringifyToken",{enumerable:!0,get:function(){return o.stringifyToken}});var i=r(59865);Object.defineProperty(t,"filterData",{enumerable:!0,get:function(){return i.filterData}});var a=r(32541);Object.defineProperty(t,"sortData",{enumerable:!0,get:function(){return a.sortData}});var s=r(7994);Object.defineProperty(t,"queryData",{enumerable:!0,get:function(){return s.queryData}});var c=r(2974);Object.defineProperty(t,"normalizeStringMapper",{enumerable:!0,get:function(){return c.normalizeStringMapper}})},2974:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.normalizeStringMapper=void 0;const n=r(16516),o=r(97601),i=(0,n.compose)(o.normalizeString,n.toLower);t.normalizeStringMapper=e=>"string"==typeof e?i(e):Array.isArray(e)?e.map(t.normalizeStringMapper):e},7994:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.queryData=void 0;const n=r(59865),o=r(32541);t.queryData=function(e,t,r,i,a){const s=(0,n.filterData)(e,t,i,a);return(0,o.sortData)(e,r,s)}},23736:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.optimizeBatchSelector=t.createOptimizedFilterTokenSelector=t.createOptimizedSortTokenSelector=void 0;const n=r(16516),o=r(32034);t.createOptimizedSortTokenSelector=(0,o.createSelectorCreator)(o.defaultMemoize,((e,t)=>e.uniqField===t.uniqField&&e.sortCriteria.length===t.sortCriteria.length&&e.sortCriteria.every(((e,r)=>Object.keys(e).every((n=>e[n]===t.sortCriteria[r][n])))))),t.createOptimizedFilterTokenSelector=(0,o.createSelectorCreator)(o.defaultMemoize,((e,t)=>e.filterCriteria.length===t.filterCriteria.length&&e.filterCriteria.every(((e,r)=>Object.keys(e).every((n=>e[n]===t.filterCriteria[r][n]))))));const i=(0,o.createSelectorCreator)(o.defaultMemoize,((e,t)=>e.length===t.length&&e.every(((e,r)=>t[r]===e))));t.optimizeBatchSelector=e=>i(e,n.identity)},32541:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sortData=void 0;const n=r(2974),o=r(16516);function i(e,t){const{direction:r}=t,i=function(e,t){const{field:r}=t;return(0,o.compose)(n.normalizeStringMapper,e[r])}(e,t);return function(e){return"ascend"===e?o.ascend:o.descend}(r)(i)}t.sortData=function(e,t,r){const n=(0,o.compose)(String,e[t.uniqField]),a=[...t.sortCriteria.map((t=>i(e,t))),(0,o.ascend)(n)];return(0,o.sortWith)(a)(r)}},54410:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.stringifyToken=t.parseToken=void 0;const n=r(16038),o=r(93513);t.parseToken=function(e){const t=o.decode(e),r=(0,n.utf8ChunkDecode)(t);return JSON.parse(r)},t.stringifyToken=function(e){if(void 0===e)return"";const t=JSON.stringify(e),r=(0,n.utf8ChunkEncode)(t);return o.encode(r)}},74752:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makeAutoLoginService=t.loadMPFromStorageToStore=t.shouldTrigger=t.createMasterPasswordCipheringKey=t.AUTOLOGIN_EXPIRATION_DATE=void 0;const n=r(57323),o=r(69530),i=r(16038),a=r(16356),s=r(47408),c=r(70252),u=r(95623),d=r(56915),l=r(46298),p=r(16593),m=r(61740),g=r(98226),f=r(93564);t.AUTOLOGIN_EXPIRATION_DATE=1209600,t.createMasterPasswordCipheringKey=()=>(0,o.generateAESKey)();const S=()=>{try{const e=(()=>{const e=(0,f.getWindowLocalStorage)();return n.env.isBrowserEnvironment()&&e?parseInt(e["QA.EXTENSION-1474.expirationTimeSeconds"],10):void 0})();if(Number.isSafeInteger(e)&&e<t.AUTOLOGIN_EXPIRATION_DATE)return e}catch(e){(0,u.logError)(e)}return t.AUTOLOGIN_EXPIRATION_DATE};t.shouldTrigger=async(e,t,r)=>{try{if(t.setInstance(r),e.isAuthenticated())return!1;if(!await(0,m.hasSessionKeysInStorage)(t))return!1;await(0,m.loadSessionKeysToStore)(e,t);const n=(0,d.sessionKeysSelector)(e.getState());return!!(0,m.areSessionKeysValid)(n)&&t.getInstance().doesMasterPasswordExist()}catch(e){if(e.message!==m.RememberMeErrorCode.EMPTY_SESSION_KEYS){const t=new Error(`[Autologin] - shouldTrigger: ${e}`);(0,c.sendExceptionLog)({error:t}),(0,u.logError)(e)}return!1}},t.loadMPFromStorageToStore=async(e,t,r,n)=>{const o=await(0,l.getMasterPasswordCipheringKey)(e,n);if((0,l.isApiError)(o))throw new Error(o.message);t.setInstance({raw:o.rememberMasterPasswordCipheringKey},"");const i=await r.getInstance().getMasterPassword();e.dispatch((0,a.updateMasterPassword)(i))},t.makeAutoLoginService=e=>({initialize:()=>(async e=>{try{const{storeService:r,localStorageService:n}=e;if(!r.isAuthenticated())throw new Error(m.RememberMeErrorCode.USER_NOT_AUTHENTICATED);const o=r.getState(),c=(0,d.deviceKeysSelector)(o),u=(0,d.ukiSelector)(o),f=(0,d.sessionKeysSelector)(o),h=(0,p.userLoginSelector)(o);if(!c||!u)throw new Error(m.RememberMeErrorCode.EMPTY_DEVICE_KEYS);if((0,m.areSessionKeysValid)(f))return;const y=await(0,t.createMasterPasswordCipheringKey)(),v=(0,i.bufferToBase64)(y),E=await(0,l.initRememberMasterPassword)(r,h,{rememberMasterPasswordCipheringKey:v});if((0,l.isApiError)(E))throw new Error(E.code);const A=(0,s.getUnixTimestamp)()+S(),_={accessKey:E.sessionAccessKey,secretKey:E.sessionSecretKey,expirationTimeSeconds:A};r.dispatch((0,a.loadSessionKeys)(_)),await n.getInstance().storeAuthenticationKeys(_),e.autoLoginEncryptorService.setInstance({raw:null,buffer:y},"");const T=(0,p.masterPasswordSelector)(o);await n.getInstance().storeMasterPassword(T),await(0,m.persistLocalAccountRememberMeType)(r,"autologin"),r.dispatch((0,g.setRememberMeTypeAction)("autologin"))}catch(e){const t=new Error(`[Autologin] - initialize: ${e}`);(0,c.sendExceptionLog)({error:t}),(0,u.logError)(t)}})(e),process:r=>(async(e,r)=>{try{const{storeService:n,autoLoginEncryptorService:o,localStorageService:i}=e;if(!await(0,t.shouldTrigger)(n,i,r))return;return await(0,t.loadMPFromStorageToStore)(n,o,i,r)}catch(e){const t=new Error(`[Autologin] - processAutoLogin: ${e}`);(0,c.sendExceptionLog)({error:t}),(0,u.logError)(t)}})(e,r),shouldTrigger:r=>(0,t.shouldTrigger)(e.storeService,e.localStorageService,r)})},93990:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makeWebAuthnAuthenticationService=t.shouldTrigger=void 0;const n=r(16038),o=r(95623),i=r(69530),a=r(56915),s=r(46298),c=r(16593),u=r(16356),d=r(70252),l=r(64910),p=r(61740),m=r(98226);t.shouldTrigger=async(e,t,r)=>{try{if(t.setInstance(r),(0,c.isAuthenticatedSelector)(e.getState()))return!1;if(!await(0,p.hasSessionKeysInStorage)(t))return!1;await(0,p.loadSessionKeysToStore)(e,t);const n=(0,a.sessionKeysSelector)(e.getState());return!!(0,p.areSessionKeysValid)(n)&&t.getInstance().doesMasterPasswordExist()}catch(e){if(e.message!==p.RememberMeErrorCode.EMPTY_SESSION_KEYS){const t=new Error(`[WebAuthnAuthentication] - shouldTrigger: ${e}`);(0,d.sendExceptionLog)({error:t}),(0,o.logError)(t)}return!1}},t.makeWebAuthnAuthenticationService=e=>({initialize:t=>(async(e,t)=>{try{const{storeService:r,localStorageService:o,webAuthnAuthenticationEncryptorService:a}=e,d=r.getState(),g=(0,c.userLoginSelector)(d),f=await(0,i.generate64BytesKey)(),S=(0,n.bufferToBase64)(f),h=atob(S),y=await(0,s.completeRememberMeRegistration)(r,g,{masterPasswordEncryptionKey:S,authenticator:t});if((0,s.isApiError)(y))throw new Error(y.code);const v={accessKey:y.sessionAccessKey,secretKey:y.sessionSecretKey,expirationTimeSeconds:y.sessionExpirationDateUnix};r.dispatch((0,u.loadSessionKeys)(v)),await o.getInstance().storeAuthenticationKeys(v);const E="",A=(0,l.getNoDerivationCryptoConfig)();a.setInstance({raw:h},E,A);const _=(0,c.masterPasswordSelector)(d);return await o.getInstance().storeWebAuthnMasterPassword(_),await(0,p.persistLocalAccountRememberMeType)(r,"webauthn"),r.dispatch((0,m.setRememberMeTypeAction)("webauthn")),!0}catch(e){const t=new Error(`[WebAuthnAuthentication] - initialize: ${e}`);return(0,d.sendExceptionLog)({error:t}),(0,o.logError)(t),!1}})(e,t),process:(t,r)=>(async(e,t,r)=>{try{const{storeService:n,webAuthnAuthenticationEncryptorService:o,localStorageService:i}=e,a=await(0,s.completeRememberMeOpenSession)(n,t,{authenticator:r});if((0,s.isApiError)(a))throw new Error(a.message);const c="",d=(0,l.getNoDerivationCryptoConfig)(),p=a.masterPasswordEncryptionKey,m=atob(p);o.setInstance({raw:m},c,d);const g=await i.getInstance().getWebAuthnMasterPassword();n.dispatch((0,u.updateMasterPassword)(g))}catch(e){const t=new Error(`[WebAuthnAuthentication] - processWebAuthnAuthentication: ${e}`);(0,d.sendExceptionLog)({error:t}),(0,o.logError)(t)}})(e,t,r),shouldTrigger:r=>(0,t.shouldTrigger)(e.storeService,e.localStorageService,r),deactivate:t=>(async(e,t)=>{const{storeService:r,localStorageService:n}=e,o=(0,a.deviceKeysSelector)(r.getState());if(!o)return!1;const i=await(0,s.deactivateRememberMe)(r,t,{deviceAccessKey:o.accessKey});return!(0,s.isApiError)(i)&&(await n.getInstance().cleanAuthenticationKey(),await(0,p.persistLocalAccountRememberMeType)(r,"disabled"),r.dispatch((0,m.setRememberMeTypeAction)("disabled")),!0)})(e,t)})},61740:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.areSessionKeysValid=t.loadSessionKeysToStore=t.hasSessionKeysInStorage=t.shouldAskMasterPassword=t.cleanRememberMeStorageData=t.getLocalAccountRememberMeType=t.persistLocalAccountRememberMeType=t.RememberMeErrorCode=void 0;const n=r(2246),o=r(63739),i=r(25576),a=r(1860),s=r(16356),c=r(47408),u=r(16593),d=r(46298),l=r(56915),p=r(92263),m=r(70252),g=r(95623);var f;!function(e){e.USER_NOT_AUTHENTICATED="USER_NOT_AUTHENTICATED",e.EMPTY_DEVICE_KEYS="EMPTY_DEVICE_KEYS",e.EMPTY_SESSION_KEYS="EMPTY_SESSION_KEYS"}(f=t.RememberMeErrorCode||(t.RememberMeErrorCode={})),t.persistLocalAccountRememberMeType=async(e,t)=>{const{login:r,persistData:o}=e.getAccountInfo();o===i.PersistData.PERSIST_DATA_YES&&await(0,n.storeUserPublicSetting)(r,"rememberMeType",t)},t.getLocalAccountRememberMeType=e=>(0,n.getUserPublicSetting)(e,"rememberMeType"),t.cleanRememberMeStorageData=async(e,r)=>{const n=(0,u.userLoginSelector)(e.getState()),i=[(0,o.removeData)(r,n,"authenticationKeys"),(0,o.removeData)(r,n,"registry"),(0,t.persistLocalAccountRememberMeType)(e,"disabled")];if("disabled"!==(0,l.rememberMeTypeSelector)(e.getState())){const t=new Promise((t=>{(async(e,t)=>{const r=(0,l.deviceKeysSelector)(e.getState());r&&await(0,d.deactivateRememberMe)(e,t,{deviceAccessKey:r.accessKey})})(e,n).then(t).catch((e=>{const r=p.CarbonError.fromAnyError(e).addContextInfo("RememberMe","cleanRememberMeStorageData");(0,g.logError)({message:"Error when deactivating remember me server side"}),(0,m.sendExceptionLog)({error:r}),t()}))}));i.push(t)}await Promise.all(i)},t.shouldAskMasterPassword=e=>{const r=(0,t.getLocalAccountRememberMeType)(e);if(!["autologin","webauthn"].includes(r))return!1;const o=(0,n.getUserPublicSetting)(e,"lastMasterPasswordOpenSessionTimestamp")||void 0;return o?Date.now()-o>12096e5:void 0},t.hasSessionKeysInStorage=async e=>await e.getInstance().doesAuthenticationKeysExist(),t.loadSessionKeysToStore=async(e,r)=>{try{if(!(0,t.hasSessionKeysInStorage)(r))throw new Error(f.EMPTY_SESSION_KEYS);const n=await r.getInstance().getAuthenticationKeys();e.dispatch((0,s.loadSessionKeys)(n))}catch(e){throw e.message.indexOf(a.DATA_TAMPERED_ERROR)>-1&&r.getInstance().cleanAuthenticationKey(),e}},t.areSessionKeysValid=e=>e?.expirationTimeSeconds>(0,c.getUnixTimestamp)()},31937:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.restoreLastAuthenticatedUser=void 0;const n=r(95623),o=r(88610),i=r(70252),a=r(48990),s=r(52968),c=r(35924),u=r(78759);t.restoreLastAuthenticatedUser=async function(e,t){try{const{applicationModulesAccess:r}=e,n=t.find((e=>e.isLastSuccessfulLogin));if(!n||n.hasLoginOtp)return;if(e.storeService.getState().userSession.ssoSettings.ssoUser)return;const i=n.login,d=e.storeService.getState().authentication.localUsers;if(void 0!==d[i]&&d[i].ssoActivatedUser)return void((0,u.disableAutoSSOLoginSelector)(e.storeService.getState())||(e.storeService.dispatch((0,c.updateLoginStepInfoLogin)(i)),"sso"===n.rememberMeType&&r.createClients().authenticationFlow.commands.initiateAutologinWithSSO({login:i??""})));if("webauthn"===n.rememberMeType)return void function({storeService:e}){try{document.featurePolicy.features().includes("publickey-credentials-get")&&e.dispatch((0,a.reactivationStatusUpdated)(s.ReactivationStatus.WEBAUTHN))}catch(t){e.dispatch((0,a.reactivationStatusUpdated)(s.ReactivationStatus.CLASSIC))}}(e);const l=await e.autoLoginService.shouldTrigger(i),p=(0,o.makeLoginController)(e);if(!l)return void p.openSession(i);await e.autoLoginService.process(i);const m=e.storeService.getUserSession().masterPassword;if(!m)return;await p.openSessionWithMasterPassword(i,m,{triggeredByRememberMeType:"autologin"})}catch(e){const t=`[index] - restoreLastAuthenticatedUser: ${e}`,r=new Error(t);(0,n.logError)({message:t,details:{error:r}}),(0,i.sendExceptionLog)({error:r})}}},98416:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makeLocalStorageService=void 0;const n=r(63739);t.makeLocalStorageService=e=>{let t=null;return{setInstance:r=>{t=(0,n.makeUserLocalDataService)(e,r)},getInstance:()=>{if(!t)throw new Error("makeLocalStorageService: You must call setInstance(login: string) before getting the instance");return t}}}},63739:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makeUserLocalDataService=t.deleteAllLocalUserData=t.isDataStored=t.removeData=t.getStorageDebugKey=t.getStorageKey=t.STORAGE_VERSION=t.StoredUserDataTypeEnum=void 0;const n=r(95623),o=r(25576),i=r(41265),a=r(16038),s=r(16593),c=r(19695),u=r(56668),d=r(1110),l=r(93513);t.StoredUserDataTypeEnum=["abTests","authentication","authenticationKeys","eventStore","health","healthWasComputed","icons","localDataBackupLastLoginSuccessful","localDataBackupTmp","localKey","localSettings","notificationsStatus","personalData","personalSettings","recoveryData","recoveryLocalKey","recoverySessionCredential","registry","remoteFileContent","remoteFileMeta","sharingData","sharingSync","teamAdminData","userActivity","vaultReport","analyticsIds","userAutofillCorrections","userAutofillCorrectionsMigrated"],t.STORAGE_VERSION="v1",t.getStorageKey=(e,r,n=t.STORAGE_VERSION)=>`${e}.${r}.${n}`,t.getStorageDebugKey=(e,r,n=t.STORAGE_VERSION)=>(0,t.getStorageKey)(e,r,n)+".clear";const p=(e,t)=>`${e}.${t}`,m=async(e,t,r)=>{const n=await e.getLocalStorage().readItem(r);if("string"!=typeof n||0===n.length)throw new Error(`value ${t} undefined`);return n},g=async(e,r,i,s)=>{const c=r.getLocalStorage(),d=(0,t.getStorageKey)(i,s);if(await c.itemExists(d))return(async(e,t,r,n)=>{const o=await m(t,r,n),i=await e.getInstance().decrypt(o),a=(0,u.inflateUtf16)(i);return JSON.parse(a)})(e,r,s,d);const g=p(i,s);if(await c.itemExists(g))return(async(e,t,r,i)=>{const s=await m(t,r,i),c=await e.getInstance().decrypt(s),d=(0,u.deflatedUtf8ToUtf16)(c,{skipUtf8Decoding:!0});if(0===d.length)throw new Error(o.AuthenticationCode[o.AuthenticationCode.WRONG_PASSWORD]);const p=l.decode(d);try{const e=(0,a.utf8ChunkDecode)(p);return JSON.parse(e)}catch(e){return n.default.log(e),p}})(e,r,s,g);const f=new Error("value "+s+" undefined");throw n.default.error(f),f},f=async(e,r,o,a,s)=>{try{const n=e.getLocalStorage(),c=(0,t.getStorageKey)(r,a);if(await n.writeItem(c,o),(0,i.isInternalTestUser)(r)&&s){const n=(0,t.getStorageDebugKey)(r,a);await e.getLocalStorage().writeItem(n,s)}}catch(e){const t=new Error(`[storeData] failed for dataType: ${a} with error: ${e}`);throw n.default.error(t),t}},S=async(e,t,r,n,o)=>{const i=JSON.stringify(n),a=(0,u.deflateUtf16)(i),s=await e.getInstance().encrypt(a);await f(t,r,s,o,n)};t.removeData=async(e,r,n)=>{const o=(0,t.getStorageKey)(r,n),a=p(r,n),s=(0,t.getStorageDebugKey)(r,n),c=((e,t)=>p(e,t)+".clear")(r,n),u=e.getLocalStorage(),d=[u.removeItem(o),u.removeItem(a),...(0,i.isInternalTestUser)(r)?[u.removeItem(s),u.removeItem(c)]:[]];await Promise.all(d)},t.isDataStored=async(e,r,n)=>{const o=e.getLocalStorage(),i=(0,t.getStorageKey)(r,n);if(await o.itemExists(i))return!0;const a=p(r,n);return await o.itemExists(a)},t.deleteAllLocalUserData=async function(e,r,n){const o=n.trim();await Promise.all([...t.StoredUserDataTypeEnum,...d.FileNamesList].map((async r=>{await(0,t.removeData)(e,o,r)}))),await async function(e,t){await e.commands.mitigationDeleteGrapheneUserData({login:t})}(r.createClients()["carbon-legacy"],n)},t.makeUserLocalDataService=(e,r)=>{const o=()=>{const{storeService:t,masterPasswordEncryptorService:r,localDataEncryptorService:n}=e;return(0,s.isLocalKeyActivatedSelector)(t.getState())?n:r};return{storePersonalData:t=>S(o(),e.storageService,r,t,"personalData"),getPersonalData:()=>(n.default.log("Load Personal Data"),g(o(),e.storageService,r,"personalData")),doesPersonalDataExist:()=>(n.default.log("Check Personal Data existence"),(0,t.isDataStored)(e.storageService,r,"personalData")),storeLocalSettings:t=>S(o(),e.storageService,r,t,"localSettings"),getLocalSettings:()=>(n.default.log("Load Local Settings"),g(o(),e.storageService,r,"localSettings")),storePersonalSettings:t=>S(o(),e.storageService,r,t,"personalSettings"),getPersonalSettings:()=>(n.default.log("Load Personal Settings"),g(o(),e.storageService,r,"personalSettings")),storeNotificationsStatus:t=>S(o(),e.storageService,r,t,"notificationsStatus"),doesNotificationStatusExist:()=>(n.default.log("Check Notification Status existence"),(0,t.isDataStored)(e.storageService,r,"notificationsStatus")),getNotificationStatus:()=>(n.default.log("Load Notifications Status"),g(o(),e.storageService,r,"notificationsStatus")),storeSharingData:t=>S(o(),e.storageService,r,t,"sharingData"),getSharingData:()=>(n.default.log("Load Sharing Data"),g(o(),e.storageService,r,"sharingData")),storeSharingSync:t=>S(o(),e.storageService,r,t,"sharingSync"),getSharingSync:()=>(n.default.log("Load Sharing Sync"),g(o(),e.storageService,r,"sharingSync")),doesSharingSyncExist:()=>(0,t.isDataStored)(e.storageService,r,"sharingSync"),storeTeamAdminData:t=>S(o(),e.storageService,r,t,"teamAdminData"),getTeamAdminData:()=>(n.default.log("Load Team Admin Data"),g(o(),e.storageService,r,"teamAdminData")),storeAuthenticationKeys:t=>S(e.authorizationKeysEncryptorService,e.storageService,r,t,"authenticationKeys"),getAuthenticationKeys:()=>(n.default.log("Load Authentication Keys"),g(e.authorizationKeysEncryptorService,e.storageService,r,"authenticationKeys").then((e=>e))),doesAuthenticationKeysExist:()=>(n.default.log("Check Authentication Keys existence"),(0,t.isDataStored)(e.storageService,r,"authenticationKeys")),cleanAuthenticationKey:()=>(0,t.removeData)(e.storageService,r,"authenticationKeys"),storeAuthenticationData:t=>S(o(),e.storageService,r,t,"authentication"),getAuthenticationData:()=>g(o(),e.storageService,r,"authentication"),hasAuthenticationData:()=>(0,t.isDataStored)(e.storageService,r,"authentication"),doesMasterPasswordExist:()=>(n.default.log("Check Master Password Keys existence"),(0,t.isDataStored)(e.storageService,r,"registry")),getMasterPassword:()=>(n.default.log("Load Master Password via Auto login"),g(e.autoLoginEncryptorService,e.storageService,r,"registry")),storeMasterPassword:t=>(n.default.log("Store Master Password via Auto login"),S(e.autoLoginEncryptorService,e.storageService,r,t,"registry")),getWebAuthnMasterPassword:()=>(n.default.log("Load Master Password via WebAuthn login"),g(e.webAuthnAuthenticationEncryptorService,e.storageService,r,"registry")),storeWebAuthnMasterPassword:t=>(n.default.log("Store Master Password via WebAuthn login"),S(e.webAuthnAuthenticationEncryptorService,e.storageService,r,t,"registry")),getLocalKey:()=>g(e.masterPasswordEncryptorService,e.storageService,r,"localKey"),doesLocalKeyExist:()=>(0,t.isDataStored)(e.storageService,r,"localKey"),storeLocalKey:t=>S(e.masterPasswordEncryptorService,e.storageService,r,t,"localKey"),doesLocalDataExist:()=>Promise.all(["localSettings","personalData","personalSettings"].map((n=>(0,t.isDataStored)(e.storageService,r,n)))).then((e=>e.every((e=>e)))),storeUserABTests:t=>S(o(),e.storageService,r,t,"abTests"),getUserABTests:()=>(n.default.log("Load User AB Tests"),g(o(),e.storageService,r,"abTests")),storeIcons:async t=>{const n=(0,c.iconsToStorage)(t);return S(o(),e.storageService,r,n,"icons")},getIcons:async()=>{if(!await(0,t.isDataStored)(e.storageService,r,"icons"))return null;const n=await g(o(),e.storageService,r,"icons");return(0,c.iconsFromStorage)(n)},doesUserActivityExist:()=>(0,t.isDataStored)(e.storageService,r,"userActivity"),storeUserActivity:()=>S(o(),e.storageService,r,{},"userActivity"),getUserActivity:()=>g(o(),e.storageService,r,"userActivity"),doesVaultReportExist:()=>(0,t.isDataStored)(e.storageService,r,"vaultReport"),storeVaultReport:t=>S(o(),e.storageService,r,t,"vaultReport"),getVaultReport:()=>g(o(),e.storageService,r,"vaultReport"),storeEventStore:t=>S(o(),e.storageService,r,t,"eventStore"),getEventStore:async()=>await(0,t.isDataStored)(e.storageService,r,"eventStore")?g(o(),e.storageService,r,"eventStore"):null,storeRecoveryLocalKey:async t=>{const n=e.storageService;return f(n,r,t,"recoveryLocalKey")},getRecoveryLocalKey:async()=>{const n=(0,t.getStorageKey)(r,"recoveryLocalKey");return await m(e.storageService,"recoveryLocalKey",n)},storeRecoverySessionCredential:t=>S(o(),e.storageService,r,t,"recoverySessionCredential"),getRecoverySessionCredential:async()=>g(o(),e.storageService,r,"recoverySessionCredential"),doesRecoverySessionCredentialExist:async()=>(0,t.isDataStored)(e.storageService,r,"recoverySessionCredential"),cleanRecoverySetupData:async()=>{const n=e.storageService;return await(0,t.removeData)(n,r,"recoverySessionCredential"),await(0,t.removeData)(n,r,"recoveryLocalKey")},doesRecoveryLocalKeyExist:async()=>(0,t.isDataStored)(e.storageService,r,"recoveryLocalKey"),cleanRecoveryData:async()=>{const n=e.storageService;return await(0,t.removeData)(n,r,"recoveryData")},storeRecoveryData:async t=>{const n=e.storageService;return await f(n,r,t,"recoveryData")},getRecoveryData:async()=>{const n=(0,t.getStorageKey)(r,"recoveryData");return await m(e.storageService,"recoveryData",n)},doesRecoveryDataExist:()=>(0,t.isDataStored)(e.storageService,r,"recoveryData"),storeAnalyticsIds:t=>S(o(),e.storageService,r,t,"analyticsIds"),getAnalyticsIds:()=>((0,n.log)({message:"Load Analytics IDs"}),g(o(),e.storageService,r,"analyticsIds")),doesAnalyticsIdsExist:()=>((0,n.log)({message:"Check Analytics IDs existence"}),(0,t.isDataStored)(e.storageService,r,"analyticsIds")),storeRemoteFileContent:(t,n)=>S(o(),e.storageService,r,n,t),storeRemoteFileMeta:t=>S(o(),e.storageService,r,t,"remoteFileMeta"),getRemoteFileMeta:()=>g(o(),e.storageService,r,"remoteFileMeta"),getRemoteFileContent:t=>g(o(),e.storageService,r,t),cleanAllRemoteFiles:async()=>{const n=e.storageService;await(0,t.removeData)(n,r,"remoteFileMeta");for(const e of d.FileNamesList)await(0,t.removeData)(n,r,e)},cleanSingleFileStorage:async n=>{const i=e.storageService;await(0,t.removeData)(i,r,n);const a=await g(o(),e.storageService,r,"remoteFileMeta");return delete a[n],S(o(),e.storageService,r,a,"remoteFileMeta")},isRemoteFileMetaDataExist:()=>(0,t.isDataStored)(e.storageService,r,"remoteFileMeta"),isRemoteFileContentExist:n=>(0,t.isDataStored)(e.storageService,r,n)}}},18539:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makeStorageService=t.CarbonLocalStorage=void 0;const n=r(95623);t.CarbonLocalStorage=class{constructor(e){this._storage=e}itemExists(e){return this._storage.itemExists(e)}readItem(e){return this._storage.readItem(e)}async writeItem(e,t){const r=await this.backupItem(e);try{await this._storage.writeItem(e,t),r&&await r.clean()}catch(e){n.Debugger.error("CarbonLocalStorage:writeItem error:",e),r?(n.Debugger.error("CarbonLocalStorage couldn't save data, reverting to backup version"),await r.restoreAndClean()):n.Debugger.error("CarbonLocalStorage couldn't save data and no backup version to restore")}}removeItem(e){return this._storage.removeItem(e)}async getSuitableBackupKey(e){const t=t=>e+"."+t;let r=1;for(;await this._storage.itemExists(t(r));)r++;return t(r)}async backupItem(e){if(!await this._storage.itemExists(e))return null;const t=await this.getSuitableBackupKey(e),r=await this._storage.readItem(e);await this._storage.writeItem(t,r);const n=this._storage;async function o(){return await n.removeItem(t)}return{clean:o,restoreAndClean:async function(){const r=await n.readItem(t);return await n.writeItem(e,r),await o()}}}},t.makeStorageService=()=>{let e=null;return{setInstance:t=>{e=t},getLocalStorage:()=>{if(!e)throw new Error("makeStorageService: You must call setInstance(instance: AsyncStorage) before getting the instance");return e}}}},97601:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.normalizeString=void 0,t.normalizeString=e=>e.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase()},45570:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getStyxApiCredentials=void 0;const n=r(45956),o=r(39261);t.getStyxApiCredentials=function(e,t){if(t.authenticationType!==n.ApiAuthType.App)return{type:n.ApiAuthType.None};const r={appKeys:(0,o.styxKeysSelector)(e)};return{type:n.ApiAuthType.App,...r}}},76330:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getApiClientAgentHeader=t.getMakeStyxApiRequest=t.getEventsPayload=void 0;const n=r(56915),o=r(55730),i=r(45956),a=r(47408),s=r(48749),c=r(14656),u=r(17825),d=r(45570),l=r(41265),p=r(30913),m=r(59600),g=r(78577);function f(e){return JSON.stringify({platform:e.platformName,version:e.appVersion})}t.getEventsPayload=function(e){return e.map((e=>JSON.stringify(e))).join("\n")},t.getMakeStyxApiRequest=function(e,t,r){return async(S,h)=>{const y={login:"",teamUuid:"",payload:"",...h||{}},v=(0,o.getMethodParams)(r,y.payload),E=(0,o.getAuthParams)(t,{login:y.login,teamUuid:y.teamUuid}),A="POST"===v.method?v.payload:"",_=(0,n.dashlaneServerDeltaTimestampSelector)(S.getState())||0,T=Math.round((0,a.getUnixTimestamp)()-_),I=(0,d.getStyxApiCredentials)(S.getState(),E),b=(0,n.platformInfoSelector)(S.getState()),w={"Content-Type":"application/x-jsonlines","X-TIMESTAMP":T.toString()},C={"dashlane-client-agent":f(b)},D=function(e){const t=e.getAccountInfo().login,r=t&&(0,l.isInternalTestUser)(t),n=(0,p.applicationBuildTypeSelector)(e.getState()),o=n===m.ApplicationBuildType.DEV||n===m.ApplicationBuildType.QA;return r||o}(S);D&&(w["X-DL-TEST"]="true");const O=Object.keys(C),P=await async function(e,t,r,o,s,c){if(r.type===i.ApiAuthType.None)return{};const u=(0,n.dashlaneServerDeltaTimestampSelector)(e.getState())||0,d=Math.round((0,a.getUnixTimestamp)()-u),l={pathname:t,method:"POST",rawBody:c,headers:o};return{Authorization:await(0,g.signRequest)({request:l,timestamp:d,credentials:r,headersToSign:s})}}(S,e,I,{...C,...w},O,A),N={...C,...P,...w},R=`${s.config.DASHLANE_STYX_HOST_WITH_SCHEME}${e}`,{data:M}=await function(e,t,r){const n={headers:r,validateStatus:o.validateStatus};switch(e.method){case i.ApiRequestMethod.GET:return(0,c.get)(t,n);case i.ApiRequestMethod.POST:return(0,c.post)(t,e.payload,n);default:(0,u.assertUnreachable)(e)}}(v,R,N);return M}},t.getApiClientAgentHeader=f},72636:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SendTokenStatus=t.makeWSAuthentication=void 0;const n=r(66646),o="authentication";var i;function a(e){if("string"!=typeof e){const t=JSON.stringify(e);throw new Error(`unsupported_response - ${t}`)}}t.makeWSAuthentication=()=>({askServerToSendToken:e=>function(e){return(0,n._makeRequest)(o,7,"sendtoken",e,{responseType:"text"}).then((e=>{if(a(e),void 0===i[e])throw new Error(`unknown_status - ${e}`);return i[e]}))}(e),registerUki:e=>function(e){return(0,n._makeRequest)(o,7,"registeruki",e,{responseType:"text"}).then((e=>{if(a(e),"ERROR"===e)throw new Error("Error: Failed to register the UKI");return e}))}(e),getTemporaryToken:e=>function(e){return(0,n._makeRequest)(o,7,"getTemporaryToken",e).then((e=>(a(e.token),e.token)))}(e),validity:e=>function(e){return(0,n._makeRequest)(o,7,"validity",e,{responseType:"text"})}(e)}),function(e){e[e.ERROR=0]="ERROR",e[e.SUCCESS=1]="SUCCESS",e[e.OTP_NEEDED=2]="OTP_NEEDED",e[e.UNKNOWN_USER=3]="UNKNOWN_USER"}(i=t.SendTokenStatus||(t.SendTokenStatus={}))},32239:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makeWSBackup=void 0;const n=r(66646),o="backup";t.makeWSBackup=()=>({latest:e=>i(e),upload:e=>a(e),unlock:e=>s(e),erase:e=>c(e)});const i=e=>(0,n._makeRequest)(o,12,"latest",Object.assign({},e,{sharingTimestamp:0})),a=e=>(0,n._makeRequest)(o,12,"upload",e),s=e=>(0,n._makeRequest)(o,12,"unlock",e),c=e=>(0,n._makeRequest)(o,12,"erase",e)},33633:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makeWSBreaches=void 0;const n=r(66646);t.makeWSBreaches=()=>({get:e=>(0,n._makeRequest)("breaches",1,"get",e)})},5692:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makeWSContactInfo=void 0;const n=r(66646);t.makeWSContactInfo=()=>({getContactInfo:e=>function(e){return(0,n._makeRequest)("contactinfos",1,"get",{login:e.login,uki:e.uki})}(e)})},69376:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makeWSCountry=void 0;const n=r(66646);t.makeWSCountry=()=>({getCurrentCountry:(e={})=>function(e){return(0,n._makeRequest)("country",1,"get",e).then((e=>e.content))}(e)})},32868:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makeWSDataLeaks=void 0;const n=r(28445),o=r(92263),i=r(20750),a=r(48749),s="dataleak",c=1;function u(e){return l(s,c,"status",e)}function d(e){return l(s,c,"leaks",e)}async function l(e,t,r,s){const c=`${a.config.DASHLANE_WS_HOST_WITH_SCHEME}/${t}/${e}/${r}`,{data:u}=await(0,n.postDataToUrl)(c,s);return function(e,t){if(429===t.code||t.error&&-32600===t.error.code)throw new o.CarbonError(i.WSError,i.WSErrorCode.THROTTLED).addAdditionalInfo({webService:e});return t}(c,u)}t.makeWSDataLeaks=()=>({status:u,leaks:d})},35595:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makeWSDevices=void 0;const n=r(66646),o="devices";t.makeWSDevices=()=>({list:e=>i(e),deactivate:e=>a(e),changeName:e=>s(e)});const i=e=>(0,n._makeRequest)(o,1,"list",{login:e.login,uki:e.uki}).then((e=>e.content)),a=e=>(0,n._makeRequest)(o,1,"deactivate",{login:e.login,uki:e.uki,deviceId:e.deviceId}),s=e=>(0,n._makeRequest)(o,1,"changename",{login:e.login,uki:e.uki,deviceId:e.deviceId,updatedName:e.updatedDeviceName})},20750:(e,t)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.WSError=t.WSErrorMessages=t.WSErrorCode=void 0,function(e){e[e.THROTTLED=0]="THROTTLED",e[e.REQUEST_FAILED=1]="REQUEST_FAILED"}(r=t.WSErrorCode||(t.WSErrorCode={})),t.WSErrorMessages={[r.THROTTLED]:"THROTTLED",[r.REQUEST_FAILED]:"WebService responded with error code in payload"},t.WSError={codes:r,name:"WSError",messages:t.WSErrorMessages}},56776:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makeWSIconCrawler=void 0;const n=r(66646);t.makeWSIconCrawler=()=>({getIcons:o});const o=async e=>(0,n._makeRequest)("iconcrawler",2,"getIcons",{domainsInfo:e})},1577:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NewCardToken=void 0;const n=r(66646);t.NewCardToken=function(e,t){return(0,n._makeRequest)(t.name,t.version,"getNewCardToken",{login:e.login,uki:e.uki,teamId:e.teamId??null})}},87327:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makeWSPremium=void 0;const n=r(66646),o="premium";t.makeWSPremium=()=>({status:e=>function(e){return(0,n._makeRequest)(o,3,"status",{login:e.login,uki:e.uki,billingInformation:e.billingInformation,spaces:e.spaces,autoRenewal:e.autoRenewal,familyInformation:e.familyInformation,previousPlan:e.previousPlan,needsAutoRenewalFailed:e.needsAutoRenewalFailed,teamInformation:!1,capabilities:!0}).then((e=>{if(!e.success)throw new Error("failed fetching premium status");return e.hasOwnProperty("billingInformation")&&(e.billingInformation=function(e){if(e)return{cardExpirationYear:Number(e.card_exp_year),cardExpirationMonth:Number(e.card_exp_month),cardLast4Digits:Number(e.card_last4),cardType:e.card_type}}(e.billingInformation)),e}))}(e),setAutoRenewal:e=>function(e){return(0,n._makeRequest)(o,3,"setAutoRenewal",{login:e.login,uki:e.uki,enabled:e.enabled})}(e),updateCardToken:e=>function(e){return(0,n._makeRequest)(o,3,"updateCardToken",{login:e.login,uki:e.uki,tokenId:e.tokenId,stripeAccount:e.stripeAccount})}(e),getABTestingVersionDetails:e=>function(e){return(0,n._makeRequest)(o,3,"getABTestingVersionDetails",e)}(e),getSubscriptionCode:e=>function({login:e,uki:t}){return(0,n._makeRequest)(o,3,"getSubscriptionCode",{login:e,uki:t})}(e)})},55898:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makeWSQA=void 0;const n=r(66646);t.makeWSQA=()=>({tokens:e=>function(e){return(0,n._makeRequest)("qa",1,"tokens",e)}(e)})},56692:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makeWSRecovery=void 0;const n=r(66646),o="recovery";t.makeWSRecovery=()=>({getSetupRequisites:e=>async function(e){return(0,n._makeRequest)(o,1,"getSetupRequisites",e)}(e),setRecoveryClientKeys:e=>async function(e){return(0,n._makeRequest)(o,1,"setRecoveryClientKeys",e)}(e),request:e=>async function(e){return(0,n._makeRequest)(o,1,"request",e)}(e),getPendingRequests:e=>async function(e){const{content:t}=await(0,n._makeRequest)(o,1,"getPendingRequests",e);return t}(e),acceptRequest:e=>async function(e){return(0,n._makeRequest)(o,1,"accept",e)}(e),refuseRequest:e=>async function(e){return(0,n._makeRequest)(o,1,"refuse",e)}(e),cancelRequest:e=>async function(e){return(0,n._makeRequest)(o,1,"cancel",e)}(e)})},90732:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makeWSSecureFile=void 0;const n=r(66646),o=1,i="securefile";function a(e){return(0,n._makeRequest)(i,o,"getDownloadLink",e)}function s(e){return(0,n._makeRequest)(i,o,"delete",e)}function c(e){return(0,n._makeRequest)(i,o,"getUploadLink",e)}function u(e){return(0,n._makeRequest)(i,o,"commit",e)}t.makeWSSecureFile=()=>({getDownloadLink:a,getUploadLink:c,commit:u,delete:s})},66696:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setTeamSettings=t.getTeamSettings=t.makeWSSettings=void 0;const n=r(66646),o=1,i="teamPlans";function a(e){return(0,n._makeRequest)(i,o,"status",e)}function s(e){return(0,n._makeRequest)(i,o,"editSettings",e)}t.makeWSSettings=()=>({getTeamSettings:e=>a(e),setTeamSettings:e=>s(e)}),t.getTeamSettings=a,t.setTeamSettings=s},64528:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makeSharingWS=t.get=void 0;const n=r(66646),o=2,i="sharing";function a(e,t,r){const a={login:e,uki:t,action:JSON.stringify(r)};return(0,n._makeRequest)(i,o,"get",a).then((({content:e})=>e))}t.get=a,t.makeSharingWS=()=>({get:(e,t,r)=>a(e,t,r)})},98892:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makeItemWS=void 0;const n=r(66646);t.makeItemWS=()=>({updateItem:(e,t,r)=>function(e,t,r){const o={login:e,uki:t,action:JSON.stringify(r)};return(0,n._makeRequest)("sharing",2,"performItemGroupAction",o).then((e=>{const t=e.content,r=t.itemErrors;if(r&&r.length>0)throw new Error(r[0].message);return t}))}(e,t,r)})},63698:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makeItemGroupWS=void 0;const n=r(66646),o=2,i="sharing",a="performItemGroupAction";function s(e,t,r){const s={login:e,uki:t,action:JSON.stringify(r)};return(0,n._makeRequest)(i,o,a,s).then((e=>{const t=e.content,r=t.itemGroupErrors;if(r&&r.length>0)throw new Error(r[0].message);const{itemGroups:n,items:o}=t;return{itemGroups:n,items:o}}))}t.makeItemGroupWS=()=>({createSpecialItemGroup:(e,t,r)=>s(e,t,r).then((({itemGroups:e})=>e&&e[0])),createItemGroup:s,deleteGroup:(e,t,r)=>s(e,t,r),addItems:(e,t,r)=>s(e,t,r),updateItem:(e,t,r)=>s(e,t,r),removeItems:(e,t,r)=>s(e,t,r),acceptItemGroup:s,refuseItemGroup:s,inviteItemGroupMembers:s,revokeItemGroupMembers:s,updateItemGroupMembers:s})},52931:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makeUserGroupWS=void 0;const n=r(66646),o=1,i="userGroup",a="performUserGroupAction";function s(e,t,r){const s={login:e,uki:t,action:JSON.stringify(r)};return(0,n._makeRequest)(i,o,a,s).then((e=>{const{itemGroups:t,items:r,userGroupErrors:n,userGroups:o}=e.content;if(n&&n.length>0)throw new Error(n[0].message);return{itemGroups:t,items:r,userGroups:o}}))}t.makeUserGroupWS=()=>({create:(e,t,r)=>s(e,t,r),delete:(e,t,r)=>s(e,t,r),rename:(e,t,r)=>s(e,t,r),invite:(e,t,r)=>s(e,t,r),revoke:(e,t,r)=>s(e,t,r),update:(e,t,r)=>s(e,t,r),accept:(e,t,r)=>s(e,t,r),refuse:(e,t,r)=>s(e,t,r)})},12832:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CheckChangePasswordStatus=t.makeWSStrongAuth=void 0;const n=r(66646),o=r(95623);var i;t.makeWSStrongAuth=()=>({checkChangeMasterPassword:e=>function({login:e,otp:t,deviceId:r}){return(0,n._makeRequest)("strongauth",3,"getServerKey",{login:e,otp:t,deviceID:r,isMxAware:!0}).then((e=>{if(o.default.log("checkChangeMasterPassword: "+(e?JSON.stringify(e):"response null")),!e||!e.message)throw new Error("Unknown response from server");if(void 0===i[e.message])throw new Error(`unknown_message - ${JSON.stringify(e)}`);return{status:i[e.message],content:e.content}}))}(e)}),function(e){e[e.Unauthorized=0]="Unauthorized",e[e.OK=1]="OK"}(i=t.CheckChangePasswordStatus||(t.CheckChangePasswordStatus={}))},42883:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makeWSTeamPlans=void 0;const n=r(66646),o="teamPlans";t.makeWSTeamPlans=()=>({findUserGroups:e=>function(e){return(0,n._makeRequest)(o,1,"findUserGroups",e)}(e),proposeMembers:e=>function(e){return(0,n._makeRequest)(o,1,"proposeMembers",e)}(e),acceptTeam:e=>function(e){return(0,n._makeRequest)(o,1,"acceptTeam",e)}(e),addTeamAdmin:e=>function(e){return(0,n._makeRequest)(o,1,"addTeamCaptain",e)}(e),removeTeamAdmin:e=>function(e){return(0,n._makeRequest)(o,1,"removeTeamCaptain",e)}(e),registerFreeTrial:e=>function(e){return(0,n._makeRequest)(o,1,"registerFreeTrial",e)}(e),confirmFreeTrial:e=>function(e){return(0,n._makeRequest)(o,1,"confirmFreeTrial",e)}(e),getDirectorySyncRequest:e=>function(e){return(0,n._makeRequest)(o,1,"getDirectorySyncRequest",e)}(e),updateDirectorySyncRequestStatus:e=>function(e){return(0,n._makeRequest)(o,1,"updateDirectorySyncRequestStatus",e)}(e),spaceDeleted:e=>function(e){return(0,n._makeRequest)(o,1,"spaceDeleted",e)}(e)})},85870:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.create=t.makeWSUserActivity=void 0;const n=r(66646),o="useractivity",i=2;async function a(e){return await(0,n._makeRequest)(o,i,"create",e)}t.makeWSUserActivity=()=>({create:a}),t.create=a},50141:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makeWSUserAlias=void 0;const n=r(66646);t.makeWSUserAlias=()=>({findUsersByAliases:e=>function(e){return(0,n._makeRequest)("userAlias",1,"findUsers",{login:e.login,uki:e.uki,aliases:e.aliases}).then((e=>e.content))}(e)})},32607:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isWSResponseSuccess=void 0,t.isWSResponseSuccess=function(e){return 200===e.code}},89016:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makeWSService=void 0;const n=r(72636),o=r(5692),i=r(69376),a=r(32868),s=r(35595),c=r(87327),u=r(56692),d=r(12832),l=r(42883),p=r(50141),m=r(66696),g=r(63698),f=r(55898),S=r(64528),h=r(32239),y=r(33633),v=r(52931),E=r(85870),A=r(56776),_=r(90732);t.makeWSService=()=>({authentication:(0,n.makeWSAuthentication)(),backup:(0,h.makeWSBackup)(),breaches:(0,y.makeWSBreaches)(),contactInfo:(0,o.makeWSContactInfo)(),country:(0,i.makeWSCountry)(),dataleaks:(0,a.makeWSDataLeaks)(),devices:(0,s.makeWSDevices)(),iconCrawler:(0,A.makeWSIconCrawler)(),itemGroup:(0,g.makeItemGroupWS)(),premium:(0,c.makeWSPremium)(),recovery:(0,u.makeWSRecovery)(),settings:(0,m.makeWSSettings)(),strongAuth:(0,d.makeWSStrongAuth)(),teamPlans:(0,l.makeWSTeamPlans)(),userAlias:(0,p.makeWSUserAlias)(),sharing:(0,S.makeSharingWS)(),userGroup:(0,v.makeUserGroupWS)(),qa:(0,f.makeWSQA)(),userActivity:(0,E.makeWSUserActivity)(),secureFile:(0,_.makeWSSecureFile)()})},66646:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t._makeRequest=t.WsError=void 0;const n=r(28445),o=r(92263),i=r(45800),a=r(20750),s=r(48749);!function(e){e[e.THROTTLED=-999]="THROTTLED"}(t.WsError||(t.WsError={})),t._makeRequest=function(e,t,r,c,u){const d=`${s.config.DASHLANE_WS_HOST_WITH_SCHEME}/${t}/${e}/${r}`,l={...u,headers:{...(0,i.getCloudflareHeaders)()}};return(0,n.postDataToUrl)(d,c,l).then((e=>{const t="string"==typeof e?e:e.data;return function(e,t){if("string"==typeof t)return t;if(429===t.code||t.error&&-32600===t.error.code)throw new o.CarbonError(a.WSError,a.WSErrorCode.THROTTLED).addAdditionalInfo({webService:e});if("code"in t&&200!==t.code||"success"in t&&!t.success||"error"in t&&t.error)throw new o.CarbonError(a.WSError,a.WSErrorCode.REQUEST_FAILED).addAdditionalInfo({webService:e,message:t.message,webServiceSubMessage:t.content?.message||t.content?.error||t.content,code:t.code});return t}(d,t)}))}},61384:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.freeWorker=t.getWorker=t.getWorkerPath=t.setWorkerPath=t.setWorkersPath=void 0;const n=r(57323);let o={};t.setWorkersPath=function(e){o=e},t.setWorkerPath=function(e,t){o[e]=t},t.getWorkerPath=function(e){return o[e]};const i=[],a=[];function s(e){const t=new Worker(e);return i.push(t),t}t.getWorker=function(e){return new Promise((t=>{i.length<function(){const e=n.navigator.getNavigator();return e&&e.hardwareConcurrency?e.hardwareConcurrency:4}()?t(s(e)):a.push({resolve:t,path:e})}))},t.freeWorker=function(e){const t=i.indexOf(e);if(t<0)console.error("freeWorker: trying to terminate a worker that does not exist");else if(e.terminate(),i.splice(t,1),a.length>0){const{resolve:e,path:t}=a.shift();e(s(t))}}},81885:(e,t)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.KWXMLError=t.KWXMLErrorMessages=t.KWXMLErrorCode=void 0,function(e){e[e.PARSING_FAILED=0]="PARSING_FAILED"}(r=t.KWXMLErrorCode||(t.KWXMLErrorCode={})),t.KWXMLErrorMessages={[r.PARSING_FAILED]:"Failed to parse Dashlane XML"},t.KWXMLError={codes:r,name:"KWXMLError",messages:t.KWXMLErrorMessages}},61797:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.findAllKWXMLElementsOfType=t.removeNamespace=t.getDashlaneXml=t.parseDashlaneXml=void 0;const n=r(16516),o=r(44015),i=r(92263),a=r(81885),s=r(54218),c=r(51104),u=r(63985);function d(e){const t={KWAuthentifiant:u.fixCredentialTypesFromStore,KWSecureNote:u.fixNoteTypesFromStore,KWSecurityBreach:u.fixBreachTypesFromStore,KWSettingsManagerApp:c.fixPersonalSettingTypes.fromStore};let r=(0,n.compose)((0,n.reject)(n.isNil),(0,n.omit)((0,n.defaultTo)([],{KWAuthentifiant:["domainIcon"],KWSettingsManagerApp:["kwType","LastBackupTime","Id"]}[e.kwType])))(function(e,t){return function t(r){return(0,s.default)(r)?Object.keys(r).reduce(((o,i)=>{const a=e[i]||i,c=r[i];return Array.isArray(c)?o[a]=c.map((0,n.unary)(t)):(0,s.default)(c)?o[a]=t(c):o[a]=c,o}),{}):r}(t)}({kwType:"__type__"},e));return t[e.kwType]&&(r=t[e.kwType](r)),r}function l(e){if(e.includes(":")){const t=e.indexOf(":");return e.substring(t+1,e.length)}return e}t.parseDashlaneXml=async function(e){try{return await new Promise(((t,r)=>{(0,o.parseXml)(((e,n)=>e?r(e):t(n)),e,{fixType:!1})}))}catch(e){throw new i.CarbonError(a.KWXMLError,a.KWXMLErrorCode.PARSING_FAILED).addAdditionalInfo({libError:`${e}`})}},t.getDashlaneXml=function(e){const t=Array.isArray(e)?(0,n.map)(d,e):d(e);return(0,o.toXml)(t,{pretty:!1,allowEmpty:!0})},t.removeNamespace=l,t.findAllKWXMLElementsOfType=function e(t,r,n=[]){if(l(t.__type__)===r&&n.push(t),t.__children__&&t.__children__.length>0)for(let i=0;i<t.__children__.length;i++){const a=t.__children__[i];(0,o.isKWXMLElement)(a)&&e(a,r,n)}return n}},46430:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const n=r(9639),o=r(81080),i=r(18039),a=r(15876),s=r(63093),c=r(36172);t.config={commands:{abortDeviceLimitFlow:{handler:c.abortDeviceLimitFlow},loginViaSSO:{handler:n.loginViaSSO},unlinkPreviousDevice:{handler:i.unlinkPreviousDevice},unlinkMultipleDevices:{handler:a.unlinkMultipleDevices}},queries:{getLoginDeviceLimitFlow:{selector:o.viewedLoginDeviceLimitFlowSelector}},liveQueries:{liveLoginDeviceLimitFlow:{operator:s.loginDeviceLimitFlowView$}}}},6629:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AuthenticationCode=t.SsoMigrationServerMethod=t.LoginViaSsoCode=void 0;var n=r(92029);Object.defineProperty(t,"LoginViaSsoCode",{enumerable:!0,get:function(){return n.LoginViaSsoCode}}),Object.defineProperty(t,"SsoMigrationServerMethod",{enumerable:!0,get:function(){return n.SsoMigrationServerMethod}});var o=r(25576);Object.defineProperty(t,"AuthenticationCode",{enumerable:!0,get:function(){return o.AuthenticationCode}})},20938:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.unlinkMultipleDevicesErrorReached=t.multipleDevicesLimitStillReached=t.oneDeviceLimitStillReached=t.sessionOpenedAfterDeviceLimitRemoval=t.refreshDeviceLimitStatusFailed=t.deviceLimitRemoved=t.deviceLimitStatusUpdated=t.unlinkingSucceeded=t.unlinkingFailed=t.unlinkingMultipleDevicesRequested=t.unlinkPreviousDeviceRequested=t.multipleDevicesLimitReached=t.oneDeviceLimitReached=t.UNLINK_MULTIPLE_DEVICES_ERROR=t.UNLINKING_SUCCEEDED=t.UNLINKING_FAILED=t.UNLINK_MULTIPLE_DEVICES_REQUESTED=t.UNLINK_PREVIOUS_DEVICE_REQUESTED=t.SESSION_OPENED_AFTER_DEVICE_LIMIT_REMOVAL=t.REFRESH_DEVICE_LIMIT_STATUS_FAILED=t.MULTIPLE_DEVICES_LIMIT_STILL_REACHED=t.MULTIPLE_DEVICES_LIMIT_REACHED=t.ONE_DEVICE_LIMIT_STILL_REACHED=t.ONE_DEVICE_LIMIT_REACHED=t.DEVICE_LIMIT_STATUS_UPDATED=t.DEVICE_LIMIT_REMOVED=void 0,t.DEVICE_LIMIT_REMOVED="DEVICE_LIMIT_REMOVED",t.DEVICE_LIMIT_STATUS_UPDATED="DEVICE_LIMIT_STATUS_UPDATED",t.ONE_DEVICE_LIMIT_REACHED="ONE_DEVICE_LIMIT_REACHED",t.ONE_DEVICE_LIMIT_STILL_REACHED="ONE_DEVICE_LIMIT_STILL_REACHED",t.MULTIPLE_DEVICES_LIMIT_REACHED="MULTIPLE_DEVICES_LIMIT_REACHED",t.MULTIPLE_DEVICES_LIMIT_STILL_REACHED="MULTIPLE_DEVICES_LIMIT_STILL_REACHED",t.REFRESH_DEVICE_LIMIT_STATUS_FAILED="REFRESH_DEVICE_LIMIT_STATUS_FAILED",t.SESSION_OPENED_AFTER_DEVICE_LIMIT_REMOVAL="SESSION_OPENED_AFTER_DEVICE_LIMIT_REMOVAL",t.UNLINK_PREVIOUS_DEVICE_REQUESTED="UNLINK_PREVIOUS_DEVICE_REQUESTED",t.UNLINK_MULTIPLE_DEVICES_REQUESTED="UNLINK_MULTIPLE_DEVICES_REQUESTED",t.UNLINKING_FAILED="UNLINKING_FAILED",t.UNLINKING_SUCCEEDED="UNLINKING_SUCCEEDED",t.UNLINK_MULTIPLE_DEVICES_ERROR="UNLINK_MULTIPLE_DEVICES_ERROR",t.oneDeviceLimitReached=e=>({type:t.ONE_DEVICE_LIMIT_REACHED,deviceLimitStatus:e.deviceLimitStatus,login:e.login,subscriptionCode:e.subscriptionCode}),t.multipleDevicesLimitReached=e=>({type:t.MULTIPLE_DEVICES_LIMIT_REACHED,deviceLimitStatus:e.deviceLimitStatus,login:e.login,subscriptionCode:e.subscriptionCode}),t.unlinkPreviousDeviceRequested=()=>({type:t.UNLINK_PREVIOUS_DEVICE_REQUESTED}),t.unlinkingMultipleDevicesRequested=()=>({type:t.UNLINK_MULTIPLE_DEVICES_REQUESTED}),t.unlinkingFailed=()=>({type:t.UNLINKING_FAILED}),t.unlinkingSucceeded=()=>({type:t.UNLINKING_SUCCEEDED}),t.deviceLimitStatusUpdated=()=>({type:t.DEVICE_LIMIT_STATUS_UPDATED}),t.deviceLimitRemoved=()=>({type:t.DEVICE_LIMIT_REMOVED}),t.refreshDeviceLimitStatusFailed=()=>({type:t.REFRESH_DEVICE_LIMIT_STATUS_FAILED}),t.sessionOpenedAfterDeviceLimitRemoval=()=>({type:t.SESSION_OPENED_AFTER_DEVICE_LIMIT_REMOVAL}),t.oneDeviceLimitStillReached=e=>({type:t.ONE_DEVICE_LIMIT_STILL_REACHED,updatedDeviceLimitStatus:e.updatedDeviceLimitStatus}),t.multipleDevicesLimitStillReached=e=>({type:t.MULTIPLE_DEVICES_LIMIT_STILL_REACHED,updatedDeviceLimitStatus:e.updatedDeviceLimitStatus}),t.unlinkMultipleDevicesErrorReached=e=>({type:t.UNLINK_MULTIPLE_DEVICES_ERROR,retryPayload:e.retryPayload})},15868:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getEmptyLoginDeviceLimitFlowState=void 0;const n=r(20938),o=r(10984),i=r(17825),a=r(53576),s=(e,t)=>t.type===n.ONE_DEVICE_LIMIT_REACHED?(0,o.atOneDeviceLimitReachedStage)({login:t.login,subscriptionCode:t.subscriptionCode,deviceLimitStatus:t.deviceLimitStatus}):t.type===n.MULTIPLE_DEVICES_LIMIT_REACHED?(0,o.atMultipleDevicesLimitReachedStage)({login:t.login,subscriptionCode:t.subscriptionCode,deviceLimitStatus:t.deviceLimitStatus}):e,c=(e,t)=>{switch(t.type){case n.UNLINK_PREVIOUS_DEVICE_REQUESTED:return(0,o.atUnlinkingAndOpeningSessionStage)(e);case n.DEVICE_LIMIT_STATUS_UPDATED:return(0,o.atRefreshingDeviceLimitStatusStage)(e)}return e},u=(e,t)=>{switch(t.type){case n.UNLINK_MULTIPLE_DEVICES_REQUESTED:return(0,o.atUnlinkingAndOpeningSessionStage)(e);case n.DEVICE_LIMIT_STATUS_UPDATED:return(0,o.atRefreshingDeviceLimitStatusStage)(e)}return e},d=(e,t)=>{switch(t.type){case n.UNLINK_MULTIPLE_DEVICES_ERROR:return(0,o.atUnlinkMultipleDevicesErrorStage)({...e,retryPayload:t.retryPayload});case n.UNLINK_MULTIPLE_DEVICES_REQUESTED:return(0,o.atUnlinkingAndOpeningSessionStage)(e);case n.UNLINKING_SUCCEEDED:return(0,o.atDeviceLimitDoneStage)(e)}return e},l=e=>{const{deviceLimitStatus:t}=e;switch(t._tag){case"limitedToOneDevice":return(0,o.atOneDeviceLimitReachedStage)({...e,deviceLimitStatus:t});case"limitedToMultipleDevices":return(0,o.atMultipleDevicesLimitReachedStage)({...e,deviceLimitStatus:t});default:(0,i.assertUnreachable)(t)}},p=(e,t)=>{switch(t.type){case n.ONE_DEVICE_LIMIT_STILL_REACHED:return(0,o.atOneDeviceLimitReachedStage)({...e,deviceLimitStatus:t.updatedDeviceLimitStatus});case n.MULTIPLE_DEVICES_LIMIT_STILL_REACHED:return(0,o.atMultipleDevicesLimitReachedStage)({...e,deviceLimitStatus:t.updatedDeviceLimitStatus});case n.REFRESH_DEVICE_LIMIT_STATUS_FAILED:return l(e);case n.DEVICE_LIMIT_REMOVED:return(0,o.atOpeningSessionAfterDeviceLimitRemovalStage)(e)}return e},m=(e,t)=>{switch(t.type){case n.UNLINKING_SUCCEEDED:return(0,o.atDeviceLimitDoneStage)(e);case n.UNLINKING_FAILED:return l(e);case n.UNLINK_MULTIPLE_DEVICES_ERROR:return(0,o.atUnlinkMultipleDevicesErrorStage)({...e,retryPayload:t.retryPayload})}return e};t.default=(e={flow:null},t)=>{if(null===e.flow)return{flow:s(null,t)};switch(e.flow.name){case a.LoginDeviceLimitFlowStage.OneDeviceLimitReached:return{flow:c(e.flow,t)};case a.LoginDeviceLimitFlowStage.UnlinkingMultipleDevicesError:return{flow:d(e.flow,t)};case a.LoginDeviceLimitFlowStage.MultipleDevicesLimitReached:return{flow:u(e.flow,t)};case a.LoginDeviceLimitFlowStage.RefreshingDeviceLimitStatus:return{flow:p(e.flow,t)};case a.LoginDeviceLimitFlowStage.UnlinkingAndOpeningSession:return{flow:m(e.flow,t)};case a.LoginDeviceLimitFlowStage.OpeningSessionAfterDeviceLimitRemoval:case a.LoginDeviceLimitFlowStage.DeviceLimitDone:return e;default:return(0,i.assertUnreachable)(e.flow)}},t.getEmptyLoginDeviceLimitFlowState=function(){return{flow:null}}},36172:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.abortDeviceLimitFlow=void 0;const n=r(53576),o=r(20698),i=r(70252);t.abortDeviceLimitFlow=async function(e){const{sessionService:t}=e;try{return await t.getInstance().user.closeSession(),{success:!0}}catch(e){const t=(0,o.augmentDeviceLimitError)(e,"abortDeviceLimitFlow");return(0,i.sendExceptionLog)({error:t}),{success:!1,error:{code:n.AbortDeviceLimitFlowError.UnexpectedError}}}}},31859:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getPairingGroupDevices=t.findMyPairingGroup=t.isDevicePartOfPairingGroup=t.isDesktopPlatform=void 0;const n=r(53576);t.isDesktopPlatform=e=>e===n.Platform.DesktopLegacyWindows||e===n.Platform.DesktopLegacyMacOS||e===n.Platform.DesktopUWP,t.isDevicePartOfPairingGroup=(e,t)=>t.devices.includes(e.deviceId),t.findMyPairingGroup=(e,t)=>e.find((e=>e.pairingGroupUUID===t)),t.getPairingGroupDevices=(e,t)=>t.filter((({deviceId:t})=>e.devices.includes(t)))},32573:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makeDeviceInfoService=void 0;const n=r(16516),o=r(46298),i=r(53576),a={[i.Platform.Android]:"server_android",[i.Platform.CarbonSimulator]:"server_carbon_simulator",[i.Platform.CarbonTests]:"server_carbon_tests",[i.Platform.CarbonUnknown]:"server_carbon_unknown",[i.Platform.DesktopLegacyMacOS]:"server_macosx",[i.Platform.DesktopLegacyWindows]:"server_win",[i.Platform.DesktopUWP]:"desktop_win",[i.Platform.IPad]:"server_ipad",[i.Platform.IPhone]:"server_iphone",[i.Platform.IPod]:"server_ipod",[i.Platform.StandaloneExtension]:"server_standalone",[i.Platform.TeamAdminConsole]:"server_tac",[i.Platform.WebApp]:"server_leeloo",[i.Platform.WebAppDev]:"server_leeloo_dev"},s=(0,n.invertObj)(a),c=e=>{return{deviceId:e.deviceId,deviceName:e.deviceName,devicePlatform:(t=e.devicePlatform,s[t]),lastActivityDate:e.lastActivityDateUnix,isBucketOwner:e.isBucketOwner,temporary:e.temporary};var t},u=e=>({pairingGroupUUID:e.pairingGroupUUID,devices:e.devices,isBucketOwner:e.isBucketOwner});t.makeDeviceInfoService=e=>({getDevicesInfo:t=>(async(e,t)=>{const r=await o.listDevices(e,t);if(o.isApiError(r))throw new Error(`Failed to get devices: ${r.message}`);return{devices:r.devices.map(c),pairingGroups:r.pairingGroups.map(u)}})(e,t)})},89961:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.toPlatformView=void 0;const n=r(53576),o={[n.Platform.Android]:n.PlatformView.Android,[n.Platform.CarbonSimulator]:n.PlatformView.Other,[n.Platform.CarbonTests]:n.PlatformView.Other,[n.Platform.CarbonUnknown]:n.PlatformView.Other,[n.Platform.DesktopLegacyMacOS]:n.PlatformView.DesktopMacOS,[n.Platform.DesktopLegacyWindows]:n.PlatformView.DesktopWindows,[n.Platform.DesktopUWP]:n.PlatformView.DesktopWindows,[n.Platform.IPad]:n.PlatformView.IPad,[n.Platform.IPhone]:n.PlatformView.IPhone,[n.Platform.IPod]:n.PlatformView.IPod,[n.Platform.StandaloneExtension]:n.PlatformView.StandaloneExtension,[n.Platform.TeamAdminConsole]:n.PlatformView.TeamAdminConsole,[n.Platform.WebApp]:n.PlatformView.WebApp,[n.Platform.WebAppDev]:n.PlatformView.WebApp};t.toPlatformView=e=>o[e]},49154:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DeviceLimitCapabilityEventBus=void 0,t.DeviceLimitCapabilityEventBus=class{constructor(e,t){this.services=e,this.connector=t}register(e){const t=[];return Object.keys(e).forEach((r=>{const{handler:n}=e[r],o=this.connector[r].on((()=>n(this.services)));t.push(o)})),()=>{t.forEach((e=>e()))}}}},27331:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getDeviceLimitFlowEventsManager=t.DeviceLimitFlowEventsManager=void 0;const n=r(28354),o=r(63093),i=r(3343);class a{constructor(e){this.registrations=[],e.getState$().pipe((0,o.loginDeviceLimitFlow$)(),(0,i.pairwise)()).subscribe(this.onTransition.bind(this))}addEventListener(e,t){const r=(0,n.v4)();return this.registrations.push({id:r,event:e,listener:t}),r}removeTransitionEventListener(e){this.registrations=this.registrations.filter((t=>t.id!==e))}onTransition([e,t]){this.registrations.forEach((({event:r,listener:n})=>{("exit"===r.type&&r.from===e?.name||"entry"===r.type&&r.to===t?.name)&&n(r)}))}}let s;t.DeviceLimitFlowEventsManager=a,t.getDeviceLimitFlowEventsManager=e=>(s||(s=new a(e)),s)},10984:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.atUnlinkMultipleDevicesErrorStage=t.atDeviceLimitDoneStage=t.atRefreshingDeviceLimitStatusStage=t.atOpeningSessionAfterDeviceLimitRemovalStage=t.atUnlinkingAndOpeningSessionStage=t.atMultipleDevicesLimitReachedStage=t.atOneDeviceLimitReachedStage=void 0;const n=r(53576);t.atOneDeviceLimitReachedStage=e=>({...e,name:n.LoginDeviceLimitFlowStage.OneDeviceLimitReached}),t.atMultipleDevicesLimitReachedStage=e=>({...e,name:n.LoginDeviceLimitFlowStage.MultipleDevicesLimitReached}),t.atUnlinkingAndOpeningSessionStage=e=>({...e,name:n.LoginDeviceLimitFlowStage.UnlinkingAndOpeningSession}),t.atOpeningSessionAfterDeviceLimitRemovalStage=e=>({...e,name:n.LoginDeviceLimitFlowStage.OpeningSessionAfterDeviceLimitRemoval}),t.atRefreshingDeviceLimitStatusStage=e=>({...e,name:n.LoginDeviceLimitFlowStage.RefreshingDeviceLimitStatus}),t.atDeviceLimitDoneStage=e=>({...e,name:n.LoginDeviceLimitFlowStage.DeviceLimitDone}),t.atUnlinkMultipleDevicesErrorStage=e=>({...e,deviceLimitStatus:e.deviceLimitStatus,name:n.LoginDeviceLimitFlowStage.UnlinkingMultipleDevicesError})},63093:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.loginDeviceLimitFlowView$=t.loginDeviceLimitFlow$=void 0;const n=r(18948),o=r(3343),i=r(81080);t.loginDeviceLimitFlow$=()=>(0,n.pipe)((0,o.map)(i.loginDeviceLimitFlowSelector),(0,o.distinctUntilChanged)(((e,t)=>e?.name===t?.name))),t.loginDeviceLimitFlowView$=()=>(0,n.pipe)((0,o.map)(i.viewedLoginDeviceLimitFlowSelector),(0,o.distinctUntilChanged)(((e,t)=>e?.name===t?.name)))},81080:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.viewedLoginDeviceLimitFlowSelector=t.loginDeviceLimitFlowSelector=void 0;const n=r(46802);t.loginDeviceLimitFlowSelector=e=>e.userSession.loginDeviceLimitFlow.flow,t.viewedLoginDeviceLimitFlowSelector=e=>{const r=(0,t.loginDeviceLimitFlowSelector)(e);return r?(0,n.toLoginDeviceLimitFlowView)(r):null}},46802:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.toLoginDeviceLimitFlowView=t.toMultipleDevicesLimitErrorStageView=t.toMultipleDevicesLimitReachedStageView=void 0;const n=r(53576),o=r(35520),i=r(88068),a=r(17825);t.toMultipleDevicesLimitReachedStageView=e=>({name:n.LoginDeviceLimitFlowStage.MultipleDevicesLimitReached,login:e.login,devicesToDeactivate:e.deviceLimitStatus.devices.map(i.toDeviceToDeactivateInfoView),subscriptionCode:e.subscriptionCode}),t.toMultipleDevicesLimitErrorStageView=e=>({name:n.LoginDeviceLimitFlowStage.UnlinkingMultipleDevicesError,login:e.login,retryPayload:e.retryPayload,subscriptionCode:e.subscriptionCode}),t.toLoginDeviceLimitFlowView=e=>{switch(e.name){case n.LoginDeviceLimitFlowStage.OneDeviceLimitReached:return r=e,{name:n.LoginDeviceLimitFlowStage.OneDeviceLimitReached,login:r.login,previousDevice:(0,o.toPreviousDeviceInfo)(r.deviceLimitStatus.bucketOwner),subscriptionCode:r.subscriptionCode};case n.LoginDeviceLimitFlowStage.MultipleDevicesLimitReached:return(0,t.toMultipleDevicesLimitReachedStageView)(e);case n.LoginDeviceLimitFlowStage.UnlinkingAndOpeningSession:case n.LoginDeviceLimitFlowStage.DeviceLimitDone:case n.LoginDeviceLimitFlowStage.RefreshingDeviceLimitStatus:case n.LoginDeviceLimitFlowStage.OpeningSessionAfterDeviceLimitRemoval:return{name:e.name,login:e.login};case n.LoginDeviceLimitFlowStage.UnlinkingMultipleDevicesError:return(0,t.toMultipleDevicesLimitErrorStageView)(e);default:return(0,a.assertUnreachable)(e)}var r}},85822:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.startDeviceLimitFlow=t.getDeviceLimitStatus=t.attemptGetDeviceLimitStatus=void 0;const n=r(16593),o=r(15718),i=r(82652),a=r(22589),s=r(32573),c=r(36077),u=r(20938),d=r(90622),l=r(56915),p=r(38981),m=r(92263),g=r(14656);t.attemptGetDeviceLimitStatus=async e=>{try{return await Promise.race([(0,t.getDeviceLimitStatus)(e),new Promise((e=>setTimeout((()=>e((0,c.noDeviceLimit)())),3e3)))])}catch(e){return(e=>{if(!(0,m.isCarbonError)(e,g.HttpError,g.HttpErrorCode.NETWORK_ERROR)&&!(0,m.isCarbonError)(e,g.HttpError,g.HttpErrorCode.CONNECTION_ABORTED)&&!(0,m.isCarbonError)(e,g.HttpError,g.HttpErrorCode.CONNECTION_TIMED_OUT))throw e;return(0,c.noDeviceLimit)()})(e)}},t.getDeviceLimitStatus=async e=>{const{storeService:t}=e,r=t.getState();if((0,p.isSSOUserSelector)(r))return(0,c.noDeviceLimit)();const u=(0,o.pairingIdSelector)(r),m=(0,n.premiumStatusSelector)(r),g=(0,n.userLoginSelector)(r),f=(0,s.makeDeviceInfoService)(t),S=await f.getDevicesInfo(g),h=(0,l.getDeviceIdSelector)(r,g),y=(0,d.deviceKeysSelector)(t.getState()),v=(0,i.isOneDeviceLimitApplicable)(u,S,h,m);if("limitedToOneDevice"===v._tag)return(0,c.limitedToOneDevice)(v.bucketOwner);const E=(0,a.isMultipleDevicesLimitApplicable)(S,m,y);return"limitedToMultipleDevices"===E._tag?(0,c.limitedToMultipleDevices)(E.devices):(0,c.noDeviceLimit)()},t.startDeviceLimitFlow=async(e,t)=>{const{sessionService:r,storeService:o}=e,i=o.getState(),a=(0,n.userLoginSelector)(i),s=r.getInstance().user,c=await s.fetchSubscriptionCode();if("limitedToOneDevice"===t._tag){const e=(0,u.oneDeviceLimitReached)({deviceLimitStatus:t,subscriptionCode:c,login:a});o.dispatch(e)}else if("limitedToMultipleDevices"===t._tag){const e=(0,u.multipleDevicesLimitReached)({deviceLimitStatus:t,subscriptionCode:c,login:a});o.dispatch(e)}}},36077:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.noDeviceLimit=t.limitedToMultipleDevices=t.limitedToOneDevice=void 0,t.limitedToOneDevice=e=>({_tag:"limitedToOneDevice",bucketOwner:e}),t.limitedToMultipleDevices=e=>({_tag:"limitedToMultipleDevices",devices:e}),t.noDeviceLimit=()=>({_tag:"noDeviceLimit"})},75903:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.refreshDeviceLimitStatus=void 0;const n=r(70252),o=r(88610),i=r(20698),a=r(20938),s=r(85822);t.refreshDeviceLimitStatus=async e=>{const{sessionService:t,storeService:r}=e;try{const c=t.getInstance().user;await c.refreshSessionData();const u=await(0,s.getDeviceLimitStatus)(e);if("noDeviceLimit"===u._tag)r.dispatch((0,a.deviceLimitRemoved)()),await(async e=>{const{sessionService:t,storeService:r}=e;try{await(0,o.sessionDidOpen)(e),r.dispatch((0,a.sessionOpenedAfterDeviceLimitRemoval)())}catch(r){(0,i.notifyDeviceLimitError)(e,r);const o=(0,i.augmentDeviceLimitError)(r,"openSessionAfterDeviceLimitRemoval");(0,n.sendExceptionLog)({error:o}),t.close()}})(e);else if("limitedToOneDevice"===u._tag){const e=(0,a.oneDeviceLimitStillReached)({updatedDeviceLimitStatus:u});r.dispatch(e)}else if("limitedToMultipleDevices"===u._tag){const e=(0,a.multipleDevicesLimitStillReached)({updatedDeviceLimitStatus:u});r.dispatch(e)}}catch(e){r.dispatch((0,a.refreshDeviceLimitStatusFailed)());const t=(0,i.augmentDeviceLimitError)(e,"refreshDeviceLimitStatus");(0,n.sendExceptionLog)({error:t})}}},20698:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.augmentDeviceLimitError=t.notifyDeviceLimitError=void 0;const n=r(53576),o=r(16373),i=e=>"object"==typeof e&&e instanceof Error,a=e=>i(e)?e.message:"No valid error reported";t.notifyDeviceLimitError=async function(e,t){const{storeService:r}=e,i=(0,o.addNewLoginNotification)({type:n.LoginNotificationType.UNKNOWN_ERROR,message:a(t)});r.dispatch(i)},t.augmentDeviceLimitError=function(e,t){const r=`[DeviceLimit] - ${t}: ${a(e)}`,n=new Error(r);return i(e)&&(n.stack=e.stack),n}},22589:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isMultipleDevicesLimitApplicable=void 0;const n=r(87314),o=(e,t)=>t.lastActivityDate-e.lastActivityDate;t.isMultipleDevicesLimitApplicable=(e,t,r)=>{if((t?.capabilities?.devicesLimit?.info?.limit||0)<=1)return(0,n.notLimitedToMultipleDevices)();const{nonPairedDevices:i,pairingGroups:a}=(({pairingGroups:e,devices:t})=>{const r=t.filter((t=>!e.find((e=>e.devices.includes(t.deviceId)))&&t),[]);return{pairingGroups:e,nonPairedDevices:r}})(e);if(t.capabilities.devicesLimit.info.limit<i.length+a.length){const t=(({pairingGroups:e,devices:t,nonPairedDevices:r,deviceKeys:n})=>{const i=[...t].sort(o),a=[];for(const r of e){let e;e=r.devices.includes(n?.accessKey)?{...t.find((e=>e.deviceId===n?.accessKey)),isCurrentDevice:!0}:i.find((e=>r.devices.includes(e.deviceId))),a.push({...e,deviceId:r.pairingGroupUUID,isPairingGroup:!0})}const s=r.map((e=>e.deviceId===n?.accessKey?{...e,isCurrentDevice:!0}:e));return[...a,...s].sort(o)})({devices:e.devices,nonPairedDevices:i,pairingGroups:a,deviceKeys:r});return(0,n.limitedToMultipleDevices)(t)}return(0,n.notLimitedToMultipleDevices)()}},87314:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.limitedToMultipleDevices=t.notLimitedToMultipleDevices=void 0,t.notLimitedToMultipleDevices=()=>({_tag:"notLimitedToMultipleDevices"}),t.limitedToMultipleDevices=e=>({_tag:"limitedToMultipleDevices",devices:e})},88068:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.toDeviceToDeactivateInfoView=void 0;const n=r(53576),o=r(89961);t.toDeviceToDeactivateInfoView=e=>({...e,platform:e.devicePlatform?(0,o.toPlatformView)(e.devicePlatform):n.PlatformView.Other})},82652:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getMonoBucketOwner=t.isOneDeviceLimitApplicable=void 0;const n=r(16516),o=r(31859),i=r(44179);function a(e){const{devices:t,pairingGroups:r}=e;let i=null,a=t.find((e=>e.isBucketOwner))??null;if(!a&&(i=r.find((e=>e.isBucketOwner))??null,i)){const e=(0,o.getPairingGroupDevices)(i,t),r=(e,t)=>e.lastActivityDate-t.lastActivityDate;e.sort(r);const s=e=>Boolean(e.devicePlatform&&(0,o.isDesktopPlatform)(e.devicePlatform)),c=(0,n.partition)(s,e);a=(0,n.unnest)(c)[0]||null}return{bucketOwner:a,bucketOwnerPairingGroup:i}}t.isOneDeviceLimitApplicable=function(e,t,r,n){const{bucketOwner:s,bucketOwnerPairingGroup:c}=a(t),{pairingGroups:u}=t;if(!Boolean(1===n?.capabilities?.devicesLimit?.info?.limit))return(0,i.notLimitedToOneDevice)();const d=!(!c||!e)&&c.pairingGroupUUID===e,l=(0,o.findMyPairingGroup)(u,e??""),p=!(!s||!l)&&(0,o.isDevicePartOfPairingGroup)(s,l);return!s||s.deviceId===r||d||p?(0,i.notLimitedToOneDevice)():(0,i.limitedToOneDevice)(s)},t.getMonoBucketOwner=a},44179:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.notLimitedToOneDevice=t.limitedToOneDevice=void 0,t.limitedToOneDevice=e=>({_tag:"limitedToOneDevice",bucketOwner:e}),t.notLimitedToOneDevice=()=>({_tag:"notLimitedToOneDevice"})},35520:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.toPreviousDeviceInfo=void 0;const n=r(53576),o=r(89961);t.toPreviousDeviceInfo=({deviceName:e,devicePlatform:t,lastActivityDate:r})=>({name:e??"",platform:t?(0,o.toPlatformView)(t):n.PlatformView.Other,lastActive:r})},57634:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setupDeviceLimitEventBus=void 0;const n=r(75903),o=r(20938),i=r(53576),a={deviceLimitCapabilityUpdated:{handler:e=>{const t=(0,o.deviceLimitStatusUpdated)();e.storeService.dispatch(t),(0,n.refreshDeviceLimitStatus)(e)}}},s={type:"entry",to:i.LoginDeviceLimitFlowStage.OneDeviceLimitReached},c={type:"exit",from:i.LoginDeviceLimitFlowStage.OneDeviceLimitReached},u={type:"entry",to:i.LoginDeviceLimitFlowStage.MultipleDevicesLimitReached},d={type:"exit",from:i.LoginDeviceLimitFlowStage.MultipleDevicesLimitReached};t.setupDeviceLimitEventBus=(e,t)=>{let r;const n=()=>r=e.register(a),o=()=>r();t.addEventListener(s,n),t.addEventListener(c,o),t.addEventListener(u,n),t.addEventListener(d,o)}},15876:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.unlinkMultipleDevices=void 0;const n=r(53576),o=r(16593),i=r(46298),a=r(22589),s=r(88610),c=r(16373),u=r(32573),d=r(20938),l=r(20698),p=r(70252),m=r(90622);t.unlinkMultipleDevices=async(e,t)=>{const{storeService:r,sessionService:g}=e,f=r.getState(),S=(0,o.userLoginSelector)(f);r.dispatch((0,d.unlinkingMultipleDevicesRequested)());const h=await(async(e,t,r)=>{const{storeService:n}=e,o=e=>{const t=(0,d.unlinkMultipleDevicesErrorReached)({retryPayload:r});return n.dispatch(t),{success:!1,error:{code:e.code}}};try{const e=await(0,i.deactivateDevices)(n,t,r);if((0,i.isApiError)(e)&&e.code!==i.CLIENT_DEVICES_NOT_FOUND&&e.code!==i.PAIRING_GROUPS_NOT_FOUND)return o(e)}catch(e){return o(e)}})(e,S,t);if(h)return h;const y=await(async(e,t)=>{const{storeService:r}=e,i=r.getState(),s=(0,o.premiumStatusSelector)(i),l=(0,u.makeDeviceInfoService)(r),p=await l.getDevicesInfo(t),g=(0,m.deviceKeysSelector)(r.getState()),f=(0,a.isMultipleDevicesLimitApplicable)(p,s,g);if("limitedToMultipleDevices"===f._tag){r.dispatch((0,d.deviceLimitStatusUpdated)());const e=(0,c.addNewLoginNotification)({type:n.LoginNotificationType.UNKNOWN_ERROR,message:`${n.USER_STILL_OVERFLOWING}`});r.dispatch(e);const t=(0,d.multipleDevicesLimitStillReached)({updatedDeviceLimitStatus:{_tag:"limitedToMultipleDevices",devices:f.devices}});return r.dispatch(t),{success:!1,error:{code:n.USER_STILL_OVERFLOWING}}}return!1})(e,S);if(y)return y;try{return await(0,s.sessionDidOpen)(e),r.dispatch((0,d.unlinkingSucceeded)()),{success:!0}}catch(t){return g.close(),(0,l.notifyDeviceLimitError)(e,t),r.dispatch((0,d.unlinkingFailed)()),(0,p.sendExceptionLog)({error:(0,l.augmentDeviceLimitError)(t,"unlinkMultipleDevices")}),{success:!1,error:{code:n.UNEXPECTED_ERROR}}}}},18039:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.unlinkPreviousDevice=void 0;const n=r(88610),o=r(20938),i=r(20698),a=r(70252),s=r(53576);t.unlinkPreviousDevice=async function(e){const{storeService:t}=e;try{return t.dispatch((0,o.unlinkPreviousDeviceRequested)()),await(0,n.sessionDidOpen)(e),t.dispatch((0,o.unlinkingSucceeded)()),{success:!0}}catch(r){t.dispatch((0,o.unlinkingFailed)()),(0,i.notifyDeviceLimitError)(e,r);const n=(0,i.augmentDeviceLimitError)(r,"unlinkPreviousDevice");return(0,a.sendExceptionLog)({error:n}),{success:!1,error:{code:s.UnlinkPreviousDeviceError.UnexpectedError}}}}},88610:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DifferentLoginAuthorized=t.sessionDidOpen=t.openSessionWithMasterPassword=t.updateSessionUponLoginAction=t.makeLoginController=void 0;const n=r(92233),o=r(53576),i=r(58639),a=r(70414),s=r(28287),c=r(89160),u=r(58639),d=r(16356),l=r(86797),p=r(59489),m=r(2246),g=r(25576),f=r(5464),S=r(76089),h=r(28445),y=r(64910),v=r(33769),E=r(19399),A=r(56915),_=r(62844),T=r(52653),I=r(75226),b=r(71938),w=r(63739),C=r(658),D=r(15606),O=r(16593),P=r(38981),N=r(29303),R=r(27885),M=r(61740),L=r(7624),U=r(17825),k=r(69763),F=r(15718),B=r(85822),G=r(61259),x=r(35924),$=r(33831),j=r(46298),K=r(98226),V=r(25421);async function H(e,t,r,n){const{storeService:o,sessionService:a}=e;if(ie(o))throw new Error(i.AuthenticationCode[i.AuthenticationCode.SESSION_ALREADY_OPENED]);if(""===t)throw new Error(i.AuthenticationCode[i.AuthenticationCode.EMPTY_LOGIN]);if(!(0,h.isValidLogin)(t))throw new Error(i.AuthenticationCode[i.AuthenticationCode.INVALID_LOGIN]);if(o.dispatch((0,x.updateLoginStepInfoLogin)(t)),""===r)throw new Error(i.AuthenticationCode[i.AuthenticationCode.EMPTY_MASTER_PASSWORD]);let s=ce.FORBIDDEN;if(n&&void 0!==n.authorizeDifferentLogin&&(s=n.authorizeDifferentLogin),o.getUserLogin()&&o.getUserLogin()!==t&&(o.isAuthenticated()&&await a.close(),s===ce.FORBIDDEN))throw new Error(i.AuthenticationCode[i.AuthenticationCode.DIFFERENT_LOGIN_PROVIDED_WITH_TOKEN_OR_OTP]);o.hasSessionId()&&o.getUserLogin()===t&&r&&o.dispatch((0,d.updateMasterPassword)(r));const c=n&&n.serverKey;if(c&&o.dispatch((0,d.updateServerKey)(c)),o.getUserLogin()!==t||void 0===r){const e=(0,P.ssoSettingsSelector)(o.getState());await a.close(),a.setInstance(t,r),e.ssoToken&&o.dispatch((0,L.storeSSOSettings)(e))}}async function W(e,t,r,n,s,c,d){try{const{storeService:l,sessionService:p}=e,m=(0,h.normalizeEmail)(t);if(await H(e,m,r),await ae(n),await p.getInstance().user.accountExistsLocally())throw new Error("Unexpected local account presence during OTP1 step");if(await a.registerDevice(l,s,(0,g.makeOTP)(n),d??!1,c)!==i.AuthenticationCode.ASK_MASTER_PASSWORD)throw new Error("unexpected status from device registration");return r?z(e,m,r,{isDataPersisted:s}):(u.triggerAskMasterPassword(m),o.LoginResultEnum.MasterPasswordMissing)}catch(t){throw re(t)&&(0,C.sendOTPForNewDeviceErrorLog)(e,d),u.triggerOpenSessionFailed(t),t}}async function z(e,t,r,n,s){try{const{storeService:u,sessionService:l,masterPasswordEncryptorService:p,localDataEncryptorService:m,remoteDataEncryptorService:f,localStorageService:S}=e;let E=n&&n.isDataPersisted;s?.(`isDataPersisted? ${E}`),void 0===E&&(E=u.getAccountInfo().persistData);const A=n&&n.serverKey;s?.(`serverKey null, undefined, or empty? ${!A}`);const _=Boolean(n&&n.rememberMasterPassword);s?.(`rememberMasterPassword? ${_}`);const T=Boolean(n?.shouldRememberMeForSSO);t=(0,h.normalizeEmail)(t),s?.("updateSessionUponLoginAction START"),await H(e,t,r,{authorizeDifferentLogin:ce.AUTHORIZED,serverKey:A}),s?.("updateSessionUponLoginAction SUCCESS");const I=await l.getInstance().user.accountExistsLocally();if(s?.(`accountExistLocally? ${I}`),I){const r=S.getInstance(),n=await r.doesLocalKeyExist();if(s?.(`doesLocalKeyExist? ${n}`),n)try{const e=await r.getLocalKey();e.length<64&&(s?.("localKeyMigrationRequired? true"),u.dispatch((0,d.updateIsLocalKeyMigrationRequired)(!0)));const t="";s?.("set localDataEncryptorService START");const n=(0,y.getNoDerivationCryptoConfig)();m.setInstance({raw:e},t,n),s?.("set localDataEncryptorService SUCCESS"),s?.("updateLocalKey START"),u.dispatch((0,d.updateLocalKey)(e)),s?.("updateLocalKey SUCCESS")}catch(t){throw(0,C.sendMasterPasswordLoginErrorLog)(e,!1),new Error(i.AuthenticationCode[i.AuthenticationCode.WRONG_PASSWORD])}s?.("loadLocalData START"),await c.loadLocalData(l,u,p),s?.("loadLocalData SUCCESS")}else{const e=u.getState(),t=(0,O.isRemoteKeyActivatedSelector)(e)&&f?f:p;s?.("validateMasterPassword START"),await a.validateMasterPassword(u,t),s?.("validateMasterPassword SUCCESS")}return s?.("rememberMasterPasswordUpdated START"),n?.rememberMasterPassword&&u.dispatch((0,d.rememberMasterPasswordUpdated)(_)),s?.("rememberMasterPasswordUpdated SUCCESS"),T&&u.dispatch((0,d.shouldRememberMeForSSOUpdated)(T)),I?(s?.("initLocalSession START"),(0,C.sendLoginSuccessEventLog)({services:e,isInitial:!1,isSsoLogin:n?.isSsoLogin,rememberMeType:n?.triggeredByRememberMeType??"disabled"}),await async function(e,t){const{sessionService:r,storeService:n,localDataEncryptorService:i}=e,a=r.getInstance().user,s=n.getState();(0,O.isLocalKeyMigrationRequiredSelector)(s)&&(await(0,v.generateLocalkeyAndSetupEncryptorService)(i,n,r,g.PersistData.PERSIST_DATA_YES),await a.persistAllData()),await a.refreshSessionData(),t?.requiredPermissions&&await q(n,r,t.requiredPermissions);const c=await(0,B.attemptGetDeviceLimitStatus)(e);return"noDeviceLimit"!==c._tag?(await(0,B.startDeviceLimitFlow)(e,c),o.LoginResultEnum.DeviceLimitFlow):ee(e,t)}(e,n)):(s?.("initInitialSession START"),(0,C.sendLoginSuccessEventLog)({services:e,isInitial:!0,isSsoLogin:n?.isSsoLogin}),await J(e,E,n))}catch(t){throw t.message&&t.message===i.AuthenticationCode[i.AuthenticationCode.WRONG_PASSWORD]&&(0,C.sendMasterPasswordLoginErrorLog)(e,!0),u.triggerOpenSessionFailed(t),t}}t.makeLoginController=e=>({openSession:(t,r)=>async function(e,t,r){const{storeService:a,sessionService:s,wsService:c,storageService:d,applicationModulesAccess:p}=e;t=(0,h.normalizeEmail)(t);try{const m=r&&r.password;await H(e,t,m,{authorizeDifferentLogin:ce.AUTHORIZED});let f=await s.getInstance().user.accountExistsLocally();const S=await oe(a,d,p,c,f);if("invisibleMasterPassword"===(0,V.accountAuthenticationTypeSelector)(a.getState()))return u.triggerOpenSessionMasterPasswordLess(),o.LoginResultEnum.MasterPasswordLess;switch(S){case i.AuthenticationCode.SSO_LOGIN_BYPASS:return(0,C.sendAskSSOAuthenticationEventLog)(e,n.VerificationMode.None),u.triggerOpenSessionSsoRedirectionToIdpRequired((0,G.triggerServiceProviderUrlRedirect)(a.getState(),t),(0,P.ssoProviderInfoSelector)(a.getState()).isNitroProvider),o.LoginResultEnum.SSOLogin;case i.AuthenticationCode.ASK_MASTER_PASSWORD:if(!f)throw new Error("checkLogin should never return ASK_MASTER_PASSWORD for remote accounts");return m?z(e,t,m):((0,C.sendAskAuthenticationEventLog)(e,n.VerificationMode.None),a.dispatch((0,x.updateLoginStepInfoStep)($.LoginStep.Password)),u.triggerAskMasterPassword(t),o.LoginResultEnum.MasterPasswordMissing);case i.AuthenticationCode.ASK_OTP:return(0,C.sendAskAuthenticationEventLog)(e,n.VerificationMode.Otp2),a.dispatch((0,x.updateLoginStepInfoStep)($.LoginStep.OTP2)),u.triggerOpenSessionOTPSent({hasU2F:!1}),o.LoginResultEnum.OTPMissing;case i.AuthenticationCode.ASK_OTP_FOR_NEW_DEVICE:const{otpType:r}=a.getAccountInfo();return(0,C.sendAskAuthenticationEventLog)(e,r===l.OtpType.OTP_NEW_DEVICE?n.VerificationMode.Otp1:n.VerificationMode.Otp2),a.dispatch((0,x.updateLoginStepInfoStep)($.LoginStep.OTP1)),u.triggerOpenSessionOTPForNewDeviceRequired(),o.LoginResultEnum.OTPMissing;case i.AuthenticationCode.ASK_TOKEN:if(f=await s.getInstance().user.accountExistsLocally(),f)throw new Error("Unexpected local account presence during email token step");return await(0,j.requestEmailTokenVerification)(a,{login:t}),(0,C.sendAskAuthenticationEventLog)(e,n.VerificationMode.EmailToken),a.dispatch((0,x.updateLoginStepInfoStep)($.LoginStep.OTPToken)),u.triggerOpenSessionTokenSent({isResendAction:!1}),o.LoginResultEnum.TokenMissing;case i.AuthenticationCode.USE_LOCAL_UKI:if((0,A.ukiSelector)(a.getState()))return J(e,g.PersistData.PERSIST_DATA_YES);throw new Error(i.AuthenticationCode[i.AuthenticationCode.UNKNOWN_UKI]);case i.AuthenticationCode.ASK_DASHLANE_AUTHENTICATOR:if(f=await s.getInstance().user.accountExistsLocally(),f)throw new Error("Unexpected local account presence during dashlane authenticator step");return(0,C.sendAskAuthenticationEventLog)(e,n.VerificationMode.AuthenticatorApp),a.dispatch((0,x.updateLoginStepInfoStep)($.LoginStep.DashlaneAuthenticator)),u.triggerOpenSessionDashlaneAuthenticator(),o.LoginResultEnum.DashlaneAuthenticatorApprovalMissing;default:throw new Error(i.AuthenticationCode[i.AuthenticationCode.UNKNOWN_ERROR])}}catch(e){if(u.getAuthenticationCodeFromError(e)===i.AuthenticationCode.USER_DOESNT_EXIST){let r;try{r=await(0,j.requestAccountCreation)(a,{login:t})}catch{}if(void 0!==r&&!(0,j.isApiError)(r)&&r.ssoServiceProviderUrl){const e=new Error(i.AuthenticationCode[i.AuthenticationCode.USER_DOESNT_EXIST_SSO]);u.triggerOpenSessionFailed(e)}else u.triggerOpenSessionFailed(e)}else u.triggerOpenSessionFailed(e);throw e}}(e,t,r),openSessionWithToken:(t,r,n,s,c)=>async function(e,t,r,n,s,c){try{const{storeService:d,sessionService:l}=e;if(t=(0,h.normalizeEmail)(t),await H(e,t,r),await se(n),await l.getInstance().user.accountExistsLocally())throw new Error(i.AuthenticationCode[i.AuthenticationCode.TOKEN_PROVIDED_FOR_LOCAL_SESSION]);if(await a.registerDevice(d,s,(0,g.makeEmailToken)(n),!1,c)!==i.AuthenticationCode.ASK_MASTER_PASSWORD)throw new Error("unexpected status from verifyOtpOrToken");return r?z(e,t,r,{isDataPersisted:s}):(u.triggerAskMasterPassword(t),o.LoginResultEnum.MasterPasswordMissing)}catch(t){throw re(t)&&(0,C.sendEmailTokenErrorLog)(e),u.triggerOpenSessionFailed(t),t}}(e,t,r,n,s,c),openSessionWithDashlaneAuthenticator:(t,r,n,s)=>async function(e,t,r,n,s){try{const{storeService:c,sessionService:d}=e;if(t=(0,h.normalizeEmail)(t),await H(e,t,r),await d.getInstance().user.accountExistsLocally())throw new Error(i.AuthenticationCode[i.AuthenticationCode.DASHLANE_AUTHENTICATOR_ASKED_FOR_LOCAL_SESSION]);const l=await a.registerDeviceWithDashlaneAuthenticator(c,n,s);if(l===i.AuthenticationCode.DASHLANE_AUTHENTICATOR_LOGIN_CANCELLED)return(0,C.sendDashlaneAuthenticatorErrorLog)(e),o.LoginResultEnum.DashlaneAuthenticatorApprovalCancelled;if(l!==i.AuthenticationCode.ASK_MASTER_PASSWORD)throw new Error("unexpected status from verifyDashlaneAuthenticatorPush");return r?z(e,t,r,{isDataPersisted:n}):(u.triggerAskMasterPassword(t),o.LoginResultEnum.MasterPasswordMissing)}catch(t){ne(t)&&(0,C.sendDashlaneAuthenticatorErrorLog)(e),u.triggerOpenSessionFailed(t)}}(e,t,r,n,s),cancelDashlaneAuthenticatorRegistration:()=>a.cancelRegistrationWithDashlaneAuthenticator(),openSessionWithOTP:(t,r,n,a,p)=>async function(e,t,r,n,a,p){const{storageService:m,storeService:f,sessionService:S,applicationModulesAccess:y}=e;try{if(t=(0,h.normalizeEmail)(t),await H(e,t,r),await ae(n),!await S.getInstance().user.accountExistsLocally())return W(e,t,r,n,a,void 0,p);if(f.dispatch((0,d.updateisUsingBackupCode)(p)),f.getAccountInfo().otpType!==l.OtpType.OTP_LOGIN)throw new Error(i.AuthenticationCode[i.AuthenticationCode.OTP_PROVIDED_FOR_LOCAL_NON_OTP_SESSION]);const v=await(0,s.convertTokenToAuthTicket)(f,(0,g.makeOTP)(n));if(!1===v.success){const{error:{code:e,message:t}}=v;if(e===i.AuthenticationCode.BUSINESS_ERROR)throw new Error(t);throw new Error(i.AuthenticationCode[e])}const E=v.authTicket;if(await c.completeLogin(f,m,y,E,p??!1)!==i.AuthenticationCode.ASK_MASTER_PASSWORD)throw new Error("unexpected status from verifyOtpOrToken");return r?z(e,t,r,{isDataPersisted:a}):(u.triggerAskMasterPassword(t),o.LoginResultEnum.MasterPasswordMissing)}catch(t){if(te(t)){const e=await(0,I.getLocalAccounts)(f,m);u.sendLocalAccounts(e)}throw re(t)&&(0,C.sendOTPErrorLog)(e,p),u.triggerOpenSessionFailed(t),t}}(e,t,r,n,a,p),openSessionWithOTPForNewDevice:(t,r,n,o,i,a)=>W(e,t,r,n,o,i,a),openSessionWithMasterPassword:(t,r,n)=>z(e,t,r,n),openSessionResendToken:t=>async function(e,t){await a.askServerToSendToken(e,t),u.triggerOpenSessionTokenSent({isResendAction:!0})}(e.wsService,t),loadAccountCreationInfos:(t,r,n,o,i,a)=>async function(e,t,r,n,o,i,a){const s=(0,E.secureDeviceName)(n);await H(e,t,r),e.storeService.dispatch((0,T.deviceRegistered)((0,T.makeDeviceRegistrationKeys)(o.accessKey,o.secretKey),a,t)),e.storeService.dispatch((0,S.registerDeviceName)(s)),e.storeService.dispatch((0,S.registerLastSync)(i))}(e,t,r,n,o,i,a),openExtraDeviceSession:(t,r)=>async function(e,t,r){try{const{sessionService:n}=e;t=(0,h.normalizeEmail)(t);const a=r&&r.password,s=r&&r.serverKey;await H(e,t,a,{authorizeDifferentLogin:ce.AUTHORIZED,serverKey:s});const c=await n.getInstance().user.accountExistsLocally(),d=ue(c);switch(d){case i.AuthenticationCode.PROVIDE_EXTRA_DEVICE_TOKEN:return u.triggerOpenSessionExtraDeviceTokenRequired(),o.LoginResultEnum.ExtraDeviceTokenMissing;case i.AuthenticationCode.ASK_MASTER_PASSWORD:return a?z(e,t,a,{serverKey:s}):(u.triggerAskMasterPassword(t),o.LoginResultEnum.MasterPasswordMissing);default:(0,U.assertUnreachable)(d)}}catch(e){throw u.triggerOpenSessionFailed(e),e}}(e,t,r),openSessionWithExtraDeviceToken:(t,r,n,s)=>async function(e,t,r,n,s){try{const{storeService:c,sessionService:d}=e;t=(0,h.normalizeEmail)(t);const l=s&&s.password;if(await H(e,t,l,{authorizeDifferentLogin:ce.AUTHORIZED}),await se(r),await d.getInstance().user.accountExistsLocally())throw new Error(i.AuthenticationCode[i.AuthenticationCode.TOKEN_PROVIDED_FOR_LOCAL_SESSION]);const p=s&&s.deviceName;return await a.registerDevice(c,n,(0,g.makeExtraDeviceToken)(r),!1,p),l?z(e,t,l):(u.triggerAskMasterPassword(t),o.LoginResultEnum.MasterPasswordMissing)}catch(e){throw u.triggerOpenSessionFailed(e),e}}(e,t,r,n,s)}),t.updateSessionUponLoginAction=H,t.openSessionWithMasterPassword=z;const q=async(e,t,r)=>{const n=(0,R.hasTACAccessInCurrentSpace)(e);if(o.possibleAdminPermissions.includes(r)&&!n)throw e.isAuthenticated()&&await t.close(),new Error(i.AuthenticationCode[i.AuthenticationCode.USER_UNAUTHORIZED])},Y=async(e,t,r)=>{const n=e.getState(),o=(0,F.pairingIdSelector)(n);u.triggerSessionOpened(e,t,r,o)},Z=(e,t)=>{const{login:r,persistData:n,sessionStartTime:o}=e.getAccountInfo();n===g.PersistData.PERSIST_DATA_YES&&((0,m.storeUserPublicSetting)(r,"lastSuccessfulLoginTime",o),void 0!==t?.triggeredByRememberMeType&&"disabled"!==t?.triggeredByRememberMeType||(0,m.storeUserPublicSetting)(r,"lastMasterPasswordOpenSessionTimestamp",o))},Q=async e=>{await e.accountExistsLocally()?await e.attemptSync(n.Trigger.Login):await e.sync(n.Trigger.InitialLogin)},X=async e=>{const{sessionService:t,storeService:r}=e,n=t.getInstance().user,o=r.getState(),a=(0,N.recoveryInProgressSelector)(o);if(void 0!==(0,P.ssoMigrationInfoSelector)(o).migration||a)return!0;const s=!await n.accountExistsLocally(),c=(0,_.changeMPinProgressSelector)(o);if(s||c){try{await Q(n)}catch(e){throw new Error(i.AuthenticationCode[i.AuthenticationCode.UNKNOWN_SYNC_ERROR])}return!0}return!1};async function J(e,t,r){const{localDataEncryptorService:n,sessionService:i,storageService:a,storeService:s,applicationModulesAccess:c}=e,{login:u,otpType:d}=s.getAccountInfo();await(0,w.deleteAllLocalUserData)(a,c,u),await(0,v.generateLocalkeyAndSetupEncryptorService)(n,s,i,t),t===g.PersistData.PERSIST_DATA_YES&&(d===l.OtpType.OTP_LOGIN&&(0,m.storeUserPublicSetting)(s.getAccountInfo().login,"otp2",!0),await(0,k.persistLocalUsersAuthenticationData)(a,s));const p=i.getInstance().user;await p.refreshSessionData(),r?.requiredPermissions&&await q(s,i,r.requiredPermissions);const f=await(0,B.getDeviceLimitStatus)(e);return"noDeviceLimit"!==f._tag?(await(0,B.startDeviceLimitFlow)(e,f),o.LoginResultEnum.DeviceLimitFlow):ee(e,r)}async function ee(e,t){try{const{autoLoginService:r,eventBusService:n,sessionService:a,storeService:s,storageService:c,wsService:u}=e,l=a.getInstance().user,m=s.getState(),g=(0,O.userLoginSelector)(m);s.dispatch((0,p.confirmUserAuthentication)()),Z(s,t);const S=(0,N.recoveryInProgressSelector)(m),h=await X(e);if(!S){const e=await(0,f.getAndTriggerRefreshAccountInfo)(s,a,u);Y(s,c,e)}if(!1===h)try{await Q(l)}catch(e){throw new Error(i.AuthenticationCode[i.AuthenticationCode.UNKNOWN_SYNC_ERROR])}const y=await(0,I.getLocalAccounts)(s,c);(0,i.sendLocalAccounts)(y);const v="webauthn"!==(0,M.getLocalAccountRememberMeType)(g);return s.getUserSession().rememberMasterPassword&&v&&r.initialize(),s.getUserSession().shouldRememberMeForSSO&&v&&(await(0,M.persistLocalAccountRememberMeType)(s,"sso"),s.dispatch((0,K.setRememberMeTypeAction)("sso"))),n.sessionOpened({login:g}),"autologin"!==t?.triggeredByRememberMeType&&s.dispatch((0,d.updateLastMasterPasswordCheck)()),l.startPeriodic2FAInfoRefresh(),(0,b.refreshTwoFactorAuthenticationInfoService)(s,u),s.dispatch((0,d.updateSessionDidOpen)(!0)),o.LoginResultEnum.LoggedIn}catch(t){const{storeService:r}=e;throw r.dispatch((0,p.userAuthenticationFailed)()),r.dispatch((0,d.updateSessionDidOpen)(!1)),t}}t.sessionDidOpen=ee;const te=e=>e&&"object"==typeof e&&e.message===i.AuthenticationCode[i.AuthenticationCode.DEVICE_NOT_REGISTERED],re=e=>e?.message&&D.TokenOrOTPErrorCode.includes(e.message),ne=e=>e?.message&&D.DashlaneAuthenticatorErrorCode.includes(e.message),oe=async(e,t,r,n,o)=>{if(o)try{return await c.checkLogin(e,t,r)}catch(e){if(!te(e))throw e}const i=(0,A.ukiSelector)(e.getState());return i?a.checkLoginWithUki(e,n,i):a.requestDeviceRegistration(e)},ie=e=>e.getAccountInfo().isAuthenticated;function ae(e){if(!e||0===e.length)throw new Error(i.AuthenticationCode[i.AuthenticationCode.EMPTY_OTP])}function se(e){if(!e||0===e.length)throw new Error(i.AuthenticationCode[i.AuthenticationCode.EMPTY_TOKEN])}var ce;!function(e){e[e.AUTHORIZED=0]="AUTHORIZED",e[e.FORBIDDEN=1]="FORBIDDEN"}(ce=t.DifferentLoginAuthorized||(t.DifferentLoginAuthorized={}));const ue=e=>e?i.AuthenticationCode.ASK_MASTER_PASSWORD:i.AuthenticationCode.PROVIDE_EXTRA_DEVICE_TOKEN},9639:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.loginViaSSO=void 0;const n=r(82353),o=r(53576),i=r(751),a=r(56915),s=r(50058),c=r(16373),u=r(28445),d=r(88610),l=r(19399),p=r(64910),m=r(33769),g=r(16038),f=r(56668),S=r(46298),h=r(92029),y=r(25576),v=r(16356),E=r(70414),A=r(25576),_=r(16593),T=r(38981),I=r(17387),b=r(62712),w=r(61259),C=r(19083),D=r(61380),O=r(28287),P=r(86797),N=r(7624),R=r(658);t.loginViaSSO=async function(e,t){const{sessionService:r,storeService:a}=e,{ssoServiceProviderKey:s,exist:d,ssoToken:p,consents:m,currentAuths:g=h.SsoMigrationServerMethod.SSO,expectedAuths:f=h.SsoMigrationServerMethod.SSO,inStore:S,anonymousUserId:y}=t,v=(0,u.normalizeEmail)(t.login),E=(0,l.secureDeviceName)(t.deviceName),A={...t,login:v,deviceName:E};if(!(s&&v||S))return a.dispatch((0,c.addNewLoginNotification)({type:o.LoginNotificationType.SSO_SETUP_ERROR})),(0,w.makeReturnErrorObject)(h.LoginViaSsoCode.EMPTY_LOGIN);try{if(!d){const t={ssoServiceProviderKey:s,login:v,deviceName:E,ssoToken:p,consents:m,anonymousUserId:y};return await(0,i.createSSOAccount)(e,t)}if(!(0,w.isSupportedTransitionFlow)(g,f))return a.dispatch((0,c.addNewLoginNotification)({type:o.LoginNotificationType.SSO_SETUP_ERROR})),(0,w.makeReturnErrorObject)(h.LoginViaSsoCode.UNSUPPORTED_TRANSITION);if(g===h.SsoMigrationServerMethod.MP&&f===h.SsoMigrationServerMethod.SSO)return await M(e,A);if(g===h.SsoMigrationServerMethod.SSO&&f===h.SsoMigrationServerMethod.MP){const e={ssoUser:!0,migration:n.AuthenticationFlowContracts.SSOMigrationType.SSO_TO_MP};a.dispatch((0,N.storeSSOSettings)(e)),A.requiredPermissions=null}return r.setInstance(v,void 0),await r.getInstance().user.accountExistsLocally()?await L(e,A):await U(e,A)}catch(t){return(0,R.sendSsoLoginErrorLog)(e),a.dispatch((0,c.addNewLoginNotification)({type:o.LoginNotificationType.UNKNOWN_ERROR,message:t.message})),(0,w.makeReturnErrorObject)(h.LoginViaSsoCode.UNKNOWN_ERROR,t.message)}};const M=async(e,t)=>{const{storeService:r}=e;let{ssoServiceProviderKey:i,ssoToken:a}=t;const{login:s}=t,{isAuthenticated:u,otpType:l}=r.getAccountInfo();if(t.inStore){const e=(0,T.ssoSettingsSelector)(r.getState());if(i=e.ssoServiceProviderKey,a=e.ssoToken,!i||!a)return r.dispatch((0,c.addNewLoginNotification)({type:o.LoginNotificationType.SSO_SETUP_ERROR})),(0,w.makeReturnErrorObject)(h.LoginViaSsoCode.SSO_VERIFICATION_FAILED)}if(!u){const t={ssoUser:!0,serviceProviderUrl:"",ssoServiceProviderKey:i,ssoToken:a,migration:n.AuthenticationFlowContracts.SSOMigrationType.MP_TO_SSO};return r.dispatch((0,N.storeSSOSettings)(t)),(0,d.makeLoginController)(e).openSession(s),r.dispatch((0,c.addNewLoginNotification)({type:o.LoginNotificationType.RELOGIN_NEEDED})),(0,w.makeReturnErrorObject)(h.LoginViaSsoCode.INNACTIVE_SESSION)}if(l===P.OtpType.NO_OTP){const{success:e}=await(0,O.convertTokenToAuthTicket)(r,(0,I.makeSsoToken)(a));if(!e)return r.dispatch((0,c.addNewLoginNotification)({type:o.LoginNotificationType.SSO_SETUP_ERROR})),(0,w.makeReturnErrorObject)(h.LoginViaSsoCode.SSO_VERIFICATION_FAILED)}const p={newPassword:i,flow:D.ChangeMPFlowPath.MP_TO_SSO},m=await(0,C.changeMasterPassword)(e,p);return!1===m.success?(r.dispatch((0,c.addNewLoginNotification)({type:o.LoginNotificationType.UNKNOWN_ERROR,message:m.error.code})),m):(r.dispatch((0,N.resetSSOSettings)()),(0,w.successResponse)())},L=async(e,{login:t,ssoServiceProviderKey:r,ssoToken:n,requiredPermissions:i,shouldRememberMeForSSO:s})=>{const{storeService:u}=e,l=(0,a.getDeviceIdSelector)(u.getState(),t);if(null===l)throw new Error(y.AuthenticationCode[y.AuthenticationCode.DEVICE_NOT_REGISTERED]);const E=await(0,O.convertTokenToAuthTicket)(u,(0,I.makeSsoToken)(n));if(!1===E.success){const{error:{message:e}}=E;return u.dispatch((0,c.addNewLoginNotification)({type:o.LoginNotificationType.SSO_SETUP_ERROR})),(0,w.makeReturnErrorObject)(h.LoginViaSsoCode.SSO_VERIFICATION_FAILED,e)}const _=E.authTicket,T=await(0,b.completeLoginWithAuthTicket)(u,{login:t,deviceAccessKey:l,authTicket:_});if((0,S.isApiError)(T))return(0,w.formatAPIError)(T);const{masterPasswordEncryptorService:C,remoteDataEncryptorService:D}=e,{ssoServerKey:P,remoteKeys:N}=T,R=(0,g.base64ToBuffer)(P),M=N.filter((e=>"sso"===e.type))[0];let L;try{const e=(0,g.base64ToBuffer)(r),t=(0,m.getEncryptionKeyBuffer)(e,R,{skipDerivation:!0});L=(0,g.arrayBufferToText)(t);const n=(0,p.getNoDerivationCryptoConfig)();C.setInstance({raw:L},"",n);const o=await C.getInstance().decrypt(M.key),i=(0,f.deflatedUtf8ToUtf16)(o,{skipUtf8Decoding:!0,skipInflate:!0});D.setInstance({raw:i},"",n),u.dispatch((0,v.updateRemoteKey)(i))}catch(e){return{success:!1,error:{code:h.LoginViaSsoCode.WRONG_PASSWORD}}}const U=A.PersistData.PERSIST_DATA_YES;return await(0,d.openSessionWithMasterPassword)(e,t,L,{isDataPersisted:U,serverKey:"",requiredPermissions:i,isSsoLogin:!0,shouldRememberMeForSSO:s}),(0,w.successResponse)()},U=async(e,t)=>{const{storeService:r,masterPasswordEncryptorService:n,remoteDataEncryptorService:o}=e,{deviceName:i,ssoToken:a,login:c,ssoServiceProviderKey:u,requiredPermissions:l,shouldRememberMeForSSO:p}=t;r.dispatch((0,s.updateLocalUserInfo)(c,{ssoActivatedUser:!0}));const m=A.PersistData.PERSIST_DATA_YES,g={masterPasswordEncryptorService:n,remoteDataEncryptorService:o,ssoServiceProviderKey:u};await(0,E.registerDevice)(r,m,(0,I.makeSsoToken)(a),!1,i,g);const f=e.storeService.getState(),S=(0,_.masterPasswordSelector)(f);return await(0,d.openSessionWithMasterPassword)(e,c,S,{isDataPersisted:m,serverKey:"",requiredPermissions:l,isSsoLogin:!0,shouldRememberMeForSSO:p}),(0,w.successResponse)()}},92029:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LoginViaSsoCode=t.SsoMigrationServerMethod=void 0,function(e){e.SSO="sso",e.MP="master_password"}(t.SsoMigrationServerMethod||(t.SsoMigrationServerMethod={})),function(e){e.SUCCESS="SUCCESS",e.ASK_NEW_MP="ASK_NEW_MP",e.EMPTY_LOGIN="EMPTY_LOGIN",e.INNACTIVE_SESSION="INNACTIVE_SESSION",e.SSO_VERIFICATION_FAILED="SSO_VERIFICATION_FAILED",e.UNKNOWN_ERROR="UNKNOWN_ERROR",e.UNSUPPORTED_TRANSITION="UNSUPPORTED_TRANSITION",e.WRONG_PASSWORD="WRONG_PASSWORD"}(t.LoginViaSsoCode||(t.LoginViaSsoCode={}))},61259:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.triggerServiceProviderUrlRedirect=t.successResponse=t.makeReturnErrorObject=t.formatAPIError=t.isSupportedTransitionFlow=void 0;const n=r(92029),o=r(46298),i=r(81228),a=r(38981);t.isSupportedTransitionFlow=(e,t)=>e===n.SsoMigrationServerMethod.SSO?t===n.SsoMigrationServerMethod.SSO||t===n.SsoMigrationServerMethod.MP:e===n.SsoMigrationServerMethod.MP&&t===n.SsoMigrationServerMethod.SSO,t.formatAPIError=e=>{switch(e.code){case o.B2bSsoUserNotFound:case o.InvalidSsoToken:case o.DeviceNotFound:case o.InvalidAuthTicket:return(0,t.makeReturnErrorObject)(n.LoginViaSsoCode.SSO_VERIFICATION_FAILED,e.message);default:return(0,t.makeReturnErrorObject)(n.LoginViaSsoCode.UNKNOWN_ERROR,e.message)}},t.makeReturnErrorObject=(e,t)=>({success:!1,error:{code:e,message:t}}),t.successResponse=(e=n.LoginViaSsoCode.SUCCESS)=>({success:!0,code:e}),t.triggerServiceProviderUrlRedirect=function(e,t){const r=`${(0,a.serviceProviderUrlSelector)(e)}?username=${t}`;return(0,i.emitServiceProviderUrl)(r),r}},30322:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0;const n=r(46430),o=r(57634),i=r(49154),a=r(27331);t.bootstrap=(e,t,r)=>{if(e.register(n.config),r.connectors.deviceLimit){const e=new i.DeviceLimitCapabilityEventBus(t,r.connectors.deviceLimit),n=(0,a.getDeviceLimitFlowEventsManager)(t.storeService);(0,o.setupDeviceLimitEventBus)(e,n)}}},658:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sendMasterPasswordLoginErrorLog=t.sendSsoLoginErrorLog=t.sendBiometricLoginErrorLog=t.sendDashlaneAuthenticatorErrorLog=t.sendOTPErrorLog=t.sendOTPForNewDeviceErrorLog=t.sendEmailTokenErrorLog=t.sendLoginSuccessEventLog=t.sendAskSSOAuthenticationEventLog=t.sendAskBiometricAuthenticationEventLog=t.sendAskAuthenticationEventLog=void 0;const n=r(92233),o=r(66102),i=r(86797);var a;!function(e){e.AUTOLOGIN="autologin",e.WEBAUTHN="webauthn",e.DISABLED="disabled"}(a||(a={}));const s=(e,t,r)=>{switch(e){case i.OtpType.NO_OTP:return t?r?n.VerificationMode.AuthenticatorApp:n.VerificationMode.EmailToken:n.VerificationMode.None;case i.OtpType.OTP_NEW_DEVICE:return n.VerificationMode.Otp1;case i.OtpType.OTP_LOGIN:return n.VerificationMode.Otp2;default:return n.VerificationMode.None}},c=async(e,t,r)=>{await(0,o.logEvent)(t,{event:new n.UserAskAuthenticationEvent({mode:e,reason:n.Reason.Login,verificationMode:r})})};t.sendAskAuthenticationEventLog=c.bind(null,n.Mode.MasterPassword),t.sendAskBiometricAuthenticationEventLog=c.bind(null,n.Mode.Biometric),t.sendAskSSOAuthenticationEventLog=c.bind(null,n.Mode.Sso),t.sendLoginSuccessEventLog=async({services:e,isInitial:t,isSsoLogin:r,rememberMeType:i})=>{r?await(async(e,t)=>{await(0,o.logEvent)(e,{event:new n.UserLoginEvent({mode:n.Mode.Sso,status:n.Status.Success,isFirstLogin:t,isBackupCode:!1,verificationMode:n.VerificationMode.None})})})(e,t):i&&i===a.WEBAUTHN?await(async e=>{await(0,o.logEvent)(e,{event:new n.UserLoginEvent({mode:n.Mode.Biometric,status:n.Status.Success,isFirstLogin:!1,isBackupCode:!1,verificationMode:n.VerificationMode.None})})})(e):i&&i===a.DISABLED&&await(async(e,t)=>{const{otpType:r}=e.storeService.getAccountInfo(),{isUsingBackupCode:i,isUsingDashlaneAuthenticator:a}=e.storeService.getUserSession(),c=s(r,t,a);await(0,o.logEvent)(e,{event:new n.UserLoginEvent({mode:n.Mode.MasterPassword,status:n.Status.Success,isFirstLogin:t,isBackupCode:i,verificationMode:c})})})(e,t)},t.sendEmailTokenErrorLog=async e=>{await(0,o.logEvent)(e,{event:new n.UserLoginEvent({mode:n.Mode.MasterPassword,status:n.Status.ErrorWrongOtp,isFirstLogin:!0,isBackupCode:!1,verificationMode:n.VerificationMode.EmailToken})})},t.sendOTPForNewDeviceErrorLog=async(e,t)=>{const{otpType:r}=e.storeService.getAccountInfo();await(0,o.logEvent)(e,{event:new n.UserLoginEvent({mode:n.Mode.MasterPassword,status:n.Status.ErrorWrongOtp,isFirstLogin:!0,isBackupCode:t,verificationMode:r===i.OtpType.OTP_LOGIN?n.VerificationMode.Otp2:n.VerificationMode.Otp1})})},t.sendOTPErrorLog=async(e,t)=>{await(0,o.logEvent)(e,{event:new n.UserLoginEvent({mode:n.Mode.MasterPassword,status:n.Status.ErrorWrongOtp,isFirstLogin:!1,isBackupCode:t,verificationMode:n.VerificationMode.Otp2})})},t.sendDashlaneAuthenticatorErrorLog=async e=>{await(0,o.logEvent)(e,{event:new n.UserLoginEvent({mode:n.Mode.MasterPassword,status:n.Status.ErrorWrongOtp,isFirstLogin:!0,isBackupCode:!1,verificationMode:n.VerificationMode.AuthenticatorApp})})},t.sendBiometricLoginErrorLog=async e=>{await(0,o.logEvent)(e,{event:new n.UserLoginEvent({mode:n.Mode.Biometric,status:n.Status.ErrorUnknown,isFirstLogin:!1,isBackupCode:!1,verificationMode:n.VerificationMode.None})})},t.sendSsoLoginErrorLog=async e=>{await(0,o.logEvent)(e,{event:new n.UserLoginEvent({mode:n.Mode.Sso,status:n.Status.ErrorInvalidSso,isBackupCode:!1,verificationMode:n.VerificationMode.None})})},t.sendMasterPasswordLoginErrorLog=async(e,t)=>{const{otpType:r}=e.storeService.getAccountInfo(),{isUsingBackupCode:i,isUsingDashlaneAuthenticator:a}=e.storeService.getUserSession(),c=s(r,t,a);await(0,o.logEvent)(e,{event:new n.UserLoginEvent({mode:n.Mode.MasterPassword,status:n.Status.ErrorWrongPassword,isFirstLogin:t,isBackupCode:i,verificationMode:c})})}},69718:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addLoginNotification=void 0;const n=r(16373);t.addLoginNotification=async function(e,t){const{storeService:r}=e;r.dispatch((0,n.addNewLoginNotification)(t))}},40588:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0;var n=r(30322);Object.defineProperty(t,"bootstrap",{enumerable:!0,get:function(){return n.bootstrap}})},24579:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setupSubscriptions=void 0;const n=r(58639),o=r(1965),i=r(90622),a=r(48990),s=r(31937),c=r(18216);t.setupSubscriptions=function(e,t){e.appInitialized.on((async e=>{if(e.initMode===c.InitMode.FirstInit){const{storageService:e,storeService:r,applicationModulesAccess:c}=t;await(0,o.deviceRemoteDeletion)(r,e,c);const u=await(0,i.getLocalAccounts)(r,e);await(0,s.restoreLastAuthenticatedUser)(t,u),(0,n.sendLocalAccounts)(u),t.storeService.dispatch((0,a.localAccountsListUpdated)(u))}}))}},15606:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DashlaneAuthenticatorErrorCode=t.TokenOrOTPErrorCode=void 0;const n=r(6629);t.TokenOrOTPErrorCode=[n.AuthenticationCode.TOKEN_EXPIRED,n.AuthenticationCode.TOKEN_NOT_VALID,n.AuthenticationCode.TOKEN_TOO_MANY_ATTEMPTS,n.AuthenticationCode.EMPTY_TOKEN,n.AuthenticationCode.OTP_ALREADY_USED,n.AuthenticationCode.OTP_NOT_VALID,n.AuthenticationCode.OTP_TOO_MANY_ATTEMPTS,n.AuthenticationCode.EMPTY_OTP,n.AuthenticationCode.BACKUP_CODE_NOT_VALID],t.DashlaneAuthenticatorErrorCode=[n.AuthenticationCode.DASHLANE_AUTHENTICATOR_LOGIN_CANCELLED,n.AuthenticationCode.DASHLANE_AUTHENTICATOR_PUSH_NOTIFICATION_DENIED,n.AuthenticationCode.FAILED_TO_CONTACT_AUTHENTICATOR_DEVICE]},13465:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const n=r(90822),o=r(96205),i=r(85316),a=r(69718);t.config={commands:{addLoginNotification:{handler:a.addLoginNotification},clearAllStoredLoginNotification:{handler:o.clearAllStoredLoginNotification}},queries:{getLoginNotifications:{selector:n.loginNotificationListSelector}},liveQueries:{liveLoginNotifications:{operator:i.loginNotificationList$}}}},97046:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0;const n=r(13465);t.bootstrap=e=>{e.register(n.config)}},39952:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0;var n=r(97046);Object.defineProperty(t,"bootstrap",{enumerable:!0,get:function(){return n.bootstrap}})},85316:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.loginNotificationList$=void 0;const n=r(18948),o=r(3343),i=r(90822);t.loginNotificationList$=()=>(0,n.pipe)((0,o.map)(i.loginNotificationListSelector),(0,o.distinctUntilChanged)())},90822:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.loginNotificationListSelector=void 0,t.loginNotificationListSelector=e=>e.inMemoryInterSessionUnsynced.loginNotification},96205:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.clearAllStoredLoginNotification=void 0;const n=r(16373);t.clearAllStoredLoginNotification=async e=>(e.storeService.dispatch((0,n.resetAllLoginNotification)()),{success:!0})},90014:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const n=r(16088),o=r(85493),i=r(93069),a=r(6737);t.config={commands:{updateLoginStepInfo:{handler:i.updateLoginStepInfoHandler},resetLoginStepInfo:{handler:a.resetLoginStepInfoHandler}},queries:{getLoginStepInfo:{selector:n.loginStepInfoSelector}},liveQueries:{liveLoginStepInfo:{operator:o.liveLoginStepInfo$}}}},74536:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LoginStep=void 0;var n=r(33831);Object.defineProperty(t,"LoginStep",{enumerable:!0,get:function(){return n.LoginStep}})},35924:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.resetLoginStepInfo=t.updateLoginStepInfoStep=t.updateLoginStepInfoLogin=t.RESET_LOGIN_STEP_INFO=t.UPDATE_LOGIN_STEP_INFO_STEP=t.UPDATE_LOGIN_STEP_INFO_LOGIN=void 0,t.UPDATE_LOGIN_STEP_INFO_LOGIN="UPDATE_LOGIN_STEP_INFO_LOGIN",t.UPDATE_LOGIN_STEP_INFO_STEP="UPDATE_LOGIN_STEP_INFO_STEP",t.RESET_LOGIN_STEP_INFO="RESET_LOGIN_STEP_INFO",t.updateLoginStepInfoLogin=e=>({type:t.UPDATE_LOGIN_STEP_INFO_LOGIN,login:e}),t.updateLoginStepInfoStep=e=>({type:t.UPDATE_LOGIN_STEP_INFO_STEP,step:e}),t.resetLoginStepInfo=()=>({type:t.RESET_LOGIN_STEP_INFO})},16088:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.loginStepInfoSelector=void 0,t.loginStepInfoSelector=e=>{const t=e.userSession.localSettings.loginStepInfo;return t?.step?t:null}},24413:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0;const n=r(90014);t.bootstrap=e=>{e.register(n.config)}},6737:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.resetLoginStepInfoHandler=void 0;const n=r(35924);t.resetLoginStepInfoHandler=e=>(e.storeService.dispatch((0,n.resetLoginStepInfo)()),e.sessionService.getInstance().user.persistLocalSettings(),Promise.resolve())},93069:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.updateLoginStepInfoHandler=void 0;const n=r(35924);t.updateLoginStepInfoHandler=(e,t)=>(void 0!==t.login&&e.storeService.dispatch((0,n.updateLoginStepInfoLogin)(t.login)),void 0!==t.step&&e.storeService.dispatch((0,n.updateLoginStepInfoStep)(t.step)),e.sessionService.getInstance().user.persistLocalSettings(),Promise.resolve())},37824:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0;var n=r(24413);Object.defineProperty(t,"bootstrap",{enumerable:!0,get:function(){return n.bootstrap}})},85493:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.liveLoginStepInfo$=void 0;const n=r(18948),o=r(3343),i=r(16088);t.liveLoginStepInfo$=()=>(0,n.pipe)((0,o.map)(i.loginStepInfoSelector),(0,o.distinctUntilChanged)())},33831:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LoginStep=void 0,function(e){e.Email="email",e.Welcome="welcome",e.OTP1="OTP1",e.OTP2="OTP2",e.BackupCodeOTP1="backupCodeOTP1",e.BackupCodeOTP2="backupCodeOTP2",e.OTPToken="token",e.Password="password",e.SSO="SSO",e.ActivateSSO="activateSSO",e.WebAuthn="webAuthn",e.WebAuthnError="webAuthnError",e.DeviceLimitReached="deviceLimitReached",e.DashlaneAuthenticator="dashlaneAuthenticator",e.PasswordLess="passwordLess"}(t.LoginStep||(t.LoginStep={}))},82413:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Debugger=void 0;const n=r(4939),o=r(4407),i=([e,...t])=>{let r="",n=[];"string"==typeof e?r=e:n=[e],n=[...n,...t];const o=(e=>e.reduce(((e,t)=>{const r=Object.keys(e).length;return{...e,[r]:t}}),{}))(n);return{message:r,details:o}},a=function(){const e=e=>(...t)=>{const r={...i(t),level:e};(0,n.log)(r)};return{log:e(o.LogLevel.Debug),info:e(o.LogLevel.Info),warn:e(o.LogLevel.Warn),error:e(o.LogLevel.Error)}}();t.Debugger=a,t.default=a},4939:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.redirectConsoleLogs=t.logVerbose=t.logDebug=t.logInfo=t.logWarn=t.logError=t.log=void 0;const n=r(16516),o=r(48749),i=r(43051),a=r(4407),s=r(82569),c=r(17825),u=r(32588);let d=null;const l=e=>t=>{const{level:r=a.LogLevel.Error}=t,n=(e=>{switch(e){case a.LogLevel.Error:return console.error;case a.LogLevel.Warn:return console.warn;case a.LogLevel.Info:return console.info;case a.LogLevel.Verbose:return console.log;case a.LogLevel.Debug:return console.debug;default:return(0,c.assertUnreachable)(e)}})(r),o=e(t);n.call(this,o)},p=(0,s.formatLogEntry)(s.formatLogEntryDetail),m=(e,t)=>r=>n=>t(n[e])&&r(n),g=m("tag",((e=[])=>{const t=o.config.LOG_TAGS||[],r="string"==typeof t?[t]:[...t],n="string"==typeof e?[e]:[...e];return!r.length||r.some((e=>n.includes(e)))})),f=m("level",(e=>e>=o.config.LOG_LEVEL)),S=(0,n.pipe)((e=>t=>(d||l(e))(t)),f,g)(p);S({message:"~~~ Logs activated ~~~",level:a.LogLevel.Info,tag:[u.LOGS_LOG_TAG,u.DEBUGGER_LOG_TAG]}),t.log=S,t.logError=(0,i.withErrorLevel)(S),t.logWarn=(0,i.withWarnLevel)(S),t.logInfo=(0,i.withInfoLevel)(S),t.logDebug=(0,i.withDebugLevel)(S),t.logVerbose=(0,i.withVerboseLevel)(S),t.redirectConsoleLogs=e=>(d=e,()=>{d=null})},43051:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.withVerboseLevel=t.withDebugLevel=t.withInfoLevel=t.withWarnLevel=t.withErrorLevel=t.withTag=t.withLevel=void 0;const n=r(4407),o=(e,t)=>r=>n=>r({[e]:t,...n});t.withLevel=e=>o("level",e),t.withTag=e=>o("tag",e),t.withErrorLevel=(0,t.withLevel)(n.LogLevel.Error),t.withWarnLevel=(0,t.withLevel)(n.LogLevel.Warn),t.withInfoLevel=(0,t.withLevel)(n.LogLevel.Info),t.withDebugLevel=(0,t.withLevel)(n.LogLevel.Debug),t.withVerboseLevel=(0,t.withLevel)(n.LogLevel.Verbose)},82569:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.formatLogEntryDetail=t.formatLogEntry=void 0;const n=r(92263),o=r(4407);function i(e){const{stack:t}=e;let r=`${e}`;return t&&"string"==typeof t&&t.substr(0,t.indexOf("\n"))===r&&(r=""),`${r}${r?`\n${t}`:t}`}const a={[o.LogLevel.Error]:"(e)",[o.LogLevel.Warn]:"(w)",[o.LogLevel.Info]:"(i)",[o.LogLevel.Debug]:"(d)",[o.LogLevel.Verbose]:"(v)"};t.formatLogEntry=e=>t=>{const{details:r={},level:n=o.LogLevel.Debug,message:i,tag:s=[]}=t,c=function(e){const t=Array.isArray(e)?e:[e];return t.length?` [${t.join("|")}]`:""}(s),u=a[n],d=Boolean(i),l=d?` ${i}`:"",p=function(e,t,r){return Object.keys(t).reduce(((n,o)=>!Number.isInteger(parseInt(o,10))&&r?`${n} ${o}:${e(t[o])}`:`${n} ${e(t[o])}`),"")}(e,r,d);return`${u}${c}${l}${p}`},t.formatLogEntryDetail=e=>(0,n.isCarbonError)(e)?function(e){const t=JSON.stringify(e.getAdditionalInfo()),r=t?`\n${t}`:"";return`${i(e)}${r}`}(e):e instanceof Error?i(e):"object"==typeof e?JSON.stringify(e):String(e)},95623:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),t.withWarnLevel=t.withVerboseLevel=t.withTag=t.withLevel=t.withInfoLevel=t.withErrorLevel=t.withDebugLevel=t.Silent=t.LogLevel=t.redirectConsoleLogs=t.logWarn=t.logVerbose=t.logInfo=t.logError=t.logDebug=t.log=void 0;const i=r(82413);t.default=i.Debugger;var a=r(4939);Object.defineProperty(t,"log",{enumerable:!0,get:function(){return a.log}}),Object.defineProperty(t,"logDebug",{enumerable:!0,get:function(){return a.logDebug}}),Object.defineProperty(t,"logError",{enumerable:!0,get:function(){return a.logError}}),Object.defineProperty(t,"logInfo",{enumerable:!0,get:function(){return a.logInfo}}),Object.defineProperty(t,"logVerbose",{enumerable:!0,get:function(){return a.logVerbose}}),Object.defineProperty(t,"logWarn",{enumerable:!0,get:function(){return a.logWarn}}),Object.defineProperty(t,"redirectConsoleLogs",{enumerable:!0,get:function(){return a.redirectConsoleLogs}}),o(r(82413),t);var s=r(4407);Object.defineProperty(t,"LogLevel",{enumerable:!0,get:function(){return s.LogLevel}}),Object.defineProperty(t,"Silent",{enumerable:!0,get:function(){return s.Silent}});var c=r(43051);Object.defineProperty(t,"withDebugLevel",{enumerable:!0,get:function(){return c.withDebugLevel}}),Object.defineProperty(t,"withErrorLevel",{enumerable:!0,get:function(){return c.withErrorLevel}}),Object.defineProperty(t,"withInfoLevel",{enumerable:!0,get:function(){return c.withInfoLevel}}),Object.defineProperty(t,"withLevel",{enumerable:!0,get:function(){return c.withLevel}}),Object.defineProperty(t,"withTag",{enumerable:!0,get:function(){return c.withTag}}),Object.defineProperty(t,"withVerboseLevel",{enumerable:!0,get:function(){return c.withVerboseLevel}}),Object.defineProperty(t,"withWarnLevel",{enumerable:!0,get:function(){return c.withWarnLevel}})},4407:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Silent=t.LogLevel=void 0,function(e){e[e.Verbose=0]="Verbose",e[e.Debug=10]="Debug",e[e.Info=20]="Info",e[e.Warn=30]="Warn",e[e.Error=40]="Error"}(t.LogLevel||(t.LogLevel={})),t.Silent=100},59398:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const n=r(66102);t.config={commands:{logEvent:{handler:n.logEvent},logPageView:{handler:n.logPageView},flushQueue:{handler:n.flushQueue}},queries:{},liveQueries:{}}},82481:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StyxApiResult=void 0,function(e){e[e.AllBatchesSent=0]="AllBatchesSent",e[e.SomeBatchesSent=1]="SomeBatchesSent",e[e.NoBatchesSent=2]="NoBatchesSent"}(t.StyxApiResult||(t.StyxApiResult={}))},38912:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.updateEventLoggerVirtualStoreState=t.UPDATE_EVENT_LOGGER_STATE=t.createEventLoggerVirtualStore=t.CREATE_EVENT_LOGGER_VIRTUAL_STORE=void 0,t.CREATE_EVENT_LOGGER_VIRTUAL_STORE="CREATE_EVENT_LOGGER_VIRTUAL_STORE",t.createEventLoggerVirtualStore=({storeName:e,initialState:r})=>({type:t.CREATE_EVENT_LOGGER_VIRTUAL_STORE,storeName:e,initialState:r}),t.UPDATE_EVENT_LOGGER_STATE="UPDATE_EVENT_LOGGER_STATE",t.updateEventLoggerVirtualStoreState=({storeName:e,updater:r})=>({type:t.UPDATE_EVENT_LOGGER_STATE,storeName:e,updater:r})},52895:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0;const n=r(59398);t.bootstrap=(e,t)=>{e.register(n.config),t.eventLoggerService.initRepository()}},87911:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.decryptEvents=t.encryptEvents=void 0;const n=r(72365),o=r(91301),i=r(65675),a=r(56668);t.encryptEvents=async function(e,t,r){const s=JSON.stringify(t),c=(0,a.deflateUtf16)(s);return await async function({storeService:e,encryptionKey:t,data:r}){const a=(0,n.makeDataEncryptorService)(e),{cryptoConfig:s}=(0,i.parsePayload)(o.CRYPTO_NODERIVATION_HMAC64);a.setInstance({raw:t},"",s);const c=await a.getInstance().encrypt(r);return a.close(),c}({storeService:e,encryptionKey:r,data:c})},t.decryptEvents=async function(e,t,r){const o=await async function({storeService:e,encryptedData:t,encryptionKey:r}){const o=(0,n.makeDataEncryptorService)(e);o.setInstance({raw:r},"");const i=await o.getInstance().decrypt(t);return o.close(),i}({storeService:e,encryptedData:t,encryptionKey:r}),i=(0,a.inflateUtf16)(o);return JSON.parse(i)}},26415:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.chunkArray=t.getOsContext=t.getOsVersion=t.getOsType=t.getBrowserContext=t.getAppContext=t.applicationBuildTypeToHermesBuildType=t.platformStringToAppPlatform=t.createLogger=void 0;const n=r(92233),o=r(57323),i=r(48749),a=r(59600);t.createLogger=e=>{const{eventLoggerService:t}=e,r=t.getRepository();return{logger:r.createLogger(),logRepository:r}},t.platformStringToAppPlatform=e=>{switch(e){case"server_standalone":case"server_carbon_simulator":case"server_carbon_unknown":case"server_carbon_tests":return n.Platform.Saex;case"server_leeloo_dev":case"server_leeloo":case"server_tac":return n.Platform.Web;case"desktop_win":throw new Error(`Hermes Web SDK: Unsupported platform "${e}" detected. This platform is not supported by the Hermes Web SDK or Styx API.`)}},t.applicationBuildTypeToHermesBuildType=e=>{switch(e){case a.ApplicationBuildType.DEV:return n.BuildType.Dev;case a.ApplicationBuildType.QA:return n.BuildType.Qa;case a.ApplicationBuildType.NIGHTLY:return n.BuildType.Nightly;default:return n.BuildType.Production}},t.getAppContext=e=>{const r=e.getPlatformInfo(),n=e.getState().device.application.settings.buildType;return{platform:(0,t.platformStringToAppPlatform)(r.platformName),version:(o=r.appVersion,a=i.config.MANIFEST_VERSION,a?o+"-mv"+a:o),build_type:(0,t.applicationBuildTypeToHermesBuildType)(n)};var o,a},t.getBrowserContext=()=>({name:o.browser.getBrowserName(),version:o.browser.getBrowserVersion(),user_agent:o.navigator.getNavigator().userAgent}),t.getOsType=e=>{let t=n.OsType.Other;const r=e.os.toLowerCase().replace(/[ -/]+/g,"_");return Object.values(n.OsType).map((e=>e.toString())).includes(r)&&(t=r),t},t.getOsVersion=e=>{const t="Mac OS"===e.os?e.osVersion.replace("OS_X_","").replace(/_/g,"."):e.osVersion,r=/([0-9]{1,3}(?:\.[0-9]{0,4}){0,2})/.exec(t);return r&&r.length>=2?r[1]:"0"},t.getOsContext=e=>{const r=e.getPlatformInfo();return{type:(0,t.getOsType)(r),version:(0,t.getOsVersion)(r),locale:r.lang}},t.chunkArray=function e(t,r){return t.length<=r?[t]:[t.slice(0,r),...e(t.slice(r),r)]}},74412:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makeEventLoggerService=t.bootstrap=void 0;const n=r(92233),o=r(48749),i=r(26415),a=r(2246),s=r(87564),c=r(10460),u=r(78671),d=r(99921);var l=r(52895);Object.defineProperty(t,"bootstrap",{enumerable:!0,get:function(){return l.bootstrap}}),t.makeEventLoggerService=e=>{let t=null;const r=()=>{if(!t)throw new Error("makeEventLoggerService: You must call initRepository() before getting the repository instance");const r=e.storeService.getUserSession();return(r.analyticsIds?.userAnalyticsId||r.analyticsIds?.deviceAnalyticsId)&&t.setTrackingInfo(r.analyticsIds.userAnalyticsId,r.analyticsIds.deviceAnalyticsId),t};return{initRepository:()=>{const r=e.storeService,s=(0,i.getAppContext)(r),c=(0,i.getOsContext)(r),u=(0,i.getBrowserContext)(),l=(0,a.getCommonAppSetting)("installationId"),p=new d.EventLoggerStoreFactory(r);t=new n.LogRepository(s,c,u,l,void 0,!1,p);const m=r.getUserSession();(m.analyticsIds?.userAnalyticsId||m.analyticsIds?.deviceAnalyticsId)&&t.setTrackingInfo(m.analyticsIds.userAnalyticsId,m.analyticsIds.deviceAnalyticsId),3===o.config.MANIFEST_VERSION&&t.setServiceWorkerStartTime((new Date).toISOString())},getRepository:r,logEvent:async n=>{const{interactionDataConsent:o}=await(0,u.getGlobalExtensionSettings)(e);if(!1!==o)return r().createLogger().logEvent(n),(0,c.storeEventsInQueue)(e,t)},logSync:async n=>{const{interactionDataConsent:o}=await(0,u.getGlobalExtensionSettings)(e);if(!1!==o)return r().createLogger().logEvent(n),(0,c.storeEventsInQueue)(e,t)},flushEventQueue:()=>(0,s.sendEventQueueToStyx)(e)}}},4296:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.immediatelySendEvents=t.queueEvents=t.queueLogRepositoryEvents=void 0;const n=r(59600),o=r(30913),i=r(82481),a=r(87564),s=r(10460);async function c(e,t){const r=t.logStorage.containsPriorityEvent();try{return await(0,s.storeEventsInQueue)(e,t),r?await(0,a.sendEventQueueToStyx)(e):{success:!0,result:i.StyxApiResult.NoBatchesSent}}catch(e){return{success:!1,result:i.StyxApiResult.NoBatchesSent}}}async function u(e,t){try{return await(0,a.immediatelySendEventsToStyx)(e,t)}catch(e){return{success:!1,result:i.StyxApiResult.NoBatchesSent}}}t.queueLogRepositoryEvents=async function(e,t){return(0,o.applicationBuildTypeSelector)(e.storeService.getState())===n.ApplicationBuildType.QA?u(e,t):c(e,t)},t.queueEvents=c,t.immediatelySendEvents=u},19764:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.eventLoggerReducer=void 0;const n=r(38912);t.eventLoggerReducer=(e={},t)=>{switch(t.type){case n.CREATE_EVENT_LOGGER_VIRTUAL_STORE:return{[t.storeName]:t.initialState};case n.UPDATE_EVENT_LOGGER_STATE:return{[t.storeName]:t.updater(e[t.storeName])};default:return e}}},39261:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.styxKeysSelector=void 0,t.styxKeysSelector=e=>e.userSession.sdkAuthentication.styxKeys},87564:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.immediatelySendEventsToStyx=t.sendEventQueueToStyx=void 0;const n=r(2246),o=r(45956),i=r(76330),a=r(38250),s=r(87911),c=r(26415),u=r(10460),d=450;let l=!1;async function p(e,t,r){let n=[];if(!t||0===t.length)return n;const a=(0,i.getMakeStyxApiRequest)(r,o.ApiAuthType.App,o.ApiRequestMethod.POST),s=(0,c.chunkArray)(t,d);try{for(const t of s){if(!(await a(e,{payload:(0,i.getEventsPayload)(t)})).success)break;n=n.concat(t.map((({id:e})=>e)))}}catch{return n}return n}t.sendEventQueueToStyx=async function(e){if(!0===l)return{success:!0,result:a.StyxApiResult.NoBatchesSent};l=!0;const{storageService:t,storeService:r}=e,o=t.getLocalStorage(),i=(0,n.getCommonAppSetting)("eventLoggerQueueKey");if(!await o.itemExists(u.EVENT_QUEUE_STORAGE_KEY))return l=!1,{success:!0,result:a.StyxApiResult.NoBatchesSent};const c=await o.readItem(u.EVENT_QUEUE_STORAGE_KEY);if(!c)return l=!1,{success:!0,result:a.StyxApiResult.NoBatchesSent};if("string"!=typeof c)throw new Error("value of EventLogger.eventQueue is expected to be a string");const d=await(0,s.decryptEvents)(r,c,i),m=d.filter((e=>"anonymous"===e.category)),g=d.filter((e=>"user"===e.category)),f=await p(r,m,"/v1/event/anonymous"),S=await p(r,g,"/v1/event/user"),h=await o.readItem(u.EVENT_QUEUE_STORAGE_KEY);if("string"!=typeof h)throw new Error("value of EventLogger.eventQueue is expected to be a string");const y=(await(0,s.decryptEvents)(r,h,i)).filter((({id:e})=>!(f.includes(e)||S.includes(e)))),v=await(0,s.encryptEvents)(r,y,i);await o.writeItem(u.EVENT_QUEUE_STORAGE_KEY,v);const E=f.length>0||S.length>0,A=0===v.length;let _=a.StyxApiResult.NoBatchesSent;return A?_=a.StyxApiResult.AllBatchesSent:E&&(_=a.StyxApiResult.SomeBatchesSent),l=!1,{success:!0,result:_}},t.immediatelySendEventsToStyx=async function(e,t){const{storeService:r}=e,n=t.logStorage.copy();t.logStorage.removeEvents(n.map((e=>e.id)));const o=n.filter((e=>"anonymous"===e.category)),i=n.filter((e=>"user"===e.category)),s=await p(r,o,"/v1/event/anonymous"),c=await p(r,i,"/v1/event/user"),u=s.length>0||c.length>0,d=s.length+c.length===n.length;let l=a.StyxApiResult.NoBatchesSent;return d?l=a.StyxApiResult.AllBatchesSent:u&&(l=a.StyxApiResult.SomeBatchesSent),{success:!0,result:l}}},66102:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.flushQueue=t.logToggleAnalyticsEvent=t.logPageView=t.logEvent=void 0;const n=r(92233),o=r(78671),i=r(82481),a=r(26415),s=r(4296),c=r(87564),u=r(10460);t.logEvent=async function(e,t){const{interactionDataConsent:r}=await(0,o.getGlobalExtensionSettings)(e);if(!1===r)return{result:i.StyxApiResult.NoBatchesSent,success:!1};const{logger:n,logRepository:c}=(0,a.createLogger)(e);return n.logEvent(t.event),(0,s.queueLogRepositoryEvents)(e,c)},t.logPageView=async function(e,t){const{interactionDataConsent:r}=await(0,o.getGlobalExtensionSettings)(e);if(!1===r)return{result:i.StyxApiResult.NoBatchesSent,success:!1};const{logger:n,logRepository:c}=(0,a.createLogger)(e);return n.logView(t.pageView,t.browseComponent),(0,s.queueLogRepositoryEvents)(e,c)},t.logToggleAnalyticsEvent=async function(e){const{interactionDataConsent:t}=await(0,o.getGlobalExtensionSettings)(e),{logger:r,logRepository:i}=(0,a.createLogger)(e),c=!1!==t;if(c||(0,u.clearEventQueue)(e,i),r.logEvent(new n.UserToggleAnalyticsEvent({isAnalyticsEnabled:c})),!t)try{return(0,s.immediatelySendEvents)(e,i)}catch{return(0,s.queueLogRepositoryEvents)(e,i)}return(0,s.queueLogRepositoryEvents)(e,i)},t.flushQueue=function(e){return(0,c.sendEventQueueToStyx)(e)}},10460:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.clearEventQueue=t.storeEventsInQueue=t.EVENT_QUEUE_STORAGE_KEY=void 0;const n=r(2246),o=r(87911);t.EVENT_QUEUE_STORAGE_KEY="EventLogger.eventQueue",t.storeEventsInQueue=async function(e,r){const{storageService:i,storeService:a}=e,s=i.getLocalStorage(),c=(0,n.getCommonAppSetting)("eventLoggerQueueKey"),u=r.logStorage.copy();let d=[];const l=[];if(await s.itemExists(t.EVENT_QUEUE_STORAGE_KEY)){const e=await s.readItem(t.EVENT_QUEUE_STORAGE_KEY);if("string"!=typeof e)throw new Error("value of EventLogger.eventQueue is expected to be a string");e&&(d=await(0,o.decryptEvents)(a,e,c))}d=d.concat(u),d.map((e=>l.filter((t=>t.id===e.id)).length>0?null:l.push(e)));const p=await(0,o.encryptEvents)(a,l,c);await s.writeItem(t.EVENT_QUEUE_STORAGE_KEY,p);const m=u.map((e=>e.id));r.logStorage.removeEvents(m)},t.clearEventQueue=async function(e,r){const{storageService:i,storeService:a}=e,s=i.getLocalStorage(),c=(0,n.getCommonAppSetting)("eventLoggerQueueKey"),u=await(0,o.encryptEvents)(a,[],c);await s.writeItem(t.EVENT_QUEUE_STORAGE_KEY,u);const d=r.logStorage.copy().map((e=>e.id));r.logStorage.removeEvents(d)}},99921:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EventLoggerStoreFactory=void 0;const n=r(38912);t.EventLoggerStoreFactory=class{constructor(e){this.storeService=e}createStore(e,t){const{storeService:r}=this;return r.dispatch((0,n.createEventLoggerVirtualStore)({storeName:e,initialState:t.initialState})),this.makeStore(e)}getStore(e){if(!this.hasStore(e))throw new Error(`Store ${e} was not found`);return this.makeStore(e)}hasStore(e){const{storeService:t}=this;return e in t.getState().device.eventLogger}makeStore(e){const{storeService:t}=this;return{getState:()=>t.getState().device.eventLogger[e],updateState:r=>t.dispatch((0,n.updateEventLoggerVirtualStoreState)({storeName:e,updater:r}))}}}},33341:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const n=r(14414);t.config={commands:{logException:{handler:n.logException}},liveQueries:{},queries:{}}},69335:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},55101:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0;const n=r(33341);t.bootstrap=e=>{e.register(n.config)}},70252:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sendTypedExceptionLog=t.sendExceptionLog=t.setAllowedToSendExceptionLog=t.bootstrap=void 0;const n=r(60790),o=r(12126),i=r(95623);var a=r(55101);Object.defineProperty(t,"bootstrap",{enumerable:!0,get:function(){return a.bootstrap}});let s=!0;t.setAllowedToSendExceptionLog=e=>s=e,t.sendExceptionLog=async function(e){if(s)try{await(0,n.default)((0,o.default)("carbonException",e))}catch(e){i.Debugger.error(`[Exception] - sendExceptionLog: ${e.message||e}`)}},t.sendTypedExceptionLog=async function(e,t){if(s)try{await(0,n.default)((0,o.default)(e,t))}catch(e){i.Debugger.error(`[Exception] - sendTypedExceptionLog: ${e.message||e}`)}}},12126:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.anonymousSessionId=void 0;const n=r(28354),o=r(86056),i=r(90503),a=r(92263),s=r(48749);function c(e){const r=function(e){const t={...e,codeName:s.config.CODE_NAME,manifestVersion:s.config.MANIFEST_VERSION};return JSON.stringify(t)}(e.additionalInfo);return{action:"logOnline",code:e.code===i.ExceptionCriticality.WARNING?i.ExceptionCriticality.WARNING:i.ExceptionCriticality.ERROR,message:e.message||"",exceptiontype:e.type,functionName:e.funcName,file:e.fileName,legacy:Boolean(e.legacy),line:e.line,stack:e.precisions,sessionId:t.anonymousSessionId,additionalInfo:r,errorCount:1,featureFlips:[],initialUseCaseModule:e.initialUseCaseModule??"carbon",initialUseCaseName:e.initialUseCaseName,useCaseStacktrace:e.useCaseStacktrace??[]}}function u(e,t){const r=t;if(r.error){const t=r.error.precisions&&"string"==typeof r.error.precisions?`${r.error.message}\n${r.error.precisions}`:r.error.message,n=(0,a.isCarbonError)(r.error)?r.error.getAdditionalInfo():{};return c({type:e,message:t,code:r.code||r.error.errorLevel,precisions:r.error.stack,additionalInfo:n,initialUseCaseModule:"carbon",initialUseCaseName:""})}return c(Object.assign({type:e},t))}t.anonymousSessionId=(0,n.v4)(),t.default=function(e,t){return{...(r=(0,o.getPlatformInfo)(),{type:r.platformName,version:r.appVersion,osVersion:r.osVersion,browser:r.browser,browserVersion:r.browserVersion,os:r.os}),...u(e,t)};var r}},60790:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EXCEPTION_LOG_ENDPOINT=void 0;const n=r(28445),o=r(95623);t.EXCEPTION_LOG_ENDPOINT="https://kck3hlb9.dashlane.com/1/softwarelog/create";t.default=function(e){return function(e,t,r){const n=e.message||e.functionName||e.file||"UNKNOWN_EXCEPTION";return i[n]=i[n]||0,i[n]++,i[n]>10?Promise.resolve():r()}(e,0,(()=>(0,n.postDataToUrl)(t.EXCEPTION_LOG_ENDPOINT,e).then((()=>{})).catch((e=>o.default.log(e)))))};const i={}},14414:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.logException=void 0;const n=r(70252);t.logException=async function(e,t){return await(0,n.sendTypedExceptionLog)(t.exceptionType,t.log),{success:!0}}},90503:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ExceptionCriticality=void 0,function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.WARNING=1]="WARNING",e[e.ERROR=2]="ERROR"}(t.ExceptionCriticality||(t.ExceptionCriticality={}))},32588:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EXCEPTION_LOG_TAG=t.DEBUGGER_LOG_TAG=t.LOGS_LOG_TAG=void 0,t.LOGS_LOG_TAG="Logs",t.DEBUGGER_LOG_TAG="Debugger",t.EXCEPTION_LOG_TAG="Exception"},88393:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const n=r(24375),o=r(55111),i=r(90235),a=r(26972),s=r(56857);t.config={commands:{markNotificationAsInteracted:{handler:n.markNotificationAsInteracted},markNotificationAsSeen:{handler:o.markNotificationAsSeen},markNotificationAsUnseen:{handler:i.markNotificationAsUnseen}},queries:{getNotificationStatus:{selector:s.notificationsStatusSelector}},liveQueries:{liveNotificationStatus:{operator:a.notificationsStatus$}}}},66869:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NotificationStatus=t.NotificationName=void 0;var n=r(82028);Object.defineProperty(t,"NotificationName",{enumerable:!0,get:function(){return n.NotificationName}}),Object.defineProperty(t,"NotificationStatus",{enumerable:!0,get:function(){return n.NotificationStatus}})},42122:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0;const n=r(88393);t.bootstrap=e=>{e.register(n.config)}},70530:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0;var n=r(42122);Object.defineProperty(t,"bootstrap",{enumerable:!0,get:function(){return n.bootstrap}})},24375:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.markNotificationAsInteracted=void 0;const n=r(34287),o=r(56857);t.markNotificationAsInteracted=async(e,t)=>{const{storeService:r,localStorageService:i}=e;r.dispatch((0,n.markAsInteracted)(t));const a=(0,o.notificationsStatusSelector)(r.getState());i.getInstance().storeNotificationsStatus(a)}},55111:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.markNotificationAsSeen=void 0;const n=r(34287),o=r(56857);t.markNotificationAsSeen=async(e,t)=>{const{storeService:r,localStorageService:i}=e;r.dispatch((0,n.markAsSeen)(t));const a=(0,o.notificationsStatusSelector)(r.getState());i.getInstance().storeNotificationsStatus(a)}},90235:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.markNotificationAsUnseen=void 0;const n=r(34287),o=r(56857);t.markNotificationAsUnseen=async(e,t)=>{const{storeService:r,localStorageService:i}=e;r.dispatch((0,n.markAsUnseen)(t));const a=(0,o.notificationsStatusSelector)(r.getState());i.getInstance().storeNotificationsStatus(a)}},82028:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NotificationStatus=t.NotificationName=void 0,function(e){e.PaymentFailureChurning="paymentFailureChurning",e.PaymentFailureChurned="paymentFailureChurned",e.SwitchToMlAnalysisEngine="switchToMlAnalysisEngine",e.DWMb2bAutoEnrollTooltip="dWMb2bAutoEnrollTooltip",e.VpnProviderIsNowHotspot="vpnProviderIsNowHotspot",e.VpnHostpotshieldInstalled="vpnHostpotshieldInstalled",e.PopupIncomingTabPayments="popupIncomingTabPayments",e.PopupIncomingTabSecureNotes="popupIncomingTabSecureNotes",e.PopupIncomingTabPersonalInfo="popupIncomingTabPersonalInfo",e.PopupIncomingTabIDs="popupIncomingTabIDs",e.NewAccountMenuTooltip="newAccountMenuTooltip",e.TacGetTheExtensionBanner="tacGetTheExtensionBanner",e.TacEnableAccountRecoveryBanner="tacEnableAccountRecoveryBanner",e.TacOnlyOneAdminBanner="tacOnlyOneAdminBanner",e.TacDarkWebInsightsNewBadge="tacDarkWebInsightsNewBadge",e.PasswordHistoryBanner="passwordHistoryBanner",e.SharingCenterDisabledBanner="sharingCenterDisabledBanner",e.AccountRecoveryAvailableAdminTooltip="accountRecoveryAvailableAdminTooltip",e.AccountRecoveryAvailableEmployeeDialog="accountRecoveryAvailableEmployeeDialog",e.ActivateInviteLink="activateInviteLink",e.TacGetStartedOpenVault="tacGetStartedOpenVault",e.TacGetStartedDismissPage="tacGetStartedDismissedPage",e.TacGetStartedSeenPage="tacGetStartedSeenPage"}(t.NotificationName||(t.NotificationName={})),function(e){e.Interacted="interacted",e.Seen="seen",e.Unseen="unseen"}(t.NotificationStatus||(t.NotificationStatus={}))},62952:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const n=r(57470),o=r(45709),i=r(91880);t.config={commands:{generatePassword:{handler:n.generatePasswordHandler},generateAndSavePassword:{handler:n.generateAndSavePasswordHandler},savePasswordGenerationSettings:{handler:o.savePasswordGenerationSettingsHandler}},queries:{getPasswordGenerationSettings:{selector:i.passwordGenerationSettingsSelector}},liveQueries:{}}},64811:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0;const n=r(62952);t.bootstrap=e=>{e.register(n.config)}},57470:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.generateAndSavePasswordHandler=t.generatePasswordHandler=void 0;const n=r(47975),o=r(95623),i=r(70252),a=r(5464);t.generatePasswordHandler=async function(e,t){try{const r=(0,a.makeSessionController)(e).generatePassword(t.settings);return{success:!0,password:r,strength:await(0,n.evaluatePasswordStrength)(r)}}catch(e){return(0,o.logError)(e),(0,i.sendExceptionLog)({error:e}),{success:!1}}},t.generateAndSavePasswordHandler=async function(e,t){try{const r=(0,a.makeSessionController)(e).generateAndSavePassword(t.url);return{success:!0,password:r,strength:await(0,n.evaluatePasswordStrength)(r)}}catch(e){return(0,o.logError)(e),(0,i.sendExceptionLog)({error:e}),{success:!1}}}},45709:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.savePasswordGenerationSettingsHandler=void 0;const n=r(92233),o=r(95623),i=r(70252),a=r(44908),s=r(29954),c=r(23136);t.savePasswordGenerationSettingsHandler=async function(e,t){try{const o={GeneratorDefaultSize:(r=(0,a.fixIncoherentSettings)(t)).length,GeneratorDefaultAvoidAmbiguousChars:r.avoidAmbiguous,GeneratorDefaultDigits:r.digits,GeneratorDefaultLetters:r.letters,GeneratorDefaultSymbols:r.symbols};(0,s.updatePersonalSettings)(e.storeService,e.sessionService,o),(0,c.getDebounceSync)(e.storeService,e.sessionService)({immediateCall:!0},n.Trigger.SettingsChange)}catch(e){(0,o.logError)(e),(0,i.sendExceptionLog)({error:e})}var r}},91880:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.passwordGenerationSettingsSelector=void 0;const n=r(16593),o=r(44908);t.passwordGenerationSettingsSelector=function(e){const t=(0,n.personalSettingsSelector)(e);return(0,o.getDefaultPasswordGenerationSettings)(t)}},76860:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.checkPasswordLeaked=void 0,t.checkPasswordLeaked=async function(e,t){const{password:r}=t,{applicationModulesAccess:n}=e,{commands:{temporaryCheckMasterPassword:o}}=n.createClients().masterPasswordSecurity;await o({password:r})}},14064:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.checkPasswordWeak=void 0,t.checkPasswordWeak=async function(e,t){const{password:r}=t,{applicationModulesAccess:n}=e,{commands:{temporaryCheckMasterPasswordWeak:o}}=n.createClients().masterPasswordSecurity;await o({password:r})}},84264:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.shouldTriggerMasterPasswordWeakCheck=t.shouldTriggerMasterPasswordLeakCheck=void 0;const n=r(88205),o=r(16593);t.shouldTriggerMasterPasswordLeakCheck=function(e){return(0,o.isAuthenticatedSelector)(e)},t.shouldTriggerMasterPasswordWeakCheck=async function(e,t){return!!(0,o.isAuthenticatedSelector)(t)&&(await(0,n.makeFeatureFlipsSelectors)(e).featureFlipsSelector()).ims_web_weak_mp_prod}},43057:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setupSubscriptions=void 0;const n=r(20478);t.setupSubscriptions=async function(e,t){e.sessionOpened.on((()=>(0,n.triggerMasterPasswordLeakCheck)(t)))}},20478:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.triggerMasterPasswordLeakCheck=void 0;const n=r(76860),o=r(16593),i=r(38981),a=r(84264),s=r(14064);t.triggerMasterPasswordLeakCheck=async function(e){const t=e.storeService.getState();if((0,i.isSSOUserSelector)(t))return;const r=(0,o.masterPasswordSelector)(t);(0,n.checkPasswordLeaked)(e,{password:r}),await(0,a.shouldTriggerMasterPasswordWeakCheck)(e.applicationModulesAccess,t)&&(0,s.checkPasswordWeak)(e,{password:r})}},34161:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const n=r(30467),o=r(53264),i=r(18693),a=r(97475),s=r(50893);t.config={commands:{cancelAutoRenew:{handler:i.cancelAutoRenew},downloadCustomerInvoice:{handler:o.downloadCustomerInvoice},fetchInvoiceList:{handler:a.fetchInvoiceList},requestRefund:{handler:s.requestRefund}},queries:{getInvoicesCount:{selector:n.allInvoicesLengthSelector},getInvoiceList:{selector:n.viewedQueriedInvoicesSelector},getInvoiceListYears:{selector:n.invoiceListYearsSelector}},liveQueries:{}}},83042:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OrderDir=void 0,function(e){e.ascending="ascending",e.descending="descending"}(t.OrderDir||(t.OrderDir={}))},78025:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0;const n=r(34161);t.bootstrap=e=>{e.register(n.config)}},18693:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.cancelAutoRenew=void 0;const n=r(70252);t.cancelAutoRenew=async function(e){const{sessionService:t,storeService:r}=e;if(!r.isAuthenticated())return{success:!1};try{return await t.getInstance().payment.cancelPremiumSubscription(),{success:!0}}catch(e){const t=`[SessionController] - cancelPremiumSubscription: ${e}`,r=new Error(t);return(0,n.sendExceptionLog)({error:r}),{success:!1,error:{code:t}}}}},53264:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.downloadCustomerInvoice=void 0;const n=r(46298),o=r(48008);t.downloadCustomerInvoice=async function(e,t){const{storeService:r}=e,i=r.getUserLogin(),a=await(0,o.getCustomerInvoice)(r,i,t);return(0,n.isApiError)(a)?{success:!1}:{success:!0,data:JSON.stringify({data:Array.apply(null,new Uint8Array(a.data))})}}},97475:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fetchInvoiceList=void 0;const n=r(46298),o=r(36273),i=r(95944);t.fetchInvoiceList=async function(e){const{storeService:t}=e,r=t.getUserLogin();if(!t.isAuthenticated())return{success:!1};try{const e=await(0,o.listInvoices)(t,r);return(0,n.isApiError)(e)?{success:!1}:(t.dispatch((0,i.receivedInvoiceList)(e.invoices)),{success:!0})}catch(e){return{success:!1}}}},50893:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.requestRefund=void 0;const n=r(46298),o=r(48523),i=r(5464);t.requestRefund=async function(e,t){const{sessionService:r,storeService:a,wsService:s}=e,c=a.getUserLogin();if(!a.isAuthenticated())return{success:!1};try{const e=await(0,o.grantFullRefundAndCancelSubscription)(a,c,t);return(0,n.isApiError)(e)?{success:!1}:(t&&!t.dryRun&&(0,i.refeshAccountInfo)(a,r,s),{success:!0})}catch(e){return{success:!1}}}},7753:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0;var n=r(78025);Object.defineProperty(t,"bootstrap",{enumerable:!0,get:function(){return n.bootstrap}})},98584:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getInvoiceMappers=void 0;const n=r(77672);t.getInvoiceMappers=()=>({amountPaid:e=>e.amountPaid,invoiceId:e=>e.invoiceId,planName:e=>(e=>"advanced"===e.planFeature?"ADVANCED":"essentials"===e.planFeature?"ESSENTIALS":["family_created","family_renewed"].includes(e.eventType)?"FAMILY":"sync"===e.planFeature?"PREMIUM":"OTHER")(e),startDate:e=>e.startDate,startYear:e=>(e=>(0,n.fromUnixTime)(e.startDate).getFullYear().toString())(e)})},73938:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const n=r(28903),o=r(64331),i=r(81846),a=r(84547);t.config={commands:{unlockProtectedItems:{handler:n.unlockProtectedItems},disableCredentialProtection:{handler:a.disableCredentialProtectionHandler}},queries:{areProtectedItemsUnlocked:{selector:i.areProtectedItemsAvailableSelector}},liveQueries:{liveAreProtectedItemsUnlocked:{operator:o.areProtectedItemsUnlocked$}}}},18982:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.unlockProtectedItemsWrongPasswordError=t.UnlockProtectedItemsStatus=t.DisableCredentialProtectionStatus=void 0;var n=r(64966);Object.defineProperty(t,"DisableCredentialProtectionStatus",{enumerable:!0,get:function(){return n.DisableCredentialProtectionStatus}}),Object.defineProperty(t,"UnlockProtectedItemsStatus",{enumerable:!0,get:function(){return n.UnlockProtectedItemsStatus}}),Object.defineProperty(t,"unlockProtectedItemsWrongPasswordError",{enumerable:!0,get:function(){return n.unlockProtectedItemsWrongPasswordError}})},28903:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.unlockProtectedItems=void 0;const n=r(64966),o=r(28287);t.unlockProtectedItems=async function(e,t){const{storeService:r,masterPasswordEncryptorService:i}=e;return await(0,o.validateMasterPassword)(r,i,t)?{status:n.UnlockProtectedItemsStatus.SUCCESS}:{status:n.UnlockProtectedItemsStatus.ERROR,error:{code:n.unlockProtectedItemsWrongPasswordError}}}},64710:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0;const n=r(73938);t.bootstrap=e=>{e.register(n.config)}},84547:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.disableCredentialProtectionHandler=void 0;const n=r(38250),o=r(18344);t.disableCredentialProtectionHandler=async function(e,{credentialId:t}){const{storeService:r,sessionService:i,eventLoggerService:a,applicationModulesAccess:s}=e;try{return await(0,o.disableCredentialProtection)({storeService:r,sessionService:i,eventLoggerService:a,applicationModulesAccess:s},t),{status:n.DisableCredentialProtectionStatus.SUCCESS}}catch(e){return{status:n.DisableCredentialProtectionStatus.ERROR}}}},18344:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.disableCredentialProtection=void 0;const n=r(19736),o=r(88779),i=({update:{autoprotected:e}})=>({AutoProtected:e});t.disableCredentialProtection=async function({storeService:e,sessionService:t,eventLoggerService:r,applicationModulesAccess:a},s){const c=e.getState();if(!(0,n.credentialSelector)(c,s))throw new Error("Credential does not exist, cant update");(0,o.updateCredential)({storeService:e,sessionService:t,eventLoggerService:r,applicationModulesAccess:a},{id:s,update:{autoprotected:!1}},i)}},88530:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0;var i=r(64710);Object.defineProperty(t,"bootstrap",{enumerable:!0,get:function(){return i.bootstrap}}),o(r(18982),t)},64331:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.areProtectedItemsUnlocked$=void 0;const n=r(18948),o=r(81846),i=r(3343);t.areProtectedItemsUnlocked$=()=>(0,n.pipe)((0,i.map)((e=>(0,n.interval)(1e3).pipe((0,i.map)((()=>e))))),(0,i.switchMap)((e=>e)),(0,i.map)(o.areProtectedItemsAvailableSelector),(0,i.distinctUntilChanged)())},81846:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.areProtectedItemsAvailableSelector=t.areProtectedItemsUnlockedSelector=void 0;const n=r(38981),o=r(16593);t.areProtectedItemsUnlockedSelector=e=>Date.now()-(0,o.lastMasterPasswordCheckSelector)(e)<(e=>/^kw_test_auto_fmpc_.*/.test((0,o.userLoginSelector)(e))?5e3:3e5)(e),t.areProtectedItemsAvailableSelector=e=>(0,t.areProtectedItemsUnlockedSelector)(e)||(0,n.isSSOUserSelector)(e)},64966:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DisableCredentialProtectionStatus=t.unlockProtectedItemsWrongPasswordError=t.UnlockProtectedItemsStatus=void 0,function(e){e.SUCCESS="success",e.ERROR="error"}(t.UnlockProtectedItemsStatus||(t.UnlockProtectedItemsStatus={})),t.unlockProtectedItemsWrongPasswordError="WRONG PASSWORD",function(e){e.SUCCESS="success",e.ERROR="error"}(t.DisableCredentialProtectionStatus||(t.DisableCredentialProtectionStatus={}))},20054:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const n=r(85423),o=r(97810),i=r(43591),a=r(16593),s=r(18191);t.config={commands:{activateAccountRecovery:{handler:o.activateAccountRecovery},setupMasterPasswordForRecovery:{handler:i.setupMasterPasswordForRecovery},deactivateAccountRecovery:{handler:o.deactivateAccountRecovery},registerDeviceForRecovery:{handler:i.registerDeviceForRecovery},startAccountRecovery:{handler:i.startAccountRecovery},sendRecoveryRequest:{handler:i.sendRecoveryRequest},cancelRecoveryRequest:{handler:i.cancelRecoveryRequest},checkRecoveryRequestStatus:{handler:i.checkRecoveryRequestStatus},recoverUserData:{handler:i.recoverUserData},checkDoesLocalRecoveryKeyExist:{handler:i.checkDoesLocalRecoveryKeyExist},isRecoveryRequestPending:{handler:o.isRecoveryRequestPending}},queries:{getRecoveryOptInSetting:{selector:a.accountRecoveryOptInSelector},getShouldShowFeatureActivationModal:{selectorFactory:async e=>(await(0,n.makeRecoverySelectors)(e)).shouldShowFeatureActivationModalSelector},getAccountRecoveryRequestCount:{selector:n.accountRecoveryRequestsCountSelector}},liveQueries:{liveAccountRecoveryRequestCount:{operator:s.accountRecoveryRequestsCount$}}}},41346:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},15444:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makeRecoveryController=void 0;const n=r(36513),o=r(95623),i=r(70252),a=r(34376),s=r(43927);function c(e,t,r){return(0,i.sendExceptionLog)({error:t}),o.Debugger.log(e,t),{error:{message:t.message,action:r}}}t.makeRecoveryController=(e,t)=>({getMasterPasswordResetDemandList:r=>function(e,t,r,n){const o=n.teamId;return t.recovery.getPendingRequests({login:r.login,uki:r.uki,teamId:o}).then((t=>{const n=e.getTeamAdminData(),i=Object.assign({},n),a=t.filter((e=>e.login!==r.login));return i.teams[o]&&(i.teams[o].notifications={accountRecoveryRequests:a},(0,s.updateTeamAdminData)(e,i)),{demands:a}})).catch((e=>({demands:[],error:c("Master Password Reset: Error while getPendingRequests",e,n).error})))}(e,t,(0,a.getCurrentUserInfo)(e),r),acceptMasterPasswordResetDemand:r=>function(e,t,r){const o=(0,n.makeAsymmetricEncryption)();return o.decrypt(t.privateKey,r.recoveryKey).then((e=>o.encrypt(r.userPublicKey,e))).then((n=>e.recovery.acceptRequest({login:t.login,uki:t.uki,sourceLogin:r.login,payload:n}))).then((()=>({}))).catch((e=>c("Master Password Reset: Error while acceptRequest",e,r)))}(t,(0,a.getCurrentUserInfo)(e),r),declineMasterPasswordResetDemand:r=>function(e,t,r){return e.recovery.refuseRequest({login:t.login,uki:t.uki,sourceLogin:r.login}).then((()=>({}))).catch((e=>c("Master Password Reset: Error while refuseRequest",e,r)))}(t,(0,a.getCurrentUserInfo)(e),r)})},63395:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0;const n=r(20054);t.bootstrap=e=>{e.register(n.config)}},76569:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0;var n=r(63395);Object.defineProperty(t,"bootstrap",{enumerable:!0,get:function(){return n.bootstrap}})},18191:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.accountRecoveryRequestsCount$=void 0;const n=r(18948),o=r(3343),i=r(85423);t.accountRecoveryRequestsCount$=function(){return(0,n.pipe)((0,o.map)((e=>(0,i.accountRecoveryRequestsCountSelector)(e))),(0,o.distinctUntilChanged)())}},85423:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makeRecoverySelectors=t.accountRecoveryRequestsCountSelector=t.selectTeamAdminData=t.recoveryHashFromPremiumStatusSelector=t.recoveryHashFromPersonalSettingsSelector=t.makeShouldShowFeatureActivationModalSelector=void 0;const n=r(88205),o=r(26634),i=r(38981),a=r(16593),s=r(27885);t.makeShouldShowFeatureActivationModalSelector=async e=>{const t=(await(0,n.makeFeatureFlipsSelectors)(e.applicationModulesAccess).featureFlipsSelector()).itadmin_SAEX_CryptoMigration_Phase1,r=e.storeService.getState(),a=(0,o.isRecoveryEnabledSelector)(r),s="boolean"==typeof r.userSession.personalSettings.RecoveryOptIn,c=(0,i.isSSOUserSelector)(r),u=r.userSession.session.isFirstSessionAfterAccountCreation;return()=>!c&&t&&a&&!s&&!u},t.recoveryHashFromPersonalSettingsSelector=e=>(0,a.personalSettingsSelector)(e).RecoveryHash||"",t.recoveryHashFromPremiumStatusSelector=e=>(0,a.premiumStatusSelector)(e).recoveryHash||"",t.selectTeamAdminData=e=>e.userSession.teamAdminData??{teams:{}},t.accountRecoveryRequestsCountSelector=e=>{const r=(0,s.getCurrentTeamId)(e.userSession.spaceData);if(!r)return 0;const{teams:n}=(0,t.selectTeamAdminData)(e);return Number(n[r]?.notifications?.accountRecoveryRequests?.length??0)},t.makeRecoverySelectors=async e=>({shouldShowFeatureActivationModalSelector:await(0,t.makeShouldShowFeatureActivationModalSelector)(e)})},43591:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.recoverUserData=t.checkDoesLocalRecoveryKeyExist=t.cancelRecoveryRequest=t.checkRecoveryRequestStatus=t.sendRecoveryRequest=t.setupMasterPasswordForRecovery=t.registerDeviceForRecovery=t.startAccountRecovery=void 0;const n=r(53576),o=r(33476),i=r(70252),a=r(70414),s=r(25576),c=r(87855),u=r(36513),d=r(46298),l=r(29303),p=r(16593),m=r(16356),g=r(58639),f=r(95363),S=r(88610),h=r(47820);t.startAccountRecovery=async function(e,t){const{storeService:r}=e,{login:n}=t,i=await(0,d.getAuthenticationMethodsForDevice)(r,{login:n,methods:s.remoteSupportedAuthenticationMethod});return(0,d.isApiError)(i)?{success:!1,error:{code:o.ApiErrorType.StartAccountRecoveryFailed,message:`Start account recovery failed: ${i.message}`}}:(r.dispatch((0,f.saveRecoverySessionData)({verificationMethod:i.verifications})),{success:!0,verification:i.verifications})},t.registerDeviceForRecovery=async function(e,t){try{const{token:r,login:n}=t,{storeService:i,wsService:u}=e,p=i.getState(),m=i.getPlatformInfo().platformName,g=!0,S=await(0,d.getAuthenticationMethodsForDevice)(i,{login:n,methods:s.remoteSupportedAuthenticationMethod});if((0,d.isApiError)(S))return{success:!1,error:{code:o.ApiErrorType.RegisterDeviceFailed,message:"Recovery Device request registration failed"}};const h=(0,l.recoveryIsOtpSelector)(p),y=await(0,c.ensureDeviceId)(),v=(0,a.generateUki)(y),E={uki:v,login:n,platform:m,temporary:s.PersistData.PERSIST_DATA_NO,recovery:g},A=h?{otp:r}:{token:r};if("SUCCESS"!==await u.authentication.registerUki({...E,...A}))return{success:!1,error:{code:o.ApiErrorType.RegisterDeviceFailed,message:"Recovery Device registration failed"}};i.dispatch((0,f.saveRecoverySessionData)({recoveryUki:v}))}catch(e){return(0,i.sendExceptionLog)({error:e}),{success:!1,error:{code:o.ApiErrorType.RegisterDeviceFailed,message:e.message}}}return{success:!0}},t.setupMasterPasswordForRecovery=async function(e,t){let r="[Account Recovery PI] - Setup Master Password For Recovery ";const n=e=>{r+=`- ${e} \n`};try{const{storeService:a,localStorageService:s}=e,{masterPassword:c}=t,d=a.getState();n("recoveryUki select START");const p=(0,l.recoveryUkiSelector)(d);if(!p){const e={code:o.ApiErrorType.SetupMasterPasswordForRecoveryFailed,message:"recoveryUki does not exist"};return n(`setupMasterPasswordForRecovery failed with error: ${e.code} ${e.message}`),(0,i.sendExceptionLog)({message:r,funcName:"setupMasterPasswordForRecovery"}),{success:!1,error:e}}n("recoveryUki select SUCCESS"),n("dispatch updateMasterPassword START"),a.dispatch((0,m.updateMasterPassword)(c)),n("dispatch updateMasterPassword SUCCESS"),n("makeCyptoService START");const g=(0,u.makeCryptoService)();n("makeCyptoService SUCCESS"),n("generateRsaKeyPair START");const{publicKey:S,privateKey:y}=await g.asymmetricEncryption.generateRsaKeyPair();n("generateRsaKeyPair SUCCESS"),n("dispatch saveRecoverySessionData START"),a.dispatch((0,f.saveRecoverySessionData)({publicKey:S})),n("dispatch saveRecoverySessionData SUCCESS"),n("encryptUkiAndPrivateKey START");const v=await(0,h.encryptUkiAndPrivateKey)(p,y,c,a);return n("encryptUkiAndPrivateKey SUCCESS"),n("storeRecoveryData START"),await s.getInstance().storeRecoveryData(v),n("storeRecoveryData SUCCESS"),{success:!0}}catch(e){return n(`setupMasterPasswordForRecovery failed with error: ${e}`),(0,i.sendExceptionLog)({message:r,funcName:"setupMasterPasswordForRecovery",precisions:e.stack}),{success:!1,error:{code:o.ApiErrorType.SetupMasterPasswordForRecoveryFailed,message:e.message}}}},t.sendRecoveryRequest=async function(e){try{const{storeService:t,wsService:r}=e;return await(0,h.sendRecoveryRequestToAdmin)(t,r),{success:!0}}catch(e){return(0,i.sendExceptionLog)({error:e}),{success:!1,error:{code:o.ApiErrorType.RecoveryRequestFailed,message:e.message}}}},t.checkRecoveryRequestStatus=async function(e,t){try{const{storeService:r,localStorageService:n,wsService:i}=e,{masterPassword:a}=t,s=r.getState(),c=(0,p.userLoginSelector)(s);if(!c)return{success:!1,error:{code:o.ApiErrorType.CheckRecoveryStatusFailed,message:"Missing login"}};r.dispatch((0,m.updateMasterPassword)(a));const u=await(0,h.retrieveRecoveryUkiFromStorage)(r,n,a),{content:{status:d,payload:l,recoveryServerKey:g}}=await i.recovery.request({login:c,uki:u});return l&&g&&r.dispatch((0,f.saveRecoverySessionData)({userServerProtectedSymmetricalKey:l,recoveryServerKeyBase64:g})),{success:!0,response:{status:d}}}catch(e){return{success:!1,error:{code:o.ApiErrorType.CheckRecoveryStatusFailed,message:e.message}}}},t.cancelRecoveryRequest=async function(e){try{const{storeService:t,localStorageService:r,wsService:n}=e,o=t.getState(),i=(0,p.userLoginSelector)(o),a=(0,p.masterPasswordSelector)(o),s=await(0,h.retrieveRecoveryUkiFromStorage)(t,r,a);return await n.recovery.cancelRequest({login:i,uki:s}),await r.getInstance().cleanRecoveryData(),{success:!0}}catch(e){return{success:!1,error:{code:o.ApiErrorType.CancelRecoveryRequestFailed,message:e.message}}}},t.checkDoesLocalRecoveryKeyExist=async function(e){try{const{localStorageService:t}=e,r=t.getInstance();return{success:!0,doesExist:await r.doesRecoveryLocalKeyExist()}}catch(e){return{success:!1,error:{code:o.ApiErrorType.CheckLocalRecoveryKeyFailed,message:e.message}}}},t.recoverUserData=async function(e,t){const{localStorageService:r,storeService:a,sessionService:c}=e,d=a.getState(),m=r.getInstance(),y=await(0,h.validateInitialData)(d,m);let v="[Account Recovery PI] - Recover User Data ";const E=e=>{v+=`- ${e} \n`};if(!y.success)return y;const{masterPassword:A}=t;try{E("Extract PrKey START");const t=await(0,h.extractPrivateKeyFromRecoveryData)(e,A,E);E("Extract PrKey SUCCESS");const{userServerProtectedSymmetricalKey:r}=(0,l.recoveryDataSelector)(d),c=await(0,u.makeAsymmetricEncryption)();E("Decrypt user protected key START");const g=await c.decrypt(t,r);E("Decrypt user protected key SUCCESS"),E("Decrypt server protected key START");const y=await(0,h.extractRecoveryKey)(a,g,E);E("Decrypt server protected key SUCCESS"),E("Extract local Key START");const _=await(0,h.extractLocalKey)(e,y,E);E("Extract local Key SUCCESS"),await(0,h.prepareLocalDataEncryptorService)(e,_),E("Get recovery credentials START");const T=await m.getRecoverySessionCredential();E("Get recovery credentials SUCCESS");const{masterPassword:I}=JSON.parse(atob(T)),b=(0,p.userLoginSelector)(d),w=s.PersistData.PERSIST_DATA_YES;a.dispatch((0,f.saveRecoverySessionData)({recoveryInProgress:!0})),E("Open session START");const C=await(0,S.openSessionWithMasterPassword)(e,b,I,{isDataPersisted:w,serverKey:(0,p.serverKeySelector)(d)},E);if(E("Open session SUCCESS"),C!==n.LoginResultEnum.LoggedIn)return E("Open session SUCCESS but user not logged in"),(0,i.sendExceptionLog)({message:v,funcName:"recoverUserData"}),(0,h.recoveryFlowError)(o.ApiErrorType.RecoverUserDataFailed,`Unable to login with ${C}`);a.dispatch((0,f.saveRecoverySessionData)({recoveryInProgress:!1,currentPassword:I}))}catch(e){return E(`Recovery failed with error: ${e}`),(0,i.sendExceptionLog)({message:v,funcName:"recoverUserData",precisions:e.stack}),a.dispatch((0,f.resetRecoverySessionData)()),await c.close(),(0,g.triggerOpenSessionFailed)(new Error(g.AuthenticationCode[g.AuthenticationCode.WRONG_PASSWORD])),(0,h.recoveryFlowError)(o.ApiErrorType.RecoverUserDataFailed,"Unable to decipher data")}return{success:!0}}},47820:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.storeSessionCredentialForRecovery=t.prepareLocalDataEncryptorService=t.extractLocalKey=t.extractRecoveryKey=t.extractPrivateKeyFromRecoveryData=t.validateInitialData=t.recoveryFlowError=t.retrieveRecoveryUkiFromStorage=t.triggerCleanOrSetupAccountRecovery=t.isARFeatureActivatedForUser=t.isARAvailableForUser=t.sendRecoveryRequestToAdmin=t.encryptUkiAndPrivateKey=t.resetAdminProtectedSymmetricalKeys=t.sendAdminProtectedSymmetricalKeys=t.getAdminProtectedSymmetricalKeys=t.encryptRecoveryData=t.getRecoveryKey=t.getSetupRequisitesData=void 0;const n=r(90622),o=r(56668),i=r(72365),a=r(16038),s=r(69530),c=r(64910),u=r(36513),d=r(65675),l=r(70252),p=r(16593),m=r(38981),g=r(95363),f=r(16356),S=r(29303),h=r(25576),y=r(26634),v=r(97810),E=r(33476),A=r(85423);function _(e){const t=e.getState(),r=(0,p.activeSpacesSelector)(t)[0],o=r?.teamId;if(!o)throw new Error("[getSetupRequisitesData] - user should be part of a team to activate Account Recovery");const i=Number(o),a=(0,p.userLoginSelector)(t),s=(0,n.ukiSelector)(t);if(!a||!s)throw new Error("[getSetupRequisitesData] - missing login or uki");return{teamId:i,login:a,uki:s}}async function T({storeService:e,encryptionKey:t,data:r}){const n=(0,i.makeDataEncryptorService)(e),o=(0,d.getCryptoConfig)(e);n.setInstance({raw:t},"",o);const a=await n.getInstance().encrypt(r);return n.close(),a}async function I({storeService:e,encryptedData:t,encryptionKey:r}){const n=(0,i.makeDataEncryptorService)(e),{cryptoConfig:o}=(0,d.parsePayload)(d.ARGON2_DEFAULT_PAYLOAD);n.setInstance({raw:r},"",o);const a=await n.getInstance().decrypt(t,{logging:!0});return n.close(),a}function b(e){const t=(0,m.isSSOUserSelector)(e),r=(0,y.isRecoveryEnabledSelector)(e);return!t&&r}function w(e){const t=b(e),r=(0,p.accountRecoveryOptInSelector)(e);return t&&r}t.getSetupRequisitesData=async function(e,t){try{const{teamId:r,login:n,uki:o}=_(e),{content:i}=await t.recovery.getSetupRequisites({login:n,uki:o,teamId:r});return i}catch(e){throw new Error(`[getSetupRequisitesData] - getSetupRequisites failed with error ${e}`)}},t.getRecoveryKey=async function(e){const t=e.getState();let r,n=(0,p.recoveryKeySelector)(t);return n?r=(0,a.base64ToBuffer)(n):(r=await(0,s.generateAESKey)(),n=(0,a.bufferToBase64)(r)),{recoveryKeyBufferClear:r,recoveryKeyBase64Clear:n,recoveryKeyRawClear:atob(n)}},t.encryptRecoveryData=T,t.getAdminProtectedSymmetricalKeys=async function(e,t){const r=(0,u.makeAsymmetricEncryption)(),n=[];for(const o of e){const{login:e,publicKey:i}=o,a=await r.encrypt(i,t);n.push({login:e,key:a})}return n},t.sendAdminProtectedSymmetricalKeys=async function(e,t,r){try{const n=JSON.stringify(r),{teamId:o,login:i,uki:a}=_(e);return void await t.recovery.setRecoveryClientKeys({login:i,uki:a,recoveryClientKeys:n,teamId:o})}catch(e){throw new Error(`[sendAdminProtectedSymmetricalKeys] - setRecoveryClientKeys failed with error ${e}`)}},t.resetAdminProtectedSymmetricalKeys=async function(e,t){try{const{teamId:r,login:n,uki:o}=_(e),i=JSON.stringify([]);return void await t.recovery.setRecoveryClientKeys({login:n,uki:o,recoveryClientKeys:i,teamId:r})}catch(e){throw new Error(`[resetAdminProtectedSymmetricalKeys] - setRecoveryClientKeys failed with error ${e}`)}},t.encryptUkiAndPrivateKey=async function(e,t,r,n){const i=JSON.stringify({recoveryUki:e,privateKey:t}),a=(0,o.deflateUtf16)(i);return await T({storeService:n,encryptionKey:r,data:a})},t.sendRecoveryRequestToAdmin=async function(e,t){try{const r=e.getState(),n=(0,p.userLoginSelector)(r),{recoveryUki:o,publicKey:i}=(0,S.recoveryDataSelector)(r);if(!n||!o||!i)throw new Error("Missing recoveryUki or publicKey");return void await t.recovery.request({login:n,uki:o,publicKey:i})}catch(e){throw new Error(`[sendAccountRecoveryRequest] - failed with error ${e}`)}},t.isARAvailableForUser=b,t.isARFeatureActivatedForUser=w,t.triggerCleanOrSetupAccountRecovery=async function(e){const{storeService:t,localStorageService:r,wsService:n}=e,o=t.getState();(0,S.recoveryInProgressSelector)(o)||(await r.getInstance().cleanRecoveryData(),await async function(e,t){const r=e.getState();if(!w(r))return Promise.resolve(!1);const{persistData:n}=e.getAccountInfo();if(n===h.PersistData.PERSIST_DATA_NO)return Promise.resolve(!1);const o=!!(0,p.recoveryKeySelector)(r),i=!!await t.getInstance().doesRecoveryLocalKeyExist();return!o||!i||(0,A.recoveryHashFromPersonalSettingsSelector)(r)!==(0,A.recoveryHashFromPremiumStatusSelector)(r)}(t,r)?await(0,v.setupAccountRecoveryForDevice)(t,r,n):await async function(e,t){const r=w(e.getState()),n=t.getInstance(),o=!!await n.doesRecoveryLocalKeyExist(),i=!!await n.doesRecoverySessionCredentialExist();return!r&&(o||i)}(t,r)&&await r.getInstance().cleanRecoverySetupData())},t.retrieveRecoveryUkiFromStorage=async function(e,t,r){try{const n=await t.getInstance().getRecoveryData(),i=await I({storeService:e,encryptedData:n,encryptionKey:r}),a=(0,o.inflateUtf16)(i),{recoveryUki:s}=JSON.parse(a);return s}catch(e){const t=`retrieveRecoveryUkiFromStorage failed with error ${e.message}`;throw new Error(t)}},t.recoveryFlowError=(e,t)=>{const r=new Error(`[AccountRecovery]: ${e} ${t}`);return(0,l.sendExceptionLog)({error:r}),{success:!1,error:{code:e,message:t}}},t.validateInitialData=async function(e,r){if(!await r.doesRecoveryLocalKeyExist()||!await r.doesRecoveryDataExist()||!await r.doesRecoverySessionCredentialExist())return(0,t.recoveryFlowError)(E.ApiErrorType.RecoverUserDataFailed,"Missing local data");const{userServerProtectedSymmetricalKey:n,recoveryServerKeyBase64:o}=(0,S.recoveryDataSelector)(e);return n&&o?{success:!0}:(0,t.recoveryFlowError)(E.ApiErrorType.RecoveryRequestFailed,"missing payload")},t.extractPrivateKeyFromRecoveryData=async function(e,t,r){const{localStorageService:n,storeService:i}=e,s=n.getInstance();r("extractPrivateKeyFromRecoveryData - getRecoveryData");const c=await s.getRecoveryData(),u=i.getPlatformInfo();r(`[extra] platform: ${u.platformName}`),r(`[extra] browser: ${u.browser} @ ${u.browserVersion}`);const l=(0,a.base64ToBuffer)(c),p=(0,d.parseCipheredData)(new Uint8Array(l));r(`[extra] cryptoConfig derivation: ${JSON.stringify(p.cryptoConfig)}`),r("extractPrivateKeyFromRecoveryData - decryptRecoveryData");const m=await I({storeService:i,encryptedData:c,encryptionKey:t});r("extractPrivateKeyFromRecoveryData - inflateUtf16 data");const f=(0,o.inflateUtf16)(m);r("extractPrivateKeyFromRecoveryData - parse JSON data");const{recoveryUki:S,privateKey:h}=JSON.parse(f);return i.dispatch((0,g.saveRecoverySessionData)({recoveryUki:S})),h},t.extractRecoveryKey=async function(e,t,r){const n=e.getState(),{recoveryServerKeyBase64:o}=(0,S.recoveryDataSelector)(n);if(!o)throw new Error("Missing payload");const i=atob(o),s=e.getPlatformInfo();r(`[extra] platform: ${s.platformName}`),r(`[extra] browser: ${s.browser} @ ${s.browserVersion}`);const c=(0,a.base64ToBuffer)(t),u=(0,d.parseCipheredData)(new Uint8Array(c));r(`[extra] cryptoConfig derivation: ${JSON.stringify(u.cryptoConfig)}`),r("extractRecoveryKey - decryptRecoveryData");const l=await I({storeService:e,encryptedData:t,encryptionKey:i});return r("extractRecoveryKey - arrayBufferToText"),(0,a.arrayBufferToText)(l)},t.extractLocalKey=async function(e,t,r){const{storeService:n,localStorageService:i}=e,s=i.getInstance();r("extractLocalKey - getRecoveryLocalKey");const c=await s.getRecoveryLocalKey(),u=e.storeService.getPlatformInfo();r(`[extra] platform: ${u.platformName}`),r(`[extra] browser: ${u.browser} @ ${u.browserVersion}`);const l=(0,a.base64ToBuffer)(c),p=(0,d.parseCipheredData)(new Uint8Array(l));r(`[extra] cryptoConfig derivation: ${JSON.stringify(p.cryptoConfig)}`),r("extractLocalKey - decryptRecoveryData");const m=await I({storeService:n,encryptedData:c,encryptionKey:t});return r("extractLocalKey - inflateUtf16 localKey"),(0,o.inflateUtf16)(m)},t.prepareLocalDataEncryptorService=async function(e,t){const{localDataEncryptorService:r,storeService:n}=e,o=e.storeService.getUserSession().serverKey,i=(0,c.getNoDerivationCryptoConfig)();r.setInstance({raw:t},o,i),await r.getInstance().prepareCrypto(),n.dispatch((0,f.updateLocalKey)(t))},t.storeSessionCredentialForRecovery=async function(e,t){const r=e.getState(),n=(0,p.masterPasswordSelector)(r);if(w(r)&&n){const e={masterPassword:n,recoveryKey:null},r=btoa(JSON.stringify(e));await t.getInstance().storeRecoverySessionCredential(r)}}},97810:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isRecoveryRequestPending=t.deactivateAccountRecovery=t.setupAccountRecoveryForDevice=t.activateAccountRecovery=void 0;const n=r(56668),o=r(47820),i=r(33476),a=r(5464),s=r(16593),c=r(27517);async function u(e,t,r){const{hash:i,recipients:a,recoveryServerKey:s}=await(0,o.getSetupRequisitesData)(e,r),{recoveryKeyBufferClear:u,recoveryKeyBase64Clear:d,recoveryKeyRawClear:l}=await(0,o.getRecoveryKey)(e),p=t.getInstance(),m=await p.getLocalKey(),g=(0,n.deflateUtf16)(m),f=await(0,o.encryptRecoveryData)({storeService:e,encryptionKey:l,data:g});t.getInstance().storeRecoveryLocalKey(f);const S=atob(s),h=await(0,o.encryptRecoveryData)({storeService:e,encryptionKey:S,data:u}),y=await(0,o.getAdminProtectedSymmetricalKeys)(a,h);await(0,o.sendAdminProtectedSymmetricalKeys)(e,r,y);const v={RecoveryHash:i,RecoveryKey:d};e.dispatch((0,c.editPersonalSettings)(v)),await(0,o.storeSessionCredentialForRecovery)(e,t)}t.activateAccountRecovery=async function(e){const{sessionService:t,storeService:r,localStorageService:n,wsService:d}=e,l=r.getState();if(!(0,o.isARAvailableForUser)(l))return{success:!1,error:{code:i.ApiErrorType.AccountRecoveryNotAvailableError}};(0,s.accountRecoveryOptInSelector)(l)||r.dispatch((0,c.editPersonalSettings)({RecoveryOptIn:!0}));try{await u(r,n,d),await t.getInstance().user.persistPersonalSettings(),await(0,a.sessionForceSync)(t)}catch(e){return{success:!1,error:{code:i.ApiErrorType.RecoverySetupFailed,message:e.message}}}return{success:!0}},t.setupAccountRecoveryForDevice=u,t.deactivateAccountRecovery=async function(e){const{sessionService:t,storeService:r,localStorageService:n,wsService:a}=e,s=r.getState();if(!(0,o.isARAvailableForUser)(s))return{success:!1,error:{code:i.ApiErrorType.AccountRecoveryNotAvailableError}};const u={RecoveryKey:"",RecoveryHash:"",RecoveryOptIn:!1};try{r.dispatch((0,c.editPersonalSettings)(u)),await t.getInstance().user.persistPersonalSettings(),await n.getInstance().cleanRecoverySetupData(),await(0,o.resetAdminProtectedSymmetricalKeys)(r,a)}catch(e){return{success:!1,error:{code:i.ApiErrorType.RecoveryDeactivationFailed,message:e.message}}}return{success:!0}},t.isRecoveryRequestPending=async function(e){try{return{success:!0,response:await e.localStorageService.getInstance().doesRecoveryDataExist()}}catch(e){return{success:!1,error:{code:i.ApiErrorType.IsRecoveryRequestPendingFailed,message:e}}}}},63678:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setupSubscriptions=void 0;const n=r(47820);t.setupSubscriptions=function(e,t){e.sessionOpened.on((()=>(0,n.triggerCleanOrSetupAccountRecovery)(t))),e.syncSuccess.on((()=>(0,n.triggerCleanOrSetupAccountRecovery)(t)))}},33476:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RequestStatus=t.ApiErrorType=void 0,function(e){e.CheckRecoveryStatusFailed="CHECK_RECOVERY_STATUS_FAILED",e.RecoverySetupFailed="RECOVERY_SETUP_FAILED",e.RecoveryDeactivationFailed="RECOVERY_DEACTIVATION_FAILED",e.RecoveryRequestFailed="RECOVERY_REQUEST_FAILED",e.RegisterDeviceFailed="REGISTER_DEVICE_FAILED",e.SetupMasterPasswordForRecoveryFailed="SETUP_MASTERPASSWORD_FOR_RECOVERY_FAILED",e.CancelRecoveryRequestFailed="CANCEL_RECOVERY_REQUEST_FAILED",e.RecoverUserDataFailed="RECOVER_REQUEST_FAILED",e.CheckLocalRecoveryKeyFailed="CHECK_LOCAL_RECOVERY_KEY_FAILED",e.StartAccountRecoveryFailed="START_ACCOUNT_RECOVERY_FAILED",e.AccountRecoveryNotAvailableError="ACCOUNT_RECOVERY_NOT_AVAILABLE_ERROR",e.IsRecoveryRequestPendingFailed="IS_RECOVERY_REQUEST_PENDING_FAILED"}(t.ApiErrorType||(t.ApiErrorType={})),function(e){e.PENDING="PENDING",e.APPROVED="APPROVED",e.REFUSED="REFUSED",e.OVERRIDDEN="OVERRIDDEN",e.CANCELED="CANCELED"}(t.RequestStatus||(t.RequestStatus={}))},47390:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const n=r(66961),o=r(89122),i=r(96405);t.config={commands:{decipherRemoteFile:{handler:n.decipherRemoteFileHandler}},queries:{getFileContent:{selector:i.fileContentStrSelector}},liveQueries:{liveFileMeta:{operator:o.fileMetaUpdate$}}}},64438:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0;const n=r(47390);t.bootstrap=e=>{e.register(n.config)}},1110:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FILE_SETTINGS=t.FileNamesList=t.REMOTE_FILE_KEY_PROD=t.REMOTE_FILE_KEY_DEV=void 0,t.REMOTE_FILE_KEY_DEV="-----BEGIN PUBLIC KEY-----\nMIICIjANBgkqhkiG9w0BAQEFAAOCAg8AMIICCgKCAgEAzOFwZBlj8livLhzIN8xm\ny/c+gn9FpUNOEIPoiN7kcAlj+oIlWqW5TgRZLqvyA0WxhTcG7icTpC+UwBXvENdV\n3nTzmuB8W6ZnRTjrtAlSxqp0Yfr2eQEGZFTlfBFUneqq4RZ6e/B3nIRHG1sEkVhd\noBbenPWou+WHqaqnah0AZVfxx4bJq1wor1LpH7gxELthvsThBelQz4Lmns4hCjzq\nRCDjQ1PG9HpDwwRHyi9xJYWoLR6C3rHZ1mmldg7TS41cCWkKsPDiIrIzEN+94dGG\nqSAx4kti0ltRcjLcBuJhQ3FHaAU7ksSubEg+l0W8PWAKjNbhUpFXduqXjxZ9nhuS\n2sxETZoadgU6YDEyqk3W7c+dhpTioMZEsJXpBVdC2jbblPHBRXBTmdOdb7xlBrGQ\nzoyPpS0PcI9oa8o9na9J8DSqnEbLwXdOlv4TUoxrswD6nmnR31/W+C4PSC8yEUEx\nESiG6IfAakFICxVESBp1VZA7NUbT6JkrhQaz//AVuGAyMoDuXorRGQPit+9DgF2l\neSr0zLzO2MVfMXXKBnueZmjNLvYy2Q2e8QX1jsuvwFhDBt1QmfisdiGSPC7jp0rO\nXdu5eCQuHVYeApipVKry58So783jimUa+mpA0/NUyiYaON7zndtZlQv/y+dqvseT\na2iA73nMVy4y9F95mwdG8ykCAwEAAQ==\n-----END PUBLIC KEY-----",t.REMOTE_FILE_KEY_PROD="-----BEGIN PUBLIC KEY-----\nMIICIjANBgkqhkiG9w0BAQEFAAOCAg8AMIICCgKCAgEAvlEdqD2jCU30/OembiWY\nJKxrjiZuRgweXtV2e7yF1T5XyHkqDZ31a9W0rLWrVRbjr1qDdwU94L1iW/8RrUPK\n2ue+2XH/8e8EH44Y9HYBeIUTciBKU6dqyqflaxY/wm3VO5af303ba564BVzv/31S\nJiHa7QkeVqjY/Za1rv1ZOIwsYBC/SPIK+ofU7qSi6eY8PNe8bje0CFPcwfWRRkNB\nZLQwUwIED1w7playTR8boX5iju+TagAjKSphkj6u+fIkYPdFQgFjSTGu8OwTAerC\nxqAWDSVy7fMxLdrDNrdwMTuQvlUIWiK+1CRHm1r6AXGywqCmrndw6q1LvFcwOgI1\n2brPOx1BdDabUwau26lICDgPqA67Sk7GLTCv3hA2bHvJhK7E0c260u96hRwjDk/L\n8tspQAYGzosyIMTmN29fEtBMlPwClZPqSVa7I7b3Csx4lhRkXI76WxAOmxf5dNQI\n2O6dlrxumdfpM8O6ye3iq51D7ZNNegelee/BIrZEcJZzymvkrDDZHJs6oFQ7bERd\np+nJlr4xoiFd9BPCus6z994/8j7lNTvLanNwsdUYRP/tQJZqlhZ7vY+KpyXn+RGw\nMYFeWXuH3cG05NwryH6676tcOrkboxbxMCMBUMvZK1CWS57noH/iztYivKNyItxf\ni8uoqgc+vDOPPsdujlsgOkcCAwEAAQ==\n-----END PUBLIC KEY-----",t.FileNamesList=["overrides.json","phishing_urls_test.json"],t.FILE_SETTINGS={"overrides.json":{},"phishing_urls_test.json":{isLoadedWhileLoggedOut:!0}}},66961:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.decipherRemoteFileHandler=void 0;const n=r(10174),o=r(16593);t.decipherRemoteFileHandler=async({storeService:e},t)=>({decipheredFile:await(0,n.decipherRemoteFileUpdate)(t.cipheredFileContent,t.fileMetaData,(0,o.sharingKeysSelector)(e.getState()).privateKey)})},97890:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.downloadRemoteFileHandler=t.fetchFile=void 0;const n=r(46298),o=r(64272),i=r(10174),a=r(85845),s=r(87993),c=r(56523),u=r(19601),d=r(96405),l=r(16593),p=r(55539),m=r(23201),g=r(92233),f=r(76905);async function S(e){try{return(await(0,p.httpGetUsingFetch)(e,{responseType:"arraybuffer"})).data}catch(e){throw new u.RemoteFileError(g.RemoteFileUpdateError.DownloadError,e.message)}}function h(e,t,r){const{storeService:n,eventBusService:o}=e;n.dispatch((0,a.updateFileContentAction)({[r.name]:r})),n.dispatch((0,a.updateFileMetaAction)({[r.name]:t})),o.remoteFileChanged(r.name)}async function y(e,[t,r]){const{storeService:n,eventLoggerService:o}=e;if(!function(e){switch(e.status){case c.UPDATE_AVAILABLE_HTTP_STATUS:return!0;case c.NO_CURRENT_UPDATE_HTTP_STATUS:case c.FILE_NOT_FOUND_HTTP_STATUS:case c.SERVER_ERROR_HTTP_STATUS:default:return!1}}(r))return{fileName:t,isUpdated:!1,fileMetaData:r};try{const o=await async function(e,t,r){const n=await S(t.url);if(!t.key)return new f.DownloadedFile(e,n);const o=await(0,i.decipherRemoteFileUpdate)(n,t,(0,l.sharingKeysSelector)(r.getState()).privateKey);return new f.DownloadedFile(e,o)}(t,r,n);h(e,r.revision,o)}catch(e){return(0,u.assertRemoteFileError)(o,e),{fileName:t,isUpdated:!1,fileMetaData:r}}return{fileName:t,isUpdated:!0,fileMetaData:r}}t.fetchFile=S,t.downloadRemoteFileHandler=async(e,t)=>{const{storeService:r}=e,i=await async function(e,t){const r=await(0,s.retrieveFileMetaDataFromCipheredLocalStorage)(e);return Object.entries(t).reduce(((e,[t,n])=>(e[t]=null!==r&&t in r?n.revision??r[t]:0,e)),{})}(e,t);try{const t=await async function(e,t){const r=await(0,o.getFilesMeta)(e,(0,l.userLoginSelector)(e.getState()),t);if((0,o.isGetFilesMetaSuccess)(r)){const{code:e,data:t,...n}=r;return n}if((0,n.isApiError)(r))throw new u.RemoteFileError(g.RemoteFileUpdateError.ServerError,r.message)}(r,i);if(0!==Object.keys(t).length){const n=await(c=t,p=e,Promise.all(Object.entries(c).map((e=>y(p,e))))),o=await async function(e,t){const{eventLoggerService:r}=e;return await Promise.all(t.filter((({isUpdated:e})=>e)).map((async({fileName:t})=>{try{return await(0,s.writeFileInLocalStorage)(e,t),(0,m.logReceiveRemoteFileSuccess)(r),[t,!0]}catch(e){return(0,u.assertRemoteFileError)(r,e),[t,!1]}})))}(e,n),d=o.filter((([e,t])=>!t)).map((([e,t])=>e));r.dispatch((0,a.deleteFileMetaAction)(d)),await function(e,t,r){const n=e.localStorageService.getInstance();return Promise.all(t.filter((({isUpdated:e})=>!e)).map((async({fileName:t})=>{if(!n.isRemoteFileContentExist(t))return;const o=await(0,s.readFileFromLocalStorage)(e,t);null!==o&&h(e,r[t],o)})))}(e,n,i),await(0,s.persistFileMetaInCipheredLocalStorage)(e)}}catch(t){(0,u.assertRemoteFileError)(e.eventLoggerService,t)}var c,p;return(0,d.fileMetaUpdateSelector)(r.getState())}},16179:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.loadFilesAtInit=t.loadFileContentAtInit=void 0;const n=r(1110),o=r(87993),i=r(19601),a=r(85845);async function s(e,t){const r=await(0,o.readFileFromLocalStorage)(e,t);return null!==r&&(e.storeService.dispatch((0,a.updateFileContentAction)({[t]:r})),!0)}t.loadFileContentAtInit=s,t.loadFilesAtInit=async function(e){await Object.keys(n.FILE_SETTINGS).map((async t=>{if(n.FILE_SETTINGS[t].isLoadedWhileLoggedOut)try{await s(e,t)&&e.eventBusService.remoteFileChanged(t)}catch(t){(0,i.assertRemoteFileError)(e.eventLoggerService,t)}}))}},76905:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DownloadedFile=void 0;const n=r(16038);class o{constructor(e,t){this._buf=t,this.name=e}static fromBase64Str(e,t){return new o(e,(0,n.base64ToBuffer)(t))}toBlob(){return new Blob([this._buf])}toString(){return(0,n.ab2str)(this._buf)}toBase64String(){return(0,n.bufferToBase64)(this._buf)}}t.DownloadedFile=o},10174:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.decipherRemoteFileUpdate=t.decipherFileIntoBlob=t.verifyRemoteFileSignature=t.decipherDecryptionKey=t.computePublicKeyForSignature=void 0;const n=r(56668),o=r(83570),i=r(16038),a=r(56984),s=r(36513),c=r(1110),u=r(19601),d=r(92233),l=r(93513),p="https://static.dashlane.com/runtime-resources/ci/";async function m(e,t){const r=(0,s.makeAsymmetricEncryption)({hashAlgorithm:a.HashAlgorithm.SHA_1});try{return l.decode(await r.decrypt(t,e))}catch(e){throw new u.RemoteFileError(d.RemoteFileUpdateError.DecipherError,"Invalid encryption on deciphering key")}}async function g(e,{signature:r,url:n},o){const i=(0,t.computePublicKeyForSignature)(n);return await e.verify(i,r,o)}async function f(e,t){try{return(0,i.str2ab)((0,n.deflatedUtf8ToUtf16)(await(0,n.decipherDashlaneSecureData)(e,t,"",(0,o.makeGetDerivateKeyWithCacheAndQueue)()),{skipInflate:!0}))}catch(e){throw new u.RemoteFileError(d.RemoteFileUpdateError.DecipherError,"Invalid encryption on file")}}t.computePublicKeyForSignature=e=>{if((e=>e.startsWith(p+"prod/"))(e))return c.REMOTE_FILE_KEY_PROD;if((e=>e.startsWith(p+"dev/"))(e))return c.REMOTE_FILE_KEY_DEV;throw new u.RemoteFileError(d.RemoteFileUpdateError.DecipherError,"The file URL is not matching production or dev environnement")},t.decipherDecryptionKey=m,t.verifyRemoteFileSignature=g,t.decipherFileIntoBlob=f,t.decipherRemoteFileUpdate=async function(e,t,r){const n=(0,i.bufferToBase64)(e),o=await m(t.key,r),c=(0,s.makeAsymmetricEncryption)({hashAlgorithm:a.HashAlgorithm.SHA_256});if(!await g(c,t,n))throw new u.RemoteFileError(d.RemoteFileUpdateError.DecipherError,"Invalid signature detected on file");return await f(n,o)}},91313:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0;var n=r(64438);Object.defineProperty(t,"bootstrap",{enumerable:!0,get:function(){return n.bootstrap}})},89122:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fileMetaUpdate$=void 0;const n=r(18948),o=r(3343),i=r(96405);t.fileMetaUpdate$=()=>(0,n.pipe)((0,o.map)(i.fileMetaUpdateSelector),(0,o.distinctUntilChanged)())},23201:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.logReceiveRemoteFileError=t.logReceiveRemoteFileSuccess=void 0;const n=r(92233),o=(e,t,r=undefined)=>{e.logEvent(new n.UserReceiveRemoteFileUpdateEvent({flowStep:t,remoteFileUpdateError:r,packageSource:n.PackageSource.Carbon}))};t.logReceiveRemoteFileSuccess=e=>o(e,n.FlowStep.Complete),t.logReceiveRemoteFileError=(e,t)=>o(e,n.FlowStep.Error,t)},87993:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.writeFileInLocalStorage=t.readFileFromLocalStorage=t.retrieveFileContentFromNonCipheredLocalStorage=t.retrieveFileContentFromCipheredLocalStorage=t.retrieveFileMetaDataFromCipheredLocalStorage=t.persistSingleFileInNonCipheredLocalStorage=t.persistSingleFileContentInCipheredLocalStorage=t.persistFileMetaInCipheredLocalStorage=void 0;const n=r(25576),o=r(96405),i=r(1110),a=r(19601),s=r(92233),c=r(76905),u=e=>{if(!e)throw new a.RemoteFileError(s.RemoteFileUpdateError.LocalStorageError,"LocalStorageService is not initalized")};async function d({localStorageService:e,storeService:t},r){const{persistData:i,isAuthenticated:c}=t.getAccountInfo(),d=e.getInstance();if(!c||i===n.PersistData.PERSIST_DATA_NO)return;u(d);const l=await(0,o.fileSelector)(t.getState(),r);try{await d.storeRemoteFileContent(r,l.toBase64String())}catch(e){throw new a.RemoteFileError(s.RemoteFileUpdateError.LocalStorageError,`Cannot persist ${r} content in local storage`)}}async function l({storeService:e,storageService:t},r){const{persistData:i,isAuthenticated:c}=e.getAccountInfo();if(!c||i===n.PersistData.PERSIST_DATA_NO)return;const d=t.getLocalStorage();u(d);const l=await(0,o.fileSelector)(e.getState(),r);try{await d.writeItem(r,l.toBase64String())}catch(e){throw new a.RemoteFileError(s.RemoteFileUpdateError.LocalStorageError,`Cannot persist ${r} content in local storage`)}}async function p(e,t){const r=e.getInstance();return u(r),await r.isRemoteFileContentExist(t)?c.DownloadedFile.fromBase64Str(t,await r.getRemoteFileContent(t)):Promise.resolve(null)}async function m(e,t){const r=e.getLocalStorage();return u(r),await r.itemExists(t)?c.DownloadedFile.fromBase64Str(t,await r.readItem(t)):Promise.resolve(null)}t.persistFileMetaInCipheredLocalStorage=async function({localStorageService:e,storeService:t}){e.getInstance();const{persistData:r,isAuthenticated:i}=t.getAccountInfo();if(!i||r===n.PersistData.PERSIST_DATA_NO)return;u(e);const c=e.getInstance();try{await c.storeRemoteFileMeta((0,o.fileMetaUpdateSelector)(t.getState()))}catch{throw new a.RemoteFileError(s.RemoteFileUpdateError.LocalStorageError,"Cannot persist file metadata in local storage")}},t.persistSingleFileContentInCipheredLocalStorage=d,t.persistSingleFileInNonCipheredLocalStorage=l,t.retrieveFileMetaDataFromCipheredLocalStorage=async function({localStorageService:e}){const t=e.getInstance();return u(t),await t.isRemoteFileMetaDataExist()?await t.getRemoteFileMeta():Promise.resolve(null)},t.retrieveFileContentFromCipheredLocalStorage=p,t.retrieveFileContentFromNonCipheredLocalStorage=m,t.readFileFromLocalStorage=function(e,t){return i.FILE_SETTINGS[t].isLoadedWhileLoggedOut?m(e.storageService,t):p(e.localStorageService,t)},t.writeFileInLocalStorage=function(e,t){return i.FILE_SETTINGS[t].isLoadedWhileLoggedOut?l(e,t):d(e,t)}},19601:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.assertRemoteFileError=t.RemoteFileError=void 0;const n=r(23201),o=r(70252);class i extends Error{constructor(e,t){super(t),this.name=e,this.name=e}}t.RemoteFileError=i,i.errorInstance="REMOTE_FILE_ERROR",t.assertRemoteFileError=function(e,t){!function(e){return e instanceof i}(t)?(0,o.sendExceptionLog)({error:t}):(0,n.logReceiveRemoteFileError)(e,t.name)}},96405:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fileContentStrSelector=t.fileSelector=t.fileMetaUpdateSelector=void 0;const r=e=>e.device.remoteFile;t.fileMetaUpdateSelector=e=>r(e).fileMetaData,t.fileSelector=(e,t)=>r(e).fileContentState[t],t.fileContentStrSelector=(e,r)=>(0,t.fileSelector)(e,r).toString()},98202:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setupSubscriptions=void 0;const n=r(36428),o=r(18216),i=r(16593);t.setupSubscriptions=function(e,t){e.sessionOpened.on((()=>(0,n.triggerDownloadRemoteFileUpdate)(t,!0))),e.sessionClosed.on((()=>(0,n.triggerDownloadRemoteFileUpdate)(t,!1))),e.coreServicesReady.on((e=>{e.initMode===o.InitMode.Resume&&((0,i.isAuthenticatedSelector)(t.storeService.getState())?(0,n.triggerDownloadRemoteFileUpdate)(t,!0):(0,n.triggerLoadFileAtInit)(t))})),e.appInitialized.on((()=>{(0,n.triggerLoadFileAtInit)(t)}))}},36428:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.triggerDownloadRemoteFileUpdate=t.triggerLoadFileAtInit=t.callRemoteFileUpdateHandler=void 0;const n=r(97890),o=r(1110),i=r(16179);async function a(e){await(0,n.downloadRemoteFileHandler)(e,o.FILE_SETTINGS)}t.callRemoteFileUpdateHandler=a,t.triggerLoadFileAtInit=async function(e){await(0,i.loadFilesAtInit)(e)};let s=null;t.triggerDownloadRemoteFileUpdate=function(e,t){s&&function(e){clearInterval(e)}(s),t&&(s=function(e){return a(e),setInterval((()=>{try{a(e)}catch{}}),18e5)}(e))}},56523:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SERVER_ERROR_HTTP_STATUS=t.FILE_NOT_FOUND_HTTP_STATUS=t.NO_CURRENT_UPDATE_HTTP_STATUS=t.UPDATE_AVAILABLE_HTTP_STATUS=void 0,t.UPDATE_AVAILABLE_HTTP_STATUS="update_available",t.NO_CURRENT_UPDATE_HTTP_STATUS="unknown_revision",t.FILE_NOT_FOUND_HTTP_STATUS="not_found",t.SERVER_ERROR_HTTP_STATUS="error_server"},25661:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0;const n=r(17338),o=r(21587),i=r(23881),a=r(64369),s=r(93820),c=r(90622),u=r(74219),d=r(15209),l=r(21583),p=r(99293),m=r(55861),g=r(74412),f=r(70252),S=r(49409),h=r(43542),y=r(44389),v=r(16359),E=r(40588),A=r(37824),_=r(61),T=r(39952),I=r(70530),b=r(64811),w=r(88530),C=r(76569),D=r(76592),O=r(17387),P=r(33719),N=r(49183),R=r(14581),M=r(51168),L=r(7753),U=r(53156),k=r(16667),F=r(91313),B=r(25560),G=[o.bootstrap,i.bootstrap,c.bootstrap,u.bootstrap,d.bootstrap,l.bootstrap,p.bootstrap,m.bootstrap,g.bootstrap,f.bootstrap,a.bootstrap,S.bootstrap,h.bootstrap,y.bootstrap,v.bootstrap,_.bootstrap,E.bootstrap,T.bootstrap,I.bootstrap,w.bootstrap,C.bootstrap,D.bootstrap,O.bootstrap,P.bootstrap,N.bootstrap,R.bootstrap,M.bootstrap,b.bootstrap,s.bootstrap,k.vpnApiBootstrap,L.bootstrap,U.bootstrap,A.bootstrap,F.bootstrap,B.bootstrap];t.bootstrap=(e,t,r)=>{const o=(0,n.getCoreServices)(e);G.forEach((e=>{e(t,o,r)}))}},74318:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fetchCurrentLocation=t.initCarbon=t.setPlatform=void 0;const n=r(53576),o=r(71796),i=r(4798),a=r(75391),s=r(44242),c=r(20849),u=r(44273),d=r(30855),l=r(87855),p=r(86056),m=r(95623),g=r(17338),f=r(61384),S=r(12995),h=r(70252),y=r(90503),v=r(4673),E=r(50643),A=r(47975),_=r(73011),T=r(96637),I=r(25661),b=r(2646),w=r(18539),C=r(18216),D=r(28486),O=r(88322),P=r(45800);t.setPlatform=(e,t,r)=>{r===C.InitMode.FirstInit&&e.getInstance(g.CarbonServicesTypeEnum.StoreService).getStore().dispatch((0,S.savePlatformInfo)(t)),(0,p.setPlatformInfo)(t)},t.initCarbon=async function(e){if((0,b.setPublicPath)(e.publicPath),!e.storageLayer)throw new Error("Missing Storage layer prevents Carbon initialization");e.keys.cloudflareAccess&&e.keys.cloudflareSecret&&(0,P.setCloudflareHeaders)(e.keys.cloudflareAccess,e.keys.cloudflareSecret);const r=(0,g.carbonServices)({storageLayer:new w.CarbonLocalStorage(e.storageLayer),sessionStorage:e.sessionStorage,createClients:e.createClients}),{storeService:p,storageService:S}=(0,g.getCoreServices)(r);await p.completeRehydration(),(0,O.loadAnonymousApplicationId)(S,p);const h=function(e){const t=e.getState(),r=(0,D.appSessionIdSelector)(t)?C.InitMode.Resume:C.InitMode.FirstInit;return(0,m.logVerbose)({message:`Inferred init mode : ${r}`}),r}(p);(0,t.setPlatform)(r,e.platformInfo,h);const y=await(0,_.setupEventBus)(r);await y.coreServicesReady({initMode:h}),(0,A.loadFrequencyLists)(),e.workers&&(0,f.setWorkersPath)(e.workers),e.plugins&&(0,v.setPlugins)(e.plugins);try{await(0,l.initAuthenticatedCarbonApplication)(e,r,h)}catch(e){throw m.Debugger.error(e,"error while initializing SDK"),e}const{debug:N,e2e:R}=e.connectors;let{leeloo:M,maverick:L,extension:U,diagnostic:k,api:F}=e.connectors;M=M||(0,o.createEventBus)({events:n.CarbonLeelooConnector}),L=L||(0,o.createEventBus)({events:n.CarbonMaverickConnector}),U=U||(0,o.createEventBus)({events:n.ExtensionCarbonConnector}),k=k||(0,o.createEventBus)({events:n.CarbonDiagnosticConnector}),F=F||(0,o.createEventBus)({events:E.apiEvents}),N&&(0,c.subscribeToDebugEvents)(N),R&&(0,d.subscribeToE2EEvents)(R,r),(0,i.subscribeToExtensionEvents)(U,r),(0,a.subscribeToLeelooEvents)(M,r),(0,s.subscribeToMaverickEvents)(L,r),(0,u.subscribeToDiagnosticEvents)(k);const B=new T.TsEventBusCommandQueryBus(r,E.apiEvents,F);return(0,I.bootstrap)(r,B,e?.infrastructure),y.appInitialized({initMode:h,abTestForcedVersion:e.abTestForcedVersion}),r},t.fetchCurrentLocation=function(e,t){return e.country.getCurrentCountry().then((e=>{t.dispatch((0,S.saveCurrentLocation)(e))})).catch((e=>{const t=new Error(`[Sdk/Default] - fetchCurrentLocation: ${e}`);(0,h.sendExceptionLog)({error:t,code:y.ExceptionCriticality.WARNING})}))}},73011:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setupEventBus=void 0;const n=r(17338),o=r(52346),i=r(99293),a=r(24579),s=r(10672),c=r(17387),u=r(33719),d=r(51168),l=r(43057),p=r(63678),m=r(23299),g=r(33045),f=r(63549),S=r(3149),h=r(98202),y=r(46564),v=r(83060);t.setupEventBus=async function(e){const t=(0,n.getCoreServices)(e),r=t.eventBusService,E=[o.setupSubscriptions,p.setupSubscriptions,g.setupSubscriptions,f.setupSubscriptions,i.setupSubscriptions,m.setupSubscriptions,a.setupSubscriptions,l.setupSubscriptions,s.setupSubscriptions,c.setupSubscriptions,d.setupSubscriptions,u.setupSubscriptions,S.setupUserSettingsLogSubscriptions,h.setupSubscriptions,y.setupSubscriptions,v.setupSubscriptions].map((e=>e(r,t)));return await Promise.all(E),r}},10672:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setupSubscriptions=void 0;const n=r(74318),o=r(18216),i=r(58639);t.setupSubscriptions=function(e,t){e.appInitialized.on((async e=>{const{wsService:r,storeService:a}=t;e.initMode===o.InitMode.FirstInit&&(await(0,n.fetchCurrentLocation)(r,a),(0,i.sendLocationInfo)(a.getPlatform().location))}))}},18216:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InitMode=void 0,function(e){e.FirstInit="FirstInit",e.Resume="Resume"}(t.InitMode||(t.InitMode={}))},63340:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makeApplicationModulesAccess=void 0,t.makeApplicationModulesAccess=function(e){return{createClients:()=>e()}}},82568:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makeApplicationModulesAccess=void 0;var n=r(63340);Object.defineProperty(t,"makeApplicationModulesAccess",{enumerable:!0,get:function(){return n.makeApplicationModulesAccess}})},17338:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getCoreServices=t.carbonServices=t.CarbonServicesTypeEnum=void 0;const n=r(80722),o=r(72365),i=r(98416),a=r(18539),s=r(77627),c=r(89016),u=r(1860),d=r(74752),l=r(93990),p=r(73297),m=r(74412),g=r(82568);var f;!function(e){e.StoreService="StoreService",e.StorageService="StorageService",e.SessionService="SessionService",e.MasterPasswordEncryptorService="MasterPasswordEncryptorService",e.LocalDataEncryptorService="LocalDataEncryptorService",e.RemoteDataEncryptorService="RemoteDataEncryptorService",e.AuthorizationKeysEncryptorService="AuthorizationKeysEncryptorService",e.LocalStorageService="LocalStorageService",e.WSService="WSService",e.AutoLoginService="AutoLoginService",e.WebAuthnAuthenticationService="WebAuthnAuthenticationService",e.EventBusService="EventBusService",e.EventLoggerService="EventLoggerService",e.TeamDeviceEncryptedConfigEncryptorService="TeamDeviceEncryptedConfigEncryptorService",e.ApplicationModulesAccess="ApplicationModulesAccess"}(f=t.CarbonServicesTypeEnum||(t.CarbonServicesTypeEnum={})),t.carbonServices=e=>{const t=(0,n.makeStoreService)({sessionStorage:e.sessionStorage,store:void 0}),r=(0,p.makeEventBusService)(),S=e.masterPasswordEncryptorService?e.masterPasswordEncryptorService():(0,o.makeDataEncryptorService)(t),h=e.localDataEncryptorService?e.localDataEncryptorService():(0,o.makeDataEncryptorService)(t),y=e.remoteDataEncryptorService?e.remoteDataEncryptorService():(0,o.makeDataEncryptorService)(t),v=e.teamDeviceEncryptedConfigEncryptorService?e.teamDeviceEncryptedConfigEncryptorService():(0,o.makeDataEncryptorService)(t),E=(0,u.makeKeyDataEncryptorService)(),A=(0,o.makeDataEncryptorService)(t),_=Object.assign({},(0,c.makeWSService)(),e.wsService?e.wsService(t):{}),T=(0,a.makeStorageService)();T.setInstance(e.storageLayer);const I=e.authorizationKeysEncryptorService?e.authorizationKeysEncryptorService():(0,u.makeKeyDataEncryptorService)();(0,o.setObfuscatingKey)(I);const b=(0,i.makeLocalStorageService)({masterPasswordEncryptorService:S,localDataEncryptorService:h,authorizationKeysEncryptorService:I,autoLoginEncryptorService:E,webAuthnAuthenticationEncryptorService:A,storageService:T,storeService:t}),w=(0,m.makeEventLoggerService)({storeService:t,storageService:T}),C=(0,g.makeApplicationModulesAccess)(e.createClients),D=(0,s.makeSessionService)({applicationModulesAccess:C,masterPasswordEncryptorService:S,localDataEncryptorService:h,remoteDataEncryptorService:y,storeService:t,localStorageService:b,storageService:T,wsService:_,eventBusService:r,eventLoggerService:w,teamDeviceEncryptedConfigEncryptorService:v}),O=(0,d.makeAutoLoginService)({autoLoginEncryptorService:E,localStorageService:b,wsService:_,authorizationKeysEncryptorService:I,storeService:t}),P=(0,l.makeWebAuthnAuthenticationService)({webAuthnAuthenticationEncryptorService:A,storeService:t,localStorageService:b,authorizationKeysEncryptorService:I});return{services:[{type:f.WSService,instance:_},{type:f.StoreService,instance:t},{type:f.StorageService,instance:T},{type:f.LocalStorageService,instance:b},{type:f.SessionService,instance:D},{type:f.AuthorizationKeysEncryptorService,instance:I},{type:f.AutoLoginService,instance:O},{type:f.WebAuthnAuthenticationService,instance:P},{type:f.EventBusService,instance:r},{type:f.MasterPasswordEncryptorService,instance:S},{type:f.RemoteDataEncryptorService,instance:y},{type:f.LocalDataEncryptorService,instance:h},{type:f.EventLoggerService,instance:w},{type:f.TeamDeviceEncryptedConfigEncryptorService,instance:v},{type:f.ApplicationModulesAccess,instance:C}],getInstance:function(e){const t=this.services.find((t=>t.type===e));if(void 0===t)throw new Error("Service "+e+" not defined");return t.instance}}},t.getCoreServices=e=>({storeService:e.getInstance(f.StoreService),remoteDataEncryptorService:e.getInstance(f.RemoteDataEncryptorService),masterPasswordEncryptorService:e.getInstance(f.MasterPasswordEncryptorService),localDataEncryptorService:e.getInstance(f.LocalDataEncryptorService),authorizationKeysEncryptorService:e.getInstance(f.AuthorizationKeysEncryptorService),localStorageService:e.getInstance(f.LocalStorageService),storageService:e.getInstance(f.StorageService),sessionService:e.getInstance(f.SessionService),wsService:e.getInstance(f.WSService),autoLoginService:e.getInstance(f.AutoLoginService),webAuthnAuthenticationService:e.getInstance(f.WebAuthnAuthenticationService),eventBusService:e.getInstance(f.EventBusService),eventLoggerService:e.getInstance(f.EventLoggerService),teamDeviceEncryptedConfigEncryptorService:e.getInstance(f.TeamDeviceEncryptedConfigEncryptorService),applicationModulesAccess:e.getInstance(f.ApplicationModulesAccess)})},34066:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const n=r(16593),o=r(38981),i=r(25421),a=r(6e3),s=r(81228),c=r(28287),u=r(10447),d=r(38328),l=r(17095),p=r(18203),m=r(94275),g=r(18380);t.config={commands:{validateToken:{handler:c.validateToken},validateMasterPassword:{handler:c.validateMasterPasswordHandler},resetProtectedItemAutofillTimer:{handler:c.resetProtectedItemAutofillTimerHandler},forceSync:{handler:u.forceSyncHandler},updatePremiumChurningDismissDate:{handler:d.updatePremiumChurningDismissDateHandler},setCredentialSearchOrder:{handler:l.setCredentialSearchOrderHandler},refreshSubscriptionInformation:{handler:p.refreshSubscriptionInformationHandler},updateAccountRecoveryKeyPersonalSettings:{handler:m.updateAccountRecoveryKeyPersonalSettingsHandler}},queries:{getActiveSpaces:{selector:n.activeSpacesSelector},getMasterPasswordAndServerKey:{selector:n.masterPasswordAndServerKeySelector},getIsAuthenticated:{selector:n.isAuthenticatedSelector},getSyncInfo:{selector:n.syncSelector},getIsSyncInProgress:{selector:n.syncIsInProgressSelector},getPremiumStatus:{selector:n.premiumStatusSelector},getNodePremiumStatus:{selector:n.nodePremiumStatusSelector},getSubscriptionInformation:{selector:n.subscriptionInformationSelector},getIsSSOUser:{selector:o.isSSOUserSelector},getSSOMigrationInfo:{selector:o.ssoMigrationInfoSelector},getSSOProviderInfo:{selector:o.ssoProviderInfoSelector},getUserLogin:{selector:n.userLoginSelector},getPublicUserId:{selector:n.publicUserIdSelector},getAnalyticsInstallationId:{selector:n.analyticsInstallationIdSelector},getUserLoginStatus:{selector:a.loginStatusSelector},getLoginStatus:{selector:a.loginStatusSelector},getWebOnboardingMode:{selector:n.webOnboardingModeSelector},getPremiumChurningDismissDate:{selector:n.premiumChurningDismissDateSelector},getIsPaymentFailureChurningDismissed:{selector:n.isPaymentFailureChurningDismissedSelector},getCredentialSearchOrder:{selector:n.getCredentialSearchOrderSelector},getDidOpen:{selector:n.didOpenSelector},getPlatformName:{selector:n.platformNameSelector},getAccountAuthenticationType:{selector:i.accountAuthenticationTypeSelector},getSessionInfo:{selector:n.sessionInfoSelector},getUserCryptoSettings:{selector:n.userCryptoSettingsSelector}},liveQueries:{liveSyncInfo:{operator:s.syncInfo$},liveIsSyncInProgress:{operator:s.syncInProgress$},liveLoginStatus:{operator:a.getLoginStatus$},livePremiumStatus:{operator:s.premiumStatus$},liveSubscriptionInformation:{operator:s.subscriptionInformation$},liveServiceProviderUrl:{subject:s.getServiceProviderUrl$},liveWebOnboardingMode:{operator:s.webOnboardingMode$},liveDidOpen:{operator:s.didOpen$},liveIsSSOUser:{operator:g.isSSOUser$},liveSSOMigrationInfo:{operator:g.ssoMigrationInfo$},liveSessionInfo:{operator:s.sessionInfo$}}}},18380:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ssoMigrationInfo$=t.isSSOUser$=void 0;const n=r(38981),o=r(18948);t.isSSOUser$=()=>(0,o.pipe)((0,o.map)(n.isSSOUserSelector)),t.ssoMigrationInfo$=()=>(0,o.pipe)((0,o.map)(n.ssoMigrationInfoSelector))},92987:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SyncStatuses=t.CredentialSearchOrder=void 0;var n=r(25576);Object.defineProperty(t,"CredentialSearchOrder",{enumerable:!0,get:function(){return n.CredentialSearchOrder}}),Object.defineProperty(t,"SyncStatuses",{enumerable:!0,get:function(){return n.SyncStatuses}})},75199:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.refreshCredentialsDedupView=void 0;const n=r(81200),o=r(47521),i=r(46298),a=r(67331),s=r(90503),c=r(70252);t.refreshCredentialsDedupView=async function(e,t){try{const r="web_extension_credentialsDedupView",u=await(0,o.getFeatureFlip)(e,t,r);return(0,i.isApiError)(u)?((0,c.sendExceptionLog)({error:new Error("Failed to get credentialsDedupView value"),code:s.ExceptionCriticality.WARNING}),e.dispatch((0,a.credentialsDedupViewUpdated)((0,n.getDefaultCredentialsDedupView)()))):e.dispatch((0,a.credentialsDedupViewUpdated)({credentialsDedupView:u.enabledFeatures[0]===r}))}catch(t){return(0,c.sendExceptionLog)({error:new Error(`Failed to refreshCredentialsDedupView: ${t.message}`),code:s.ExceptionCriticality.WARNING}),e.dispatch((0,a.credentialsDedupViewUpdated)((0,n.getDefaultCredentialsDedupView)()))}}},54034:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.triggerSendTransactionDecipheringDiagnosticLog=void 0;const n=r(44273),o=r(95623);t.triggerSendTransactionDecipheringDiagnosticLog=function(e){o.default.log("SendDecipheringLog"),(0,n.default)().decipheringDiagnosticLogEvent(e)}},89160:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getUsersSSOInfo=t.loadLocalData=t.completeLogin=t.checkLogin=void 0;const n=r(82353),o=r(2246),i=r(25576),a=r(59489),s=r(86797),c=r(7624),u=r(16356),d=r(56915),l=r(90622),p=r(46298),m=r(17825),g=r(14656),f=r(92263),S=r(1965),h=r(16593);t.checkLogin=async function(e,r,n){const u=e.getState(),y=(0,h.userLoginSelector)(u);let v,E,A;try{const t=await async function(e,t){return(await(0,l.getLocalAccounts)(e,t)).map((e=>e.login)).map((t=>({login:t,deviceAccessKey:(0,d.getDeviceAccessKeySelector)(e.getState(),t)})))}(e,r),o=(0,d.getDeviceAccessKeySelector)(u,y),a=await(0,p.getAuthenticationMethodsForLogin)(e,{login:y,deviceAccessKey:o,methods:i.localSupportedAuthenticationMethod,profiles:t});if((0,p.isApiError)(a))return async function(e,t,r,n){if(!(0,p.isApiErrorOfType)(p.BusinessError,r))throw new Error(`Failed to getAuthenticationMethodsForLogin (${r.code})`);const o=r.code;switch(o){case p.DeviceDeactivated:throw await(0,S.wipeOutLocalAccounts)(e,t,[n]),new Error(i.AuthenticationCode[i.AuthenticationCode.DEVICE_NOT_REGISTERED]);case p.ClientVersionDoesNotSupportSSOMigration:throw new Error(i.AuthenticationCode[i.AuthenticationCode.CLIENT_VERSION_DOES_NOT_SUPPORT_SSO_MIGRATION]);case p.TeamGenericError:throw new Error(i.AuthenticationCode[i.AuthenticationCode.TEAM_GENERIC_ERROR]);default:(0,m.assertUnreachable)(o)}}(r,n,a,y);!async function(e,t,r){const{profilesToDelete:n}=r;if((n||[]).length>0)return;const o=n.map((e=>e.login));await(0,S.wipeOutLocalAccounts)(e,t,o)}(r,n,a),v=a.verifications,E=a.accountType}catch(e){if(!(0,f.isCarbonError)(e,g.HttpError))throw e;v=function(e){const t=function(e){return(0,o.getUserPublicSetting)(e,"otp2")?s.OtpType.OTP_LOGIN:null}(e);return t===s.OtpType.OTP_LOGIN?[{type:"totp"}]:[]}(y)}const _=v.find((e=>"sso"===e.type));return A=_?.ssoInfo.serviceProviderUrl&&"mp_user_to_sso_member"!==_?.ssoInfo.migration?i.AuthenticationCode.SSO_LOGIN_BYPASS:function(e,t=[]){const r=function(e){if(e.some((e=>"totp"===e.type)))return s.OtpType.OTP_LOGIN;if(e.filter((e=>"sso"!==e.type)).length>0)throw new Error("Unsupported 2FA method requested");return null}(t);return function(e,t){(0,o.storeUserPublicSetting)(e,"otp2",t===s.OtpType.OTP_LOGIN)}(e,r),r===s.OtpType.OTP_LOGIN?i.AuthenticationCode.ASK_OTP:i.AuthenticationCode.ASK_MASTER_PASSWORD}(y,v),function(e,r,n,o){switch(e){case i.AuthenticationCode.SSO_LOGIN_BYPASS:if(!n?.serviceProviderUrl)throw new Error("[LocalAuthentication] - Unable to use SSO verification. Missing SSO information.");r.dispatch((0,c.storeSSOSettings)({ssoUser:!0,...(0,t.getUsersSSOInfo)(n)}));break;case i.AuthenticationCode.ASK_OTP:r.dispatch((0,a.enableOtp)(s.OtpType.OTP_LOGIN))}e!==i.AuthenticationCode.SSO_LOGIN_BYPASS&&r.dispatch((0,c.storeSSOSettings)({ssoUser:!1,...(0,t.getUsersSSOInfo)(n)})),r.dispatch((0,a.storeAccountAuthenticationType)(o))}(A,e,_?_.ssoInfo:void 0,E),A},t.completeLogin=async function(e,t,r,n,o){const a=e.getUserLogin(),s={login:a,deviceAccessKey:(0,d.getDeviceAccessKeySelector)(e.getState(),a),authTicket:n},c=await(0,p.completeLoginWithAuthTicket)(e,s);if((0,p.isApiError)(c))return async function(e,t,r,n){if(!(0,p.isApiErrorOfType)(p.BusinessError,r))throw new Error(`Failed to complete login (${r.code})`);const o=r.code;switch(o){case p.DeviceNotFound:throw await(0,S.wipeOutLocalAccounts)(e,t,[n]),new Error(i.AuthenticationCode[i.AuthenticationCode.DEVICE_NOT_REGISTERED]);case p.InvalidAuthTicket:throw new Error(i.AuthenticationCode[i.AuthenticationCode.TOKEN_NOT_VALID]);default:(0,m.assertUnreachable)(o)}}(t,r,c,a);const{serverKey:l}=c;if(!l)throw new Error(i.AuthenticationCode[i.AuthenticationCode.SERVER_KEY_MISSING]);return e.dispatch((0,u.updateisUsingDashlaneAuthenticator)(o)),e.dispatch((0,u.updateServerKey)(l)),i.AuthenticationCode.ASK_MASTER_PASSWORD},t.loadLocalData=async function(e,t,r){return r.getInstance().prepareCrypto(),await e.getInstance().user.loadSessionData(),t.dispatch((0,a.localDataLoaded)()),i.AuthenticationCode.LOGGEDIN},t.getUsersSSOInfo=e=>{if(!e)return{serviceProviderUrl:""};const t=(e=>{if(e.migration)switch(e.migration){case"mp_user_to_sso_member":return n.AuthenticationFlowContracts.SSOMigrationType.MP_TO_SSO;case"sso_member_to_admin":case"sso_member_to_mp_user":return n.AuthenticationFlowContracts.SSOMigrationType.SSO_TO_MP}})(e);return{serviceProviderUrl:e.serviceProviderUrl?e.serviceProviderUrl:"",...void 0!==t?{migration:t}:{},isNitroProvider:e.isNitroProvider}}},6e3:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getLoginStatus$=t.loginStatusSelector=void 0;const n=r(32034),o=r(16516),i=r(18948),a=r(3343),s=r(27754),c=r(38981),u=(0,n.createSelector)(s.sessionIdSelector,(e=>e.userSession.account.isAuthenticated),((e,t)=>e&&t));t.loginStatusSelector=(0,n.createSelector)(u,(e=>e.userSession.account),c.ssoMigrationInfoSelector,((e,t,r)=>{if(!e)return{login:null,loggedIn:!1,needsSSOMigration:!1};const{isAuthenticated:n,login:o}=t;return{loggedIn:n,login:o,needsSSOMigration:void 0!==r}})),t.getLoginStatus$=()=>(0,i.pipe)((0,a.map)(t.loginStatusSelector),(0,a.distinctUntilChanged)(o.equals))},38865:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.updateWebOnboardingMode=void 0;const n=r(76089),o=r(58639);t.updateWebOnboardingMode=function(e,t,r){if(!e.isAuthenticated())throw new Error("No session set");e.dispatch(n.webOnboardingModeUpdated(r));const i=e.getLocalSettings().webOnboardingMode;o.sendWebOnboardingModeUpdate(i),t.getInstance().user.persistLocalSettings()}},57789:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isOnboardingNotificationShowing=void 0;const n=r(53576);t.isOnboardingNotificationShowing=e=>{const{completedSteps:t,flowLoginCredentialOnWeb:r,leelooStep:o,popoverStep:i}=e,{SHOW_LOGIN_USING_EXTENSION_NOTIFICATION:a,SHOW_PASSWORD_SAVE_SUCCESS:s,SHOW_WEB_SAVE_AND_AUTOLOGIN_COMPLETED:c}=n.WebOnboardingLeelooStep,{SHOW_LOGIN_NOTIFICATION:u}=n.WebOnboardingPopoverStep,d=r&&o===a,l=t.saveCredentialOnWeb&&o===s,p=t.saveCredentialOnWeb&&t.loginCredentialOnWeb&&o===c;return d||l||p||r&&i===u}},36960:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makeDashlaneApiPairingService=void 0;const n=r(46298),o=r(95623);t.makeDashlaneApiPairingService=e=>({requestPairing:t=>(async(e,t)=>{try{const r=await n.requestPairing(e,t);if(n.isApiError(r))throw r;return r}catch(e){return void(0,o.logError)({message:`Pairing request failed: ${e}`})}})(e,t)})},15718:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.pairingIdSelector=t.isPairingEnabledSelector=void 0,t.isPairingEnabledSelector=e=>Boolean(e.userSession.session.pairingId),t.pairingIdSelector=e=>e.userSession.session.pairingId},10824:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.requestPairing=void 0;const n=r(15718),o=r(2246),i=r(16356),a=r(36960);t.requestPairing=async(e,t)=>{const r=e.getState();if((0,n.pairingIdSelector)(r))return;if(!(0,o.getSyncAppSetting)("syncWithLocalClients"))return;const s=(0,a.makeDashlaneApiPairingService)(e),c=await s.requestPairing(t),u=c?.pairingId;u&&e.dispatch((0,i.pairingSucceeded)(u))}},35507:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.transformNodePremiumStatus=t.getFreshPremiumStatus=t.refreshSubscriptionInformation=t.refreshPremiumStatus=void 0;const n=r(16516),o=r(95623),i=r(70252),a=r(48313),s=r(66833),c=r(25576),u=r(25011),d=r(31375),l=r(76089);async function p(e,t){const r=e.getLocalSettings().subscriptionInformation;try{const r=await(0,d.getSubscriptionInformation)(e,t);return e.dispatch((0,l.localSettingsSubscriptionInformationStatusUpdated)(r)),r}catch(e){const t=new Error(`[PremiumController] - refreshUserSubscriptionStatus: ${e}`);if(o.default.error(t),(0,i.sendExceptionLog)({error:t}),r)return r;throw e}}t.refreshPremiumStatus=async function(e,t,r,n){const c=e.getLocalSettings().premiumStatus,d=e.getLocalSettings().nodePremiumStatus,m=!d?.currentTimestampUnix||Date.now()-d.currentTimestampUnix>1e4;if(d&&!m)return c;try{const[o,i]=await Promise.all([f(t,r,n),(0,u.getPremiumStatus)(e,r),p(e,r)]),c=o?.spaces||[],d=v(i),m={...o,planName:o?.planName?.toLowerCase()??null};return e.dispatch((0,a.premiumStatusUpdated)(m)),e.dispatch((0,l.localSettingsNodePremiumStatusUpdated)(d)),(0,s.refreshSpaceData)(e,c),o}catch(e){const t=new Error(`[PremiumController] - refreshPremiumStatus: ${e}`);if(o.default.error(t),(0,i.sendExceptionLog)({error:t}),c)return c;throw e}},t.refreshSubscriptionInformation=p;const m=e=>{if(e.capabilities&&e.capabilities.length)return e.capabilities.reduce(((e,t)=>{const{capability:r,...n}=t;return e[r]=n,e}),{})},g=e=>e.familyMembership?e.familyMembership[0]:void 0;function f(e,t,r){return e.premium.status({login:t,uki:r,billingInformation:!0,spaces:!0,autoRenewal:!0,familyInformation:!0,previousPlan:!0,needsAutoRenewalFailed:!0}).then((e=>{const t=(0,n.pick)(["statusCode","billingInformation","planName","planType","planFeature","endDate","spaces","autoRenewal","previousPlan","autoRenewalFailed","autoRenewInfo","recoveryHash"],e);return t.capabilities=m(e),e.hasOwnProperty("familyMembership")&&(t.familyMembership=g(e)),t}))}t.getFreshPremiumStatus=f;const S=e=>{if(e.capabilities?.length)return e.capabilities.reduce(((e,t)=>{const{capability:r,...n}=t;return e[r]=n,e}),{})},h=e=>{switch(e.b2cStatus.statusCode){case c.B2CStatusCode.Subscribed:return e.b2cStatus.planName.includes("grace")?c.PremiumStatusCode.GRACE_PERIOD:e.b2cStatus.isTrial?c.PremiumStatusCode.NEW_USER:e.b2cStatus.autoRenewal?c.PremiumStatusCode.PREMIUM_CANCELLED:c.PremiumStatusCode.PREMIUM;case c.B2CStatusCode.Legacy:return c.PremiumStatusCode.OLD_ACCOUNT;case c.B2CStatusCode.Free:default:return c.PremiumStatusCode.NO_PREMIUM}};function y(e){const t=[];return e.currentTeam&&t.push({associatedEmail:e.currentTeam.associatedEmail,billingAdmins:e.currentTeam.teamMembership.billingAdmins,color:e.currentTeam.teamInfo.color,companyName:e.currentTeam.teamInfo.teamName,info:{...e.currentTeam.teamInfo},invitationDate:e.currentTeam.invitationDateUnix,isBillingAdmin:e.currentTeam.teamMembership.isBillingAdmin,isSSOUser:e.currentTeam.teamMembership.isSSOUser,isTeamAdmin:e.currentTeam.teamMembership.isTeamAdmin,isGroupManager:e.currentTeam.teamMembership.isGroupManager,joinDate:e.currentTeam.joinDateUnix,letter:e.currentTeam.teamInfo.letter,membersNumber:e.currentTeam.teamInfo.membersNumber,planType:e.currentTeam.teamInfo.planType,revokeDate:null,shouldDelete:!1,status:c.SpaceStatus.Accepted,teamAdmins:{...e.currentTeam.teamMembership.teamAdmins},teamId:e.currentTeam.teamId.toString(),teamName:e.currentTeam.teamName,tier:e.currentTeam.planFeature}),e.pastTeams&&e.pastTeams.forEach((e=>{t.push({associatedEmail:e.associatedEmail,billingAdmins:e.teamMembership.billingAdmins,color:e.teamInfo.color,companyName:e.teamName,info:{...e.info},invitationDate:e.invitationDateUnix,isBillingAdmin:e.teamMembership.isBillingAdmin,isSSOUser:e.teamMembership.isSSOUser,isTeamAdmin:e.teamMembership.isTeamAdmin,isGroupManager:e.teamMembership.isGroupManager,joinDate:e.joinDateUnix,letter:e.teamInfo.letter,membersNumber:e.teamInfo.membersNumber,planType:e.teamInfo.planType,revokeDate:e.revokeDateUnix,shouldDelete:e.shouldDelete,status:e.status,teamAdmins:{...e.teamMembership.teamAdmins},teamId:e.teamId.toString(),teamName:e.teamName,tier:e.planFeature})})),t}function v(e){return{...e.b2cStatus,planName:e.b2cStatus?.planName?.toLowerCase()??null,currentTimestampUnix:Date.now(),isTrial:e.b2cStatus.isTrial,statusCode:h(e),spaces:e.b2bStatus?y(e.b2bStatus):[],b2bStatus:{...e.b2bStatus},capabilities:S(e)}}t.transformNodePremiumStatus=v},70414:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getUsersSSOInfo=t.validateMasterPassword=t.registerDevice=t.registerDeviceWithDashlaneAuthenticator=t.cancelRegistrationWithDashlaneAuthenticator=t.generateUki=t.askServerToSendToken=t.checkLoginWithUki=t.requestDeviceRegistration=t.SendTokenStatus=void 0;const n=r(28354),o=r(16516),i=r(82353),a=r(25576),s=r(72636),c=r(95623),u=r(76089),d=r(86797),l=r(59489),p=r(25963),m=r(63713),g=r(48313),f=r(16038),S=r(64910),h=r(33769),y=r(56668),v=r(16356),E=r(57323),A=r(7624),_=r(43739);var T=r(72636);Object.defineProperty(t,"SendTokenStatus",{enumerable:!0,get:function(){return T.SendTokenStatus}});const I=r(17825),b=r(19399),w=r(28287),C=r(16593),D=r(46298),O=r(70252),P=r(92263);let N,R;t.requestDeviceRegistration=async function(e){const r=e.getAccountInfo().login,n=await(0,D.getAuthenticationMethodsForDevice)(e,{login:r,methods:a.remoteSupportedAuthenticationMethod});if((0,D.isApiError)(n))return function(e){if(!(0,D.isApiErrorOfType)(D.BusinessError,e))throw new Error(`Failed to getAuthenticationMethodsForDevice (${e.code})`);const t=e.code;switch(t){case D.UserNotFound:throw new Error(a.AuthenticationCode[a.AuthenticationCode.USER_DOESNT_EXIST]);case D.SSOBlocked:throw new Error(a.AuthenticationCode[a.AuthenticationCode.SSO_BLOCKED]);case D.ClientVersionDoesNotSupportSSOMigration:throw new Error(a.AuthenticationCode[a.AuthenticationCode.CLIENT_VERSION_DOES_NOT_SUPPORT_SSO_MIGRATION]);case D.TeamGenericError:throw new Error(a.AuthenticationCode[a.AuthenticationCode.TEAM_GENERIC_ERROR]);default:(0,I.assertUnreachable)(t)}}(n);const{verifications:o,accountType:i}=n;if(!o)throw new Error("[requestDeviceRegistration] - No verification in API response.");let s;const c=o.find((e=>"sso"===e.type));return s=c?.ssoInfo.serviceProviderUrl&&"mp_user_to_sso_member"!==c?.ssoInfo.migration?a.AuthenticationCode.SSO_LOGIN_BYPASS:function(e=[]){if(e.some((({type:e})=>"email_token"===e)))return a.AuthenticationCode.ASK_TOKEN;if(e.some((({type:e})=>"totp"===e)))return a.AuthenticationCode.ASK_OTP_FOR_NEW_DEVICE;if(e.some((({type:e})=>"dashlane_authenticator"===e)))return a.AuthenticationCode.ASK_DASHLANE_AUTHENTICATOR;throw new Error("[requestDeviceRegistration - getVerificationType] - Verification not supported!")}(o),function(e,r,n,o){if(e===a.AuthenticationCode.SSO_LOGIN_BYPASS){if(!n?.serviceProviderUrl)throw new Error("[requestDeviceRegistration - processVerification] - Unable to use SSO verification. Missing SSO information.");r.dispatch((0,A.storeSSOSettings)({ssoUser:!0,...(0,t.getUsersSSOInfo)(n)}))}e!==a.AuthenticationCode.SSO_LOGIN_BYPASS&&r.dispatch((0,A.storeSSOSettings)({ssoUser:!1,...(0,t.getUsersSSOInfo)(n)})),r.dispatch((0,l.storeAccountAuthenticationType)(o))}(s,e,c?c.ssoInfo:void 0,i),s},t.checkLoginWithUki=async function(e,t,r){const n=e.getAccountInfo().login;if(!await async function(e,t,r){return"UKI VALID"===await e.authentication.validity({login:t,uki:r})}(t,n,r))throw new Error(a.AuthenticationCode[a.AuthenticationCode.INVALID_UKI]);return e.dispatch((0,l.confirmUserAuthentication)()),Promise.resolve(a.AuthenticationCode.USE_LOCAL_UKI)},t.askServerToSendToken=async function(e,t){const r=await e.authentication.askServerToSendToken({login:t});if(r!==s.SendTokenStatus.SUCCESS)throw c.default.log(`Server failed to send a token with status: ${s.SendTokenStatus[r]}`),new Error(a.AuthenticationCode[a.AuthenticationCode.SEND_TOKEN_FAILED])};const M=(e,t)=>{t?e.dispatch((0,l.enableOtp)(d.OtpType.OTP_LOGIN)):e.dispatch((0,l.enableOtp)(d.OtpType.OTP_NEW_DEVICE))};t.generateUki=function(e){return`${e}-${(0,n.v4)()}`};const L=(e,t,r,n,o)=>{const i=o||E.device.getDefaultDeviceName(),s=e.getPlatformInfo(),c=e.getAccountInfo().login,u={deviceName:(0,b.secureDeviceName)(i),appVersion:s.appVersion,platform:s.platformName,osCountry:(0,D.makeSafeCountry)(e.getLocation().country||s.country),osLanguage:(0,D.makeSafeLanguage)(s.lang),temporary:r!==a.PersistData.PERSIST_DATA_YES};switch(t.type){case"extraDeviceToken":return(0,D.completeExtraDeviceRegistrationWithToken)(e,{device:u,login:c,verification:{token:(0,a.extractExtraDeviceToken)(t)}});case"emailToken":case"otp":case"sso":return(0,D.completeDeviceRegistrationWithAuthTicket)(e,{device:u,login:c,authTicket:n});default:(0,I.assertUnreachable)(t)}},U=async(e,t)=>{const r=await(0,w.dashlaneAuthenticatorGetAuthTicket)(e,t);if(!1===r.success){const{error:{code:e,message:t}}=r;if(e===a.AuthenticationCode.BUSINESS_ERROR)throw new Error(t);throw new Error(a.AuthenticationCode[e])}return N?.(a.CancelDashlaneAuthenticatorRegistration.COMPLETED),r.authTicket};t.cancelRegistrationWithDashlaneAuthenticator=async function(){R?.(a.CancelDashlaneAuthenticatorRegistration.CANCELLED)},t.registerDeviceWithDashlaneAuthenticator=async function(e,t,r){const n=new Promise(((e,t)=>{N=e,R=t}));let o;try{o=(await Promise.all([U(e,r),n]))[0]}catch(e){if(e===a.CancelDashlaneAuthenticatorRegistration.CANCELLED)return a.AuthenticationCode.DASHLANE_AUTHENTICATOR_LOGIN_CANCELLED;throw e}finally{R=void 0,N=void 0}if(o){const n=await((e,t,r,n)=>{const o=n||E.device.getDefaultDeviceName(),i=e.getPlatformInfo(),s=e.getAccountInfo().login,c={deviceName:(0,b.secureDeviceName)(o),appVersion:i.appVersion,platform:i.platformName,osCountry:(0,D.makeSafeCountry)(e.getLocation().country||i.country),osLanguage:(0,D.makeSafeLanguage)(i.lang),temporary:t!==a.PersistData.PERSIST_DATA_YES};return(0,D.completeDeviceRegistrationWithAuthTicket)(e,{device:c,login:s,authTicket:r})})(e,t,o,r);(0,D.isApiError)(n)&&function(e){if(!(0,D.isApiErrorOfType)(D.BusinessError,e))throw new Error(`Failed to complete device registration (${e.code})`);const t=e.code;if(t===D.InvalidAuthTicket)throw new Error(a.AuthenticationCode[a.AuthenticationCode.DASHLANE_AUTHENTICATOR_PUSH_NOTIFICATION_DENIED]);(0,I.assertUnreachable)(t)}(n);const{deviceAccessKey:i,deviceSecretKey:s,settings:c,serverKey:u,deviceAnalyticsId:d,userAnalyticsId:l,publicUserId:p}=n,{login:m}=e.getAccountInfo();return e.dispatch((0,_.deviceRegistered)((0,_.makeDeviceRegistrationKeys)(i,s),t,m)),e.dispatch((0,v.updateisUsingDashlaneAuthenticator)(!0)),e.dispatch((0,v.updateisUsingBackupCode)(!1)),u&&e.dispatch((0,v.updateServerKey)(u)),e.dispatch((0,v.updateSettingsForMPValidation)(c)),d&&e.dispatch((0,v.updateDeviceAnalyticsId)(d)),l&&e.dispatch((0,v.updateUserAnalyticsId)(l)),p&&e.dispatch((0,v.updatePublicUserId)(p)),a.AuthenticationCode.ASK_MASTER_PASSWORD}throw new Error("Authentication Ticket is missing")};const k=async(e,t)=>{const r=await(0,w.convertTokenToAuthTicket)(e,t);if(!1===r.success){const{error:{code:e,message:t}}=r;if(e===a.AuthenticationCode.BUSINESS_ERROR)throw new Error(t);throw new Error(a.AuthenticationCode[e])}return r.authTicket};t.registerDevice=async function(e,t,r,n,i,s){const c=await k(e,r),u=await L(e,r,t,c,i);if((0,D.isApiError)(u))return function(e,t){if(!(0,D.isApiErrorOfType)(D.BusinessError,e))throw new Error(`Failed to complete device registration (${e.code})`);const r=e.code;switch(r){case D.UserNotFound:throw new Error(a.AuthenticationCode[a.AuthenticationCode.INVALID_LOGIN]);case D.VerificationFailed:case D.InvalidAuthTicket:if("otp"===t.type)throw new Error(a.AuthenticationCode[a.AuthenticationCode.OTP_NOT_VALID]);throw new Error(a.AuthenticationCode[a.AuthenticationCode.TOKEN_NOT_VALID]);case D.VerificationMethodDisabled:throw new Error(a.AuthenticationCode[a.AuthenticationCode.REGISTER_DEVICE_FAILED]);case D.TeamGenericError:throw new Error(a.AuthenticationCode[a.AuthenticationCode.TEAM_GENERIC_ERROR]);default:(0,I.assertUnreachable)(r)}}(u,r);const{deviceAccessKey:d,deviceSecretKey:l,settings:p,serverKey:m,ssoServerKey:g,remoteKeys:E,deviceAnalyticsId:A,userAnalyticsId:T,publicUserId:b}=u;if(g){const{masterPasswordEncryptorService:t,remoteDataEncryptorService:r,ssoServiceProviderKey:n}=s;if(!E||(0,o.isEmpty)(E))throw new Error("registerDevice failed with error: ssoServerKey or remoteKeys is missing");const i=(0,f.base64ToBuffer)(g),a=E.filter((e=>"sso"===e.type))[0];try{const o=(0,f.base64ToBuffer)(n),s=(0,h.getEncryptionKeyBuffer)(o,i,{skipDerivation:!0}),c=(0,f.arrayBufferToText)(s),u="",d=(0,S.getNoDerivationCryptoConfig)();e.dispatch((0,v.updateMasterPassword)(c)),await t.setInstance({raw:c},u,d);const l=await t.getInstance().decrypt(a.key),p=(0,y.deflatedUtf8ToUtf16)(l,{skipUtf8Decoding:!0,skipInflate:!0});await r.setInstance({raw:p},u,d),e.dispatch((0,v.updateRemoteKey)(p))}catch(e){throw new Error(`registerDevice failed deciphering remoteKey with error: ${e}`)}}const{login:w}=e.getAccountInfo();return e.dispatch((0,_.deviceRegistered)((0,_.makeDeviceRegistrationKeys)(d,l),t,w)),e.dispatch((0,v.updateisUsingDashlaneAuthenticator)(!1)),e.dispatch((0,v.updateisUsingBackupCode)(n)),m&&e.dispatch((0,v.updateServerKey)(m)),e.dispatch((0,v.updateSettingsForMPValidation)(p)),"otp"===r?.type&&M(e,m),A&&e.dispatch((0,v.updateDeviceAnalyticsId)(A)),T&&e.dispatch((0,v.updateUserAnalyticsId)(T)),b&&e.dispatch((0,v.updatePublicUserId)(b)),a.AuthenticationCode.ASK_MASTER_PASSWORD},t.validateMasterPassword=async function(e,t){try{const r=e.getState(),n=(0,C.masterPasswordValidationDataSelector)(r),o=e=>{},[i]=await m.decrypt(t.getInstance(),o,null,new Map,[n]);return e.dispatch(await(0,g.applyTransaction)(i)),e.dispatch(u.registerLastSync(p.MIN_SYNC_TIMESTAMP)),a.AuthenticationCode.LOGGEDIN}catch(e){const t=P.CarbonError.fromAnyError(e).addContextInfo("REMOTE LOGIN","validateMasterPassword");throw(0,O.sendExceptionLog)({error:t}),new Error(a.AuthenticationCode[a.AuthenticationCode.WRONG_PASSWORD])}},t.getUsersSSOInfo=e=>{if(!e)return{serviceProviderUrl:""};const t=(e=>{if(e.migration)switch(e.migration){case"mp_user_to_sso_member":return i.AuthenticationFlowContracts.SSOMigrationType.MP_TO_SSO;case"sso_member_to_admin":case"sso_member_to_mp_user":return i.AuthenticationFlowContracts.SSOMigrationType.SSO_TO_MP}})(e);return{serviceProviderUrl:e.serviceProviderUrl?e.serviceProviderUrl:"",...void 0!==t?{migration:t}:{},isNitroProvider:e.isNitroProvider}}},58639:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sendConfirmCreateAccountResult=t.sendEncryptSettingsResult=t.sendFeatures=t.sendWebOnboardingModeUpdate=t.sendTeamAdminDataUpdate=t.sendAccountInfo=t.changeDeviceNameResult=t.deactivateDeviceResult=t.updatePaymentCardTokenResult=t.reportDataUpdate=t.getDataUpdates=t.sendLocationInfo=t.sendLocalAccounts=t.triggerSessionSyncStatus=t.triggerSessionOpened=t.triggerOpenSessionFailed=t.getAuthenticationCodeFromError=t.triggerServerSidePairingStatusChanged=t.triggerLoginStatusChanged=t.triggerOpenSessionMasterPasswordLess=t.triggerOpenSessionSsoRedirectionToIdpRequired=t.triggerOpenSessionExtraDeviceTokenRequired=t.triggerOpenSessionDashlaneAuthenticator=t.triggerOpenSessionTokenSent=t.triggerAskMasterPassword=t.triggerOpenSessionOTPForNewDeviceRequired=t.triggerOpenSessionOTPSent=t.SessionResumingCode=t.AuthenticationCode=void 0;const n=r(16516),o=r(53576),i=r(21726),a=r(19697),s=r(70252),c=r(90503),u=r(95623),d=r(39373),l=r(46083),p=r(92263),m=r(14656),g=r(90622),f=r(25576);Object.defineProperty(t,"AuthenticationCode",{enumerable:!0,get:function(){return f.AuthenticationCode}}),Object.defineProperty(t,"SessionResumingCode",{enumerable:!0,get:function(){return f.SessionResumingCode}});const S=r(19979),h=r(56814),y=r(91892),v=r(41717),E=r(38981),A=r(27885);function _(e){u.default.log(`Session status updated for ${e.login}`);const t=(0,i.default)();t&&t.loginStatusChanged(e);const r=(0,a.default)();r&&r.loginStatusChanged(e)}function T(e){if(a.default){const t=(0,a.default)();t&&t.serverSidePairingStatusChanged(e)}}function I(e){let t=e&&e.message&&void 0!==f.AuthenticationCode[e.message]?f.AuthenticationCode[e.message]:f.AuthenticationCode.UNKNOWN_ERROR;return t===f.AuthenticationCode.UNKNOWN_ERROR&&((0,p.isCarbonError)(e,m.HttpError,m.HttpErrorCode.NETWORK_ERROR)&&(t=f.AuthenticationCode.NETWORK_ERROR),e?.message?.includes("TOKEN_NOT_VALID")&&(t=f.AuthenticationCode.TOKEN_NOT_VALID)),t}function b(e){switch(e){case f.AuthenticationCode.INVALID_LOGIN:case f.AuthenticationCode.EMPTY_LOGIN:case f.AuthenticationCode.EMPTY_MASTER_PASSWORD:case f.AuthenticationCode.EMPTY_TOKEN:case f.AuthenticationCode.EMPTY_OTP:case f.AuthenticationCode.NETWORK_ERROR:case f.AuthenticationCode.USER_DOESNT_EXIST:case f.AuthenticationCode.OTP_NOT_VALID:case f.AuthenticationCode.TOKEN_NOT_VALID:case f.AuthenticationCode.TOKEN_TOO_MANY_ATTEMPTS:case f.AuthenticationCode.WRONG_PASSWORD:return c.ExceptionCriticality.WARNING;default:return c.ExceptionCriticality.ERROR}}function w(e){return Promise.resolve({localAccounts:e}).then((e=>{u.default.log("send localAccountsListUpdated to leeloo");const t=(0,i.default)();t&&t.localAccountsListUpdated(e);const r=(0,a.default)();r&&r.localAccountsListUpdated(e)}))}function C(e){const t=e.getPersonalData(),r=e.getSpaceData(),o=e.getSharingData(),i=e.getUserLogin(),a=(0,n.curry)(d.removeCredentialsWithQuarantinedSpaces)(r),s=(0,n.pipe)(a,d.fixCredentialsWithMissingTitles)(t.credentials),c=["changesToUpload","changeHistories"],u=(0,n.omit)(c,{...t,credentials:s}),p=(0,d.handleLimitedSharedCredentialsPassword)(s,o,i),m=(0,l.handleLimitedSharedNotes)(t.notes,o,i);return{personalDataToSend:u,obfuscatedPersonalDataToSend:(0,n.omit)(c,{...t,credentials:p,notes:m})}}function D(e){const t=e.getState(),r=e.getSpaceData(),{obfuscatedPersonalDataToSend:n}=C(e),o=(0,i.default)(),s=(0,a.default)();if(o&&o.dataModelUpdated(n),s&&s.spaceDataUpdated(r),o){const e=(0,S.getIconsUrlsForCredentials)(n.credentials),r=(0,h.getFormattedDomainsFromUrls)(e),i=(0,h.decryptIconsDomains)((0,y.iconsSelector)(t),r),a={...n,credentials:(0,S.getCredentialsWithWebsiteIcon)(n.credentials,i,v.defaultIconTypes)};o.dataModelUpdated(a)}}function O(e,t){const r=(0,i.default)();r&&r.accountInfoChanged({accountInfo:e,spaceData:t});const n=(0,a.default)();n&&n.accountInfoChanged({accountInfo:e,spaceData:t})}function P(e){const t=(0,i.default)();t&&t.webOnboardingModeUpdated(e);const r=(0,a.default)();r&&r.webOnboardingModeUpdated(e)}t.triggerOpenSessionOTPSent=function(e){u.default.log("Ask for OTP");const t=(0,i.default)();t&&t.openSessionOTPSent(e);const r=(0,a.default)();r&&r.openSessionOTPSent(e)},t.triggerOpenSessionOTPForNewDeviceRequired=function(){const e=(0,i.default)();e&&e.openSessionOTPForNewDeviceRequired();const t=(0,a.default)();t&&t.openSessionOTPForNewDeviceRequired()},t.triggerAskMasterPassword=function(e){u.default.log("Ask for master password");const t=(0,i.default)();t&&t.openSessionAskMasterPassword({login:e});const r=(0,a.default)();r&&r.openSessionAskMasterPassword({login:e})},t.triggerOpenSessionTokenSent=function(e){u.default.log("Ask for new device e-mail token");const t=(0,i.default)();t&&t.openSessionTokenSent(e);const r=(0,a.default)();r&&r.openSessionTokenSent(e)},t.triggerOpenSessionDashlaneAuthenticator=function(){(0,u.logDebug)({message:"Ask for new device dashlane authenticator push notification"});const e=(0,i.default)();e&&e.openSessionDashlaneAuthenticator();const t=(0,a.default)();t&&t.openSessionDashlaneAuthenticator()},t.triggerOpenSessionExtraDeviceTokenRequired=function(){const e=(0,i.default)();e&&e.openSessionExtraDeviceTokenRequired();const t=(0,a.default)();t&&t.openSessionExtraDeviceTokenRequired()},t.triggerOpenSessionSsoRedirectionToIdpRequired=function(e,t){const r=(0,i.default)();r&&r.openSessionSsoRedirectionToIdpRequired({serviceProviderRedirectUrl:e,isNitroProvider:t});const n=(0,a.default)();n&&n.openSessionSsoRedirectionToIdpRequired({serviceProviderRedirectUrl:e,isNitroProvider:t})},t.triggerOpenSessionMasterPasswordLess=function(){const e=(0,i.default)();e&&e.openSessionMasterPasswordLess();const t=(0,a.default)();t&&t.openSessionMasterPasswordLess()},t.triggerLoginStatusChanged=_,t.triggerServerSidePairingStatusChanged=T,t.getAuthenticationCodeFromError=I,t.triggerOpenSessionFailed=function(e){u.default.log("Failed to open Session"),u.default.log(`error: ${e}`);const t=I(e),r=t===f.AuthenticationCode.UNKNOWN_ERROR?e&&e.message&&"string"==typeof e.message?e.message:"89645128":"",n=new Error(`[SessionCommunication] - triggerOpenSessionFailed: ${e}`);n.stack=e.stack,u.default.error(n),(0,s.sendExceptionLog)({error:n,code:b(t)});const o={errorCode:f.AuthenticationCode[t],additionalErrorInfo:r,displayErrorCode:!0},c=(0,i.default)();c&&c.openSessionFailed(o);const d=(0,a.default)();d&&d.openSessionFailed(o)},t.triggerSessionOpened=function(e,t,r,n){const i=void 0!==(0,E.ssoMigrationInfoSelector)(e.getState()).migration;_({loggedIn:!0,login:e.getAccountInfo().login,needsSSOMigration:i}),O(r,(0,A.getNodePremiumStatusSpaceData)(e)),D(e),P(e.getLocalSettings().webOnboardingMode),(0,g.getLocalAccounts)(e,t).then((e=>{w(e)})),void 0!==n&&T({serverSidePairingStatus:n?o.ServerSidePairingStatus.PAIRED:o.ServerSidePairingStatus.UNPAIRED})},t.triggerSessionSyncStatus=function(e){const t=(0,i.default)();t&&t.sessionSyncStatus(e);const r=(0,a.default)();r&&r.sessionSyncStatus(e)},t.sendLocalAccounts=w,t.sendLocationInfo=function(e){const t=(0,a.default)();t&&t.currentLocationUpdated(e)},t.getDataUpdates=C,t.reportDataUpdate=D,t.updatePaymentCardTokenResult=function(e){const t=(0,a.default)();t&&t.updatePaymentCardTokenResult(e)},t.deactivateDeviceResult=function(e){const t=(0,i.default)();t&&t.deactivateDeviceResult(e);const r=(0,a.default)();r&&r.deactivateDeviceResult(e)},t.changeDeviceNameResult=function(e){const t=(0,i.default)();t&&t.changeDeviceNameResult(e);const r=(0,a.default)();r&&r.changeDeviceNameResult(e)},t.sendAccountInfo=O,t.sendTeamAdminDataUpdate=function(e){const t=(0,a.default)();t&&t.teamAdminDataUpdated(e)},t.sendWebOnboardingModeUpdate=P,t.sendFeatures=function(e){const t=(0,i.default)();t&&t.accountFeaturesChanged(e);const r=(0,a.default)();r&&r.accountFeaturesChanged(e)},t.sendEncryptSettingsResult=function(e){const t=(0,a.default)();t&&t.encryptSettingsResultUpdated(e)},t.sendConfirmCreateAccountResult=function(e){const t=(0,a.default)();t&&t.confirmCreateAccountResultUpdated(e)}},5464:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.refeshAccountInfo=t.AutofillProtectionStatus=t.askWebsiteInfo=t.saveGeneratedPassword=t.generatePassword=t.getPasswordGenerationSettings=t.generateAndSavePassword=t.resumeSession=t.sessionForceSync=t.getAndTriggerRefreshAccountInfo=t.makeSessionController=void 0;const n=r(92233),o=r(50415),i=r(95623),a=r(58639),s=r(95648),c=r(18862),u=r(70252),d=r(44908),l=r(35507),p=r(29954),m=r(9486),g=r(19399),f=r(56915),S=r(16593),h=r(28287),y=r(34376),v=r(27885);t.makeSessionController=e=>({askWebsiteInfo:t=>P(e.storeService,t),cancelPremiumSubscription:()=>async function(e,t,r){if(!e.isAuthenticated())return{success:!1};try{return await t.getInstance().payment.cancelPremiumSubscription(),_(e,t,r).then(T).catch((e=>{})),{success:!0}}catch(e){const t=e.message,r=new Error(`[SessionController] - cancelPremiumSubscription: ${e}`);return i.default.log(r),u.sendExceptionLog({error:r}),{success:!1,reason:t}}}(e.storeService,e.sessionService,e.wsService),changeDeviceName:(t,r)=>function(e,t,r,n){if(e.isAuthenticated()){const e=(0,g.secureDeviceName)(n);return t.getInstance().device.changeDeviceName(r,e).catch((e=>{const t=new Error(`[SessionController] - changeDeviceName: ${e}`);i.default.log(t),u.sendExceptionLog({error:t})}))}return Promise.resolve(null)}(e.storeService,e.sessionService,t,r),closeSession:()=>{return t=e.sessionService,i.default.log("SessionController/closeSession called"),t.close();var t},lockSession:()=>e.sessionService.lock(),deactivateDevice:t=>function(e,t,r){return e.isAuthenticated()?t.getInstance().device.deactivateDevice(r).catch((e=>{const t=new Error(`[SessionController] - deactivateDevice: ${e}`);i.default.log(t),u.sendExceptionLog({error:t})})):Promise.resolve(null)}(e.storeService,e.sessionService,t),generateAndSavePassword:t=>w(e.storeService,e.sessionService,t),generatePassword:t=>D(e.storeService,t),getAndTriggerRefreshAccountInfo:()=>A(e.storeService,e.sessionService,e.wsService),getPasswordGenerationSettings:()=>C(e.storeService),getCurrentUserInfo:()=>(0,y.getCurrentUserInfo)(e.storeService),getDevicesList:()=>function(e,t){return e.isAuthenticated()?t.getInstance().device.fetchDevicesList().catch((e=>(i.default.log("Error while fetching Devices list",e),[]))):Promise.resolve([])}(e.storeService,e.sessionService),getInvoices:()=>function(e,t){return e.isAuthenticated()?t.getInstance().payment.fetchInvoices().catch((e=>{const t=new Error(`[SessionController] - getInvoices: ${e}`);return i.default.log(t),u.sendExceptionLog({error:t}),null})):Promise.resolve(null)}(e.storeService,e.sessionService),getPersonalData:()=>e.storeService.getPersonalData(),getPersonalSettings:()=>{return t=e.storeService,Promise.resolve(t.getPersonalSettings());var t},getTemporaryToken:()=>function(e,t){return e.hasSessionId()?t.getInstance().device.fetchTemporaryToken().catch((e=>(i.default.log("Error while fetching Temporary token",e),null))):Promise.resolve(null)}(e.storeService,e.sessionService),getUki:()=>{return t=e.storeService,{uki:(0,f.ukiSelector)(t.getState())};var t},isSaveCredentialDisabled:t=>(0,p.isSaveCredentialDisabledOnDomain)(e.storeService,t),signalSaveCredentialDisabled:t=>(0,p.signalSaveCredentialDisabled)(e.storeService,e.sessionService,t),resumeSession:()=>b(e.storeService,e.storageService,e.sessionService,e.wsService),saveGeneratedPassword:(t,r)=>O(e.storeService,e.sessionService,t,r),sessionForceSync:(t=n.Trigger.Manual)=>I(e.sessionService,t),updateCardToken:(t,r)=>async function(e,t,r,n,o){try{if(!e.isAuthenticated())return;const{payment:i}=t.getInstance(),s=await i.updatePaymentCard(n,o);a.updatePaymentCardTokenResult(s),_(e,t,r).then(T).catch((e=>{}))}catch(e){const t=e.message,r=new Error(`[SessionController] - updateCardToken: ${e}`);i.default.log(r),u.sendExceptionLog({error:r}),a.updatePaymentCardTokenResult({success:!1,reason:t})}}(e.storeService,e.sessionService,e.wsService,t,r),validateMasterPassword:t=>(0,h.validateMasterPassword)(e.storeService,e.masterPasswordEncryptorService,t)});const E={devicesCount:0,premiumStatus:{statusCode:null},contactInfo:{},subscriptionCode:null};async function A(e,t,r){if(!e.isAuthenticated())return e.dispatch((0,c.saveAccountContactInfo)(E.contactInfo)),E;try{const n=await _(e,t,r),o=n.accountInfo;return e.dispatch((0,c.saveAccountContactInfo)(o.contactInfo)),T(n),o}catch(t){i.default.error("Error during getRefreshedAccountInfo",t);const r=(0,S.premiumStatusSelector)(e.getState()),n=r?{premiumStatus:r}:{};return{...E,...n}}}async function _(e,t,r){const{device:n,user:o}=t.getInstance(),a=(0,l.refreshPremiumStatus)(e,r,e.getUserLogin(),(0,f.ukiSelector)(e.getState())).then((()=>({premiumStatus:e.getLocalSettings().premiumStatus,nodePremiumStatusSpaceData:(0,v.getNodePremiumStatusSpaceData)(e)}))),s=n.fetchDevicesList().then((e=>e.length)).catch((e=>1)),c=o.fetchContactInfo(),d=o.fetchSubscriptionCode();try{await o.fetchAccountInfo()}catch(e){(0,i.logError)(e),u.sendExceptionLog({error:e})}const[p,m,g,S]=await Promise.all([a,s,c,d]),{premiumStatus:h,nodePremiumStatusSpaceData:y}=p;if(!h)throw new Error("premium info should exist");return{accountInfo:{premiumStatus:h,devicesCount:m,contactInfo:g,subscriptionCode:S},nodePremiumStatusSpaceData:y}}function T(e){a.sendAccountInfo(e.accountInfo,e.nodePremiumStatusSpaceData)}async function I(e,t=n.Trigger.Manual){await e.getInstance().user.attemptSync(t)}function b(e,t,r,n){return(0,m.triggerABTestingChanged)(e.getABTesting()),a.sendLocationInfo(e.getPlatform().location),e.isAuthenticated()?A(e,r,n).then((r=>(a.triggerSessionOpened(e,t,r),!0))):Promise.resolve(null)}function w(e,t,r){return d.generateAndSavePassword(e,t,r)}function C(e){return d.getDefaultPasswordGenerationSettings(e.getPersonalSettings())}function D(e,t){return d.generatePassword(e.getPersonalSettings(),t)}function O(e,t,r,n){return d.saveGeneratedPassword(e,t,r,n)}function P(e,t){return(0,s.getWebsiteInfo)(e,t)}t.getAndTriggerRefreshAccountInfo=A,t.sessionForceSync=I,t.resumeSession=b,t.generateAndSavePassword=w,t.getPasswordGenerationSettings=C,t.generatePassword=D,t.saveGeneratedPassword=O,t.askWebsiteInfo=P,t.AutofillProtectionStatus=(0,o.Enum)("UNPROTECTED","LOCKED","UNLOCKED"),t.refeshAccountInfo=function(e,t,r){_(e,t,r).then(T).catch((e=>{}))}},66833:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getFreshSpaceData=t.updateCurrentSpaceWith=t.updateSpaceData=t.refreshSpaceData=void 0;const n=r(36738),o=r(58639);function i(e,t){const r={spaces:t};e.dispatch((0,n.spaceDataUpdated)(r)),(0,o.reportDataUpdate)(e)}function a(e){return(e||[]).map((e=>({teamId:e.teamId,details:e})))}t.refreshSpaceData=function(e,t){const r=a(t);return i(e,r),Promise.resolve(r)},t.updateSpaceData=i,t.updateCurrentSpaceWith=function(e,t){const r=e.getSpaceData().spaces.map((e=>"accepted"===e.details.status?t(e):e));i(e,r)},t.getFreshSpaceData=a},16661:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IconsCacheLoaded=t.iconsRefreshed=t.iconsUpdated=t.ICONS_CACHE_LOADED=t.ICONS_REFRESHED=t.ICONS_UPDATED=void 0,t.ICONS_UPDATED="ICONS_UPDATED",t.ICONS_REFRESHED="ICONS_REFRESHED",t.ICONS_CACHE_LOADED="ICONS_CACHE_LOADED",t.iconsUpdated=e=>({type:t.ICONS_UPDATED,data:e}),t.iconsRefreshed=e=>({type:t.ICONS_REFRESHED,data:e}),t.IconsCacheLoaded=e=>({type:t.ICONS_CACHE_LOADED,data:e})},19695:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.iconsFromStorage=t.iconsToStorage=void 0,t.iconsToStorage=e=>({...e,domains:Array.from(e.domains.entries())}),t.iconsFromStorage=e=>({...e,domains:new Map(e.domains)})},58174:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getEmptyIconByDomains=void 0;const n=r(16661),o=r(47408),i=r(46445);function a(){return{domains:new Map,lastUpdateTimeSeconds:0}}t.default=(e=a(),t)=>{switch(t.type){case n.ICONS_UPDATED:return{...e,domains:s(e,t.data)};case n.ICONS_REFRESHED:return{...e,domains:s(e,t.data),lastUpdateTimeSeconds:(0,o.getUnixTimestamp)()};case n.ICONS_CACHE_LOADED:return t.data;default:return e}},t.getEmptyIconByDomains=a;const s=(e,t)=>t.reduce(((e,t)=>{const{domain:r,...n}=t;if(!r)return e;const o=(0,i.computeHashMD5)(r);return e.get(o)||e.set(o,n),e}),new Map(e.domains))},43416:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.loadedStoredUserABTests=t.refreshedUserABTests=t.SENT_AB_TEST_USAGE_LOG=t.STORED_USER_AB_TEST_LOADED=t.USER_AB_TESTS_UPDATED=void 0,t.USER_AB_TESTS_UPDATED="USER_AB_TEST_UPDATED",t.STORED_USER_AB_TEST_LOADED="STORED_USER_AB_TEST_LOADED",t.SENT_AB_TEST_USAGE_LOG="SENT_AB_TEST_USAGE_LOG",t.refreshedUserABTests=e=>({type:t.USER_AB_TESTS_UPDATED,lastUpdateTimestamp:Date.now(),tests:e}),t.loadedStoredUserABTests=e=>({type:t.STORED_USER_AB_TEST_LOADED,userABTests:e})},1678:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getEmptyTests=void 0;const n=r(43416);t.getEmptyTests=function(){return{lastUpdateTimestamp:null,tests:{}}},t.default=(e={lastUpdateTimestamp:null,tests:{}},t)=>{switch(t.type){case n.USER_AB_TESTS_UPDATED:return{...e,tests:t.tests,lastUpdateTimestamp:t.lastUpdateTimestamp};case n.STORED_USER_AB_TEST_LOADED:return{...e,...t.userABTests};default:return e}}},62627:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.userABTestVariantSelector=t.userABTestSelector=t.userABTestsSelector=void 0,t.userABTestsSelector=e=>e.userSession.abTests,t.userABTestSelector=(e,r)=>(0,t.userABTestsSelector)(e).tests[r],t.userABTestVariantSelector=(e,r)=>{const n=(0,t.userABTestSelector)(e,r);return n?n.variant:void 0}},18862:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.saveAccountContactInfo=t.SAVE_ACCOUNT_CONTACT_INFO=void 0,t.SAVE_ACCOUNT_CONTACT_INFO="SAVE_ACCOUNT_CONTACT_INFO",t.saveAccountContactInfo=e=>({type:t.SAVE_ACCOUNT_CONTACT_INFO,accountContactInfo:e})},39727:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(18862);t.default=(e={},t)=>t.type===n.SAVE_ACCOUNT_CONTACT_INFO?{...e,...t.accountContactInfo}:e},43461:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.accountCreationStarted=t.saveAccountKeys=t.saveAccountSettings=t.ACCOUNT_CREATION_STARTED=t.SAVE_ACCOUNT_KEYS=t.SAVE_ACCOUNT_SETTINGS=void 0,t.SAVE_ACCOUNT_SETTINGS="SAVE_ACCOUNT_SETTINGS",t.SAVE_ACCOUNT_KEYS="SAVE_ACCOUNT_KEYS",t.ACCOUNT_CREATION_STARTED="ACCOUNT_CREATION_STARTED",t.saveAccountSettings=function(e){return{type:t.SAVE_ACCOUNT_SETTINGS,settings:e}},t.saveAccountKeys=function(e){return{type:t.SAVE_ACCOUNT_KEYS,accountKey:e}},t.accountCreationStarted=function(e){return{type:t.ACCOUNT_CREATION_STARTED,isSSO:e.isSSO}}},12659:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getEmptyAccountCreation=void 0;const n=r(43461),o=r(95648);function i(){return{settings:{personalSettings:(0,o.getEmptyPersonalSettings)(),promise:null},accountKey:{promise:null},isSSO:!1}}t.default=(e=i(),t)=>{switch(t.type){case n.SAVE_ACCOUNT_SETTINGS:return{...e,settings:{...t.settings,personalSettings:(0,o.getUpdatedPersonalSettings)(e.settings.personalSettings,t.settings.personalSettings)}};case n.SAVE_ACCOUNT_KEYS:return{...e,accountKey:t.accountKey};case n.ACCOUNT_CREATION_STARTED:return{...i(),isSSO:t.isSSO};default:return e}},t.getEmptyAccountCreation=i},12706:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isSSOAccountCreationSelector=void 0,t.isSSOAccountCreationSelector=e=>e.userSession.accountCreation.isSSO},59489:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.storeAccountAuthenticationType=t.setPasswordLeaked=t.saveSubscriptionCode=t.localDataLoaded=t.userAuthenticationFailed=t.confirmUserAuthentication=t.enableOtp=t.SET_ACCOUNT_TYPE=t.USER_AUTHENTICATION_FAILED=t.SET_PASSWORD_LEAKED=t.SAVE_SUBSCRIPTION_CODE=t.LOCAL_DATA_LOADED=t.CONFIRM_USER_AUTHENTICATION=t.ENABLE_OTP=void 0;const n=r(25576);t.ENABLE_OTP="ENABLE_OTP",t.CONFIRM_USER_AUTHENTICATION="CONFIRM_USER_AUTHENTICATION",t.LOCAL_DATA_LOADED="LOCAL_DATA_LOADED",t.SAVE_SUBSCRIPTION_CODE="SAVE_SUBSCRIPTION_CODE",t.SET_PASSWORD_LEAKED="SET_PASSWORD_LEAKED",t.USER_AUTHENTICATION_FAILED="USER_AUTHENTICATION_FAILED",t.SET_ACCOUNT_TYPE="SET_ACCOUNT_TYPE",t.enableOtp=e=>({type:t.ENABLE_OTP,otpType:e}),t.confirmUserAuthentication=()=>({type:t.CONFIRM_USER_AUTHENTICATION,sessionStartTime:Date.now()}),t.userAuthenticationFailed=()=>({type:t.USER_AUTHENTICATION_FAILED}),t.localDataLoaded=()=>({type:t.LOCAL_DATA_LOADED,persistData:n.PersistData.PERSIST_DATA_YES}),t.saveSubscriptionCode=e=>({type:t.SAVE_SUBSCRIPTION_CODE,code:e}),t.setPasswordLeaked=e=>({type:t.SET_PASSWORD_LEAKED,isPasswordLeaked:e}),t.storeAccountAuthenticationType=e=>({type:t.SET_ACCOUNT_TYPE,accountAuthenticationType:e})},86797:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getEmptyAccount=t.OtpType=void 0;const n=r(48313),o=r(43739),i=r(59489);var a;function s(){return{login:null,isAuthenticated:!1,sessionStartTime:null,persistData:null,otpType:a.NO_OTP,subscriptionCode:null,isPasswordLeaked:!1,accountAuthenticationType:"masterPassword"}}!function(e){e[e.NO_OTP=0]="NO_OTP",e[e.OTP_NEW_DEVICE=1]="OTP_NEW_DEVICE",e[e.OTP_LOGIN=2]="OTP_LOGIN"}(a=t.OtpType||(t.OtpType={})),t.getEmptyAccount=s,t.default=(e=s(),t)=>{switch(t.type){case n.OPEN_SESSION:return{...e,login:t.login};case o.DEVICE_REGISTERED:case i.LOCAL_DATA_LOADED:return{...e,persistData:t.persistData};case i.CONFIRM_USER_AUTHENTICATION:return{...e,isAuthenticated:!0,sessionStartTime:t.sessionStartTime};case i.USER_AUTHENTICATION_FAILED:return{...e,isAuthenticated:!1,sessionStartTime:null};case i.ENABLE_OTP:return{...e,otpType:t.otpType};case i.SAVE_SUBSCRIPTION_CODE:return{...e,subscriptionCode:t.code};case i.SET_PASSWORD_LEAKED:return{...e,isPasswordLeaked:t.isPasswordLeaked};case i.SET_ACCOUNT_TYPE:return{...e,accountAuthenticationType:t.accountAuthenticationType};default:return e}}},25421:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.accountAuthenticationTypeSelector=void 0,t.accountAuthenticationTypeSelector=e=>e.userSession.account.accountAuthenticationType},48313:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.applyTransaction=t.premiumStatusUpdated=t.localSettingsUpdated=t.closeSession=t.openSession=t.saveGeneratedPassword=t.savePersonalDataItems=t.savePersonalDataItem=t.SAVE_PERSONAL_ITEMS=t.SAVE_PERSONAL_ITEM=t.SAVE_GENERATED_PASSWORD=t.PREMIUM_STATUS_UPDATED=t.LOCAL_SETTINGS_UPDATED=t.REMOVE_PERSONAL_ITEM_FROM_TRANSACTION=t.ADD_PERSONAL_ITEM_FROM_TRANSACTION=t.CLOSE_SESSION=t.OPEN_SESSION=void 0;const n=r(84977),o=r(27517);t.OPEN_SESSION="OPEN_SESSION",t.CLOSE_SESSION="CLOSE_SESSION",t.ADD_PERSONAL_ITEM_FROM_TRANSACTION="ADD_PERSONAL_ITEM_FROM_TRANSACTION",t.REMOVE_PERSONAL_ITEM_FROM_TRANSACTION="REMOVE_PERSONAL_ITEM_FROM_TRANSACTION",t.LOCAL_SETTINGS_UPDATED="LOAD_STORED_LOCAL_SETTINGS",t.PREMIUM_STATUS_UPDATED="PREMIUM_STATUS_UPDATED",t.SAVE_GENERATED_PASSWORD="SAVE_GENERATED_PASSWORD",t.SAVE_PERSONAL_ITEM="SAVE_PERSONAL_ITEM",t.SAVE_PERSONAL_ITEMS="SAVE_PERSONAL_ITEMS",t.savePersonalDataItem=function(e,r,o){return{type:t.SAVE_PERSONAL_ITEM,dataType:n.default[r],dataModelObject:e,changeHistory:o}},t.savePersonalDataItems=function(e,r,o){return{type:t.SAVE_PERSONAL_ITEMS,dataType:n.default[r],dataModelObjects:e,changeHistory:o}},t.saveGeneratedPassword=function(e){return{type:t.SAVE_GENERATED_PASSWORD,generatedPassword:e}},t.openSession=e=>({type:t.OPEN_SESSION,login:e}),t.closeSession=()=>({type:t.CLOSE_SESSION}),t.localSettingsUpdated=e=>({type:t.LOCAL_SETTINGS_UPDATED,data:Object.assign({},e)}),t.premiumStatusUpdated=e=>({type:t.PREMIUM_STATUS_UPDATED,premiumStatus:e}),t.applyTransaction=async e=>{let r;return r="SETTINGS"===e.type?o.PersonalSettingsActionType.EditFromTransaction:"BACKUP_REMOVE"===e.action?t.REMOVE_PERSONAL_ITEM_FROM_TRANSACTION:t.ADD_PERSONAL_ITEM_FROM_TRANSACTION,"BACKUP_EDIT"===e.action&&e.content&&(e.content.LastBackupTime=Math.floor(e.backupDate/1e3)),{type:r,itemId:e.identifier,content:e.content}}},42282:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.resetAuthTicketInfo=t.updateAuthTicketInfo=void 0;const n=r(4190);t.updateAuthTicketInfo=e=>({type:n.ADD_AUTH_TICKET_DATA,data:e}),t.resetAuthTicketInfo=()=>({type:n.RESET_AUTH_TICKET_DATA})},78663:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getEmptyAuthTicketInfo=void 0;const n=r(4190);t.getEmptyAuthTicketInfo=()=>({login:null,date:0,authTicket:null}),t.default=(e=(0,t.getEmptyAuthTicketInfo)(),r)=>{switch(r.type){case n.ADD_AUTH_TICKET_DATA:return{...e,...r.data};case n.RESET_AUTH_TICKET_DATA:return{...e,...(0,t.getEmptyAuthTicketInfo)()};default:return e}}},4190:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RESET_AUTH_TICKET_DATA=t.ADD_AUTH_TICKET_DATA=void 0,t.ADD_AUTH_TICKET_DATA="ADD_AUTH_TICKET_DATA",t.RESET_AUTH_TICKET_DATA="RESET_AUTH_TICKET_DATA"},28417:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.blacklistedUserSessionKeys=void 0,t.blacklistedUserSessionKeys=["iconsCache","personalData","teamAdminData","sharingSync","sharingData"]},16194:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.changeMPDone=t.changeMPStart=t.SET_CHANGE_MP_DONE=t.SET_CHANGE_MP_START=void 0,t.SET_CHANGE_MP_START="SET_CHANGE_MP_START",t.SET_CHANGE_MP_DONE="SET_CHANGE_MP_DONE",t.changeMPStart=()=>({type:t.SET_CHANGE_MP_START}),t.changeMPDone=()=>({type:t.SET_CHANGE_MP_DONE})},66403:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getEmptyChangeMPData=void 0;const n=r(16194);t.getEmptyChangeMPData=function(){return{changeMPinProgress:!1}},t.default=(e={changeMPinProgress:!1},t)=>{switch(t.type){case n.SET_CHANGE_MP_START:return{...e,changeMPinProgress:!0};case n.SET_CHANGE_MP_DONE:return{...e,changeMPinProgress:!1};default:return e}}},66417:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.credentialOTPUpdatedAction=t.CREDENTIAL_OTP_UPDATED=void 0,t.CREDENTIAL_OTP_UPDATED="CREDENTIAL_OTP_UPDATED",t.credentialOTPUpdatedAction=(e,r)=>({type:t.CREDENTIAL_OTP_UPDATED,credentialId:e,otp:r})},11406:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.credentialOTPUpdatedAction=t.credentialOTPs=void 0;var n=r(27547);Object.defineProperty(t,"credentialOTPs",{enumerable:!0,get:function(){return n.credentialOTPs}});var o=r(66417);Object.defineProperty(t,"credentialOTPUpdatedAction",{enumerable:!0,get:function(){return o.credentialOTPUpdatedAction}})},27547:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.credentialOTPs=void 0,t.credentialOTPs=function(e={},t){return"CREDENTIAL_OTP_UPDATED"===t.type?{...e,[t.credentialId]:t.otp}:e}},67331:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.credentialsDedupViewUpdated=void 0;const n=r(28142);t.credentialsDedupViewUpdated=e=>({type:n.CREDENTIAL_DEDUP_VIEW_UPDATED,credentialsDedupView:e})},81200:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.credentialsDedupViewReducer=t.getDefaultCredentialsDedupView=void 0;const n=r(28142);t.getDefaultCredentialsDedupView=function(){return{credentialsDedupView:!1}},t.credentialsDedupViewReducer=function(e={credentialsDedupView:!1},t){return t.type===n.CREDENTIAL_DEDUP_VIEW_UPDATED?{...e,...t.credentialsDedupView}:e}},28142:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CREDENTIAL_DEDUP_VIEW_UPDATED=void 0,t.CREDENTIAL_DEDUP_VIEW_UPDATED="CREDENTIAL_DEDUP_VIEW_UPDATED"},19478:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.teamDirectorySyncNotInProgress=t.teamDirectorySyncInProgress=t.TEAM_DIRECTORY_SYNC_NOT_IN_PROGRESS=t.TEAM_DIRECTORY_SYNC_IN_PROGRESS=void 0,t.TEAM_DIRECTORY_SYNC_IN_PROGRESS="TEAM_DIRECTORY_SYNC_IN_PROGRESS",t.TEAM_DIRECTORY_SYNC_NOT_IN_PROGRESS="TEAM_DIRECTORY_SYNC_NOT_IN_PROGRESS",t.teamDirectorySyncInProgress=e=>({type:t.TEAM_DIRECTORY_SYNC_IN_PROGRESS,teamId:e}),t.teamDirectorySyncNotInProgress=e=>({type:t.TEAM_DIRECTORY_SYNC_NOT_IN_PROGRESS,teamId:e})},48005:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isTeamDirectorySyncInProgress=t.getEmptyState=void 0;const n=r(19478);t.getEmptyState=function(){return{syncsInProgress:{}}},t.isTeamDirectorySyncInProgress=function(e,t){return e.syncsInProgress[t]},t.default=(e={syncsInProgress:{}},t)=>{switch(t.type){case n.TEAM_DIRECTORY_SYNC_IN_PROGRESS:const{teamId:r}=t;return{...e,syncsInProgress:{...e.syncsInProgress,[r]:!0}};case n.TEAM_DIRECTORY_SYNC_NOT_IN_PROGRESS:const{teamId:o}=t;return{...e,syncsInProgress:{...e.syncsInProgress,[o]:!1}};default:return e}}},85845:(e,t)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.deleteFileMetaAction=t.updateFileContentAction=t.updateFileMetaAction=t.FileActionsType=void 0,function(e){e.UpdateFileMeta="UPDATE_FILE_META",e.UpdateFileContent="UPDATE_FILE_CONTENT",e.DeleteFileMeta="DELETE_FILE_META"}(r=t.FileActionsType||(t.FileActionsType={})),t.updateFileMetaAction=e=>({type:r.UpdateFileMeta,filesMeta:e}),t.updateFileContentAction=e=>({type:r.UpdateFileContent,filesContent:e}),t.deleteFileMetaAction=e=>({type:r.DeleteFileMeta,fileNames:e})},75417:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.remoteFileReducer=t.defaultRemoteFileState=void 0;const n=r(85845);function o(e,t){const r={...e};for(const e of t)e in r&&delete r[e];return r}t.defaultRemoteFileState=()=>({fileMetaData:{},fileContentState:{}}),t.remoteFileReducer=(e=(0,t.defaultRemoteFileState)(),r)=>{switch(r?.type){case n.FileActionsType.UpdateFileMeta:return((e,t)=>({...e,fileMetaData:{...e.fileMetaData,...t.filesMeta}}))(e,r);case n.FileActionsType.UpdateFileContent:return((e,t)=>({...e,fileContentState:{...e.fileContentState,...t.filesContent}}))(e,r);case n.FileActionsType.DeleteFileMeta:return((e,t)=>({...e,fileMetaData:o(e.fileMetaData,t.fileNames)}))(e,r)}return e}},6093:(e,t)=>{"use strict";function r(e){return"boolean"==typeof e?e:"string"==typeof e?"true"===e.toLowerCase()||"yes"===e.toLowerCase():Boolean(e)}function n(e,t){return"boolean"===t?e?"true":"false":"yes-no"===t?e?"YES":"NO":null}function o(e){return"object"==typeof e?e:JSON.parse(e)}function i(e){return JSON.stringify(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.fixProperties=t.fixPropertiesTypes=t.ObjectToJson=t.jsonToObject=t.booleanToString=t.stringToBoolean=void 0,t.stringToBoolean=r,t.booleanToString=n,t.jsonToObject=o,t.ObjectToJson=i,t.fixPropertiesTypes=function(e,t,n,i,a){const s={};return e.filter((e=>!!a[e])).forEach((e=>{s[e]=r(a[e])})),t.filter((e=>!!a[e])).forEach((e=>{s[e]=Number(a[e])})),n.filter((e=>!!a[e])).forEach((e=>{s[e]=o(a[e])})),i.filter((e=>a.hasOwnProperty(e))).forEach((e=>{const t=a[e];s[e]=null===t?"":String(t)})),Object.assign({},a,s)},t.fixProperties={fromStore:function(e,t,r,o){const a={};return Object.keys(e).filter((e=>!!o[e])).forEach((t=>{a[t]=n(o[t],e[t])})),Object.keys(t).filter((e=>!!o[e])).forEach((e=>{a[e]=o[e]&&o[e].toString()})),Object.keys(r).filter((e=>!!o[e])).forEach((e=>{a[e]=i(o[e])})),Object.assign({},o,a)},fromTransaction:function(e,t,n,i){const a={};return Object.keys(e).filter((e=>!!i[e])).forEach((e=>{a[e]=r(i[e])})),Object.keys(t).filter((e=>!!i[e])).forEach((e=>{a[e]=Number(i[e])})),Object.keys(n).filter((e=>!!i[e])).forEach((e=>{a[e]=o(i[e])})),Object.assign({},i,a)}}},76089:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.credentialSearchOrderUpdated=t.premiumChurningDismissDateUpdated=t.webOnboardingModeUpdated=t.webOnboardingModeReset=t.localSettingsSubscriptionInformationStatusUpdated=t.localSettingsNodePremiumStatusUpdated=t.localSettingsPremiumStatusUpdated=t.registerDeviceName=t.registerLastSync=t.loadStoredLocalSettings=t.CREDENTIAL_SEARCH_ORDER_UPDATED=t.PREMIUM_CHURNING_DISMISS_DATE_UPDATED=t.WEB_ONBOARDING_MODE_RESET=t.WEB_ONBOARDING_MODE_UPDATED=t.SUBSCRIPTION_INFORMATION_UPDATED=t.NODE_PREMIUM_STATUS_UPDATED=t.PREMIUM_STATUS_UPDATED=t.REGISTER_DEVICE_NAME=t.REGISTER_LAST_SYNC=t.LOAD_STORED_LOCAL_SETTINGS=void 0,t.LOAD_STORED_LOCAL_SETTINGS="LOCAL_SETTINGS/LOAD_STORED_LOCAL_SETTINGS",t.REGISTER_LAST_SYNC="LOCAL_SETTINGS/REGISTER_LAST_SYNC",t.REGISTER_DEVICE_NAME="LOCAL_SETTINGS/REGISTER_DEVICE_NAME",t.PREMIUM_STATUS_UPDATED="LOCAL_SETTINGS/PREMIUM_STATUS_UPDATED",t.NODE_PREMIUM_STATUS_UPDATED="LOCAL_SETTINGS/NODE_PREMIUM_STATUS_UPDATED",t.SUBSCRIPTION_INFORMATION_UPDATED="LOCAL_SETTINGS/SUBSCRIPTION_INFORMATION_UPDATED",t.WEB_ONBOARDING_MODE_UPDATED="LOCAL_SETTINGS/WEB_ONBOARDING_MODE_UPDATED",t.WEB_ONBOARDING_MODE_RESET="LOCAL_SETTINGS/WEB_ONBOARDING_MODE_RESET",t.PREMIUM_CHURNING_DISMISS_DATE_UPDATED="PREMIUM_CHURNING_DISMISS_DATE_UPDATED",t.CREDENTIAL_SEARCH_ORDER_UPDATED="CREDENTIAL_SEARCH_ORDER_UPDATED",t.loadStoredLocalSettings=e=>({type:t.LOAD_STORED_LOCAL_SETTINGS,data:Object.assign({},e)}),t.registerLastSync=e=>({type:t.REGISTER_LAST_SYNC,lastSync:e}),t.registerDeviceName=e=>({type:t.REGISTER_DEVICE_NAME,deviceName:e}),t.localSettingsPremiumStatusUpdated=e=>({type:t.PREMIUM_STATUS_UPDATED,premiumStatus:e}),t.localSettingsNodePremiumStatusUpdated=e=>({type:t.NODE_PREMIUM_STATUS_UPDATED,nodePremiumStatus:e}),t.localSettingsSubscriptionInformationStatusUpdated=e=>({type:t.SUBSCRIPTION_INFORMATION_UPDATED,subscriptionInformation:e}),t.webOnboardingModeReset=()=>({type:t.WEB_ONBOARDING_MODE_RESET}),t.webOnboardingModeUpdated=e=>({type:t.WEB_ONBOARDING_MODE_UPDATED,webOnboardingMode:e}),t.premiumChurningDismissDateUpdated=e=>({type:t.PREMIUM_CHURNING_DISMISS_DATE_UPDATED,premiumChurningDismissDate:e}),t.credentialSearchOrderUpdated=e=>({type:t.CREDENTIAL_SEARCH_ORDER_UPDATED,credentialSearchOrder:e})},73472:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getEmptyLocalSettings=t.getEmptyOnboardingMode=t.getEmptyLoginStepInfo=void 0;const n=r(16516),o=r(33831),i=r(35924),a=r(76089),s=r(50571),c=r(43739);t.getEmptyLoginStepInfo=function(){return{step:null,login:"",validated:!1}};const u=(e,t)=>[o.LoginStep.Password,o.LoginStep.OTPToken].includes(t)?t:e.step,d=(e,t)=>t===o.LoginStep.OTPToken?Boolean(e.login):![o.LoginStep.OTP1,o.LoginStep.OTP2].includes(t)&&e.validated,l=(e,t)=>Object.entries(t).every((([t,r])=>e?.[t]===r));function p(){return{uki:null,lastSync:0,premiumStatus:null,nodePremiumStatus:null,subscriptionInformation:null,deviceName:null,webOnboardingMode:(0,t.getEmptyOnboardingMode)(),premiumChurningDismissDate:null,credentialSearchOrder:null,userMessages:[],loginStepInfo:{step:null,login:"",validated:!1}}}t.default=(e=p(),r)=>{switch(r.type){case a.LOAD_STORED_LOCAL_SETTINGS:{const t=p();return{...t,...e,...r.data,webOnboardingMode:{...t.webOnboardingMode,...e.webOnboardingMode,...r.data.webOnboardingMode,completedSteps:{...t.webOnboardingMode.completedSteps,...e.webOnboardingMode.completedSteps,...r.data.webOnboardingMode.completedSteps}}}}case c.DEVICE_REGISTERED:return"uki"===r.registrationType.type?{...e,uki:r.registrationType.uki}:e;case a.REGISTER_LAST_SYNC:return Object.assign({},e,{lastSync:r.lastSync});case a.REGISTER_DEVICE_NAME:return Object.assign({},e,{deviceName:r.deviceName});case a.PREMIUM_STATUS_UPDATED:return Object.assign({},e,{premiumStatus:r.premiumStatus});case a.NODE_PREMIUM_STATUS_UPDATED:return Object.assign({},e,{nodePremiumStatus:r.nodePremiumStatus});case a.SUBSCRIPTION_INFORMATION_UPDATED:return Object.assign({},e,{subscriptionInformation:r.subscriptionInformation});case a.WEB_ONBOARDING_MODE_UPDATED:{const t=(0,n.mergeDeepRight)(p(),e);return(0,n.mergeDeepRight)(t,{webOnboardingMode:r.webOnboardingMode})}case a.WEB_ONBOARDING_MODE_RESET:return Object.assign({},e,{webOnboardingMode:(0,t.getEmptyOnboardingMode)()});case a.PREMIUM_CHURNING_DISMISS_DATE_UPDATED:return Object.assign({},e,{premiumChurningDismissDate:r.premiumChurningDismissDate});case a.CREDENTIAL_SEARCH_ORDER_UPDATED:return Object.assign({},e,{credentialSearchOrder:r.credentialSearchOrder});case s.USER_MESSAGE_ADDED:return Object.assign({},e,{userMessages:[...e.userMessages,r.userMessage]});case s.USER_MESSAGES_DISMISSED:return Object.assign({},e,{userMessages:e.userMessages.some((e=>l(e,r.predicate)))?e.userMessages.map((e=>l(e,r.predicate)?{...e,dismissedAt:Date.now()}:e)):[...e.userMessages,{...r.predicate,dismissedAt:Date.now()}]});case i.UPDATE_LOGIN_STEP_INFO_LOGIN:return Object.assign({},e,{loginStepInfo:{...e.loginStepInfo,login:r.login}});case i.UPDATE_LOGIN_STEP_INFO_STEP:return Object.assign({},e,{loginStepInfo:{...e.loginStepInfo,step:u(e.loginStepInfo,r.step),validated:d(e.loginStepInfo,r.step)}});case i.RESET_LOGIN_STEP_INFO:return Object.assign({},e,{loginStepInfo:{step:null,login:"",validated:!1}});default:return e}},t.getEmptyOnboardingMode=()=>({flowCredentialInApp:!1,flowLoginCredentialOnWeb:!1,flowLoginCredentialOnWebSite:null,flowSaveCredentialOnWeb:!1,flowImportPasswords:!1,flowAddMobileOnWeb:!1,flowTryAutofillOnWeb:!1,leelooStep:null,popoverStep:null,completedSteps:{saveCredentialInApp:!1,loginCredentialOnWeb:!1,saveCredentialOnWeb:!1,importPasswordsShown:!1,onboardingHubShown:!1,addMobileOnWeb:!1,tryAutofillOnWeb:!1}}),t.getEmptyLocalSettings=p},73299:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.deviceNameSelector=void 0,t.deviceNameSelector=e=>e.userSession.localSettings.deviceName},34287:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.loadNotificationsStatus=t.markAsInteracted=t.markAsUnseen=t.markAsSeen=t.LOAD_NOTIFICATIONS_STATE=t.MARK_AS_INTERACTED=t.MARK_AS_UNSEEN=t.MARK_AS_SEEN=void 0,t.MARK_AS_SEEN="MarkAsSeen",t.MARK_AS_UNSEEN="MarkAsUnseen",t.MARK_AS_INTERACTED="MarkAsInteracted",t.LOAD_NOTIFICATIONS_STATE="LoadNotificationsState",t.markAsSeen=e=>({type:t.MARK_AS_SEEN,notification:e}),t.markAsUnseen=e=>({type:t.MARK_AS_UNSEEN,notification:e}),t.markAsInteracted=e=>({type:t.MARK_AS_INTERACTED,notification:e}),t.loadNotificationsStatus=e=>({type:t.LOAD_NOTIFICATIONS_STATE,state:e})},98496:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getEmptyNotificationsState=void 0;const n=r(34287),o=r(82028),i={paymentFailureChurned:o.NotificationStatus.Unseen,paymentFailureChurning:o.NotificationStatus.Unseen,switchToMlAnalysisEngine:o.NotificationStatus.Unseen,dWMb2bAutoEnrollTooltip:o.NotificationStatus.Unseen,vpnProviderIsNowHotspot:o.NotificationStatus.Unseen,vpnHostpotshieldInstalled:o.NotificationStatus.Unseen,popupIncomingTabPayments:o.NotificationStatus.Unseen,popupIncomingTabPersonalInfo:o.NotificationStatus.Unseen,popupIncomingTabIDs:o.NotificationStatus.Unseen,popupIncomingTabSecureNotes:o.NotificationStatus.Unseen,newAccountMenuTooltip:o.NotificationStatus.Unseen,tacGetTheExtensionBanner:o.NotificationStatus.Unseen,tacEnableAccountRecoveryBanner:o.NotificationStatus.Unseen,tacOnlyOneAdminBanner:o.NotificationStatus.Unseen,tacDarkWebInsightsNewBadge:o.NotificationStatus.Unseen,passwordHistoryBanner:o.NotificationStatus.Unseen,sharingCenterDisabledBanner:o.NotificationStatus.Unseen,accountRecoveryAvailableAdminTooltip:o.NotificationStatus.Unseen,accountRecoveryAvailableEmployeeDialog:o.NotificationStatus.Unseen,activateInviteLink:o.NotificationStatus.Unseen,tacGetStartedOpenVault:o.NotificationStatus.Unseen,tacGetStartedDismissedPage:o.NotificationStatus.Unseen,tacGetStartedSeenPage:o.NotificationStatus.Unseen};function a(){return i}t.getEmptyNotificationsState=a,t.default=(e=a(),t)=>{switch(t.type){case n.MARK_AS_INTERACTED:return{...e,[t.notification]:o.NotificationStatus.Interacted};case n.MARK_AS_SEEN:return{...e,[t.notification]:o.NotificationStatus.Seen};case n.MARK_AS_UNSEEN:return{...e,[t.notification]:o.NotificationStatus.Unseen};case n.LOAD_NOTIFICATIONS_STATE:return{...e,...t.state};default:return e}}},26972:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.notificationsStatus$=void 0;const n=r(18948),o=r(3343),i=r(56857);t.notificationsStatus$=function(){const e=i.notificationsStatusSelector;return(0,n.pipe)((0,o.map)(e),(0,o.distinctUntilChanged)())}},56857:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.notificationsStatusSelector=void 0,t.notificationsStatusSelector=e=>e.userSession.notificationsStatus},95944:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.receivedInvoiceList=t.RECEIVED_INVOICE_LIST=void 0,t.RECEIVED_INVOICE_LIST="RECEIVED_USER_LIST",t.receivedInvoiceList=e=>({type:t.RECEIVED_INVOICE_LIST,invoicesList:e})},70325:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getEmptyPaymentsState=void 0;const n=r(95944);t.getEmptyPaymentsState=function(){return{invoicesList:[]}},t.default=(e={invoicesList:[]},t)=>t.type===n.RECEIVED_INVOICE_LIST?{...e,invoicesList:t.invoicesList}:e},30467:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.viewedQueriedInvoicesSelector=t.searchGetters=t.invoiceMappersSelector=t.invoiceListYearsSelector=t.allInvoicesLengthSelector=t.allInvoicesSelector=void 0;const n=r(77672),o=r(24589),i=r(64455),a=r(82234),s=r(98584);t.allInvoicesSelector=e=>e.userSession.paymentsState.invoicesList,t.allInvoicesLengthSelector=e=>e.userSession.paymentsState.invoicesList.length,t.invoiceListYearsSelector=e=>{const t=e.userSession.paymentsState.invoicesList;if(t.length){const e=t.map((e=>(0,n.fromUnixTime)(e.startDate).getFullYear().toString()));return[...new Set(e)]}return[]},t.invoiceMappersSelector=e=>(0,s.getInvoiceMappers)(),t.searchGetters=[(0,a.stringProp)("amountPaid"),(0,a.stringProp)("planName"),(0,a.stringProp)("startDate"),(0,a.stringProp)("invoiceId"),(0,a.stringProp)("startYear")];const c=(0,i.match)(t.searchGetters),u=(0,o.getQuerySelector)(t.allInvoicesSelector,(()=>c),t.invoiceMappersSelector);t.viewedQueriedInvoicesSelector=(e,t)=>u(e,t)},45291:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.updateBreachesUpdaterStatus=t.teamSpaceContentControlApplied=t.storeChangesToUpload=t.breachesUpdated=t.updateLastBackupTime=t.removePersonalItem=t.saveNoteCategory=t.saveGeneratedPassword=t.savePaymentCard=t.unscheduleRemainingChanges=t.clearUploadedChanges=t.scheduleChangesForSync=t.loadStoredPersonalData=t.UNSCHEDULE_REMAINING_CHANGES=t.CLEAR_UPLOADED_CHANGES=t.SCHEDULE_CHANGES_FOR_SYNC=t.UPDATE_BREACHES_UPDATER_STATUS=t.TEAMSPACE_CONTENT_CONTROLLED=t.STORE_CHANGES_TO_UPLOAD=t.BREACHES_UPDATED=t.UPDATE_LAST_BACKUP_TIME=t.REMOVE_PERSONAL_ITEM=t.SAVE_PAYMENT_CARD=t.SAVE_NOTE_CATEGORY=t.SAVE_PERSONAL_ITEMS=t.SAVE_PERSONAL_ITEM=t.SAVE_GENERATED_PASSWORD=t.LOAD_STORED_PERSONAL_DATA=void 0,t.LOAD_STORED_PERSONAL_DATA="PERSONAL_DATA/LOAD_STORED_PERSONAL_DATA",t.SAVE_GENERATED_PASSWORD="PERSONAL_DATA/SAVE_GENERATED_PASSWORD",t.SAVE_PERSONAL_ITEM="PERSONAL_DATA/SAVE_PERSONAL_ITEM",t.SAVE_PERSONAL_ITEMS="PERSONAL_DATA/SAVE_PERSONAL_ITEMS",t.SAVE_NOTE_CATEGORY="SAVE_NOTE_CATEGORY",t.SAVE_PAYMENT_CARD="SAVE_PAYMENT_CARD",t.REMOVE_PERSONAL_ITEM="REMOVE_PERSONAL_ITEM",t.UPDATE_LAST_BACKUP_TIME="UPDATE_LAST_BACKUP_TIME",t.BREACHES_UPDATED="BREACHES_UPDATED",t.STORE_CHANGES_TO_UPLOAD="STORE_CHANGES_TO_UPLOAD",t.TEAMSPACE_CONTENT_CONTROLLED="TEAMSPACE_CONTENT_CONTROLLED",t.UPDATE_BREACHES_UPDATER_STATUS="UPDATE_BREACHES_UPDATER_STATUS",t.SCHEDULE_CHANGES_FOR_SYNC="SCHEDULE_CHANGES_FOR_SYNC",t.CLEAR_UPLOADED_CHANGES="CLEAR_UPLOADED_CHANGES",t.UNSCHEDULE_REMAINING_CHANGES="UNSCHEDULE_REMAINING_CHANGES",t.loadStoredPersonalData=e=>({type:t.LOAD_STORED_PERSONAL_DATA,data:Object.assign({},e)}),t.scheduleChangesForSync=()=>({type:t.SCHEDULE_CHANGES_FOR_SYNC}),t.clearUploadedChanges=e=>({type:t.CLEAR_UPLOADED_CHANGES,uploadedItemIds:e}),t.unscheduleRemainingChanges=()=>({type:t.UNSCHEDULE_REMAINING_CHANGES}),t.savePaymentCard=function(e){return{type:t.SAVE_PAYMENT_CARD,paymentCard:e}},t.saveGeneratedPassword=function(e){return{type:t.SAVE_GENERATED_PASSWORD,generatedPassword:e}},t.saveNoteCategory=function(e){return{type:t.SAVE_NOTE_CATEGORY,noteCategory:e}},t.removePersonalItem=function(e,r,n){return{type:t.REMOVE_PERSONAL_ITEM,kwType:e,itemId:r,changeHistory:n}},t.updateLastBackupTime=function(e,r){return{type:t.UPDATE_LAST_BACKUP_TIME,transactions:e,backupTimeSec:r}},t.breachesUpdated=function(e,r,n){return{type:t.BREACHES_UPDATED,changes:e,revision:r,dataLeaksRefreshDate:n}},t.storeChangesToUpload=function(e){return{type:t.STORE_CHANGES_TO_UPLOAD,changesToUpload:e}},t.teamSpaceContentControlApplied=function(e,r,n){return{type:t.TEAMSPACE_CONTENT_CONTROLLED,updates:e,deletions:r,changeHistories:n}},t.updateBreachesUpdaterStatus=e=>({type:t.UPDATE_BREACHES_UPDATER_STATUS,breachesUpdaterStatus:e})},84977:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PERSONAL_DATA_COLLECTIONS_KEYS=t.DATAMODELOBJECT_TYPE_TO_STORE_KEY=void 0,t.DATAMODELOBJECT_TYPE_TO_STORE_KEY={KWAddress:"addresses",KWAuthCategory:"credentialCategories",KWAuthentifiant:"credentials",KWBankStatement:"bankAccounts",KWCollection:"collections",KWCompany:"companies",KWDataChangeHistory:"changeHistories",KWDriverLicence:"driverLicenses",KWEmail:"emails",KWFiscalStatement:"fiscalIds",KWGeneratedPassword:"generatedPasswords",KWIDCard:"idCards",KWIdentity:"identities",KWPasskey:"passkeys",KWPassport:"passports",KWPaymentMean_creditCard:"paymentCards",KWPaymentMean_paypal:"paypalAccounts",KWPersonalWebsite:"personalWebsites",KWPhone:"phones",KWSecureNote:"notes",KWSecureNoteCategory:"noteCategories",KWSecurityBreach:"securityBreaches",KWSocialSecurityStatement:"socialSecurityIds",KWSecureFileInfo:"secureFileInfo"},t.default=t.DATAMODELOBJECT_TYPE_TO_STORE_KEY,t.PERSONAL_DATA_COLLECTIONS_KEYS=Object.keys(t.DATAMODELOBJECT_TYPE_TO_STORE_KEY).map((e=>t.DATAMODELOBJECT_TYPE_TO_STORE_KEY[e]))},1347:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.countPersonalDataItems=t.getEmptyBreachesMetadata=t.getLegacyEmptyBreaches=t.saveChangesToUpload=t.breachesUpdated=t.updateCredential=t.updateCredentials=t.updateLastBackupTime=t.saveObjects=t.saveNoteCategory=t.saveGeneratedPassword=t.savePersonalDataItems=t.savePersonalDataItem=t.savePaymentCard=t.removePersonalItem=t.teamSpaceContentControlApplied=t.savePersonalSettings=t.removePersonalItemFromTransaction=t.addPersonalItemFromTransaction=t.getEmptyPersonalDataState=void 0;const n=r(16516),o=r(53576),i=r(84977),a=r(53628),s=r(45291),c=r(48313),u=r(77163),d=r(27517),l=r(95377),p=r(51064),m=r(62210);function g(){return{addresses:[],bankAccounts:[],changesToUpload:[],changeHistories:[],collections:[],companies:[],credentialCategories:[],credentials:[],driverLicenses:[],emails:[],fiscalIds:[],generatedPasswords:[],idCards:[],identities:[],noteCategories:[],notes:[],passkeys:[],passports:[],paymentCards:[],paypalAccounts:[],personalWebsites:[],phones:[],securityBreaches:[],securityBreachesMetadata:(0,t.getEmptyBreachesMetadata)(),socialSecurityIds:[],breachesUpdaterStatus:l.BreachesUpdaterStatus.UNKNOWN,secureFileInfo:[]}}t.default=(e=g(),t,r)=>{switch(t.type){case s.LOAD_STORED_PERSONAL_DATA:return{...e,...(0,a.fixPersistedPersonalData)(t.data)};case c.ADD_PERSONAL_ITEM_FROM_TRANSACTION:return S(e,t);case c.REMOVE_PERSONAL_ITEM_FROM_TRANSACTION:return h(e,t);case s.REMOVE_PERSONAL_ITEM:return T(e,t);case s.SAVE_PAYMENT_CARD:return I(e,t);case s.SAVE_PERSONAL_ITEM:return b(e,t,r);case s.SAVE_PERSONAL_ITEMS:return w(e,t,r);case s.SAVE_GENERATED_PASSWORD:return C(e,t,r);case s.SAVE_NOTE_CATEGORY:return D(e,t);case s.CLEAR_UPLOADED_CHANGES:return v(e,t);case s.SCHEDULE_CHANGES_FOR_SYNC:return y(e,t);case s.UNSCHEDULE_REMAINING_CHANGES:return E(e,t);case d.PersonalSettingsActionType.Edit:return A(e);case s.UPDATE_LAST_BACKUP_TIME:return O(e,t);case s.BREACHES_UPDATED:return N(e,t);case s.STORE_CHANGES_TO_UPLOAD:return R(e,t);case s.TEAMSPACE_CONTENT_CONTROLLED:return _(e,t);case s.UPDATE_BREACHES_UPDATER_STATUS:return{...e,breachesUpdaterStatus:t.breachesUpdaterStatus};default:return e}},t.getEmptyPersonalDataState=g;const f=(e,t)=>!e||!t||!i.default.hasOwnProperty(t.kwType);function S(e,t){if(f(t.itemId,t.content))return e;const r=i.default[t.content.kwType],n=(0,a.fixPersonalDataItemFromExternalSource)(t.content,t.itemId);return{...e,[r]:M(e[r],n)}}function h(e,t){return t.itemId?t.content?F(e,[t.itemId],t.content.kwType):F(e,[t.itemId]):e}t.addPersonalItemFromTransaction=S,t.removePersonalItemFromTransaction=h;const y=(e,t)=>({...e,changesToUpload:e.changesToUpload.map(m.markChangeAsScheduled)}),v=(e,t)=>({...e,changesToUpload:(0,m.filterOutUploadedChanges)(e.changesToUpload,t.uploadedItemIds)}),E=(e,t)=>({...e,changesToUpload:e.changesToUpload.map(m.markChangeAsReadyForNextSync)});function A(e){if(e.changesToUpload.find((e=>"KWSettingsManagerApp"===e.kwType)))return e;const t=(0,p.createUploadChange)({itemId:"SETTINGS_userId",kwType:"KWSettingsManagerApp",action:"EDIT"});return{...e,changesToUpload:[...e.changesToUpload,t]}}function _(e,t){const{updates:r,deletions:n,changeHistories:o}=t,a=r.reduce(((e,t)=>{const{kwType:r}=t,n=i.default[r];return n?{...e,[n]:M(e[n]||[],t)}:e}),e),s=r.map(p.createUploadChangeForItem),c=Object.keys(n).reduce(((e,t)=>F(e,n[t],t)),a),u=Object.keys(n).reduce(((e,t)=>e.concat(n[t].map((0,p.createUploadChangeForDeletion)(t)))),[]),d=L(e.changeHistories,o),l=[...s,...u,...o.map(p.createUploadChangeForItem)];return{...c,changesToUpload:U(e.changesToUpload,l),changeHistories:d}}function T(e,t){const{changeHistory:r,kwType:n,itemId:o}=t,i=F(e,[o],n),a=[(0,p.createUploadChangeForDeletion)(n)(o),...r?[(0,p.createUploadChangeForItem)(r)]:[]],s=r?{changeHistories:M(e.changeHistories,r)}:{};return{...i,changesToUpload:U(i.changesToUpload,a),...s}}function I(e,{paymentCard:t}){return{...e,changesToUpload:U(e.changesToUpload,(0,p.createUploadChangeForItem)(t)),paymentCards:M(e.paymentCards,t)}}function b(e,{dataType:t,dataModelObject:r,changeHistory:n},o){const i=(0,u.associateTeamSpaceId)(r,o.spaces,e.credentials),a=n?{changeHistories:M(e.changeHistories,n)}:{},s=n?[(0,p.createUploadChangeForItem)(n)]:[],c=[(0,p.createUploadChangeForItem)(r),...s];return{...e,changesToUpload:U(e.changesToUpload,c),[t]:M(e[t],i),...a}}function w(e,{dataType:t,dataModelObjects:r,changeHistory:n},o){const i=r.map((t=>(0,u.associateTeamSpaceId)(t,o.spaces,e.credentials))),a=[...r.map(p.createUploadChangeForItem),...n.map(p.createUploadChangeForItem)];return{...e,changesToUpload:U(e.changesToUpload,a),[t]:L(e[t],i),changeHistories:L(e.changeHistories,n)}}function C(e,{generatedPassword:t},r){const n=(0,u.associateTeamSpaceId)(t,r.spaces,e.credentials);return{...e,changesToUpload:U(e.changesToUpload,(0,p.createUploadChangeForItem)(t)),generatedPasswords:M(e.generatedPasswords,n)}}function D(e,{noteCategory:t}){return{...e,changesToUpload:U(e.changesToUpload,(0,p.createUploadChangeForItem)(t)),noteCategories:M(e.noteCategories,t)}}function O(e,{transactions:t,backupTimeSec:r}){return Object.keys(e).reduce(((n,o)=>(Array.isArray(e[o])&&(n[o]=function(e,t,r){const n=e.filter((e=>t.includes(e.Id))).map((e=>Object.assign(e,{LastBackupTime:r})));return e.filter((e=>!t.includes(e.Id))).concat(n)}(e[o],t,r)),n)),e)}function P(e,t){const{credentials:r}=e,n=M(r,t);return{...e,credentials:n}}function N(e,t){const{changes:{updates:r,deletions:n}}=t,i=o.DataModelType.KWSecurityBreach,a=F(e,n,i),s=r.map(p.createUploadChangeForItem),c=n.map((0,p.createUploadChangeForDeletion)(i)),u=U(a.changesToUpload,[...s,...c]),d=L(a.securityBreaches,r),l=void 0!==t.dataLeaksRefreshDate?t.dataLeaksRefreshDate:a.securityBreachesMetadata.latestDataLeaksBreachesUpdate;return{...a,securityBreaches:d,securityBreachesMetadata:{latestPublicBreachesRevision:t.revision,latestDataLeaksBreachesUpdate:l},changesToUpload:u}}function R(e,{changesToUpload:t}){return{...e,changesToUpload:U(e.changesToUpload,t)}}function M(e,t){const r=function(e,t){return e.filter((e=>e.Id!==t))}(e,t.Id);return r.concat(t)}function L(e,t){return[...k(e,t.map((e=>e.Id))),...t]}function U(e,t){const r=(t=Array.isArray(t)?t:[t]).concat(e||[]);return(0,n.uniqBy)((0,n.prop)("itemId"),r)}function k(e,t){return e.filter((e=>!t.includes(e.Id)))}function F(e,t,r){if(r&&i.default[r]){const n=i.default[r];return{...e,[n]:e[n]&&k(e[n],t)}}return i.PERSONAL_DATA_COLLECTIONS_KEYS.reduce(((r,n)=>{if(!(n in e))return r;const o=k(e[n],t);return{...r,[n]:o}}),e)}t.savePersonalSettings=A,t.teamSpaceContentControlApplied=_,t.removePersonalItem=T,t.savePaymentCard=I,t.savePersonalDataItem=b,t.savePersonalDataItems=w,t.saveGeneratedPassword=C,t.saveNoteCategory=D,t.saveObjects=function(e,t){return(0,n.reduce)(((e,t)=>{const r=i.default[t.kwType];return r&&(e[r]=e[r].concat(t)),e}),{...e},t)},t.updateLastBackupTime=O,t.updateCredentials=function(e,t){return t.reduce(((e,t)=>P(e,t)),e)},t.updateCredential=P,t.breachesUpdated=N,t.saveChangesToUpload=R,t.getLegacyEmptyBreaches=()=>({revision:0,breaches:[]}),t.getEmptyBreachesMetadata=()=>({latestPublicBreachesRevision:0,latestDataLeaksBreachesUpdate:0}),t.countPersonalDataItems=e=>Object.keys(i.default).reduce(((t,r)=>t+e[i.default[r]].length),0)},30641:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(16516),o=r(53576),i=r(49901);t.default=function(e){const t=(0,n.isNil)(e.LocaleFormat)?o.Country.UNIVERSAL:e.LocaleFormat,r=(0,n.isNil)(e.SpaceId)?i.PERSONAL_SPACE_ID:e.SpaceId;return{...e,LocaleFormat:t,SpaceId:r}}},63985:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fixPasskeyTypesFromTransaction=t.fixBreachTypesFromStore=t.fixBreachTypesFromTransaction=t.fixCommonPropertiesTypes=t.fixGeneratedPasswordsTypes=t.fixCredentialTypesFromStore=t.fixNoteTypesFromStore=t.fixAttachmentProperties=t.fixNoteTypesFromTransaction=t.fixAllStringObject=t.fixLinkedServicesTypes=t.fixDomainIconTypes=t.fixTrustedUrlTypes=t.fixCredentialTypesFromTransaction=void 0;const n=r(6093),o=["CreationDatetime","LastBackupTime","UserModificationDatetime"],i=["Id","AnonId","SpaceId"];function a(e){return(0,n.fixPropertiesTypes)([],[],[],["TrustedUrl","TrustedUrlExpire"],e)}function s(e){const{urls:t,...r}=(0,n.fixPropertiesTypes)([],[],[],["backgroundColor","mainColor"],e);return{...r,urls:"object"==typeof t&&null!==t?d(t):{}}}function c(e){const t=Array.isArray(e.associated_domains)?e.associated_domains.map(u):[];return{...e,associated_domains:t}}function u(e){return(0,n.fixPropertiesTypes)([],[],[],["domain","source"],e)}function d(e){const t=Object.keys(e);return(0,n.fixPropertiesTypes)([],[],[],t,e)}function l(e){return(0,n.fixPropertiesTypes)([],["version","localSize","remoteSize","creationDatetime","userModificationDatetime"],[],["id","type","filename","downloadKey","cryptoKey","owner"],e)}t.fixCredentialTypesFromTransaction=function(e){const t=["LastUse","ModificationDatetime","NumberUse","Strength"].concat(o),r=["Alias","Category","ConnectionOptions","Email","Login","Note","OtpSecret","OtpUrl","Password","Port","SID","SecondaryLogin","Server","Title","Url","UserSelectedUrl"].concat(i),{TrustedUrlGroup:u,Attachments:d,LinkedServices:p,domainIcon:m,...g}=(0,n.fixPropertiesTypes)(["AutoLogin","AutoProtected","Checked","SharedObject","SubdomainOnly","UseFixedUrl","limitedPermissions"],t,["Attachments","LinkedServices"],r,e),f=Array.isArray(d)?{Attachments:d.map(l)}:{},S="object"==typeof m&&null!==m?{domainIcon:s(m)}:{};return{...g,...f,...p?{LinkedServices:c(p)}:{},...S,TrustedUrlGroup:u&&u.length>0?u.map(a):[]}},t.fixTrustedUrlTypes=a,t.fixDomainIconTypes=s,t.fixLinkedServicesTypes=c,t.fixAllStringObject=d,t.fixNoteTypesFromTransaction=function(e){const t=["CreationDate","UpdateDate"].concat(o),r=["Title","Content","Category"].concat(i),{Attachments:a,Type:s,...c}=(0,n.fixPropertiesTypes)(["Secured"],t,["Attachments"],r,e);return{...c,...Array.isArray(a)?{Attachments:a.map(l)}:{},Type:s||"GRAY"}},t.fixAttachmentProperties=l,t.fixNoteTypesFromStore=function(e){const t={};return["Attachments"].filter((t=>!!e[t])).forEach((r=>{t[r]=JSON.stringify(e[r])})),Object.assign({},e,t)},t.fixCredentialTypesFromStore=function(e){const t={};return["Attachments","LinkedServices"].filter((t=>!!e[t])).forEach((r=>{t[r]=JSON.stringify(e[r])})),Object.assign({},e,t)},t.fixGeneratedPasswordsTypes=function(e){const t=["GeneratedDate"].concat(o);return(0,n.fixPropertiesTypes)([],t,[],[],e)},t.fixCommonPropertiesTypes=function(e){return(0,n.fixPropertiesTypes)([],o,[],[],e)},t.fixBreachTypesFromTransaction=function(e){const t=[...o,"ContentRevision"],r=[...i,"AnonId","BreachId","Status"],a=(0,n.fixPropertiesTypes)([],t,["Content","LeakedPasswords"],r,e);return Array.isArray(a.LeakedPasswords)||(a.LeakedPasswords=[]),a},t.fixBreachTypesFromStore=function(e){const t={};return["Content","LeakedPasswords"].filter((t=>!!e[t])).forEach((r=>{t[r]=JSON.stringify(e[r])})),Array.isArray(e.LeakedPasswords)||(t.LeakedPasswords=JSON.stringify([])),{...e,...t}},t.fixPasskeyTypesFromTransaction=function(e){const t=[...o,"Counter","KeyAlgorithm"],r=[...i,"CredentialId","RpId","RpName","UserDisplayName","UserHandle"];return(0,n.fixPropertiesTypes)([],t,["PrivateKey"],r,e)}},53628:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fixPersistedPersonalData=t.fixPersonalDataItemFromExternalSource=void 0;const n=r(16516),o=r(53576),i=r(63985),a=r(30641),s=r(86715),c=[{key:"credentials",isData:o.isCredential,fixData:e=>(0,i.fixCredentialTypesFromTransaction)(e),addDefaultValues:e=>(0,a.default)(e)},{key:"notes",isData:o.isNote,fixData:e=>(0,i.fixNoteTypesFromTransaction)(e),addDefaultValues:e=>(0,a.default)(e)},{key:"generatedPasswords",isData:o.isGeneratedPassword,fixData:e=>(0,i.fixGeneratedPasswordsTypes)(e),addDefaultValues:e=>e},{key:"securityBreaches",isData:s.isBreach,fixData:e=>(0,i.fixBreachTypesFromTransaction)(e),addDefaultValues:e=>e},{key:"passkeys",isData:o.isPasskey,fixData:e=>(0,i.fixPasskeyTypesFromTransaction)(e),addDefaultValues:e=>e}];t.fixPersonalDataItemFromExternalSource=function(e,t){const r=function(e,t){return t?{...e,Id:t}:e}(e,t),n=c.find((e=>e.isData(r)));return n?d(n,r):(0,i.fixCommonPropertiesTypes)(r)};const u=["breaches","versionedBreaches"];function d(e,t){return e.addDefaultValues(e.fixData(t))}t.fixPersistedPersonalData=function(e){const t={};c.forEach((r=>{const n=e[r.key];if(!n)return;const o=n.map((e=>d(r,e)));t[r.key]=o}));const r=(t.credentials??[]).filter((e=>!!e.Id));return{...(0,n.omit)(u,e),...t,credentials:r}}},27517:(e,t)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.editPersonalSettings=t.loadStoredPersonalSettings=t.PersonalSettingsActionType=t.TOGGLE_DASHLANE_ON_SITE=t.TOGGLE_DASHLANE_ON_PAGE=void 0,t.TOGGLE_DASHLANE_ON_PAGE="TOGGLE_DASHLANE_ON_PAGE",t.TOGGLE_DASHLANE_ON_SITE="TOGGLE_DASHLANE_ON_SITE",function(e){e.Edit="EDIT_PERSONAL_SETTINGS",e.EditFromTransaction="EDIT_PERSONAL_SETTINGS_FROM_TRANSACTION",e.LoadFromStorage="LOAD_PERSONAL_SETTINGS_FROM_STORAGE"}(r=t.PersonalSettingsActionType||(t.PersonalSettingsActionType={})),t.loadStoredPersonalSettings=e=>({type:r.LoadFromStorage,data:Object.assign({},e)}),t.editPersonalSettings=e=>({type:r.Edit,content:Object.assign({},e)})},51104:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fixPersonalSettingTypes=void 0;const n=r(16516),o=r(6093),i={GeneratorDefaultAvoidAmbiguousChars:"boolean",GeneratorDefaultDigits:"boolean",GeneratorDefaultLetters:"boolean",GeneratorDefaultMixedCase:"boolean",GeneratorDefaultPronounceable:"boolean",GeneratorDefaultSymbols:"boolean",RecoveryOptIn:"boolean",ProtectPasswords:"boolean",ProtectPayments:"boolean",ProtectIDs:"boolean",SecuredDataShowScreenshots:"yes-no",SecuredDataShowPassword:"yes-no",SecuredDataShowIDs:"yes-no",SecuredDataShowCreditcard:"yes-no",SecuredDataAutofillCreditcard:"yes-no",SyncBackup:"yes-no",SyncBackupPurchase:"yes-no",SyncBackupPersonaldata:"yes-no",SyncBackupPasswords:"yes-no",SyncBackupCreditCardsNumber:"yes-no",SyncBackupCreditCardsCCV:"yes-no"},a={GeneratorDefaultSize:"number",accountCreationDatetime:"number"},s={SpaceAnonIds:"json",AutofillSettings:"json"},c=(0,n.curry)(o.fixProperties.fromTransaction)(i,a,s),u=(0,n.curry)(o.fixProperties.fromStore)(i,a,s);t.fixPersonalSettingTypes={fromTransaction:c,fromStore:u}},95648:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getWebsiteInfo=t.getUpdatedPersonalSettings=t.getEmptyPersonalSettings=t.makeBasePersonalSettings=void 0;const n=r(16516),o=r(21178),i=r(27517),a=r(51104),s=r(16593);function c(){return{AccountRecoveryKey:null,AccountRecoveryKeyId:null,DisabledDomainsList:[],DisabledUrlsList:[],DisabledDomainsAutologinList:[],DisabledUrlsAutologinList:[],SyncBackupCreditCardsCCV:null,SyncBackupCreditCardsNumber:null,SyncBackupPasswords:null,SyncBackupPersonaldata:null,SyncBackupPurchase:null,SecuredDataAutofillCreditcard:!0,SecuredDataShowCreditcard:!0,SecuredDataShowIDs:!0,SecuredDataShowPassword:!1,SecuredDataShowScreenshots:!0,ProtectPasswords:!1,ProtectPayments:!0,ProtectIDs:!1,CryptoUserPayload:null,...(0,t.makeBasePersonalSettings)()}}t.makeBasePersonalSettings=()=>({RealLogin:null,SecurityEmail:null,accountCreationDatetime:null,Format:null,Language:null,AnonymousUserId:null,UsagelogToken:null,SyncBackup:null,AutofillSettings:{isAutofillDisabled:!1,isAutologinDisabled:!1,disabledSourceTypes:[],disabledDomains:[],isFollowUpNotificationEnabled:!0},SecuredDataAutofillCreditcard:!0,SecuredDataShowCreditcard:!0,SecuredDataShowIDs:!0,SecuredDataShowPassword:!1,SecuredDataShowScreenshots:!0,ProtectPasswords:!1,ProtectPayments:!0,ProtectIDs:!1,kwType:"KWSettingsManagerApp",Id:"SETTINGS_userId",LastBackupTime:null}),t.getEmptyPersonalSettings=c,t.default=(e=c(),t)=>{switch(t.type){case i.PersonalSettingsActionType.LoadFromStorage:return(0,n.mergeDeepRight)(e,a.fixPersonalSettingTypes.fromTransaction(t.data));case i.PersonalSettingsActionType.EditFromTransaction:return(0,n.mergeDeepRight)(e,a.fixPersonalSettingTypes.fromTransaction(t.content));case i.PersonalSettingsActionType.Edit:return(0,n.mergeDeepRight)(e,t.content);default:return e}},t.getUpdatedPersonalSettings=function(e,t){const r=c(),n=Object.keys(r);for(const e of n)t[e]||void 0===t[e]||(t[e]=r[e]);return{...e,...t}},t.getWebsiteInfo=function(e,t){const r=new o.ParsedURL(t).getRootDomain(),i=e.getPersonalSettings(),a=(0,s.spaceDisabledDomainsListSelector)(e.getState());return{disabledAutofillOnDomain:(0,n.contains)(r,i.DisabledDomainsList),disabledAutofillOnPage:(0,n.contains)(t,i.DisabledUrlsList),disabledAutologinOnDomain:(0,n.contains)(r,[...i.DisabledDomainsAutologinList,...a]),disabledAutologinOnPage:(0,n.contains)(t,i.DisabledUrlsAutologinList),disabledFromSpaces:!1}}},12995:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.loadedAnonymousComputerId=t.saveCurrentLocation=t.savePlatformInfo=t.LOAD_ANONYMOUS_APPLICATION_ID=t.SAVE_CURRENT_LOCATION=t.SAVE_PLATFORM_INFO=void 0,t.SAVE_PLATFORM_INFO="SAVE_PLATFORM_INFO",t.SAVE_CURRENT_LOCATION="SAVE_CURRENT_LOCATION",t.LOAD_ANONYMOUS_APPLICATION_ID="LOAD_ANONYMOUS_APPLICATION_ID",t.savePlatformInfo=e=>({type:t.SAVE_PLATFORM_INFO,info:e}),t.saveCurrentLocation=e=>({type:t.SAVE_CURRENT_LOCATION,location:e}),t.loadedAnonymousComputerId=e=>({type:t.LOAD_ANONYMOUS_APPLICATION_ID,anonymousApplicationId:e})},9149:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getEmptyPlatform=t.defaultPlatformInfo=void 0;const n=r(12995);t.default=(e=i(),r)=>{switch(r.type){case n.SAVE_PLATFORM_INFO:return{...e,info:(o=r.info,a=t.defaultPlatformInfo,{anonymousApplicationId:o.anonymousApplicationId||a.anonymousApplicationId,platformName:o.platformName||a.platformName,appVersion:o.appVersion||a.appVersion,browser:o.browser||a.browser,browserVersion:o.browserVersion||a.browserVersion,country:o.country||a.country,os:o.os||a.os,osCountry:o.osCountry||a.osCountry,osVersion:o.osVersion||a.osVersion,lang:o.lang||a.lang,manifestVersion:o.manifestVersion||a.manifestVersion})};case n.SAVE_CURRENT_LOCATION:return{...e,location:r.location};case n.LOAD_ANONYMOUS_APPLICATION_ID:return{...e,info:{...e.info,anonymousApplicationId:r.anonymousApplicationId}};default:return e}var o,a};const o={country:null,isEu:!0};function i(){return{info:t.defaultPlatformInfo,location:o}}t.defaultPlatformInfo={anonymousApplicationId:"unknown_anonymous_application_id",platformName:"server_carbon_unknown",appVersion:"unknown_version",browser:"browser_carbon_unknown",browserVersion:"unknown_browser_version",country:"country_carbon_unknown",os:"os_carbon_unknown",osCountry:"os_country_carbon_unknown",osVersion:"unknown_os_version",lang:"lang_carbon_unknown"},t.getEmptyPlatform=i},95363:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.resetRecoverySessionData=t.saveRecoverySessionData=t.RESET_RECOVERY_SESSION_DATA=t.SAVE_RECOVERY_SESSION_DATA=void 0,t.SAVE_RECOVERY_SESSION_DATA="SAVE_RECOVERY_SESSION_DATA",t.RESET_RECOVERY_SESSION_DATA="RESET_RECOVERY_SESSION_DATA",t.saveRecoverySessionData=e=>({type:t.SAVE_RECOVERY_SESSION_DATA,data:e}),t.resetRecoverySessionData=()=>({type:t.RESET_RECOVERY_SESSION_DATA})},13250:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getEmptyRecoveryState=void 0;const n=r(95363);t.getEmptyRecoveryState=()=>({recoveryUki:null,publicKey:null,userServerProtectedSymmetricalKey:null,recoveryServerKeyBase64:null,recoveryInProgress:!1,currentPassword:null,verificationMethod:null}),t.default=(e=(0,t.getEmptyRecoveryState)(),r)=>{switch(r.type){case n.SAVE_RECOVERY_SESSION_DATA:return{...e,...r.data};case n.RESET_RECOVERY_SESSION_DATA:return(0,t.getEmptyRecoveryState)();default:return e}}},4572:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.userSessionReducer=t.userSessionRootReducer=void 0;const n=r(98160),o=r(16516),i=r(1678),a=r(70325),s=r(86797),c=r(12659),u=r(78663),d=r(11406),l=r(66403),p=r(48005),m=r(73472),g=r(76089),f=r(1347),S=r(95648),h=r(44899),y=r(4511),v=r(79619),E=r(58174),A=r(36738),_=r(4551),T=r(84827),I=r(63703),b=r(69795),w=r(97632),C=r(13250),D=r(39727),O=r(15868),P=r(19546),N=r(51554),R=r(48313),M=r(45291),L=r(98496),U=r(29737),k=r(38271),F=r(24827),B=r(36784),G=r(13042),x=r(81200);t.userSessionRootReducer=(e,t)=>{switch(t.type){case R.CLOSE_SESSION:return;case R.LOCAL_SETTINGS_UPDATED:const r=t.data;return Object.assign({},e,{localSettings:(0,m.default)(e.localSettings,(0,g.loadStoredLocalSettings)(r)),spaceData:(0,v.default)(e.spaceData,(0,A.spacesUpdated)(r.premiumStatus.spaces))});case R.PREMIUM_STATUS_UPDATED:const n=t.premiumStatus;return Object.assign({},e,{localSettings:(0,m.default)(e.localSettings,(0,g.localSettingsPremiumStatusUpdated)(n)),spaceData:(0,v.default)(e.spaceData,(0,A.spacesUpdated)(n.spaces))});default:return e}};const $=(e,t)=>{switch(t.type){case R.SAVE_GENERATED_PASSWORD:return Object.assign({},e,{personalData:(0,f.default)(e.personalData,{...t,type:M.SAVE_GENERATED_PASSWORD},{spaces:e.localSettings.premiumStatus?.spaces??[]})});case R.SAVE_PERSONAL_ITEM:return Object.assign({},e,{personalData:(0,f.default)(e.personalData,{...t,type:M.SAVE_PERSONAL_ITEM},{spaces:e.localSettings.premiumStatus?.spaces??[]})});case R.SAVE_PERSONAL_ITEMS:return Object.assign({},e,{personalData:(0,f.default)(e.personalData,{...t,type:M.SAVE_PERSONAL_ITEMS},{spaces:e.localSettings.premiumStatus?.spaces??[]})});default:return e}};t.userSessionReducer=(e,r)=>{const g=(0,n.combineReducers)({abTests:i.default,account:s.default,accountContactInfo:D.default,accountCreation:c.default,authTicketInfo:u.default,credentialOTPs:d.credentialOTPs,changeMPData:l.default,directorySync:p.default,iconsCache:E.default,localSettings:m.default,loginDeviceLimitFlow:O.default,notificationsStatus:L.default,paymentsState:a.default,personalData:f.default,personalSettings:S.default,sdkAuthentication:U.default,recoveryData:C.default,session:k.default,sharingData:h.default,sharingSync:T.default,spaceData:v.default,ssoSettings:I.default,sync:_.default,teamAdminData:y.default,twoFactorAuthenticationEnableFlow:P.twoFactorAuthenticationEnableFlow,twoFactorAuthenticationDisableFlow:N.twoFactorAuthenticationDisableFlow,userActivity:b.default,vaultReport:w.default,vpnData:F.VPNReducers,importPersonalData:B.ImportDataStateReducer,secureFileStorageState:G.SecureFileStorageReducer,credentialsDedupViewState:x.credentialsDedupViewReducer}),A=(0,o.partialRight)(g,[r]),R=(0,o.partialRight)($,[r]);return(0,o.pipe)(t.userSessionRootReducer,R,A)(e,r)}},33007:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.loadAnonymousPartnerId=t.loadSdkAuthentication=t.saveStyxKeys=t.saveAppKeys=t.saveDashlaneServerDeltaTimestamp=t.LOAD_ANONYMOUS_PARTNER_ID=t.LOAD_CLIENT_AUTHENTICATION_DATA=t.SAVE_DASHLANE_SERVER_DELTA_TIMESTAMP=t.SAVE_STYX_KEYS=t.SAVE_APP_KEYS=void 0;const n=r(47408);t.SAVE_APP_KEYS="SAVE_APP_KEYS",t.SAVE_STYX_KEYS="SAVE_STYX_KEYS",t.SAVE_DASHLANE_SERVER_DELTA_TIMESTAMP="SAVE_DASHLANE_SERVER_DELTA_TIMESTAMP",t.LOAD_CLIENT_AUTHENTICATION_DATA="LOAD_CLIENT_AUTHENTICATION_DATA",t.LOAD_ANONYMOUS_PARTNER_ID="LOAD_ANONYMOUS_PARTNER_ID",t.saveDashlaneServerDeltaTimestamp=e=>({type:t.SAVE_DASHLANE_SERVER_DELTA_TIMESTAMP,dashlaneServerDeltaTimestamp:Math.round((0,n.getUnixTimestamp)()-e)}),t.saveAppKeys=e=>({type:t.SAVE_APP_KEYS,appKeys:e}),t.saveStyxKeys=e=>({type:t.SAVE_STYX_KEYS,styxKeys:e}),t.loadSdkAuthentication=e=>({type:t.LOAD_CLIENT_AUTHENTICATION_DATA,data:e}),t.loadAnonymousPartnerId=e=>({type:t.LOAD_ANONYMOUS_PARTNER_ID,anonymousPartnerId:e})},29737:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getEmptySdkAuthentication=void 0;const n=r(33007);t.getEmptySdkAuthentication=function(){return{anonymousPartnerId:null,appKeys:null,dashlaneServerDeltaTimestamp:null,styxKeys:null}},t.default=(e={anonymousPartnerId:null,appKeys:null,dashlaneServerDeltaTimestamp:null,styxKeys:null},t)=>{switch(t.type){case n.SAVE_APP_KEYS:return{...e,appKeys:t.appKeys};case n.SAVE_STYX_KEYS:return{...e,styxKeys:t.styxKeys};case n.SAVE_DASHLANE_SERVER_DELTA_TIMESTAMP:return{...e,dashlaneServerDeltaTimestamp:t.dashlaneServerDeltaTimestamp};case n.LOAD_CLIENT_AUTHENTICATION_DATA:return{...e,...t.data};case n.LOAD_ANONYMOUS_PARTNER_ID:return{...e,...t};default:return e}}},76556:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.secureFileStartCipheringAction=t.secureFileUploadErrorAction=t.secureFileUploadChunkAction=t.secureFileUploadClearAction=t.secureFileUploadDoneAction=t.secureFileStartUploadAction=t.secureFileChunkTransferDoneAction=t.secureFileChunkReadyAction=t.secureFileStartDecipheringAction=t.secureFileDownloadErrorAction=t.secureFileDownloadChunkAction=t.secureFileStartDownloadAction=t.secureFileClearAction=t.secureFileSetStorageInfoAction=t.SECURE_FILE_START_CIPHERING=t.SECURE_FILE_UPLOAD_CHUNK=t.SECURE_FILE_UPLOAD_ERROR=t.SECURE_FILE_UPLOAD_CLEAR=t.SECURE_FILE_UPLOAD_DONE=t.SECURE_FILE_START_UPLOAD=t.SECURE_FILE_START_DECIPHERING=t.SECURE_FILE_DOWNLOAD_CHUNK=t.SECURE_FILE_DOWNLOAD_ERROR=t.SECURE_FILE_CHUNK_TRANSFER_DONE=t.SECURE_FILE_CHUNK_READY=t.SECURE_FILE_START_DOWNLOAD=t.SECURE_FILE_CLEAR=t.SECURE_FILE_SET_STORAGE_INFO=void 0,t.SECURE_FILE_SET_STORAGE_INFO="SECURE_FILE_SET_STORAGE_INFO",t.SECURE_FILE_CLEAR="SECURE_FILE_CLEAR",t.SECURE_FILE_START_DOWNLOAD="SECURE_FILE_START_DOWNLOAD",t.SECURE_FILE_CHUNK_READY="SECURE_FILE_CHUNK_READY",t.SECURE_FILE_CHUNK_TRANSFER_DONE="SECURE_FILE_CHUNK_TRANSFER_DONE",t.SECURE_FILE_DOWNLOAD_ERROR="SECURE_FILE_DOWNLOAD_ERROR",t.SECURE_FILE_DOWNLOAD_CHUNK="SECURE_FILE_DOWNLOAD_CHUNK",t.SECURE_FILE_START_DECIPHERING="SECURE_FILE_START_DECIPHERING",t.SECURE_FILE_START_UPLOAD="SECURE_FILE_START_UPLOAD",t.SECURE_FILE_UPLOAD_DONE="SECURE_FILE_UPLOAD_DONE",t.SECURE_FILE_UPLOAD_CLEAR="SECURE_FILE_UPLOAD_CLEAR",t.SECURE_FILE_UPLOAD_ERROR="SECURE_FILE_UPLOAD_ERROR",t.SECURE_FILE_UPLOAD_CHUNK="SECURE_FILE_UPLOAD_CHUNK",t.SECURE_FILE_START_CIPHERING="SECURE_FILE_START_CIPHERING",t.secureFileSetStorageInfoAction=e=>({type:t.SECURE_FILE_SET_STORAGE_INFO,quota:e}),t.secureFileClearAction=e=>({type:t.SECURE_FILE_CLEAR,downloadKey:e}),t.secureFileStartDownloadAction=(e,r)=>({type:t.SECURE_FILE_START_DOWNLOAD,downloadKey:e,contentLength:r}),t.secureFileDownloadChunkAction=(e,r)=>({type:t.SECURE_FILE_DOWNLOAD_CHUNK,bytesReceived:r,downloadKey:e}),t.secureFileDownloadErrorAction=e=>({type:t.SECURE_FILE_DOWNLOAD_ERROR,downloadKey:e}),t.secureFileStartDecipheringAction=e=>({type:t.SECURE_FILE_START_DECIPHERING,downloadKey:e}),t.secureFileChunkReadyAction=(e,r)=>({type:t.SECURE_FILE_CHUNK_READY,downloadKey:e,chunks:r}),t.secureFileChunkTransferDoneAction=e=>({type:t.SECURE_FILE_CHUNK_TRANSFER_DONE,downloadKey:e}),t.secureFileStartUploadAction=e=>({type:t.SECURE_FILE_START_UPLOAD,contentLength:e}),t.secureFileUploadDoneAction=()=>({type:t.SECURE_FILE_UPLOAD_DONE}),t.secureFileUploadClearAction=()=>({type:t.SECURE_FILE_UPLOAD_CLEAR}),t.secureFileUploadChunkAction=e=>({type:t.SECURE_FILE_UPLOAD_CHUNK,bytesSent:e}),t.secureFileUploadErrorAction=()=>({type:t.SECURE_FILE_UPLOAD_ERROR}),t.secureFileStartCipheringAction=()=>({type:t.SECURE_FILE_START_CIPHERING})},20810:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(10691),t),o(r(76556),t)},13042:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getEmptySecureFileStorageState=t.SecureFileStorageReducer=void 0;const n=r(86562),o=r(20810),i=r(76556),a=(e,t,r)=>({...e,downloads:{[t]:{...r}}}),s={downloads:{},upload:{status:n.FileUploadStatus.None,bytesSent:0,contentLength:0},quota:{max:0,remaining:0}};t.SecureFileStorageReducer=(e=s,t)=>{switch(t.type){case i.SECURE_FILE_SET_STORAGE_INFO:return{...e,quota:t.quota};case o.SECURE_FILE_CLEAR:{const r=(t.downloadKey?e.downloads[t.downloadKey]:void 0)?{...e.downloads,[t.downloadKey]:void 0}:s.downloads;return{...e,downloads:r,upload:s.upload}}case i.SECURE_FILE_START_DOWNLOAD:return a(e,t.downloadKey,{status:n.FileDownloadStatus.Initial,contentLength:t.contentLength,bytesReceived:0});case i.SECURE_FILE_DOWNLOAD_CHUNK:{const r=e.downloads[t.downloadKey];if(!r)return e;const o=r.status===n.FileDownloadStatus.Downloading?r.bytesReceived:0,i=r.status===n.FileDownloadStatus.Downloading||r.status===n.FileDownloadStatus.Initial?r.contentLength:0;return a(e,t.downloadKey,{status:n.FileDownloadStatus.Downloading,bytesReceived:o+t.bytesReceived,contentLength:i})}case i.SECURE_FILE_START_DECIPHERING:return e.downloads[t.downloadKey]?a(e,t.downloadKey,{status:n.FileDownloadStatus.Deciphering}):e;case i.SECURE_FILE_DOWNLOAD_ERROR:return a(e,t.downloadKey,{status:n.FileDownloadStatus.Error});case o.SECURE_FILE_CHUNK_READY:{const r=e.downloads[t.downloadKey];if(!r)return e;const{chunks:o,currentChunkIndex:i}=r?.status===n.FileDownloadStatus.ChunkReady?{chunks:r.chunks,currentChunkIndex:r.currentChunkIndex+1}:{chunks:t.chunks,currentChunkIndex:0};return a(e,t.downloadKey,i===o.length?{status:n.FileDownloadStatus.TransferComplete}:{status:n.FileDownloadStatus.ChunkReady,currentChunkIndex:i,chunks:o})}case o.SECURE_FILE_CHUNK_TRANSFER_DONE:{const r=e.downloads[t.downloadKey];if(!r)return e;const o=r?.status===n.FileDownloadStatus.ChunkReady?r.chunks:void 0;return a(e,t.downloadKey,{status:n.FileDownloadStatus.ChunkDownloaded,chunks:o})}case i.SECURE_FILE_START_UPLOAD:return{...e,upload:{...e.upload,status:n.FileUploadStatus.Initial,contentLength:t.contentLength,bytesSent:0}};case i.SECURE_FILE_UPLOAD_CHUNK:{const r=e.upload;if(0===r.contentLength)return e;const o=r.bytesSent+t.bytesSent;return{...e,upload:{...e.upload,status:n.FileUploadStatus.Uploading,bytesSent:o<r.contentLength?o:r.bytesSent}}}case i.SECURE_FILE_START_CIPHERING:return{...e,upload:{...e.upload,status:n.FileUploadStatus.Ciphering}};case i.SECURE_FILE_UPLOAD_ERROR:return{...e,upload:{...e.upload,status:n.FileUploadStatus.Error}};case i.SECURE_FILE_UPLOAD_DONE:return 0===e.upload.contentLength?e:{...e,upload:{bytesSent:0,contentLength:0,status:n.FileUploadStatus.Done}};case o.SECURE_FILE_UPLOAD_CLEAR:return{...e,upload:{bytesSent:0,contentLength:0,status:n.FileUploadStatus.None}};default:return e}},t.getEmptySecureFileStorageState=()=>s},10691:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},16356:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.updateIsFirstSessionAfterAccountCreation=t.updateisUsingBackupCode=t.updateisUsingDashlaneAuthenticator=t.updateSessionDidOpen=t.pairingSucceeded=t.updatePublicUserId=t.updateDeviceAnalyticsId=t.updateUserAnalyticsId=t.updateAnalyticsIds=t.loadAnalyticsIds=t.updateRemoteKey=t.updateIsLocalKeyMigrationRequired=t.updateLocalKey=t.updateSettingsForMPValidation=t.updateCryptoKwc3FixedSalt=t.updateLastMasterPasswordCheck=t.updateMasterPassword=t.updateServerKey=t.loadSessionKeys=t.updateKeyPair=t.shouldRememberMeForSSOUpdated=t.rememberMasterPasswordUpdated=t.UPDATE_IS_FIRST_SESSION_AFTER_ACCOUNT_CREATION=t.UPDATE_IS_USING_BACKUP_CODE=t.UPDATE_IS_USING_AUTHENTICATOR=t.UPDATE_SESSION_DID_OPEN=t.PAIRING_SUCCEEDED=t.LOAD_ANALYTICS_IDS=t.UPDATE_PUBLIC_USER_ID=t.UPDATE_DEVICE_ANALYTICS_ID=t.UPDATE_USER_ANALYTICS_ID=t.UPDATE_ANALYTICS_IDS=t.UPDATE_IS_LOCAL_KEY_MIGRATION_REQUIRED=t.UPDATE_REMOTE_KEY=t.UPDATE_LOCAL_KEY=t.UPDATE_SETTINGS_FOR_MP_VALIDATION=t.USE_NEW_AUTH_API=t.LOAD_SESSION_KEYS=t.UPDATE_CRYPTO_KWC3_FIXED_SALT=t.UPDATE_LAST_MASTER_PASSWORD_CHECK=t.UPDATE_SERVER_KEY=t.UPDATE_MASTER_PASSWORD=t.UPDATE_KEY_PAIR=t.REMEMBER_ME_FOR_SSO_UPDATED=t.REMEMBER_MASTER_PASSWORD_UPDATED=void 0,t.REMEMBER_MASTER_PASSWORD_UPDATED="REMEMBER_MASTER_PASSWORD_UPDATED",t.REMEMBER_ME_FOR_SSO_UPDATED="REMEMBER_ME_FOR_SSO_UPDATED",t.UPDATE_KEY_PAIR="UPDATE_KEY_PAIR",t.UPDATE_MASTER_PASSWORD="UPDATE_MASTER_PASSWORD",t.UPDATE_SERVER_KEY="UPDATE_SERVER_KEY",t.UPDATE_LAST_MASTER_PASSWORD_CHECK="UPDATE_LAST_MASTER_PASSWORD_CHECK",t.UPDATE_CRYPTO_KWC3_FIXED_SALT="UPDATE_CRYPTO_KWC3_FIXED_SALT",t.LOAD_SESSION_KEYS="LOAD_SESSION_KEYS",t.USE_NEW_AUTH_API="USE_NEW_AUTH_API",t.UPDATE_SETTINGS_FOR_MP_VALIDATION="UPDATE_SETTINGS_FOR_MP_VALIDATION",t.UPDATE_LOCAL_KEY="UPDATE_LOCAL_KEY",t.UPDATE_REMOTE_KEY="UPDATE_REMOTE_KEY",t.UPDATE_IS_LOCAL_KEY_MIGRATION_REQUIRED="UPDATE_IS_LOCAL_KEY_MIGRATION_REQUIRED",t.UPDATE_ANALYTICS_IDS="UPDATE_ANALYTICS_IDS",t.UPDATE_USER_ANALYTICS_ID="UPDATE_USER_ANALYTICS_ID",t.UPDATE_DEVICE_ANALYTICS_ID="UPDATE_DEVICE_ANALYTICS_ID",t.UPDATE_PUBLIC_USER_ID="UPDATE_PUBLIC_USER_ID",t.LOAD_ANALYTICS_IDS="LOAD_ANALYTICS_IDS",t.PAIRING_SUCCEEDED="PAIRING_SUCCEEDED",t.UPDATE_SESSION_DID_OPEN="UPDATE_SESSION_DID_OPEN",t.UPDATE_IS_USING_AUTHENTICATOR="UPDATE_IS_USING_AUTHENTICATOR",t.UPDATE_IS_USING_BACKUP_CODE="UPDATE_IS_USING_BACKUP_CODE",t.UPDATE_IS_FIRST_SESSION_AFTER_ACCOUNT_CREATION="UPDATE_IS_FIRST_SESSION_AFTER_ACCOUNT_CREATION",t.rememberMasterPasswordUpdated=e=>({type:t.REMEMBER_MASTER_PASSWORD_UPDATED,rememberMasterPassword:e}),t.shouldRememberMeForSSOUpdated=e=>({type:t.REMEMBER_ME_FOR_SSO_UPDATED,shouldRememberMeForSSO:e}),t.updateKeyPair=e=>({type:t.UPDATE_KEY_PAIR,keyPair:e}),t.loadSessionKeys=e=>({type:t.LOAD_SESSION_KEYS,sessionKeys:e}),t.updateServerKey=e=>({type:t.UPDATE_SERVER_KEY,serverKey:e||""}),t.updateMasterPassword=e=>({type:t.UPDATE_MASTER_PASSWORD,masterPassword:e}),t.updateLastMasterPasswordCheck=()=>({type:t.UPDATE_LAST_MASTER_PASSWORD_CHECK}),t.updateCryptoKwc3FixedSalt=e=>({type:t.UPDATE_CRYPTO_KWC3_FIXED_SALT,cryptoKwc3FixedSalt:e}),t.updateSettingsForMPValidation=e=>({type:t.UPDATE_SETTINGS_FOR_MP_VALIDATION,settings:e}),t.updateLocalKey=e=>({type:t.UPDATE_LOCAL_KEY,localKey:e}),t.updateIsLocalKeyMigrationRequired=e=>({type:t.UPDATE_IS_LOCAL_KEY_MIGRATION_REQUIRED,isLocalKeyMigrationRequired:e}),t.updateRemoteKey=e=>({type:t.UPDATE_REMOTE_KEY,remoteKey:e}),t.loadAnalyticsIds=e=>({type:t.LOAD_ANALYTICS_IDS,userAnalyticsId:e.userAnalyticsId,deviceAnalyticsId:e.deviceAnalyticsId}),t.updateAnalyticsIds=(e,r)=>({type:t.UPDATE_ANALYTICS_IDS,userAnalyticsId:e,deviceAnalyticsId:r}),t.updateUserAnalyticsId=e=>({type:t.UPDATE_USER_ANALYTICS_ID,userAnalyticsId:e}),t.updateDeviceAnalyticsId=e=>({type:t.UPDATE_DEVICE_ANALYTICS_ID,deviceAnalyticsId:e}),t.updatePublicUserId=e=>({type:t.UPDATE_PUBLIC_USER_ID,publicUserId:e}),t.pairingSucceeded=e=>({type:t.PAIRING_SUCCEEDED,pairingId:e}),t.updateSessionDidOpen=e=>({type:t.UPDATE_SESSION_DID_OPEN,didOpen:e}),t.updateisUsingDashlaneAuthenticator=e=>({type:t.UPDATE_IS_USING_AUTHENTICATOR,withAuthenticator:e}),t.updateisUsingBackupCode=e=>({type:t.UPDATE_IS_USING_BACKUP_CODE,withBackupCode:e}),t.updateIsFirstSessionAfterAccountCreation=()=>({type:t.UPDATE_IS_FIRST_SESSION_AFTER_ACCOUNT_CREATION})},38271:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getEmptySession=void 0;const n=r(96997),o=r(48313),i=r(16356),a=r(59489);t.getEmptySession=function(){return{sessionId:null,rememberMasterPassword:null,shouldRememberMeForSSO:null,masterPassword:null,remoteKey:null,localKey:null,lastMasterPasswordCheck:0,serverKey:"",keyPair:null,cryptoKwc3FixedSalt:null,sessionKeys:null,settingsForMPValidation:null,isLocalKeyMigrationRequired:!1,analyticsIds:{userAnalyticsId:"",deviceAnalyticsId:""},publicUserId:"",pairingId:null,didOpen:!1,isUsingDashlaneAuthenticator:!1,isUsingBackupCode:!1,isFirstSessionAfterAccountCreation:!1}},t.default=(e={sessionId:null,rememberMasterPassword:null,shouldRememberMeForSSO:null,masterPassword:null,remoteKey:null,localKey:null,lastMasterPasswordCheck:0,serverKey:"",keyPair:null,cryptoKwc3FixedSalt:null,sessionKeys:null,settingsForMPValidation:null,isLocalKeyMigrationRequired:!1,analyticsIds:{userAnalyticsId:"",deviceAnalyticsId:""},publicUserId:"",pairingId:null,didOpen:!1,isUsingDashlaneAuthenticator:!1,isUsingBackupCode:!1,isFirstSessionAfterAccountCreation:!1},t)=>{switch(t.type){case o.OPEN_SESSION:return{...e,sessionId:(0,n.default)()};case i.UPDATE_KEY_PAIR:return{...e,keyPair:t.keyPair};case i.REMEMBER_MASTER_PASSWORD_UPDATED:return{...e,rememberMasterPassword:t.rememberMasterPassword};case i.REMEMBER_ME_FOR_SSO_UPDATED:return{...e,shouldRememberMeForSSO:t.shouldRememberMeForSSO};case i.UPDATE_MASTER_PASSWORD:return{...e,masterPassword:t.masterPassword};case i.LOAD_SESSION_KEYS:return{...e,sessionKeys:t.sessionKeys};case i.UPDATE_SERVER_KEY:return{...e,serverKey:t.serverKey};case i.UPDATE_LAST_MASTER_PASSWORD_CHECK:return{...e,lastMasterPasswordCheck:Date.now()};case i.UPDATE_CRYPTO_KWC3_FIXED_SALT:return{...e,cryptoKwc3FixedSalt:t.cryptoKwc3FixedSalt};case a.CONFIRM_USER_AUTHENTICATION:return{...e,settingsForMPValidation:null};case i.UPDATE_SETTINGS_FOR_MP_VALIDATION:return{...e,settingsForMPValidation:t.settings};case i.UPDATE_LOCAL_KEY:return e.localKey!==t.localKey?{...e,localKey:t.localKey}:e;case i.UPDATE_REMOTE_KEY:return e.remoteKey!==t.remoteKey?{...e,remoteKey:t.remoteKey}:e;case i.UPDATE_IS_LOCAL_KEY_MIGRATION_REQUIRED:return{...e,isLocalKeyMigrationRequired:t.isLocalKeyMigrationRequired};case i.LOAD_ANALYTICS_IDS:case i.UPDATE_ANALYTICS_IDS:return{...e,analyticsIds:{userAnalyticsId:t.userAnalyticsId,deviceAnalyticsId:t.deviceAnalyticsId}};case i.UPDATE_USER_ANALYTICS_ID:return{...e,analyticsIds:{...e.analyticsIds,userAnalyticsId:t.userAnalyticsId}};case i.UPDATE_DEVICE_ANALYTICS_ID:return{...e,analyticsIds:{...e.analyticsIds,deviceAnalyticsId:t.deviceAnalyticsId}};case i.UPDATE_PUBLIC_USER_ID:return{...e,publicUserId:t.publicUserId};case i.PAIRING_SUCCEEDED:return{...e,pairingId:t.pairingId};case i.UPDATE_SESSION_DID_OPEN:return{...e,didOpen:t.didOpen};case i.UPDATE_IS_USING_AUTHENTICATOR:return{...e,isUsingDashlaneAuthenticator:t.withAuthenticator};case i.UPDATE_IS_USING_BACKUP_CODE:return{...e,isUsingBackupCode:t.withBackupCode};case i.UPDATE_IS_FIRST_SESSION_AFTER_ACCOUNT_CREATION:return{...e,isFirstSessionAfterAccountCreation:!0};default:return e}}},34433:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.userGroupsUpdated=t.sharingDataUpdated=t.USER_GROUPS_UPDATED=t.SHARING_DATA_ITEMS_UPDATED=void 0,t.SHARING_DATA_ITEMS_UPDATED="SHARING_DATA_ITEMS_UPDATED",t.USER_GROUPS_UPDATED="USER_GROUPS_UPDATED",t.sharingDataUpdated=e=>({type:t.SHARING_DATA_ITEMS_UPDATED,sharingData:e}),t.userGroupsUpdated=e=>({type:t.USER_GROUPS_UPDATED,userGroups:e})},44899:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getEmptyState=void 0;const n=r(34433);t.default=(e={items:[],itemGroups:[],userGroups:[]},t)=>{switch(t.type){case n.SHARING_DATA_ITEMS_UPDATED:const{sharingData:r}=t;return{...r};case n.USER_GROUPS_UPDATED:const{userGroups:o}=t;return{...e,userGroups:o};default:return e}},t.getEmptyState=function(){return{items:[],itemGroups:[],userGroups:[]}}},84827:(e,t)=>{"use strict";function r(e,t,r){const n=t.map((e=>e[r])),o=e.map((e=>e[r])),i=e.filter((e=>n.includes(e[r])));return[...t.filter((e=>!(e=>o.includes(e[r]))(e))),...i.map((e=>{const n=t.find((t=>t[r]===e[r]));return n?{...n,seen:e.seen}:e}))]}function n(e,t,r){return e.map((e=>t.includes(e[r])?{...e,seen:!0}:e))}Object.defineProperty(t,"__esModule",{value:!0}),t.getEmptySharingSyncState=t.setElementsAsSeenAction=t.SET_ELEMENTS_AS_SEEN=t.setAllPendingAction=t.SET_ALL_PENDING=t.updateAllPendingAction=t.UPDATE_ALL_PENDING=void 0,t.UPDATE_ALL_PENDING="UPDATE_ALL_PENDING",t.updateAllPendingAction=(e,r)=>({type:t.UPDATE_ALL_PENDING,pendingItemGroups:e,pendingUserGroups:r}),t.SET_ALL_PENDING="SET_ALL_PENDING",t.setAllPendingAction=(e,r)=>({type:t.SET_ALL_PENDING,pendingItemGroups:e,pendingUserGroups:r}),t.SET_ELEMENTS_AS_SEEN="SET_ELEMENTS_AS_SEEN",t.setElementsAsSeenAction=(e,r)=>({type:t.SET_ELEMENTS_AS_SEEN,pendingItemGroupIds:e,pendingUserGroupIds:r}),t.default=(e={pendingItemGroups:[],pendingUserGroups:[]},o)=>{switch(o.type){case t.SET_ELEMENTS_AS_SEEN:{const{pendingUserGroupIds:t,pendingItemGroupIds:r}=o;return{pendingUserGroups:n(e.pendingUserGroups,t,"groupId"),pendingItemGroups:n(e.pendingItemGroups,r,"itemGroupId")}}case t.UPDATE_ALL_PENDING:{const{pendingUserGroups:t,pendingItemGroups:n}=o,i=r(e.pendingItemGroups,n,"itemGroupId");return{pendingUserGroups:r(e.pendingUserGroups,t,"groupId"),pendingItemGroups:i}}case t.SET_ALL_PENDING:{const{pendingUserGroups:e,pendingItemGroups:t}=o;return{pendingItemGroups:t,pendingUserGroups:e}}default:return e}},t.getEmptySharingSyncState=function(){return{pendingItemGroups:[],pendingUserGroups:[]}}},36738:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.spaceDataUpdated=t.spacesUpdated=t.SPACE_DATA_UPDATED=t.SPACES_UPDATED=void 0,t.SPACES_UPDATED="SPACES_UPDATED",t.SPACE_DATA_UPDATED="SPACE_DATA_UPDATED",t.spacesUpdated=e=>({type:t.SPACES_UPDATED,spaces:e}),t.spaceDataUpdated=e=>({type:t.SPACE_DATA_UPDATED,spaceData:e})},79619:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getEmptySpaceDataState=void 0;const n=r(36738);t.default=(e={spaces:[]},t)=>{switch(t.type){case n.SPACES_UPDATED:const r=t;return{...e,spaces:(r.spaces||[]).map((e=>({teamId:e.teamId,details:e})))};case n.SPACE_DATA_UPDATED:return{...t.spaceData};default:return e}},t.getEmptySpaceDataState=function(){return{spaces:[]}}},7624:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.resetSSOSettings=t.storeSSOSettings=void 0;const n=r(63703);t.storeSSOSettings=e=>({type:n.SET_SSO_SETTINGS,data:e}),t.resetSSOSettings=()=>({type:n.SET_SSO_SETTINGS,data:(0,n.getEmptySSOSettings)()})},63703:(e,t)=>{"use strict";function r(){return{ssoUser:!1,serviceProviderUrl:"",ssoServiceProviderKey:"",migration:void 0,ssoToken:""}}Object.defineProperty(t,"__esModule",{value:!0}),t.getEmptySSOSettings=t.SET_SSO_SETTINGS=void 0,t.SET_SSO_SETTINGS="SET_SSO_SETTINGS",t.default=(e={ssoUser:!1,serviceProviderUrl:"",ssoServiceProviderKey:"",migration:void 0,ssoToken:""},r)=>r.type===t.SET_SSO_SETTINGS?Object.assign({},e,{...r.data}):e,t.getEmptySSOSettings=r},82262:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.syncFailure=t.syncSuccess=t.syncStarted=t.SYNC_FAILURE=t.SYNC_SUCCESS=t.SYNC_STARTED=void 0,t.SYNC_STARTED="SYNC_STARTED",t.SYNC_SUCCESS="SYNC_SUCCESS",t.SYNC_FAILURE="SYNC_FAILURE",t.syncStarted=()=>({type:t.SYNC_STARTED,isInProgress:!0,startTime:Date.now()}),t.syncSuccess=e=>({type:t.SYNC_SUCCESS,isInProgress:!1,isUploadEnabled:e}),t.syncFailure=()=>({type:t.SYNC_FAILURE,isInProgress:!1})},4551:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getEmptySyncState=void 0;const n=r(82262),o=r(25576);function i(){return{isUploadEnabled:!1,syncIntervalTimeMs:3e5,status:o.SyncStatuses.READY}}t.getEmptySyncState=i,t.default=(e=i(),t)=>{switch(t.type){case n.SYNC_STARTED:return{...e,startTime:t.startTime,status:o.SyncStatuses.IN_PROGRESS};case n.SYNC_FAILURE:return{...e,status:o.SyncStatuses.FAILURE};case n.SYNC_SUCCESS:return{...e,status:o.SyncStatuses.SUCCESS,isUploadEnabled:t.isUploadEnabled};default:return e}}},1370:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.specialItemGroupUpdated=t.userGroupAdminItemCreated=t.teamAdminDataUpdated=t.userGroupsDeleted=t.userGroupsCreated=t.userGroupsUpdated=t.SPECIAL_ITEM_GROUP_UPDATED=t.GROUP_ADMIN_ITEM_CREATED=t.TEAM_ADMIN_DATA_UPDATED=t.TEAM_ADMIN_USER_GROUPS_DELETED=t.TEAM_ADMIN_USER_GROUPS_CREATED=t.TEAM_ADMIN_USER_GROUPS_UPDATED=void 0,t.TEAM_ADMIN_USER_GROUPS_UPDATED="TEAM_ADMIN_USER_GROUPS_UPDATED",t.TEAM_ADMIN_USER_GROUPS_CREATED="TEAM_ADMIN_USER_GROUPS_CREATED",t.TEAM_ADMIN_USER_GROUPS_DELETED="TEAM_ADMIN_USER_GROUPS_DELETED",t.TEAM_ADMIN_DATA_UPDATED="TEAM_ADMIN_DATA_UPDATED",t.GROUP_ADMIN_ITEM_CREATED="GROUP_ADMIN_ITEM_CREATED",t.SPECIAL_ITEM_GROUP_UPDATED="SPECIAL_ITEM_GROUP_UPDATED",t.userGroupsUpdated=(e,r)=>({type:t.TEAM_ADMIN_USER_GROUPS_UPDATED,teamId:e,userGroups:r}),t.userGroupsCreated=(e,r)=>({type:t.TEAM_ADMIN_USER_GROUPS_CREATED,teamId:e,userGroups:r}),t.userGroupsDeleted=(e,r)=>({type:t.TEAM_ADMIN_USER_GROUPS_DELETED,teamId:e,userGroups:r}),t.teamAdminDataUpdated=e=>({type:t.TEAM_ADMIN_DATA_UPDATED,teamAdminData:e}),t.userGroupAdminItemCreated=(e,r)=>({type:t.GROUP_ADMIN_ITEM_CREATED,teamId:e,userGroupAdminItem:r}),t.specialItemGroupUpdated=(e,r)=>({type:t.SPECIAL_ITEM_GROUP_UPDATED,teamId:e,specialItemGroup:r})},4511:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getEmptyState=void 0;const n=r(1370);function o(e,t){const r={};return Object.keys(e).forEach((t=>{r[t]=e[t]})),Object.keys(t).forEach((e=>{r[e]=Object.assign({},r[e],t[e])})),r}t.default=(e={teams:{}},t)=>{switch(t.type){case n.TEAM_ADMIN_DATA_UPDATED:const{teamAdminData:a}=t;return{teams:o(e.teams,a.teams)};case n.TEAM_ADMIN_USER_GROUPS_UPDATED:const s=t;return{teams:o(e.teams,{[s.teamId]:{teamId:s.teamId,userGroups:s.userGroups}})};case n.TEAM_ADMIN_USER_GROUPS_CREATED:const c=t,u=e.teams[c.teamId]?e.teams[c.teamId].userGroups:[];return{teams:o(e.teams,{[c.teamId]:{teamId:c.teamId,userGroups:u.concat(c.userGroups)}})};case n.TEAM_ADMIN_USER_GROUPS_DELETED:const d=t,l=d.userGroups.map((e=>e.groupId)),p=e.teams[d.teamId]?e.teams[d.teamId].userGroups:[];return{teams:o(e.teams,{[d.teamId]:{teamId:d.teamId,userGroups:p.filter((e=>!l.includes(e.groupId)))}})};case n.GROUP_ADMIN_ITEM_CREATED:const m=t,g=(r=e.teams)[i=m.teamId]&&r[i].userGroupAdminItems||[];return{teams:o(e.teams,{[m.teamId]:{teamId:m.teamId,userGroupAdminItems:g.concat([m.userGroupAdminItem])}})};case n.SPECIAL_ITEM_GROUP_UPDATED:const f=t;return{teams:o(e.teams,{[f.teamId]:{teamId:f.teamId,specialItemGroup:t.specialItemGroup}})};default:return e}var r,i},t.getEmptyState=function(){return{teams:{}}}},40051:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.userActivityLastSentAtUpdated=void 0;const n=r(39958);t.userActivityLastSentAtUpdated=e=>({type:n.LAST_SENT_AT_UPDATED,lastSentAt:e})},69795:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getEmptyUserActivityState=void 0;const n=r(39958);function o(){return{lastSentAt:void 0}}t.default=(e={lastSentAt:void 0},t)=>t.type===n.LAST_SENT_AT_UPDATED?{...e,lastSentAt:t.lastSentAt}:e,t.getEmptyUserActivityState=o},39958:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LAST_SENT_AT_UPDATED=void 0,t.LAST_SENT_AT_UPDATED="LAST_SENT_AT_UPDATED"},72881:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.vaultReportLastSentAtUpdated=void 0;const n=r(94846);t.vaultReportLastSentAtUpdated=e=>({type:n.LAST_SENT_AT_UPDATED,lastSentAt:e})},97632:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getEmptyVaultReportState=void 0;const n=r(94846);function o(){return{lastSentAt:void 0}}t.default=(e={lastSentAt:void 0},t)=>t.type===n.LAST_SENT_AT_UPDATED?{...e,lastSentAt:t.lastSentAt}:e,t.getEmptyVaultReportState=o},94846:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LAST_SENT_AT_UPDATED=void 0,t.LAST_SENT_AT_UPDATED="LAST_SENT_AT_UPDATED"},39610:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0;const n=r(34066);t.bootstrap=e=>{e.register(n.config)}},10447:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.forceSyncHandler=void 0;const n=r(92233);t.forceSyncHandler=async function({sessionService:e}){await e.getInstance().user.attemptSync(n.Trigger.Manual)}},18203:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.refreshSubscriptionInformationHandler=void 0;const n=r(35507);t.refreshSubscriptionInformationHandler=async e=>(0,n.refreshSubscriptionInformation)(e.storeService,e.storeService.getAccountInfo().login)},17095:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setCredentialSearchOrderHandler=void 0;const n=r(76089);t.setCredentialSearchOrderHandler=(e,t)=>(e.storeService.dispatch((0,n.credentialSearchOrderUpdated)(t.order)),e.sessionService.getInstance().user.persistLocalSettings(),Promise.resolve())},94275:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.updateAccountRecoveryKeyPersonalSettingsHandler=void 0;const n=r(27517);t.updateAccountRecoveryKeyPersonalSettingsHandler=(e,t)=>(e.storeService.dispatch((0,n.editPersonalSettings)(t)),Promise.resolve())},17387:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=t.setupSubscriptions=void 0,o(r(25576),t);var i=r(87881);Object.defineProperty(t,"setupSubscriptions",{enumerable:!0,get:function(){return i.setupSubscriptions}});var a=r(39610);Object.defineProperty(t,"bootstrap",{enumerable:!0,get:function(){return a.bootstrap}})},81228:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sessionInfo$=t.getServiceProviderUrl$=t.emitServiceProviderUrl=t.webOnboardingMode$=t.subscriptionInformation$=t.premiumStatus$=t.syncInProgress$=t.syncInfo$=t.didOpen$=void 0;const n=r(18948),o=r(3343),i=r(16593);t.didOpen$=()=>(0,n.pipe)((0,o.map)(i.didOpenSelector),(0,o.distinctUntilChanged)()),t.syncInfo$=()=>(0,n.pipe)((0,o.map)(i.syncSelector),(0,o.distinctUntilChanged)()),t.syncInProgress$=()=>(0,n.pipe)((0,o.map)(i.syncIsInProgressSelector),(0,o.distinctUntilChanged)()),t.premiumStatus$=()=>(0,n.pipe)((0,o.map)(i.premiumStatusSelector),(0,o.distinctUntilChanged)()),t.subscriptionInformation$=()=>(0,n.pipe)((0,o.map)(i.subscriptionInformationSelector),(0,o.distinctUntilChanged)()),t.webOnboardingMode$=()=>(0,n.pipe)((0,o.map)(i.webOnboardingModeSelector),(0,o.distinctUntilChanged)());const a=new n.Subject;t.emitServiceProviderUrl=e=>a.next(e),t.getServiceProviderUrl$=()=>a,t.sessionInfo$=()=>(0,n.pipe)((0,o.map)(i.sessionInfoSelector),(0,o.distinctUntilChanged)())},38328:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.updatePremiumChurningDismissDateHandler=t.SendTokenStatus=void 0;var n=r(72636);Object.defineProperty(t,"SendTokenStatus",{enumerable:!0,get:function(){return n.SendTokenStatus}});const o=r(76089);t.updatePremiumChurningDismissDateHandler=e=>{const t=new Date;return e.storeService.dispatch((0,o.premiumChurningDismissDateUpdated)(t.getTime())),e.sessionService.getInstance().user.persistLocalSettings(),Promise.resolve()}},28287:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.resetProtectedItemAutofillTimerHandler=t.validateMasterPasswordHandler=t.validateMasterPassword=t.validateToken=t.convertTokenToAuthTicket=t.dashlaneAuthenticatorGetAuthTicket=t.handlePerformValidationError=t.SendTokenStatus=void 0;const n=r(46298);var o=r(72636);Object.defineProperty(t,"SendTokenStatus",{enumerable:!0,get:function(){return o.SendTokenStatus}});const i=r(17825),a=r(25576),s=r(42282),c=r(16356),u=r(87248),d=(e,t)=>({success:!1,error:{code:e,message:t}});function l(e,t,r){if(!(0,n.isApiErrorOfType)(n.BusinessError,e))return d(a.AuthenticationCode.REGISTER_DEVICE_FAILED);const o=e.code;switch(o){case n.VerificationFailed:return d(t?a.AuthenticationCode.OTP_NOT_VALID:r?a.AuthenticationCode.DASHLANE_AUTHENTICATOR_PUSH_NOTIFICATION_DENIED:a.AuthenticationCode.TOKEN_NOT_VALID);case n.InvalidOTPBlocked:return d(a.AuthenticationCode.OTP_TOO_MANY_ATTEMPTS);case n.InvalidOTPAlreadyUsed:return d(a.AuthenticationCode.OTP_ALREADY_USED);case n.AccountBlockedContactSupport:return d(a.AuthenticationCode.TOKEN_ACCOUNT_LOCKED);case n.VerificationTimeout:return d(a.AuthenticationCode.TOKEN_EXPIRED);case n.VerificationRequiresRequest:return d(a.AuthenticationCode.TOKEN_TOO_MANY_ATTEMPTS);case n.VerificationMethodDisabled:return d(a.AuthenticationCode.REGISTER_DEVICE_FAILED);case n.InvalidSsoToken:case n.B2bSsoUserNotFound:return d(a.AuthenticationCode.SSO_VERIFICATION_FAILED);case n.UserHasNoActiveAuthenticator:return d(a.AuthenticationCode.NO_ACTIVE_AUTHENTICATOR);case n.FailedToContactAuthenticatorDevice:return d(a.AuthenticationCode.FAILED_TO_CONTACT_AUTHENTICATOR_DEVICE);default:return d(a.AuthenticationCode.BUSINESS_ERROR,`Unexpected business_error: ${o}`)}}t.handlePerformValidationError=l,t.dashlaneAuthenticatorGetAuthTicket=async(e,t)=>{const{login:r}=e.getAccountInfo();e.dispatch((0,s.resetAuthTicketInfo)());try{const o=await(0,n.performDashlaneAuthenticatorVerification)(e,{login:r,deviceName:t});if((0,n.isApiError)(o))return l(o,!1,!0);const i=o.authTicket;return e.dispatch((0,s.updateAuthTicketInfo)({login:r,authTicket:i,date:Date.now()})),{success:!0,authTicket:i}}catch(e){if(e.getAdditionalInfo()?.response?.status===u.HttpStatusCode.GATEWAY_TIMEOUT)return l(n.verificationTimeoutError,!1,!0);throw e}},t.convertTokenToAuthTicket=async(e,t)=>{const{login:r}=e.getAccountInfo();let o,c;switch(e.dispatch((0,s.resetAuthTicketInfo)()),t.type){case"emailToken":if(!(0,n.isEmailTokenValid)(t.value))return d(a.AuthenticationCode.TOKEN_NOT_VALID);if(c=await(0,n.performEmailTokenVerification)(e,{login:r,token:t.value}),(0,n.isApiError)(c))return l(c);o=c.authTicket;break;case"extraDeviceToken":return(0,n.isExtraDeviceTokenValid)(t.value)?{success:!0,authTicket:void 0}:d(a.AuthenticationCode.TOKEN_NOT_VALID);case"sso":if(!t.value)return d(a.AuthenticationCode.TOKEN_NOT_VALID);if(c=await(0,n.performSsoVerification)(e,{login:r,ssoToken:t.value}),(0,n.isApiError)(c))return l(c);o=c.authTicket;break;case"otp":if(!t.value)return d(a.AuthenticationCode.TOKEN_NOT_VALID);if(c=await(0,n.performTotpVerification)(e,{login:r,otp:t.value}),(0,n.isApiError)(c))return l(c,!0);o=c.authTicket;break;default:(0,i.assertUnreachable)(t)}return e.dispatch((0,s.updateAuthTicketInfo)({login:r,authTicket:o,date:Date.now()})),{success:!0,authTicket:o}},t.validateToken=async(e,r)=>{const{storeService:n}=e;return(0,t.convertTokenToAuthTicket)(n,r)},t.validateMasterPassword=async(e,t,r)=>{const n=t.getInstance().isKey(e.getUserSession().serverKey,r);return n&&e.dispatch((0,c.updateLastMasterPasswordCheck)()),n},t.validateMasterPasswordHandler=async(e,r)=>{const{storeService:n,masterPasswordEncryptorService:o}=e;return await(0,t.validateMasterPassword)(n,o,r)},t.resetProtectedItemAutofillTimerHandler=e=>(e.storeService.dispatch((0,c.updateLastMasterPasswordCheck)()),Promise.resolve())},29303:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.recoveryIsOtpSelector=t.recoveryInProgressSelector=t.recoveryDataSelector=t.recoveryUkiSelector=void 0,t.recoveryUkiSelector=e=>e.userSession.recoveryData.recoveryUki,t.recoveryDataSelector=e=>e.userSession.recoveryData,t.recoveryInProgressSelector=e=>e.userSession.recoveryData.recoveryInProgress,t.recoveryIsOtpSelector=e=>{const t=e.userSession.recoveryData.verificationMethod[0]?.type??"";return["totp","duo_push","u2f"].includes(t)}},16593:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.userCryptoSettingsSelector=t.sessionInfoSelector=t.sessionEncryptorKeysSelector=t.getCredentialSearchOrderSelector=t.analyticsInstallationIdSelector=t.isPaymentFailureChurningDismissedSelector=t.premiumChurningDismissDateSelector=t.lastMasterPasswordCheckSelector=t.didOpenSelector=t.publicUserIdSelector=t.analyticsIdsSelector=t.platformNameSelector=t.appVersionSelector=t.isAuthenticatedSelector=t.protectPasswordsSettingSelector=t.personalSettingsSelector=t.authTicketInfoSelector=t.sharingKeysSelector=t.sharingSyncSelector=t.recoveryKeySelector=t.accountRecoveryOptInSelector=t.userCryptoFixedSalt=t.userDefaultCryptoSelector=t.anonymousUserIdSelector=t.isLocalKeyMigrationRequiredSelector=t.remoteKeySelector=t.isRemoteKeyActivatedSelector=t.serverKeySelector=t.spaceDisabledDomainsListSelector=t.localKeySelector=t.isLocalKeyActivatedSelector=t.isOnboardingNotificationShowingSelector=t.webOnboardingModeSelector=t.masterPasswordValidationDataSelector=t.spacesSelector=t.userLoginSelector=t.masterPasswordSelector=t.masterPasswordAndServerKeySelector=t.userIdSelector=t.activeSpacesSelector=t.subscriptionInformationSelector=t.nodePremiumStatusSelector=t.premiumStatusSelector=t.syncIsInProgressSelector=t.syncSelector=void 0;const n=r(32034),o=r(57789),i=r(56915),a=r(2246),s=r(59600),c=r(30913),u=r(41265),d=r(25576);t.syncSelector=e=>e.userSession.sync,t.syncIsInProgressSelector=e=>e.userSession.sync.status===d.SyncStatuses.IN_PROGRESS,t.premiumStatusSelector=e=>e.userSession.localSettings.premiumStatus,t.nodePremiumStatusSelector=e=>e.userSession.localSettings.nodePremiumStatus,t.subscriptionInformationSelector=e=>e.userSession.localSettings.subscriptionInformation,t.activeSpacesSelector=e=>{const r=(0,t.premiumStatusSelector)(e);return(r&&r.spaces||[]).filter((e=>"accepted"===e.status))},t.userIdSelector=e=>e.userSession.account.login,t.masterPasswordAndServerKeySelector=e=>{const{userSession:t}=e,{masterPassword:r,serverKey:n}=t.session;return{password:r,serverKey:n}},t.masterPasswordSelector=e=>e.userSession.session.masterPassword,t.userLoginSelector=e=>e.userSession.account.login,t.spacesSelector=e=>e.userSession.spaceData.spaces,t.masterPasswordValidationDataSelector=e=>e.userSession.session.settingsForMPValidation,t.webOnboardingModeSelector=e=>e.userSession.localSettings.webOnboardingMode,t.isOnboardingNotificationShowingSelector=e=>{const r=(0,t.webOnboardingModeSelector)(e);return(0,o.isOnboardingNotificationShowing)(r)},t.isLocalKeyActivatedSelector=e=>Boolean(e.userSession.session.localKey),t.localKeySelector=e=>e.userSession.session.localKey,t.spaceDisabledDomainsListSelector=(0,n.createSelector)(t.spacesSelector,(e=>e.reduce(((e,t)=>{let r=[];return t&&t.details&&t.details.info&&t.details.info.autologinDomainDisabledArray&&(r=t.details.info.autologinDomainDisabledArray),[...e,...r]}),[]))),t.serverKeySelector=e=>e.userSession.session.serverKey,t.isRemoteKeyActivatedSelector=e=>Boolean(e.userSession.session.remoteKey),t.remoteKeySelector=e=>e.userSession.session.remoteKey,t.isLocalKeyMigrationRequiredSelector=e=>e.userSession.session.isLocalKeyMigrationRequired,t.anonymousUserIdSelector=e=>e.userSession.personalSettings.AnonymousUserId,t.userDefaultCryptoSelector=e=>e.userSession.personalSettings.CryptoUserPayload,t.userCryptoFixedSalt=e=>e.userSession.personalSettings.CryptoFixedSalt,t.accountRecoveryOptInSelector=e=>e.userSession.personalSettings.RecoveryOptIn||!1,t.recoveryKeySelector=e=>e.userSession.personalSettings.RecoveryKey,t.sharingSyncSelector=e=>e.userSession.sharingSync,t.sharingKeysSelector=e=>e.userSession.session.keyPair,t.authTicketInfoSelector=e=>e.userSession.authTicketInfo,t.personalSettingsSelector=e=>e.userSession.personalSettings,t.protectPasswordsSettingSelector=e=>{const{ProtectPasswords:t}=e.userSession.personalSettings;return t},t.isAuthenticatedSelector=e=>e.userSession.account.isAuthenticated,t.appVersionSelector=e=>(0,i.platformInfoSelector)(e).appVersion,t.platformNameSelector=e=>(0,i.platformInfoSelector)(e).platformName,t.analyticsIdsSelector=e=>e.userSession.session.analyticsIds,t.publicUserIdSelector=e=>e.userSession.session.publicUserId,t.didOpenSelector=e=>e.userSession.session.didOpen,t.lastMasterPasswordCheckSelector=e=>e.userSession.session.lastMasterPasswordCheck,t.premiumChurningDismissDateSelector=e=>e.userSession.localSettings.premiumChurningDismissDate,t.isPaymentFailureChurningDismissedSelector=e=>{return t=e.userSession.localSettings.premiumChurningDismissDate,Date.now()-t>864e5;var t},t.analyticsInstallationIdSelector=(0,n.createSelector)(t.userLoginSelector,t.isAuthenticatedSelector,c.applicationBuildTypeSelector,((e,t,r)=>{const n=e&&(0,u.isInternalTestUser)(e)&&t;return r===s.ApplicationBuildType.DEV||r===s.ApplicationBuildType.QA||n?(0,a.getCommonAppSetting)("installationId"):null})),t.getCredentialSearchOrderSelector=e=>e.userSession.localSettings.credentialSearchOrder??d.CredentialSearchOrder.NAME,t.sessionEncryptorKeysSelector=e=>({masterPassword:(0,t.masterPasswordSelector)(e),serverKey:(0,t.serverKeySelector)(e),localKey:(0,t.localKeySelector)(e),remoteKey:(0,t.remoteKeySelector)(e)}),t.sessionInfoSelector=e=>({password:(0,t.masterPasswordSelector)(e),serverKey:(0,t.serverKeySelector)(e),localKey:(0,t.localKeySelector)(e),cryptoUserPayload:(0,t.userDefaultCryptoSelector)(e),cryptoFixedSalt:(0,t.userCryptoFixedSalt)(e),devicesKeys:(0,i.deviceKeysSelector)(e)}),t.userCryptoSettingsSelector=e=>({cryptoUserPayload:e.userSession.personalSettings.CryptoUserPayload,cryptoFixedSalt:e.userSession.personalSettings.CryptoFixedSalt})},27754:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sessionStartTimeSelector=t.sessionIdSelector=void 0,t.sessionIdSelector=e=>e.userSession.session.sessionId,t.sessionStartTimeSelector=e=>e.userSession.account.sessionStartTime},38981:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isSSOUserSelector=t.ssoProviderInfoSelector=t.ssoMigrationInfoSelector=t.serviceProviderUrlSelector=t.ssoSettingsSelector=void 0;const n=r(82353),o=r(32034),i=r(16593);t.ssoSettingsSelector=e=>e.userSession.ssoSettings,t.serviceProviderUrlSelector=e=>(0,t.ssoSettingsSelector)(e).serviceProviderUrl,t.ssoMigrationInfoSelector=(0,o.createSelector)(t.ssoSettingsSelector,(({migration:e,serviceProviderUrl:t,ssoToken:r})=>({migration:r?n.AuthenticationFlowContracts.SSOMigrationType.MP_TO_SSO_WITH_INFO:e,serviceProviderUrl:t}))),t.ssoProviderInfoSelector=(0,o.createSelector)(t.ssoSettingsSelector,(({serviceProviderUrl:e,isNitroProvider:t})=>({serviceProviderUrl:e,isNitroProvider:t}))),t.isSSOUserSelector=e=>{const t=(0,i.activeSpacesSelector)(e);return t.length>0&&t[0].isSSOUser||!1}},87881:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setupSubscriptions=void 0;const n=r(58639),o=r(35507),i=r(16593),a=r(56915),s=r(75004),c=r(54642),u=r(50571),d=r(53576),l=r(35924),p=r(18216);t.setupSubscriptions=function(e,t){const{storeService:r,wsService:m,sessionService:g}=t;e.coreServicesReady.on((async e=>{if(e.initMode===p.InitMode.Resume&&(t.sessionService.tryRestoreInstance(),g.isSessionStarted())){const{user:e}=t.sessionService.getInstance();await e.loadNonResumableSessionData()}})),e.sessionOpened.on((()=>{r.dispatch((0,l.resetLoginStepInfo)());const e=r.getState(),t=(0,i.premiumStatusSelector)(e);1!==(0,c.getUserMessagesByTypeSelector)(e,d.UserMessageTypes.TRIAL_EXPIRED).length||(0,s.isTrialExpired)({premiumStatus:t})||(r.dispatch((0,u.userMessagesDismissed)((0,s.createTrialExpiredUserMessage)())),g.getInstance().user.persistLocalSettings())})),e.sessionClosed.on((e=>{(0,n.triggerLoginStatusChanged)({loggedIn:!1,login:e.login})})),e.familyMemberLeft.on((async()=>{const e=(0,i.userLoginSelector)(r.getState()),t=(0,a.ukiSelector)(r.getState());await(0,o.refreshPremiumStatus)(r,m,e,t)}))}},25576:(e,t)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.SpaceTier=t.SpaceStatus=t.B2CPlanFeature=t.PlanType=t.PremiumStatusCode=t.B2CStatusCode=t.CancelDashlaneAuthenticatorRegistration=t.CredentialSearchOrder=t.PersistData=t.SyncStatuses=t.SessionResumingCode=t.AuthenticationCode=t.extractExtraDeviceToken=t.makeExtraDeviceToken=t.extractOTP=t.makeSsoToken=t.makeOTP=t.extractEmailToken=t.makeEmailToken=t.remoteSupportedAuthenticationMethod=t.localSupportedAuthenticationMethod=void 0,t.localSupportedAuthenticationMethod=["totp","duo_push"],t.remoteSupportedAuthenticationMethod=["email_token","totp","duo_push","dashlane_authenticator","u2f"],t.makeEmailToken=e=>({type:"emailToken",value:e}),t.extractEmailToken=e=>e.value,t.makeOTP=e=>({type:"otp",value:e}),t.makeSsoToken=e=>({type:"sso",value:e}),t.extractOTP=e=>e.value,t.makeExtraDeviceToken=e=>({type:"extraDeviceToken",value:e}),t.extractExtraDeviceToken=e=>e.value,function(e){e[e.INVALID_LOGIN=0]="INVALID_LOGIN",e[e.EMPTY_LOGIN=1]="EMPTY_LOGIN",e[e.EMPTY_MASTER_PASSWORD=2]="EMPTY_MASTER_PASSWORD",e[e.EMPTY_ENCRYPTED_KEY=3]="EMPTY_ENCRYPTED_KEY",e[e.INVALID_ENCRYPTED_KEY=4]="INVALID_ENCRYPTED_KEY",e[e.EMPTY_TOKEN=5]="EMPTY_TOKEN",e[e.EMPTY_OTP=6]="EMPTY_OTP",e[e.SEND_TOKEN_FAILED=7]="SEND_TOKEN_FAILED",e[e.UKI_REGISTRATION_FAILED=8]="UKI_REGISTRATION_FAILED",e[e.REGISTER_DEVICE_FAILED=9]="REGISTER_DEVICE_FAILED",e[e.BUSINESS_ERROR=10]="BUSINESS_ERROR",e[e.USER_DOESNT_EXIST=11]="USER_DOESNT_EXIST",e[e.USER_DOESNT_EXIST_UNLIKELY_MX=12]="USER_DOESNT_EXIST_UNLIKELY_MX",e[e.USER_DOESNT_EXIST_INVALID_MX=13]="USER_DOESNT_EXIST_INVALID_MX",e[e.USER_UNAUTHORIZED=14]="USER_UNAUTHORIZED",e[e.WRONG_PASSWORD=15]="WRONG_PASSWORD",e[e.DATA_TAMPERED_ERROR=16]="DATA_TAMPERED_ERROR",e[e.LOGGEDIN=17]="LOGGEDIN",e[e.ASK_TOKEN=18]="ASK_TOKEN",e[e.ASK_OTP=19]="ASK_OTP",e[e.ASK_MASTER_PASSWORD=20]="ASK_MASTER_PASSWORD",e[e.USE_LOCAL_UKI=21]="USE_LOCAL_UKI",e[e.ASK_DASHLANE_AUTHENTICATOR=22]="ASK_DASHLANE_AUTHENTICATOR",e[e.OTP_NOT_VALID=23]="OTP_NOT_VALID",e[e.OTP_TOO_MANY_ATTEMPTS=24]="OTP_TOO_MANY_ATTEMPTS",e[e.OTP_ALREADY_USED=25]="OTP_ALREADY_USED",e[e.BACKUP_CODE_NOT_VALID=26]="BACKUP_CODE_NOT_VALID",e[e.TOKEN_NOT_VALID=27]="TOKEN_NOT_VALID",e[e.DASHLANE_AUTHENTICATOR_PUSH_NOTIFICATION_DENIED=28]="DASHLANE_AUTHENTICATOR_PUSH_NOTIFICATION_DENIED",e[e.SERVER_KEY_MISSING=29]="SERVER_KEY_MISSING",e[e.TOKEN_LOCKED=30]="TOKEN_LOCKED",e[e.TOKEN_TOO_MANY_ATTEMPTS=31]="TOKEN_TOO_MANY_ATTEMPTS",e[e.TOKEN_ACCOUNT_LOCKED=32]="TOKEN_ACCOUNT_LOCKED",e[e.TOKEN_EXPIRED=33]="TOKEN_EXPIRED",e[e.NO_ACTIVE_AUTHENTICATOR=34]="NO_ACTIVE_AUTHENTICATOR",e[e.FAILED_TO_CONTACT_AUTHENTICATOR_DEVICE=35]="FAILED_TO_CONTACT_AUTHENTICATOR_DEVICE",e[e.DASHLANE_AUTHENTICATOR_ASKED_FOR_LOCAL_SESSION=36]="DASHLANE_AUTHENTICATOR_ASKED_FOR_LOCAL_SESSION",e[e.DASHLANE_AUTHENTICATOR_LOGIN_CANCELLED=37]="DASHLANE_AUTHENTICATOR_LOGIN_CANCELLED",e[e.TOKEN_PROVIDED_FOR_LOCAL_SESSION=38]="TOKEN_PROVIDED_FOR_LOCAL_SESSION",e[e.DEVICE_ALREADY_REGISTERED=39]="DEVICE_ALREADY_REGISTERED",e[e.OTP_PROVIDED_FOR_LOCAL_NON_OTP_SESSION=40]="OTP_PROVIDED_FOR_LOCAL_NON_OTP_SESSION",e[e.DIFFERENT_LOGIN_PROVIDED_WITH_TOKEN_OR_OTP=41]="DIFFERENT_LOGIN_PROVIDED_WITH_TOKEN_OR_OTP",e[e.UNKNOWN_SYNC_ERROR=42]="UNKNOWN_SYNC_ERROR",e[e.INVALID_UKI=43]="INVALID_UKI",e[e.UNKNOWN_UKI=44]="UNKNOWN_UKI",e[e.UNKNOWN_ERROR=45]="UNKNOWN_ERROR",e[e.UNEXPECTED_OTP_TYPE=46]="UNEXPECTED_OTP_TYPE",e[e.UNAUTHORIZED=47]="UNAUTHORIZED",e[e.UNAUTHORIZED_NOT_VALID_CONTENT=48]="UNAUTHORIZED_NOT_VALID_CONTENT",e[e.NETWORK_ERROR=49]="NETWORK_ERROR",e[e.THROTTLED=50]="THROTTLED",e[e.SESSION_ALREADY_OPENED=51]="SESSION_ALREADY_OPENED",e[e.INVALID_SESSION=52]="INVALID_SESSION",e[e.DEVICE_NOT_REGISTERED=53]="DEVICE_NOT_REGISTERED",e[e.MISSING_APP_KEYS=54]="MISSING_APP_KEYS",e[e.PROVIDE_EXTRA_DEVICE_TOKEN=55]="PROVIDE_EXTRA_DEVICE_TOKEN",e[e.PROVIDE_MASTER_PASSWORD_FOR_EXTRA_DEVICE=56]="PROVIDE_MASTER_PASSWORD_FOR_EXTRA_DEVICE",e[e.PROVIDE_MASTER_PASSWORD_AND_SERVER_KEY_FOR_EXTRA_DEVICE=57]="PROVIDE_MASTER_PASSWORD_AND_SERVER_KEY_FOR_EXTRA_DEVICE",e[e.ASK_OTP_FOR_NEW_DEVICE=58]="ASK_OTP_FOR_NEW_DEVICE",e[e.TEAM_GENERIC_ERROR=59]="TEAM_GENERIC_ERROR",e[e.SSO_LOGIN_BYPASS=60]="SSO_LOGIN_BYPASS",e[e.SSO_VERIFICATION_FAILED=61]="SSO_VERIFICATION_FAILED",e[e.SSO_BLOCKED=62]="SSO_BLOCKED",e[e.CLIENT_VERSION_DOES_NOT_SUPPORT_SSO_MIGRATION=63]="CLIENT_VERSION_DOES_NOT_SUPPORT_SSO_MIGRATION",e[e.USER_DOESNT_EXIST_SSO=64]="USER_DOESNT_EXIST_SSO"}(t.AuthenticationCode||(t.AuthenticationCode={})),function(e){e.INVALID_LOGIN_IN_STORE="invalid_login_in_store"}(t.SessionResumingCode||(t.SessionResumingCode={})),function(e){e.READY="ready",e.IN_PROGRESS="in_progress",e.SUCCESS="success",e.FAILURE="failure"}(t.SyncStatuses||(t.SyncStatuses={})),function(e){e[e.PERSIST_DATA_YES=0]="PERSIST_DATA_YES",e[e.PERSIST_DATA_NO=1]="PERSIST_DATA_NO"}(t.PersistData||(t.PersistData={})),function(e){e.NAME="name",e.DATE="date"}(t.CredentialSearchOrder||(t.CredentialSearchOrder={})),function(e){e.CANCELLED="cancelled",e.COMPLETED="completed"}(t.CancelDashlaneAuthenticatorRegistration||(t.CancelDashlaneAuthenticatorRegistration={})),function(e){e.Free="free",e.Subscribed="subscribed",e.Legacy="legacy"}(t.B2CStatusCode||(t.B2CStatusCode={})),function(e){e[e.NO_PREMIUM=0]="NO_PREMIUM",e[e.PREMIUM=1]="PREMIUM",e[e.PREMIUM_CANCELLED=2]="PREMIUM_CANCELLED",e[e.OLD_ACCOUNT=3]="OLD_ACCOUNT",e[e.NEW_USER=4]="NEW_USER",e[e.GRACE_PERIOD=5]="GRACE_PERIOD"}(t.PremiumStatusCode||(t.PremiumStatusCode={})),function(e){e.Amazon="amazon",e.FreeTrial="free_trial",e.Invoice="invoice",e.IOS="ios",e.IOSRenewable="ios_renewable",e.Mac="mac",e.MacRenewable="mac_renewable",e.Offer="offer",e.Partner="partner",e.Paypal="paypal",e.PaypalRenewable="paypal_renewable",e.Playstore="playstore",e.PlaystoreRenewable="playstore_renewable",e.Stripe="stripe"}(t.PlanType||(t.PlanType={})),function(e){e.Premium="premium",e.Essentials="essentials",e.Premiumplus="premiumplus",e.BackupForAll="backup"}(t.B2CPlanFeature||(t.B2CPlanFeature={})),function(e){e.Accepted="accepted",e.Pending="pending",e.Proposed="proposed",e.Refused="refused",e.Removed="removed",e.Revoked="revoked",e.Unproposed="unproposed"}(t.SpaceStatus||(t.SpaceStatus={})),function(e){e.Team="team",e.Business="business",e.Legacy="legacy",e.Entreprise="entreprise",e.Free="free",e.Starter="starter"}(t.SpaceTier||(t.SpaceTier={})),function(e){e.not_in_team="not_in_team",e.proposed="proposed",e.in_team="in_team"}(r||(r={}))},34376:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getCurrentUserInfo=void 0;const n=r(56915);t.getCurrentUserInfo=function(e){const t=e.getUserSession().keyPair;return{login:e.getUserLogin(),uki:(0,n.ukiSelector)(e.getState()),privateKey:t&&t.privateKey}}},41248:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},80687:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.authorizationMiddleware=void 0,t.authorizationMiddleware=e=>async t=>{const r=await t,{config:{allowedPlatforms:n},services:{storeService:o}}=r,{platformName:i}=o.getPlatformInfo();if(n&&!n.includes(i))throw new Error("You are not allowed to connect to this slot");return await e(t)}},18324:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.debugMiddleware=void 0,r(4939),new Map,t.debugMiddleware=e=>async t=>e(t)},77686:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.debugMiddleware=t.authorizationMiddleware=void 0;var n=r(80687);Object.defineProperty(t,"authorizationMiddleware",{enumerable:!0,get:function(){return n.authorizationMiddleware}});var o=r(18324);Object.defineProperty(t,"debugMiddleware",{enumerable:!0,get:function(){return o.debugMiddleware}})},57307:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CommandQueryBus=void 0;const n=r(18948),o=r(3343),i=r(28354),a=r(17338),s=r(25566),c=r(77686);class u{constructor(e){this.services=(0,a.getCoreServices)(e)}register(e){const{commands:t,queries:r,liveQueries:n}=e;Object.keys(t).forEach((e=>{this._registerCommand(e,t[e])})),Object.keys(r).forEach((e=>{this._registerQuery(e,r[e])})),Object.keys(n).forEach((e=>{this._registerLiveQuery(e,n[e])}))}_registerCommand(e,t){const r=r=>Promise.resolve({messageType:"command",messageName:e,requestId:(0,i.v4)(),services:this.services,arg:r,config:t,logTags:[u.API_LOG_TAG,u.COMMAND_LOG_TAG]}),n=[c.authorizationMiddleware,c.debugMiddleware,()=>e=>e.then((async e=>{const{arg:t,config:r,services:n}=e,{handler:o}=r,i=await o(n,t);return{...e,result:i}}))];this.registerCommand(e,(e=>(0,s.buildMiddlewarePipeline)(...n)(r(e)).then((e=>e.result))))}_registerQuery(e,t){const r=r=>Promise.resolve({messageType:"query",messageName:e,requestId:(0,i.v4)(),services:this.services,arg:r,config:t,logTags:[u.API_LOG_TAG,u.QUERY_LOG_TAG]}),n=[c.authorizationMiddleware,c.debugMiddleware,()=>e=>e.then((async e=>{const{arg:r,services:n}=e,{selector:o,staticDataHandler:i,selectorFactory:a}=t;if(o){const{storeService:t}=n,i=await o(t.getState(),r);return{...e,result:i}}if(a){const{storeService:t}=n,o=await a(this.services),i=await Promise.resolve(o(t.getState(),r));return{...e,result:i}}{const t=i(r);return{...e,result:t}}}))];this.registerQuery(e,(e=>(0,s.buildMiddlewarePipeline)(...n)(r(e)).then((e=>e.result))))}_registerLiveQuery(e,t){this.registerLiveQuery(e,(e=>{const{operator:r,subject:i,operatorFactory:a}=t;if(r){const{storeService:t}=this.services;return t.getState$().pipe(r(e),(0,o.skip)(1))}if(a){const{storeService:t}=this.services,r=t.getState$();return(0,n.from)(a(t.getState(),this.services)).pipe((0,n.switchMap)((t=>r.pipe(t(e),(0,o.skip)(1)))))}return i(e)}))}}t.CommandQueryBus=u,u.API_LOG_TAG="API",u.COMMAND_LOG_TAG="Command",u.QUERY_LOG_TAG="Query"},88626:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(91069),t),o(r(57307),t)},91069:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},33968:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EventStore=void 0;const n=r(18948),o=r(28354),i=r(3343),a=r(17825),s=r(47746);t.EventStore=class{constructor(){this._operation$=new n.Subject,this.subs=new Set,this.add=async(e,t)=>{const r=(0,o.v4)(),n=new Promise(((e,t)=>{const n=this._operationResults$.subscribe((o=>{o.id===r&&(!0===o.success?e(r):t(o.error),n.unsubscribe(),this.subs.delete(n))}));this.subs.add(n)}));return this.triggerAdd(e,r,t),n},this.remove=async(e,t)=>{const r=new Promise(((e,r)=>{const n=this._operationResults$.subscribe((o=>{o.id===t&&(!0===o.success?e():r(o.error),n.unsubscribe(),this.subs.delete(n))}));this.subs.add(n)}));return this.triggerRemove(e,t),r},this.removeAll=async e=>{const t=(0,o.v4)(),r=new Promise(((e,r)=>{const n=this._operationResults$.subscribe((o=>{o.id===t&&(!0===o.success?e():r(o.error),n.unsubscribe(),this.subs.delete(n))}));this.subs.add(n)}));return this.triggerRemoveAll(e,t),r},this.onAdd=async e=>{const{id:t,event:r,topic:n,type:o}=e,i={id:t,topic:n,type:o};try{const e=await this.retrieve(),o={id:t,event:r},a={...e,[n]:[...e[n]||[],o]};return await this.store(a),{...i,success:!0,event:r}}catch(e){return{...i,success:!1,error:e}}},this.onRemove=async e=>{const{id:t,topic:r,type:n}=e,o={id:t,topic:r,type:n};try{const e=await this.retrieve(),n={...e,[r]:(e[r]||[]).filter((e=>e.id!==t))};return await this.store(n),{...o,success:!0}}catch(e){return{...o,success:!1,error:e}}},this.onRemoveAll=async e=>{const{id:t,topic:r,type:n}=e,o={id:t,topic:r,type:n};try{const e={...await this.retrieve(),[r]:[]};return await this.store(e),{...o,success:!0}}catch(e){return{...o,success:!1,error:e}}},this.onOperation=async e=>{switch(e.type){case s.OperationType.Add:return this.onAdd(e);case s.OperationType.Remove:return this.onRemove(e);case s.OperationType.RemoveAll:return this.onRemoveAll(e);default:return(0,a.assertUnreachable)(e)}},this.setupOperationsHandling=()=>{const e=this._operation$.pipe((0,i.concatMap)(this.onOperation),(0,i.share)()),t=e.subscribe();this.subs.add(t),this._operationResults$=e},this.setupOperationsHandling()}newItems$(e){return this._operationResults$.pipe((0,i.filter)((e=>e.type===s.OperationType.Add&&e.success)),(0,i.filter)((t=>t.topic===e)))}async getItems(e){return(await this.retrieve())[e]}teardown(){this.subs.forEach((e=>e.unsubscribe()))}async triggerAdd(e,t,r){const n={event:r,id:t,topic:e,type:s.OperationType.Add};this._operation$.next(n)}async triggerRemove(e,t){const r={id:t,topic:e,type:s.OperationType.Remove};this._operation$.next(r)}async triggerRemoveAll(e,t){const r={id:t,topic:e,type:s.OperationType.RemoveAll};this._operation$.next(r)}}},47746:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OperationType=void 0,function(e){e.Add="add",e.Remove="remove",e.RemoveAll="removeAll"}(t.OperationType||(t.OperationType={}))},30137:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(88626),t)},25566:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.buildMiddlewarePipeline=void 0;var n=r(3201);Object.defineProperty(t,"buildMiddlewarePipeline",{enumerable:!0,get:function(){return n.buildMiddlewarePipeline}})},3201:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.buildMiddlewarePipeline=void 0,t.buildMiddlewarePipeline=(...e)=>t=>e.reduceRight(((e,t)=>t(e)),(e=>e))(t)},36768:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const n=r(84511),o=r(80993),i=r(90021),a=r(55721),s=r(78987),c=r(23944),u=r(22652),d=r(95326),l=r(67312);t.config={commands:{convertItemToDashlaneXml:{handler:l.convertItemToDashlaneXml},shareItem:{handler:d.shareItem}},queries:{getAllSharedItemIds:{selector:o.sortedSharedItemIdsSelector},getGroupRecipients:{selector:n.groupRecipientsSelector},getHasNotifications:{selector:n.hasNotificationsSelector},getIsShared:{selector:n.isSharedSelector},getItemItemGroup:{selector:n.itemItemGroupSelector},getMyAcceptedUserGroups:{selector:n.myAcceptedUserGroupsSelector},getMyAcceptedItemGroupUserMembers:{selector:n.myAcceptedItemGroupUserMembersSelector},getPendingItemGroups:{selector:n.pendingItemGroupsSelector},getPendingUserGroups:{selector:n.pendingUserGroupsSelector},getRecipientsCount:{selector:n.recipientsCountSelector},getUserRecipients:{selector:n.userRecipientsSelector},getSharingCapacity:{selector:i.sharingCapacitySelector},isAllowedToShare:{selector:a.isAllowedToShareSelector},...c.config.queries,...u.config.queries},liveQueries:{liveAllSharedItemIds:{operator:s.allSharedItemIds$},liveGroupRecipients:{operator:s.groupRecipients$},liveHasNotifications:{operator:s.hasNotifications$},liveIsShared:{operator:s.isShared$},liveMyAcceptedItemGroupUserMembers:{operator:s.myAcceptedItemGroupUserMembers$},liveMyAcceptedUserGroups:{operator:s.myAcceptedUserGroups$},livePendingItemGroups:{operator:s.pendingItemGroups$},livePendingUserGroups:{operator:s.pendingUserGroups$},liveRecipientsCount:{operator:s.recipientsCount$},liveUserRecipients:{operator:s.userRecipients$},liveSharingCapacity:{operator:s.sharingCapacity$},...c.config.liveQueries,...u.config.liveQueries}}},71661:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},36884:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makeItemGroupService=t.UPDATE_ITEM_GROUP_MEMBERS=t.SHARING_VERSION=t.REVOKE_ITEM_GROUP_MEMBERS=t.REFUSE_ITEM_GROUP=t.INVITE_ITEM_GROUP_MEMBERS=t.DELETE_ITEM_GROUP=t.CREATE_SPECIAL_ITEM_GROUP=t.CREATE_ITEM_GROUP=t.ACCEPT_ITEM_GROUP=void 0;const n=r(78320),o=r(36467),i=r(82366),a=r(36513),s=r(58107),c=r(93513);function u(e,t,r){const n=r&&r.users&&r.users.find((e=>e.userId===t.login)),o=n&&n.groupKey;return e.asymmetricEncryption.decrypt(t.privateKey,o)}function d(e,r,n,o,i,a){const s=i||void 0;return{...a?{userGroupId:a}:{},...o&&o.length?{itemsForEmailing:o}:{},acceptSignature:e,groupId:r,revision:n,sharingVersion:t.SHARING_VERSION,type:t.ACCEPT_ITEM_GROUP,auditLogDetails:s}}function l(e,r,n,o,i){const a=i?{userGroupId:i}:{},s=o||void 0;return{...n&&n.length?{itemsForEmailing:n}:{},...a,groupId:e,revision:r,sharingVersion:t.SHARING_VERSION,type:t.REFUSE_ITEM_GROUP,auditLogDetails:s}}function p(e,r,n,o,i,a){const s=a||void 0;return{...n&&n.length?{groups:n}:{},...i&&i.length?{itemsForEmailing:i}:{},groupId:e,items:o,sharingVersion:t.SHARING_VERSION,type:t.CREATE_ITEM_GROUP,users:r,auditLogDetails:s}}function m(e,r,n,o,i,a){const s=a||void 0;return{...o&&o.length?{groups:o}:{},...n&&n.length?{users:n}:{},...i&&i.length?{itemsForEmailing:i}:{},revision:r,groupId:e,sharingVersion:t.SHARING_VERSION,type:t.INVITE_ITEM_GROUP_MEMBERS,auditLogDetails:s}}function g(e,r,n,o,i,a="manual"){const s=i||void 0;return{...o&&o.length?{groups:o}:{},...n&&n.length?{users:n}:{},groupId:e,revision:r,sharingVersion:t.SHARING_VERSION,type:t.REVOKE_ITEM_GROUP_MEMBERS,auditLogDetails:s,origin:a}}function f(e,r,n,o){return{...o&&o.length?{groups:o}:{},...n&&n.length?{users:n}:{},groupId:e,revision:r,sharingVersion:t.SHARING_VERSION,type:t.UPDATE_ITEM_GROUP_MEMBERS}}async function S(e,t,r){const n=r?await async function(e,t,r){const n=await(0,a.makeCryptoService)(),o=c.encode(e),s=await n.symmetricEncryption.signHmacSHA256(t,o);return await(0,i.validateProposeSignature)("[ItemGroupService] - makeUserUpdatePublicKey",n,t,s,o),{groupKey:await n.asymmetricEncryption.encrypt(r,t),proposeSignature:s}}(e,r.rawItemGroupKey,r.userPublicKey):{};return{...n,permission:t,userId:e}}function h(e,t){return{permission:t,groupId:e}}async function y(e,t,r,n,o){const s=await(0,a.makeCryptoService)(),u=t&&t.login&&t.publicKey,d=u?t.login:e,l=u?{}:{proposeSignatureUsingAlias:!0},p=u?{groupKey:await s.asymmetricEncryption.encrypt(t.publicKey,o)}:{},m=c.encode(d),g=await s.symmetricEncryption.signHmacSHA256(o,m);return await(0,i.validateProposeSignature)("[ItemGroupService] - makeUserUpload",s,o,g,m),{...t.privateKey?{acceptSignature:await E(r,o,t.privateKey)}:{},...l,...p,alias:e,permission:n,proposeSignature:g,userId:d}}async function v(e,t,r,n,o,u){const{groupId:d}=e,l=await(0,a.makeCryptoService)();if(!(e.users||[]).find((e=>e.userId===o)))throw new Error("[ItemGroupService] - makeUserGroupInvite: Trying to share an item to a userGroup that I'm not part of.");const p=await(0,s.getUserGroupPrivateKey)(e,n,o),m=await l.asymmetricEncryption.encrypt(e.publicKey,r),g=c.encode(d),f=await l.symmetricEncryption.signHmacSHA256(r,g);return await(0,i.validateProposeSignature)("[ItemGroupService] - makeUserGroupInvite",l,r,f,g),{groupId:d,permission:t,groupKey:m,proposeSignature:f,acceptSignature:await E(u,r,p)}}async function E(e,t,r){const n=await(0,a.makeCryptoService)(),o=c.encode(`${e}-accepted-${t}`);return await n.asymmetricEncryption.sign(r,o)}t.ACCEPT_ITEM_GROUP="acceptItemGroup",t.CREATE_ITEM_GROUP="createItemGroup",t.CREATE_SPECIAL_ITEM_GROUP="createUserGroupsItemGroup",t.DELETE_ITEM_GROUP="deleteItemGroup",t.INVITE_ITEM_GROUP_MEMBERS="inviteItemGroupMembers",t.REFUSE_ITEM_GROUP="refuseItemGroup",t.REVOKE_ITEM_GROUP_MEMBERS="revokeItemGroupMembers",t.SHARING_VERSION=4,t.UPDATE_ITEM_GROUP_MEMBERS="updateItemGroupMembers",t.makeItemGroupService=function(e,r){return{makeCreateSpecialItemGroupEvent:(e,a,s)=>async function(e,r,a,s){const c=(0,n.generateItemUuid)(),[d,l]=await Promise.all([e.symmetricEncryption.generateNewAESKey(),u(e,r,a)]),p=await e.symmetricEncryption.decryptAES256(l,a.privateKey),[m,g,f]=await Promise.all([e.asymmetricEncryption.encrypt(a.publicKey,d),(0,i.generateProposeSignature)(e,d,a.groupId),(0,i.generateAcceptSignature)(e,p,c,d)]),S={type:t.CREATE_SPECIAL_ITEM_GROUP,sharingVersion:t.SHARING_VERSION,groupId:c,teamId:a.teamId,alias:r.login,groups:[{groupId:a.groupId,permission:"admin",groupKey:m,proposeSignature:g,acceptSignature:f}]};return s.length&&(S.items=await(0,o.createItemsForUserGroups)(e,d,s)),S}(r,e,a,s),makeCreateItemGroupEvent:p,makeInviteItemGroupMembers:m,makeUpdateItemGroupMembers:f,makeUserUpdate:S,makeUserGroupUpdate:h,makeUserUpload:y,makeUserGroupInvite:v,createSpecialItemGroup:({login:t,uki:r},n)=>e.itemGroup.createSpecialItemGroup(t,r,n),makeDeleteItemGroupEvent:(e,r)=>async function(e,r){return{type:t.DELETE_ITEM_GROUP,sharingVersion:t.SHARING_VERSION,groupId:e,revision:r}}(e,r),deleteItemGroup:({login:t,uki:r},n)=>function(e,t,r,n){return e.itemGroup.deleteGroup(t,r,n).then((({itemGroups:e})=>e)).catch((o=>{if("Conflict"===o.message)return function(e,t,r,n){const o={type:"getSharing",sharingVersion:4,userGroupIds:n};return e.sharing.get(t,r,o).then((({itemGroupErrors:e,itemGroups:t})=>{if(e&&e.length)throw new Error(e[0].message);return t}))}(e,t,r,[n.groupId]).then((o=>{const[{revision:i,teamId:a}]=o;return a?e.itemGroup.deleteGroup(t,r,{...n,revision:i}).then((({itemGroups:e})=>e)):o}));throw o}))}(e,t,r,n),makeAcceptItemGroupEvent:d,makeRefuseItemGroupEvent:l,makeRevokeItemGroupMembers:g}}},10294:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makeItemService=t.SHARING_VERSION=t.UPDATE_ITEM=t.ADD_ITEMS=t.REMOVE_ITEMS=void 0;const n=r(53576),o=r(36513);async function i(e,t,r){return{itemId:e,itemKey:t,content:r}}function a(e){const t=(0,n.isCredential)(e)?"password":"note";return{type:t,name:e.Title||`Untitled ${t}`}}async function s(e,r,n){return{type:t.ADD_ITEMS,sharingVersion:t.SHARING_VERSION,revision:r,groupId:e,items:n}}async function c(e,r,n){if(!n)throw new Error("Missing payload. See method documentation.");const{item:i,itemId:a,itemContent:s}=n;if(!(i||a&&s))throw new Error("insufficient arguments: item or (itemId and content) must be provided.");if(i&&(a||s))throw new Error("item and (itemId | content) cannot both be provided");const c=(0,o.makeSymmetricEncryption)(),u=s??await c.encryptSharingItem(r,i);return{type:t.UPDATE_ITEM,sharingVersion:t.SHARING_VERSION,itemId:a??i?.Id,content:u,timestamp:e}}t.REMOVE_ITEMS="removeItems",t.ADD_ITEMS="addItems",t.UPDATE_ITEM="updateItem",t.SHARING_VERSION=4;const u=(e,t,r,n)=>e.itemGroup.updateItem(t,r,n);function d(e,t,r,n){return e.itemGroup.addItems(t,r,n)}const l=(e,r,n)=>Promise.resolve({type:t.REMOVE_ITEMS,sharingVersion:t.SHARING_VERSION,groupId:e,revision:r,items:[...n]}),p=(e,t,r,n)=>e.itemGroup.removeItems(t,r,n);t.makeItemService=function(){return{makeItemUpload:i,makeAddItemsEvent:s,makeItemForEmailing:a,addItems:d,makeUpdateItemEvent:c,updateItem:u,makeRemoveItemsEvent:l,removeItems:p}}},58107:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getSharingUsersFromItemGroups=t.doesItemGroupExistInSpace=t.findUserGroupItemGroups=t.findUserGroup=t.findMyAcceptedUserGroups=t.findMyAcceptedItemGroupUserMembers=t.getRecipientsCount=t.getUserRecipients=t.getGroupRecipients=t.doesUserReceiveItemGroupViaGroup=t.isUserLastAdmin=t.getDecipheredItemKey=t.isItemWithoutItemGroup=t.isItemGroupAccepted=t.getItemGroupPendingUserMember=t.decryptItemKey=t.getSharingUserPermission=t.getUserGroupPermission=t.getMyItemGroups=t.findItem=t.isCollectionUserGroupProposeSignatureValid=t.isUserGroupUserProposeSignatureValid=t.areCollectionUsersProposeSignaturesValid=t.areUserGroupUsersProposeSignaturesValid=t.getDecryptedUserGroupKey=t.isUserGroupPersonalSignatureValid=t.isGroupSignatureValid=t.decryptUserGroupPrivateKey=t.getCollectionPrivateKeyForUser=t.getCollectionPrivateKeyForUserGroup=t.getUserGroupPrivateKey=t.decryptGroupKey=t.getDecryptedItemGroupKeyFromCollectionMemberViaUserGroup=t.getDecryptedPrivateCollectionKeyFromUserGroup=t.getDecryptedItemGroupKeyFromCollectionMemberAsUser=t.getDecryptedItemGroupKeyFromUserGroupMember=t.getDecryptedItemGroupKeyFromUser=t.getItemGroupKey=t.findMyItemGroupCollectionMemberAsUser=t.findMyItemGroupCollectionMemberViaUserGroup=t.findMyItemGroupUserGroupMember=t.findMyItemGroupUser=t.getItemGroupActiveUserGroupMembers=t.isLastActiveUserInItemGroupAndAdmin=t.userMemberIsAdmin=void 0;const n=r(16516),o=r(82366),i=r(36513),a=r(49551),s=r(19736),c=r(81438),u=r(71646),d=r(70252),l=r(16593),p=r(95458),m=r(93513),g=e=>["accepted","pending"].includes(e.status);function f(e,t){const{users:r}=e;return(r||[]).find((e=>e.userId===t))}function S(e,t,r){const n=(t||[]).filter((e=>(e.users||[]).map((e=>e.userId)).includes(r))).map((e=>e.groupId));return(e.groups||[]).filter((e=>"accepted"===e.status)).find((e=>n.includes(e.groupId)))}function h(e,t,r,n){if(!n)return null;try{const o=e=>(e.userGroups||[]).flatMap((e=>t.find((t=>t.groupId===e.uuid))?.users)).filter((e=>void 0!==e)).find((e=>"accepted"===e.status&&e.userId===r)),i=n.filter(o);if(0===i.length)return null;const a=i.map((e=>e.uuid)),s=(e.collections||[]).filter((e=>"accepted"===e.status)).find((e=>a.includes(e.uuid)));if(!s)return null;const c=n.find((e=>e.uuid===s.uuid));if(!c)return null;const u=c.userGroups.map((e=>e.uuid)),d=t.find((e=>u.includes(e.groupId)));return d?{userGroup:d,member:s}:null}catch(e){const t=new Error(`[SharingSync] - find collection member failed: ${e}`);return(0,d.sendExceptionLog)({error:t}),null}}function y(e,t,r){if(!r)return null;try{const n=e=>(e.users||[]).map((e=>e.login)).includes(t),o=r.filter(n).map((e=>e.uuid));return(e.collections||[]).filter((e=>"accepted"===e.status)).find((e=>o.includes(e.uuid)))}catch(e){const t=new Error(`[SharingSync] - find collection member failed: ${e}`);return(0,d.sendExceptionLog)({error:t}),null}}async function v(e,t){try{return await I(e.groupKey,t)}catch{return null}}async function E(e,t,r,n){const o=(t||[]).find((t=>t.groupId===e.groupId));if(!o)return null;try{const t=await b(o,r,n);return await I(e.groupKey,t)}catch{return null}}async function A(e,t,r,n){if(!n)return null;try{const o=n.find((t=>t.uuid===e.uuid));if(!o)return null;const i=await C(o,t,r);return await I(e.itemGroupKey,i)}catch(e){const t=new Error(`[SharingSync] - decrypt collection member item group key failed: ${e}`);return(0,d.sendExceptionLog)({error:t}),null}}async function _(e,t,r,n){const o=await b(t,r,n);return await w(e,o,t.groupId)}async function T(e,t,r,n,o){if(!o)return null;try{const i=o.find((t=>t.uuid===e.uuid));if(!i)return null;const a=await _(i,t,r,n);return await I(e.itemGroupKey,a)}catch(e){const t=new Error(`[SharingSync] - decrypt collection member item group key failed: ${e}`);return(0,d.sendExceptionLog)({error:t}),null}}async function I(e,t){return(0,i.makeCryptoService)().asymmetricEncryption.decrypt(t,e)}async function b(e,t,r){const n=e.users.find((e=>e.userId===r)).groupKey,o=await I(n,t);return D(e.privateKey,o)}async function w(e,t,r){const n=e.userGroups.find((e=>e.uuid===r)).collectionKey,o=await I(n,t);return D(e.privateKey,o)}async function C(e,t,r){const n=e.users.find((e=>e.login===r)).collectionKey,o=await I(n,t);return D(e.privateKey,o)}async function D(e,t){return(0,i.makeCryptoService)().symmetricEncryption.decryptAES256(t,e)}async function O(e,t,r,n){const a=m.encode(`${e}-accepted-${r}`);return(0,o.isAcceptSignatureValid)((0,i.makeCryptoService)(),t,n,a)}async function P(e,t){let r="";"userId"in e?r=e.userId:"login"in e&&(r=e.login);try{return await(0,i.makeCryptoService)().symmetricEncryption.verifyHmacSHA256(t,e.proposeSignature,m.encode(r))}catch{return!1}}async function N(e,t){try{return await(0,i.makeCryptoService)().symmetricEncryption.verifyHmacSHA256(t,e.proposeSignature,m.encode(e.uuid))}catch{return!1}}async function R(e,t){return(0,i.makeCryptoService)().symmetricEncryption.decryptAES256(t,e)}function M(e,t){const{itemGroups:r}=e,n=r.find((e=>(e.items||[]).some((e=>e.itemId===t))));return n?(n.groups||[]).filter((e=>!["revoked","refused"].includes(e.status))):[]}function L(e,t){const{itemGroups:r}=e,n=r.find((e=>(e.items||[]).some((e=>e.itemId===t))));return n?(n.users||[]).filter((e=>!["revoked","refused"].includes(e.status))):[]}function U(e,t,r){const n=t.items?.some((n=>{const o=(0,s.credentialSelector)(e,n.itemId)??(0,c.noteSelector)(e,n.itemId);return void 0===o?(function(e,t,r,n){try{const o=["[doesItemGroupExistInSpace] Undefined item found",`ItemGroup has ${e.items.length} items`];if(e.items.length>1){const i=e.items.filter((e=>e.itemId!==t.itemId)),a=i.reduce(((e,t)=>{const o=(0,s.credentialSelector)(r,t.itemId)??(0,c.noteSelector)(r,t.itemId);return o&&o.SpaceId===n?e+1:e}),0),u=i.length-a;o.push(`${a} other items in itemGroup are in the active space`),o.push(`${u} other items in itemGroup are not in the active space`)}(0,l.activeSpacesSelector)(r).some((e=>e&&e.teamId===n&&(0,p.isPremiumStatusSpaceQuarantined)(e)))&&o.push("Active space is quarantined"),null===t.itemKey&&o.push("Item Key is null"),void 0===t.itemKey&&o.push("Item Key is undefined"),""===t.itemKey&&o.push("Item Key is an empty string"),null===t.itemId&&o.push("Item ID is null"),void 0===t.itemId&&o.push("Item ID is undefined"),""===t.itemId&&o.push("Item ID is an empty string"),(0,d.sendExceptionLog)({error:new Error(o.join("\n"))})}catch(e){(0,d.sendExceptionLog)({error:e})}}(t,n,e,r),!0):o.SpaceId!==r}));return!n}t.userMemberIsAdmin=e=>"admin"===e.permission,t.isLastActiveUserInItemGroupAndAdmin=function(e,r){const n=e.collections;if(n&&n.length>0)return!1;const{users:o,groups:i}=e,a=!i||0===i.filter(g).length,s=o&&1===o.filter(g).length&&o[0].userId===r&&(0,t.userMemberIsAdmin)(o[0]);return a&&s},t.getItemGroupActiveUserGroupMembers=function(e){return(e.groups||[]).filter(g)},t.findMyItemGroupUser=f,t.findMyItemGroupUserGroupMember=S,t.findMyItemGroupCollectionMemberViaUserGroup=h,t.findMyItemGroupCollectionMemberAsUser=y,t.getItemGroupKey=async function(e,t,r,n,o){const i=f(e,n),a=S(e,t,n),s=y(e,n,o),c=h(e,t,n,o);return i||a||s||c?i?await v(i,r):a?await E(a,t,r,n):s?await A(s,r,n,o):c?await T(c.member,c.userGroup,r,n,o):null:null},t.getDecryptedItemGroupKeyFromUser=v,t.getDecryptedItemGroupKeyFromUserGroupMember=E,t.getDecryptedItemGroupKeyFromCollectionMemberAsUser=A,t.getDecryptedPrivateCollectionKeyFromUserGroup=_,t.getDecryptedItemGroupKeyFromCollectionMemberViaUserGroup=T,t.decryptGroupKey=I,t.getUserGroupPrivateKey=b,t.getCollectionPrivateKeyForUserGroup=w,t.getCollectionPrivateKeyForUser=C,t.decryptUserGroupPrivateKey=D,t.isGroupSignatureValid=O,t.isUserGroupPersonalSignatureValid=async function(e,t,r,n){try{return await O(e,t,r,n)}catch{return!1}},t.getDecryptedUserGroupKey=async function(e,t){try{return await I(e,t)}catch{return null}},t.areUserGroupUsersProposeSignaturesValid=async function(e,t){const r=(e||[]).filter((({status:e})=>["pending","accepted"].includes(e))).map((e=>P(e,t)));return(await Promise.all(r)).every(Boolean)},t.areCollectionUsersProposeSignaturesValid=async function(e,t){const{userGroups:r,users:n}=e,o=(n||[]).filter((({status:e})=>["pending","accepted"].includes(e))).map((e=>P(e,t))),i=(r||[]).filter((({status:e})=>["pending","accepted"].includes(e))).map((e=>N(e,t))),a=await Promise.all(o),s=await Promise.all(i);return a.every(Boolean)&&s.every(Boolean)},t.isUserGroupUserProposeSignatureValid=P,t.isCollectionUserGroupProposeSignatureValid=N,t.findItem=function(e,t){const{credentials:r,notes:n}=e.getPersonalData(),o=[...r,...n];return(0,a.findDataModelObject)(t,o)},t.getMyItemGroups=function(e,t){const r=e.userGroups.filter((e=>e.users.some((e=>e.userId===t&&"accepted"===e.status)))),n=new Set(r.map((e=>e.groupId)));return e.itemGroups.filter((e=>{const r=e.users&&e.users.some((e=>e.userId===t)),o=e.groups&&e.groups.some((e=>n.has(e.groupId)));return r||o}))},t.getUserGroupPermission=function(e,t){return(e.groups||[]).find((e=>e.groupId===t))?.permission},t.getSharingUserPermission=function(e,t){return(e.users||[]).find((e=>e.userId===t))?.permission},t.decryptItemKey=R,t.getItemGroupPendingUserMember=function(e,t){return(e.users||[]).find((e=>e.userId===t&&"pending"===e.status))},t.isItemGroupAccepted=function(e,t,r,n){return!!function(e,t,r,n){if(!n)return!1;try{const o=(e.collections||[]).filter((e=>"accepted"===e.status&&e.acceptSignature)).map((e=>e.uuid)),i=n.filter((e=>o.includes(e.uuid)));return!!i.flatMap((e=>e.users)).some((e=>e.acceptSignature&&e.login===r))||i.flatMap((e=>e.userGroups)).map((e=>t.find((t=>t.groupId===e.uuid)))).filter((e=>void 0!==e)).some((e=>(e.users||[]).some((e=>e.userId===r&&"accepted"===e.status&&Boolean(e.acceptSignature)))))}catch(e){const t=new Error(`[SharingSync] - item group accepted check failed: ${e}`);return(0,d.sendExceptionLog)({error:t}),!1}}(e,t,r,n)||(!!function(e,t){return(e.users||[]).some((e=>e.userId===t&&"accepted"===e.status&&Boolean(e.acceptSignature)))}(e,r)||function(e,t,r){const n=(e.groups||[]).filter((e=>"accepted"===e.status&&e.acceptSignature)).map((e=>e.groupId)),o=t.filter((e=>n.includes(e.groupId)));return o.some((e=>(e.users||[]).some((e=>e.userId===r&&"accepted"===e.status&&Boolean(e.acceptSignature)))))}(e,t,r))},t.isItemWithoutItemGroup=function(e,t){return!(0,u.findItemItemGroup)(e,t)},t.getDecipheredItemKey=async function(e,t,r){const n=await I(e,r);try{return await R(t,n)}catch(e){return}},t.isUserLastAdmin=function(e,t){const r=function(e){return(e.users||[]).filter((({permission:e,rsaStatus:t,status:r})=>"admin"===e&&"sharingKeys"===t&&"accepted"===r))}(e),n=function(e){return(e.groups||[]).filter((({permission:e,status:t})=>"admin"===e&&"accepted"===t))}(e),o=r.some((e=>e.userId===t)),i=r.filter((({userId:e})=>t!==e)),a=n.length+i.length>0;return o&&!a},t.doesUserReceiveItemGroupViaGroup=function(e,t,r){const n=t.filter((({users:e})=>(e||[]).some((e=>e.userId===r&&"accepted"===e.status)))).map((({groupId:e})=>e));return(e.groups||[]).some((({groupId:e,status:t})=>n.includes(e)&&"accepted"===t))},t.getGroupRecipients=M,t.getUserRecipients=L,t.getRecipientsCount=function(e,t){return L(e,t).length+M(e,t).length},t.findMyAcceptedItemGroupUserMembers=function(e,t){const r=e.map((e=>e.users||[])),o=(0,n.unnest)(r);return(0,n.uniqBy)((e=>e.userId),o).filter((e=>e.alias!==t))},t.findMyAcceptedUserGroups=function(e,t){return e.filter((e=>"users"===e.type&&(e.users||[]).some((e=>e.userId===t&&"accepted"===e.status))))},t.findUserGroup=function(e,t){return e.find((e=>e.groupId===t))},t.findUserGroupItemGroups=function(e,t){return t.filter((t=>(t.groups||[]).some((t=>t.groupId===e&&"accepted"===t.status))))},t.doesItemGroupExistInSpace=U,t.getSharingUsersFromItemGroups=(e,t,r,n)=>{const o=r.reduce(((r,o)=>null===n||U(e,o,n)?((0,u.getItemGroupActiveUsers)(o).forEach((e=>{if(e.userId!==t)if(r.has(e.userId)){const t=r.get(e.userId);r.set(e.userId,{...e,itemCount:t.itemCount+o.items.length})}else r.set(e.userId,{...e,itemCount:o.items.length})})),r):r),new Map);return Array.from(o.values())}},78096:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.prepareOperations=t.revokeRemoteControlledSharedItems=void 0;const n=r(92233),o=r(17825),i=r(70252),a=r(90622),s=r(16593),c=r(11700),u=r(57989),d=r(68979),l=r(57779),p=r(84511),m=r(52102),g=r(58107),f=r(71646),S=r(95623),h=(0,S.withTag)(["Sharing","RemoteControl"]),y=h(S.logError),v=h(S.logInfo),E=h(S.logVerbose),A=e=>t=>t._tag===e,_=e=>{const t=e.filter(A("revoke_all_itemgroup_members")).length,r=e.filter(A("refuse_pending_itemgroup")).length,n=e.filter(A("revoke_my_itemgroup_membership")).length;return{operationsCount:{all:e.length,revokeAllItemGroupMembers:t,refusePendingItemGroup:r,revokeMyItemGroupMembership:n}}};function T(e,t,r,n,o,i){const a=function(e,t,r){return r.reduce(((r,n)=>{const o=(0,g.findMyItemGroupUser)(n,t);if(!o)return r;const i=function(e,t,r){return(0,g.isUserLastAdmin)(r,t.userId)?function(e,t,r){const{groupId:n,revision:o}=r,i=(0,f.getItemGroupActiveUsers)(r).filter((e=>e.userId!==t.userId)).map((e=>e.userId)),a=(0,g.getItemGroupActiveUserGroupMembers)(r).map((e=>e.groupId)),s=e.makeRevokeItemGroupMembers(n,o,i,a,void 0),c=[...i.map((e=>({type:"user",alias:e}))),...a.map((e=>({type:"userGroup",groupId:e})))];return{_tag:"revoke_all_itemgroup_members",action:s,recipients:c}}(e,t,r):function(e,t,r){const{groupId:n,revision:o}=r,i=e.makeRefuseItemGroupEvent(n,o,null),a={type:"user",alias:t.alias},s=(0,g.userMemberIsAdmin)(t)?r.items.map((e=>e.itemId)):[];return{_tag:"revoke_my_itemgroup_membership",action:i,recipient:a,itemsToDuplicate:s}}(e,t,r)}(e,o,n);return r.concat(i)}),[])}(e,n,o.map((e=>(0,f.findItemItemGroup)(e,r))).filter(Boolean)),s=function(e,t){return t.filter((t=>t.items.some((t=>{if(!(0,c.isItemForceCategorizable)(t))return!1;const r=e.map((e=>e.details)),n=(0,c.pickBestTeamSpaceForForcedCategorization)(r,t,[]);return Boolean(n)&&n.domainsMatchResult===d.TeamDomainsMatchResult.SomeFieldsMatch}))))}(t,i),u=function(e,t,r,n){return n.reduce(((n,{itemGroupId:o})=>{const i=t.find((e=>e.groupId===o));if(!i)return n;const a=(0,g.findMyItemGroupUser)(i,r);if(!a)return n;const s=function(e,t,r){const{groupId:n,revision:o}=r;return{_tag:"refuse_pending_itemgroup",action:e.makeRefuseItemGroupEvent(n,o,null),recipient:{type:"user",alias:t.alias}}}(e,a,i);return n.concat(s)}),[])}(e,r,n,s);return[...a,...u]}async function I(e,t,r,n){const{action:o}=n;await e.itemGroup.refuseItemGroup(t,r,o)}t.revokeRemoteControlledSharedItems=async function(e,t,r,c,d){v({message:"Starting remote control process"});try{const{hiddenItemIds:g}=d,f=t.getState(),S=(0,s.userLoginSelector)(f),h=(0,u.spacesWithForcedCategorizationEnabledSelector)(f),{itemGroups:y}=(0,m.sharingDataSelector)(f),A=T(c,h,y,S,g,(0,p.pendingItemGroupsSelector)(f));E({message:"Remote control operations computed",details:_(A)}),await async function(e,t,r,n){const s=e.getState(),c=(0,a.ukiSelector)(s),u=n.map((n=>async function(e,t,r,n,a){try{switch(a._tag){case"refuse_pending_itemgroup":return await I(t,r,n,a);case"revoke_my_itemgroup_membership":{await I(t,r,n,a);const{itemsToDuplicate:o}=a;for(const t of o)await(0,l.duplicateNoteOrCredential)(e,t);return}case"revoke_all_itemgroup_members":return await async function(e,t,r,n){const{action:o}=n;await e.itemGroup.revokeItemGroupMembers(t,r,o)}(t,r,n,a);default:(0,o.assertUnreachable)(a)}}catch(e){const t=new Error(`[SharingRemoteControl] - sendRequestForOperation: ${e}`);(0,i.sendExceptionLog)({error:t})}}(e,t,r,c,n)));await Promise.all(u)}(t,r,S,A),async function(e,{deletedItemIds:t,updatedItemIds:r},o){const i=t.length>0||r.length>0,a=o.length>0;(i||a)&&e.getInstance().user.requestNewSync(n.Trigger.ChangeTeam)}(e,d,A),v({message:"Remote control process done"})}catch(e){const t=new Error(`[SharingRemoteControl] - revokeRemoteControlledSharedItems: ${e}`);(0,i.sendExceptionLog)({error:t}),y({message:"Remote control process failed",details:{error:`${e}`}})}},t.prepareOperations=T},84163:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.deleteSingleUserItemGroup=t.resendPublicKeyInvite=t.updateSharingData=t.getPendingItemGroup=t.createOrUpdateItemEffect=t.deleteItemEffect=void 0;const n=r(16516),o=r(18948),i=r(53576),a=r(61475),s=r(86392),c=r(36513),u=r(48313),d=r(95623),l=r(76496),p=r(45291),m=r(58639),g=r(34433),f=r(36884),S=r(63698),h=r(89016),y=r(70252),v=r(88542),E=r(72079),A=r(57779),_=r(76496),T=r(50141),I=r(58107),b=r(49551),w=r(39373),C=r(56915),D=r(12362),O=r(86691),P=r(73566),N=r(56915),R=r(85225),M=r(82366);function L(e,t,r){const o=(0,n.pick)(e,r);return(0,n.mergeRight)(t,o)}t.deleteItemEffect=async function(e,t){try{const{itemToDelete:r}=(0,l.findPersonalDataItemToDelete)(e,t);if(!r)return!0;const n=(0,p.removePersonalItem)(r.kwType,r.Id,null);return e.dispatch(n),!0}catch(e){return d.default.log(`[SharingSync]: deleteItemEffect: ${e}`),!1}},t.createOrUpdateItemEffect=async function(e,t,r){let n=null;const o=(0,D.getInstance)(),a=(0,O.getInstance)();try{const s=await(0,c.makeCryptoService)().symmetricEncryption.decryptSharingItem(r,t.content),{Id:d}=s,l=e.getPersonalData(),p=(0,N.platformInfoSelector)(e.getState());if((0,i.isCredential)(s)){n=a.lockTopic("iconsUpdates");const t=d?(0,b.findDataModelObject)(d,l.credentials||[]):null,r=t?L(v.sharedFields,t,s):s,c={credentialIds:[r.Id],type:"credentialUpdates"};await o.add("iconsUpdates",c);const m=(0,P.getUpdatedItemChangeHistory)({deviceName:e.getLocalSettings().deviceName,personalData:l,change:(0,R.makeUpdateChange)(r),userLogin:e.getUserLogin(),platformInfo:p}),g=(0,u.savePersonalDataItem)(r,i.DataModelType.KWAuthentifiant,m);e.dispatch(g),a.releaseTopic("iconsUpdates",n)}else if((0,i.isNote)(s)){const t=d?(0,b.findDataModelObject)(d,l.notes||[]):null,r=t?L(E.sharedFields,t,s):s,n=(0,u.savePersonalDataItem)(r,i.DataModelType.KWSecureNote);e.dispatch(n)}return!0}catch(e){return d.default.log(`[SharingSync] - createOrUpdateItemEffect: ${e}`),n&&a.releaseTopic("iconsUpdates",n),!1}},t.getPendingItemGroup=async function(e,t,r,n,o,a){let s;if(e.content){const r=(0,c.makeCryptoService)().symmetricEncryption;s=await r.decryptSharingItem(t,e.content)}else s=a[e.itemId];const u=(0,i.isCredential)(s),d=(0,i.isNote)(s);if(!u&&!d)throw new Error("item is neither credential nor note");let l=s;return u&&(l=(0,w.fixCredentialWithMissingTitle)(s)),{itemGroupId:r,items:[l],permission:o,referrer:n,seen:!1}},t.updateSharingData=function(e,t){const r=(0,g.sharingDataUpdated)(t);e.dispatch(r),(0,m.reportDataUpdate)(e)},t.resendPublicKeyInvite=async function(e,t,r){const n="[SharingEffectsService] - resendPublicKeyInvite";try{const o=e.getUserLogin(),i=(0,C.ukiSelector)(e.getState()),{groupId:a,revision:s}=r,{privateKey:u}=e.getUserSession().keyPair,d=(0,c.makeCryptoService)(),l=(0,h.makeWSService)(),{findUsersByAliases:p}=(0,T.makeWSUserAlias)(),{makeUserUpdate:m,makeUpdateItemGroupMembers:g}=(0,f.makeItemGroupService)(l,d),{updateItemGroupMembers:v}=(0,S.makeItemGroupWS)(),E=JSON.stringify([t.userId]),A=(await p({login:o,uki:i,aliases:E}))[t.userId];if(!A){const e=`${n}: couldn't find the user by alias, aborting.`;return void(0,y.sendExceptionLog)({message:e})}const _=(r.users||[]).find((e=>e.userId===o));if(!_){const e=`${n}: couldn't find myself in "itemGroup.users", aborting.`;return void(0,y.sendExceptionLog)({message:e})}const I=await d.asymmetricEncryption.decrypt(u,_.groupKey),{publicKey:b}=A,{permission:w,userId:D}=t,O=await m(D,w,{rawItemGroupKey:I,userPublicKey:b}),P=g(a,s,[O],null),N=await v(o,i,P);if(N&&N.itemGroups&&1===N.itemGroups.length){const{userGroups:t}=e.getSharingData();await(0,M.validateItemGroupResponse)("[SharingSyncJobsService] - resendPublicKeyInvite",d,N,b,u,I,o,[O],t,!0)}}catch(e){const t=new Error(`${n}: ${e}`);(0,y.sendExceptionLog)({error:t})}},t.deleteSingleUserItemGroup=async function({storeService:e,wsService:t,eventLoggerService:r,applicationModulesAccess:n},u){const{login:d}=e.getAccountInfo(),l=(0,C.ukiSelector)(e.getState()),{keyPair:{privateKey:p}}=e.getUserSession(),{groupId:m,revision:g}=u,S="[SharingEffectsService] - deleteSingleUserItemGroup",h=(0,c.makeCryptoService)(),{deleteItemGroup:v,makeDeleteItemGroupEvent:E}=(0,f.makeItemGroupService)(t,h);if(!(0,I.isLastActiveUserInItemGroupAndAdmin)(u,d))throw new Error(`${S}: I'm not alone in the group, aborting.`);if(!u.items||0===u.items.length)return!0;const T=(u.items||[]).map((({itemId:e})=>e)),b={};for(const t of T){const r=await(0,A.duplicateNoteOrCredential)(e,t);b[t]=r}try{const c={login:d,uki:l,privateKey:p},u=await E(m,g);if(await v(c,u),Object.keys(b).filter((e=>b[e])).forEach((n=>{(0,_.deletePersonalDataItem)({storeService:e,wsService:t,eventLoggerService:r},n,{ignoreSharing:!0})})),n){const{commands:e,queries:t}=n.createClients().vaultOrganization,r=await(0,o.firstValueFrom)(t.queryCollections({}));if((0,a.isSuccess)(r)&&r.data.collections?.length>0){const t=Object.keys(b).filter((e=>b[e])),n=Object.keys(b).map((e=>b[e])).filter(Boolean),o=r.data.collections.filter((e=>e.vaultItems.some((e=>t.includes(e.id))))),a={vaultItems:t.map((e=>({id:e,type:i.DataModelType.KWAuthentifiant})))},c={vaultItems:n.map((e=>({id:e,type:i.DataModelType.KWAuthentifiant})))};for(const t of o)await e.updateCollection({id:t.id,collection:a,operationType:s.OperationType.SUBSTRACT_VAULT_ITEMS}),await e.updateCollection({id:t.id,collection:c,operationType:s.OperationType.APPEND_VAULT_ITEMS})}}return!0}catch(n){const o=new Error(`${S}: ${n}`);return(0,y.sendExceptionLog)({error:o}),Object.keys(b).map((e=>b[e])).filter(Boolean).forEach((n=>(0,_.deletePersonalDataItem)({storeService:e,wsService:t,eventLoggerService:r},n))),!1}}},78118:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getEmptySharing2Summary=t.getEmptySharingData=t.getEmptyGetSharingParams=t.getEmptyOperations=t.initSharingSyncFromStorage=t.putSharingSyncBackInStorage=t.updateSharingDataFromSync=t.updateSharedCollectionsInModule=t.applyOperationsToSharingData=t.runOperationsEffects=t.setMissingItemKeys=t.revokeUsersFromInvalidItemGroups=t.shouldRunAutoRevoke=t.asyncFilterItemGroups=t.filterOutInvalidOperations=t.getSharing=t.setGetSharingParams=t.tagConfirmableOperations=t.setOperations=t.sanitizeData=t.OperationType=t.syncSharing=void 0;const n=r(16516),o=r(18948),i=r(53576),a=r(61475),s=r(92233),c=r(84827),u=r(47683),d=r(58107),l=r(71646),p=r(84163),m=r(95623),g=r(70252),f=r(17825),S=r(56915),h=r(32663),y=r(3735),v=r(88205),E=r(90503),A=!1;function _(e,t){return A?(...r)=>(console.time(e),t(...r).then((t=>(m.default.warn(`Step "${e}" returned:`,t),console.timeEnd(e),t)))):t}var T;async function I(e){const{sharingData:{collections:t,items:r,itemGroups:n,userGroups:o},sharing2Summary:{collections:i,items:a,itemGroups:s,userGroups:c}}=e;return{...e,sharingData:{collections:b(t,"sharingData.collections"),items:b(r,"sharingData.items"),itemGroups:b(n,"sharingData.itemGroups"),userGroups:b(o,"sharingData.userGroups")},sharing2Summary:{collections:b(i,"sharing2Summary.collections"),items:b(a,"sharing2Summary.items"),itemGroups:b(s,"sharing2Summary.itemGroups"),userGroups:b(c,"sharing2Summary.userGroups")}}}function b(e,t,r){const n=function(e,t){return r=>{if(e(r))return!0;const n=`[SharingSync] - sanitizeList: found invalid element "${r}" in "${t}", filtering it out.`;return(0,g.sendExceptionLog)({message:n}),!1}}(r||Boolean,t);return(e||[]).filter(n)}async function w(e){const{sharingData:t,personalDataItemIds:r}=e,n=C(t.items,e.sharing2Summary.items,"itemId","timestamp").map((e=>e.type===T.Create&&r.includes(e.id)?{...e,skipPersonalDataItemCreation:!0}:e)),o=C(t.itemGroups,e.sharing2Summary.itemGroups,"groupId","revision"),i=C(t.userGroups,e.sharing2Summary.userGroups,"groupId","revision"),a=C(t.collections,e.sharing2Summary.collections,"uuid","revision");return{...e,operations:{items:n,itemGroups:o,userGroups:i,collections:a}}}function C(e,t,r,n){const{elementsToCreate:o}=function(e,t,r){const n=e.map((e=>e[r])),o=t.map((e=>e.id)),i=o.filter((e=>!n.includes(e)));return{elementsToCreate:i}}(e,t,r),{elementsToUpdate:i,elementsToDelete:a}=function(e,t,r,n){const o=t.map((e=>e.id));return e.reduce(((e,i)=>{const a=o.indexOf(i[r]);return a<0?{...e,elementsToDelete:[...e.elementsToDelete,i[r]]}:t[a][n]>i[n]?{...e,elementsToUpdate:[...e.elementsToUpdate,i[r]]}:e}),{elementsToUpdate:[],elementsToDelete:[]})}(e,t,r,n);return[].concat(o.map((e=>({id:e,type:T.Create})))).concat(i.map((e=>({id:e,type:T.Update})))).concat(a.map((e=>({id:e,type:T.Delete}))))}async function D(e,t){const{operations:{items:r},loadedElements:{collections:o,itemGroups:i,userGroups:a},sharingData:{collections:s,itemGroups:c,userGroups:u}}=e,l=(0,n.uniqBy)((e=>e.groupId),i.concat(c)),p=(0,n.uniqBy)((e=>e.groupId),a.concat(u)),m=(0,n.uniqBy)((e=>e.uuid),o.concat(s)),g=r.map((e=>function(e,t,r,n,o){if(e.type!==T.Create)return e;const i=(r||[]).find((t=>(t.items||[]).map((e=>e.itemId)).includes(e.id)));if(!i)return e;const a=(0,d.isItemGroupAccepted)(i,n,t,o),s={...O(i,n,t),itemGroupId:i.groupId};return a?e:{...e,userConfirmationRequired:!0,confirmationItemGroup:s}}(e,t,l,p,m)));return{...e,operations:{...e.operations,items:g}}}function O(e,t,r){const n=(0,d.findMyItemGroupUser)(e,r),o=(0,d.findMyItemGroupUserGroupMember)(e,t,r);if(!n&&!o)return{referrer:null,permission:null};const{referrer:i,permission:a}=n||o;return{referrer:i,permission:a}}async function P(e){const t=t=>e.operations[t].filter((e=>[T.Create,T.Update].includes(e.type))).map((e=>e.id));return{...e,getSharingParams:{collectionIds:t("collections"),itemIds:t("items"),itemGroupIds:t("itemGroups"),userGroupIds:t("userGroups")}}}async function N(e,t,r,n){const o=Object.assign({},e.getSharingParams,{type:"getSharing",sharingVersion:4});if(!(o.collectionIds.length||o.itemIds.length||o.itemGroupIds.length||o.userGroupIds.length))return e;const{collections:i,itemErrors:a,items:s,itemGroupErrors:c,itemGroups:u,userGroupErrors:d,userGroups:l}=await t.sharing.get(r,n,o);if(a&&a.length)throw new Error(`[SharingSync] - getSharing itemErrors: ${a[0].message}`);if(c&&c.length)throw new Error(`[SharingSync] - getSharing itemGroupErrors: ${c[0].message}`);if(d&&d.length)throw new Error(`[SharingSync] - getSharing userGroupErrors: ${d[0].message}`);return{...e,loadedElements:{collections:b(i,"getSharing loaded collections"),items:b(s,"getSharing loaded items"),itemGroups:b(u,"getSharing loaded itemGroups"),userGroups:b(l,"getSharing loaded userGroups")}}}async function R(e,t,r,n,o){const{sharingData:{collections:i,userGroups:a},loadedElements:{collections:s,itemGroups:c,userGroups:d},operations:{collections:l,itemGroups:p,userGroups:m}}=e,g=await(0,h.asyncFilter)(d,(e=>(0,u.isUserGroupValid)(e,t,r,n))),f=g.map((e=>e.groupId)),S=m.filter((e=>e.type===T.Delete||f.includes(e.id))),y=g.concat(a),v=await(0,h.asyncFilter)(s,(e=>(0,u.isCollectionValid)(e,t,r,n,y))),E=v.map((e=>e.uuid)),A=l.filter((e=>e.type===T.Delete||E.includes(e.id))),_=v.concat(i),{validItemGroups:I,itemKeys:b,invalidItemGroups:w}=await M(c,(e=>(0,u.validateItemGroup)(e,y,t,r,n,function(e,t){const r=(e.collections||[]).map((e=>e.uuid));return t.filter((e=>r.includes(e.uuid)))}(e,_)))),C=I.map((e=>e.groupId)),D=p.filter((e=>e.type===T.Delete||C.includes(e.id)));return w&&w.length>0&&w.forEach((e=>{o?.(e.itemGroupId,e.error)})),{...e,itemKeys:b,operations:{...e.operations,collections:A,userGroups:S,itemGroups:D},invalidItemGroups:w}}async function M(e,t){const r=await Promise.all(e.map(t));return{validItemGroups:e.filter(((e,t)=>r[t].isValid)),itemKeys:r.filter((e=>e.isValid)).reduce(((e,t)=>({...e,...t.itemKeys})),{}),invalidItemGroups:r.flatMap(((t,r)=>!1===t.isValid?[{itemGroupId:e[r].groupId,error:t.error}]:[]))}}async function L(e,t){const r=(await(0,v.makeFeatureFlipsSelectors)(e).featureFlipsSelector()).sharing_web_invalidSignatureAutoRevoke_prod,n=t===s.Trigger.InitialLogin||t===s.Trigger.Login;return r&&n}async function U(e,t,r,n,o,i,a,c){if(!await L(t,c))return n;const{sharingData:{userGroups:d},loadedElements:{itemGroups:l,userGroups:p},invalidItemGroups:m}=n,g=m.filter((e=>e.error===s.ErrorName.ItemGroupInvalidUserProposeSignature));if(0===g.length)return n;const f=(await(0,h.asyncFilter)(p,(e=>(0,u.isUserGroupValid)(e,o,i,a)))).concat(d),S=g.map((e=>l.find((({groupId:t})=>t===e.itemGroupId)))).filter((e=>void 0!==e&&(0,y.isUserItemGroupAdmin)(e,d,a)));if(0===S.length)return n;const v=S.flatMap((e=>e.users.filter((e=>"pending"===e.status&&e.userId!==a)).map((t=>({itemGroup:e,user:t}))))),E=(await Promise.all(v.map((async e=>{const t=await(0,u.getDecryptedItemGroupKey)(e.itemGroup,function(e,t){const r=(e.groups||[]).map((e=>e.groupId));return t.filter((e=>r.includes(e.groupId)))}(e.itemGroup,f),o,a);return await(0,u.isItemGroupUserProposeSignatureValid)(e.user,t)?void 0:e})))).filter((e=>void 0!==e)),A=await Promise.all(E.map((async({user:n,itemGroup:o})=>(await(0,y.revokeItemGroupMember)(t,e,r,o,{type:"user",alias:n.alias}),{user:n,itemGroup:o}))));return{...n,autoRevokedUsers:A}}async function k(e,t,r){const{loadedElements:n,sharingData:{collections:o,itemGroups:i,userGroups:a},itemKeys:s}=e,c=n.items.filter((e=>(0,d.isItemWithoutItemGroup)(e.itemId,n.itemGroups))).reduce(((e,t)=>{const r=(0,l.findItemItemGroup)(t.itemId,i);return r?{...e,[t.itemId]:{itemGroup:r}}:e}),{}),u=Object.keys(c),p=u.map((e=>{const{itemGroup:n}=c[e];return(0,d.getItemGroupKey)(n,a,t,r,o).catch((()=>null))})),m=await Promise.all(p),g=u.reduce(((e,t,r)=>({...e,[t]:{...c[t],itemGroupKey:m[r]}})),{}),f=u.map((e=>{const{itemGroupKey:t,itemGroup:r}=g[e];if(!r)return Promise.resolve(null);const n=(r.items||[]).find((t=>t.itemId===e));return n?(0,d.decryptItemKey)(n.itemKey,t).catch((()=>null)):Promise.resolve(null)})),S=await Promise.all(f),h=u.reduce(((e,t,r)=>S[r]?{...e,[t]:S[r]}:e),{});return{...e,itemKeys:{...s,...h}}}async function F(e,{storeService:t,wsService:r,eventLoggerService:o,applicationModulesAccess:i}){const a=await async function(e,t,r){const{itemKeys:n,loadedElements:o,operations:{items:i}}=t,a=i.map((t=>async function(e,t,r,n){switch(r.type){case T.Delete:return await(0,p.deleteItemEffect)(e,r.id)?r:null;case T.Create:case T.Update:{if(r.skipPersonalDataItemCreation)return r;if(r.userConfirmationRequired)return null;const o=t.items.find((e=>e.itemId===r.id));if(!o)return null;const i=n[o.itemId];return i&&await(0,p.createOrUpdateItemEffect)(e,o,i)?r:null}}return(0,f.assertUnreachable)(r.type)}(e,o,t,n))),s=(await Promise.all(a)).filter((e=>!!e));try{if(r&&s.length>0){const{commands:e}=r.createClients().passwordHealth;e.recalculatePasswordHealth()}}catch(e){const t=new Error(`Password Health update - sharing: ${e}`);(0,g.sendExceptionLog)({error:t,code:E.ExceptionCriticality.WARNING})}return s}(t,e,i),s=await async function({storeService:e,wsService:t,eventLoggerService:r,applicationModulesAccess:o},i){const{operations:{itemGroups:a},loadedElements:{itemGroups:s,userGroups:c,collections:u},sharingData:{userGroups:l,collections:m}}=i,S=(0,n.uniqBy)((e=>e.groupId),c.concat(l)),h=(0,n.uniqBy)((e=>e.uuid),u.concat(m)),y=a.map((n=>async function({storeService:e,wsService:t,eventLoggerService:r,applicationModulesAccess:n},o,i,a,s){const{type:c,id:u}=a,{login:l}=e.getAccountInfo();switch(c){case T.Delete:return a;case T.Create:case T.Update:{const c=o.find((e=>e.groupId===u));if(!c)return null;if((c.users||[]).filter((e=>"publicKey"===e.rsaStatus)).forEach((t=>(0,p.resendPublicKeyInvite)(e,t,c))),(0,d.isLastActiveUserInItemGroupAndAdmin)(c,l))return await(0,p.deleteSingleUserItemGroup)({storeService:e,wsService:t,eventLoggerService:r,applicationModulesAccess:n},c)?{...a,type:T.Delete}:null;if(!(0,d.isItemGroupAccepted)(c,i,l,s)){const t=(c.items||[]).map((async({itemId:t})=>{try{return await(0,p.deleteItemEffect)(e,t)}catch(e){return null}}));return await Promise.all(t),{...a,deleteSharingDataItems:!0}}return a}}return(0,f.assertUnreachable)(c)}({storeService:e,wsService:t,eventLoggerService:r,applicationModulesAccess:o},s,S,n,h))),v=(await Promise.all(y)).filter((e=>!!e));try{if(o&&v.length>0){const{commands:e}=o.createClients().passwordHealth;e.recalculatePasswordHealth()}}catch(e){const t=new Error(`Password Health update - sharing: ${e}`);(0,g.sendExceptionLog)({error:t,code:E.ExceptionCriticality.WARNING})}return v}({storeService:t,wsService:r,eventLoggerService:o,applicationModulesAccess:i},e);return{...e,operations:{...e.operations,items:a,itemGroups:s}}}async function B(e){const{sharingData:{items:t,itemGroups:r,userGroups:n,collections:o},loadedElements:{items:i,itemGroups:a,userGroups:s,collections:c},operations:{items:u,itemGroups:d,userGroups:l,collections:p}}=e,m=G(i,t,u),g=G(a,r,d),f=G(s,n,l),S=G(c,o,p),h=d.filter((({deleteSharingDataItems:e})=>e)).reduce(((e,{id:t})=>{const r=a.find((e=>e.groupId===t));if(!r)return e;const n=(r.items||[]).map((({itemId:e})=>e));return[...e,...n]}),[]),y=m.filter((e=>!h.includes(e.itemId)));return{...e,sharingData:{items:y,itemGroups:g,userGroups:f,collections:S}}}function G(e,t,r){return r.reduce(((t,r)=>function(e,t,r){switch(r.type){case T.Delete:return function(e,{id:t}){return e.filter((e=>x(e)!==t))}(t,r);case T.Create:return function(e,t,{id:r}){const n=e.find((e=>x(e)===r));return n?t.concat(n):t}(e,t,r);case T.Update:return function(e,t,{id:r}){const n=e.find((e=>x(e)===r));return n?t.map((e=>x(e)===r?n:e)):t}(e,t,r)}return(0,f.assertUnreachable)(r.type)}(e,t,r)),t)}function x(e){return"itemId"in e?e.itemId:function(e){return"groupId"in e}(e)?e.groupId:function(e){return"uuid"in e}(e)?e.uuid:void 0}async function $(e,t,r){try{if(r){const{sharingData:{collections:n,userGroups:o}}=e;if(n){const e=n.filter((e=>{const r=(e?.users??[]).some((e=>e.login===t&&"accepted"===e.status)),n=e.userGroups.map((e=>e.uuid)),i=o.filter((e=>n.includes(e.groupId))).find((e=>(e?.users??[]).find((e=>e.userId===t)))),a=(i?.users??[]).some((e=>e.userId===t&&"accepted"===e.status));return r||a})),{commands:i}=r.createClients().sharingCollections;i.updateSharedCollections({collections:e})}}}catch(e){const t=new Error(`[SharingSync] - update shared collections failed: ${e}`);(0,g.sendExceptionLog)({error:t,code:E.ExceptionCriticality.WARNING})}return e}async function j(e,t){const{sharingData:r}=e;return(0,p.updateSharingData)(t,r),e}async function K(e,t,r){const{sharingSync:n}=t.getState().userSession;return r.getInstance().storeSharingSync(n),e}async function V(e,t,r){const n=r.getInstance(),o=await n.doesSharingSyncExist();let i=null;const a=()=>{i={pendingUserGroups:[],pendingItemGroups:[]},n.storeSharingSync(i)};o||a();try{i=await n.getSharingSync()}catch(e){a()}const{pendingItemGroups:s,pendingUserGroups:u}=i,d=(0,c.setAllPendingAction)(s,u);return t.dispatch(d),e}t.syncSharing=async function({storeService:e,wsService:t,localStorageService:r,eventLoggerService:s,applicationModulesAccess:u},l,f,h){try{const m=(0,S.ukiSelector)(e.getState()),y=e.getUserLogin(),{privateKey:v,publicKey:A}=e.getUserSession().keyPair,{credentials:T,notes:C}=e.getPersonalData(),O=e.getSharingData(),{queries:M}=u.createClients().sharingCollections,L=await(0,o.firstValueFrom)(M.getSharedCollections());O.collections=(0,a.isSuccess)(L)&&Array.isArray(L.data)?L.data:[];const G=b(T,"PersonalData.credentials",i.isCredential),x=b(C,"PersonalData.notes",i.isNote),H=[...G,...x],W=H.map((e=>e.Id)),z=H.reduce(((e,t)=>(e[t.Id]=t,e)),{}),q={itemKeys:{},loadedElements:{collections:[],items:[],itemGroups:[],userGroups:[]},sharing2Summary:l,sharingData:O,operations:{collections:[],items:[],itemGroups:[],userGroups:[]},personalDataItemIds:W,pendingUserGroups:[],pendingItemGroups:[],invalidItemGroups:[],autoRevokedUsers:[]},Y=await Promise.resolve(q).then(_("sanitizeData",I)).then(_("setOperations",w)).then(_("setGetSharingParams",P)).then(_("getSharing",(e=>N(e,t,y,m)))).then(_("filterOutInvalidOperations",(e=>R(e,v,A,y,f)))).then(_("revokeUsersFromInvalidItemGroups",(r=>U(e,u,t,r,v,A,y,h)))).then(_("setMissingItemKeys",(e=>k(e,v,y)))).then(_("tagConfirmableItemOperation",(e=>D(e,y)))).then(_("setPendingItemGroupsList",(e=>async function(e,t,r,o){const{loadedElements:{itemGroups:i,items:a},sharingData:{itemGroups:s,items:c},itemKeys:u}=e,l=(0,n.uniqBy)((e=>e.groupId),i.concat(s)),m=(0,n.uniqBy)((e=>e.itemId),a.concat(c)),g=l.reduce(((e,n)=>{const i=(0,d.getItemGroupPendingUserMember)(n,t);if(!i)return e;const a=async function(e,t,r,n,o,i){const{permission:a,referrer:s,groupKey:c}=t,u=(e.items||[]).map((async t=>{try{const{itemId:u}=t,l=o[u]||await(0,d.getDecipheredItemKey)(c,t.itemKey,r);if(!l)return null;const m=n.find((e=>e.itemId===u));return m?await(0,p.getPendingItemGroup)(m,l,e.groupId,s,a,i):null}catch(e){return null}}));return(await Promise.all(u)).filter(Boolean)}(n,i,r,m,u,o);return[a,...e]}),[]),f=(0,n.flatten)(await Promise.all(g));return{...e,pendingItemGroups:f}}(e,y,v,z)))).then(_("runOperationsEffects",(r=>F(r,{storeService:e,wsService:t,eventLoggerService:s,applicationModulesAccess:u})))).then(_("applyOperationsToSharingData",B)).then(_("setPendingUserGroupsList",(t=>async function(e,t,r){const{sharingData:{userGroups:n}}=e,o=t.getSpaceData().spaces.find((e=>"accepted"===e.details.status));if(!o)return{...e,pendingUserGroups:[]};const i=String(o.teamId),a=n.reduce(((e,t)=>{if(String(t.teamId)!==i)return e;const n=(t.users||[]).find((e=>e.userId===r&&"pending"===e.status));if(!n)return e;const{groupId:o,name:a}=t,{referrer:s,permission:c}=n;return[{groupId:o,name:a,referrer:s,permission:c,seen:!1},...e]}),[]);return{...e,pendingUserGroups:a}}(t,e,y)))).then(_("setPendingCollectionsList",(e=>async function(e,t){try{if(t){const{sharingData:{collections:r}}=e,{commands:n}=t.createClients().sharingInvites;n.updatePendingCollections(r)}}catch(e){const t=new Error(`Set pending collections - sharing sync: ${e}`);(0,g.sendExceptionLog)({error:t,code:E.ExceptionCriticality.WARNING})}return e}(e,u)))).then(_("initSharingSyncFromStorage",(t=>V(t,e,r)))).then(_("updateStoreSharingSync",(t=>async function(e,t){const{pendingItemGroups:r,pendingUserGroups:n}=e,o=(0,c.updateAllPendingAction)(r,n);return t.dispatch(o),e}(t,e)))).then(_("putSharingSyncBackInStorage",(t=>K(t,e,r)))).then(_("updateSharingDataFromSync",(t=>j(t,e)))).then(_("updateSharedCollectionsInModule",(e=>$(e,y,u))));return Y.sharingData}catch(t){const r=new Error(`[SharingSync] - syncSharing failed: ${t}`);return A&&m.default.error(r),(0,g.sendExceptionLog)({error:r}),e.getSharingData()}},function(e){e[e.Create=0]="Create",e[e.Update=1]="Update",e[e.Delete=2]="Delete"}(T=t.OperationType||(t.OperationType={})),t.sanitizeData=I,t.setOperations=w,t.tagConfirmableOperations=D,t.setGetSharingParams=P,t.getSharing=N,t.filterOutInvalidOperations=R,t.asyncFilterItemGroups=M,t.shouldRunAutoRevoke=L,t.revokeUsersFromInvalidItemGroups=U,t.setMissingItemKeys=k,t.runOperationsEffects=F,t.applyOperationsToSharingData=B,t.updateSharedCollectionsInModule=$,t.updateSharingDataFromSync=j,t.putSharingSyncBackInStorage=K,t.initSharingSyncFromStorage=V,t.getEmptyOperations=function(){return{collections:[],items:[],itemGroups:[],userGroups:[]}},t.getEmptyGetSharingParams=function(){return{collectionIds:[],itemIds:[],itemGroupIds:[],userGroupIds:[]}},t.getEmptySharingData=function(){return{collections:[],items:[],itemGroups:[],userGroups:[]}},t.getEmptySharing2Summary=function(){return{collections:[],items:[],itemGroups:[],userGroups:[]}}},3735:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.handlePendingItemGroupsResponse=t.handlePendingUserGroupsResponse=t.sendPendingExceptionLog=t.updateSharingPermission=t.revokeItemGroupMember=t.isUserItemGroupAdmin=t.shareUnsharedItem=t.shareAlreadySharedItem=void 0;const n=r(16516),o=r(53576),i=r(36884),a=r(70206),s=r(10294),c=r(63698),u=r(52931),d=r(50141),l=r(78320),p=r(36513),m=r(36513),g=r(70252),f=r(89016),S=r(58107),h=r(82366),y=r(17825),v=r(56915),E=r(72678),A=r(84511),{Accept:_,Refuse:T}=o.SharingResponseStatus,I=/[<>]/g,b=e=>e.trim().toLowerCase().replace(I,"");function w(e,t,r){const n=`${e.toLowerCase()}Pending${t}`,o=new Error(`[Sharing] - ${n}: ${r}`);(0,g.sendExceptionLog)({error:o})}t.shareAlreadySharedItem=async function(e,t,r,n,a,u){try{const l=t.getUserLogin(),m=t.getState(),g=(0,v.ukiSelector)(m),{privateKey:f}=t.getUserSession().keyPair,{collections:y,userGroups:E}=t.getSharingData(),A=E.filter(Boolean),{groupId:_,revision:T}=n,{credentials:I,notes:w}=t.getPersonalData(),C=[...I,...w],D=await(0,p.makeCryptoService)(),{makeInviteItemGroupMembers:O,makeUserGroupInvite:P,makeUserUpload:N}=(0,i.makeItemGroupService)(r,D),{findUsersByAliases:R}=(0,d.makeWSUserAlias)(),{makeItemForEmailing:M}=(0,s.makeItemService)(),{inviteItemGroupMembers:L}=(0,c.makeItemGroupWS)(),U=await(0,S.getItemGroupKey)(n,A,f,l,y);if(!U)throw new Error("Couldn't get itemGroupKey, aborting.");const k=u.filter(o.isUserRecipient).map((({alias:e})=>b(e))),F=JSON.stringify(k),B=await R({login:l,uki:g,aliases:F}),G=k.map((e=>N(e,B[e],_,a,U))),x=await Promise.all(G),$=(n.items||[]).map((({itemId:e})=>e)),j=C.filter((e=>$.includes(e.Id))),K=j.map(M),V=u.filter(o.isGroupRecipient).map((e=>e.groupId)),H=A.filter((({groupId:e})=>V.includes(e))).map((e=>P(e,a,U,f,l,_))),W=await Promise.all(H),z=await(0,h.createAuditLogDetails)(e,m,j[0]),q=O(_,T,x,W,K,z),Y=await L(l,g,q,z);if(Y&&Y.itemGroups&&1===Y.itemGroups.length){const{publicKey:e}=t.getUserSession().keyPair;await(0,h.validateItemGroupResponse)("[SharingUserActionsService] - shareAlreadySharedItem",D,Y,e,f,U,l,x,A)}}catch(e){throw e.message=`[SharingUserActionsService] - shareAlreadySharedItem: ${e.message}`,e}},t.shareUnsharedItem=async function(e,t,r,n,a,u){try{const g=t.getUserLogin(),f=t.getState(),S=(0,v.ukiSelector)(f),{privateKey:y,publicKey:E}=t.getUserSession().keyPair,{userGroups:A}=t.getSharingData(),_=await(0,p.makeCryptoService)(),{makeCreateItemGroupEvent:T,makeUserGroupInvite:I,makeUserUpload:w}=(0,i.makeItemGroupService)(r,_),{makeItemUpload:C,makeItemForEmailing:D}=(0,s.makeItemService)(),{createItemGroup:O}=(0,c.makeItemGroupWS)(),{findUsersByAliases:P}=(0,d.makeWSUserAlias)(),N=(0,l.generateItemUuid)(),R=await _.symmetricEncryption.generateNewAESKey(),M=u.filter(o.isUserRecipient).map((({alias:e})=>b(e))),L=JSON.stringify(M),U=await P({login:g,uki:S,aliases:L}),k=w(g,{login:g,publicKey:E,privateKey:y},N,"admin",R),F=M.map((e=>w(e,U[e],N,a,R))).concat(k),B=await Promise.all(F),G=u.filter(o.isGroupRecipient).map((e=>e.groupId)),x=A.filter((({groupId:e})=>G.includes(e))).map((e=>I(e,a,R,y,g,N))),$=await Promise.all(x),{Id:j}=n,K=(0,m.makeSymmetricEncryption)(),V=await _.symmetricEncryption.generateNewAESKey(),H=await _.symmetricEncryption.encryptAES256(R,V),W=await K.encryptSharingItem(V,n),z=await C(j,H,W),q=D(n),Y=await(0,h.createAuditLogDetails)(e,f,n),Z=T(N,B,$,[z],[q],Y),Q=await O(g,S,Z);Q&&Q.itemGroups&&1===Q.itemGroups.length&&await(0,h.validateItemGroupResponse)("[SharingUserActionsService] - shareUnsharedItem",_,Q,E,y,R,g,B,A)}catch(e){throw e.message=`[SharingUserActionsService] - shareUnsharedItem: ${e.message}`,e}},t.isUserItemGroupAdmin=function(e,t,r){const n=(e.users||[]).some((({userId:e,permission:t})=>e===r&&"admin"===t)),o=(t||[]).filter((e=>(e.users||[]).map((({userId:e})=>e)).includes(r))).map((({groupId:e})=>e)),i=(e.groups||[]).filter((({groupId:e})=>o.includes(e))).some((({permission:e})=>"admin"===e));return n||i},t.revokeItemGroupMember=async function(e,t,r,n,o,a="manual"){const s=await(0,p.makeCryptoService)(),{groupId:c,revision:u}=n,d=t.getState(),l=(0,v.ukiSelector)(d),m=t.getUserLogin(),{makeRevokeItemGroupMembers:g}=(0,i.makeItemGroupService)(r,s),f="user"===o.type?[o.alias]:[],S="userGroup"===o.type?[o.groupId]:[],{credentials:y,notes:A}=(0,E.personalDataSelector)(d),_=[...y,...A],T=(n.items||[]).map((({itemId:e})=>e)),I=_.filter((e=>T.includes(e.Id))),b=g(c,u,f,S,await(0,h.createAuditLogDetails)(e,d,I[0]),a);await r.itemGroup.revokeItemGroupMembers(m,l,b)},t.updateSharingPermission=async function(e,t,r,n,o){const a=e.getUserLogin(),s=(0,v.ukiSelector)(e.getState()),c=await(0,p.makeCryptoService)(),{makeUserGroupUpdate:u,makeUserUpdate:d,makeUpdateItemGroupMembers:l}=(0,i.makeItemGroupService)(t,c),{groupId:m,revision:g}=r,f=l(m,g,"user"===n.type?[await d(n.alias,o)]:[],"userGroup"===n.type?[await u(n.groupId,o)]:[]);await t.itemGroup.updateItemGroupMembers(a,s,f)},t.sendPendingExceptionLog=w,t.handlePendingUserGroupsResponse=async function(e,t,r){const i=(0,p.makeCryptoService)(),s=(0,f.makeWSService)(),{makeAcceptUserGroupEvent:c,makeRefuseUserGroupEvent:d}=(0,a.makeUserGroupService)(s,i),{accept:l,refuse:m}=(0,u.makeUserGroupWS)(),g=(0,v.ukiSelector)(e.getState()),S=e.getUserLogin(),{keyPair:{privateKey:h}}=e.getUserSession(),{userGroups:E}=e.getSharingData(),A=t.map((async function(e){try{const t=E.find((t=>t.groupId===e));if(!t)throw new Error(`could not find userGroup to ${o.SharingResponseStatus[r]} in sharingData`);switch(r){case _:await async function(e){const t=await c({login:S,uki:g,privateKey:h},e);return await l(S,g,t)}(t);break;case T:await async function(e){const{revision:t}=e,r=await d(e.groupId,t);return await m(S,g,r)}(t);break;default:(0,y.assertUnreachable)(r)}return{userGroupId:e,success:!0}}catch(t){return{userGroupId:e,success:!1,error:t}}})),I=await Promise.all(A),[b,C]=(0,n.partition)((({success:e})=>Boolean(e)),I);return C.forEach((({error:e})=>w(o.SharingResponseStatus[r],"UserGroup",e))),{successes:b.map((e=>e.userGroupId)),failures:C.map((e=>e.userGroupId))}},t.handlePendingItemGroupsResponse=async function(e,t,r,a){const s=(0,p.makeCryptoService)(),u=(0,f.makeWSService)(),{makeAcceptItemGroupEvent:d,makeRefuseItemGroupEvent:l}=(0,i.makeItemGroupService)(u,s),{acceptItemGroup:m,refuseItemGroup:g}=(0,c.makeItemGroupWS)(),E=t.getState(),I=(0,v.ukiSelector)(E),b=(0,A.pendingItemGroupsSharedItemContentsSelector)(E),C=t.getUserLogin(),{keyPair:{privateKey:D}}=t.getUserSession(),{collections:O,itemGroups:P,userGroups:N}=t.getSharingData(),R=r.map((({itemGroupId:t,itemsForEmailing:r})=>async function(t,r){try{const n=P.find((e=>e.groupId===t));if(!n)throw new Error(`could not find itemGroup to ${o.SharingResponseStatus[a]} in sharingData`);const i=b.find((e=>e.Id===n.items[0].itemId)),c=await(0,h.createAuditLogDetails)(e,E,i);switch(a){case _:await async function(e,t,r){const{groupId:n,revision:o}=e,i=await(0,S.getItemGroupKey)(e,N,D,C,O),a=await(0,h.generateAcceptSignature)(s,D,n,i),c=d(a,n,o,t,r);return await m(C,I,c)}(n,r,c);break;case T:await async function(e,t,r){const{groupId:n,revision:o}=e,i=l(n,o,t,r);return await g(C,I,i)}(n,r,c);break;default:(0,y.assertUnreachable)(a)}return{itemGroupId:t,success:!0}}catch(e){return{itemGroupId:t,success:!1,error:e}}}(t,r))),M=await Promise.all(R),[L,U]=(0,n.partition)((({success:e})=>Boolean(e)),M);return U.forEach((({error:e})=>w(o.SharingResponseStatus[a],"ItemGroup",e))),{successes:L.map((e=>e.itemGroupId)),failures:U.map((e=>e.itemGroupId))}}},47683:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isCollectionValid=t.isUserGroupValid=t.areItemGroupItemKeysValid=t.isItemGroupCollectionProposeSignatureValid=t.isItemGroupGroupMemberProposeSignatureValid=t.areItemGroupCollectionMembersProposeSignaturesValid=t.areItemGroupGroupMembersProposeSignaturesValid=t.isItemGroupUserProposeSignatureValid=t.areItemGroupUsersProposeSignaturesValid=t.isItemGroupCollectionMemberValid=t.isItemGroupUserGroupMemberValid=t.isItemGroupUserValid=t.getDecryptedItemGroupKey=t.validateItemGroup=void 0;const n=r(92233),o=r(36513),i=r(95623),a=r(58107),s=r(93513),c=!1;async function u(e,t,r,n){try{const{status:i,acceptSignature:s,groupKey:c}=t;if("accepted"!==i)return!0;const u=await(0,o.makeCryptoService)().asymmetricEncryption.decrypt(r,c);return await(0,a.isGroupSignatureValid)(e,s,u,n)}catch(e){return c&&i.default.log(`isGroupSignatureValid error: ${e}`),!1}}async function d(e,t,r,n,s){try{const{status:i,acceptSignature:c,groupKey:u,groupId:d}=t;if("accepted"!==i)return!0;const l=(r||[]).find((e=>e.groupId===d));if(!l)return!1;const{publicKey:p}=l,m=await(0,a.getUserGroupPrivateKey)(l,n,s);if(!m)return!1;const g=await(0,o.makeCryptoService)().asymmetricEncryption.decrypt(m,u);return await(0,a.isGroupSignatureValid)(e,c,g,p)}catch(e){return c&&i.default.log(`isItemGroupUserGroupMemberValid error: ${e}`),!1}}async function l(e,t,r,n,o){try{const i=(r||[]).find((e=>e.uuid===t.member.uuid));if(!i)return!1;let s=null;const{status:c,acceptSignature:u}=t.member,{publicKey:d}=i;if("accepted"!==c)return!0;if(t.userGroup){if(!i.userGroups.find((e=>e.uuid===t.userGroup.groupId)))return null;s=await(0,a.getDecryptedPrivateCollectionKeyFromUserGroup)(i,t.userGroup,n,o)}else s=await(0,a.getCollectionPrivateKeyForUser)(i,n,o);if(!s)return!1;const l=await(0,a.decryptGroupKey)(t.member.itemGroupKey,s);return!!l&&await(0,a.isGroupSignatureValid)(e,u,l,d)}catch(e){return c&&i.default.log(`isItemGroupCollectionMemberValid error: ${e}`),!1}}async function p(e,t){const r=(e||[]).filter((({status:e})=>["pending","accepted"].includes(e))).map((e=>m(e,t)));return(await Promise.all(r)).every(Boolean)}async function m(e,t){try{return await(0,o.makeCryptoService)().symmetricEncryption.verifyHmacSHA256(t,e.proposeSignature,s.encode(e.userId))}catch(e){return c&&i.default.warn(`[SharingValidationService] - isItemGroupUserProposeSignatureValid: ${e}`),!1}}async function g(e,t){const r=(e||[]).filter((({status:e})=>["pending","accepted"].includes(e))).map((e=>S(e,t)));return(await Promise.all(r)).every(Boolean)}async function f(e,t){const r=(e||[]).filter((({status:e})=>["pending","accepted"].includes(e))).map((e=>h(e,t)));return(await Promise.all(r)).every(Boolean)}async function S(e,t){try{return await(0,o.makeCryptoService)().symmetricEncryption.verifyHmacSHA256(t,e.proposeSignature,s.encode(e.groupId))}catch{return!1}}async function h(e,t){try{return await(0,o.makeCryptoService)().symmetricEncryption.verifyHmacSHA256(t,e.proposeSignature,s.encode(e.uuid))}catch{return!1}}async function y(e,t){const r=(e||[]).map((e=>async function(e,t){try{const{itemKey:r}=e;return await(0,a.decryptItemKey)(r,t)}catch{return!1}}(e,t))),n=await Promise.all(r);return!!n.every(Boolean)&&n.reduce(((t,r,n)=>({...t,[e[n].itemId]:r})),{})}t.validateItemGroup=async function(e,t,r,o,s,m){const S=e.groupId,h=e,v=(0,a.findMyItemGroupUser)(e,s),E=(0,a.findMyItemGroupUserGroupMember)(e,t,s),A=(0,a.findMyItemGroupCollectionMemberViaUserGroup)(h,t,s,m),_=(0,a.findMyItemGroupCollectionMemberAsUser)(h,s,m);if(!(v||E||_||A))return{isValid:!1,error:n.ErrorName.ItemGroupNoAccess};const T=await(0,a.getItemGroupKey)(e,t,r,s,m);if(c&&i.default.log("ITEM_GROUP_KEY",!!T),!T)return{isValid:!1,error:n.ErrorName.ItemGroupInvalidKey};const I=!v||await u(S,v,r,o);if(c&&i.default.log("ITEM_GROUP_USER_VALID",I),!I)return{isValid:!1,error:n.ErrorName.ItemGroupInvalidUserAcceptSignature};const b=!E||await d(S,E,t,r,s),w=!A||await l(S,A,m,r,s),C=!_||await l(S,{member:_},m,r,s);if(c&&(i.default.log("ITEM_GROUP_USER_GROUP_VALID",b),i.default.log("ITEM_GROUP_COLLECTION_VALID",w),i.default.log("ITEM_GROUP_COLLECTION_UER_VALID",C)),!b||!w||!C)return{isValid:!1,error:n.ErrorName.ItemGroupInvalidGroupAcceptSignature};const D=await p(e.users,T);if(c&&i.default.log("USERS_PROPOSE_SIGNATURES_VALID",D),!D)return{isValid:!1,error:n.ErrorName.ItemGroupInvalidUserProposeSignature};const O=await g(e.groups,T),P=await f(h.collections,T);if(c&&(i.default.log("GROUP_MEMBERS_PROPOSE_SIGNATURES_VALID",O),i.default.log("COLLECTION_MEMBERS_PROPOSE_SIGNATURES_VALID",P)),!O||!P)return{isValid:!1,error:n.ErrorName.ItemGroupInvalidGroupProposeSignature};const N=await y(e.items||[],T);return c&&i.default.log("ITEM_GROUP_ITEM_KEYS",!!N),N?{isValid:!0,itemKeys:N}:{isValid:!1,error:n.ErrorName.ItemGroupInvalidKey}},t.getDecryptedItemGroupKey=async function(e,t,r,n){const o=(0,a.findMyItemGroupUser)(e,n),i=(0,a.findMyItemGroupUserGroupMember)(e,t,n);if(!o&&!i)return null;return(o?await(0,a.getDecryptedItemGroupKeyFromUser)(o,r):await(0,a.getDecryptedItemGroupKeyFromUserGroupMember)(i,t,r,n))||null},t.isItemGroupUserValid=u,t.isItemGroupUserGroupMemberValid=d,t.isItemGroupCollectionMemberValid=l,t.areItemGroupUsersProposeSignaturesValid=p,t.isItemGroupUserProposeSignatureValid=m,t.areItemGroupGroupMembersProposeSignaturesValid=g,t.areItemGroupCollectionMembersProposeSignaturesValid=f,t.isItemGroupGroupMemberProposeSignatureValid=S,t.isItemGroupCollectionProposeSignatureValid=h,t.areItemGroupItemKeysValid=y,t.isUserGroupValid=async function(e,t,r,n){const{groupId:o}=e,i=(e.users||[]).find((e=>e.userId===n));if(!i)return null;const s=await(0,a.getDecryptedUserGroupKey)(i.groupKey,t);return!(!s||i.acceptSignature&&!await(0,a.isGroupSignatureValid)(o,i.acceptSignature,s,r)||!await(0,a.areUserGroupUsersProposeSignaturesValid)(e.users,s))},t.isCollectionValid=async function(e,t,r,n,o){const{uuid:i}=e,s=(e.users||[]).find((e=>e.login===n));let c=s?.collectionKey,u=s?.acceptSignature,d=t,l=r;if(!s){const r=e.userGroups.map((e=>e.uuid)),i=o.filter((e=>r.includes(e.groupId))).find((e=>e.users.find((e=>e.userId===n)))),s=e.userGroups.find((e=>e.uuid===i.groupId));if(!s)return!1;const p=await(0,a.getUserGroupPrivateKey)(i,t,n);c=s.collectionKey,u=s.acceptSignature,d=p,l=i.publicKey}const p=await(0,a.getDecryptedUserGroupKey)(c,d);return!(!p||u&&!await(0,a.isGroupSignatureValid)(i,u,p,l)||!await(0,a.areCollectionUsersProposeSignaturesValid)(e,p))}},70206:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makeUserGroupService=t.checkUsersPublicKey=t.ConvertUserGroupMemberToUserUpdate=t.ConvertUserGroupMemberToUserUpdateWithInvite=t.ConvertUserGroupMemberToUserUpload=t.createUserUploadEvent=t.makeUserGroupAdminItem=t.makeGroupKeyItem=t.decryptGroupKey=t.UPDATE_USER_GROUP_USERS=t.REVOKE_USER_GROUP_USERS=t.INVITE_USER_GROUP_USERS=t.REFUSE_USER_GROUP=t.ACCEPT_USER_GROUP=t.RENAME_USER_GROUP=t.DELETE_USER_GROUP=t.CREATE_TEAM_ADMINS_USER_GROUP=t.CREATE_USER_GROUP=t.SHARING_VERSION=void 0;const n=r(93513),o=r(78320),i=r(16038),a=r(44197),s=r(43927),c=r(82366),u=r(70252);function d(e,t,r,o){return e.asymmetricEncryption.sign(t,n.encode(r+"-accepted-"+o))}function l(e,t,r){if(!(0,i.isBase64Encoded)(r))throw new Error("INVALID_GROUP_KEY");return e.asymmetricEncryption.decrypt(t.privateKey,r)}async function p(e,t,r,o,i){const s=(0,a.getAdminDataFromTeamAdminData)(r,o),c=(0,a.getSpecialItemGroupFromAdminData)(s).revision,u=JSON.stringify(i),[d,l]=await Promise.all([e.symmetricEncryption.generateNewAESKey(),(0,a.getSpecialItemGroupKey)(e,t,s)]),[p,m]=await Promise.all([e.symmetricEncryption.encryptAES256(d,n.encode(u)),e.symmetricEncryption.encryptAES256(l,n.encode(d))]);return{itemId:i.itemId,itemKey:m,content:p,itemGroupRevision:c}}async function m(e,r,i,a,s){const[c,u]=await Promise.all([r.asymmetricEncryption.generateRsaKeyPair(),r.symmetricEncryption.generateNewAESKey()]),d=(0,o.generateItemUuid)(),l=await r.symmetricEncryption.encryptAES256(u,n.encode(c.privateKey));return{groupId:d,name:a.name,publicKey:c.publicKey,privateKey:l,sharingVersion:t.SHARING_VERSION,teamId:a.teamId,type:e,users:await Promise.all(s.map((e=>f(r,e,i,u,d))))}}async function g(e){return{itemId:(0,o.generateItemUuid)(),groupId:(0,o.generateItemUuid)(),groupKey:await e.symmetricEncryption.generateNewAESKey()}}async function f(e,t,r,n,o){const i=await h(e,t,n);return t.Login===r.login&&(i.acceptSignature=await d(e,r.privateKey,o,n)),i}async function S(e,r,n,o,i,a){const s=i.map((async t=>{try{return{success:!0,user:await f(e,t,r,a,n)}}catch(e){const t=new Error(`[UserGroupService] - makeBaseInviteMembersEvent: ${e}`);return(0,u.sendExceptionLog)({error:t}),{success:!1}}})),c=(await Promise.all(s)).filter((e=>e.success)).map((e=>e.user));return{groupId:n,revision:o,sharingVersion:t.SHARING_VERSION,type:t.INVITE_USER_GROUP_USERS,users:c}}async function h(e,t,r){const o=await v(t);if(!t.Login){const i=await(0,c.generateProposeSignature)(e,r,t.Alias);return await(0,c.validateProposeSignature)("[ItemGroupService] - ConvertUserGroupMemberToUserUpload (no login)",e,r,i,n.encode(t.Alias)),{...o,userId:t.Alias,alias:t.Alias,proposeSignatureUsingAlias:!0,proposeSignature:i}}const[i,a]=await Promise.all([e.asymmetricEncryption.encrypt(t.PublicKey,r),(0,c.generateProposeSignature)(e,r,t.Login)]);return await(0,c.validateProposeSignature)("[ItemGroupService] - ConvertUserGroupMemberToUserUpload",e,r,a,n.encode(t.Login)),{...o,alias:t.Alias,groupKey:i,proposeSignatureUsingAlias:!1,proposeSignature:a}}async function y(e,t,r){const o=await v(t),[i,a]=await Promise.all([e.asymmetricEncryption.encrypt(t.PublicKey,r),(0,c.generateProposeSignature)(e,r,t.Login)]);return await(0,c.validateProposeSignature)("[ItemGroupService] - ConvertUserGroupMemberToUserUpdateWithInvite",e,r,a,n.encode(t.Login)),{...o,groupKey:i,proposeSignature:a}}async function v(e){return{permission:e.Permission,userId:e.Login}}function E(e,t,r,n){return e(t,r,{type:"getSharing",sharingVersion:4,userGroupIds:n}).then((({userGroupErrors:e,userGroups:t})=>{if(e&&e.length)throw new Error(e[0].message);return t}))}function A({teamId:e}){if(!e)throw new Error("USER_GROUP_DELETED")}t.SHARING_VERSION=4,t.CREATE_USER_GROUP="createUserGroup",t.CREATE_TEAM_ADMINS_USER_GROUP="createTeamAdminsUserGroup",t.DELETE_USER_GROUP="deleteUserGroup",t.RENAME_USER_GROUP="renameUserGroup",t.ACCEPT_USER_GROUP="acceptUserGroup",t.REFUSE_USER_GROUP="refuseUserGroup",t.INVITE_USER_GROUP_USERS="inviteUserGroupUsers",t.REVOKE_USER_GROUP_USERS="revokeUserGroupUsers",t.UPDATE_USER_GROUP_USERS="updateUserGroupUsers",t.decryptGroupKey=l,t.makeGroupKeyItem=p,t.makeUserGroupAdminItem=g,t.createUserUploadEvent=f,t.ConvertUserGroupMemberToUserUpload=h,t.ConvertUserGroupMemberToUserUpdateWithInvite=y,t.ConvertUserGroupMemberToUserUpdate=v,t.checkUsersPublicKey=e=>{const t=Object.keys(e).filter((t=>!e[t].publicKey));return t.length>0?Promise.reject(new Error(JSON.stringify({message:"Users missing public Key: "+t,code:"MISSING_PUBLIC_KEY"}))):Promise.resolve(e)};const _=e=>{const t="ITEM_GROUP_UPDATE_CONFLICT";return"getAdditionalInfo"in e&&e.getAdditionalInfo().webServiceSubMessage===t||e.message.includes(t)},T=e=>{const t="Conflict";return!(!("getAdditionalInfo"in e)||!e.getAdditionalInfo().message.startsWith(t))||e.message.startsWith(t)};function I(e,t,r,n,o){return e(r,n,o).catch((i=>{if(_(i))return E(t,r,n,[o.groupId]).then((([t])=>{A(t);const{revision:i}=t;return e(r,n,{...o,revision:i})}));throw i}))}t.makeUserGroupService=function(e,r){return{makeUserGroupAdminItem:()=>g(r),makeCreateUserGroupEvent:(e,o,i,a)=>async function(e,r,o,i,a){const s=await e.asymmetricEncryption.generateRsaKeyPair(),{teamId:c,externalId:u,name:d}=i;return{groupId:a.groupId,name:d,publicKey:s.publicKey,privateKey:await e.symmetricEncryption.encryptAES256(a.groupKey,n.encode(s.privateKey)),sharingVersion:t.SHARING_VERSION,teamId:c,type:"createUserGroup",users:[],groupKeyItem:await p(e,r,o,c.toString(),a),externalId:u}}(r,e,o,i,a),makeCreateUserGroupEventWithMembers:(e,t,n)=>async function(e,t,r,n){return m("createUserGroup",e,t,r,n)}(r,e,t,n),makeCreateSpecialUserGroupEvent:(e,t,n)=>async function(e,t,r,n){return m("createTeamAdminsUserGroup",e,t,r,n)}(r,e,t,n),createUserGroup:({login:t,uki:r},n,o)=>function(e,t,r,n,o){return e.userGroup.create(t,r,o).catch((i=>{if(_(i))return(0,s.loadSpecialItemGroup)(e,t,r,n).then((n=>e.userGroup.create(t,r,{...o,groupKeyItem:{...o.groupKeyItem,itemGroupRevision:n.revision}})));throw i}))}(e,t,r,n,o),makeDeleteUserGroupEvent:(e,r,n,o)=>async function(e,r,n,o){const i={type:t.DELETE_USER_GROUP,sharingVersion:t.SHARING_VERSION,groupId:e,revision:r};return n&&o&&(i.groupKeyItem={itemId:n,itemGroupRevision:o}),i}(e,r,n,o),deleteUserGroup:({login:t,uki:r},n,o)=>function(e,t,r,n,o){return e.userGroup.delete(t,r,o).catch((i=>{if(_(i))return(0,s.loadSpecialItemGroup)(e,t,r,n).then((n=>e.userGroup.delete(t,r,{...o,groupKeyItem:{...o.groupKeyItem,itemGroupRevision:n.revision}})));if(T(i))return E(e.sharing.get,t,r,[o.groupId]).then((n=>{const[{revision:i,teamId:a}]=n;return a?e.userGroup.delete(t,r,{...o,revision:i}):{userGroups:n}}));throw i}))}(e,t,r,n,o),makeRenameUserGroupEvent:(e,r,n)=>async function(e,r,n){return{type:t.RENAME_USER_GROUP,sharingVersion:t.SHARING_VERSION,groupId:e,revision:r,name:n}}(e,r,n),renameUserGroup:({login:t,uki:r},n)=>function(e,t,r,n){const o=e.userGroup.rename;return o(t,r,n).catch((i=>{if(T(i))return E(e.sharing.get,t,r,[n.groupId]).then((e=>{A(e[0]);const[{name:i,revision:a}]=e;return i===n.name?{userGroups:e}:o(t,r,{...n,revision:a})}));throw i}))}(e,t,r,n),makeAcceptUserGroupEvent:(e,n)=>async function(e,r,n){const o=n.users.find((e=>e.userId===r.login)).groupKey,i=await l(e,r,o),a=await d(e,r.privateKey,n.groupId,i);return{type:t.ACCEPT_USER_GROUP,sharingVersion:4,revision:n.revision,groupId:n.groupId,acceptSignature:a}}(r,e,n),acceptUserGroup:({login:t,uki:r},n)=>I(e.userGroup.accept,e.sharing.get,t,r,n),makeRefuseUserGroupEvent:(e,r)=>async function(e,r){return{type:t.REFUSE_USER_GROUP,sharingVersion:4,revision:r,groupId:e}}(e,r),refuseUserGroup:({login:t,uki:r},n)=>I(e.userGroup.refuse,e.sharing.get,t,r,n),makeInviteMembersEventAsAdmin:(e,t,n,o)=>function(e,t,r,n,o){return S(e,n,t.groupId,r,o,t.groupKey)}(r,e,t,n,o),makeInviteMembersEvent:(e,t,n,o,i)=>async function(e,t,r,n,o,i){const a=i.users.find((e=>e.userId===n.login)).groupKey,s=await l(e,n,a);return S(e,n,t,r,o,s)}(r,e,t,n,o,i),inviteUserGroupMembers:({login:t,uki:r},n)=>function(e,t,r,n){return e.userGroup.invite(t,r,n).catch((o=>{if(T(o))return E(e.sharing.get,t,r,[n.groupId]).then((o=>{A(o[0]);const[{revision:i,users:a}]=o,s=n.users.filter((e=>!a.find((t=>t.userId===e.userId&&"accepted"===t.status))));return s.length?e.userGroup.invite(t,r,{...n,revision:i,users:s}):{userGroups:o}}));throw o}))}(e,t,r,n),makeRevokeMembersEvent:(e,r,n)=>async function(e,r,n){return{type:t.REVOKE_USER_GROUP_USERS,sharingVersion:t.SHARING_VERSION,revision:r,groupId:e,users:n}}(e,r,n),revokeUserGroupMembers:({login:t,uki:r},n)=>function(e,t,r,n){return e.userGroup.revoke(t,r,n).catch((o=>{if(T(o))return E(e.sharing.get,t,r,[n.groupId]).then((o=>{A(o[0]);const[{revision:i,users:a}]=o,s=n.users.filter((e=>a.find((t=>t.userId===e&&"accepted"===t.status))));return s.length?e.userGroup.revoke(t,r,{...n,revision:i,users:s}):{userGroups:o}}));throw o}))}(e,t,r,n),makeUpdateMembersEvent:(e,r,n)=>async function(e,r,n){return{type:t.UPDATE_USER_GROUP_USERS,sharingVersion:t.SHARING_VERSION,revision:r,groupId:e,users:await Promise.all(n.map((e=>v(e))))}}(e,r,n),makeUpdateMembersWithInviteEvent:(e,n,o,i)=>async function(e,r,n,o,i){return{type:t.UPDATE_USER_GROUP_USERS,sharingVersion:t.SHARING_VERSION,revision:o,groupId:r,users:await Promise.all(i.map((t=>y(e,t,n))))}}(r,e,n,o,i),updateUserGroupMembers:({login:t,uki:r},n)=>I(e.userGroup.update,e.sharing.get,t,r,n),findExistingUsersByAliases:r=>e.userAlias.findUsersByAliases(r).then(t.checkUsersPublicKey),findUsersByAliases:t=>e.userAlias.findUsersByAliases(t),isCurrentUserProposeSignatureValid:(e,t)=>async function(e,t,r){const n=r.users.find((e=>e.userId===t.login)),o=await l(e,t,n.groupKey);return(0,c.isProposeSignatureValid)(e,n.proposeSignature,n.userId,o)}(r,e,t)}}},37275:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getSharingDataWithCollections=t.getSharedItemGroupsById=t.toCollectionModel=t.toVaultItemModel=t.filterUndefinedVaultItems=void 0,t.filterUndefinedVaultItems=e=>void 0!==e.id,t.toVaultItemModel=e=>({id:e.items?.[0].itemId}),t.toCollectionModel=e=>r=>({id:r.uuid,name:r.name,vaultItems:e.filter((e=>e.collections?.find((e=>e.uuid===r.uuid)))).map(t.toVaultItemModel).filter(t.filterUndefinedVaultItems)}),t.getSharedItemGroupsById=e=>e&&e.length>0?e.reduce(((e,t)=>({...e,[t.groupId]:t})),{}):{},t.getSharingDataWithCollections=e=>({collections:e.collections??[],itemGroups:e.itemGroups})},97124:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makeSharingService=void 0;const n=r(36513),o=r(70206),i=r(36884),a=r(10294);t.makeSharingService=function(e,t){const r=(0,n.makeCryptoService)();return{ws:t,store:e,crypto:r,userGroup:(0,o.makeUserGroupService)(t,r),itemGroup:(0,i.makeItemGroupService)(t,r),item:(0,a.makeItemService)()}}},81197:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isShared=void 0;const n=r(16516),o=r(59890);t.isShared=(0,n.curry)(((e,t)=>(0,o.binaryContains)(e,t.Id)))},71646:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getItemGroupActiveUsers=t.findItemItemGroup=t.getItemUserIds=t.getItemUserGroupIds=t.findMyAcceptedItemGroups=t.findMyAcceptedItemGroupCollectionMembers=t.findMyAcceptedItemGroupUserGroupMembers=void 0;const n=r(58107);function o(e,t,r){const n=(t||[]).filter((e=>(e.users||[]).map((e=>e.userId)).includes(r))).map((e=>e.groupId));return(e.groups||[]).filter((e=>n.includes(e.groupId)&&"accepted"===e.status))}function i(e,t,r,o){const i=(0,n.findMyItemGroupCollectionMemberAsUser)(e,o,t),a=(0,n.findMyItemGroupCollectionMemberViaUserGroup)(e,r,o,t)?.member;return(e.collections||[]).filter((e=>{const t=i?.uuid===e.uuid,r=a?.uuid===e.uuid;return"accepted"===e.status&&(t||r)}))}function a(e,t){return t.find((t=>(t.items||[]).map((e=>e.itemId)).includes(e)))}function s(e){return(e.users||[]).filter(c)}t.findMyAcceptedItemGroupUserGroupMembers=o,t.findMyAcceptedItemGroupCollectionMembers=i,t.findMyAcceptedItemGroups=function(e,t,r,n){return e.filter((e=>{const a=e,s="items"===e.type,c=(e.users||[]).some((e=>e.userId===n&&"accepted"===e.status)),u=o(a,t,n).length>0,d=i(a,r,t,n).length>0;return s&&(c||u||d)}))},t.getItemUserGroupIds=function(e,t){const r=a(t,e);return(r?.groups??[]).filter((e=>"accepted"===e.status)).map((e=>e.groupId))},t.getItemUserIds=function(e,t){const r=a(t,e);return r?s(r).map((e=>e.userId)):[]},t.findItemItemGroup=a,t.getItemGroupActiveUsers=s;const c=e=>["accepted","pending"].includes(e.status)},89489:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getLimitedSharedItemIds=void 0;const n=r(37275);t.getLimitedSharedItemIds=(e,t,r,o)=>{const i=e.userGroups.filter((e=>e.users.some((e=>e.userId===o&&"accepted"===e.status)))),a=new Set(i.map((e=>e.groupId))),s=t??[],c=(0,n.getSharedItemGroupsById)(r),u=s.filter((e=>(e.users??[]).some((e=>e.login===o&&"accepted"===e.status))||(e.userGroups??[]).some((e=>a.has(e.uuid)&&"accepted"===e.status)))),d=new Set(u.map((e=>e.uuid)));return e.itemGroups.filter((e=>{const t=e.users?.some((e=>e.userId===o&&"admin"===e.permission&&"accepted"===e.status)),r=e.groups?.some((e=>a.has(e.groupId)&&"admin"===e.permission&&"accepted"===e.status)),n=c[e.groupId]?.collections?.some((e=>d.has(e.uuid)&&"admin"===e.permission&&"accepted"===e.status));return!(t||r||n)})).map((e=>(e.items||[]).map((e=>e.itemId)))).reduce(((e,t)=>e.concat(t)),[]).reduce(((e,t)=>({...e,[t]:!0})),{})}},78987:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sharingCapacity$=t.myAcceptedItemGroupUserMembers$=t.myAcceptedUserGroups$=t.hasNotifications$=t.pendingUserGroups$=t.pendingItemGroups$=t.allSharedItemIds$=t.userRecipients$=t.groupRecipients$=t.recipientsCount$=t.isShared$=void 0;const n=r(18948),o=r(3343),i=r(84511),a=r(80993),s=r(90021);t.isShared$=e=>{const t=(0,i.getIsSharedSelector)(e);return(0,n.pipe)((0,o.map)(t),(0,o.distinctUntilChanged)())},t.recipientsCount$=e=>{const t=(0,i.getRecipientsCountSelector)(e);return(0,n.pipe)((0,o.map)(t),(0,o.distinctUntilChanged)())},t.groupRecipients$=e=>{const t=(0,i.getGroupRecipientsSelector)(e);return(0,n.pipe)((0,o.map)(t),(0,o.distinctUntilChanged)())},t.userRecipients$=e=>{const t=(0,i.getUserRecipientsSelector)(e);return(0,n.pipe)((0,o.map)(t),(0,o.distinctUntilChanged)())},t.allSharedItemIds$=()=>{const e=a.sortedSharedItemIdsSelector;return(0,n.pipe)((0,o.map)(e),(0,o.distinctUntilChanged)())},t.pendingItemGroups$=()=>{const e=i.pendingItemGroupsSelector;return(0,n.pipe)((0,o.map)(e),(0,o.distinctUntilChanged)())},t.pendingUserGroups$=()=>{const e=i.pendingUserGroupsSelector;return(0,n.pipe)((0,o.map)(e),(0,o.distinctUntilChanged)())},t.hasNotifications$=()=>{const e=i.hasNotificationsSelector;return(0,n.pipe)((0,o.map)(e),(0,o.distinctUntilChanged)())},t.myAcceptedUserGroups$=()=>{const e=i.myAcceptedUserGroupsSelector;return(0,n.pipe)((0,o.map)(e),(0,o.distinctUntilChanged)())},t.myAcceptedItemGroupUserMembers$=()=>{const e=i.myAcceptedItemGroupUserMembersSelector;return(0,n.pipe)((0,o.map)(e),(0,o.distinctUntilChanged)())},t.sharingCapacity$=()=>{const e=s.sharingCapacitySelector;return(0,n.pipe)((0,o.map)(e),(0,o.distinctUntilChanged)())}},84511:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getUserRecipientsSelector=t.getGroupRecipientsSelector=t.getRecipientsCountSelector=t.getIsSharedSelector=t.hasNotificationsSelector=t.myAcceptedItemGroupUserMembersSelector=t.myAcceptedUserGroupsSelector=t.pendingUserGroupsSelector=t.pendingItemGroupsSharedItemContentsSelector=t.pendingItemGroupsSelector=t.itemItemGroupSelector=t.userRecipientsSelector=t.groupRecipientsSelector=t.recipientsCountSelector=t.isSharedSelector=void 0;const n=r(32034),o=r(58107),i=r(71646),a=r(6e3),s=r(52102);t.isSharedSelector=(e,t)=>{const{items:r}=(0,s.sharingDataSelector)(e);return r.some((e=>e.itemId===t))},t.recipientsCountSelector=(e,t)=>{const r=(0,s.sharingDataSelector)(e);return(0,o.getRecipientsCount)(r,t)},t.groupRecipientsSelector=(e,t)=>{const r=(0,s.sharingDataSelector)(e);return(0,o.getGroupRecipients)(r,t)},t.userRecipientsSelector=(e,t)=>{const r=(0,s.sharingDataSelector)(e);return(0,o.getUserRecipients)(r,t)},t.itemItemGroupSelector=(e,t)=>{const{itemGroups:r}=(0,s.sharingDataSelector)(e);return(0,i.findItemItemGroup)(t,r)},t.pendingItemGroupsSelector=e=>e.userSession.sharingSync.pendingItemGroups||[],t.pendingItemGroupsSharedItemContentsSelector=e=>e.userSession.sharingSync.pendingItemGroups?e.userSession.sharingSync.pendingItemGroups.reduce(((e,t)=>e.concat(t.items)),[]):[],t.pendingUserGroupsSelector=e=>e.userSession.sharingSync.pendingUserGroups||[],t.myAcceptedUserGroupsSelector=(0,n.createSelector)(a.loginStatusSelector,s.sharingDataSelector,(({login:e},{userGroups:t})=>(0,o.findMyAcceptedUserGroups)(t,e))),t.myAcceptedItemGroupUserMembersSelector=(0,n.createSelector)(a.loginStatusSelector,s.sharingDataSelector,(({login:e},{itemGroups:t})=>(0,o.findMyAcceptedItemGroupUserMembers)(t,e))),t.hasNotificationsSelector=(0,n.createSelector)(t.pendingItemGroupsSelector,t.pendingUserGroupsSelector,((e,t)=>[...e,...t].some((e=>!e.seen)))),t.getIsSharedSelector=e=>(0,n.createSelector)(s.sharingDataSelector,(({items:t})=>t.some((t=>t.itemId===e)))),t.getRecipientsCountSelector=e=>(0,n.createSelector)(s.sharingDataSelector,(t=>(0,o.getRecipientsCount)(t,e))),t.getGroupRecipientsSelector=e=>(0,n.createSelector)(s.sharingDataSelector,(t=>(0,o.getGroupRecipients)(t,e))),t.getUserRecipientsSelector=e=>(0,n.createSelector)(s.sharingDataSelector,(t=>(0,o.getUserRecipients)(t,e)))},89698:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.acceptedItemGroupsSelector=void 0;const n=r(32034),o=r(16593),i=r(71646),a=r(52102);t.acceptedItemGroupsSelector=(0,n.createSelector)(a.sharingDataSelector,o.userIdSelector,(({itemGroups:e,userGroups:t,collections:r},n)=>(0,i.findMyAcceptedItemGroups)(e,t,r,n)))},55721:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isAllowedToShareSelector=void 0;const n=r(32034),o=r(90021);t.isAllowedToShareSelector=(0,n.createSelector)(o.sharingCapacitySelector,(e=>"unlimited"===e.type||e.remains>0))},91210:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.limitedSharingItemsSelector=void 0;const n=r(32034),o=r(89489),i=r(16593),a=r(52102),s=r(31607);t.limitedSharingItemsSelector=(0,n.createSelector)(a.sharingDataSelector,s.sharedCollectionsSelector,s.sharedCollectionItemsSelector,i.userIdSelector,o.getLimitedSharedItemIds)},31607:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sharedCollectionsWithItemsSelector=t.sharedCollectionItemsSelector=t.sharedCollectionsSelector=void 0;const n=r(37275);t.sharedCollectionsSelector=e=>e.userSession.sharingData.collections,t.sharedCollectionItemsSelector=e=>e.userSession.sharingData.itemGroups,t.sharedCollectionsWithItemsSelector=e=>{const r=(0,t.sharedCollectionsSelector)(e);if(r?.length){const o=(0,t.sharedCollectionItemsSelector)(e);return r.map((0,n.toCollectionModel)(o))}return[]}},67231:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sharedCredentialsCountSelector=void 0;const n=r(32034),o=r(80993),i=r(51319),a=r(81197);t.sharedCredentialsCountSelector=(0,n.createSelector)(o.sortedSharedItemIdsSelector,i.credentialsSelector,((e,t)=>{const r=(0,a.isShared)(e);return t.filter(r).length}))},30150:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sharedItemsCountSelector=void 0;const n=r(32034),o=r(67231),i=r(41384);t.sharedItemsCountSelector=(0,n.createSelector)(o.sharedCredentialsCountSelector,i.sharedNotesCountSelector,((e,t)=>e+t))},41384:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sharedNotesCountSelector=void 0;const n=r(32034),o=r(80993),i=r(75705),a=r(81197);t.sharedNotesCountSelector=(0,n.createSelector)(o.sortedSharedItemIdsSelector,i.notesSelector,((e,t)=>{const r=(0,a.isShared)(e);return t.filter(r).length}))},90021:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sharingCapacitySelector=void 0;const n=r(32034),o=r(16593),i=r(46617),a=r(30150);t.sharingCapacitySelector=(0,n.createSelector)(a.sharedItemsCountSelector,o.premiumStatusSelector,i.getSharingCapacity)},52102:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sharingDataSelector=void 0,t.sharingDataSelector=e=>e.userSession.sharingData},80993:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sortedSharedItemIdsSelector=void 0;const n=r(32034),o=r(52102);t.sortedSharedItemIdsSelector=(0,n.createSelector)(o.sharingDataSelector,(({items:e})=>e.map((e=>e.itemId)).sort()))},46617:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getSharingCapacity=void 0,t.getSharingCapacity=(e,t)=>{const r=t?.capabilities?.sharingLimit?.info?.limit??1/0;return r===1/0?{type:"unlimited"}:{type:"limited",remains:Math.max(0,r-e)}}},82366:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createAuditLogDetails=t.validateItemGroupResponse=t.validateProposeSignature=t.isProposeSignatureValid=t.generateProposeSignature=t.isAcceptSignatureValid=t.generateAcceptSignature=void 0;const n=r(93513),o=r(53576),i=r(21178),a=r(70252),s=r(35587),c=r(32663),u=r(47683),d=r(58107),l=r(16593),p=r(88205);function m(e,t,r){return new Promise(((o,i)=>{e.symmetricEncryption.signHmacSHA256(t,n.encode(r)).then(o,i)}))}function g(e,t,r,n){return m(e,n,r).then((e=>t===e))}function f(e){return"validProposeSignature"in e}function S(e){const t=f(e)?e.validProposeSignature:"not-found",r=f(e)&&void 0!==e.matchProposeSignature?e.matchProposeSignature:"not-found";return`  Status:${e.status} Permission:${e.permission} ValidProposeSignature:${t} MatchesProposeSignature:${r}`}async function h(e,t,r,n){return await(0,s.asyncMap)(e,(async e=>{const o=t.find((t=>t.userId===e.userId));return{...e,validProposeSignature:await g(r,e.proposeSignature,e.userId,n),matchProposeSignature:o&&e?o.proposeSignature===e.proposeSignature:void 0}}))}t.generateAcceptSignature=function(e,t,r,o){return new Promise(((i,a)=>{e.asymmetricEncryption.sign(t,n.encode(r+"-accepted-"+o)).then(i,a)}))},t.isAcceptSignatureValid=function(e,t,r,n){return new Promise(((o,i)=>{e.asymmetricEncryption.verify(r,t,n).then(o,i)}))},t.generateProposeSignature=m,t.isProposeSignatureValid=g,t.validateProposeSignature=async function(e,t,r,n,o){if(!await t.symmetricEncryption.verifyHmacSHA256(r,n,o)){const t=new Error(`${e}: INVALID_PROPOSE_CREATION Failed to validate newly created propose signature`);throw(0,a.sendExceptionLog)({error:t}),t}},t.validateItemGroupResponse=async function(e,t,r,n,o,i,l,p,m,f=!1,y){try{const v=await(0,c.asyncFilter)(p,(async e=>!await g(t,e.proposeSignature,e.userId,i))),E=await(0,c.asyncFilter)(r.itemGroups,(async e=>!(await(0,u.validateItemGroup)(e,m,o,n,l,y)).isValid));if(f?v.length>0:E.length>0||v.length>0){const r=function(e,t,r){return[`${e}: INVALID_PROPOSE_IN_RESPONSE Invalid item group on share`,t.map((e=>`Invalid Uploaded User UsingAlias:${"alias"in e?!!e.proposeSignatureUsingAlias:"updating"} Permission:${e.permission}`)).join("\n"),r.map((e=>[`Invalid ItemGroup ID:${e.groupId} Revision:${e.revision} TeamID:${e.teamId} MatchItemGroupKey:${e.matchItemGroupKey}`,"Invalid ItemGroup Users:",e.users.map(S).join("\n")].join("\n"))).join("\n")].join("\n")}(e,v,await(0,s.asyncMap)(E,(async e=>({...e,users:await h(e.users,p,t,i),matchItemGroupKey:i===await(0,d.getItemGroupKey)(e,m,o,l,y)}))));await(0,a.sendExceptionLog)({error:new Error(r)})}}catch(e){e.message=`[validateItemGroupResponse]: ERROR_VALIDATING_PROPOSE_IN_RESPONSE Error validating item group response ${e.message}`,await(0,a.sendExceptionLog)({error:e})}},t.createAuditLogDetails=async function(e,t,r){const n=(0,l.activeSpacesSelector)(t)[0],a=(await(0,p.makeFeatureFlipsSelectors)(e).featureFlipsSelector()).audit_logs_sharing,s=(!!r?.SpaceId&&n?.info?.collectSensitiveDataAuditLogsEnabled)??!1;if(!a||!s)return;const c=((0,o.isCredential)(r)&&r?.Url?new i.ParsedURL(r?.Url).getHostname():"")||"";return{captureLog:s,domain:(0,o.isCredential)(r)?c:void 0,type:(0,o.isCredential)(r)?"AUTHENTIFIANT":"SECURENOTE"}}},83687:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getSharingStatusDetail=t.getSharingStatusItem=t.getNotShared=void 0;const n=r(16516),o=r(59890),i=r(58107),a=r(71646);t.getNotShared=()=>({isShared:!1});const s=(e,t)=>e[t]?"limited":"admin";t.getSharingStatusItem=(0,n.curry)(((e,r,n)=>(0,o.binaryContains)(e,n)?{isShared:!0,permission:s(r,n)}:(0,t.getNotShared)())),t.getSharingStatusDetail=(0,n.curry)(((e,r,n,o)=>{const{itemGroups:c,userGroups:u}=r,d=(0,a.findItemItemGroup)(o,c);if(!d)return(0,t.getNotShared)();const l=(0,i.getRecipientsCount)(r,o);return{groupSharing:(0,i.doesUserReceiveItemGroupViaGroup)(d,u,n),isShared:!0,lastAdmin:(0,i.isUserLastAdmin)(d,n),permission:s(e,o),recipientsCount:l}}))},63623:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.doesUserReceiveItemViaGroup=t.isUserLastAdminOnItem=t.setPendingElementsAsSeen=t.handleSharingResponse=t.handleUpdateSharingPermission=t.handleRevokeSharing=t.handleShareItemRequest=t.emptySessionResponse=t.getFreshUserGroups=t.updateUserGroupMembers=t.getSharedData=t.computeUserGroupMember=t.extractAliasesFromMembers=t.revokeUserGroupMembers=t.inviteUserGroupMembers=t.renameUserGroup=t.deleteUserGroup=t.deleteItemGroup=t.createSpecialItemGroup=t.createSpecialUserGroup=t.createUserGroup=t.buildSharingData=t.mergeSharingData=t.getCleanSharingData=t.getOutdatedSharingParams=void 0;const n=r(16516),o=r(53576),i=r(92233),a=r(84827),s=r(70252),c=r(95623),u=r(44197),d=r(3735),l=r(49551),p=r(19697),m=r(58107),g=r(71646),f=r(55721),S=r(27885);function h(e,{groupId:t,revision:r}){if(!e.privateKey)throw new Error("PRIVATE_KEY_MISSING");if(!t)throw new Error("GROUP_ID_MISSING");if(!r)throw new Error("GROUP_REVISION_MISSING")}function y(e,t){return{itemIds:e.items.filter((({id:e,timestamp:r})=>!t.items.find((t=>t.itemId===e&&t.timestamp>=r)))).map((e=>e.id)),itemGroupIds:e.itemGroups.filter((({id:e,revision:r})=>!t.itemGroups.find((t=>t.groupId===e&&t.revision===r)))).map((e=>e.id)),userGroupIds:e.userGroups.filter((({id:e,revision:r})=>!t.userGroups.find((t=>t.groupId===e&&t.revision===r)))).map((e=>e.id))}}function v(e,t){const{items:r,itemGroups:n,userGroups:o}=e;return{items:t.items.filter((e=>r.find((t=>t.id===e.itemId)))),itemGroups:t.itemGroups.filter((e=>n.find((t=>t.id===e.groupId)))),userGroups:t.userGroups.filter((e=>o.find((t=>t.id===e.groupId))))}}function E(e,t){const r=(e,t,r)=>{const n=t.filter((t=>!e.find((e=>r(e)===r(t)))));return e.map((e=>t.find((t=>r(t)===r(e)))||e)).concat(n)};return{items:r(e.items,t.items,n.prop("itemId")),itemGroups:r(e.itemGroups,t.itemGroups,n.prop("groupId")),userGroups:r(e.userGroups,t.userGroups,n.prop("groupId"))}}t.getOutdatedSharingParams=y,t.getCleanSharingData=v,t.mergeSharingData=E,t.buildSharingData=async function(e,t,r,o,i){const a=v(o,i),s=y(o,a),c=n.unnest(n.values(s));return n.compose(n.equals(0),n.length)(c)?a:E(a,await b(e,t,r,s))};const A=(e,t,r)=>{const n=(0,S.getNodePremiumStatusSpaceData)(r),o=n.spaces.find((t=>Number(t.teamId)===e));if(!o)throw new Error("TEAM_NOT_FOUND");if(!(0,S.hasSpecialUserGroupAccessInSpace)(o.teamId,n))throw new Error("USER_DOES_NOT_HAVE_SPECIAL_USER_GROUP_ACCESS_FOR_TEAM");if(!t.privateKey)throw new Error("PRIVATE_KEY_MISSING")};function _(e,t,r){return(0,s.sendExceptionLog)({error:t}),c.Debugger.log(e,t),Promise.resolve({userGroups:[],error:{message:t.message,action:r}})}function T(e){return JSON.stringify(e.map((e=>e.Alias)))}function I(e,t){return e.map((e=>{if(!t[e.Alias])throw new Error(`User details not found for alias: ${e.Alias}`);return{Alias:e.Alias,Login:t[e.Alias].login,PublicKey:t[e.Alias].publicKey,Permission:e.Permission}}))}async function b(e,t,r,n){if(!(n.itemIds||n.itemGroupIds||n.userGroupIds))throw new Error("MISSING_PARAMETERS");const o={...n,type:"getSharing",sharingVersion:4},{itemErrors:i,items:a,itemGroupErrors:s,itemGroups:c,userGroupErrors:u,userGroups:d}=await e.sharing.get(t,r,o);if(i&&i.length)throw new Error(i[0].message);if(s&&s.length)throw new Error(s[0].message);if(u&&u.length)throw new Error(u[0].message);return{items:a,itemGroups:c,userGroups:d}}t.createUserGroup=function(e,t,r,n){return Promise.resolve().then((()=>(A(n.teamId,t,e.store),e.userGroup.makeUserGroupAdminItem().then((o=>Promise.all([e.userGroup.makeCreateUserGroupEvent(t,r,n,o),Promise.resolve(o)])))))).then((([o,i])=>e.userGroup.createUserGroup(t,r.teams[n.teamId],o).then((({userGroups:e,itemGroups:t})=>({userGroups:e,userGroupAdminItem:i,itemGroups:t}))))).catch((e=>_("Error while creating userGroup ",e,n)))},t.createSpecialUserGroup=function(e,t,r,n){const i={teamId:n,name:"_team_admin_user_group"};return Promise.resolve().then((()=>{A(n,t,e.store);const i=r.spaces.find((e=>Number(e.teamId)===n)).details.teamAdmins.map((e=>({Alias:e.login,Login:e.login,Permission:"admin",Status:e.login===t.login?o.SpaceStatus.Accepted:o.SpaceStatus.Pending}))),a=T(i);return e.userGroup.findExistingUsersByAliases({login:t.login,uki:t.uki,aliases:a}).then((e=>({findUserServiceResponse:e,members:i})))})).then((({findUserServiceResponse:r,members:n})=>{const o=I(n,r);return e.userGroup.makeCreateSpecialUserGroupEvent(t,i,o)})).then((r=>e.userGroup.createUserGroup(t,{teamId:String(n)},r))).then((({userGroups:e})=>e&&e.length&&e[0]))},t.createSpecialItemGroup=function(e,t,r,n){return Promise.resolve().then((()=>(A(r.teamId,t,e.store),e.itemGroup.makeCreateSpecialItemGroupEvent(t,r,n)))).then((r=>e.itemGroup.createSpecialItemGroup(t,r)))},t.deleteItemGroup=function(e,t,{groupId:r,revision:n}){return Promise.resolve().then((()=>(h(t,{groupId:r,revision:n}),e.itemGroup.makeDeleteItemGroupEvent(r,n).then((r=>e.itemGroup.deleteItemGroup(t,r)))))).catch((e=>(_("Error while deleting itemGroup ",e,{groupId:r,revision:n}),[])))},t.deleteUserGroup=function(e,t,r,n){const o=(0,u.findTeamForGroup)(r,n.groupId);return Promise.resolve().then((()=>{h(t,n);const{groupId:r,revision:i}=n,a=(o&&o.userGroupAdminItems||[]).find((e=>e.groupId===n.groupId)),s=o.specialItemGroup&&o.specialItemGroup.revision;return e.userGroup.makeDeleteUserGroupEvent(r,i,a.itemId,s)})).then((r=>e.userGroup.deleteUserGroup(t,o,r))).catch((e=>_("Error while deleting userGroup ",e,n)))},t.renameUserGroup=function(e,t,r){return Promise.resolve().then((()=>{h(t,r);const{groupId:n,revision:o,name:i}=r;return e.userGroup.makeRenameUserGroupEvent(n,o,i).then((r=>e.userGroup.renameUserGroup(t,r)))})).catch((e=>_("Error while renaming userGroup ",e,r)))},t.inviteUserGroupMembers=function(e,t,r,n,o){return Promise.resolve().then((()=>{if(h(t,n),0===n.users.length)throw new Error("USERS_NOT_SUPPLIED");const{login:i,uki:a}=t,s=JSON.stringify(n.users.map((e=>e.alias)));return e.userGroup.findUsersByAliases({login:i,uki:a,aliases:s}).then((i=>{const a=n.users.map((e=>{const t={Alias:e.alias,Permission:e.permission},r=i[e.alias];if(!r)return t;const{login:n,publicKey:o}=r;return n&&o?{...t,Login:n,PublicKey:o}:t})),{revision:s}=n,c=(0,u.getUserGroupAdminItem)(r,o.teamId.toString(),o.groupId);if(!c)throw new Error("USER_GROUP_ADMIN_ITEM_NOT_AVAILABLE");return e.userGroup.makeInviteMembersEventAsAdmin(c,s,t,a)})).then((r=>e.userGroup.inviteUserGroupMembers(t,r)))})).catch((e=>_("Error while inviteUserGroupMembers",new Error(`[SharingController] - inviteUserGroupMembers: ${e}`),n))).then((e=>Object.assign({refusedMembers:{}},e)))},t.revokeUserGroupMembers=async function(e,t,r){try{if(h(t,r),0===r.users.length)throw new Error("USERS_NOT_SUPPLIED");const{groupId:n,revision:o,users:i}=r,a=await e.userGroup.makeRevokeMembersEvent(n,o,i),{userGroups:s}=await e.userGroup.revokeUserGroupMembers(t,a);return{userGroups:s}}catch(e){return _("Error while revokeUserGroupMembers",e,r)}},t.extractAliasesFromMembers=T,t.computeUserGroupMember=I,t.getSharedData=b,t.updateUserGroupMembers=async function(e,t,r){if(h(t,r),0===r.users.length)throw new Error("USERS_NOT_SUPPLIED");const{login:n,uki:o}=t,{groupId:i,revision:a,users:s}=r,c=JSON.stringify(s.map((e=>e.alias))),u=await e.userGroup.findExistingUsersByAliases({login:n,uki:o,aliases:c}),d=s.map((e=>({Alias:e.alias,Login:u[e.alias].login,PublicKey:u[e.alias].publicKey,Permission:e.permission}))),l=await e.userGroup.makeUpdateMembersEvent(i,a,d),{userGroups:p}=await e.userGroup.updateUserGroupMembers(t,l);return{userGroups:p}},t.getFreshUserGroups=function(e,t,r){const{login:n,uki:o}=t;return b(e,n,o,{itemIds:[],itemGroupIds:[],userGroupIds:r.map((e=>e.groupId))}).then((e=>e.userGroups))},t.emptySessionResponse=function(e){return Promise.reject({error:{message:"SESSION_EMPTY",action:e}})},t.handleShareItemRequest=async function e(t,r,n,a,u=!0){const{storeService:p,applicationModulesAccess:m,sessionService:g,wsService:S}=t,{ITEM_DOESNT_EXIST:h,LIMIT_EXCEEDED:y,ITEM_HAS_ATTACHMENTS:v,SHARING_FAILED:E}=o.ShareItemFailureReason;await g.getInstance().user.requestNewSync(i.Trigger.Sharing);const A=p.getPersonalData(),_=(0,l.findDataModelObject)(r,A.credentials),T=A.notes.find((e=>e.Id===r)),I=_||T;if(!I)return{success:!1,reason:h};const b=p.getSharingData().itemGroups.find((e=>e&&e.items&&!!e.items.find((e=>e.itemId===r)))),C=p.getState();if(!(0,f.isAllowedToShareSelector)(C))return{success:!1,reason:y};if(I.Attachments&&I.Attachments.length>0)return{success:!1,reason:v};try{b?await(0,d.shareAlreadySharedItem)(m,p,S,b,n,a):await(0,d.shareUnsharedItem)(m,p,S,I,n,a)}catch(o){if(!u||!w(o)){const e=new Error(`[SharingController] - handleShareItemRequest: ${o}`);return c.Debugger.log("ERROR",e),(0,s.sendExceptionLog)({error:e}),{success:!1,reason:E,message:`${e}`}}try{return await g.getInstance().user.requestNewSync(i.Trigger.Sharing),e(t,r,n,a,!1)}catch(e){const t=new Error(`[SharingController] - handleShareItemRequest (syncAndRetryOnConflict): ${e}`);return c.Debugger.log("ERROR",t),(0,s.sendExceptionLog)({error:t}),{success:!1,reason:E,message:`${t}`}}}return g.getInstance().user.requestNewSync(i.Trigger.Sharing),{success:!0}};const w=e=>{const t="INVALID_ITEM_GROUP_REVISION";return"getAdditionalInfo"in e&&e.getAdditionalInfo().webServiceSubMessage===t||e.message.includes(t)};t.handleRevokeSharing=async function e(t,r,n,a,c,u,l=!0){const{NOT_FOUND:p,FORBIDDEN:m,REVOKE_FAILED:g}=o.RevokeSharingFailureReason,f="[SharingController] - handleRevokeSharing",{itemGroups:S,userGroups:h}=r.getSharingData(),y=S.find((e=>e&&e.groupId===c));if(!y)return{success:!1,reason:p,message:"This itemGroup couldn't be found."};const v=r.getUserLogin();if(!(0,d.isUserItemGroupAdmin)(y,h,v))return{success:!1,reason:m,message:"Only an admin can perform this operation."};try{await(0,d.revokeItemGroupMember)(t,r,a,y,u)}catch(o){if(l&&w(o))try{return await n.getInstance().user.requestNewSync(i.Trigger.Sharing),e(t,r,n,a,c,u,!1)}catch(e){const t=new Error(`${f} (syncAndRetryOnConflict): ${e}`);return(0,s.sendExceptionLog)({error:t}),{success:!1,reason:g,message:`${t}`}}const d=new Error(`${f}: ${o}`);return(0,s.sendExceptionLog)({error:d}),{success:!1,reason:g,message:`${d}`}}return n.getInstance().user.requestNewSync(i.Trigger.Sharing),{success:!0}},t.handleUpdateSharingPermission=async function e(t,r,n,a,c,u,l=!0){const{NOT_FOUND:p,FORBIDDEN:m,UPDATE_FAILED:g}=o.UpdateSharingPermissionFailureReason,f="[SharingController] - handleUpdateSharingPermission",{itemGroups:S,userGroups:h}=t.getSharingData(),y=S.find((e=>e&&e.groupId===a));if(!y)return{success:!1,reason:p,message:"This itemGroup couldn't be found."};const v=t.getUserLogin();if(!(0,d.isUserItemGroupAdmin)(y,h,v))return{success:!1,reason:m,message:"Only an admin can perform this operation."};try{await(0,d.updateSharingPermission)(t,n,y,c,u)}catch(o){if(l&&w(o))try{return await r.getInstance().user.requestNewSync(i.Trigger.Sharing),e(t,r,n,a,c,u,!1)}catch(e){const t=new Error(`${f} (syncAndRetryOnConflict): ${e}`);return(0,s.sendExceptionLog)({error:t}),{success:!1,reason:g,message:`${t}`}}const d=new Error(`${f}: ${o}`);return(0,s.sendExceptionLog)({error:d}),{success:!1,reason:g,message:`${d}`}}return r.getInstance().user.requestNewSync(i.Trigger.Sharing),{success:!0}},t.handleSharingResponse=async function(e,t,r,n){const{itemGroups:o,status:a,userGroups:s}=n,c={successes:[],failures:[]},u=s.length>0?await(0,d.handlePendingUserGroupsResponse)(t,s,a):c,l=o.length>0?await(0,d.handlePendingItemGroupsResponse)(e,t,o,a):c;(0,p.default)().sendSharingResponseResult({status:a,itemGroups:l,userGroups:u}),r.getInstance().user.requestNewSync(i.Trigger.Sharing)},t.setPendingElementsAsSeen=function(e,t,r){const n=(0,a.setElementsAsSeenAction)(r.pendingItemGroupIds,r.pendingUserGroupIds);e.dispatch(n);const{sharingSync:o}=e.getState().userSession;t.getInstance().storeSharingSync(o)},t.isUserLastAdminOnItem=function(e,t){const r=e.getUserLogin(),{itemGroups:n}=e.getSharingData(),o=(0,g.findItemItemGroup)(t,n);return!!o&&(0,m.isUserLastAdmin)(o,r)},t.doesUserReceiveItemViaGroup=function(e,t){const r=e.getUserLogin(),{itemGroups:n,userGroups:o}=e.getSharingData(),i=(0,g.findItemItemGroup)(t,n);return!!i&&(0,m.doesUserReceiveItemGroupViaGroup)(i,o,r)}},22652:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const n=r(31495),o=r(28183);t.config={commands:{},queries:{getSharingUsers:{selector:n.viewedSharingUsersSelector},getSharingUserPermissionLevel:{selector:n.sharingUserPermissionLevelSelector}},liveQueries:{liveSharingUsers:{operator:o.sharingUsers$},liveSharingUserPermissionLevel:{operator:o.sharingUserPermissionLevel$}}}},72658:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(26710),t)},28183:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sharingUserPermissionLevel$=t.sharingUsers$=void 0;const n=r(18948),o=r(3343),i=r(31495),a=r(35893),s=r(33627);t.sharingUsers$=e=>{const t=(0,a.parseToken)(e),r=(0,i.createLiveSharingUsersSelector)(t.spaceId)(t.dataQuery);return(0,n.pipe)((0,o.map)(r),(0,o.distinctUntilChanged)(((e,t)=>(0,s.sameBatch)(e.items,t.items)&&e.matchingCount===t.matchingCount)))},t.sharingUserPermissionLevel$=e=>{const t=(0,i.getSharingUserPermissionLevelSelector)((0,a.parseToken)(e));return(0,n.pipe)((0,o.map)(t),(0,o.distinctUntilChanged)())}},7261:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getSharingUserMappers=void 0,t.getSharingUserMappers=()=>({id:e=>e.userId,itemCount:e=>e.itemCount})},70963:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sharingUserMatch=t.searchGetters=void 0;const n=r(82234),o=r(64455);t.searchGetters=[(0,n.stringProp)("userId")],t.sharingUserMatch=(0,o.match)(t.searchGetters)},31495:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getSharingUserPermissionLevelSelector=t.sharingUserPermissionLevelSelector=t.createLiveSharingUsersSelector=t.viewedSharingUsersSelector=t.sharingUserMappersSelector=void 0;const n=r(16516),o=r(32034),i=r(63566),a=r(24589),s=r(97006),c=r(16593),u=r(7261),d=r(63925),l=r(70963),p=r(58107),m=r(89698),g=r(84511),f=e=>(0,o.createSelector)(m.acceptedItemGroupsSelector,c.userIdSelector,(e=>e),((t,r,n)=>(0,p.getSharingUsersFromItemGroups)(n,r,t,e)));t.sharingUserMappersSelector=()=>(0,u.getSharingUserMappers)();const S=()=>l.sharingUserMatch;t.viewedSharingUsersSelector=(e,r)=>{const o=(e=>{const r=f(e);return(0,a.getQuerySelector)(r,S,t.sharingUserMappersSelector)})(r.spaceId);return(0,n.compose)((0,i.viewListResults)(d.listView),o)(e,r.dataQuery)},t.createLiveSharingUsersSelector=e=>{const r=f(e);return(0,s.makeLiveSelectorGetter)(r,(()=>d.listView),S,t.sharingUserMappersSelector)},t.sharingUserPermissionLevelSelector=(e,{itemId:t,userId:r})=>{const n=(0,g.itemItemGroupSelector)(e,t);if(n)return(0,p.getSharingUserPermission)(n,r)},t.getSharingUserPermissionLevelSelector=({itemId:e,userId:r})=>n=>(0,t.sharingUserPermissionLevelSelector)(n,{itemId:e,userId:r})},26710:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},63925:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.listView=t.detailView=void 0;const n=(0,r(16516).defaultTo)("");t.detailView=e=>({id:n(e.userId),itemCount:e.itemCount}),t.listView=e=>e.map(t.detailView)},23944:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const n=r(96247),o=r(79570),i=r(1190);t.config={commands:{},queries:{getUserGroups:{selector:n.viewedUserGroupsSelector},getUserGroup:{selector:n.viewedUserGroupSelector},getUserGroupPermissionLevel:{selector:n.userGroupPermissionLevelSelector},getUserGroupMembers:{selector:i.viewedUserGroupMembersSelector}},liveQueries:{liveUserGroups:{operator:o.userGroups$},liveUserGroupPermissionLevel:{operator:o.userGroupPermissionLevel$}}}},45923:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(69550),t)},779:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getUserDownloadMappers=void 0,t.getUserDownloadMappers=()=>({id:e=>e.userId})},79850:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.userDownloadMatch=t.searchGetters=void 0;const n=r(82234),o=r(64455);t.searchGetters=[(0,n.stringProp)("userId")],t.userDownloadMatch=(0,o.match)(t.searchGetters)},1190:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.viewedUserGroupMembersSelector=t.userDownloadMappersSelector=t.getUserGroupSelector=t.activeUserGroupsSelector=void 0;const n=r(32034),o=r(16516),i=r(24589),a=r(779),s=r(79850),c=r(63566),u=r(99729),d=r(52102),l=r(16593),p=r(58107);t.activeUserGroupsSelector=(0,n.createSelector)(d.sharingDataSelector,l.userIdSelector,((e,t)=>{const{userGroups:r}=e;return(0,p.findMyAcceptedUserGroups)(r,t)})),t.getUserGroupSelector=e=>(0,n.createSelector)(t.activeUserGroupsSelector,(t=>(0,p.findUserGroup)(t,e))),t.userDownloadMappersSelector=()=>(0,a.getUserDownloadMappers)();const m=()=>s.userDownloadMatch,g=e=>{const r=(e=>{const r=(0,t.getUserGroupSelector)(e);return(0,n.createSelector)(r,(e=>e?.users||[]))})(e);return(0,i.getQuerySelector)(r,m,t.userDownloadMappersSelector)};t.viewedUserGroupMembersSelector=(e,t)=>{const r=g(t.groupId);return(0,o.compose)((0,c.viewListResults)(u.listView),r)(e,t.dataQuery)}},99729:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.listView=t.detailView=void 0;const n=(0,r(16516).defaultTo)("");t.detailView=e=>({id:n(e.userId),permission:e.permission}),t.listView=e=>e.map(t.detailView)},79570:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.userGroupPermissionLevel$=t.userGroups$=void 0;const n=r(18948),o=r(3343),i=r(35893),a=r(96247),s=r(33627);t.userGroups$=e=>{const t=(0,i.parseToken)(e),r=(0,a.createLiveUserGroupsSelector)(t.spaceId)(t.dataQuery);return(0,n.pipe)((0,o.map)(r),(0,o.distinctUntilChanged)(((e,t)=>(0,s.sameBatch)(e.items,t.items)&&e.matchingCount===t.matchingCount)))},t.userGroupPermissionLevel$=e=>{const t=(0,a.getUserGroupPermissionLevelSelector)((0,i.parseToken)(e));return(0,n.pipe)((0,o.map)(t),(0,o.distinctUntilChanged)())}},95414:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getUserGroupMappers=void 0,t.getUserGroupMappers=()=>({name:e=>e.name,id:e=>e.groupId,itemCount:e=>e.itemCount})},10547:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.userGroupMatch=t.searchGetters=void 0;const n=r(82234),o=r(64455);t.searchGetters=[(0,n.stringProp)("name")],t.userGroupMatch=(0,o.match)(t.searchGetters)},96247:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getUserGroupPermissionLevelSelector=t.userGroupPermissionLevelSelector=t.viewedUserGroupSelector=t.createLiveUserGroupsSelector=t.viewedUserGroupsSelector=t.userGroupMappersSelector=t.createActiveUserGroupsSelector=void 0;const n=r(16516),o=r(32034),i=r(63566),a=r(24589),s=r(97006),c=r(16593),u=r(10547),d=r(95414),l=r(54719),p=r(52102),m=r(58107),g=r(84511);t.createActiveUserGroupsSelector=e=>(0,o.createSelector)(p.sharingDataSelector,c.userIdSelector,(e=>e),((t,r,n)=>{const{userGroups:o,itemGroups:i}=t;return(0,m.findMyAcceptedUserGroups)(o,r).map((t=>{const r=(0,m.findUserGroupItemGroups)(t.groupId,i).reduce(((t,r)=>null===e||(0,m.doesItemGroupExistInSpace)(n,r,e)?t+r.items.length:t),0);return{...t,itemCount:r}}))})),t.userGroupMappersSelector=()=>(0,d.getUserGroupMappers)();const f=()=>u.userGroupMatch;t.viewedUserGroupsSelector=(e,r)=>{const o=(e=>{const r=(0,t.createActiveUserGroupsSelector)(e);return(0,a.getQuerySelector)(r,f,t.userGroupMappersSelector)})(r.spaceId);return(0,n.compose)((0,i.viewListResults)(l.listView),o)(e,r.dataQuery)},t.createLiveUserGroupsSelector=e=>{const r=(0,t.createActiveUserGroupsSelector)(e);return(0,s.makeLiveSelectorGetter)(r,(()=>l.listView),f,t.userGroupMappersSelector)},t.viewedUserGroupSelector=(e,r)=>{const{itemGroups:n}=(0,p.sharingDataSelector)(e),o=(0,t.createActiveUserGroupsSelector)(null)(e),i=(0,m.findUserGroup)(o,r),a=(0,m.findUserGroupItemGroups)(i.groupId,n).length;if(i)return(0,l.detailView)({...i,itemCount:a})},t.userGroupPermissionLevelSelector=(e,{itemId:t,groupId:r})=>{const n=(0,g.itemItemGroupSelector)(e,t);return(0,m.getUserGroupPermission)(n,r)},t.getUserGroupPermissionLevelSelector=({itemId:e,groupId:r})=>n=>(0,t.userGroupPermissionLevelSelector)(n,{itemId:e,groupId:r})},69550:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},54719:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.listView=t.detailView=void 0;const n=r(16516),o=r(99729),i=(0,n.defaultTo)("");t.detailView=e=>({name:i(e.name),id:i(e.groupId),users:(0,o.listView)(e.users||[]),itemCount:e.itemCount}),t.listView=e=>e.map(t.detailView)},86833:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0;const n=r(36768);t.bootstrap=e=>{e.register(n.config)}},67312:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.convertItemToDashlaneXml=t.ConvertItemToDashlaneXmlErrorCode=void 0;const n=r(61797);var o;!function(e){e.INVALID_XML="INVALID_XML",e.NOT_AUTHENTICATED="NOT_AUTHENTICATED"}(o=t.ConvertItemToDashlaneXmlErrorCode||(t.ConvertItemToDashlaneXmlErrorCode={})),t.convertItemToDashlaneXml=async function(e,t){const{storeService:r}=e;if(!r.isAuthenticated())return{success:!1,error:{code:o.NOT_AUTHENTICATED}};const{item:i}=t,a=(0,n.getDashlaneXml)(i);return a&&""!==a?{success:!0,xml:a}:{success:!1,error:{code:o.INVALID_XML}}}},95326:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.shareItem=t.ShareItemErrorCode=void 0;const n=r(70252),o=r(63623);var i;!function(e){e.NOT_AUTHENTICATED="NOT_AUTHENTICATED"}(i=t.ShareItemErrorCode||(t.ShareItemErrorCode={})),t.shareItem=async function(e,t){const{storeService:r}=e;if(!r.isAuthenticated())return{success:!1,error:{code:i.NOT_AUTHENTICATED}};try{const{itemId:r,permission:n,recipients:i}=t;return await(0,o.handleShareItemRequest)(e,r,n,i)}catch(e){const t=`[SessionController] - shareItem: ${e}`,r=new Error(t);return(0,n.sendExceptionLog)({error:r}),{success:!1,error:{code:t}}}}},33719:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=t.setupSubscriptions=void 0;const n=r(53858);Object.defineProperty(t,"setupSubscriptions",{enumerable:!0,get:function(){return n.setupSubscriptions}});var o=r(86833);Object.defineProperty(t,"bootstrap",{enumerable:!0,get:function(){return o.bootstrap}})},53858:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setupSubscriptions=void 0;const n=r(36513),o=r(36884),i=r(78096);t.setupSubscriptions=async function(e,t){const{sessionService:r,storeService:a,wsService:s}=t,c=(0,n.makeCryptoService)(),u=(0,o.makeItemGroupService)(s,c);e.teamSpaceContentControlDone.on((e=>{(0,i.revokeRemoteControlledSharedItems)(r,a,s,u,e)}))}},83400:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const n=r(85406),o=r(39003),i=r(98337);t.config={commands:{},queries:{getBanks:{staticDataHandler:n.getBanks},getAllBanks:{staticDataHandler:n.getAllBanks},getAllCallingCodes:{staticDataHandler:o.getAllCallingCodes},getSecureDocumentsExtensionsList:{staticDataHandler:i.getSecureDocumentsAllowedExtensions}},liveQueries:{}}},35240:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},82912:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.banks=void 0;const n=r(53576);t.banks={[n.Country.AR]:[{localizedString:"Banco Credicoop",code:"BANCOCREDICOOP"},{localizedString:"Banco de la Nación Argentina",code:"BANCODELANACIONARGEN"},{localizedString:"Banco Hipotecario",code:"BANCOHIPOTECARIO"},{localizedString:"Banco Itaú Argentina",code:"BANCOITAUARGENTINA"},{localizedString:"Banco Macro",code:"BANCOMACRO"},{localizedString:"Banco Patagonia",code:"BANCOPATAGONIA"},{localizedString:"Banco Santander Río",code:"BANCOSANTANDERRIO"},{localizedString:"Bank of the City of Buenos Aires",code:"BANKOFTHECITYOFBUENO"},{localizedString:"Bank of the Province of Buenos Aires",code:"BANKOFTHEPROVINCEOFB"},{localizedString:"BBVA Banco Francés",code:"BBVABANCOFRANCES"},{localizedString:"Central Bank of Argentina",code:"CENTRALBANKOFARGENTI"},{localizedString:"Citibank Argentina",code:"CITIBANKARGENTINA"},{localizedString:"Grupo Financiero Galicia",code:"GRUPOFINANCIEROGALIC"},{localizedString:"HSBC Bank Argentina",code:"HSBCBANKARGENTINA"},{localizedString:"Municipal Bank of Rosario",code:"MUNICIPALBANKOFROSAR"},{localizedString:"New Bank of Santa Fe",code:"NEWBANKOFSANTAFE"},{localizedString:"Other",code:"NO_TYPE"}],[n.Country.AT]:[{localizedString:"Adria Bank",code:"ADRIABANK"},{localizedString:"Allianz Investmentbank",code:"ALLIANZINVESTMENTBAN"},{localizedString:"Alpenbank",code:"ALPENBANK"},{localizedString:"American Express Bank Ltd",code:"AMERICANEXPRESSBANKL"},{localizedString:"Anglo Irish Bank",code:"ANGLOIRISHBANK"},{localizedString:"Austria Wirtschaftsservice Gesellschaft",code:"AUSTRIAWIRTSCHAFTSSE"},{localizedString:"Banco do Brasil",code:"BANCODOBRASIL"},{localizedString:"Bank Austria Creditanstalt",code:"BANKAUSTRIACREDITANS"},{localizedString:"Bank für Ärzte und Freie Berufe",code:"BANKFURARZTEUNDFREIE"},{localizedString:"Bank für Tirol und Vorarlberg",code:"BANKFURTIROLUNDVORAR"},{localizedString:"Bank Gutmann",code:"BANKGUTMANN"},{localizedString:"Bankhaus Carl Spängler & Co",code:"BANKHAUSCARLSPANGLER"},{localizedString:"Bankhaus Krentschker & Co",code:"BANKHAUSKRENTSCHKERC"},{localizedString:"Bankhaus Schelhammer & Schattera",code:"BANKHAUSSCHELHAMMERS"},{localizedString:"Bank Sal.Oppenheim jr. & Cie",code:"BANKSALOPPENHEIMJRCI"},{localizedString:"Bank Vontobel Österreich",code:"BANKVONTOBELOSTERREI"},{localizedString:"Bank Winter & Co",code:"BANKWINTERCO"},{localizedString:"Other",code:"NO_TYPE"},{localizedString:"Raiffeisen Bank",code:"RAIFFEISENBANK"}],[n.Country.AU]:[{localizedString:"AMP Bank Limited",code:"AMPBANKLIMITED"},{localizedString:"Australia and New Zealand Banking Group",code:"AUSTRALIAANDNEWZEALA"},{localizedString:"Auswide Bank",code:"AUSWIDEBANK"},{localizedString:"Bank Australia",code:"BANKAUSTRALIA"},{localizedString:"Bank of Melbourne",code:"BANKOFMELBOURNE"},{localizedString:"Bank of Queensland Limited",code:"BANKOFQUEENSLANDLIMI"},{localizedString:"Bank of Sydney",code:"BANKOFSYDNEY"},{localizedString:"Bank of Western Australia",code:"BANKOFWESTERNAUSTRAL"},{localizedString:"Bank SA",code:"BANKSA"},{localizedString:"BankVic",code:"BANKVIC"},{localizedString:"Bendigo and Adelaide Bank Limited",code:"BENDIGOANDADELAIDEBA"},{localizedString:"Beyond Bank Australia",code:"BEYONDBANKAUSTRALIA"},{localizedString:"Commonwealth Bank of Australia",code:"COMMONWEALTHBANKOFAU"},{localizedString:"Corporation (Australia) Limited",code:"CORPORATIONAUSTRALIA"},{localizedString:"Defence Bank",code:"DEFENCEBANK"},{localizedString:"Delphi Bank",code:"DELPHIBANK"},{localizedString:"G&C Mutual Bank",code:"GCMUTUALBANK"},{localizedString:"Heritage Bank",code:"HERITAGEBANK"},{localizedString:"Hume Bank",code:"HUMEBANK"},{localizedString:"IMB Bank",code:"IMBBANK"},{localizedString:"Macquarie Bank Limited",code:"MACQUARIEBANKLIMITED"},{localizedString:"Members Equity Bank Pty Limited",code:"MEMBERSEQUITYBANKPTY"},{localizedString:"MyState Bank",code:"MYSTATEBANK"},{localizedString:"National Australia Bank Limited",code:"NATIONALAUSTRALIABAN"},{localizedString:"Other",code:"NO_TYPE"},{localizedString:"P&N Bank",code:"PNBANK"},{localizedString:"Police Bank",code:"POLICEBANK"},{localizedString:"Queensland Teachers Mutual Bank (QTMB)",code:"QUEENSLANDTEACHERSMU"},{localizedString:"Rural Bank Limited",code:"RURALBANKLIMITED"},{localizedString:"St. George Bank Limited,",code:"STGEORGEBANKLIMITED"},{localizedString:"Suncorp-Metway Limited",code:"SUNCORPMETWAYLIMITED"},{localizedString:"Teachers Mutual Bank Limited",code:"TEACHERSMUTUALBANKLI"},{localizedString:"UBank, a division of National Australia Bank",code:"UBANKADIVISIONOFNATI"},{localizedString:"Victoria Teachers Mutual Bank",code:"VICTORIATEACHERSMUTU"},{localizedString:"Westpac Banking Corporation",code:"WESTPACBANKINGCORPOR"}],[n.Country.BE]:[{localizedString:"Argenta",code:"ARGENTA"},{localizedString:"Attijariwafa Bank Europe Belgium",code:"ATTIJARIWAFABANKEURO"},{localizedString:"AXA Bank",code:"AXABANK"},{localizedString:"Banca Monte Paschi Belgio",code:"BANCAMONTEPASCHIBELG"},{localizedString:"BBVA Bélgica",code:"BBVABELGICA"},{localizedString:"Belfius Banque",code:"BELFIUSBANQUE"},{localizedString:"Beobank",code:"BEOBANK"},{localizedString:"BKCP Banque",code:"BKCPBANQUE"},{localizedString:"BNP Paribas Fortis",code:"BNPPARIBASFORTIS"},{localizedString:"bpost bank",code:"BPOSTBANK"},{localizedString:"Crelan",code:"CRELAN"},{localizedString:"Europabank",code:"EUROPABANK"},{localizedString:"Hello Bank!",code:"HELLOBANK"},{localizedString:"ING Belgium",code:"INGBELGIUM"},{localizedString:"KBC Bank",code:"KBCBANK"},{localizedString:"Keytrade Bank",code:"KEYTRADEBANK"},{localizedString:"Other",code:"NO_TYPE"},{localizedString:"Rabobank.be",code:"RABOBANKBE"},{localizedString:"Record Bank",code:"RECORDBANK"},{localizedString:"Santander Consumer Finance",code:"SANTANDERCONSUMERFIN"},{localizedString:"Triodos Bank Banque Triodos",code:"TRIODOSBANKBANQUETRI"},{localizedString:"VDK Spaarbank NV",code:"VDKSPAARBANKNV"}],[n.Country.BR]:[{localizedString:"Banco Bradesco Financiamentos",code:"BANCOBRADESCOFINANCI"},{localizedString:"Banco do Brasil",code:"BANCODOBRASIL"},{localizedString:"Banco do Estado do Rio Grande do Sul S/A",code:"BANCODOESTADODORIOGR"},{localizedString:"Banco Itaú",code:"BANCOITAU"},{localizedString:"Banco J Safra S/A",code:"BANCOJSAFRASA"},{localizedString:"Banco PanAmericano S/A",code:"BANCOPANAMERICANOSA"},{localizedString:"Banco Santander",code:"BANCOSANTANDER"},{localizedString:"Caixa Econômica Federal",code:"CAIXAECONOMICAFEDERA"},{localizedString:"Citibank",code:"CITIBANK"},{localizedString:"HSBC",code:"HSBC"},{localizedString:"Other",code:"NO_TYPE"}],[n.Country.CA]:[{localizedString:"B2B Bank",code:"B2BBANK"},{localizedString:"Bank of Montreal",code:"BANKOFMONTREAL"},{localizedString:"Bank of Nova Scotia",code:"BANKOFNOVASCOTIA"},{localizedString:"Bridgewater Bank",code:"BRIDGEWATERBANK"},{localizedString:"Canadian Imperial Bank of Commerce",code:"CANADIANIMPERIALBANK"},{localizedString:"Canadian Tire Bank",code:"CANADIANTIREBANK"},{localizedString:"Canadian Western Bank",code:"CANADIANWESTERNBANK"},{localizedString:"CFF Bank",code:"CFFBANK"},{localizedString:"Citizens Bank of Canada",code:"CITIZENSBANKOFCANADA"},{localizedString:"Continental Bank of Canada",code:"CONTINENTALBANKOFCAN"},{localizedString:"CS Alterna Bank",code:"CSALTERNABANK"},{localizedString:"DirectCash Bank",code:"DIRECTCASHBANK"},{localizedString:"Equitable Bank",code:"EQUITABLEBANK"},{localizedString:"First Nations Bank of Canada",code:"FIRSTNATIONSBANKOFCA"},{localizedString:"General Bank of Canada",code:"GENERALBANKOFCANADA"},{localizedString:"Hollis Canadian Bank",code:"HOLLISCANADIANBANK"},{localizedString:"HomEquity Bank",code:"HOMEQUITYBANK"},{localizedString:"Laurentian Bank of Canada",code:"LAURENTIANBANKOFCANA"},{localizedString:"Manulife Bank of Canada",code:"MANULIFEBANKOFCANADA"},{localizedString:"National Bank of Canada",code:"NATIONALBANKOFCANADA"},{localizedString:"Other",code:"NO_TYPE"},{localizedString:"Pacific & Western Bank of Canada",code:"PACIFICWESTERNBANKOF"},{localizedString:"President's Choice Bank",code:"PRESIDENTSCHOICEBANK"},{localizedString:"RedBrick Bank",code:"REDBRICKBANK"},{localizedString:"Rogers Bank",code:"ROGERSBANK"},{localizedString:"Royal Bank of Canada",code:"ROYALBANKOFCANADA"},{localizedString:"Tangerine Bank",code:"TANGERINEBANK"},{localizedString:"Toronto-Dominion Bank",code:"TORONTODOMINIONBANK"},{localizedString:"Wealth One Bank of Canada",code:"WEALTHONEBANKOFCANAD"},{localizedString:"Zag Bank",code:"ZAGBANK"}],[n.Country.CH]:[{localizedString:"AIG Private Bank",code:"AIGPRIVATEBANK"},{localizedString:"Amtsersparniskasse Thun",code:"AMTSERSPARNISKASSETH"},{localizedString:"Anker Bank",code:"ANKERBANK"},{localizedString:"Arab Bank Switzerland",code:"ARABBANKSWITZERLAND"},{localizedString:"Banca dello Stato del Cantone Ticino",code:"BANCADELLOSTATODELCA"},{localizedString:"Bank Ehinger",code:"BANKEHINGER"},{localizedString:"Bank for International Settlements (BIS)",code:"BANKFORINTERNATIONAL"},{localizedString:"Bank Leu",code:"BANKLEU"},{localizedString:"Bankredit - Banca di Credito e Commercio",code:"BANKREDITBANCADICRED"},{localizedString:"Bank von Ernst",code:"BANKVONERNST"},{localizedString:"Banque Cantonale Vaudoise (BCV)",code:"BANQUECANTONALEVAUDO"},{localizedString:"Banque Diamantaire Anversoise",code:"BANQUEDIAMANTAIREANV"},{localizedString:"Banque Edouard Constant",code:"BANQUEEDOUARDCONSTAN"},{localizedString:"Banque Nationale Suisse - Banca Nazionale Svizzera",code:"BANQUENATIONALESUISS"},{localizedString:"Banque Piguet & Cie S.A.",code:"BANQUEPIGUETCIESA"},{localizedString:"Banque SCS Alliance",code:"BANQUESCSALLIANCE"},{localizedString:"BEKBnet/BCBE",code:"BEKBNETBCBE"},{localizedString:"BHE - Bank für Handel & Effekten",code:"BHEBANKFURHANDELEFFE"},{localizedString:"BNP - Banque Nationale de Paris",code:"BNPBANQUENATIONALEDE"},{localizedString:"BSI - Banca della Svizzera Italiana",code:"BSIBANCADELLASVIZZER"},{localizedString:"Clariden Bank",code:"CLARIDENBANK"},{localizedString:"Crédit Lyonnais Suisse",code:"CREDITLYONNAISSUISSE"},{localizedString:"Credit Suisse",code:"CREDITSUISSE"},{localizedString:"Discount Bank Group (DBTC/DBSA)",code:"DISCOUNTBANKGROUPDBT"},{localizedString:"Habib Bank AG Zürich",code:"HABIBBANKAGZURICH"},{localizedString:"Hottinger & Cie",code:"HOTTINGERCIE"},{localizedString:"Maerki, Baumann & Co. AG, Privatbank",code:"MAERKIBAUMANNCOAGPRI"},{localizedString:"Migrosbank",code:"MIGROSBANK"},{localizedString:"Other",code:"NO_TYPE"},{localizedString:"Pictet & Cie",code:"PICTETCIE"},{localizedString:"Raiffeisen Internet",code:"RAIFFEISENINTERNET"},{localizedString:"Royal Bank of Canada",code:"ROYALBANKOFCANADA"},{localizedString:"SBC Warburg Dillon Read (WDR)",code:"SBCWARBURGDILLONREAD"},{localizedString:"Schwyzer Kantonalbank",code:"SCHWYZERKANTONALBANK"},{localizedString:"Skandia Bank",code:"SKANDIABANK"},{localizedString:"Solothurner Bank SoBa",code:"SOLOTHURNERBANKSOBA"},{localizedString:"Sparkassa Berneck",code:"SPARKASSABERNECK"},{localizedString:"St. Gallische Kantonalbank",code:"STGALLISCHEKANTONALB"},{localizedString:"Swiss Bank Corporation",code:"SWISSBANKCORPORATION"},{localizedString:"Thurgauer Kantonalbank",code:"THURGAUERKANTONALBAN"},{localizedString:"Union Bank of Switzerland",code:"UNIONBANKOFSWITZERLA"},{localizedString:"Wegelin & Co. Privatbankiers",code:"WEGELINCOPRIVATBANKI"},{localizedString:"Zuger Kantonalbank",code:"ZUGERKANTONALBANK"},{localizedString:"Zürcher Kantonalbank",code:"ZURCHERKANTONALBANK"}],[n.Country.CL]:[{localizedString:"Banco BICE",code:"BANCOBICE"},{localizedString:"Banco Bilbao Vizcaya Argentaria (BBVA)",code:"BANCOBILBAOVIZCAYAAR"},{localizedString:"Banco Consorcio",code:"BANCOCONSORCIO"},{localizedString:"Banco de Chile",code:"BANCODECHILE"},{localizedString:"Banco de Crédito e Inversiones",code:"BANCODECREDITOEINVER"},{localizedString:"Banco del Desarrollo",code:"BANCODELDESARROLLO"},{localizedString:"Banco del Estado de Chile",code:"BANCODELESTADODECHIL"},{localizedString:"Banco Edwards-Citi",code:"BANCOEDWARDSCITI"},{localizedString:"Banco Falabella",code:"BANCOFALABELLA"},{localizedString:"Banco Internacional",code:"BANCOINTERNACIONAL"},{localizedString:"Banco Itaú-Chile",code:"BANCOITAUCHILE"},{localizedString:"Banco Paris",code:"BANCOPARIS"},{localizedString:"Banco Penta",code:"BANCOPENTA"},{localizedString:"Banco Ripley",code:"BANCORIPLEY"},{localizedString:"Banco Santander Chile",code:"BANCOSANTANDERCHILE"},{localizedString:"Banco Security",code:"BANCOSECURITY"},{localizedString:"Central Bank of Chile",code:"CENTRALBANKOFCHILE"},{localizedString:"Corpbanca",code:"CORPBANCA"},{localizedString:"Deutsche Bank Chile",code:"DEUTSCHEBANKCHILE"},{localizedString:"HSBC Bank Chile",code:"HSBCBANKCHILE"},{localizedString:"Other",code:"NO_TYPE"},{localizedString:"Rabobank",code:"RABOBANK"},{localizedString:"Scotiabank Sud Americano",code:"SCOTIABANKSUDAMERICA"}],[n.Country.CO]:[{localizedString:"AVVillas",code:"AVVILLAS"},{localizedString:"Banagrario",code:"BANAGRARIO"},{localizedString:"Bancamía",code:"BANCAMIA"},{localizedString:"Banco de Bogotá",code:"BANCODEBOGOTA"},{localizedString:"Banco de la República",code:"BANCODELAREPUBLICA"},{localizedString:"Banco de Occidente",code:"BANCODEOCCIDENTE"},{localizedString:"Bancolombia",code:"BANCOLOMBIA"},{localizedString:"Banco Popular",code:"BANCOPOPULAR"},{localizedString:"Banco Santander",code:"BANCOSANTANDER"},{localizedString:"BBVA Colombia",code:"BBVACOLOMBIA"},{localizedString:"Caja Social",code:"CAJASOCIAL"},{localizedString:"Citibank Colombia",code:"CITIBANKCOLOMBIA"},{localizedString:"Colmena",code:"COLMENA"},{localizedString:"Colpatria",code:"COLPATRIA"},{localizedString:"Davivienda",code:"DAVIVIENDA"},{localizedString:"GBN Sudameris",code:"GBNSUDAMERIS"},{localizedString:"Helm",code:"HELM"},{localizedString:"HSBC Colombia",code:"HSBCCOLOMBIA"},{localizedString:"Other",code:"NO_TYPE"},{localizedString:"Procredit",code:"PROCREDIT"},{localizedString:"RBS Colombia",code:"RBSCOLOMBIA"}],[n.Country.DE]:[{localizedString:"BayernLB",code:"BAYERNLB"},{localizedString:"Commerzbank",code:"COMMERZBANK"},{localizedString:"Deutsche Bank",code:"DEUTSCHEBANK"},{localizedString:"DZ Bank",code:"DZBANK"},{localizedString:"Eurohypo AG",code:"EUROHYPOAG"},{localizedString:"HSH Nordbank",code:"HSHNORDBANK"},{localizedString:"HVB Group (HypoVereinsbank)",code:"HVBGROUPHYPOVEREINSB"},{localizedString:"Hypo Real Estate Group (HRE Group)",code:"HYPOREALESTATEGROUPH"},{localizedString:"Kfw Bankgruppe",code:"KFWBANKGRUPPE"},{localizedString:"Landesbank Baden-Württemberg",code:"LANDESBANKBADENWURTT"},{localizedString:"Landesbank Berlin (LBB)",code:"LANDESBANKBERLINLBB"},{localizedString:"Landesbank Hessen-Thüringen (Helaba)",code:"LANDESBANKHESSENTHUR"},{localizedString:"Nord/LB (Norddeutsche Landesbank)",code:"NORDLBNORDDEUTSCHELA"},{localizedString:"Other",code:"NO_TYPE"},{localizedString:"N26",code:"NUMBERTWENTYSIX"},{localizedString:"Postbank AG",code:"POSTBANKAG"},{localizedString:"Sparkasse",code:"SPARKASSE"},{localizedString:"WGZ Bank (Westdeutsche Genossenschafts-Zentralbank)",code:"WGZBANKWESTDEUTSCHEG"}],[n.Country.DK]:[{localizedString:"Alm Brand Bank",code:"ALMBRANDBANK"},{localizedString:"Arbejdernes Landsbank",code:"ARBEJERNESLANDSBANK"},{localizedString:"Danske Bank",code:"DANSKEBANK"},{localizedString:"FIH Erhversbank",code:"FIHERHVERSBANK"},{localizedString:"Jyske Bank",code:"JYSKEBANK"},{localizedString:"Nordea",code:"NORDEA"},{localizedString:"Other",code:"NO_TYPE"},{localizedString:"Nykredit Bank",code:"NYKREDITBANK"},{localizedString:"Spar Nord Bank",code:"SPARNORDBANK"},{localizedString:"Syd Bank",code:"SYDBANK"},{localizedString:"Vestjysk Bank",code:"VESTJYSKBANK"}],[n.Country.EC]:[{localizedString:"Banco Amazonas",code:"BANCOAMAZONAS"},{localizedString:"Banco Bolivariano",code:"BANCOBOLIVARIANO"},{localizedString:"Banco Capital",code:"BANCOCAPITAL"},{localizedString:"Banco Cofiec",code:"BANCOCOFIEC"},{localizedString:"Banco Comercial de Manabí",code:"BANCOCOMERCIALDEMANA"},{localizedString:"Banco Coopnacional",code:"BANCOCOOPNACIONAL"},{localizedString:"Banco de Guayaquil",code:"BANCODEGUAYAQUIL"},{localizedString:"Banco del Austro",code:"BANCODELAUSTRO"},{localizedString:"Banco Delbank",code:"BANCODELBANK"},{localizedString:"Banco del Litoral",code:"BANCODELLITORAL"},{localizedString:"Banco de Loja",code:"BANCODELOJA"},{localizedString:"Banco del Pacífico",code:"BANCODELPACIFICO"},{localizedString:"Banco de Machala",code:"BANCODEMACHALA"},{localizedString:"Banco D-Miro",code:"BANCODMIRO"},{localizedString:"Banco Finca",code:"BANCOFINCA"},{localizedString:"Banco General Rumiñahui",code:"BANCOGENERALRUMINAHU"},{localizedString:"Banco Internacional",code:"BANCOINTERNACIONAL"},{localizedString:"Banco Pichincha",code:"BANCOPICHINCHA"},{localizedString:"Banco Promérica",code:"BANCOPROMERICA"},{localizedString:"Banco Solidario",code:"BANCOSOLIDARIO"},{localizedString:"Banco Sudamericano",code:"BANCOSUDAMERICANO"},{localizedString:"Citibank Ecuador",code:"CITIBANKECUADOR"},{localizedString:"Other",code:"NO_TYPE"},{localizedString:"ProCredit Bank",code:"PROCREDITBANK"},{localizedString:"Produbanco",code:"PRODUBANCO"}],[n.Country.ES]:[{localizedString:"Banca March",code:"BANCAMARCH"},{localizedString:"Banco Esfinge",code:"BANCOESFINGE"},{localizedString:"Banco Espíritu Santo",code:"BANCOESPIRITUSANTO"},{localizedString:"Banco Fimestic",code:"BANCOFIMESTIC"},{localizedString:"Banco Inversión",code:"BANCOINVERSION"},{localizedString:"Banco Popular Español",code:"BANCOPOPULARESPANOL"},{localizedString:"Banco Sabadell",code:"BANCOSABADELL"},{localizedString:"Banco Santander",code:"BANCOSANTANDER"},{localizedString:"Bankia",code:"BANKIA"},{localizedString:"Bankinter",code:"BANKINTER"},{localizedString:"Bankpyme",code:"BANKPYME"},{localizedString:"Barclays Bank",code:"BARCLAYSBANK"},{localizedString:"BBVA",code:"BBVA"},{localizedString:"BCH Broker",code:"BCHBROKER"},{localizedString:"CaixaBank",code:"CAIXABANK"},{localizedString:"Citibank",code:"CITIBANK"},{localizedString:"Deutsche Bank",code:"DEUTSCHEBANK"},{localizedString:"E-Cortal",code:"ECORTAL"},{localizedString:"Fiare Banca Ètica página web de Fiare",code:"FIAREBANCAETICAPAGIN"},{localizedString:"Fibanc",code:"FIBANC"},{localizedString:"Fibane",code:"FIBANE"},{localizedString:"Ibercaja",code:"IBERCAJA"},{localizedString:"ING Direct",code:"INGDIRECT"},{localizedString:"InterCaja Social .ES",code:"INTERCAJASOCIALES"},{localizedString:"Merrill Lynch",code:"MERRILLLYNCH"},{localizedString:"Other",code:"NO_TYPE"},{localizedString:"Openbank",code:"OPENBANK"},{localizedString:"Salomon Smith Barney",code:"SALOMONSMITHBARNEY"},{localizedString:"Schroders",code:"SCHRODERS"},{localizedString:"Triodos Bank",code:"TRIODOSBANK"},{localizedString:"UNO-e",code:"UNOE"}],[n.Country.FI]:[{localizedString:"Aktia Savings Bank",code:"AKTIASAVINGSBANK"},{localizedString:"Bank of Åland",code:"BANKOFALAND"},{localizedString:"eQ Bank",code:"EQBANK"},{localizedString:"Evli Bank",code:"EVLIBANK"},{localizedString:"Helsinki OP Bank",code:"HELSINKIOPBANK"},{localizedString:"Kaupthing Bank",code:"KAUPTHINGBANK"},{localizedString:"Nordea Bank Finland",code:"NORDEABANKFINLAND"},{localizedString:"Other",code:"NO_TYPE"},{localizedString:"OP-Kotipankki",code:"OPKOTIPANKKI"},{localizedString:"Pohjola Bank",code:"POHJOLABANK"},{localizedString:"Sampo Bank",code:"SAMPOBANK"},{localizedString:"S-Bank",code:"SBANK"},{localizedString:"SEB Gyllenberg Private Bank",code:"SEBGYLLENBERGPRIVATE"},{localizedString:"Suomen AsuntoHypoPankki",code:"SUOMENASUNTOHYPOPANK"},{localizedString:"Tapiola Bank",code:"TAPIOLABANK"}],[n.Country.FR]:[{localizedString:"Axa Banque",code:"AXA"},{localizedString:"Banque Populaire",code:"BANQPOPUL"},{localizedString:"La Banque Postale",code:"BANQPOSTA"},{localizedString:"Banque Casino",code:"BANQUECASINO"},{localizedString:"Banque de France",code:"BANQUEDEFRANCE"},{localizedString:"Barclays",code:"BARCLAYS"},{localizedString:"BforBank",code:"BFORBANK"},{localizedString:"BNP Paribas",code:"BNP"},{localizedString:"Boursorama Banque",code:"BOURSORAMA"},{localizedString:"BRED",code:"BRED"},{localizedString:"Caisse d'Épargne",code:"CAISSEEPAR"},{localizedString:"Carrefour-Banque",code:"CARREFOURBANQUE"},{localizedString:"CIC",code:"CIC"},{localizedString:"Crédit Mutuel de Bretagne",code:"CMB"},{localizedString:"Crédit Mutuel Nord Europe",code:"CMNE"},{localizedString:"Crédit Agricole",code:"CREDAGRIC"},{localizedString:"Crédit Coopératif",code:"CREDCOOPE"},{localizedString:"Crédit Foncier",code:"CREDFONCI"},{localizedString:"Crédit Mutuel",code:"CREDMUTUEL"},{localizedString:"Crédit du Nord",code:"CREDNORD"},{localizedString:"Fortuneo Banque",code:"FORTUNEOBANQUE"},{localizedString:"Groupama Banque",code:"GROUPAMA"},{localizedString:"HSBC",code:"HSBC"},{localizedString:"ING Direct",code:"INGDIRECT"},{localizedString:"LCL",code:"LCL"},{localizedString:"Autre",code:"NO_TYPE"},{localizedString:"Société Générale",code:"SOGE"}],[n.Country.GB]:[{localizedString:"Barclays Bank",code:"BARCLAYS"},{localizedString:"Coutts",code:"COUTTS"},{localizedString:"HBOS",code:"HBOS"},{localizedString:"HSBC",code:"HSBC"},{localizedString:"Lloyds Banking Group",code:"LLOYDS"},{localizedString:"NatWest",code:"NATWEST"},{localizedString:"Other",code:"NO_TYPE"},{localizedString:"Royal Bank of Scotland (RBS)",code:"RBS"},{localizedString:"Santander",code:"SANTANDER"},{localizedString:"Standard Chartered",code:"STANDCHAR"},{localizedString:"Virgin Money",code:"VIRGINMONEY"},{localizedString:"Yorkshire Bank",code:"YORKSHIRE"},{localizedString:"Yorkshire Building Society",code:"YORKSHIREBS"}],[n.Country.GT]:[{localizedString:"Agromercantil",code:"AGROMERCANTIL"},{localizedString:"Azteca Bank",code:"AZTECABANK"},{localizedString:"BAC Bank",code:"BACBANK"},{localizedString:"Bank of Antigua",code:"BANKOFANTIGUA"},{localizedString:"Bantrab Bank",code:"BANTRABBANK"},{localizedString:"Citi Bank",code:"CITIBANK"},{localizedString:"Credito Hipotecario Bank",code:"CREDITOHIPOTECARIOBA"},{localizedString:"De Credito Bank",code:"DECREDITOBANK"},{localizedString:"Ficohsa Bank",code:"FICOHSABANK"},{localizedString:"G&T Continental Bank",code:"GTCONTINENTALBANK"},{localizedString:"Industrial bank",code:"INDUSTRIALBANK"},{localizedString:"Inmobiliario Bank",code:"INMOBILIARIOBANK"},{localizedString:"Internacional Bank",code:"INTERNACIONALBANK"},{localizedString:"Other",code:"NO_TYPE"},{localizedString:"Reformador Bank",code:"REFORMADORBANK"},{localizedString:"Vivibanco Bank",code:"VIVIBANCOBANK"}],[n.Country.HK]:[{localizedString:"Bank of China",code:"BANKOFCHINA"},{localizedString:"Bank of East Asia, The",code:"BANKOFEASTASIATHE"},{localizedString:"China CITIC Bank International",code:"CHINACITICBANKINTERN"},{localizedString:"China Construction Bank",code:"CHINACONSTRUCTIONBAN"},{localizedString:"Chiyu Banking Corporation",code:"CHIYUBANKINGCORPORAT"},{localizedString:"Chong Hing Bank",code:"CHONGHINGBANK"},{localizedString:"Citibank",code:"CITIBANK"},{localizedString:"Dah Sing Bank",code:"DAHSINGBANK"},{localizedString:"DBS Bank",code:"DBSBANK"},{localizedString:"Fubon Bank",code:"FUBONBANK"},{localizedString:"Hang Seng Bank",code:"HANGSENGBANK"},{localizedString:"Hongkong and Shanghai Banking Corporation, The",code:"HONGKONGANDSHANGHAIB"},{localizedString:"Industrial and Commercial Bank of China",code:"INDUSTRIALANDCOMMERC"},{localizedString:"Nanyang Commercial Bank",code:"NANYANGCOMMERCIALBAN"},{localizedString:"Other",code:"NO_TYPE"},{localizedString:"OCBC Wing Hang Bank",code:"OCBCWINGHANGBANK"},{localizedString:"Public Bank",code:"PUBLICBANK"},{localizedString:"Shanghai Commercial Bank",code:"SHANGHAICOMMERCIALBA"},{localizedString:"Standard Chartered Bank",code:"STANDARDCHARTEREDBAN"},{localizedString:"Tai Sang Bank",code:"TAISANGBANK"},{localizedString:"Tai Yau Bank",code:"TAIYAUBANK"},{localizedString:"Wing Lung Bank",code:"WINGLUNGBANK"}],[n.Country.IE]:[{localizedString:"ACC Bank",code:"ACCBANK"},{localizedString:"Allied Irish Banks",code:"ALLIEDIRISHBANKS"},{localizedString:"Anglo Irish Bank",code:"ANGLOIRISHBANK"},{localizedString:"Bank of Ireland",code:"BANKOFIRELAND"},{localizedString:"Barclays Bank Ireland",code:"BARCLAYSBANKIRELAND"},{localizedString:"Bear Stearns Bank",code:"BEARSTEARNSBANK"},{localizedString:"Capmark Bank Europe",code:"CAPMARKBANKEUROPE"},{localizedString:"Citibank Europe",code:"CITIBANKEUROPE"},{localizedString:"Fortis Prime Fund Solutions Bank",code:"FORTISPRIMEFUNDSOLUT"},{localizedString:"Goldman Sachs Bank",code:"GOLDMANSACHSBANK"},{localizedString:"Goldman Sachs Private Bank",code:"GOLDMANSACHSPRIVATEB"},{localizedString:"Helaba Dublin Landesbank Hessen-Thüringen International",code:"HELABADUBLINLANDESBA"},{localizedString:"Hewlett-Packard International Bank",code:"HEWLETTPACKARDINTERN"},{localizedString:"Hypo Public Finance Bank",code:"HYPOPUBLICFINANCEBAN"},{localizedString:"Intesa Sanpaolo Bank Ireland",code:"INTESASANPAOLOBANKIR"},{localizedString:"Irish Life & Permanent",code:"IRISHLIFEPERMANENT"},{localizedString:"JP Morgan Bank",code:"JPMORGANBANK"},{localizedString:"KBC Bank Ireland",code:"KBCBANKIRELAND"},{localizedString:"LGT Bank",code:"LGTBANK"},{localizedString:"Merrill Lynch International Bank",code:"MERRILLLYNCHINTERNAT"},{localizedString:"Naspa Dublin",code:"NASPADUBLIN"},{localizedString:"Other",code:"NO_TYPE"},{localizedString:"Pfizer International Bank Europe",code:"PFIZERINTERNATIONALB"},{localizedString:"PFPC Bank",code:"PFPCBANK"}],[n.Country.IN]:[{localizedString:"ABN AMRO India",code:"ABNAMROINDIA"},{localizedString:"Abu Dhabi Commercial Bank India",code:"ABUDHABICOMMERCIALBA"},{localizedString:"Allahabad Bank",code:"ALLAHABADBANK"},{localizedString:"Andhra Bank",code:"ANDHRABANK"},{localizedString:"Axis Bank Limited",code:"AXISBANKLIMITED"},{localizedString:"Canara Bank",code:"CANARABANK"},{localizedString:"Central Bank of India",code:"CENTRALBANKOFINDIA"},{localizedString:"Centurion Bank of Punjab",code:"CENTURIONBANKOFPUNJA"},{localizedString:"Citibank India",code:"CITIBANKINDIA"},{localizedString:"Corporation Bank",code:"CORPORATIONBANK"},{localizedString:"DCB (Development Credit Bank Ltd)",code:"DCBDEVELOPMENTCREDIT"},{localizedString:"Dena Bank",code:"DENABANK"},{localizedString:"Deutsche Bank",code:"DEUTSCHEBANK"},{localizedString:"Guardian Souharda Sahakari Bank Niyamita",code:"GUARDIANSOUHARDASAHA"},{localizedString:"HDFC Bank",code:"HDFCBANK"},{localizedString:"IDBI Bank",code:"IDBIBANK"},{localizedString:"Indian Bank",code:"INDIANBANK"},{localizedString:"Indian Overseas Bank",code:"INDIANOVERSEASBANK"},{localizedString:"IndusInd Bank Ltd",code:"INDUSINDBANKLTD"},{localizedString:"ING Vysya Bank",code:"INGVYSYABANK"},{localizedString:"Maharshtra Bank",code:"MAHARSHTRABANK"},{localizedString:"Mandvi Bank",code:"MANDVIBANK"},{localizedString:"Other",code:"NO_TYPE"},{localizedString:"Oriental Bank of Commerce",code:"ORIENTALBANKOFCOMMER"},{localizedString:"Saraswat Bank",code:"SARASWATBANK"},{localizedString:"South Indian Bank",code:"SOUTHINDIANBANK"},{localizedString:"Standard Chartered Bank",code:"STANDARDCHARTEREDBAN"},{localizedString:"State Bank of Hyderabad",code:"STATEBANKOFHYDERABAD"},{localizedString:"State Bank of Saurashtra",code:"STATEBANKOFSAURASHTR"},{localizedString:"Syndicate Bank",code:"SYNDICATEBANK"},{localizedString:"The Federal Bank Ltd",code:"THEFEDERALBANKLTD"},{localizedString:"UCO Bank",code:"UCOBANK"},{localizedString:"Union Bank of India",code:"UNIONBANKOFINDIA"}],[n.Country.IT]:[{localizedString:"Banca Carige",code:"BANCACARIGE"},{localizedString:"Banca Pop. Milano",code:"BANCAPOPMILANO"},{localizedString:"Banco Popolare",code:"BANCOPOPOLARE"},{localizedString:"B Monte Paschi Siena",code:"BMONTEPASCHISIENA"},{localizedString:"Credito Emiliano",code:"CREDITOEMILIANO"},{localizedString:"Intesa Sanpaolo",code:"INTESASANPAOLO"},{localizedString:"Mediobanca",code:"MEDIOBANCA"},{localizedString:"Other",code:"NO_TYPE"},{localizedString:"Ubi Banca",code:"UBIBANCA"},{localizedString:"Unicredit - Capitalia",code:"UNICREDITCAPITALIA"}],[n.Country.JP]:[{localizedString:"Chiba Kōgyō Bank",code:"CHIBAKOGYOBANK"},{localizedString:"Mitsubishi UFJ Financial Group",code:"MITSUBISHIUFJFINANCI"},{localizedString:"Mitsubishi UFJ Trust and Banking Corporation",code:"MITSUBISHIUFJTRUSTAN"},{localizedString:"Mizuho Bank",code:"MIZUHOBANK"},{localizedString:"Mizuho Corporate Bank",code:"MIZUHOCORPORATEBANK"},{localizedString:"Mizuho Financial Group",code:"MIZUHOFINANCIALGROUP"},{localizedString:"Mizuho Trust & Banking Co.",code:"MIZUHOTRUSTBANKINGCO"},{localizedString:"Other",code:"NO_TYPE"},{localizedString:"Sumitomo Mitsui Banking Corporation",code:"SUMITOMOMITSUIBANKIN"},{localizedString:"Sumitomo Mitsui Financial Group",code:"SUMITOMOMITSUIFINANC"},{localizedString:"The Bank of Tokyo-Mitsubishi UFJ",code:"THEBANKOFTOKYOMITSUB"},{localizedString:"The Master Trust Bank of Japan",code:"THEMASTERTRUSTBANKOF"},{localizedString:"The Senshū Bank",code:"THESENSHUBANK"},{localizedString:"Trust & Custody Services Bank",code:"TRUSTCUSTODYSERVICES"}],[n.Country.LU]:[{localizedString:"Banque et Caisse d'Epargne de l'Etat, Luxembourg (BCEE)",code:"BANQUEETCAISSEDEPARG"},{localizedString:"Banque Générale du Luxembourg",code:"BANQUEGENERALEDULUXE"},{localizedString:"Banque IPPA et Associes Luxembourg",code:"BANQUEIPPAETASSOCIES"},{localizedString:"Banque UCL",code:"BANQUEUCL"},{localizedString:"Die Sparkasse Bremen",code:"DIESPARKASSEBREMEN"},{localizedString:"KBL",code:"KBL"},{localizedString:"Other",code:"NO_TYPE"},{localizedString:"Robeco Bank",code:"ROBECOBANK"},{localizedString:"SGZ-Bank International",code:"SGZBANKINTERNATIONAL"},{localizedString:"WestLB International",code:"WESTLBINTERNATIONAL"}],[n.Country.MX]:[{localizedString:"Banamex",code:"BANAMEX"},{localizedString:"Banca Afirme",code:"BANCAAFIRME"},{localizedString:"Banco Azteca",code:"BANCOAZTECA"},{localizedString:"Banco del Bajio",code:"BANCODELBAJIO"},{localizedString:"Banco J.P. Morgan",code:"BANCOJPMORGAN"},{localizedString:"Bank of America Mexico",code:"BANKOFAMERICAMEXICO"},{localizedString:"Banorte",code:"BANORTE"},{localizedString:"BanRegio",code:"BANREGIO"},{localizedString:"BBVA Bancomer",code:"BBVABANCOMER"},{localizedString:"Deutsche Bank Mexico",code:"DEUTSCHEBANKMEXICO"},{localizedString:"HSBC Mexico",code:"HSBCMEXICO"},{localizedString:"Inbursa",code:"INBURSA"},{localizedString:"ING Bank Mexico",code:"INGBANKMEXICO"},{localizedString:"Interacciones",code:"INTERACCIONES"},{localizedString:"Invex Controladora",code:"INVEXCONTROLADORA"},{localizedString:"Ixe Banco",code:"IXEBANCO"},{localizedString:"Mifel",code:"MIFEL"},{localizedString:"Monex",code:"MONEX"},{localizedString:"Other",code:"NO_TYPE"},{localizedString:"Santander Mexico",code:"SANTANDERMEXICO"},{localizedString:"Scotiabank Inverlat",code:"SCOTIABANKINVERLAT"}],[n.Country.NL]:[{localizedString:"ABN Amro",code:"ABNAMRO"},{localizedString:"Amsterdam Trade Bank",code:"AMSTERDAMTRADEBANK"},{localizedString:"ASN Bank",code:"ASNBANK"},{localizedString:"Bank Mendes Gans",code:"BANKMENDESGANS"},{localizedString:"Bank Nederlandse Gemeenten",code:"BANKNEDERLANDSEGEMEE"},{localizedString:"BinckBank",code:"BINCKBANK"},{localizedString:"Credit Europe Bank",code:"CREDITEUROPEBANK"},{localizedString:"Demir Halk Bank",code:"DEMIRHALKBANK"},{localizedString:"Friesland Bank",code:"FRIESLANDBANK"},{localizedString:"GE Artesia Bank",code:"GEARTESIABANK"},{localizedString:"ING Group",code:"INGGROUP"},{localizedString:"Kempen & Co",code:"KEMPENCO"},{localizedString:"Nederlandse Waterschapsbank",code:"NEDERLANDSEWATERSCHA"},{localizedString:"Netherlands Development Finance Company",code:"NETHERLANDSDEVELOPME"},{localizedString:"NIBC Bank",code:"NIBCBANK"},{localizedString:"Other",code:"NO_TYPE"},{localizedString:"Rabobank",code:"RABOBANK"},{localizedString:"SNS Bank",code:"SNSBANK"},{localizedString:"Triodos Bank",code:"TRIODOSBANK"},{localizedString:"Van Lanschot",code:"VANLANSCHOT"}],[n.Country.NO]:[{localizedString:"Bolig- og Næringsbanken",code:"BOLIGOGNAERINGSBANKE"},{localizedString:"Cresco",code:"CRESCO"},{localizedString:"DnB NOR Bank",code:"DNBNORBANK"},{localizedString:"Fokus Bank",code:"FOKUSBANK"},{localizedString:"Landkreditt Bank",code:"LANDKREDITTBANK"},{localizedString:"Netfonds Bank",code:"NETFONDSBANK"},{localizedString:"Nordea Bank Norge",code:"NORDEABANKNORGE"},{localizedString:"Nordlandsbanken",code:"NORDLANDSBANKEN"},{localizedString:"Other",code:"NO_TYPE"},{localizedString:"Pareto Bank",code:"PARETOBANK"},{localizedString:"Santander Consumer Bank",code:"SANTANDERCONSUMERBAN"},{localizedString:"SEB Privatbanken",code:"SEBPRIVATBANKEN"},{localizedString:"Storebrand Bank",code:"STOREBRANDBANK"},{localizedString:"Verdibanken",code:"VERDIBANKEN"},{localizedString:"Voss Veksel- og Landmandsbank",code:"VOSSVEKSELOGLANDMAND"},{localizedString:"yA Bank",code:"YABANK"}],[n.Country.NZ]:[{localizedString:"ANZ Bank of New Zealand Limited",code:"ANZBANKOFNEWZEALANDL"},{localizedString:"ASB Bank Limited",code:"ASBBANKLIMITED"},{localizedString:"Australia and New Zealand Banking Group",code:"AUSTRALIAANDNEWZEALA"},{localizedString:"Bank of Baroda (New Zealand) Limited",code:"BANKOFBARODANEWZEALA"},{localizedString:"Bank of China (New Zealand) Limited",code:"BANKOFCHINANEWZEALAN"},{localizedString:"Bank of India (New Zealand) Limited",code:"BANKOFINDIANEWZEALAN"},{localizedString:"Bank of New Zealand",code:"BANKOFNEWZEALAND"},{localizedString:"China Construction Bank",code:"CHINACONSTRUCTIONBAN"},{localizedString:"Citibank N.A.",code:"CITIBANKNA"},{localizedString:"Commonwealth Bank of Australia",code:"COMMONWEALTHBANKOFAU"},{localizedString:"Deutsche Bank AG",code:"DEUTSCHEBANKAG"},{localizedString:"Heartland Bank Limited",code:"HEARTLANDBANKLIMITED"},{localizedString:"ICBC",code:"ICBC"},{localizedString:"JPMorgan Chase Bank N.A.",code:"JPMORGANCHASEBANKNA"},{localizedString:"Kiwibank Limited",code:"KIWIBANKLIMITED"},{localizedString:"Kookmin Bank",code:"KOOKMINBANK"},{localizedString:"Other",code:"NO_TYPE"},{localizedString:"Rabobank Nederland",code:"RABOBANKNEDERLAND"},{localizedString:"Rabobank New Zealand Limited",code:"RABOBANKNEWZEALANDLI"},{localizedString:"Southland Building Society",code:"SOUTHLANDBUILDINGSOC"},{localizedString:"The Bank of Tokyo-Mitsubishi UFJ",code:"THEBANKOFTOKYOMITSUB"},{localizedString:"The Co-operative Bank Limited",code:"THECOOPERATIVEBANKLI"},{localizedString:"The Hongkong and Shanghai Banking Corp",code:"THEHONGKONGANDSHANGH"},{localizedString:"TSB Bank Limited",code:"TSBBANKLIMITED"},{localizedString:"Westpac Banking Corporation",code:"WESTPACBANKINGCORPOR"},{localizedString:"Westpac New Zealand Limited",code:"WESTPACNEWZEALANDLIM"}],[n.Country.PE]:[{localizedString:"Agrobanco",code:"AGROBANCO"},{localizedString:"Banco Azteca",code:"BANCOAZTECA"},{localizedString:"Banco Central de Reserva del Perú",code:"BANCOCENTRALDERESERV"},{localizedString:"Banco de Comercio",code:"BANCODECOMERCIO"},{localizedString:"Banco del Trabajo",code:"BANCODELTRABAJO"},{localizedString:"Banco de Materiales",code:"BANCODEMATERIALES"},{localizedString:"Banco Falabella",code:"BANCOFALABELLA"},{localizedString:"Banco Financiero",code:"BANCOFINANCIERO"},{localizedString:"Banco Interamericano de Finanzas",code:"BANCOINTERAMERICANOD"},{localizedString:"Banco Ripley",code:"BANCORIPLEY"},{localizedString:"BBVA",code:"BBVA"},{localizedString:"BCP",code:"BCP"},{localizedString:"Citibank",code:"CITIBANK"},{localizedString:"Deutsche Bank",code:"DEUTSCHEBANK"},{localizedString:"HSBC",code:"HSBC"},{localizedString:"Interbank",code:"INTERBANK"},{localizedString:"Mibanco",code:"MIBANCO"},{localizedString:"Other",code:"NO_TYPE"},{localizedString:"Santander",code:"SANTANDER"},{localizedString:"Scotiabank",code:"SCOTIABANK"},{localizedString:"Standard Chartered",code:"STANDARDCHARTERED"}],[n.Country.PH]:[{localizedString:"Al-Amanah Islamic Investment Bank of the Philippines",code:"ALAMANAHISLAMICINVES"},{localizedString:"Asia United Bank",code:"ASIAUNITEDBANK"},{localizedString:"Australia and New Zealand Banking Group",code:"AUSTRALIAANDNEWZEALA"},{localizedString:"Bangkok Bank",code:"BANGKOKBANK"},{localizedString:"Bank of America, N.A.",code:"BANKOFAMERICANA"},{localizedString:"Bank of China",code:"BANKOFCHINA"},{localizedString:"Bank of Commerce",code:"BANKOFCOMMERCE"},{localizedString:"Bank of the Philippine Islands",code:"BANKOFTHEPHILIPPINEI"},{localizedString:"BDO Private Bank",code:"BDOPRIVATEBANK"},{localizedString:"BDO Unibank",code:"BDOUNIBANK"},{localizedString:"Chinabank",code:"CHINABANK"},{localizedString:"Citibank",code:"CITIBANK"},{localizedString:"CTBC Bank",code:"CTBCBANK"},{localizedString:"Deutsche Bank",code:"DEUTSCHEBANK"},{localizedString:"Development Bank of the Philippines",code:"DEVELOPMENTBANKOFTHE"},{localizedString:"EastWest Bank",code:"EASTWESTBANK"},{localizedString:"ING Group",code:"INGGROUP"},{localizedString:"JPMorgan Chase",code:"JPMORGANCHASE"},{localizedString:"Land Bank of the Philippines",code:"LANDBANKOFTHEPHILIPP"},{localizedString:"Maybank Philippines, Inc.",code:"MAYBANKPHILIPPINESIN"},{localizedString:"Mega International Commercial Bank",code:"MEGAINTERNATIONALCOM"},{localizedString:"Metropolitan Bank and Trust Company",code:"METROPOLITANBANKANDT"},{localizedString:"Mizuho Bank, Ltd.",code:"MIZUHOBANKLTD"},{localizedString:"Other",code:"NO_TYPE"},{localizedString:"Philippine Bank of Communications",code:"PHILIPPINEBANKOFCOMM"},{localizedString:"Philippine National Bank",code:"PHILIPPINENATIONALBA"},{localizedString:"Philippine Veterans Bank",code:"PHILIPPINEVETERANSBA"},{localizedString:"Philtrust Bank",code:"PHILTRUSTBANK"},{localizedString:"Rizal Commercial Banking Corporation",code:"RIZALCOMMERCIALBANKI"},{localizedString:"Robinsons Bank",code:"ROBINSONSBANK"},{localizedString:"Security Bank",code:"SECURITYBANK"},{localizedString:"Standard Chartered Bank",code:"STANDARDCHARTEREDBAN"},{localizedString:"The Bank of Tokyo-Mitsubishi UFJ, Ltd.",code:"THEBANKOFTOKYOMITSUB"},{localizedString:"The Hongkong and Shanghai Banking Corporation",code:"THEHONGKONGANDSHANGH"},{localizedString:"Union Bank of the Philippines",code:"UNIONBANKOFTHEPHILIP"},{localizedString:"United Coconut Planters Bank",code:"UNITEDCOCONUTPLANTER"}],[n.Country.PT]:[{localizedString:"Atlantico - Banco Português do Atlântico",code:"ATLANTICOBANCOPORTUG"},{localizedString:"Banco 7",code:"BANCO7"},{localizedString:"Banco BPI",code:"BANCOBPI"},{localizedString:"Banco Comercial Português",code:"BANCOCOMERCIALPORTUG"},{localizedString:"Banco de Portugal",code:"BANCODEPORTUGAL"},{localizedString:"Banco Espirito Santo",code:"BANCOESPIRITOSANTO"},{localizedString:"Banco Internacional de Crédito, S.A.",code:"BANCOINTERNACIONALDE"},{localizedString:"Banco Mello",code:"BANCOMELLO"},{localizedString:"Banif - Banco Internacional do Funchal",code:"BANIFBANCOINTERNACIO"},{localizedString:"Barclays Netbanking Portugal",code:"BARCLAYSNETBANKINGPO"},{localizedString:"Caixa Geral de Depósitos",code:"CAIXAGERALDEDEPOSITO"},{localizedString:"Cisf - Banco de Investimento, S.A.",code:"CISFBANCODEINVESTIME"},{localizedString:"Other",code:"NO_TYPE"}],[n.Country.SE]:[{localizedString:"ABN AMRO Bank Sweden",code:"ABNAMROBANKSWEDEN"},{localizedString:"First Baltic Savings",code:"FIRSTBALTICSAVINGS"},{localizedString:"FöreningsSparbanken (Swedbank)",code:"FORENINGSSPARBANKENS"},{localizedString:"JP Bank",code:"JPBANK"},{localizedString:"Nordbanken",code:"NORDBANKEN"},{localizedString:"Other",code:"NO_TYPE"},{localizedString:"Östgöta Enskilda Bank",code:"OSTGOTAENSKILDABANK"},{localizedString:"Skandia Banken",code:"SKANDIABANKEN"},{localizedString:"Skandinaviska Enskilda Banken",code:"SKANDINAVISKAENSKILD"},{localizedString:"Sparbanken Sverige - Swedbank",code:"SPARBANKENSVERIGESWE"},{localizedString:"Stadshypotek",code:"STADSHYPOTEK"},{localizedString:"Svenska Handelsbanken-SHB",code:"SVENSKAHANDELSBANKEN"},{localizedString:"Sveriges Riksbank",code:"SVERIGESRIKSBANK"},{localizedString:"Trygg Hansa",code:"TRYGGHANSA"},{localizedString:"Westra Wermlands Sparbank",code:"WESTRAWERMLANDSSPARB"}],[n.Country.SG]:[{localizedString:"Bank of America",code:"BANKOFAMERICA"},{localizedString:"Barclays bank",code:"BARCLAYSBANK"},{localizedString:"Citibank",code:"CITIBANK"},{localizedString:"Developmental Bank of Singapore",code:"DEVELOPMENTALBANKOFS"},{localizedString:"HSBC",code:"HSBC"},{localizedString:"Other",code:"NO_TYPE"},{localizedString:"OCBC Bank",code:"OCBCBANK"},{localizedString:"Post Office Savings Bank",code:"POSTOFFICESAVINGSBAN"},{localizedString:"Standard Chartered Bank",code:"STANDARDCHARTEREDBAN"},{localizedString:"State Bank of India",code:"STATEBANKOFINDIA"},{localizedString:"United Overseas Bank",code:"UNITEDOVERSEASBANK"}],[n.Country.US]:[{localizedString:"Ally Bank",code:"ALLY"},{localizedString:"American Express",code:"AMERICANEXPRESS"},{localizedString:"Associated Bank",code:"ASSOCIATED"},{localizedString:"Bank of the West",code:"BANKWEST"},{localizedString:"Barclays Bank",code:"BARCLAYS"},{localizedString:"BMO Harris Bank",code:"BMO"},{localizedString:"Bank of America",code:"BOA"},{localizedString:"Branch Banking and Trust Company",code:"BRANCH"},{localizedString:"Capital One",code:"CAPITALONE"},{localizedString:"Charles Schwab Bank",code:"CHARSCHWA"},{localizedString:"Chase Bank USA",code:"CHASE"},{localizedString:"Citibank",code:"CITIBANK"},{localizedString:"Citizens Bank of Pennsylvania",code:"CITIZENS"},{localizedString:"City National Bank",code:"CITYNATIONAL"},{localizedString:"Compass Bank",code:"COMPASS"},{localizedString:"CU Hawaii",code:"CUHAWAII"},{localizedString:"Discover Bank",code:"DISCOVER"},{localizedString:"E-Trade Bank",code:"ETRADE"},{localizedString:"Fifth Third Bank",code:"FIFTHTHIRD"},{localizedString:"First-Citizens Bank and Trust Company",code:"FIRSTCITIZENS"},{localizedString:"Fortune Bank",code:"FORTUNEBANK"},{localizedString:"Harris National Association",code:"HARRIS"},{localizedString:"HSBC Bank USA",code:"HSBC"},{localizedString:"Hudson City Savings Bank",code:"HUDSONCITY"},{localizedString:"The Huntington National Bank",code:"HUNTINGTON"},{localizedString:"ING Bank, fsb",code:"INGBANK"},{localizedString:"JPMorgan Chase Bank",code:"JPMORGAN"},{localizedString:"Keybank",code:"KEYBANK"},{localizedString:"Manufacturers and Traders Trust Company",code:"MANUFACTUR"},{localizedString:"Other",code:"NO_TYPE"},{localizedString:"New York Community Bank",code:"NYCOMMUNITY"},{localizedString:"The Bank of New York Mellon",code:"NYMELLON"},{localizedString:"PNC Bank",code:"PNC"},{localizedString:"Banco Popular de Puerto Rico",code:"PUERTORICO"},{localizedString:"RBC Bank",code:"RBC"},{localizedString:"RBS Citizens",code:"RBS"},{localizedString:"Regions Bank",code:"REGIONS"},{localizedString:"Sovereign Bank",code:"SOVEREIGN"},{localizedString:"State Street Bank and Trust Co.",code:"STATESTREET"},{localizedString:"SunTrust Bank",code:"SUNTRUST"},{localizedString:"Silicon Valley Bank",code:"SVB"},{localizedString:"Synovus Bank",code:"SYNOVUS"},{localizedString:"TD Bank",code:"TDBANK"},{localizedString:"UBS Bank",code:"UBS"},{localizedString:"Union Bank",code:"UNION"},{localizedString:"USAA Federal Savings Bank",code:"USAAFEDERAL"},{localizedString:"U.S. Bank",code:"USBANK"},{localizedString:"Wells Fargo",code:"WELLSFARGO"}],[n.Country.VE]:[{localizedString:"100% Banco",code:"100BANCO"},{localizedString:"Bancaribe",code:"BANCARIBE"},{localizedString:"Banco Bicentenario",code:"BANCOBICENTENARIO"},{localizedString:"Banco de Venezuela",code:"BANCODEVENEZUELA"},{localizedString:"Banco Industrial de Venezuela",code:"BANCOINDUSTRIALDEVEN"},{localizedString:"Banco Mercantil",code:"BANCOMERCANTIL"},{localizedString:"Banco Nacional de Crédito",code:"BANCONACIONALDECREDI"},{localizedString:"Banco Occidental de Descuento",code:"BANCOOCCIDENTALDEDES"},{localizedString:"Banco Venezolano de Crédito",code:"BANCOVENEZOLANODECRE"},{localizedString:"Bandes",code:"BANDES"},{localizedString:"Banesco",code:"BANESCO"},{localizedString:"BBVA Provincial",code:"BBVAPROVINCIAL"},{localizedString:"Central Bank of Venezuela",code:"CENTRALBANKOFVENEZUE"},{localizedString:"Fondo Común",code:"FONDOCOMUN"},{localizedString:"Other",code:"NO_TYPE"},{localizedString:"Sofitasa",code:"SOFITASA"},{localizedString:"Women's Development Bank",code:"WOMENSDEVELOPMENTBAN"}],[n.Country.ZA]:[{localizedString:"Absa",code:"ABSA"},{localizedString:"Capitec Banking Group",code:"CAPITECBANKINGGROUP"},{localizedString:"FNB",code:"FNB"},{localizedString:"Investec Bank",code:"INVESTECBANK"},{localizedString:"Nedbank",code:"NEDBANK"},{localizedString:"Other",code:"NO_TYPE"},{localizedString:"Standard Bank",code:"STANDARDBANK"}]}},85406:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getAllBanks=t.getBanks=void 0;const n=r(82912);t.getBanks=function(e){return{banks:n.banks[e.country]}},t.getAllBanks=function(){return n.banks}},43651:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(53576);t.default={[n.Country.AD]:376,[n.Country.AE]:971,[n.Country.AF]:93,[n.Country.AG]:1268,[n.Country.AI]:1264,[n.Country.AL]:355,[n.Country.AM]:374,[n.Country.AO]:244,[n.Country.AQ]:672,[n.Country.AR]:54,[n.Country.AS]:1684,[n.Country.AT]:43,[n.Country.AU]:61,[n.Country.AW]:297,[n.Country.AX]:358,[n.Country.AZ]:994,[n.Country.BA]:387,[n.Country.BB]:1246,[n.Country.BD]:880,[n.Country.BE]:32,[n.Country.BF]:226,[n.Country.BG]:359,[n.Country.BH]:973,[n.Country.BI]:257,[n.Country.BJ]:229,[n.Country.BL]:590,[n.Country.BM]:1441,[n.Country.BN]:673,[n.Country.BO]:591,[n.Country.BR]:55,[n.Country.BS]:1242,[n.Country.BT]:975,[n.Country.BW]:267,[n.Country.BY]:375,[n.Country.BZ]:501,[n.Country.CA]:1,[n.Country.CC]:61,[n.Country.CD]:243,[n.Country.CF]:236,[n.Country.CG]:242,[n.Country.CH]:41,[n.Country.CI]:225,[n.Country.CK]:682,[n.Country.CL]:56,[n.Country.CM]:237,[n.Country.CN]:86,[n.Country.CO]:57,[n.Country.CR]:506,[n.Country.CU]:53,[n.Country.CV]:238,[n.Country.CX]:61,[n.Country.CY]:357,[n.Country.CZ]:420,[n.Country.DE]:49,[n.Country.DJ]:253,[n.Country.DK]:45,[n.Country.DM]:1767,[n.Country.DO]:1849,[n.Country.DZ]:213,[n.Country.EC]:593,[n.Country.EE]:372,[n.Country.EG]:20,[n.Country.ER]:291,[n.Country.ES]:34,[n.Country.ET]:251,[n.Country.FI]:358,[n.Country.FJ]:679,[n.Country.FK]:500,[n.Country.FM]:691,[n.Country.FO]:298,[n.Country.FR]:33,[n.Country.GA]:241,[n.Country.GB]:44,[n.Country.GD]:1473,[n.Country.GE]:995,[n.Country.GF]:594,[n.Country.GG]:44,[n.Country.GH]:233,[n.Country.GI]:350,[n.Country.GL]:299,[n.Country.GM]:220,[n.Country.GN]:224,[n.Country.GP]:590,[n.Country.GQ]:240,[n.Country.GR]:30,[n.Country.GS]:500,[n.Country.GT]:502,[n.Country.GU]:1671,[n.Country.GW]:245,[n.Country.GY]:595,[n.Country.HK]:852,[n.Country.HN]:504,[n.Country.HR]:385,[n.Country.HT]:509,[n.Country.HU]:36,[n.Country.ID]:62,[n.Country.IE]:353,[n.Country.IL]:972,[n.Country.IM]:44,[n.Country.IN]:91,[n.Country.IO]:246,[n.Country.IQ]:964,[n.Country.IR]:98,[n.Country.IS]:354,[n.Country.IT]:39,[n.Country.JE]:44,[n.Country.JM]:1876,[n.Country.JO]:962,[n.Country.JP]:81,[n.Country.KE]:254,[n.Country.KG]:996,[n.Country.KH]:855,[n.Country.KI]:686,[n.Country.KM]:269,[n.Country.KN]:1869,[n.Country.KP]:850,[n.Country.KR]:82,[n.Country.KW]:965,[n.Country.KY]:345,[n.Country.KZ]:77,[n.Country.LA]:856,[n.Country.LB]:961,[n.Country.LC]:1758,[n.Country.LI]:423,[n.Country.LK]:94,[n.Country.LR]:231,[n.Country.LS]:266,[n.Country.LT]:370,[n.Country.LU]:352,[n.Country.LV]:371,[n.Country.LY]:218,[n.Country.MA]:212,[n.Country.MC]:377,[n.Country.MD]:373,[n.Country.ME]:382,[n.Country.MF]:590,[n.Country.MG]:261,[n.Country.MH]:692,[n.Country.MK]:389,[n.Country.ML]:223,[n.Country.MM]:95,[n.Country.MN]:976,[n.Country.MO]:853,[n.Country.MP]:1670,[n.Country.MQ]:596,[n.Country.MR]:222,[n.Country.MS]:1664,[n.Country.MT]:356,[n.Country.MU]:230,[n.Country.MV]:960,[n.Country.MW]:265,[n.Country.MX]:52,[n.Country.MY]:60,[n.Country.MZ]:258,[n.Country.NA]:264,[n.Country.NC]:687,[n.Country.NE]:227,[n.Country.NF]:672,[n.Country.NG]:234,[n.Country.NI]:505,[n.Country.NL]:31,[n.Country.NO]:47,[n.Country.NP]:977,[n.Country.NR]:674,[n.Country.NU]:683,[n.Country.NZ]:64,[n.Country.OM]:968,[n.Country.PA]:507,[n.Country.PE]:51,[n.Country.PF]:689,[n.Country.PG]:675,[n.Country.PH]:63,[n.Country.PK]:92,[n.Country.PL]:48,[n.Country.PM]:508,[n.Country.PN]:872,[n.Country.PR]:1939,[n.Country.PS]:970,[n.Country.PT]:351,[n.Country.PW]:680,[n.Country.PY]:595,[n.Country.QA]:974,[n.Country.RE]:262,[n.Country.RO]:40,[n.Country.RS]:381,[n.Country.RU]:7,[n.Country.RW]:250,[n.Country.SA]:966,[n.Country.SB]:677,[n.Country.SC]:248,[n.Country.SD]:249,[n.Country.SE]:46,[n.Country.SG]:65,[n.Country.SH]:290,[n.Country.SI]:386,[n.Country.SJ]:47,[n.Country.SK]:421,[n.Country.SL]:232,[n.Country.SM]:378,[n.Country.SN]:221,[n.Country.SO]:252,[n.Country.SR]:597,[n.Country.ST]:239,[n.Country.SV]:503,[n.Country.SY]:963,[n.Country.SZ]:268,[n.Country.TC]:1649,[n.Country.TD]:235,[n.Country.TG]:228,[n.Country.TH]:66,[n.Country.TJ]:992,[n.Country.TK]:690,[n.Country.TL]:670,[n.Country.TM]:993,[n.Country.TN]:216,[n.Country.TO]:676,[n.Country.TR]:90,[n.Country.TT]:1868,[n.Country.TV]:688,[n.Country.TW]:886,[n.Country.TZ]:255,[n.Country.UA]:380,[n.Country.UG]:256,[n.Country.US]:1,[n.Country.UY]:598,[n.Country.UZ]:998,[n.Country.VA]:379,[n.Country.VC]:1784,[n.Country.VE]:58,[n.Country.VG]:1284,[n.Country.VI]:1340,[n.Country.VN]:84,[n.Country.VU]:678,[n.Country.WF]:681,[n.Country.WS]:685,[n.Country.XK]:383,[n.Country.YE]:967,[n.Country.YT]:262,[n.Country.ZA]:27,[n.Country.ZM]:260,[n.Country.ZW]:263}},39003:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getAllCallingCodes=t.processQuery=void 0;const n=r(53576),o=r(43651);t.processQuery=function(){return{type:n.StaticDataQueryType.CALLING_CODES,collection:o.default}},t.getAllCallingCodes=function(){return o.default}},80814:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GeographicStatesLevel1=t.GeographicStatesLevel0=void 0;const n=r(53576);t.GeographicStatesLevel0={[n.Country.FR]:{"FR-0-42":{code:"42",name:"Alsace"},"FR-0-72":{code:"72",name:"Aquitaine"},"FR-0-83":{code:"83",name:"Auvergne"},"FR-0-25":{code:"25",name:"Basse-Normandie"},"FR-0-26":{code:"26",name:"Bourgogne"},"FR-0-53":{code:"53",name:"Bretagne"},"FR-0-24":{code:"24",name:"Centre"},"FR-0-21":{code:"21",name:"Champagne-Ardenne"},"FR-0-94":{code:"94",name:"Corse"},"FR-0-43":{code:"43",name:"Franche-Comte"},"FR-0-01":{code:"01",name:"Guadeloupe"},"FR-0-03":{code:"03",name:"Guyane"},"FR-0-23":{code:"23",name:"Haute-Normandie"},"FR-0-11":{code:"11",name:"Ile-de-France"},"FR-0-04":{code:"04",name:"La Reunion"},"FR-0-91":{code:"91",name:"Languedoc-Roussillon"},"FR-0-74":{code:"74",name:"Limousin"},"FR-0-41":{code:"41",name:"Lorraine"},"FR-0-02":{code:"02",name:"Martinique"},"FR-0-73":{code:"73",name:"Midi-Pyrenees"},"FR-0-31":{code:"31",name:"Nord-Pas-de-Calais"},"FR-0-52":{code:"52",name:"Pays de la Loire"},"FR-0-22":{code:"22",name:"Picardie"},"FR-0-54":{code:"54",name:"Poitou-Charentes"},"FR-0-93":{code:"93",name:"Provence-Alpes-Cote d'Azur"},"FR-0-82":{code:"82",name:"Rhone-Alpes"}},[n.Country.GB]:{"GB-0-67":{code:"67",name:"Aberdeenshire"},"GB-0-68":{code:"68",name:"Angus"},"GB-0-69":{code:"69",name:"Antrim"},"GB-0-70":{code:"70",name:"Ards"},"GB-0-71":{code:"71",name:"Argyll"},"GB-0-72":{code:"72",name:"Armagh"},"GB-0-01":{code:"01",name:"Avon"},"GB-0-73":{code:"73",name:"Ayrshire"},"GB-0-74":{code:"74",name:"Ballymena"},"GB-0-75":{code:"75",name:"Ballymoney"},"GB-0-76":{code:"76",name:"Banbridge"},"GB-0-77":{code:"77",name:"Banffshire"},"GB-0-78":{code:"78",name:"Bath & NthEstSomerset"},"GB-0-02":{code:"02",name:"Bedfordshire"},"GB-0-79":{code:"79",name:"Belfast"},"GB-0-03":{code:"03",name:"Berkshire"},"GB-0-80":{code:"80",name:"Berwickshire"},"GB-0-81":{code:"81",name:"Blackburn"},"GB-0-82":{code:"82",name:"Blackpool"},"GB-0-04":{code:"04",name:"Borders"},"GB-0-83":{code:"83",name:"Bournemouth"},"GB-0-84":{code:"84",name:"Bracknell Forest"},"GB-0-85":{code:"85",name:"Brighton & Hove"},"GB-0-86":{code:"86",name:"Bristol"},"GB-0-05":{code:"05",name:"Buckinghamshire"},"GB-0-87":{code:"87",name:"Caithness"},"GB-0-06":{code:"06",name:"Cambridgeshire"},"GB-0-88":{code:"88",name:"Carrickfergus"},"GB-0-89":{code:"89",name:"Castlereagh"},"GB-0-07":{code:"07",name:"Central"},"GB-0-08":{code:"08",name:"Cheshire"},"GB-0-91":{code:"91",name:"Clackmannanshire"},"GB-0-12":{code:"12",name:"Cleveland"},"GB-0-09":{code:"09",name:"Clwyd"},"GB-0-92":{code:"92",name:"Coleraine"},"GB-0-93":{code:"93",name:"Cookstown"},"GB-0-10":{code:"10",name:"Cornwall"},"GB-0-94":{code:"94",name:"Craigavon"},"GB-0-11":{code:"11",name:"Cumbria"},"GB-0-95":{code:"95",name:"Darlington"},"GB-0-13":{code:"13",name:"Derbyshire"},"GB-0-16":{code:"16",name:"Devon"},"GB-0-14":{code:"14",name:"Dorset"},"GB-0-96":{code:"96",name:"Down"},"GB-0-97":{code:"97",name:"Dumfries a. Galloway"},"GB-0-98":{code:"98",name:"Dumfriesshire"},"GB-0-99":{code:"99",name:"Dunbartonshire"},"GB-0-100":{code:"100",name:"Dungannon"},"GB-0-15":{code:"15",name:"Durham"},"GB-0-17":{code:"17",name:"Dyfed"},"GB-0-101":{code:"101",name:"East Lothian"},"GB-0-102":{code:"102",name:"East Riding"},"GB-0-103":{code:"103",name:"East Sussex"},"GB-0-18":{code:"18",name:"Essex"},"GB-0-104":{code:"104",name:"Fermanagh"},"GB-0-19":{code:"19",name:"Fife"},"GB-0-20":{code:"20",name:"Gloucestershire"},"GB-0-22":{code:"22",name:"Grampian"},"GB-0-36":{code:"36",name:"Greater London"},"GB-0-21":{code:"21",name:"Greater Manchester"},"GB-0-23":{code:"23",name:"Gwent"},"GB-0-24":{code:"24",name:"Gwynedd"},"GB-0-105":{code:"105",name:"Halton"},"GB-0-25":{code:"25",name:"Hampshire"},"GB-0-106":{code:"106",name:"Hartlepool"},"GB-0-29":{code:"29",name:"Hereford and Worcs."},"GB-0-107":{code:"107",name:"Herefordshire"},"GB-0-27":{code:"27",name:"Hertfordshire"},"GB-0-108":{code:"108",name:"Highland"},"GB-0-28":{code:"28",name:"Humberside"},"GB-0-109":{code:"109",name:"Inverness-Shire"},"GB-0-110":{code:"110",name:"Isle Of Arran"},"GB-0-111":{code:"111",name:"Isle Of Barra"},"GB-0-112":{code:"112",name:"Isle Of Benbecula"},"GB-0-113":{code:"113",name:"Isle Of Bute"},"GB-0-114":{code:"114",name:"Isle Of Canna"},"GB-0-115":{code:"115",name:"Isle Of Coll"},"GB-0-116":{code:"116",name:"Isle Of Colonsay"},"GB-0-117":{code:"117",name:"Isle Of Cumbrae"},"GB-0-118":{code:"118",name:"Isle Of Eigg"},"GB-0-119":{code:"119",name:"Isle Of Gigha"},"GB-0-120":{code:"120",name:"Isle Of Harris"},"GB-0-121":{code:"121",name:"Isle Of Iona"},"GB-0-122":{code:"122",name:"Isle Of Islay"},"GB-0-123":{code:"123",name:"Isle Of Jura"},"GB-0-124":{code:"124",name:"Isle Of Lewis"},"GB-0-126":{code:"126",name:"Isle Of Mull"},"GB-0-127":{code:"127",name:"Isle Of North Uist"},"GB-0-128":{code:"128",name:"Isle Of Rum"},"GB-0-129":{code:"129",name:"Isle Of Scalpay"},"GB-0-131":{code:"131",name:"Isle Of Skye"},"GB-0-132":{code:"132",name:"Isle Of South Uist"},"GB-0-133":{code:"133",name:"Isle Of Tiree"},"GB-0-31":{code:"31",name:"Isle of Wight"},"GB-0-130":{code:"130",name:"Isles Of Scilly"},"GB-0-32":{code:"32",name:"Kent"},"GB-0-134":{code:"134",name:"Kincardineshire"},"GB-0-135":{code:"135",name:"Kingston-Upon-Hull"},"GB-0-136":{code:"136",name:"Kirkcudbrightshire"},"GB-0-137":{code:"137",name:"Lanarkshire"},"GB-0-33":{code:"33",name:"Lancashire"},"GB-0-138":{code:"138",name:"Larne"},"GB-0-139":{code:"139",name:"Leicester City"},"GB-0-34":{code:"34",name:"Leicestershire"},"GB-0-140":{code:"140",name:"Limavady"},"GB-0-35":{code:"35",name:"Lincolnshire"},"GB-0-141":{code:"141",name:"Lisburn"},"GB-0-142":{code:"142",name:"London"},"GB-0-143":{code:"143",name:"Londonderry"},"GB-0-37":{code:"37",name:"Lothian"},"GB-0-144":{code:"144",name:"Luton"},"GB-0-145":{code:"145",name:"Magherafelt"},"GB-0-39":{code:"39",name:"Merseyside"},"GB-0-38":{code:"38",name:"Mid Glamorgan"},"GB-0-146":{code:"146",name:"Middlesbrough"},"GB-0-65":{code:"65",name:"Middlesex"},"GB-0-147":{code:"147",name:"Midlothian"},"GB-0-148":{code:"148",name:"Milton Keynes"},"GB-0-149":{code:"149",name:"Morayshire"},"GB-0-150":{code:"150",name:"Moyle"},"GB-0-151":{code:"151",name:"Nairn"},"GB-0-152":{code:"152",name:"Newbury"},"GB-0-153":{code:"153",name:"Newry and Mourne"},"GB-0-154":{code:"154",name:"Newtownabbey"},"GB-0-41":{code:"41",name:"Norfolk"},"GB-0-155":{code:"155",name:"North Down"},"GB-0-156":{code:"156",name:"North Humberside"},"GB-0-157":{code:"157",name:"North Lincolnshire"},"GB-0-158":{code:"158",name:"North Somerset"},"GB-0-62":{code:"62",name:"North Yorkshire"},"GB-0-40":{code:"40",name:"Northamptonshire"},"GB-0-43":{code:"43",name:"Northumberland"},"GB-0-159":{code:"159",name:"Nottingham City"},"GB-0-42":{code:"42",name:"Nottinghamshire"},"GB-0-160":{code:"160",name:"NthEast Lincolnshire"},"GB-0-161":{code:"161",name:"Omagh"},"GB-0-162":{code:"162",name:"Orkney"},"GB-0-44":{code:"44",name:"Oxfordshire"},"GB-0-163":{code:"163",name:"Peeblesshire"},"GB-0-164":{code:"164",name:"Perthshire"},"GB-0-165":{code:"165",name:"Peterborough"},"GB-0-166":{code:"166",name:"Plymouth"},"GB-0-167":{code:"167",name:"Poole"},"GB-0-168":{code:"168",name:"Portsmouth"},"GB-0-45":{code:"45",name:"Powys"},"GB-0-169":{code:"169",name:"Reading"},"GB-0-170":{code:"170",name:"Redcar and Cleveland"},"GB-0-171":{code:"171",name:"Renfrewshire"},"GB-0-172":{code:"172",name:"Rochester Up. Medway"},"GB-0-173":{code:"173",name:"Ross-Shire"},"GB-0-175":{code:"175",name:"Roxburghshire"},"GB-0-176":{code:"176",name:"Rutland"},"GB-0-26":{code:"26",name:"Scotland"},"GB-0-177":{code:"177",name:"Shetland"},"GB-0-48":{code:"48",name:"Shropshire"},"GB-0-178":{code:"178",name:"Slough"},"GB-0-50":{code:"50",name:"Somerset"},"GB-0-47":{code:"47",name:"South Glamorgan"},"GB-0-179":{code:"179",name:"South Humberside"},"GB-0-63":{code:"63",name:"South Yorkshire"},"GB-0-180":{code:"180",name:"Southampton"},"GB-0-181":{code:"181",name:"Southend"},"GB-0-51":{code:"51",name:"Staffordshire"},"GB-0-182":{code:"182",name:"Sth. Gloucestershire"},"GB-0-183":{code:"183",name:"Stirlingshire"},"GB-0-184":{code:"184",name:"Stockton-on-Tees"},"GB-0-185":{code:"185",name:"Strabane"},"GB-0-46":{code:"46",name:"Strathclyde"},"GB-0-49":{code:"49",name:"Suffolk"},"GB-0-53":{code:"53",name:"Surrey"},"GB-0-52":{code:"52",name:"Sussex"},"GB-0-186":{code:"186",name:"Sutherland"},"GB-0-54":{code:"54",name:"Tayside"},"GB-0-187":{code:"187",name:"Thamesdown"},"GB-0-188":{code:"188",name:"Thurrock"},"GB-0-189":{code:"189",name:"Torbay"},"GB-0-55":{code:"55",name:"Tyne and Wear"},"GB-0-190":{code:"190",name:"Tyrone"},"GB-0-191":{code:"191",name:"Warrington"},"GB-0-56":{code:"56",name:"Warwickshire"},"GB-0-57":{code:"57",name:"West Glamorgan"},"GB-0-192":{code:"192",name:"West Lothian"},"GB-0-59":{code:"59",name:"West Midlands"},"GB-0-193":{code:"193",name:"West Sussex"},"GB-0-64":{code:"64",name:"West Yorkshire"},"GB-0-194":{code:"194",name:"Western Isles"},"GB-0-195":{code:"195",name:"Wigtownshire"},"GB-0-58":{code:"58",name:"Wiltshire"},"GB-0-196":{code:"196",name:"Windsor & Maidenhead"},"GB-0-197":{code:"197",name:"Wokingham"},"GB-0-60":{code:"60",name:"Worcestershire"},"GB-0-198":{code:"198",name:"Wrekin"},"GB-0-199":{code:"199",name:"York"},"GB-0-61":{code:"61",name:"Yorkshire"},"GB-0-1001":{code:"1001",name:"Blaenau Gwent"},"GB-0-1002":{code:"1002",name:"Bridgend"},"GB-0-1003":{code:"1003",name:"Caerphilly"},"GB-0-1004":{code:"1004",name:"Cardiff"},"GB-0-1005":{code:"1005",name:"Carmarthenshire"},"GB-0-1006":{code:"1006",name:"Ceredigion"},"GB-0-1007":{code:"1007",name:"Channel Islands"},"GB-0-1008":{code:"1008",name:"Conwy"},"GB-0-1009":{code:"1009",name:"Denbighshire"},"GB-0-1010":{code:"1010",name:"East Ayrshire"},"GB-0-1011":{code:"1011",name:"East Dunbartonshire"},"GB-0-1012":{code:"1012",name:"East Renfrewshire"},"GB-0-1013":{code:"1013",name:"Edinburgh City"},"GB-0-1014":{code:"1014",name:"Falkirk"},"GB-0-1015":{code:"1015",name:"Flintshire"},"GB-0-1016":{code:"1016",name:"Glasgow"},"GB-0-1017":{code:"1017",name:"Inverclyde"},"GB-0-1018":{code:"1018",name:"Isle of Anglesey"},"GB-0-1019":{code:"1019",name:"Isle of Man"},"GB-0-1020":{code:"1020",name:"Merthyr Tydfil"},"GB-0-1021":{code:"1021",name:"Monmouthshire"},"GB-0-1022":{code:"1022",name:"Moray"},"GB-0-1023":{code:"1023",name:"Neath Port Talbot"},"GB-0-1024":{code:"1024",name:"Newport"},"GB-0-1025":{code:"1025",name:"North Ayrshire"},"GB-0-1026":{code:"1026",name:"North Lanarkshire"},"GB-0-1027":{code:"1027",name:"Pembrokeshire"},"GB-0-1028":{code:"1028",name:"Rhondda Cynon Taff"},"GB-0-1029":{code:"1029",name:"South Ayrshire"},"GB-0-1030":{code:"1030",name:"South Lanarkshire"},"GB-0-1031":{code:"1031",name:"Stirling"},"GB-0-1032":{code:"1032",name:"Swansea"},"GB-0-1033":{code:"1033",name:"The Vale of Glamorgan"},"GB-0-1034":{code:"1034",name:"Torfaen"},"GB-0-1035":{code:"1035",name:"West Dunbartonshire"},"GB-0-1036":{code:"1036",name:"Wrexham"}},[n.Country.US]:{"US-0-AL":{code:"AL",name:"Alabama"},"US-0-AK":{code:"AK",name:"Alaska"},"US-0-AS":{code:"AS",name:"American Samoa"},"US-0-AZ":{code:"AZ",name:"Arizona"},"US-0-AR":{code:"AR",name:"Arkansas"},"US-0-AA":{code:"AA",name:"Armed Forces America"},"US-0-AE":{code:"AE",name:"Armed Forces Europe"},"US-0-AP":{code:"AP",name:"Armed Forces Pacific"},"US-0-CA":{code:"CA",name:"California"},"US-0-CEI":{code:"CEI",name:"Canton & Enderbury Islands"},"US-0-CO":{code:"CO",name:"Colorado"},"US-0-CT":{code:"CT",name:"Connecticut"},"US-0-DC":{code:"DC",name:"District of Columbia"},"US-0-DE":{code:"DE",name:"Delaware"},"US-0-FL":{code:"FL",name:"Florida"},"US-0-GA":{code:"GA",name:"Georgia"},"US-0-GU":{code:"GU",name:"Guam"},"US-0-HI":{code:"HI",name:"Hawaii"},"US-0-IA":{code:"IA",name:"Iowa"},"US-0-ID":{code:"ID",name:"Idaho"},"US-0-IL":{code:"IL",name:"Illinois"},"US-0-IN":{code:"IN",name:"Indiana"},"US-0-KS":{code:"KS",name:"Kansas"},"US-0-KY":{code:"KY",name:"Kentucky"},"US-0-LA":{code:"LA",name:"Louisiana"},"US-0-MA":{code:"MA",name:"Massachusetts"},"US-0-MD":{code:"MD",name:"Maryland"},"US-0-ME":{code:"ME",name:"Maine"},"US-0-MP":{code:"MP",name:"Mariana Islands"},"US-0-MI":{code:"MI",name:"Michigan"},"US-0-MN":{code:"MN",name:"Minnesota"},"US-0-MS":{code:"MS",name:"Mississippi"},"US-0-MO":{code:"MO",name:"Missouri"},"US-0-MT":{code:"MT",name:"Montana"},"US-0-NE":{code:"NE",name:"Nebraska"},"US-0-NV":{code:"NV",name:"Nevada"},"US-0-NH":{code:"NH",name:"New Hampshire"},"US-0-NJ":{code:"NJ",name:"New Jersey"},"US-0-NM":{code:"NM",name:"New Mexico"},"US-0-NY":{code:"NY",name:"New York"},"US-0-NC":{code:"NC",name:"North Carolina"},"US-0-ND":{code:"ND",name:"North Dakota"},"US-0-NMI":{code:"NMI",name:"North Mariana Islands"},"US-0-OH":{code:"OH",name:"Ohio"},"US-0-OK":{code:"OK",name:"Oklahoma"},"US-0-OR":{code:"OR",name:"Oregon"},"US-0-PW":{code:"PW",name:"Palau"},"US-0-PA":{code:"PA",name:"Pennsylvania"},"US-0-PR":{code:"PR",name:"Puerto Rico"},"US-0-RI":{code:"RI",name:"Rhode Island"},"US-0-SC":{code:"SC",name:"South Carolina"},"US-0-SD":{code:"SD",name:"South Dakota"},"US-0-TN":{code:"TN",name:"Tennessee"},"US-0-TX":{code:"TX",name:"Texas"},"US-0-UT":{code:"UT",name:"Utah"},"US-0-VT":{code:"VT",name:"Vermont"},"US-0-VI":{code:"VI",name:"Virgin Islands, US"},"US-0-VA":{code:"VA",name:"Virginia"},"US-0-WA":{code:"WA",name:"Washington"},"US-0-WV":{code:"WV",name:"West Virginia"},"US-0-WI":{code:"WI",name:"Wisconsin"},"US-0-WY":{code:"WY",name:"Wyoming"}},[n.Country.CA]:{"CA-0-AB":{code:"AB",name:"Alberta"},"CA-0-BC":{code:"BC",name:"British Columbia"},"CA-0-MB":{code:"MB",name:"Manitoba"},"CA-0-NB":{code:"NB",name:"New Brunswick"},"CA-0-NL":{code:"NL",name:"Newfoundland and Labrador"},"CA-0-NS":{code:"NS",name:"Nova Scotia"},"CA-0-NT":{code:"NT",name:"Northwest Territories"},"CA-0-NU":{code:"NU",name:"Nunavut"},"CA-0-ON":{code:"ON",name:"Ontario"},"CA-0-PE":{code:"PE",name:"Prince Edward Island"},"CA-0-QC":{code:"QC",name:"Québec"},"CA-0-SK":{code:"SK",name:"Saskatchewan"},"CA-0-YT":{code:"YT",name:"Yukon"}},[n.Country.AU]:{"AU-0-SA":{code:"SA",name:"South Australia"},"AU-0-WA":{code:"WA",name:"Western Australia"},"AU-0-NSW":{code:"NSW",name:"New South Wales"},"AU-0-QLD":{code:"QLD",name:"Queensland"},"AU-0-TAS":{code:"TAS",name:"Tasmania"},"AU-0-VIC":{code:"VIC",name:"Victoria"},"AU-0-ACT":{code:"ACT",name:"Australian Capital Territory"},"AU-0-JBT":{code:"JBT",name:"Jervis Bay Territory"},"AU-0-NT":{code:"NT",name:"Northern Territory"}},[n.Country.IE]:{"IE-0-05":{code:"05",name:"Carlow"},"IE-0-04":{code:"04",name:"Clare"},"IE-0-03":{code:"03",name:"Cork"},"IE-0-07":{code:"07",name:"Donegal"},"IE-0-06":{code:"06",name:"Dublin"},"IE-0-10":{code:"10",name:"Galway"},"IE-0-13":{code:"13",name:"Cavan"},"IE-0-14":{code:"14",name:"Kerry"},"IE-0-11":{code:"11",name:"Kildare"},"IE-0-12":{code:"12",name:"Kilkenny"},"IE-0-19":{code:"19",name:"Laois"},"IE-0-18":{code:"18",name:"Leitrim"},"IE-0-17":{code:"17",name:"Limerick"},"IE-0-16":{code:"16",name:"Longford"},"IE-0-20":{code:"20",name:"Louth"},"IE-0-23":{code:"23",name:"Mayo"},"IE-0-22":{code:"22",name:"Meath"},"IE-0-21":{code:"21",name:"Monaghan"},"IE-0-24":{code:"24",name:"Offaly"},"IE-0-25":{code:"25",name:"Roscommon"},"IE-0-26":{code:"26",name:"Sligo"},"IE-0-27":{code:"27",name:"Tipperary"},"IE-0-29":{code:"29",name:"Waterford"},"IE-0-31":{code:"31",name:"Westmeath"},"IE-0-32":{code:"32",name:"Wexford"},"IE-0-30":{code:"30",name:"Wicklow"}},[n.Country.ES]:{"ES-0-AN":{code:"AN",name:"Andalucia"},"ES-0-AR":{code:"AR",name:"Aragón"},"ES-0-AS":{code:"AS",name:"Asturias, Principado de"},"ES-0-CN":{code:"CN",name:"Canarias"},"ES-0-CB":{code:"CB",name:"Cantabria"},"ES-0-CM":{code:"CM",name:"Castilla-La Mancha"},"ES-0-CL":{code:"CL",name:"Castilla y León"},"ES-0-CT":{code:"CT",name:"Cataluña"},"ES-0-EX":{code:"EX",name:"Extremadura"},"ES-0-GA":{code:"GA",name:"Galicia"},"ES-0-IB":{code:"IB",name:"Illes Balears"},"ES-0-RI":{code:"RI",name:"La Rioja"},"ES-0-MD":{code:"MD",name:"Madrid, Comunidad de"},"ES-0-MC":{code:"MC",name:"Murcia, Región de"},"ES-0-NC":{code:"NC",name:"Navarra, Comunidad Foral de"},"ES-0-PV":{code:"PV",name:"País Vasco"},"ES-0-VC":{code:"VC",name:"Valenciana, Comunitat"},"ES-0-CE":{code:"CE",name:"Ceuta"},"ES-0-ML":{code:"ML",name:"Melilla"}},[n.Country.MX]:{"MX-0-DIF":{code:"DIF",name:"Distrito Federal"},"MX-0-AGU":{code:"AGU",name:"Aguascalientes"},"MX-0-BCN":{code:"BCN",name:"Baja California"},"MX-0-BCS":{code:"BCS",name:"Baja California Sur"},"MX-0-CAM":{code:"CAM",name:"Campeche"},"MX-0-COA":{code:"COA",name:"Coahuila"},"MX-0-COL":{code:"COL",name:"Colima"},"MX-0-CHP":{code:"CHP",name:"Chiapas"},"MX-0-CHH":{code:"CHH",name:"Chihuahua"},"MX-0-DUR":{code:"DUR",name:"Durango"},"MX-0-GUA":{code:"GUA",name:"Guanajuato"},"MX-0-GRO":{code:"GRO",name:"Guerrero"},"MX-0-HID":{code:"HID",name:"Hidalgo"},"MX-0-JAL":{code:"JAL",name:"Jalisco"},"MX-0-MEX":{code:"MEX",name:"México"},"MX-0-MIC":{code:"MIC",name:"Michoacán"},"MX-0-MOR":{code:"MOR",name:"Morelos"},"MX-0-NAY":{code:"NAY",name:"Nayarit"},"MX-0-NLE":{code:"NLE",name:"Nuevo León"},"MX-0-OAX":{code:"OAX",name:"Oaxaca"},"MX-0-PUE":{code:"PUE",name:"Puebla"},"MX-0-QUE":{code:"QUE",name:"Querétaro"},"MX-0-ROO":{code:"ROO",name:"Quintana Roo"},"MX-0-SLP":{code:"SLP",name:"San Luis Potosí"},"MX-0-SIN":{code:"SIN",name:"Sinaloa"},"MX-0-SON":{code:"SON",name:"Sonora"},"MX-0-TAB":{code:"TAB",name:"Tabasco"},"MX-0-TAM":{code:"TAM",name:"Tamaulipas"},"MX-0-TLA":{code:"TLA",name:"Tlaxcala"},"MX-0-VER":{code:"VER",name:"Veracruz"},"MX-0-YUC":{code:"YUC",name:"Yucatán"},"MX-0-ZAC":{code:"ZAC",name:"Zacatecas"}},[n.Country.CO]:{"CO-0-DC":{code:"DC",name:"Distrito Capital de Bogotá"},"CO-0-AMA":{code:"AMA",name:"Amazonas"},"CO-0-ANT":{code:"ANT",name:"Antioquia"},"CO-0-ARA":{code:"ARA",name:"Arauca"},"CO-0-ATL":{code:"ATL",name:"Atlántico"},"CO-0-BOL":{code:"BOL",name:"Bolívar"},"CO-0-BOY":{code:"BOY",name:"Boyacá"},"CO-0-CAL":{code:"CAL",name:"Caldas"},"CO-0-CAQ":{code:"CAQ",name:"Caquetá"},"CO-0-CAS":{code:"CAS",name:"Casanare"},"CO-0-CAU":{code:"CAU",name:"Cauca"},"CO-0-CES":{code:"CES",name:"Cesar"},"CO-0-COR":{code:"COR",name:"Córdoba"},"CO-0-CUN":{code:"CUN",name:"Cundinamarca"},"CO-0-CHO":{code:"CHO",name:"Chocó"},"CO-0-GUA":{code:"GUA",name:"Guainía"},"CO-0-GUV":{code:"GUV",name:"Guaviare"},"CO-0-HUI":{code:"HUI",name:"Huila"},"CO-0-LAG":{code:"LAG",name:"La Guajira"},"CO-0-MAG":{code:"MAG",name:"Magdalena"},"CO-0-MET":{code:"MET",name:"Meta"},"CO-0-NAR":{code:"NAR",name:"Nariño"},"CO-0-NSA":{code:"NSA",name:"Norte de Santander"},"CO-0-PUT":{code:"PUT",name:"Putumayo"},"CO-0-QUI":{code:"QUI",name:"Quindío"},"CO-0-RIS":{code:"RIS",name:"Risaralda"},"CO-0-SAP":{code:"SAP",name:"San Andrés, Providencia y Santa Catalina"},"CO-0-SAN":{code:"SAN",name:"Santander"},"CO-0-SUC":{code:"SUC",name:"Sucre"},"CO-0-TOL":{code:"TOL",name:"Tolima"},"CO-0-VAC":{code:"VAC",name:"Valle del Cauca"},"CO-0-VAU":{code:"VAU",name:"Vaupés"},"CO-0-VID":{code:"VID",name:"Vichada"}},[n.Country.PE]:{"PE-0-CAL":{code:"CAL",name:"El Callao"},"PE-0-LMA":{code:"LMA",name:"Municipalidad Metropolitana de Lima"},"PE-0-AMA":{code:"AMA",name:"Amazonas"},"PE-0-ANC":{code:"ANC",name:"Ancash"},"PE-0-APU":{code:"APU",name:"Apurímac"},"PE-0-ARE":{code:"ARE",name:"Arequipa"},"PE-0-AYA":{code:"AYA",name:"Ayacucho"},"PE-0-CAJ":{code:"CAJ",name:"Cajamarca"},"PE-0-CUS":{code:"CUS",name:"Cusco"},"PE-0-HUV":{code:"HUV",name:"Huancavelica"},"PE-0-HUC":{code:"HUC",name:"Huánuco"},"PE-0-ICA":{code:"ICA",name:"Ica"},"PE-0-JUN":{code:"JUN",name:"Junín"},"PE-0-LAL":{code:"LAL",name:"La Libertad"},"PE-0-LAM":{code:"LAM",name:"Lambayeque"},"PE-0-LIM":{code:"LIM",name:"Lima"},"PE-0-LOR":{code:"LOR",name:"Loreto"},"PE-0-MDD":{code:"MDD",name:"Madre de Dios"},"PE-0-MOQ":{code:"MOQ",name:"Moquegua"},"PE-0-PAS":{code:"PAS",name:"Pasco"},"PE-0-PIU":{code:"PIU",name:"Piura"},"PE-0-PUN":{code:"PUN",name:"Puno"},"PE-0-SAM":{code:"SAM",name:"San Martín"},"PE-0-TAC":{code:"TAC",name:"Tacna"},"PE-0-TUM":{code:"TUM",name:"Tumbes"},"PE-0-UCA":{code:"UCA",name:"Ucayali"}},[n.Country.CL]:{"CL-0-AI":{code:"AI",name:"Aisén del General Carlos Ibañez del Campo"},"CL-0-AN":{code:"AN",name:"Antofagasta"},"CL-0-AR":{code:"AR",name:"Araucanía"},"CL-0-AP":{code:"AP",name:"Arica y Parinacota"},"CL-0-AT":{code:"AT",name:"Atacama"},"CL-0-BI":{code:"BI",name:"Biobío"},"CL-0-CO":{code:"CO",name:"Coquimbo"},"CL-0-LI":{code:"LI",name:"Libertador General Bernardo O'Higgins"},"CL-0-LL":{code:"LL",name:"Los Lagos"},"CL-0-LR":{code:"LR",name:"Los Ríos"},"CL-0-MA":{code:"MA",name:"Magallanes y la Antártica Chilena"},"CL-0-ML":{code:"ML",name:"Maule"},"CL-0-RM":{code:"RM",name:"Metropolitana de Santiago"},"CL-0-TA":{code:"TA",name:"Tarapacá"},"CL-0-VS":{code:"VS",name:"Valparaíso"}},[n.Country.DE]:{"DE-0-BW":{code:"BW",name:"Baden-Württemberg"},"DE-0-BY":{code:"BY",name:"Bayern"},"DE-0-BE":{code:"BE",name:"Berlin"},"DE-0-BB":{code:"BB",name:"Brandenburg"},"DE-0-HB":{code:"HB",name:"Bremen"},"DE-0-HH":{code:"HH",name:"Hamburg"},"DE-0-HE":{code:"HE",name:"Hessen"},"DE-0-MV":{code:"MV",name:"Mecklenburg-Vorpommern"},"DE-0-NI":{code:"NI",name:"Niedersachsen"},"DE-0-NW":{code:"NW",name:"Nordrhein-Westfalen"},"DE-0-RP":{code:"RP",name:"Rheinland-Pfalz"},"DE-0-SL":{code:"SL",name:"Saarland"},"DE-0-SN":{code:"SN",name:"Sachsen"},"DE-0-ST":{code:"ST",name:"Sachsen-Anhalt"},"DE-0-SH":{code:"SH",name:"Schleswig-Holstein"},"DE-0-TH":{code:"TH",name:"Thüringen"}},[n.Country.IT]:{"IT-0-65":{code:"65",name:"Abruzzo"},"IT-0-77":{code:"77",name:"Basilicata"},"IT-0-78":{code:"78",name:"Calabria"},"IT-0-72":{code:"72",name:"Campania"},"IT-0-45":{code:"45",name:"Emilia-Romagna"},"IT-0-36":{code:"36",name:"Friuli-Venezia Giulia"},"IT-0-62":{code:"62",name:"Lazio"},"IT-0-42":{code:"42",name:"Liguria"},"IT-0-25":{code:"25",name:"Lombardia"},"IT-0-57":{code:"57",name:"Marche"},"IT-0-67":{code:"67",name:"Molise"},"IT-0-21":{code:"21",name:"Piemonte"},"IT-0-75":{code:"75",name:"Puglia"},"IT-0-88":{code:"88",name:"Sardegna"},"IT-0-82":{code:"82",name:"Sicilia"},"IT-0-52":{code:"52",name:"Toscana"},"IT-0-32":{code:"32",name:"Trentino Alto Adige"},"IT-0-55":{code:"55",name:"Umbria"},"IT-0-23":{code:"23",name:"Valle d'Aosta"},"IT-0-34":{code:"34",name:"Veneto"}},[n.Country.CH]:{"CH-0-AG":{code:"AG",name:"Aargau"},"CH-0-AR":{code:"AR",name:"Appenzell Ausserrhoden"},"CH-0-AI":{code:"AI",name:"Appenzell Innerrhoden"},"CH-0-BL":{code:"BL",name:"Basel-Landschaft"},"CH-0-BS":{code:"BS",name:"Basel-Stadt"},"CH-0-BE":{code:"BE",name:"Berne"},"CH-0-FR":{code:"FR",name:"Fribourg"},"CH-0-GE":{code:"GE",name:"Genève"},"CH-0-GL":{code:"GL",name:"Glarus"},"CH-0-GR":{code:"GR",name:"Graubünden"},"CH-0-JU":{code:"JU",name:"Jura"},"CH-0-LU":{code:"LU",name:"Luzern"},"CH-0-NE":{code:"NE",name:"Neuchâtel"},"CH-0-NW":{code:"NW",name:"Nidwalden"},"CH-0-OW":{code:"OW",name:"Obwalden"},"CH-0-SG":{code:"SG",name:"Sankt Gallen"},"CH-0-SH":{code:"SH",name:"Schaffhausen"},"CH-0-SZ":{code:"SZ",name:"Schwyz"},"CH-0-SO":{code:"SO",name:"Solothurn"},"CH-0-TG":{code:"TG",name:"Thurgau"},"CH-0-TI":{code:"TI",name:"Ticino"},"CH-0-UR":{code:"UR",name:"Uri"},"CH-0-VS":{code:"VS",name:"Valais"},"CH-0-VD":{code:"VD",name:"Vaud"},"CH-0-ZG":{code:"ZG",name:"Zug"},"CH-0-ZH":{code:"ZH",name:"Zürich"}},[n.Country.BE]:{"BE-0-BRU":{code:"BRU",name:"Bruxelles-Capitale, Région de"},"BE-0-VLG":{code:"VLG",name:"Vlaamse Gewest"},"BE-0-WAL":{code:"WAL",name:"Région wallonne"}},[n.Country.SE]:{"SE-0-K":{code:"K",name:"Blekinge län"},"SE-0-W":{code:"W",name:"Dalarnas län"},"SE-0-I":{code:"I",name:"Gotlands län"},"SE-0-X":{code:"X",name:"Gävleborgs län"},"SE-0-N":{code:"N",name:"Hallands län"},"SE-0-Z":{code:"Z",name:"Jämtlands län"},"SE-0-F":{code:"F",name:"Jönköpings län"},"SE-0-H":{code:"H",name:"Kalmar län"},"SE-0-G":{code:"G",name:"Kronobergs län"},"SE-0-BD":{code:"BD",name:"Norrbottens län"},"SE-0-M":{code:"M",name:"Skåne län"},"SE-0-AB":{code:"AB",name:"Stockholms län"},"SE-0-D":{code:"D",name:"Södermanlands län"},"SE-0-C":{code:"C",name:"Uppsala län"},"SE-0-S":{code:"S",name:"Värmlands län"},"SE-0-AC":{code:"AC",name:"Västerbottens län"},"SE-0-Y":{code:"Y",name:"Västernorrlands län"},"SE-0-U":{code:"U",name:"Västmanlands län"},"SE-0-O":{code:"O",name:"Västra Götalands län"},"SE-0-T":{code:"T",name:"Örebro län"},"SE-0-E":{code:"E",name:"Östergötlands län"}},[n.Country.NO]:{"NO-0-2":{code:"2",name:"Akershus"},"NO-0-9":{code:"9",name:"Aust-Agder"},"NO-0-6":{code:"6",name:"Buskerud"},"NO-0-20":{code:"20",name:"Finnmark"},"NO-0-4":{code:"4",name:"Hedmark"},"NO-0-12":{code:"12",name:"Hordaland"},"NO-0-15":{code:"15",name:"Møre og Romsdal"},"NO-0-18":{code:"18",name:"Nordland"},"NO-0-17":{code:"17",name:"Nord-Trøndelag"},"NO-0-5":{code:"5",name:"Oppland"},"NO-0-3":{code:"3",name:"Oslo"},"NO-0-11":{code:"11",name:"Rogaland"},"NO-0-14":{code:"14",name:"Sogn og Fjordane"},"NO-0-16":{code:"16",name:"Sør-Trøndelag"},"NO-0-8":{code:"8",name:"Telemark"},"NO-0-19":{code:"19",name:"Troms"},"NO-0-10":{code:"10",name:"Vest-Agder"},"NO-0-7":{code:"7",name:"Vestfold"},"NO-0-1":{code:"1",name:"Østfold"},"NO-0-22":{code:"22",name:"Jan Mayen"},"NO-0-21":{code:"21",name:"Svalbard"}},[n.Country.NL]:{"NL-0-DR":{code:"DR",name:"Drenthe"},"NL-0-FL":{code:"FL",name:"Flevoland"},"NL-0-FR":{code:"FR",name:"Fryslân"},"NL-0-GE":{code:"GE",name:"Gelderland"},"NL-0-GR":{code:"GR",name:"Groningen"},"NL-0-LI":{code:"LI",name:"Limburg"},"NL-0-NB":{code:"NB",name:"Noord-Brabant"},"NL-0-NH":{code:"NH",name:"Noord-Holland"},"NL-0-OV":{code:"OV",name:"Overijssel"},"NL-0-UT":{code:"UT",name:"Utrecht"},"NL-0-ZE":{code:"ZE",name:"Zeeland"},"NL-0-ZH":{code:"ZH",name:"Zuid-Holland"}},[n.Country.PT]:{"PT-0-1":{code:"1",name:"Aveiro"},"PT-0-2":{code:"2",name:"Beja"},"PT-0-3":{code:"3",name:"Braga"},"PT-0-4":{code:"4",name:"Bragança"},"PT-0-5":{code:"5",name:"Castelo Branco"},"PT-0-6":{code:"6",name:"Coimbra"},"PT-0-7":{code:"7",name:"Évora"},"PT-0-8":{code:"8",name:"Faro"},"PT-0-9":{code:"9",name:"Guarda"},"PT-0-10":{code:"10",name:"Leiria"},"PT-0-11":{code:"11",name:"Lisboa"},"PT-0-12":{code:"12",name:"Portalegre"},"PT-0-13":{code:"13",name:"Porto"},"PT-0-14":{code:"14",name:"Santarém"},"PT-0-15":{code:"15",name:"Setúbal"},"PT-0-16":{code:"16",name:"Viana do Castelo"},"PT-0-17":{code:"17",name:"Vila Real"},"PT-0-18":{code:"18",name:"Viseu"},"PT-0-20":{code:"20",name:"Região Autónoma dos Açores"},"PT-0-30":{code:"30",name:"Região Autónoma da Madeira"}}},t.GeographicStatesLevel1={[n.Country.AR]:{"AR-1-C":{code:"C",name:"Ciudad Autónoma de Buenos Aires"},"AR-1-B":{code:"B",name:"Buenos Aires"},"AR-1-K":{code:"K",name:"Catamarca"},"AR-1-H":{code:"H",name:"Chaco"},"AR-1-U":{code:"U",name:"Chubut"},"AR-1-X":{code:"X",name:"Córdoba"},"AR-1-W":{code:"W",name:"Corrientes"},"AR-1-E":{code:"E",name:"Entre Ríos"},"AR-1-P":{code:"P",name:"Formosa"},"AR-1-Y":{code:"Y",name:"Jujuy"},"AR-1-L":{code:"L",name:"La Pampa"},"AR-1-F":{code:"F",name:"La Rioja"},"AR-1-M":{code:"M",name:"Mendoza"},"AR-1-N":{code:"N",name:"Misiones"},"AR-1-Q":{code:"Q",name:"Neuquén"},"AR-1-R":{code:"R",name:"Río Negro"},"AR-1-A":{code:"A",name:"Salta"},"AR-1-J":{code:"J",name:"San Juan"},"AR-1-D":{code:"D",name:"San Luis"},"AR-1-Z":{code:"Z",name:"Santa Cruz"},"AR-1-S":{code:"S",name:"Santa Fe"},"AR-1-G":{code:"G",name:"Santiago del Estero"},"AR-1-V":{code:"V",name:"Tierra del Fuego"},"AR-1-T":{code:"T",name:"Tucumán"}},[n.Country.FR]:{"FR-1-01":{code:"01",name:"Ain"},"FR-1-02":{code:"02",name:"Aisne"},"FR-1-03":{code:"03",name:"Allier"},"FR-1-04":{code:"04",name:"Alpes (Hte-Provence)"},"FR-1-05":{code:"05",name:"Hautes Alpes"},"FR-1-06":{code:"06",name:"Alpes-Maritimes"},"FR-1-07":{code:"07",name:"Ardeche"},"FR-1-08":{code:"08",name:"Ardennes"},"FR-1-09":{code:"09",name:"Ariege"},"FR-1-10":{code:"10",name:"Aube"},"FR-1-11":{code:"11",name:"Aude"},"FR-1-12":{code:"12",name:"Aveyron"},"FR-1-67":{code:"67",name:"Bas-Rhin"},"FR-1-13":{code:"13",name:"Bouches-du-Rhone"},"FR-1-14":{code:"14",name:"Calvados"},"FR-1-15":{code:"15",name:"Cantal"},"FR-1-16":{code:"16",name:"Charente"},"FR-1-17":{code:"17",name:"Charente-Maritime"},"FR-1-18":{code:"18",name:"Cher"},"FR-1-19":{code:"19",name:"Correze"},"FR-1-97":{code:"97",name:"Corse-du-Nord"},"FR-1-20":{code:"20",name:"Corse-du-Sud"},"FR-1-21":{code:"21",name:"Cote-d'Or"},"FR-1-22":{code:"22",name:"Cotes-d'Armor"},"FR-1-23":{code:"23",name:"Creuse"},"FR-1-96":{code:"96",name:"D.O.M. T.O.M"},"FR-1-24":{code:"24",name:"Dordogne"},"FR-1-25":{code:"25",name:"Doubs"},"FR-1-26":{code:"26",name:"Drome"},"FR-1-91":{code:"91",name:"Essonne"},"FR-1-27":{code:"27",name:"Eure"},"FR-1-28":{code:"28",name:"Eure-et-Loir"},"FR-1-29":{code:"29",name:"Finistère"},"FR-1-30":{code:"30",name:"Gard"},"FR-1-31":{code:"31",name:"Haute Garonne"},"FR-1-32":{code:"32",name:"Gers"},"FR-1-33":{code:"33",name:"Gironde"},"FR-1-99":{code:"99",name:"Guyane"},"FR-1-100":{code:"100",name:"Haute-Corse"},"FR-1-68":{code:"68",name:"Haut-Rhin"},"FR-1-92":{code:"92",name:"Hauts-de-Seine"},"FR-1-34":{code:"34",name:"Herault"},"FR-1-35":{code:"35",name:"Ille-et-Vilaine"},"FR-1-36":{code:"36",name:"Indre"},"FR-1-37":{code:"37",name:"Indre-et-Loire"},"FR-1-38":{code:"38",name:"Isere"},"FR-1-39":{code:"39",name:"Jura"},"FR-1-40":{code:"40",name:"Landes"},"FR-1-41":{code:"41",name:"Loir-et-Cher"},"FR-1-42":{code:"42",name:"Loire"},"FR-1-43":{code:"43",name:"Haute Loire"},"FR-1-44":{code:"44",name:"Loire-Atlantique"},"FR-1-45":{code:"45",name:"Loiret"},"FR-1-46":{code:"46",name:"Lot"},"FR-1-47":{code:"47",name:"Lot-et-Garonne"},"FR-1-48":{code:"48",name:"Lozere"},"FR-1-49":{code:"49",name:"Maine-et-Loire"},"FR-1-50":{code:"50",name:"Manche"},"FR-1-51":{code:"51",name:"Marne"},"FR-1-52":{code:"52",name:"Haute Marne"},"FR-1-53":{code:"53",name:"Mayenne"},"FR-1-54":{code:"54",name:"Meurthe-et-Moselle"},"FR-1-55":{code:"55",name:"Meuse"},"FR-1-56":{code:"56",name:"Morbihan"},"FR-1-57":{code:"57",name:"Moselle"},"FR-1-58":{code:"58",name:"Nievre"},"FR-1-59":{code:"59",name:"Nord"},"FR-1-60":{code:"60",name:"Oise"},"FR-1-61":{code:"61",name:"Orne"},"FR-1-75":{code:"75",name:"Paris"},"FR-1-62":{code:"62",name:"Pas-de-Calais"},"FR-1-63":{code:"63",name:"Puy-de-Dôme"},"FR-1-65":{code:"65",name:"Hautes Pyrenees"},"FR-1-64":{code:"64",name:"Pyrenees-Atlantiques"},"FR-1-66":{code:"66",name:"Pyrenees-Orientales"},"FR-1-69":{code:"69",name:"Rhone"},"FR-1-103":{code:"103",name:"Réunion"},"FR-1-70":{code:"70",name:"Haute Saone"},"FR-1-71":{code:"71",name:"Saone-et-Loire"},"FR-1-72":{code:"72",name:"Sarthe"},"FR-1-73":{code:"73",name:"Savoie"},"FR-1-74":{code:"74",name:"Haute Savoie"},"FR-1-76":{code:"76",name:"Seine-Maritime"},"FR-1-93":{code:"93",name:"Seine-Saint-Denis"},"FR-1-77":{code:"77",name:"Seine-et-Marne"},"FR-1-79":{code:"79",name:"Deux Sevres"},"FR-1-80":{code:"80",name:"Somme"},"FR-1-81":{code:"81",name:"Tarn"},"FR-1-82":{code:"82",name:"Tarn-et-Garonne"},"FR-1-90":{code:"90",name:"Territoire-de-Belfort"},"FR-1-95":{code:"95",name:"Val-d'Oise"},"FR-1-94":{code:"94",name:"Val-de-Marne"},"FR-1-83":{code:"83",name:"Var"},"FR-1-84":{code:"84",name:"Vaucluse"},"FR-1-85":{code:"85",name:"Vendee"},"FR-1-86":{code:"86",name:"Vienne"},"FR-1-87":{code:"87",name:"Haute Vienne"},"FR-1-88":{code:"88",name:"Vosges"},"FR-1-89":{code:"89",name:"Yonne"},"FR-1-78":{code:"78",name:"Yvelines"}},[n.Country.ES]:{"ES-1-C":{code:"C",name:"A Coruña"},"ES-1-VI":{code:"VI",name:"Álava"},"ES-1-AB":{code:"AB",name:"Albacete"},"ES-1-A":{code:"A",name:"Alicante"},"ES-1-AL":{code:"AL",name:"Almería"},"ES-1-O":{code:"O",name:"Asturias"},"ES-1-AV":{code:"AV",name:"Ávila"},"ES-1-BA":{code:"BA",name:"Badajoz"},"ES-1-PM":{code:"PM",name:"Illes Balears"},"ES-1-B":{code:"B",name:"Barcelona"},"ES-1-BU":{code:"BU",name:"Burgos"},"ES-1-CC":{code:"CC",name:"Cáceres"},"ES-1-CA":{code:"CA",name:"Cádiz"},"ES-1-S":{code:"S",name:"Cantabria"},"ES-1-CS":{code:"CS",name:"Castellón"},"ES-1-CR":{code:"CR",name:"Ciudad Real"},"ES-1-CO":{code:"CO",name:"Córdoba"},"ES-1-CU":{code:"CU",name:"Cuenca"},"ES-1-GI":{code:"GI",name:"Girona"},"ES-1-GR":{code:"GR",name:"Granada"},"ES-1-GU":{code:"GU",name:"Guadalajara"},"ES-1-SS":{code:"SS",name:"Gipuzkoa"},"ES-1-H":{code:"H",name:"Huelva"},"ES-1-HU":{code:"HU",name:"Huesca"},"ES-1-J":{code:"J",name:"Jaén"},"ES-1-LO":{code:"LO",name:"La Rioja"},"ES-1-GC":{code:"GC",name:"Las Palmas"},"ES-1-LE":{code:"LE",name:"León"},"ES-1-L":{code:"L",name:"Lleida"},"ES-1-LU":{code:"LU",name:"Lugo"},"ES-1-M":{code:"M",name:"Madrid"},"ES-1-MA":{code:"MA",name:"Málaga"},"ES-1-MU":{code:"MU",name:"Murcia"},"ES-1-NA":{code:"NA",name:"Navarra"},"ES-1-OR":{code:"OR",name:"Ourense"},"ES-1-P":{code:"P",name:"Palencia"},"ES-1-PO":{code:"PO",name:"Pontevedra"},"ES-1-SA":{code:"SA",name:"Salamanca"},"ES-1-TF":{code:"TF",name:"Santa Cruz de Tenerife"},"ES-1-SG":{code:"SG",name:"Segovia"},"ES-1-SE":{code:"SE",name:"Sevilla"},"ES-1-SO":{code:"SO",name:"Soria"},"ES-1-T":{code:"T",name:"Tarragona"},"ES-1-TE":{code:"TE",name:"Teruel"},"ES-1-TO":{code:"TO",name:"Toledo"},"ES-1-V":{code:"V",name:"Valencia"},"ES-1-VA":{code:"VA",name:"Valladolid"},"ES-1-BI":{code:"BI",name:"Bizkaia"},"ES-1-ZA":{code:"ZA",name:"Zamora"},"ES-1-Z":{code:"Z",name:"Zaragoza"}},[n.Country.IT]:{"IT-1-AG":{code:"AG",name:"Agrigento"},"IT-1-AL":{code:"AL",name:"Alessandria"},"IT-1-AN":{code:"AN",name:"Ancona"},"IT-1-AO":{code:"AO",name:"Aosta"},"IT-1-AR":{code:"AR",name:"Arezzo"},"IT-1-AP":{code:"AP",name:"Ascoli Piceno"},"IT-1-AT":{code:"AT",name:"Asti"},"IT-1-AV":{code:"AV",name:"Avellino"},"IT-1-BA":{code:"BA",name:"Bari"},"IT-1-BT":{code:"BT",name:"Barletta-Andria-Trani"},"IT-1-BL":{code:"BL",name:"Belluno"},"IT-1-BN":{code:"BN",name:"Benevento"},"IT-1-BG":{code:"BG",name:"Bergamo"},"IT-1-BI":{code:"BI",name:"Biella"},"IT-1-BO":{code:"BO",name:"Bologna"},"IT-1-BZ":{code:"BZ",name:"Bolzano"},"IT-1-BS":{code:"BS",name:"Brescia"},"IT-1-BR":{code:"BR",name:"Brindisi"},"IT-1-CA":{code:"CA",name:"Cagliari"},"IT-1-CL":{code:"CL",name:"Caltanissetta"},"IT-1-CB":{code:"CB",name:"Campobasso"},"IT-1-CI":{code:"CI",name:"Carbonia-Iglesias"},"IT-1-CE":{code:"CE",name:"Caserta"},"IT-1-CT":{code:"CT",name:"Catania"},"IT-1-CZ":{code:"CZ",name:"Catanzaro"},"IT-1-CH":{code:"CH",name:"Chieti"},"IT-1-CO":{code:"CO",name:"Como"},"IT-1-CS":{code:"CS",name:"Cosenza"},"IT-1-CR":{code:"CR",name:"Cremona"},"IT-1-KR":{code:"KR",name:"Crotone"},"IT-1-CN":{code:"CN",name:"Cuneo"},"IT-1-EN":{code:"EN",name:"Enna"},"IT-1-FM":{code:"FM",name:"Fermo"},"IT-1-FE":{code:"FE",name:"Ferrara"},"IT-1-FI":{code:"FI",name:"Firenze"},"IT-1-FG":{code:"FG",name:"Foggia"},"IT-1-FC":{code:"FC",name:"Forlì-Cesena"},"IT-1-FR":{code:"FR",name:"Frosinone"},"IT-1-GE":{code:"GE",name:"Genova"},"IT-1-GO":{code:"GO",name:"Gorizia"},"IT-1-GR":{code:"GR",name:"Grosseto"},"IT-1-IM":{code:"IM",name:"Imperia"},"IT-1-IS":{code:"IS",name:"Isernia"},"IT-1-SP":{code:"SP",name:"La Spezia"},"IT-1-AQ":{code:"AQ",name:"L'Aquila"},"IT-1-LT":{code:"LT",name:"Latina"},"IT-1-LE":{code:"LE",name:"Lecce"},"IT-1-LC":{code:"LC",name:"Lecco"},"IT-1-LI":{code:"LI",name:"Livorno"},"IT-1-LO":{code:"LO",name:"Lodi"},"IT-1-LU":{code:"LU",name:"Lucca"},"IT-1-MC":{code:"MC",name:"Macerata"},"IT-1-MN":{code:"MN",name:"Mantova"},"IT-1-MS":{code:"MS",name:"Massa-Carrara"},"IT-1-MT":{code:"MT",name:"Matera"},"IT-1-VS":{code:"VS",name:"Medio Campidano"},"IT-1-ME":{code:"ME",name:"Messina"},"IT-1-MI":{code:"MI",name:"Milano"},"IT-1-MO":{code:"MO",name:"Modena"},"IT-1-MB":{code:"MB",name:"Monza e Brianza"},"IT-1-NA":{code:"NA",name:"Napoli"},"IT-1-NO":{code:"NO",name:"Novara"},"IT-1-NU":{code:"NU",name:"Nuoro"},"IT-1-OG":{code:"OG",name:"Ogliastra"},"IT-1-OT":{code:"OT",name:"Olbia-Tempio"},"IT-1-OR":{code:"OR",name:"Oristano"},"IT-1-PD":{code:"PD",name:"Padova"},"IT-1-PA":{code:"PA",name:"Palermo"},"IT-1-PR":{code:"PR",name:"Parma"},"IT-1-PV":{code:"PV",name:"Pavia"},"IT-1-PG":{code:"PG",name:"Perugia"},"IT-1-PU":{code:"PU",name:"Pesaro e Urbino"},"IT-1-PE":{code:"PE",name:"Pescara"},"IT-1-PC":{code:"PC",name:"Piacenza"},"IT-1-PI":{code:"PI",name:"Pisa"},"IT-1-PT":{code:"PT",name:"Pistoia"},"IT-1-PN":{code:"PN",name:"Pordenone"},"IT-1-PZ":{code:"PZ",name:"Potenza"},"IT-1-PO":{code:"PO",name:"Prato"},"IT-1-RG":{code:"RG",name:"Ragusa"},"IT-1-RA":{code:"RA",name:"Ravenna"},"IT-1-RC":{code:"RC",name:"Reggio Calabria"},"IT-1-RE":{code:"RE",name:"Reggio Emilia"},"IT-1-RI":{code:"RI",name:"Rieti"},"IT-1-RN":{code:"RN",name:"Rimini"},"IT-1-RM":{code:"RM",name:"Roma"},"IT-1-RO":{code:"RO",name:"Rovigo"},"IT-1-SA":{code:"SA",name:"Salerno"},"IT-1-SS":{code:"SS",name:"Sassari"},"IT-1-SV":{code:"SV",name:"Savona"},"IT-1-SI":{code:"SI",name:"Siena"},"IT-1-SR":{code:"SR",name:"Siracusa"},"IT-1-SO":{code:"SO",name:"Sondrio"},"IT-1-TA":{code:"TA",name:"Taranto"},"IT-1-TE":{code:"TE",name:"Teramo"},"IT-1-TR":{code:"TR",name:"Terni"},"IT-1-TO":{code:"TO",name:"Torino"},"IT-1-TP":{code:"TP",name:"Trapani"},"IT-1-TN":{code:"TN",name:"Trento"},"IT-1-TV":{code:"TV",name:"Treviso"},"IT-1-TS":{code:"TS",name:"Trieste"},"IT-1-UD":{code:"UD",name:"Udine"},"IT-1-VA":{code:"VA",name:"Varese"},"IT-1-VE":{code:"VE",name:"Venezia"},"IT-1-VB":{code:"VB",name:"Verbano-Cusio-Ossola"},"IT-1-VC":{code:"VC",name:"Vercelli"},"IT-1-VR":{code:"VR",name:"Verona"},"IT-1-VV":{code:"VV",name:"Vibo Valentia"},"IT-1-VI":{code:"VI",name:"Vicenza"},"IT-1-VT":{code:"VT",name:"Viterbo"}},[n.Country.BE]:{"BE-1-VAN":{code:"VAN",name:"Antwerpen"},"BE-1-WBR":{code:"WBR",name:"Brabant wallon"},"BE-1-WHT":{code:"WHT",name:"Hainaut"},"BE-1-WLG":{code:"WLG",name:"Liège"},"BE-1-VLI":{code:"VLI",name:"Limburg"},"BE-1-WLX":{code:"WLX",name:"Luxembourg"},"BE-1-WNA":{code:"WNA",name:"Namur"},"BE-1-VOV":{code:"VOV",name:"Oost-Vlaanderen"},"BE-1-VBR":{code:"VBR",name:"Vlaams-Brabant"},"BE-1-VWV":{code:"VWV",name:"West-Vlaanderen"}}}},89690:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.processQuery=void 0;const n=r(53576),o=r(38495);t.processQuery=function(e){return{type:n.StaticDataQueryType.GEOGRAPHIC_STATES,collection:(0,o.getStatesForLocaleFormats)(e.level,e.localeFormats)}}},38495:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.findStateCode=t.findStateLevel2Name=t.findStateName=t.getStatesForLocaleFormats=t.isStateValid=void 0;const n=r(53576),o=r(80814);t.isStateValid=function(e,t){return t in function(e){return{...o.GeographicStatesLevel0[e]||{},...o.GeographicStatesLevel1[e]||{}}}(e)},t.getStatesForLocaleFormats=function(e,t){const r=e===n.GeographicStateLevel.LEVEL_0?o.GeographicStatesLevel0:o.GeographicStatesLevel1;return t?t.filter((e=>!!r[e])).reduce(((e,t)=>Object.assign({},e,{[t]:r[t]})),{}):r};const i=(e,t)=>{let r="";if(!e)return r;const n=Object.keys(t);for(let o=0;o<n.length&&!r;o++)r=t[n[o]]?.[e]?.name??"";return r||e};t.findStateName=e=>i(e,o.GeographicStatesLevel0),t.findStateLevel2Name=e=>i(e,o.GeographicStatesLevel1),t.findStateCode=(e,t)=>o.GeographicStatesLevel0[e]?.[t]?.code??""},74504:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.allowedExtensions=void 0,t.allowedExtensions=[".docx",".doc",".xlsx",".xls",".ppt",".pptx",".pdf",".txt",".zip",".key",".png",".jpg",".jpeg",".gif",".tiff",".bmp",".heif",".heic",".odt",".avi",".ogg",".m4a",".mov",".mp3",".mp4",".mpg",".wav",".ods",".rar",".7z",".mkv",".raw",".db",".aac",".3gp",".webm",".flac",".csv",".wmv",".tar",".odp",".odg",".gzip"]},98337:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getSecureDocumentsAllowedMimeTypes=t.getSecureDocumentsAllowedExtensions=void 0;const n=r(74504),o=r(56196);t.getSecureDocumentsAllowedExtensions=function(){return n.allowedExtensions},t.getSecureDocumentsAllowedMimeTypes=function(){return o.allowedMimeTypes}},56196:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.allowedMimeTypes=void 0,t.allowedMimeTypes=["application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.ms-powerpoint","application/vnd.openxmlformats-officedocument.presentationml.presentation","application/pdf","text/plain","application/zip","application/x-zip-compressed","multipart/x-zip","application/pkcs8","application/x-iwork-keynote-sffkey","image/png","image/jpeg","image/gif","image/tiff","image/bmp","image/heic","image/heif","image/heic-sequence","image/heif-sequence","application/vnd.oasis.opendocument.text","video/avi","video/msvideo","video/x-msvideo","audio/ogg","video/ogg","video/quicktime","audio/mpeg","audio/mp4","video/mp4","video/mpeg","audio/wav","audio/x-wav","video/x-ms-wmv","application/vnd.oasis.opendocument.spreadsheet","application/x-rar-compressed","application/x-rar","application/vnd.rar","application/x-7z-compressed","video/x-matroska","video/raw","application/x-sqlite3","application/x-ole-storage","audio/aac","audio/x-aac","video/3gpp","audio/webm","video/webm","audio/flac","application/gzip","application/tar","application/x-tar","application/tar+gzip","application/x-compressed-tar","application/x-gzip","application/octet-stream","application/vnd.oasis.opendocument.presentation","application/vnd.oasis.opendocument.graphics"]},33332:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makeStaticDataController=void 0;const n=r(53576),o=r(39003),i=r(89690);t.makeStaticDataController=()=>({query:s});class a extends Error{constructor(e){super(`Unexpected StaticDataQuery type (${e})`)}}function s(e){try{return{results:(t=e.queries,t.map((e=>{switch(e.type){case n.StaticDataQueryType.CALLING_CODES:return(0,o.processQuery)();case n.StaticDataQueryType.GEOGRAPHIC_STATES:return(0,i.processQuery)(e);default:throw new a(e)}}))),error:null}}catch(e){return{results:[],error:e}}var t}},64765:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0;const n=r(83400);t.bootstrap=e=>{e.register(n.config)}},49183:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0;var n=r(64765);Object.defineProperty(t,"bootstrap",{enumerable:!0,get:function(){return n.bootstrap}})},92215:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.convertDeviceKeysToUki=t.convertUkiToDeviceKeys=void 0,t.convertUkiToDeviceKeys=e=>{if(e){const t=e.split("-");if(t.length>0){const[r]=t;return{accessKey:r,secretKey:e}}}return null},t.convertDeviceKeysToUki=e=>`${e.accessKey}-${e.secretKey}`},27885:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.hasSpecialUserGroupAccessInSpace=t.hasTACAccessInCurrentSpace=t.getNodePremiumStatusSpaceData=t.isGroupManagerInCurrentSpace=t.isTeamAdminInCurrentSpace=t.isBillingAdminInCurrentSpace=t.getCurrentTeamId=t.getCurrentSpaceId=t.getCurrentSpace=void 0;const n=r(66833),o=r(95343);t.getCurrentSpace=e=>e.spaces.find((e=>"accepted"===e.details.status)),t.getCurrentSpaceId=e=>{const r=(0,t.getCurrentSpace)(e);return r?Number(r.teamId):void 0},t.getCurrentTeamId=t.getCurrentSpaceId,t.isBillingAdminInCurrentSpace=e=>{const r=(0,t.getCurrentSpace)(e);return!!r&&r.details.isBillingAdmin},t.isTeamAdminInCurrentSpace=e=>{const r=(0,t.getCurrentSpace)(e);return!!r&&r.details.isTeamAdmin},t.isGroupManagerInCurrentSpace=e=>{const r=(0,t.getCurrentSpace)(e);return!!r&&r.details.isGroupManager},t.getNodePremiumStatusSpaceData=e=>{const t=e.getLocalSettings().nodePremiumStatus.spaces,r=(0,n.getFreshSpaceData)(t);return(0,o.makeSpaceData)(r)},t.hasTACAccessInCurrentSpace=e=>{const r=(0,t.getNodePremiumStatusSpaceData)(e),n=(0,t.getCurrentSpace)(r);return!!n&&(n.details.isTeamAdmin||n.details.isBillingAdmin||n.details.isGroupManager)},t.hasSpecialUserGroupAccessInSpace=(e,t)=>{const r=t.spaces.find((t=>t.teamId===e&&"accepted"===t.details.status));return r?.details.isTeamAdmin||r?.details.isGroupManager}},80722:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makeStoreService=void 0;const n=r(44602),o=r(18948),i=r(84762);t.makeStoreService=e=>{const t=e?.sessionStorage,r=e?.store||(0,i.createStore)(t),a=((e,t)=>{if(t){let t=()=>{};const r=new Promise((e=>{t=e})),o=(0,n.persistStore)(e,null,t);return{completeRehydration:()=>r,flush:()=>o.flush()}}return{completeRehydration:()=>Promise.resolve(),flush:()=>Promise.resolve()}})(r,t),s=()=>r.getState(),c=new o.BehaviorSubject(s());return r.subscribe((()=>c.next(s()))),{...a,dispatch:e=>r.dispatch(e),getABTesting:()=>s().device.abtesting,getAccountInfo:()=>s().userSession.account,getAccountCreation:()=>s().userSession.accountCreation,getLocation:()=>s().device.platform.location,getSdkAuthentication:()=>s().userSession.sdkAuthentication,getLocalSettings:()=>s().userSession.localSettings,getPersonalData:()=>s().userSession.personalData,getPersonalSettings:()=>s().userSession.personalSettings,getNotificationStatus:()=>s().userSession.notificationsStatus,getPlatform:()=>s().device.platform,getPlatformInfo:()=>s().device.platform.info,getIconsCache:()=>s().userSession.iconsCache,getSharingData:()=>s().userSession.sharingData,getSpaceData:()=>s().userSession.spaceData,getState$:()=>c,getState:()=>s(),getStore:()=>r,getSubscriptionCode:()=>s().userSession.account.subscriptionCode,getSyncStatus:()=>s().userSession.sync,getTeamAdminData:()=>s().userSession.teamAdminData,getUserLogin:()=>s().userSession.account.login,getUserSession:()=>s().userSession.session,isAuthenticated:()=>Boolean(s().userSession.session.sessionId&&s().userSession.account.isAuthenticated),hasSessionId:()=>Boolean(s().userSession.session.sessionId)}}},68525:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getGlobalPersistenceReducer=void 0;const n=r(44602),o=r(84801),i=e=>(t,r)=>({...t,...Object.keys(e).reduce(((n,o)=>(n[o]=t[o],e[o].forEach((e=>{n[o][e]=r[o][e]})),n)),{})}),a=e=>Object.keys(e).map((t=>(0,o.createBlacklistFilter)(t,e[t])));t.getGlobalPersistenceReducer=(e,t,r)=>{if(r){const o={key:"root",stateReconciler:i(t),storage:r,version:1,serialize:!1,deserialize:!1,transforms:a(t)};return(0,n.persistReducer)(o,e)}return e}},84762:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createStore=t.globalReducer=void 0;const n=r(98160),o=r(96186),i=r(9149),a=r(34007),s=r(10319),c=r(52653),u=r(4572),d=r(28417),l=r(53439),p=r(75417),m=r(45316),g=r(69018),f=r(68525),S=r(19764),h=r(73651),y=(0,n.combineReducers)({platform:i.default,abtesting:a.default,application:s.applicationReducer,remoteFile:p.remoteFileReducer,globalExtensionSettings:m.globalExtensionSettingsReducer,antiPhishing:g.AntiPhishingReducer,eventLogger:S.eventLoggerReducer,killswitch:h.default});t.globalReducer=(e,t)=>{const r=e?e.device:void 0,n=e?e.authentication:void 0,i=e?e.userSession:void 0,a=e?e.inMemoryInterSessionUnsynced:void 0;return{device:y(r,t),authentication:(0,c.authenticationReducer)(n,t),userSession:(0,u.userSessionReducer)(i,t),inMemoryInterSessionUnsynced:(0,o.inMemoryInterSessionUnsyncedSliceReducer)(a,t)}},t.createStore=function(e,r){const o=(0,f.getGlobalPersistenceReducer)(t.globalReducer,{device:l.blacklistedDeviceKeys,userSession:d.blacklistedUserSessionKeys},e);return(0,n.createStore)(o,r)}},20031:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const n=r(26634),o=r(1334),i=r(2548),a=r(39993),s=r(33733),c=r(79889),u=r(26847),d=r(68455);t.config={commands:{getTeamInfo:{handler:o.getTeamInfo},getTeamOffers:{handler:i.getTeamOffers},getMidCycleTierUpgradePrice:{handler:a.getMidCycleTierUpgradePrice},getExpectedTaxInformation:{handler:s.getExpectedTaxInformation},changeTierMidCycle:{handler:c.changeTierMidCycle},computePlanPricing:{handler:u.computePlanPricing},addSeats:{handler:d.addSeats}},queries:{getIsRecoveryEnabled:{selector:n.isRecoveryEnabledSelector}},liveQueries:{}}},40941:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AddSeatsErrorType=t.ComputePlanPricingErrorType=t.ChangeTierMidCycleErrorType=t.GetTeamOffersErrorType=void 0;var n=r(86852);Object.defineProperty(t,"GetTeamOffersErrorType",{enumerable:!0,get:function(){return n.GetTeamOffersErrorType}}),Object.defineProperty(t,"ChangeTierMidCycleErrorType",{enumerable:!0,get:function(){return n.ChangeTierMidCycleErrorType}}),Object.defineProperty(t,"ComputePlanPricingErrorType",{enumerable:!0,get:function(){return n.ComputePlanPricingErrorType}}),Object.defineProperty(t,"AddSeatsErrorType",{enumerable:!0,get:function(){return n.AddSeatsErrorType}})},68455:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addSeats=void 0;const n=r(46298),o=r(11848),i=r(86852),a=r(16593),s=r(17387);t.addSeats=async function(e,t){const{storeService:r}=e,c=(0,a.userLoginSelector)(r.getState());if(!c)throw new Error(s.AuthenticationCode[s.AuthenticationCode.USER_UNAUTHORIZED]);const u=await(0,o.addSeatsRequest)(r,c,t.seats);return(0,n.isApiError)(u)?{success:!1,error:{code:i.AddSeatsErrorType.AddSeatsFailed,message:`Add Seats failed: ${u.message}`}}:{success:!0}}},79889:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.changeTierMidCycle=void 0;const n=r(46298),o=r(86852),i=r(38115),a=r(16593),s=r(17387);t.changeTierMidCycle=async function(e,t){const{storeService:r}=e,c=(0,a.userLoginSelector)(r.getState()),u=await(0,n.teamStatus)(r,c);if(!c||(0,n.isApiError)(u))throw new Error(s.AuthenticationCode[s.AuthenticationCode.USER_UNAUTHORIZED]);const d=await(0,i.changeTierMidCycleRequest)(r,c,t.amountToPay,t.taxes,t.planId,t.couponCode,t.seatsToAdd,t.billingContactEmail);return(0,n.isApiError)(d)?{success:!1,error:{code:o.ChangeTierMidCycleErrorType.ChangeTierMidCycleFailed,message:`Change Tier Mid Cycle failed: ${d.message}`}}:{success:!0}}},26847:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.computePlanPricing=void 0;const n=r(86852),o=r(46298),i=r(21712),a=r(16593),s=r(17387);t.computePlanPricing=async function(e,t){const{storeService:r}=e,c=(0,a.userLoginSelector)(r.getState());if(!c)throw new Error(s.AuthenticationCode[s.AuthenticationCode.USER_UNAUTHORIZED]);const u=await(0,i.computePlanPricingRequest)(r,c,t.seats);return(0,o.isApiError)(u)?{success:!1,error:{code:n.ComputePlanPricingErrorType.ComputePlanPricingFailed,message:`Compute Plan Pricing failed: ${u.message}`}}:{success:!0,data:u}}},33733:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getExpectedTaxInformation=void 0;const n=r(86852),o=r(46298),i=r(30782),a=r(16593),s=r(17387);t.getExpectedTaxInformation=async function(e,t){const{storeService:r}=e,c=(0,a.userLoginSelector)(r.getState());if(!c)throw new Error(s.AuthenticationCode[s.AuthenticationCode.USER_UNAUTHORIZED]);const u=await(0,i.getExpectedTaxInformationRequest)(r,c,t.priceInCents);return(0,o.isApiError)(u)?{success:!1,error:{code:n.GetExpectedTaxInformationErrorType.GetExpectedTaxInformationFailed,message:`get Expected Price Information failed: ${u.message}`}}:{success:!0,data:u}}},39993:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getMidCycleTierUpgradePrice=void 0;const n=r(86852),o=r(46298),i=r(78607),a=r(16593),s=r(17387);t.getMidCycleTierUpgradePrice=async function(e,t){const{storeService:r}=e,c=(0,a.userLoginSelector)(r.getState());if(!c)throw new Error(s.AuthenticationCode[s.AuthenticationCode.USER_UNAUTHORIZED]);const u=await(0,i.getMidCycleTierUpgradePriceRequest)(r,c,t.newPlan,t.numberOfSeats);return(0,o.isApiError)(u)?{success:!1,error:{code:n.GetMidCycleTierUpgradePriceErrorType.GetMidCycleTierUpgradePriceFailed,message:`get Mid Cycle Tier Upgrade Price failed: ${u.message}`}}:{success:!0,data:u}}},2548:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getTeamOffers=void 0;const n=r(86852),o=r(46298),i=r(47115),a=r(17387),s=r(16593);t.getTeamOffers=async function(e,t){const{storeService:r}=e,c=(0,s.userLoginSelector)(r.getState());if(!c)throw new Error(a.AuthenticationCode[a.AuthenticationCode.USER_UNAUTHORIZED]);const u=await(0,i.getTeamOffersRequest)(r,c,t.couponCode);return(0,o.isApiError)(u)?{success:!1,error:{code:n.GetTeamOffersErrorType.GetTeamOffersFailed,message:`get Team Offers failed: ${u.message}`}}:{success:!0,data:u}}},1334:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getTeamInfo=void 0;const n=r(46298),o=r(16593),i=r(25576);t.getTeamInfo=async function(e){const{storeService:t}=e,r=(0,o.userLoginSelector)(t.getState()),i=await(0,n.teamStatus)(t,r);if((0,n.isApiError)(i))return a(i);const{billing:s,seats:c,info:u,planTier:d,capabilities:l}=i;return{success:!0,data:{billing:s,teamInfo:u,planTier:d,capabilities:l,seats:c}}};const a=e=>e.code===n.NotAdmin?s(i.AuthenticationCode.UNAUTHORIZED,e.message):s(i.AuthenticationCode.UNKNOWN_ERROR,e.message),s=(e,t)=>({success:!1,reason:e,message:t})},89675:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setTeamSettings=t.makeSettingsController=void 0;const n=r(16516),o=r(34376),i=r(66833);t.makeSettingsController=(e,t)=>({setTeamSettings:r=>c(e,t,(0,o.getCurrentUserInfo)(e),r)});const a=e=>e.replace(/([A-Z])/g,((e,t)=>`_${t.toLowerCase()}`)),s=(e,t)=>null!==t?{type:`set_${a(e)}`,value:t}:{type:`unset_${a(e)}`};function c(e,t,{login:r,uki:o},{teamId:a,settings:c}){const u=(0,n.zipWith)(s,(0,n.keys)(c),(0,n.values)(c));return t.settings.setTeamSettings({login:r,uki:o,teamId:a,operations:u}).then((()=>((0,i.updateCurrentSpaceWith)(e,(e=>Object.assign({},e,{details:Object.assign({},e.details,{info:Object.assign({},e.details.info,c)})}))),{}))).catch((e=>({error:e})))}t.setTeamSettings=c},89763:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0;const n=r(20031);t.bootstrap=e=>{e.register(n.config)}},14581:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0;var n=r(89763);Object.defineProperty(t,"bootstrap",{enumerable:!0,get:function(){return n.bootstrap}})},26634:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isPersonalSpaceEnabledSelector=t.isRecoveryEnabledSelector=void 0;const n=r(16593);t.isRecoveryEnabledSelector=e=>{const t=(0,n.activeSpacesSelector)(e)[0];return t?.info?.recoveryEnabled??!1},t.isPersonalSpaceEnabledSelector=e=>{const t=(0,n.activeSpacesSelector)(e)[0];return t?.info?.personalSpaceEnabled??!0}},86852:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AddSeatsErrorType=t.ComputePlanPricingErrorType=t.ChangeTierMidCycleErrorType=t.GetExpectedTaxInformationErrorType=t.GetMidCycleTierUpgradePriceErrorType=t.B2BPlanTiers=t.GetTeamOffersErrorType=void 0,function(e){e.GetTeamOffersFailed="GET_TEAM_OFFERS_FAILED",e.GetTeamOffersSummaryFailed="GET_TEAM_OFFERS_SUMMARY_FAILED"}(t.GetTeamOffersErrorType||(t.GetTeamOffersErrorType={})),t.B2BPlanTiers=["legacy","team","business","entreprise"],function(e){e.GetMidCycleTierUpgradePriceFailed="GET_MID_CYCLE_TIER_UPGRADE_PRICE_FAILED"}(t.GetMidCycleTierUpgradePriceErrorType||(t.GetMidCycleTierUpgradePriceErrorType={})),function(e){e.GetExpectedTaxInformationFailed="GET_EXPECTED_TAX_INFORMATION_FAILED"}(t.GetExpectedTaxInformationErrorType||(t.GetExpectedTaxInformationErrorType={})),function(e){e.ChangeTierMidCycleFailed="CHANGE_TIER_MID_CYCLE_FAILED",e.PaymentMeanIsNotCreditcard="PAYMENT_MEAN_IS_NOT_CREDITCARD",e.CurrentPlanStartDateInFuture="CURRENT_PLAN_START_DATE_IN_FUTURE",e.ChangeTierMidCycleError="CHANGE_TIER_MID_CYCLE_ERROR",e.PaymentMeanIsNotInvoice="PAYMENT_MEAN_IS_NOT_INVOICE",e.ChangeTierAmountTooExpensive="CHANGE_TIER_AMOUNT_TOO_EXPENSIVE",e.ErrorCalculatingTierChangeDiscount="ERROR_CALCULATING_TIER_CHANGE_DISCOUNT",e.InsufficientAmount="INSUFFICIENT_AMOUNT",e.AssignedPlanSameTierAsCurrentPlan="ASSIGNED_PLAN_SAME_TIER_AS_CURRENT_PLAN",e.SalesTaxMismatch="SALES_TAX_MISMATCH",e.NotBillingAdmin="NOT_BILLING_ADMIN"}(t.ChangeTierMidCycleErrorType||(t.ChangeTierMidCycleErrorType={})),function(e){e.ComputePlanPricingFailed="COMPUTE_PLAN_PRICING_FAILED",e.NotBillingAdmin="NOT_BILLING_ADMIN"}(t.ComputePlanPricingErrorType||(t.ComputePlanPricingErrorType={})),function(e){e.AddSeatsFailed="ADD_SEATS_FAILED",e.CannotAddSeatDuringFreeTrial="CANNOT_ADD_SEAT_DURING_FREE_TRIAL",e.CannotAddSeatDuringGracePeriod="CANNOT_ADD_SEAT_DURING_GRACE_PERIOD",e.UnsupportedPaymentMean="UNSUPPORTED_PAYMENT_MEAN",e.NotBillingAdmin="NOT_BILLING_ADMIN",e.PaymentFailed="PAYMENT_FAILED"}(t.AddSeatsErrorType||(t.AddSeatsErrorType={}))},68541:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const n=r(92310),o=r(32159),i=r(31632),a=r(81529),s=r(76934),c=r(38396),u=r(6053),d=r(15028),l=r(69310),p=r(8995),m=r(76713),g=r(5829),f=r(76404),S=r(88063),h=r(94453),y=r(44974),v=r(27218),E=r(70363),A=r(50766),_=r(10002),T=r(68538),I=r(33150),b=r(94228),w=r(60419),C=r(76154),D=r(70178),O=r(64690),P=r(7134),N=r(16382),R=r(4658),M=r(54419),L=r(11673),U=r(38045),k=r(62218);t.config={commands:{completeTeamDomainRegistration:{handler:i.completeTeamDomainRegistration},deactivateTeamDomain:{handler:a.deactivateTeamDomain},getTeamDomains:{handler:c.getTeamDomains},getTeamDevice:{handler:u.getTeamDevice},listTeamDevices:{handler:d.listTeamDevices},deactivateTeamDevice:{handler:l.deactivateTeamDevice},registerTeamDomain:{handler:s.registerTeamDomain},registerTeamDevice:{handler:p.registerTeamDevice},registerTeamDeviceAccount:{handler:v.registerTeamDeviceAccount},getEncryptionServiceConfig:{handler:f.getEncryptionServiceConfig},generateAndSaveEncryptionServiceConfig:{handler:S.generateAndSaveEncryptionServiceConfig},clearSelfHostedESSettings:{handler:h.clearSelfHostedESSettings},getTeamDeviceEncryptedConfig:{handler:y.getTeamDeviceEncryptedConfig},updateTeamDeviceEncryptedConfig:{handler:E.updateTeamDeviceEncryptedConfig},updateTeamSettings:{handler:D.updateTeamSettings},parseMetadataFields:{handler:T.parseMetadataFieldsHandler},persistAdminProvisioningKey:{handler:I.persistAdminProvisioningKey},removeAdminProvisioningKey:{handler:w.removeAdminProvisioningKey},createSSOConnectorConfig:{handler:m.createSSOConnectorConfig},generateSSOConnectorKey:{handler:g.generateSSOConnectorKey},startAuditLogsQuery:{handler:A.startAuditLogsQuery},getAuditLogQueryResults:{handler:_.getAuditLogQueryResults},getRecoveryCodesAsTeamCaptain:{handler:C.getRecoveryCodesAsTeamCaptain},getInviteLink:{handler:O.getInviteLink},requestInviteLinkToken:{handler:k.requestInviteLinkToken},getInviteLinkForAdmin:{handler:P.getInviteLinkForAdmin},changeInviteLinkTeamKey:{handler:N.changeInviteLinkTeamKey},createInviteLink:{handler:R.createInviteLink},toggleInviteLink:{handler:M.toggleInviteLink},getLastADSyncDate:{handler:L.getLastADSyncDate},getSpecialUserGroupInviteValuesForMemberInTeam:{handler:U.getSpecialUserGroupInviteValuesForMemberInTeam},getSpecialUserGroupRevision:{handler:U.getSpecialUserGroupRevision}},queries:{getAdministrableUserGroup:{selector:n.administrableUserGroupSelector},getAdministrableUserGroups:{selector:n.administrableUserGroupsSelector},isGroupNameAvailable:{selector:n.isGroupNameAvailableSelector},getAdminProvisioningKey:{selector:b.adminProvisioningKeySelector}},liveQueries:{liveAdministrableUserGroup:{operator:o.administrableUserGroup$},liveAdministrableUserGroups:{operator:o.administrableUserGroups$},liveAdminProvisioningKey:{operator:o.adminProvisioningKey$}}}},79562:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(36100),t),o(r(35074),t),o(r(45832),t),o(r(73168),t),o(r(88791),t),o(r(82848),t),o(r(66535),t),o(r(68323),t),o(r(93020),t),o(r(8286),t)},58415:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makeDirectorySyncController=void 0;const n=r(7344),o=r(34376);t.makeDirectorySyncController=e=>{const{storeService:t,localStorageService:r,wsService:i,sessionService:a,sharingService:s}=e;return{directorySyncForAllTeams:()=>n.directorySyncForAllTeams(t,i,a),keyValidatedByTacAdmin:(e,c)=>function(e,t,r,i,a,s,c){const u=t.getTeamAdminData().teams[s],d=(0,o.getCurrentUserInfo)(t);return n.saveDirectorySyncKey(e,t,r,d,u,s,c).then((()=>n.directorySyncForTeam(t,i,a,s))).catch((()=>{}))}(s,t,r,i,a,e,c),keyRejectedByTacAdmin:(e,r)=>n.keyRejectedByTacAdmin(t,i,e,r)}}},10002:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getAuditLogQueryResults=void 0;const n=r(93020),o=r(16593),i=r(46298);t.getAuditLogQueryResults=async function(e,t){const{storeService:r}=e,a=(0,o.userLoginSelector)(r.getState()),s=await(0,i.getAuditLogsQueryResults)(r,a,t);return(0,i.isApiError)(s)?{success:!1,error:{code:n.ApiAuditLogsErrorType.GetAuditLogQueryResultsFailed,message:`Get Audit Log Query Results failed: ${s.message}`}}:{success:!0,data:{auditLogs:s.results?.length?s.results.map((e=>JSON.parse(e))):[],nextToken:s.nextToken,state:s.state}}}},50766:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.startAuditLogsQuery=void 0;const n=r(93020),o=r(16593),i=r(46298);t.startAuditLogsQuery=async function(e,t){const{storeService:r}=e,a=(0,o.userLoginSelector)(r.getState()),s=await(0,i.startAuditLogsQuery)(r,a,t);return(0,i.isApiError)(s)?{success:!1,error:{code:n.ApiAuditLogsErrorType.StartAuditLogsQueryFailed,message:`Start Audit Logs Query failed: ${s.message}`}}:{success:!0,data:s}}},93020:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GetAuditLogQueryResultsState=t.ApiAuditLogsErrorType=void 0,function(e){e.StartAuditLogsQueryFailed="START_AUDIT_LOGS_QUERY_FAILED",e.GetAuditLogQueryResultsFailed="GET_AUDIT_LOG_QUERY_RESULTS_FAILED"}(t.ApiAuditLogsErrorType||(t.ApiAuditLogsErrorType={})),function(e){e.Queued="QUEUED",e.Running="RUNNING",e.Succeeded="SUCCEEDED",e.Failed="FAILED",e.Cancelled="CANCELLED"}(t.GetAuditLogQueryResultsState||(t.GetAuditLogQueryResultsState={}))},44293:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createTeamDeviceAccount=void 0;const n=r(46298),o=r(16593);t.createTeamDeviceAccount=async(e,t)=>{const{storeService:r}=e,i=r.getState(),a=(0,o.userLoginSelector)(i);if(!a)throw new Error("\n            [createTeamDeviceAccount] - Session not opened!\n        ");const s=await(0,n.createTeamDeviceAccount)(r,a,t);return(0,n.isApiError)(s)?{success:!1,error:{code:(0,n.getCode)(s.code,n.createTeamDeviceAccountErrors)}}:{success:!0,data:{login:s.login}}}},69310:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.deactivateTeamDevice=void 0;const n=r(46298),o=r(16593);t.deactivateTeamDevice=async function(e,{teamDeviceAccessKey:t}){const{storeService:r}=e,i=r.getState(),a=(0,o.userLoginSelector)(i);if(!a)throw new Error("\n            [registerTeamDeviceRequest] - Session not opened!\n        ");const s=await(0,n.deactivateTeamDevice)(r,a,{teamDeviceAccessKey:t});return(0,n.isApiError)(s)?{success:!1,error:{code:(0,n.getCode)(s.code,n.deactivateTeamDeviceErrors)}}:{success:!0,data:{}}}},6053:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getTeamDevice=void 0;const n=r(46298),o=r(16593);t.getTeamDevice=async function(e,t){const{storeService:r}=e,{teamDeviceAccessKey:i}=t,a=r.getState(),s=(0,o.userLoginSelector)(a);if(!s)throw new Error("[getTeamDevice] - Session not opened!");const c=await(0,n.getTeamDevice)(r,s,{teamDeviceAccessKey:i});return(0,n.isApiError)(c)?{success:!1,error:{code:(0,n.getCode)(c.code,n.getTeamDeviceErrors)}}:{success:!0,data:{teamDevice:c.teamDevice}}}},15028:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.listTeamDevices=void 0;const n=r(46298),o=r(16593);t.listTeamDevices=async function(e){const{storeService:t}=e,r=t.getState(),i=(0,o.userLoginSelector)(r);if(!i)throw new Error("[listTeamDevices] - Session not opened!");const a=await(0,n.listTeamDevices)(t,i);return(0,n.isApiError)(a)?{success:!1,error:{code:(0,n.getCode)(a.code,n.listTeamDevicesErrors)}}:{success:!0,data:{teamDevices:a.teamDevices}}}},8995:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.registerTeamDevice=void 0;const n=r(46298),o=r(16593);t.registerTeamDevice=async function(e,t){const{storeService:r}=e,{deviceName:i,platform:a}=t,s=r.getState(),c=(0,o.userLoginSelector)(s);if(!c)throw new Error("\n            [registerTeamDeviceRequest] - Session not opened!\n        ");const u=await(0,n.registerTeamDevice)(r,c,{platform:a,deviceName:i});return(0,n.isApiError)(u)?{success:!1,error:{code:(0,n.getCode)(u.code,n.registerTeamDeviceErrors)}}:{success:!0,data:{teamUuid:u.teamUuid,deviceAccessKey:u.deviceAccessKey,deviceSecretKey:u.deviceSecretKey}}}},35074:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TeamDevicePlatform=void 0;const n=r(81926);Object.defineProperty(t,"TeamDevicePlatform",{enumerable:!0,get:function(){return n.TeamDevicePlatform}})},11673:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getLastADSyncDate=void 0;const n=r(46298),o=r(16593),i=r(62618);t.getLastADSyncDate=async function(e){const{storeService:t}=e,r=(0,o.userLoginSelector)(t.getState()),a={success:!1,error:{code:n.NotAdmin}};if(!r)return a;try{(0,i.requireAdmin)(t)}catch{return a}const s=await(0,n.lastADSyncDate)(t,r);return(0,n.isApiError)(s)?{success:!1,error:{code:(0,n.getCode)(s.code,n.lastADSyncDateErrors)}}:{success:!0,data:{...s}}}},45832:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},7344:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isDirectorySyncActivated=t.keyRejectedByTacAdmin=t.isSignatureValid=t.buildVerifiedSyncResponseData=t.keyToXMLB64=t.chainOperations=t.batchOperations=t.directorySyncForTeam=t.directorySyncForAllTeams=t.saveDirectorySyncKey=void 0;const n=r(1370),o=r(19478),i=r(48005),a=r(3674),s=r(36513),c=r(95623),u=r(70252),d=r(44197),l=r(78320),p=r(19697),m=r(43927),g=r(56915),f=r(74042),S=r(93513);t.saveDirectorySyncKey=async function(e,t,r,o,i,a,s){return c().catch((function(t){if("Bad Request (ITEM_GROUP_UPDATE_CONFLICT)"===t.message)return function(){const{login:t,uki:r}=o;return(0,m.loadSpecialItemGroup)(e.ws,t,r,i).then(p).then(c).then((()=>{}))}();throw t}));function c(){return async function(){const t=await async function(){const{specialItemGroup:t}=i,{crypto:r}=e,n=await r.symmetricEncryption.generateNewAESKey(),a=await(0,d.getSpecialItemGroupKey)(r,o,i),c={publicKey:s},u=S.encode(JSON.stringify(c)),p=await r.symmetricEncryption.encryptAES256(n,u),m=await r.symmetricEncryption.encryptAES256(a,S.encode(n)),g=(0,l.generateItemUuid)(),f=await e.item.makeItemUpload(g,m,p);return await e.item.makeAddItemsEvent(t.groupId,t.revision,[f])}();return e.item.addItems(e.ws,o.login,o.uki,t)}().then(u)}async function u(n){return(0,f.updateAdminDataAfterItemAddedOrUpdated)(t,r,e.ws,o,a,n).then((()=>{}))}function p(e){const r=(0,n.specialItemGroupUpdated)(a,e);return t.dispatch(r),Promise.resolve()}},t.directorySyncForAllTeams=function(e,t,r){const n=e.getTeamAdminData();return Object.keys(n.teams).map((n=>E(e,t,r,n)))};class h extends Error{constructor(e=""){super(e),this.name="NoRequestError"}}class y extends Error{constructor(e=""){super(e),this.name="NewPublicKeyError"}}class v extends Error{constructor(e="",t){super(e),this.name="InvalidSignatureError",this.syncResponse=t}}function E(e,t,r,n){const s=(0,a.makeTeamAdminController)(e,t);return function(){const t=e.getState().userSession.directorySync;return(0,i.isTeamDirectorySyncInProgress)(t,n)}()?(c.default.log(`[Directory Sync] Skipping: sync already in progress for team ${n}`),Promise.resolve()):(e.dispatch((0,o.teamDirectorySyncInProgress)(n)),async function(){const r=e.getUserLogin(),o=(0,g.ukiSelector)(e.getState()),i={teamId:Number(n),login:r,uki:o};return await t.teamPlans.getDirectorySyncRequest(i)}().then((async function(e){if(!e.content)throw new h;return e})).then((async function(t){const{publicKey:r,id:o}=t.content,i=e.getTeamAdminData().teams[n].directorySyncKey,a=i&&i.publicKey,s=T(r);if(s!==a){const e={teamId:n,publicKey:s,requestId:o};(0,p.default)().checkDirectorySyncKeyRequest(e);const r=`[Directory Sync] in sync request ${t.content.id} for team ${n}: new public key detected for syncRequest.`;throw c.default.log(r),new y}return t})).then((async function(e){if(!await b(e,n)){const t=`[Directory Sync] in sync request ${e.content.id} for team ${n}: invalid signature.`;throw c.default.log(t),new v(t,e)}return e})).then((async function(t){const o=e.getTeamAdminData().teams[n].userGroups||[],i=t.content.userGroups||[],a=function(e,t){const r=t.map((e=>e.groupId));return e.filter((e=>!!e.externalId)).filter((e=>!r.includes(e.externalId)))}(o,i),c=function(e,t){const r=e.filter((e=>!!e.externalId)).map((e=>e.externalId));return t.filter((e=>!r.includes(e.groupId)))}(o,i),d=function(e,t){const r=e.filter((e=>!!e.externalId)).map((e=>e.externalId));return t.filter((e=>r.includes(e.groupId)))}(o,i),l=a.map((e=>function(e){const t=function(e){const{groupId:t,revision:r}=e;return{groupId:t,revision:r}}(e);return()=>s.deleteUserGroupAction(t)}(e))),p=c.map((e=>function(e){const t=function(e){const t=e.groupName,r=e.groupId;return{teamId:Number(n),externalId:r,name:t}}(e);return()=>s.createUserGroupAction(r,t).then((t=>function(e,t){return e.userGroups.length>0?f(e.userGroups[0],t):Promise.resolve()}(t,e)))}(e))),m=d.map((e=>function(e,t){const r=t.find((t=>t.externalId===e.groupId));if(!r)return[];const n=[];if(e.groupName!==r.name){const t=()=>function(e,t){const r=function(e,t){return{groupId:e.groupId,name:t.groupName,revision:e.revision}}(e,t);return s.renameUserGroupAction(r)}(r,e);n.push(t)}if(function(e,t){const r=e.users.map((e=>e.alias));return t.memberLogins.some((e=>!r.includes(e)))}(r,e)){const t=()=>f(r,e);n.push(t)}if(function(e,t){return e.users.map((e=>e.alias)).some((e=>!t.memberLogins.includes(e)))}(r,e)){const t=()=>function(e,t){const r=e.users.map((e=>e.alias)).filter((e=>!t.memberLogins.includes(e))),n={groupId:e.groupId,revision:e.revision,users:r};return s.revokeUserGroupMembersAction(n)}(r,e);n.push(t)}return n}(e,o))).reduce(((e,t)=>e.concat(t)),[]),g=[...l,...p],S=m;return[...await _(g),...await A(S)].filter((e=>e.error)).map((e=>e.error)).forEach((e=>{const r=`[Directory Sync] in sync request ${t.content.id} for team ${n}: an operation on groups failed: ${e}`,o=new Error(r);(0,u.sendExceptionLog)({error:o})})),t})).then((async function(e){return d(),l(e).then((()=>{}))})).catch((async function(e){switch(d(),e.name){case"NoRequestError":case"NewPublicKeyError":break;case"InvalidSignatureError":{const t=e,{syncResponse:r}=t;l(r,"invalid_signature").then((()=>{}));break}default:{const t=new Error(`[Directory Sync] unexpected error for team ${n}: ${e}`);(0,u.sendExceptionLog)({error:t})}}})));function d(){e.dispatch((0,o.teamDirectorySyncNotInProgress)(n))}function l(r,o){const{content:{id:i}}=r,a=e.getUserLogin(),s=(0,g.ukiSelector)(e.getState()),c={teamId:Number(n),login:a,uki:s,requestId:i},u=Object.assign({},c,o?{syncError:o}:{});return t.teamPlans.updateDirectorySyncRequestStatus(u)}function m(e){return{alias:e,permission:"limited"}}function f(e,t){const r=e.users.map((e=>e.alias)),o=t.memberLogins.filter((e=>!r.includes(e))),i={groupId:e.groupId,revision:e.revision,users:o.map(m),teamId:Number(n)};return s.inviteUserGroupMembersAction(i)}}function A(e){const t=e.map((e=>e().then((e=>({success:!0,result:e}))).catch((e=>({success:!1,error:e})))));return Promise.all(t)}async function _(e,t=[]){const[r,...n]=e;if(!r)return t;let o;try{o={success:!0,result:await r()}}catch(e){o={success:!1,error:e}}return _(n,[...t,o])}function T({modulus:e,exponent:t}){const r=`<RSAKeyValue><Modulus>${e}</Modulus><Exponent>${t}</Exponent></RSAKeyValue>`;return S.encode(r)}function I(e,t,r){return e+t.sort((function(e,t){return e.groupId<t.groupId?-1:e.groupId>t.groupId?1:0})).map(r?function(e){const t=e.memberLogins.sort(n);return e.groupId+e.groupName+t.join("")}:function(e){const t=e.memberLogins.sort();return e.groupId+e.groupName+t.join("")}).join("");function n(e,t){const r=o(e),n=o(t);return r<n?-1:r>n?1:function(e,t){if(e.length<t.length)return-1;if(e.length>t.length)return 1;const r=e.split("-").length-1,n=t.split("-").length-1;return r<n?-1:r>n?1:0}(e,t)}function o(e){let t=e.replace(/[-']/g,"");return t=t.replace(/\./g,"$"),t=t.replace(/@/g,"%"),t=t.replace(/_/g,"'"),t}}async function b(e,t){const{content:{signature:r,userGroups:n,publicKey:o}}=e,i=async e=>{const i=I(t,n,e),a=S.encode(i),c=(0,s.makeAsymmetricEncryption)();return await c.verifyJwk(o,r,a)};return await i(!1)||i(!0)}t.directorySyncForTeam=E,t.batchOperations=A,t.chainOperations=_,t.keyToXMLB64=T,t.buildVerifiedSyncResponseData=I,t.isSignatureValid=b,t.keyRejectedByTacAdmin=function(e,t,r,n){const o=e.getUserLogin(),i=(0,g.ukiSelector)(e.getState()),a={teamId:Number(r),login:o,uki:i,requestId:n,syncError:"key_rejected"};return t.teamPlans.updateDirectorySyncRequestStatus(a).then((()=>{}))},t.isDirectorySyncActivated=function(e){const t=e.spaces.find((e=>e.details&&e.details.info&&"accepted"===e.details.status));if(!t)return!1;const r=t.details.info.activeDirectorySyncType;return["full","provision-only"].includes(r)}},31632:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.completeTeamDomainRegistration=void 0;const n=r(46298),o=r(16593);t.completeTeamDomainRegistration=async function(e){const{storeService:t}=e,r=(0,o.userLoginSelector)(t.getState()),i=await(0,n.completeDomainRegistration)(t,r);return(0,n.isApiError)(i)?{success:!1,error:{code:(0,n.getCode)(i.code,n.completeDomainRegistrationErrors)}}:{success:!0,domains:i.domain.map((e=>({id:e.id,name:e.domain,status:e.status,previousStatus:e.previousStatus,dnsToken:e.dnsToken,lastVerificationAttemptDateUnix:e.lastVerificationAttemptDateUnix})))}}},81529:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.deactivateTeamDomain=void 0;const n=r(46298),o=r(16593);t.deactivateTeamDomain=async function(e,t){const{storeService:r}=e,i=(0,o.userLoginSelector)(r.getState()),a=await(0,n.deactivateDomain)(r,i,t);return(0,n.isApiError)(a)?{success:!1,error:{code:(0,n.getCode)(a.code,n.deactivateDomainErrors)}}:{success:!0}}},38396:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getTeamDomains=void 0;const n=r(46298),o=r(16593);t.getTeamDomains=async function(e){const{storeService:t}=e,r=(0,o.userLoginSelector)(t.getState()),i=await(0,n.listDomains)(t,r);return(0,n.isApiError)(i)?{success:!1,error:{code:(0,n.getCode)(i.code,n.listDomainErrors)}}:{success:!0,domains:i.domains.map((e=>({id:e.id,name:e.domain,status:e.status,previousStatus:e.previousStatus,dnsToken:e.dnsToken,lastVerificationAttemptDateUnix:e.lastVerificationAttemptDateUnix})))}}},76934:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.registerTeamDomain=void 0;const n=r(46298),o=r(16593);t.registerTeamDomain=async function(e,t){const{storeService:r}=e,i=(0,o.userLoginSelector)(r.getState()),a=await(0,n.requestDomainRegistration)(r,i,t);return(0,n.isApiError)(a)?{success:!1,error:{code:(0,n.getCode)(a.code,n.requestDomainRegistrationErrors)}}:{success:!0,data:{computedToken:a.computedToken,challengeDomain:a.challengeDomain}}}},36100:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DomainStatus=void 0;const n=r(98802);t.DomainStatus=n.DomainStatusResponse},12927:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.clearEncryptionServiceConfig=void 0;const n=r(94150);t.clearEncryptionServiceConfig=async e=>(await(0,n.removeTeamAdminItem)(e,"encryptionServiceData"),!0)},33657:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createAzureEncryptionServiceConfig=t.createAwsLinuxEncryptionServiceConfig=void 0,t.createAwsLinuxEncryptionServiceConfig=({configEncryptionKey:e,deviceSecretKey:t,deviceAccessKey:r,teamUuid:n})=>`DASHLANE_SSO_TEAM_DEVICE_ACCESS_KEY=${r}\nDASHLANE_SSO_TEAM_DEVICE_SECRET_KEY=${t}\nDASHLANE_SSO_TEAM_UUID=${n}\nDASHLANE_CONFIG_ENCRYPTION_KEY=${e}\n`,t.createAzureEncryptionServiceConfig=({configEncryptionKey:e,deviceSecretKey:t,deviceAccessKey:r,teamUuid:n,encryptionServiceEndpoint:o})=>{const{host:i}=new URL(o);return`{\n      "$schema": "https://schema.management.azure.com/schemas/2019-04-01/deploymentParameters.json#",\n      "contentVersion": "1.0.0.0",\n      "parameters": {\n        "siteName": {\n          "value": "${i.split(".").slice(0,-2).join(".")}"\n        },\n        "servicePlanSku": {\n          "value": "B1"\n        },\n        "servicePlanCapacity": {\n          "value": 1\n        },\n        "location": {\n          "value": "[resourceGroup().location]"\n        },\n        "DASHLANE_CONFIG_ENCRYPTION_KEY": {\n          "value": "${e}"\n        },\n        "DASHLANE_SSO_TEAM_DEVICE_ACCESS_KEY": {\n          "value": "${r}"\n        },\n        "DASHLANE_SSO_TEAM_DEVICE_SECRET_KEY": {\n          "value": "${t}"\n        },\n        "DASHLANE_SSO_TEAM_UUID": {\n          "value": "${n}"\n        }\n      }\n    }\n    `}},88063:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.generateAndSaveEncryptionServiceConfig=void 0;const n=r(16038),o=r(69530),i=r(46298),a=r(62618),s=r(33657),c=r(76404),u=r(5760),d=r(27218),l=r(28354),p=r(70363),m=r(77672),g=async(e,t,r,i={},a)=>{const{deviceSecretKey:c,deviceAccessKey:g,teamUuid:f}=await(0,d.reregisterTeamDevice)(e,a),{devicePrivateKey:S,devicePublicKey:h}=await(0,d.generateDeviceKeyPair)(e),y=await(0,d.registerTeamDeviceAccount)(e,{deviceAccessKey:g,devicePublicKey:h,devicePrivateKey:S});if(!1===y.success)return{success:!1,error:y.error};const{encryptionKeyUuid:v,key:E}=await(async()=>{const e=await(0,o.generate64BytesKey)(),t=(0,n.bufferToBase64)(e);return{encryptionKeyUuid:(0,l.v4)().toLowerCase(),key:t}})(),A={config:("Microsoft Azure"===t?s.createAzureEncryptionServiceConfig:s.createAwsLinuxEncryptionServiceConfig)({deviceSecretKey:c,deviceAccessKey:g,teamUuid:f,configEncryptionKey:`${v}|${E}`,encryptionServiceEndpoint:r}),configEncryptionKey:E,teamUuid:f,deviceAccessKey:g,deviceSecretKey:c,encryptionKeyUuid:v,deploymentLocation:t,devicePublicKey:h,devicePrivateKey:S,lastGeneratedTimeStamp:(0,m.getUnixTime)(Date.now())},_=await(0,p.updateTeamDeviceEncryptedConfig)(e,{teamDeviceUrl:r,...i},A);if(!1===_.success)return{success:!1,error:_.error};const T=await(0,u.persistEncryptionServiceConfig)(e,A);return!1===T.success?{success:!1,error:T.error}:{success:!0,data:{basicConfig:{...A},encryptionServiceReloadingStatus:_.data.encryptionServiceReloadingStatus}}},f=["AWS","Microsoft Azure"];t.generateAndSaveEncryptionServiceConfig=async function(e,{deploymentLocation:t,encryptionServiceEndpoint:r,updateTeamDeviceConfigParams:n={}}){const{storeService:o}=e;if((0,a.requireAdmin)(o),!f.includes(t))return{success:!1,error:{code:i.InvalidRequestError}};const s=await(0,c.getEncryptionServiceConfig)(e);let u;return u=s.success?await g(e,t,r,n,s.data):await g(e,t,r,n),u}},76404:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getEncryptionServiceConfig=void 0;const n=r(46298),o=r(92310),i=r(62618);t.getEncryptionServiceConfig=({storeService:e})=>{(0,i.requireAdmin)(e);try{const t=(0,o.currentTeamIdSelector)(e.getState()),r=(0,o.adminDataForTeamSelector)(e.getState(),t);return r?.encryptionServiceData?.basicConfigs?.[0]?Promise.resolve({success:!0,data:r.encryptionServiceData.basicConfigs[0]}):Promise.resolve({success:!1,error:{code:n.BasicConfigNotFound}})}catch{return Promise.resolve({success:!1,error:{code:n.UnknownError}})}}},5760:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.persistEncryptionServiceConfig=t.saveOrUpdateEncryptionServiceConfig=void 0;const n=r(46298),o=r(34376),i=r(97124),a=r(53050),s=r(44197),c=r(92310),u=r(74042),d=r(14432),l=r(62618),p=/[\dA-F]{8}-[\dA-F]{4}-[\dA-F]{4}-[\dA-F]{4}-[\dA-F]{12}/i;t.saveOrUpdateEncryptionServiceConfig=async(e,t)=>{if((({teamUuid:e,encryptionKeyUuid:t,deviceAccessKey:r,deviceSecretKey:n})=>{const o={teamUuid:Boolean(e&&!e.match(p)),encryptionKeyUuid:Boolean(t&&!t.match(p)),deviceAccessKey:Boolean(r&&16!==r.length),deviceSecretKey:Boolean(n&&64!==n.length)},i=Object.entries(o).reduce(((e,[t,r])=>r?{[t]:!0,...e}:e),{});return Object.keys(i).length>0?i:null})(t))return null;const{storeService:r,wsService:n}=e,l=(0,i.makeSharingService)(r,n),m=(0,o.getCurrentUserInfo)(r),g=(0,c.currentTeamIdSelector)(r.getState()),f=(0,c.adminDataForTeamSelector)(r.getState(),g);if(!f)throw new Error("Cannot find adminData");const S=f?.encryptionServiceData?.basicConfigs?.[0];return S?await(async(e,t,r,n,o,i)=>{const{storeService:a,localStorageService:l}=e,{crypto:p,item:m,ws:g}=t,{specialItemGroup:f}=n;if(!f)throw new Error("Cannot find specialItemGroup in adminData");const{specialItemGroup:{items:S},encryptionServiceData:h}=n,{itemId:y}=h,v=a.getSharingData(),{timestamp:E}=(v.items??[]).find((({itemId:e})=>e===y));if(!E)throw new Error("trying to update config before it was created.");const A={...i,...o},_={basicConfigs:[A]},T=await(0,s.getSpecialItemGroupKey)(p,r,n),{itemKey:I}=S.find((({itemId:e})=>e===y)),b=await p.symmetricEncryption.decryptAES256(T,I),w=await p.symmetricEncryption.encryptAES256(b,btoa(JSON.stringify(_))),C=await m.makeUpdateItemEvent(E,I,{itemId:y,itemContent:w}),D=await m.updateItem(g,r.login,r.uki,C);if(!D.items.length)throw new Error("unable to update encryption service special item");const O=(0,c.currentTeamIdSelector)(a.getState());return await(0,u.updateAdminDataAfterItemAddedOrUpdated)(a,l,t.ws,r,`${O}`,{items:D.items,itemGroups:v.itemGroups}),await(0,d.updateSharingDataAfterItemAddedOrUpdated)(a,l,D.items[0]),A})(e,l,m,f,t,S):await(async(e,t,r)=>{const n={basicConfigs:[r]};return(await(0,a.createOrUpdateSpecialItem)(e,t,n)).basicConfigs[0]})(e,l,t)},t.persistEncryptionServiceConfig=async(e,r)=>{(0,l.requireAdmin)(e.storeService);const o=await(0,t.saveOrUpdateEncryptionServiceConfig)(e,r);return o?{success:!0,data:o}:{success:!1,error:{code:n.UnknownError}}}},27218:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.registerTeamDeviceAccount=t.reregisterTeamDevice=t.generateDeviceKeyPair=void 0;const n=r(81926),o=r(46298),i=r(97124),a=r(82366),s=r(34376),c=r(44197),u=r(92310),d=r(8995),l=r(69310),p=r(44293),m=r(43927),g=r(53921);t.generateDeviceKeyPair=async e=>{const{storeService:t,wsService:r}=e,{crypto:n}=(0,i.makeSharingService)(t,r),o=await n.asymmetricEncryption.generateRsaKeyPair();return{devicePrivateKey:o.privateKey.replace(g.PRIVATE_KEY_HEADER,"").replace(g.PRIVATE_KEY_FOOTER,"").replace(/[\r\n ]/gm,""),devicePublicKey:o.publicKey.replace(g.PUBLIC_KEY_HEADER,"").replace(g.PUBLIC_KEY_FOOTER,"").replace(/[\r\n ]/gm,"")}},t.reregisterTeamDevice=async(e,t,r=n.TeamDevicePlatform.ENCRYPTION_SERVICE)=>{t?.deviceAccessKey&&await(0,l.deactivateTeamDevice)(e,{teamDeviceAccessKey:t.deviceAccessKey});const i=await(0,d.registerTeamDevice)(e,{platform:r,deviceName:g.ENCRYPTION_SERVICE_HUMAN_DEVICE_NAME});if(i.success)return i.data;throw new Error(o.DeviceNotFound)},t.registerTeamDeviceAccount=async(e,r)=>{let d,l;r.shouldGenerateDeviceKeyPair?({devicePublicKey:d,devicePrivateKey:l}=await(0,t.generateDeviceKeyPair)(e)):(d=r.devicePublicKey,l=r.devicePrivateKey);const{storeService:f,wsService:S}=e,{crypto:h}=(0,i.makeSharingService)(f,S),y=(0,s.getCurrentUserInfo)(f),v=(0,u.currentTeamIdSelector)(f.getState()),E=(0,u.adminDataForTeamSelector)(f.getState(),v),{revision:A}=await(0,m.loadSpecialUserGroup)(S,y.login,y.uki,E),_=await(0,c.getSpecialUserGroupKey)(h,y,E),T=`${g.PUBLIC_KEY_HEADER}\n${d}\n${g.PUBLIC_KEY_FOOTER}`,I=await h.asymmetricEncryption.encrypt(T,_),b=`special-admin-${v}-${Math.floor(4294967296*Math.random()).toString(16)}@teamdevice.dashlane.com`,w=await(0,a.generateProposeSignature)(h,_,b),C=await(0,p.createTeamDeviceAccount)(e,{teamDeviceAccessKey:r.deviceAccessKey,publicKey:d,proposeSignature:w,userGroupRevision:A,groupKey:I,teamDeviceLogin:b});return!1===C.success?{success:!1,error:{code:(0,o.getCode)(C.error.code,n.createTeamDeviceAccountErrors)}}:{success:!0,data:{login:C.data.login,devicePrivateKey:l,devicePublicKey:d}}}},93921:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mapTeamDeviceEncryptedConfig=t.generateTeamDeviceEncryptedConfig=void 0;const r={scimSignatureKey:{defaultValue:"",configMapping:"DASHLANE_SCIM_SIGNATURE_KEY"},scimAuthToken:{defaultValue:"",configMapping:"DASHLANE_SCIM_AUTHENTICATION_TOKEN"},scimEnabled:{defaultValue:!1,configMapping:"DASHLANE_SCIM_ENABLED"},teamDevicePublicKey:{defaultValue:"",configMapping:"DASHLANE_SCIM_TEAMDEVICE_PUBLIC_KEY"},teamDevicePrivateKey:{defaultValue:"",configMapping:"DASHLANE_SCIM_TEAMDEVICE_PRIVATE_KEY"},connectorEndpoint:{defaultValue:"",configMapping:"DASHLANE_SSO_CONNECTOR_ENDPOINT"},connectorKey:{defaultValue:"",configMapping:"DASHLANE_SSO_CONNECTOR_KEY"},samlIdpCertificate:{defaultValue:"",configMapping:"DASHLANE_SSO_SAML_IDP_CERTIFICATE"},samlIdpEntryPoint:{defaultValue:"",configMapping:"DASHLANE_SSO_SAML_IDP_ENTRYPOINT"}};t.generateTeamDeviceEncryptedConfig=e=>Object.entries(r).map((([t,r])=>{return`${r.configMapping}=${n=r.defaultValue,o=e[t],"boolean"==typeof o||"boolean"==typeof n?o??n?"true":"false":`${o??n}`}`;var n,o})).join("\n"),t.mapTeamDeviceEncryptedConfig=e=>{const t=e.split("\n").reduce(((e,t)=>{const r=t.indexOf("="),[n,o]=[t.slice(0,r),t.slice(r+1)];return{...e,[n]:o}}),{}),n=Object.entries(r).reduce(((e,[r,{configMapping:n,defaultValue:o}])=>{return{...e,[r]:(i=o,a=t[n],a?a.length>0&&"boolean"==typeof i?"true"===a:"boolean"==typeof i?i:a??i:i)};var i,a}),{});if((e=>Object.keys(r).every((t=>t in e)))(n))return n;throw new Error("incomplete data when creating object from config string")}},44974:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getTeamDeviceEncryptedConfig=t.getParsedTeamDeviceEncryptedConfig=void 0;const n=r(56668),o=r(46298),i=r(64910),a=r(16593),s=r(25576),c=r(62618),u=r(76404),d=r(93921);t.getParsedTeamDeviceEncryptedConfig=async(e,{configEncryptionKey:t,encryptedConfig:r})=>{if(!r||!t)throw new Error("missing config or encryption key");const{teamDeviceEncryptedConfigEncryptorService:o}=e,a=(0,i.getNoDerivationCryptoConfig)();o.setInstance({raw:atob(t)},"",a);const s=await o.getInstance().decrypt(r),c=(0,n.deflatedUtf8ToUtf16)(s,{skipInflate:!0});return(0,d.mapTeamDeviceEncryptedConfig)(c)},t.getTeamDeviceEncryptedConfig=async function(e,{deviceAccessKey:r,draft:n}){const{storeService:i}=e;(0,c.requireAdmin)(i);const d=(0,a.userLoginSelector)(i.getState());if(!d)throw new Error(s.AuthenticationCode[s.AuthenticationCode.USER_UNAUTHORIZED]);const l=await(0,u.getEncryptionServiceConfig)(e);if(!1===l.success)return{success:!1,error:{code:l.error.code===o.BasicConfigNotFound?o.TeamDeviceEncryptedConfigNotFound:o.UnknownError}};const{data:{deviceAccessKey:p,configEncryptionKey:m}}=l,g={configurationVersion:0,deviceAccessKey:r||p,draft:n};try{const n=await(0,o.getTeamDeviceEncryptedConfig)(i,d,g);if((0,o.isApiError)(n))return{success:!1,error:{code:(0,o.getCode)(n.code,o.getTeamDeviceEncryptedConfigErrors)}};const a=await(0,t.getParsedTeamDeviceEncryptedConfig)(e,{encryptedConfig:n.encryptedConfiguration,configEncryptionKey:m});return{success:!0,data:{config:n.encryptedConfiguration,configurationVersion:n.configurationVersion,deviceAccessKey:r,encryptionKeyUuid:n.encryptionKeyUuid,configProperties:a}}}catch(e){return{success:!1,error:{code:o.TeamDeviceEncryptedConfigNotFound}}}}},70363:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.updateTeamDeviceEncryptedConfig=void 0;const n=r(46298),o=r(56668),i=r(64910),a=r(97124),s=r(34376),c=r(16593),u=r(89675),d=r(92310),l=r(76404),p=r(68538),m=r(5829),g=r(39482),f=r(31708),S=r(94150),h=r(62618),y=r(44974),v=r(93921),E=r(34054),A=r(1334);t.updateTeamDeviceEncryptedConfig=async(e,t={},r)=>{const{storeService:_,teamDeviceEncryptedConfigEncryptorService:T,wsService:I}=e;(0,h.requireAdmin)(_);const b=(0,c.userLoginSelector)(_.getState());if(!b)throw new Error("missing login");const w={ssoEnabled:!1,ssoIdpMetaData:"",ssoEndpoint:""},C=await(0,A.getTeamInfo)(e);C.success&&(w.ssoEnabled=C.data.teamInfo.ssoEnabled,w.ssoIdpMetaData=C.data.teamInfo.ssoIdpMetadata,w.ssoEndpoint=C.data.teamInfo.ssoServiceProviderUrl);const D=parseInt((0,d.currentTeamIdSelector)(_.getState()),10);let O=null,P=null;if(w.ssoIdpMetaData&&({samlIdpCertificate:O,samlIdpEntryPoint:P}=await(0,p.parseMetadataFields)(w.ssoIdpMetaData)),"string"==typeof t.ssoIdpMetadata){const{ssoIdpMetadata:r}=t;if(r)try{({samlIdpCertificate:O,samlIdpEntryPoint:P}=await(0,p.parseMetadataFields)(r))}catch(e){return{success:!1,error:{code:n.UnknownError}}}if((await(0,u.setTeamSettings)(_,I,(0,s.getCurrentUserInfo)(_),{teamId:D,settings:{ssoIdpMetadata:r||null,ssoIdpEntrypoint:P}})).error)return{success:!1,error:{code:n.UnknownError}}}const N=await(0,l.getEncryptionServiceConfig)(e),R=r||(N.success&&N.data.deviceAccessKey&&N.data.configEncryptionKey&&N.data.encryptionKeyUuid&&N.data.devicePrivateKey&&N.data.devicePublicKey?N.data:null);if(!R)return{success:!1,error:{code:n.DeviceKeyNotFound}};const{deviceAccessKey:M,encryptionKeyUuid:L,configEncryptionKey:U,devicePrivateKey:k,devicePublicKey:F}=R,B=L.toLowerCase(),G=await(0,y.getTeamDeviceEncryptedConfig)(e,{draft:!1,deviceAccessKey:M});let x={},$=0;if(!1===G.success&&G.error.code!==n.TeamDeviceEncryptedConfigNotFound)return{success:!1,error:{code:n.UnknownError}};if(!0===G.success){const{data:t}=G;x=await(0,y.getParsedTeamDeviceEncryptedConfig)(e,{encryptedConfig:t.config,configEncryptionKey:U}),$=t.configurationVersion}const j=(0,a.makeSharingService)(_,I),K=(0,d.currentTeamIdSelector)(_.getState()),V=(0,d.adminDataForTeamSelector)(_.getState(),K);let H=V?.ssoConnectorKey?.ssoConnectorKey;if(!H||t.ssoConnectorKey)try{H&&t.ssoConnectorKey&&await(0,S.removeTeamAdminItem)(e,"ssoConnectorKey");const r=t.ssoConnectorKey??await(0,m.generateSSOConnectorKey)();H=await(0,g.persistSSOConnectorKey)(e,j,r)}catch(e){return{success:!1,error:{code:n.UnknownError}}}let W=V?.scimSignatureKey?.scimSignatureKey;if(!W){const t=await(0,E.generateSCIMSignatureKey)();W=await(0,f.persistSCIMSignatureKey)(e,j,t)}const z={scimAuthToken:t?.scimAuthToken??x?.scimAuthToken??"",scimEnabled:t?.scimEnabled??x?.scimEnabled??!1,connectorEndpoint:t?.connectorEndpoint??x?.connectorEndpoint??w.ssoEndpoint??"",samlIdpEntryPoint:P??x?.samlIdpEntryPoint??"",samlIdpCertificate:O??x?.samlIdpCertificate??""},q=Boolean(t.ssoEnabled||x.connectorKey||w.ssoEnabled),Y={...z,teamDevicePrivateKey:k,teamDevicePublicKey:F,connectorKey:q?H:"",scimSignatureKey:z.scimEnabled?W:""},Z=(0,v.generateTeamDeviceEncryptedConfig)(Y),Q=(0,o.utf16ToDeflatedUtf8)(Z,{skipUtf8Encoding:!0,skipDeflate:!0}),X=(0,i.getNoDerivationCryptoConfig)();T.setInstance({raw:atob(U)},"",X);const J=T.getInstance(),ee=await J.encrypt(Q),te={configurationVersion:$,deviceAccessKey:M,ssoServiceEnabled:q,scimServiceEnabled:Y.scimEnabled,encryptionKeyUuid:B,draft:!1,encryptedConfiguration:ee,teamDeviceUrl:t.teamDeviceUrl},re=await(0,n.updateTeamDeviceEncryptedConfig)(_,b,te);return(0,n.isApiError)(re)?{success:!1,error:{code:(0,n.getCode)(re.code,n.updateTeamDeviceEncryptedConfigErrors)}}:{success:!0,data:{configurationVersion:re.configurationVersion,encryptionServiceReloadingStatus:re.encryptionServiceReloadingStatus}}}},94228:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.adminProvisioningKeySelector=void 0;const n=r(92310);t.adminProvisioningKeySelector=e=>{const t=(0,n.currentTeamIdSelector)(e),r=(0,n.adminDataForTeamSelector)(e,t);return{adminProvisioningKey:r.adminProvisioningKey?.adminProvisioningKey??null}}},33150:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.persistAdminProvisioningKey=void 0;const n=r(46298),o=r(97124),i=r(53050);t.persistAdminProvisioningKey=async(e,t)=>{const{adminProvisioningKey:r}=t,a=(0,o.makeSharingService)(e.storeService,e.wsService);try{return await(0,i.createOrUpdateSpecialItem)(e,a,{adminProvisioningKey:r})?{success:!0}:{success:!1,error:"failed to persist adminProvisioningKey"}}catch(e){return{success:!1,error:`${e?.message??n.UnknownError}`}}}},60419:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.removeAdminProvisioningKey=void 0;const n=r(94150);t.removeAdminProvisioningKey=async e=>(await(0,n.removeTeamAdminItem)(e,"adminProvisioningKey"),{success:!0})},94453:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.clearSelfHostedESSettings=void 0;const n=r(46298),o=r(17387),i=r(34376),a=r(89675),s=r(62618),c=r(69310),u=r(92310),d=r(12927),l=r(76404);t.clearSelfHostedESSettings=async e=>{const{storeService:t,wsService:r}=e;try{(0,s.requireAdmin)(t)}catch(e){if(e.message===o.AuthenticationCode[o.AuthenticationCode.USER_UNAUTHORIZED])return{success:!1,error:{code:n.NotAdmin}}}const p=await(0,l.getEncryptionServiceConfig)(e),m=[];if(p.success){if(p.data.config&&await(0,d.clearEncryptionServiceConfig)(e),p.data.deviceAccessKey&&!(await(0,c.deactivateTeamDevice)(e,{teamDeviceAccessKey:p.data.deviceAccessKey})).success)return{success:!1,error:{code:n.DeactivatedTeamDevice}}}else m.push(n.BasicConfigNotFound);const g=parseInt((0,u.currentTeamIdSelector)(t.getState()),10);return(await(0,a.setTeamSettings)(t,r,(0,i.getCurrentUserInfo)(t),{teamId:g,settings:{ssoServiceProviderUrl:null,ssoIdpMetadata:null,ssoIdpEntrypoint:null}})).error?{success:!1,error:{code:n.UnknownError}}:{success:!0,...m?{warnings:m}:{}}}},53921:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PUBLIC_KEY_FOOTER=t.PUBLIC_KEY_HEADER=t.PRIVATE_KEY_FOOTER=t.PRIVATE_KEY_HEADER=t.ENCRYPTION_SERVICE_HUMAN_DEVICE_NAME=void 0,t.ENCRYPTION_SERVICE_HUMAN_DEVICE_NAME="Encryption Service",t.PRIVATE_KEY_HEADER="-----BEGIN RSA PRIVATE KEY-----",t.PRIVATE_KEY_FOOTER="-----END RSA PRIVATE KEY-----",t.PUBLIC_KEY_HEADER="-----BEGIN RSA PUBLIC KEY-----",t.PUBLIC_KEY_FOOTER="-----END RSA PUBLIC KEY-----"},62618:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.requireAdmin=void 0;const n=r(25576),o=r(27885);t.requireAdmin=e=>{if(!(0,o.hasTACAccessInCurrentSpace)(e))throw new Error(n.AuthenticationCode[n.AuthenticationCode.USER_UNAUTHORIZED])}},34054:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.generateSCIMSignatureKey=void 0;const n=r(16038),o=r(55623);t.generateSCIMSignatureKey=async()=>{const e=await(0,o.getRandomValues)(32);return(0,n.bufferToBase64)(e)}},31708:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.persistSCIMSignatureKey=void 0;const n=r(53050);t.persistSCIMSignatureKey=async(e,t,r)=>(await(0,n.createOrUpdateSpecialItem)(e,t,{scimSignatureKey:r})).scimSignatureKey},39482:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.persistSSOConnectorKey=void 0;const n=r(53050);t.persistSSOConnectorKey=async(e,t,r)=>(await(0,n.createOrUpdateSpecialItem)(e,t,{ssoConnectorKey:r})).ssoConnectorKey},88791:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EncryptionServiceRestartStatusCodes=void 0,function(e){e.OK="OK",e.ES_UNREACHABLE="ES_UNREACHABLE",e.ES_CONFIG_RELOAD_FAILURE="ES_CONFIG_RELOAD_FAILURE",e.ES_INTERNAL_NETWORK_ERROR="ES_INTERNAL_NETWORK_ERROR"}(t.EncryptionServiceRestartStatusCodes||(t.EncryptionServiceRestartStatusCodes={}))},16382:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.changeInviteLinkTeamKey=void 0;const n=r(46298),o=r(8286),i=r(62618),a=r(16593);t.changeInviteLinkTeamKey=async function(e,t){const{storeService:r}=e;try{const e=(0,a.userLoginSelector)(r.getState()),s={success:!1,error:{code:o.InviteLinkResponseErrorCode.NotAdmin}};try{(0,i.requireAdmin)(r)}catch{return s}if(!e)return s;const c=await(0,n.changeInviteLinkTeamKey)(r,e,t);return(0,n.isApiError)(c)?{success:!1,error:{code:(0,n.getCode)(c.code,n.getInviteLinkErrors)}}:{success:!0,data:c}}catch(e){return{success:!1,error:{code:o.InviteLinkResponseErrorCode.InviteLinkNotFound}}}}},4658:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createInviteLink=void 0;const n=r(46298),o=r(8286),i=r(62618),a=r(16593);t.createInviteLink=async function(e,t){const{storeService:r}=e;try{const e=(0,a.userLoginSelector)(r.getState()),s={success:!1,error:{code:o.InviteLinkResponseErrorCode.NotAdmin}};try{(0,i.requireAdmin)(r)}catch{return s}if(!e)return s;const c=await(0,n.createInviteLink)(r,e,t);return(0,n.isApiError)(c)?{success:!1,error:{code:(0,n.getCode)(c.code,n.getInviteLinkErrors)}}:{success:!0,data:c}}catch(e){return{success:!1,error:{code:o.InviteLinkResponseErrorCode.InviteLinkNotFound}}}}},7134:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getInviteLinkForAdmin=void 0;const n=r(46298),o=r(8286),i=r(62618),a=r(16593);t.getInviteLinkForAdmin=async function(e,t){const{storeService:r}=e;try{const e=(0,a.userLoginSelector)(r.getState()),s={success:!1,error:{code:o.InviteLinkResponseErrorCode.NotAdmin}};try{(0,i.requireAdmin)(r)}catch{return s}if(!e)return s;const c=await(0,n.getInviteLinkForAdmin)(r,e,t);return(0,n.isApiError)(c)?{success:!1,error:{code:(0,n.getCode)(c.code,n.getInviteLinkErrors)}}:{success:!0,data:c}}catch(e){return{success:!1,error:{code:o.InviteLinkResponseErrorCode.InviteLinkNotFound}}}}},64690:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getInviteLink=void 0;const n=r(46298),o=r(8286);t.getInviteLink=async function(e,t){const{storeService:r}=e;try{const e=await(0,n.getInviteLink)(r,t);return(0,n.isApiError)(e)?{success:!1,error:{code:(0,n.getCode)(e.code,n.getInviteLinkErrors)}}:{success:!0,data:e}}catch(e){return{success:!1,error:{code:o.InviteLinkResponseErrorCode.InviteLinkNotFound}}}}},62218:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.requestInviteLinkToken=void 0;const n=r(46298),o=r(8286);t.requestInviteLinkToken=async function(e,t){const{storeService:r}=e;try{const e=await(0,n.requestInviteLinkToken)(r,t);return(0,n.isApiError)(e)?{success:!1,error:{code:(0,n.getCode)(e.code,n.getInviteLinkErrors)}}:{success:!0,data:e}}catch(e){return{success:!1,error:{code:o.InviteLinkResponseErrorCode.UserInviteLinkNotFound}}}}},54419:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.toggleInviteLink=void 0;const n=r(46298),o=r(8286),i=r(62618),a=r(16593);t.toggleInviteLink=async function(e,t){const{storeService:r}=e;try{const e=(0,a.userLoginSelector)(r.getState()),s={success:!1,error:{code:o.InviteLinkResponseErrorCode.NotAdmin}};try{(0,i.requireAdmin)(r)}catch{return s}if(!e)return s;const c=await(0,n.toggleInviteLink)(r,e,t);return(0,n.isApiError)(c)?{success:!1,error:{code:(0,n.getCode)(c.code,n.getInviteLinkErrors)}}:{success:!0,data:c}}catch(e){return{success:!1,error:{code:o.InviteLinkResponseErrorCode.InviteLinkNotFound}}}}},8286:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InviteLinkResponseErrorCode=void 0,function(e){e.NotAdmin="not_admin",e.TeamKeyNotFound="TEAM_KEY_NOT_FOUND",e.InviteLinkNotFound="TEAM_INVITE_LINK_NOT_FOUND",e.UserInviteLinkNotFound="USER_TEAM_INVITE_TOKEN_NOT_FOUND"}(t.InviteLinkResponseErrorCode||(t.InviteLinkResponseErrorCode={}))},23904:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createConfigString=void 0,t.createConfigString=(e,t,r,n,o,i,a)=>`\nDASHLANE_SSO_CONNECTOR_ENDPOINT=${t}\nDASHLANE_SSO_SAML_IDP_CERTIFICATE=${i}\nDASHLANE_SSO_SAML_IDP_ENTRYPOINT=${a}\nDASHLANE_SSO_CONNECTOR_KEY=${e}\nDASHLANE_SSO_TEAM_DEVICE_ACCESS_KEY=${n}\nDASHLANE_SSO_TEAM_DEVICE_SECRET_KEY=${r}\nDASHLANE_SSO_TEAM_UUID=${o}\n`},76713:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createSSOConnectorConfig=void 0;const n=r(81926),o=r(8995),i=r(23904),a=r(68538),s=r(89675),c=r(34376),u=r(92310);t.createSSOConnectorConfig=async function(e,t){const{connectorUrl:r,connectorKey:d,idpMetadata:l}=t;if(!r||!l)throw new Error(`[createConfig] : Missing request information -\n                Received connectorUrl : ${!!r} or\n                Received idpMetadata: ${!!l}\n            `);const p=await(0,o.registerTeamDevice)(e,{platform:n.TeamDevicePlatform.SSO_CONNECTOR,deviceName:"SSO Connector"});if(!1===p.success)return{success:!1,error:{code:p.error.code}};const m=p.data.deviceSecretKey,g=p.data.deviceAccessKey,f=p.data.teamUuid;try{const{samlIdpCertificate:t,samlIdpEntryPoint:n}=await(0,a.parseMetadataFields)(l),{storeService:o,wsService:p}=e,S=(0,u.currentTeamIdSelector)(o.getState()),h=parseInt(S,10);if(isNaN(h))throw new Error("[createSSOConnectorConfig] : Unable to retrieve teamId from [parseInt(currentTeamIdString, 10)]");return await(0,s.setTeamSettings)(o,p,(0,c.getCurrentUserInfo)(o),{teamId:h,settings:{ssoIdpEntrypoint:n}}),{success:!0,config:(0,i.createConfigString)(d||"",r.toLowerCase(),m,g,f,t,n)}}catch(e){return{success:!1,error:{code:e.message}}}}},5829:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.generateSSOConnectorKey=void 0;const n=r(16038),o=r(69530),i=r(28354);t.generateSSOConnectorKey=async function(){const e=await(0,o.generate64BytesKey)(),t=(0,n.bufferToBase64)(e);return`${(0,i.v4)()}|${t}`}},73168:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},68538:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseMetadataFieldsHandler=t.parseMetadataFields=t.SamlTags=void 0;const n=r(44015),o=r(61797),i=r(82848);var a;!function(e){e.IDP_SSO_DESCRIPTOR="IDPSSODescriptor",e.KEY_DESCRIPTOR="KeyDescriptor",e.SINGLE_SIGN_ON_SERVICE="SingleSignOnService",e.CERTIFICATE="X509Certificate"}(a=t.SamlTags||(t.SamlTags={}));function s(e){const t=(0,o.findAllKWXMLElementsOfType)(e,a.IDP_SSO_DESCRIPTOR,[]);if(1!==t.length)throw new Error(i.IDPMetadataParseErrors.INVALID_IDP_SSO_DESCRIPTOR);return t[0]}t.parseMetadataFields=async e=>{const t=e.trim().replace(/[\r\n\t]/gm,""),r=await(c=t,new Promise(((e,t)=>{(0,n.parseXml)(((r,o)=>{r?t(new Error(i.IDPXmlParseErrors.XML_PARSE_FAILED)):(0,n.isKWXMLElement)(o)?e(o):t(new Error(i.IDPXmlParseErrors.XML_PARSE_FAILED))}),c)})));var c;return{samlIdpCertificate:function(e){const t=(0,o.findAllKWXMLElementsOfType)(s(e),a.KEY_DESCRIPTOR,[]).filter((e=>!e.__attributes__?.use||"signing"===e.__attributes__?.use));if(!t.length)throw new Error(i.IDPMetadataParseErrors.KEY_DESCRIPTOR_NOT_FOUND);const r=[];if(t.forEach((e=>(0,o.findAllKWXMLElementsOfType)(e,a.CERTIFICATE,r))),!r.length)throw new Error(i.IDPMetadataParseErrors.MISSING_CERTIFICATE);if(r.length>1)throw new Error(i.IDPMetadataParseErrors.MULTIPLE_CERTIFICATES);const n=r[0].__value__;if(!n?.length)throw new Error(i.IDPMetadataParseErrors.MISSING_CERTIFICATE);if(n.length<64)throw new Error(i.IDPMetadataParseErrors.CERTIFICATE_TOO_SHORT);if(n.length>4096)throw new Error(i.IDPMetadataParseErrors.CERTIFICATE_TOO_LONG);try{atob(n)}catch{throw new Error(i.IDPMetadataParseErrors.CERTIFICATE_DECODE_FAILED)}return n}(r),samlIdpEntryPoint:function(e){const t=s(e).__children__.filter((e=>{if((0,n.isKWXMLElement)(e))return(0,o.removeNamespace)(e.__type__)===a.SINGLE_SIGN_ON_SERVICE})).find((e=>{if((0,n.isKWXMLElement)(e)){const t=e.__attributes__.Binding;if("string"==typeof t)return t.includes("HTTP-POST")}}));if(!t)throw new Error(i.IDPMetadataParseErrors.IDP_ENTRYPOINT_NOT_FOUND);if((0,n.isKWXMLElement)(t)){const e=t.__attributes__.Location;if("string"==typeof e)return e;throw new Error(i.IDPMetadataParseErrors.INVALID_ENTRYPOINT)}throw new Error(i.IDPMetadataParseErrors.INVALID_ENTRYPOINT)}(r)}},t.parseMetadataFieldsHandler=async(e,{ssoIdpMetadata:r})=>{try{const{samlIdpCertificate:e,samlIdpEntryPoint:n}=await(0,t.parseMetadataFields)(r);return{success:!0,data:{samlIdpCertificate:e,samlIdpEntryPoint:n}}}catch(e){const t=Object.values(i.IDPXmlParseErrors),r=Object.values(i.IDPMetadataParseErrors);return{success:!1,error:t.concat(r).includes(e.message)?e.message:i.IDPXmlParseErrors.XML_PARSE_FAILED}}}},82848:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IDPMetadataParseErrors=t.IDPXmlParseErrors=void 0,function(e){e.XML_PARSE_FAILED="xml_parse_failed"}(t.IDPXmlParseErrors||(t.IDPXmlParseErrors={})),function(e){e.KEY_DESCRIPTOR_NOT_FOUND="key_descriptor_not_found",e.IDP_ENTRYPOINT_NOT_FOUND="idp_entrypoint_not_found",e.INVALID_IDP_SSO_DESCRIPTOR="invalid_idp_sso_descriptor",e.MISSING_CERTIFICATE="missing_certificate",e.MULTIPLE_CERTIFICATES="multiple_certificates",e.CERTIFICATE_TOO_SHORT="certificate_too_short",e.CERTIFICATE_TOO_LONG="certificate_too_long ",e.CERTIFICATE_DECODE_FAILED="certificate_decode_failed",e.INVALID_ENTRYPOINT="invalid_entrypoint"}(t.IDPMetadataParseErrors||(t.IDPMetadataParseErrors={}))},68323:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},70178:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.updateTeamSettings=void 0;const n=r(34376),o=r(27885),i=r(89675);t.updateTeamSettings=async(e,t)=>{const r=(0,o.getCurrentSpaceId)(e.storeService.getSpaceData()),a=await(0,i.setTeamSettings)(e.storeService,e.wsService,(0,n.getCurrentUserInfo)(e.storeService),{teamId:r,settings:t});return a.error?{success:!1,error:a.error.message}:{success:!0}}},38045:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getSpecialUserGroupRevision=t.getSpecialUserGroupInviteValuesForMemberInTeam=t.removeTeamAdmin=t.addTeamAdmin=t.proposeMembers=t.getMembers=void 0,r(16516);const n=r(34376),o=r(36513),i=r(44197),a=r(43927),s=r(97124),c=r(95375),u=r(46298),d=e=>{const t=e.nbrPasswords&&"removed"!==e.status;return e.securityIndex="removed"!==e.status&&e.securityIndex,e.nbrPasswords=t&&e.nbrPasswords,"pending"===e.status&&e.lastUpdateDateUnix&&delete e.lastUpdateDateUnix,e};t.getMembers=async function(e,t,{teamId:r}){const n=await(0,c.getTeamMembers)(e,t,{teamId:r,orderBy:"login",limit:0});return(0,u.isApiError)(n)?{success:!1,error:new Error(n.message)}:{success:!0,members:n.members.map(d)}},t.proposeMembers=async function(e,{login:t,uki:r},{proposedMemberLogins:n,teamId:o,origin:i,notificationOptions:a={skipAccountCreationRequiredAlerts:!1}}){const{content:s}=await e.teamPlans.proposeMembers({login:t,uki:r,teamId:o,proposedMemberLogins:n,force:!0,origin:i,notificationOptions:a});return s},t.addTeamAdmin=async function(e,{teamId:t,memberLogin:r}){const{ws:s,store:c}=e,u=(0,n.getCurrentUserInfo)(c),d=c.getTeamAdminData(),l=(0,i.getAdminDataFromTeamAdminData)(d,String(t)),{revision:p}=await(0,a.loadSpecialUserGroup)(s,u.login,u.uki,l),{groupKey:m,proposeSignature:g}=await(0,i.makeInviteToSpecialUserGroup)(e,(0,o.makeCryptoService)(),u,d,{teamId:t,memberLogin:r});return await e.ws.teamPlans.addTeamAdmin({login:u.login,uki:u.uki,teamId:t,memberLogin:r,memberAlias:r,groupKey:m,proposeSignature:g,userGroupRevision:p}),{}},t.removeTeamAdmin=async function(e,{teamId:t,memberLogin:r}){const{ws:o,store:s}=e,c=(0,n.getCurrentUserInfo)(s),u=s.getTeamAdminData(),d=(0,i.getAdminDataFromTeamAdminData)(u,String(t)),{revision:l}=await(0,a.loadSpecialUserGroup)(o,c.login,c.uki,d);return await o.teamPlans.removeTeamAdmin({login:c.login,uki:c.uki,teamId:t,memberLogin:r,userGroupRevision:l}),{}},t.getSpecialUserGroupInviteValuesForMemberInTeam=async function(e,{teamId:t,memberLogin:r}){const{wsService:a,storeService:c}=e,u=(0,s.makeSharingService)(c,a),d=(0,n.getCurrentUserInfo)(c),l=c.getTeamAdminData(),{groupKey:p,proposeSignature:m}=await(0,i.makeInviteToSpecialUserGroup)(u,(0,o.makeCryptoService)(),d,l,{teamId:t,memberLogin:r});return{groupKey:p,proposeSignature:m}},t.getSpecialUserGroupRevision=async function(e,{teamId:t}){const{wsService:r,storeService:o}=e,s=(0,n.getCurrentUserInfo)(o),c=o.getTeamAdminData(),u=(0,i.getAdminDataFromTeamAdminData)(c,String(t)),{revision:d}=await(0,a.loadSpecialUserGroup)(r,s.login,s.uki,u);return{specialUserGroupRevision:d}}},19408:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getUserGroupKey=t.syncUserGroupManagementForAllTeams=void 0;const n=r(19364),o=r(43927),i=r(85784),a=r(81567),s=r(17137);t.syncUserGroupManagementForAllTeams=function(e,t,r,c,u,d,l){const p=(0,o.syncAdministrableTeamList)(u,l);return Promise.all(Object.keys(p.teams).map((u=>{const l=p.teams[u];return function(e,t,r,c,u,d){return Promise.resolve(u).then((e=>(0,o.syncAdminData)(t,r,e,d))).then((t=>(0,n.setupUserGroupManagement)(e,r,c,t))).then((t=>t.status===i.SyncUserGroupManagementStatus.NEEDS_FRESH_SHARING_DATA?t:(0,a.filterOutInvalidUserGroupUsers)(e.crypto,t.adminData).then((t=>(0,s.sendUserGroupInvitesToNewUsers)(e,r,t))).then((e=>({status:i.SyncUserGroupManagementStatus.COMPLETE,adminData:e})))))}(e,t,r,c,l,d)}))).then((e=>{const t={};return e.map((e=>e.adminData)).forEach((e=>{t[e.teamId]=e})),{status:e.some((e=>e.status===i.SyncUserGroupManagementStatus.NEEDS_FRESH_SHARING_DATA))?i.SyncUserGroupManagementStatus.NEEDS_FRESH_SHARING_DATA:i.SyncUserGroupManagementStatus.COMPLETE,teamAdminData:{teams:t}}}))},t.getUserGroupKey=function(e,t){if(!e)return null;const r=e.find((e=>e.groupId===t));return r?r.groupKey:null}},36467:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getUserGroupAdminItemsFromMigration=t.createItemsForUserGroups=void 0;const n=r(78320),o=r(93513);async function i(e,t,r){const n=r.users.find((e=>e.userId===t.login));if(!n)throw new Error("Couldnt find self in user group");return await e.asymmetricEncryption.decrypt(t.privateKey,n.groupKey)}t.createItemsForUserGroups=async function(e,t,r){return await Promise.all(r.map((r=>async function(e,t,r){const n=await e.symmetricEncryption.generateNewAESKey(),[i,a]=await Promise.all([e.symmetricEncryption.encryptAES256(n,o.encode(JSON.stringify(r))),e.symmetricEncryption.encryptAES256(t,o.encode(n))]);return{itemId:r.itemId,itemKey:a,content:i}}(e,t,r))))},t.getUserGroupAdminItemsFromMigration=async function(e,t,r){return await Promise.all((r.userGroups||[]).map((r=>async function(e,t,r){return{itemId:(0,n.generateItemUuid)(),groupId:r.groupId,groupKey:await i(e,t,r)}}(e,t,r))))}},17137:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sendUserGroupInvitesToNewUsers=void 0;const n=r(70252),o=r(95623),i=r(19408);function a(e){return e.users.filter((e=>"publicKey"===e.rsaStatus))}t.sendUserGroupInvitesToNewUsers=function(e,t,r){return Promise.resolve().then((()=>function(e){return e.userGroups?e.userGroups.reduce(((e,t)=>e.concat(a(t))),[]):[]}(r))).then((s=>s.length?function(e,t,r){const{login:n,uki:o}=t,i=JSON.stringify(r.map((e=>e.alias)));return e.userGroup.findUsersByAliases({login:n,uki:o,aliases:i})}(e,t,s).then((s=>{const c=r.userGroups.map((c=>{const u=a(c);if(!u.length)return Promise.resolve(c);const d=function(e,t){return t.map((t=>({Alias:t.alias,Login:e[t.alias].login,PublicKey:e[t.alias].publicKey,Permission:t.permission})))}(s,u),l=(0,i.getUserGroupKey)(r.userGroupAdminItems,c.groupId);return e.userGroup.makeUpdateMembersWithInviteEvent(c.groupId,l,c.revision,d).then((r=>e.userGroup.updateUserGroupMembers(t,r))).then((e=>e[0])).catch((e=>{const t=`[sendUserGroupInvitesToNewUsers] - Cannot send update event for one user group - groupId: ${c.groupId} - error: ${e}`,r=new Error(t);return o.default.error(r),(0,n.sendExceptionLog)({error:r}),c}))}));return Promise.all(c).then((e=>({...r,userGroups:e})))})):r))}},19364:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createSpecialGroups=t.setupUserGroupManagement=void 0;const n=r(95623),o=r(63623),i=r(44197),a=r(36467),s=r(85784);function c(e,t,r,i){return n.Debugger.log("setting up group sharing for team: "+i.teamId),Promise.resolve(i).then((n=>n.specialUserGroup?n:(0,o.createSpecialUserGroup)(e,t,r,Number(n.teamId)).then((e=>Object.assign({},n,{specialUserGroup:e}))))).then((r=>r.specialItemGroup?r:(0,a.getUserGroupAdminItemsFromMigration)(e.crypto,t,i).then((n=>(0,o.createSpecialItemGroup)(e,t,r.specialUserGroup,n).then((e=>Object.assign({},r,{specialItemGroup:e,userGroupAdminItems:n})))))))}t.setupUserGroupManagement=function(e,t,r,n){const o=n.specialUserGroup,a=n.specialItemGroup;if(!o)return a?Promise.reject(new Error("UserGroupManagementSetupService - no special user group, but a special item group is present")):c(e,t,r,n).then((e=>({status:s.SyncUserGroupManagementStatus.COMPLETE,adminData:e})));const u=(0,i.getUserInUserGroup)(t.login,o);return u?"pending"===u.status?a?Promise.reject(new Error("UserGroupManagementSetupService - special user group is not accepted, but a special item group is present")):Promise.resolve().then((()=>e.userGroup.isCurrentUserProposeSignatureValid(t,o))).then((e=>{if(!e)throw new Error("UserGroupManagementSetupService - INVALID_PROPOSE_SIGNATURE")})).then((()=>e.userGroup.makeAcceptUserGroupEvent(t,o))).then((r=>e.userGroup.acceptUserGroup(t,r))).then((({userGroups:e})=>{if(1!==e.length)throw new Error(`UserGroupManagementSetupService - Invalid response from UserGroupService.acceptUserGroup - ${e}`);return e[0]})).then((e=>Object.assign({},n,{specialUserGroup:e}))).then((e=>({status:s.SyncUserGroupManagementStatus.NEEDS_FRESH_SHARING_DATA,adminData:e}))):"accepted"===u.status?a?Promise.resolve({status:s.SyncUserGroupManagementStatus.COMPLETE,adminData:n}):c(e,t,r,n).then((e=>({status:s.SyncUserGroupManagementStatus.COMPLETE,adminData:e}))):Promise.reject(new Error("UserGroupManagementSetupService - current user status in special user group is neither accepted or pending")):Promise.reject(new Error("UserGroupManagementSetupService - Current user us missing from special user group"))},t.createSpecialGroups=c},43927:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.loadSpecialUserGroup=t.loadSpecialItemGroup=t.syncAdminDataFromSharingData=t.createUserGroupAdminItemInState=t.deleteAdministrableUserGroups=t.updateAdministrableUserGroupList=t.updateTeamAdminData=t.filterTeamAdminData=t.syncAdminData=t.syncAdministrableTeamList=t.getUserGroupDescriptionsForTeam=void 0;const n=r(63623),o=r(1370),i=r(58639),a=r(44197),s=r(36513),c=r(27885);function u(e,t,r,n){return e.teamPlans.findUserGroups({login:t,uki:r,teamId:n}).then((e=>e.content.userGroups))}function d(e){const t={};return Object.keys(e.teams).forEach((r=>{const n=e.teams[r];t[r]=n?{teamId:r,userGroups:n.userGroups||[],notifications:n.notifications||{accountRecoveryRequests:[]}}:{teamId:r}})),{teams:t}}t.getUserGroupDescriptionsForTeam=u,t.syncAdministrableTeamList=function(e,t){const r={},n=(0,c.getNodePremiumStatusSpaceData)(t),o=n.spaces.filter((e=>(0,c.hasSpecialUserGroupAccessInSpace)(e.teamId,n))).map((e=>e.teamId));return Object.keys(e.teams).filter((e=>Boolean(e))).filter((e=>o.includes(e))).forEach((t=>{r[t]=e.teams[t]})),o.forEach((e=>{r[e]||(r[e]={teamId:e})})),{teams:r}},t.syncAdminData=async function(e,t,r,o){const i=await p(t,r,o);return i.specialUserGroup&&!(0,a.hasUserAcceptedUserGroup)(t.login,i.specialUserGroup)?i:async function(e,t,r,o){const i={items:[],itemGroups:[],userGroups:(await u(e,t,r,Number(o.teamId))).map((e=>({id:e.groupId,revision:e.revision})))},a={items:[],itemGroups:[],userGroups:(o.userGroups||[]).filter((e=>Boolean(e)))},s=await(0,n.buildSharingData)(e,t,r,i,a);return{...o,userGroups:s.userGroups}}(e,t.login,t.uki,i)},t.filterTeamAdminData=d,t.updateTeamAdminData=function(e,t){e.dispatch((0,o.teamAdminDataUpdated)(t)),(0,i.sendTeamAdminDataUpdate)(d(t))},t.updateAdministrableUserGroupList=function(e,t,r){e.dispatch((0,o.userGroupsUpdated)(t,r)),(0,i.sendTeamAdminDataUpdate)(d(e.getTeamAdminData()))},t.deleteAdministrableUserGroups=function(e,t,r){e.dispatch((0,o.userGroupsDeleted)(t,r)),(0,i.sendTeamAdminDataUpdate)(d(e.getTeamAdminData()))},t.createUserGroupAdminItemInState=function(e,t,r){e.dispatch((0,o.userGroupAdminItemCreated)(t,r))};const l=e=>e.reduce(((e,t)=>((0,a.isUserGroupAdminItem)(t)?e.userGroupAdminItems.push(t):(0,a.isDirectorySyncKey)(t)?e.directorySyncKey=t:(0,a.isEsBasicConfigsData)(t)?e.encryptionServiceData=t:(0,a.isSSOConnectorKey)(t)?e.ssoConnectorKey=t:(0,a.isSCIMSignatureKey)(t)?e.scimSignatureKey=t:(0,a.isAdminProvisioningKey)(t)&&(e.adminProvisioningKey=t),e)),{userGroupAdminItems:[],directorySyncKey:null,encryptionServiceData:null,ssoConnectorKey:null,scimSignatureKey:null,adminProvisioningKey:null});async function p(e,t,r){const n=function(e,t){const r=t.itemGroups.find((t=>"userGroupKeys"===t.type&&t.teamId===Number(e.teamId))),n=t.userGroups.find((t=>"teamAdmins"===t.type&&t.teamId===Number(e.teamId)));return{...e,specialItemGroup:r,specialUserGroup:n}}(t,r);return async function(e,t,r){const n=(0,s.makeCryptoService)(),o=t.specialItemGroup&&t.specialItemGroup.items||[],i=e=>({itemId:t})=>t===e,c=await Promise.all(r.items.filter((e=>o.find(i(e.itemId)))).map((r=>{const s=o.find(i(r.itemId))?.itemKey;if(!s)throw new Error("Unexpected error: missing itemKey");return(0,a.decryptAdminItem)(n,e,t,r,s)}))),{userGroupAdminItems:u,directorySyncKey:d,encryptionServiceData:p,ssoConnectorKey:m,scimSignatureKey:g,adminProvisioningKey:f}=l(c);return{...t,userGroupAdminItems:u,directorySyncKey:d,encryptionServiceData:p,ssoConnectorKey:m,scimSignatureKey:g,adminProvisioningKey:f}}(e,n,r)}t.syncAdminDataFromSharingData=p,t.loadSpecialItemGroup=async function(e,t,r,o){if(!o.specialItemGroup||!o.specialItemGroup.groupId)throw new Error("specialItemGroup is missing from adminData");const{itemGroups:i}=await(0,n.getSharedData)(e,t,r,{itemIds:[],itemGroupIds:[o.specialItemGroup.groupId],userGroupIds:[]});if(i&&1===i.length)return i[0];throw new Error("could not fetch specialItemGroup")},t.loadSpecialUserGroup=async function(e,t,r,o){const{userGroups:i}=await(0,n.getSharedData)(e,t,r,{itemIds:[],itemGroupIds:[],userGroupIds:o.specialUserGroup?.groupId?[o.specialUserGroup.groupId]:[]});if(i&&1===i.length)return i[0];throw new Error("Could not fetch specialUserGroup")}},85784:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SyncUserGroupManagementStatus=void 0,function(e){e[e.NEEDS_FRESH_SHARING_DATA=0]="NEEDS_FRESH_SHARING_DATA",e[e.COMPLETE=1]="COMPLETE"}(t.SyncUserGroupManagementStatus||(t.SyncUserGroupManagementStatus={}))},81567:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.filterOutInvalidUserGroupUsers=void 0;const n=r(82366),o=r(19408);t.filterOutInvalidUserGroupUsers=function(e,t){if(!t.userGroups)return Promise.resolve(t);const r=t.userGroups.map((r=>{const i=(0,o.getUserGroupKey)(t.userGroupAdminItems,r.groupId);return function(e,t,r){const o=r.map((r=>{if("refused"===r.status||"revoked"===r.status)return Promise.resolve(!0);if(!r.proposeSignature)return Promise.resolve(!1);const o=r.proposeSignatureUsingAlias?r.alias:r.userId;return(0,n.isProposeSignatureValid)(e,r.proposeSignature,o,t)}));return Promise.all(o).then((e=>r.filter(((t,r)=>e[r]))))}(e,i,r.users).then((e=>({...r,users:e})))}));return Promise.all(r).then((e=>({...t,userGroups:e})))}},44197:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.findTeamForGroup=t.syncUserGroupManagement=t.isAdminProvisioningKey=t.isSCIMSignatureKey=t.isSSOConnectorKey=t.isEsBasicConfigsData=t.isDirectorySyncKey=t.isUserGroupAdminItem=t.decryptAdminItem=t.getUserGroup=t.getUserGroupAdminItem=t.getSpecialItemGroupKey=t.getSpecialItemGroupFromAdminData=t.getAdminDataFromTeamAdminData=t.makeInviteToSpecialUserGroup=t.getPublicKeyForUser=t.encryptGroupKeyForUser=t.getSpecialUserGroupPrivateKey=t.getSpecialUserGroupKey=t.hasUserAcceptedUserGroup=t.getUserInUserGroup=t.getSpecialUserGroup=void 0;const n=r(63623),o=r(34376),i=r(82366),a=r(70206),s=r(19408),c=r(43927),u=r(97124);function d(e){return e.specialUserGroup}function l(e,t,r){const n=d(r);if(!n)throw new Error("specialUserGroup is not available in adminData");const o=n.users.find((e=>e.userId===t.login));if(!o)throw new Error("couldnt find self in specialUserGroup users");return(0,a.decryptGroupKey)(e,t,o.groupKey)}async function p(e,t,r){const n=await l(e,t,r),o=d(r);return await e.symmetricEncryption.decryptAES256(n,o.privateKey)}function m(e,t,r){return e.asymmetricEncryption.encrypt(t,r)}function g(e,t,r){return e.userGroup.findExistingUsersByAliases({login:t.login,uki:t.uki,aliases:(0,n.extractAliasesFromMembers)([{Alias:r}])}).then((e=>e[r].publicKey))}function f(e,t){return e.teams[t]}function S(e){return e.specialItemGroup}async function h(e,t,r){const n=S(r);if(!n)throw new Error("specialItemGroup is not available in adminData");const o=await p(e,t,r),i=d(r).groupId,a=n.groups.find((e=>e.groupId===i));if(!a)throw new Error("couldnt find specialUserGroup in specialItemGroup groups");return e.asymmetricEncryption.decrypt(o,a.groupKey)}t.getSpecialUserGroup=d,t.getUserInUserGroup=function(e,t){return t.users.find((t=>t.userId===e))},t.hasUserAcceptedUserGroup=function(e,t){return t.users.some((t=>t.userId===e&&"accepted"===t.status))},t.getSpecialUserGroupKey=l,t.getSpecialUserGroupPrivateKey=p,t.encryptGroupKeyForUser=m,t.getPublicKeyForUser=g,t.makeInviteToSpecialUserGroup=function(e,t,r,n,{teamId:o,memberLogin:a,publicKey:s}){const c=f(n,String(o)),u=s?Promise.resolve(s):g(e,r,a);return Promise.all([l(t,r,c),u]).then((([e,r])=>Promise.all([m(t,r,e),(0,i.generateProposeSignature)(t,e,a)]))).then((([e,t])=>({groupKey:e,proposeSignature:t,userGroupRevision:d(c).revision})))},t.getAdminDataFromTeamAdminData=f,t.getSpecialItemGroupFromAdminData=S,t.getSpecialItemGroupKey=h,t.getUserGroupAdminItem=function(e,t,r){return(f(e,t).userGroupAdminItems||[]).find((e=>e.groupId===r))},t.getUserGroup=function(e,t){return Object.keys(e.teams).map((t=>e.teams[t]&&e.teams[t].userGroups)).reduce(((e,t)=>t.concat(e)),[]).find((e=>e.groupId===t))},t.decryptAdminItem=async function(e,t,r,n,o){const i=await h(e,t,r),a=await e.symmetricEncryption.decryptAES256(i,o),s=await e.symmetricEncryption.decryptAES256(a,n.content);return{...JSON.parse(s),itemId:n.itemId}},t.isUserGroupAdminItem=function(e){return"groupId"in e},t.isDirectorySyncKey=function(e){return"publicKey"in e},t.isEsBasicConfigsData=e=>"basicConfigs"in e,t.isSSOConnectorKey=e=>"ssoConnectorKey"in e,t.isSCIMSignatureKey=e=>"scimSignatureKey"in e,t.isAdminProvisioningKey=e=>"adminProvisioningKey"in e,t.syncUserGroupManagement=function(e,t,r){const n=e.getSpaceData(),i=e.getTeamAdminData(),a=(0,o.getCurrentUserInfo)(e),d=(0,u.makeSharingService)(e,t);return a.privateKey?(0,s.syncUserGroupManagementForAllTeams)(d,t,(0,o.getCurrentUserInfo)(e),n,i,r,e).then((t=>((0,c.updateTeamAdminData)(e,t.teamAdminData),t.status))):Promise.reject(new Error("PRIVATE_KEY_MISSING"))},t.findTeamForGroup=function(e,t){const r=Object.keys(e.teams).find((r=>e.teams[r].userGroups.some((e=>e.groupId===t))));return r&&e&&e.teams&&e.teams[r]}},32159:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.adminProvisioningKey$=t.administrableUserGroup$=t.administrableUserGroups$=void 0;const n=r(18948),o=r(3343),i=r(92310),a=r(94228);t.administrableUserGroups$=function(){const e=i.administrableUserGroupsSelector;return(0,n.pipe)((0,o.map)(e),(0,o.distinctUntilChanged)())},t.administrableUserGroup$=function(e){const t=(0,i.getAdministrableUserGroupSelector)(e);return(0,n.pipe)((0,o.map)(t),(0,o.distinctUntilChanged)())},t.adminProvisioningKey$=()=>(0,n.pipe)((0,o.map)(a.adminProvisioningKeySelector),(0,o.distinctUntilChanged)())},76154:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getRecoveryCodesAsTeamCaptain=void 0;const n=r(46298),o=r(74528),i=r(16593),a=r(66535),s=e=>{switch(e.code){case o.GetRecoveryCodesAsTeamCaptainNotAdminErrorCode:return a.GetRecoveryCodesAsTeamCaptainErrorCode.NotAdmin;case o.GetRecoveryCodesAsTeamCaptainInternalErrorCode:return a.GetRecoveryCodesAsTeamCaptainErrorCode.InternalError;default:return a.GetRecoveryCodesAsTeamCaptainErrorCode.UnknownError}};t.getRecoveryCodesAsTeamCaptain=async function(e,t){const{storeService:r}=e,a=(0,i.userLoginSelector)(r.getState()),c=await(0,o.getRecoveryCodesAsTeamCaptain)(r,a,t);return(0,n.isApiError)(c)?{success:!1,error:{code:s(c)}}:{success:!0,data:{recoveryCodes:c.recoveryCodes}}}},66535:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GetRecoveryCodesAsTeamCaptainErrorCode=void 0,function(e){e.NotAdmin="not_billing_admin",e.InternalError="internal_error",e.UnknownError="UNKNOWN_ERROR"}(t.GetRecoveryCodesAsTeamCaptainErrorCode||(t.GetRecoveryCodesAsTeamCaptainErrorCode={}))},92310:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getAdministrableUserGroupSelector=t.isGroupNameAvailableSelector=t.administrableUserGroupSelector=t.administrableUserGroupsSelector=t.currentSpaceInfoSelector=t.currentTeamIdSelector=t.adminDataForTeamSelector=void 0;const n=r(32034);t.adminDataForTeamSelector=(e,t)=>{const r=(e=>e.userSession.teamAdminData)(e);return r.teams?r.teams[t]:void 0},t.currentTeamIdSelector=e=>{const t=e.userSession.spaceData.spaces.find((e=>"accepted"===e.details.status));if(t)return t.teamId},t.currentSpaceInfoSelector=e=>{const t=e.userSession.spaceData.spaces.find((e=>"accepted"===e.details.status));if(t)return t.info},t.administrableUserGroupsSelector=e=>{const r=(0,t.currentTeamIdSelector)(e);if(!r)return[];const n=(0,t.adminDataForTeamSelector)(e,r);return n&&n.userGroups||[]},t.administrableUserGroupSelector=(e,r)=>(0,t.administrableUserGroupsSelector)(e).find((e=>e.groupId===r)),t.isGroupNameAvailableSelector=(e,r)=>!(0,t.administrableUserGroupsSelector)(e).some((e=>e.name===r)),t.getAdministrableUserGroupSelector=e=>(0,n.createSelector)(t.administrableUserGroupsSelector,(t=>t.find((t=>t.groupId===e))))},3674:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makeTeamAdminController=void 0;const n=r(97124),o=r(34376),i=r(38045),a=r(43927),s=r(63623),c=r(44197),u=r(66833),d=r(1370);function l(e,t,r){return i.proposeMembers(t,(0,o.getCurrentUserInfo)(e),r)}function p(e,t){return(0,c.getUserGroup)(e.getTeamAdminData(),t)}t.makeTeamAdminController=(e,t)=>({getMembers:t=>function(e,t){return i.getMembers(e,(0,o.getCurrentUserInfo)(e).login,t)}(e,t),proposeMembers:r=>l(e,t,r),addTeamAdmin:r=>function(e,t,r){if(!e.isAuthenticated())return(0,s.emptySessionResponse)(r);const o=(0,n.makeSharingService)(e,t);return i.addTeamAdmin(o,r).catch((e=>({error:e})))}(e,t,r),removeTeamAdmin:r=>function(e,t,r){if(!e.isAuthenticated())return(0,s.emptySessionResponse)(r);const o=(0,n.makeSharingService)(e,t);return i.removeTeamAdmin(o,r).catch((e=>({error:e})))}(e,t,r),createUserGroupAction:(r,i)=>function(e,t,r,i){if(!e.isAuthenticated())return(0,s.emptySessionResponse)(i);const c=(0,n.makeSharingService)(e,r),u=(0,o.getCurrentUserInfo)(e),l=e.getTeamAdminData();return(0,s.createUserGroup)(c,u,l,i).then((r=>{if(Array.isArray(r.itemGroups)&&r.itemGroups.length>0){const t=r.itemGroups[0],n=String(t.teamId),o=(0,d.specialItemGroupUpdated)(n,t);e.dispatch(o)}const n=i.teamId,o=e.getTeamAdminData().teams[n]&&e.getTeamAdminData().teams[n].userGroups||[];return(0,a.updateAdministrableUserGroupList)(e,n.toString(),o.concat(r.userGroups)),r.userGroupAdminItem&&((0,a.createUserGroupAdminItemInState)(e,n.toString(),r.userGroupAdminItem),t.getInstance().user.persistTeamAdminData().then((()=>r))),r})).then((e=>({userGroups:e.userGroups,error:e.error})))}(e,r,t,i),deleteUserGroupAction:r=>function(e,t,r){if(!e.isAuthenticated())return(0,s.emptySessionResponse)(r);const i=(0,n.makeSharingService)(e,t),c=(0,o.getCurrentUserInfo)(e),u=p(e,r.groupId);return(0,s.deleteUserGroup)(i,c,e.getTeamAdminData(),r).then((({userGroups:t,itemGroups:r})=>{const n=r[0],o=String(n.teamId),i=(0,d.specialItemGroupUpdated)(o,n);return e.dispatch(i),(0,a.deleteAdministrableUserGroups)(e,String(u.teamId),t),{userGroups:t}}))}(e,t,r),renameUserGroupAction:r=>function(e,t,r){if(!e.isAuthenticated())return(0,s.emptySessionResponse)(r);const i=(0,n.makeSharingService)(e,t),c=(0,o.getCurrentUserInfo)(e);return(0,s.renameUserGroup)(i,c,r).then((({userGroups:t})=>{if(t&&1===t.length){const n=String(t[0].teamId),o=(e.getTeamAdminData().teams[n]&&e.getTeamAdminData().teams[n].userGroups||[]).map((e=>e.groupId===r.groupId&&t[0]||e));(0,a.updateAdministrableUserGroupList)(e,n,o)}return{userGroups:t}}))}(e,t,r),inviteUserGroupMembersAction:r=>function(e,t,r){if(!e.isAuthenticated())return(0,s.emptySessionResponse)(r);const i=(0,n.makeSharingService)(e,t),c=(0,o.getCurrentUserInfo)(e),u=e.getTeamAdminData(),d=p(e,r.groupId),m={};r.users.forEach((e=>m[e.alias]=e));const g={proposedMemberLogins:Object.keys(m),teamId:r.teamId,origin:"teamInviteUserGroupUsers",notificationOptions:{skipAccountCreationRequiredAlerts:!0}};return l(e,t,g).then((t=>{const n=Object.keys(t.proposedMembers).map((e=>m[e]));t.accountCreationRequiredMembers.forEach((e=>n.push(m[e])));const o={};if(Object.keys(t.refusedMembers).forEach((e=>{const r=t.refusedMembers[e];"already_member"!==r?o[e]=r:n.push(m[e])})),0===n.length)return{userGroups:[d],refusedMembers:o};const l={...r,users:n};return(0,s.inviteUserGroupMembers)(i,c,u,l,d).then((t=>{if(t.error)return t;const n=String(t.userGroups[0].teamId),i=(e.getTeamAdminData().teams[n]&&e.getTeamAdminData().teams[n].userGroups||[]).map((e=>e.groupId===r.groupId&&t.userGroups&&t.userGroups[0]||e));return(0,a.updateAdministrableUserGroupList)(e,String(d.teamId),i),{...t,refusedMembers:o}}))})).catch((e=>{if(400===e?.additionalInfo?.code)return Promise.resolve({refusedMembers:{},userGroups:[],error:{message:e.additionalInfo?.webServiceSubMessage||"unknown error"}});throw e}))}(e,t,r),revokeUserGroupMembersAction:r=>function(e,t,r){if(!e.isAuthenticated())return(0,s.emptySessionResponse)(r);const i=(0,n.makeSharingService)(e,t),c=(0,o.getCurrentUserInfo)(e);return(0,s.revokeUserGroupMembers)(i,c,r).then((t=>{if(t&&t.userGroups&&1===t.userGroups.length){const n=t.userGroups[0],o=(e.getTeamAdminData().teams[n.teamId]&&e.getTeamAdminData().teams[n.teamId].userGroups||[]).map((e=>e.groupId===r.groupId&&t.userGroups&&t.userGroups[0]||e));(0,a.updateAdministrableUserGroupList)(e,String(n.teamId),o)}return t}))}(e,t,r),updateUserGroupMembersAction:r=>function(e,t,r){if(!e.isAuthenticated())return(0,s.emptySessionResponse)(r);const i=(0,n.makeSharingService)(e,t),a=(0,o.getCurrentUserInfo)(e);return(0,s.updateUserGroupMembers)(i,a,r)}(e,t,r),teamUpdateHandler:t=>function(e,t){return Promise.resolve().then((()=>{if(!e.isAuthenticated())return[new Error("no session set")];if(["adminPromoted","adminDemoted"].includes(t.action)&&(()=>{const r=e.getSpaceData().spaces.map((e=>{if(e.details.teamId!==t.teamId.toString())return e;const r=function(e,t){const{teamAdmins:r}=e.details;switch(t.action){case"adminPromoted":return r.concat(t.users.map((e=>({login:e}))));case"adminDemoted":return r.filter((e=>!t.users.includes(e.login)));default:return r}}(e,t);return Object.assign({},e,{details:Object.assign({},e.details,{teamAdmins:r})})}));(0,u.updateSpaceData)(e,r)})(),"memberRevoked"===t.action){const r=e.getTeamAdminData().teams[t.teamId],n=(r.userGroups||[]).map((e=>Object.assign({},e,{users:e.users.filter((e=>!t.users.includes(e.alias)))})));(0,a.updateAdministrableUserGroupList)(e,r.teamId,n)}return null}))}(e,t),confirmFreeTrial:e=>function(e,t){return e.teamPlans.confirmFreeTrial({token:t})}(t,e),getPremiumStatus:e=>function(e,t){return e.premium.status(t)}(t,e),getTeamTokens:()=>function(e,t){const r=e.getUserLogin();return t.qa.tokens({login:r})}(e,t),registerFreeTrial:e=>function(e,t){return e.teamPlans.registerFreeTrial(t)}(t,e),acceptTeamInvite:e=>function(e,t){const{token:r}=t;return e.teamPlans.acceptTeam({token:r})}(t,e)})},64688:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0;const n=r(68541);t.bootstrap=e=>{e.register(n.config)}},53050:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createOrUpdateSpecialItem=void 0;const n=r(78320),o=r(34376),i=r(62618),a=r(44197),s=r(92310),c=r(74042),u=r(14432);t.createOrUpdateSpecialItem=async(e,t,r)=>{const{storeService:d,localStorageService:l}=e;(0,i.requireAdmin)(d);const p=(0,s.currentTeamIdSelector)(d.getState()),m=(0,s.adminDataForTeamSelector)(d.getState(),p),g=(0,o.getCurrentUserInfo)(d),{crypto:f,item:S,ws:h}=t,{specialItemGroup:y}=m;if(!y)throw new Error("Cannot find specialItemGroup in adminData");const v=await(0,a.getSpecialItemGroupKey)(f,g,m),E=(0,n.generateItemUuid)(),A=await f.symmetricEncryption.generateNewAESKey(),_=await f.symmetricEncryption.encryptAES256(v,btoa(A)),T=await f.symmetricEncryption.encryptAES256(A,btoa(JSON.stringify(r))),I=await S.makeItemUpload(E,_,T),b=await S.makeAddItemsEvent(y.groupId,y.revision,[I]),w=await S.addItems(h,g.login,g.uki,b),C=w?.items?.find((({itemId:e})=>e===E));if(!C)throw new Error("unable to persist item");return await(0,c.updateAdminDataAfterItemAddedOrUpdated)(d,l,t.ws,g,p,w),await(0,u.updateSharingDataAfterItemAddedOrUpdated)(e.storeService,e.localStorageService,C,w.itemGroups[0]),r}},51168:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=t.setupSubscriptions=void 0;var n=r(77208);Object.defineProperty(t,"setupSubscriptions",{enumerable:!0,get:function(){return n.setupSubscriptions}});var o=r(64688);Object.defineProperty(t,"bootstrap",{enumerable:!0,get:function(){return o.bootstrap}})},94150:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.removeTeamAdminItem=void 0;const n=r(97124),o=r(34376),i=r(31676),a=r(92310);t.removeTeamAdminItem=async({storeService:e,localStorageService:t,wsService:r},s)=>{const c=(0,n.makeSharingService)(e,r),u=(0,o.getCurrentUserInfo)(e),d=(0,a.currentTeamIdSelector)(e.getState()),l=(0,a.adminDataForTeamSelector)(e.getState(),d),{specialItemGroup:p}=l,{item:m,ws:g}=c;if(!p)throw new Error("Cannot find specialItemGroup in adminData");const{revision:f,groupId:S}=p,h=l[s];if(!h)return{success:!0};const{itemId:y}=h,v=await m.makeRemoveItemsEvent(S,f,[y]),E=await m.removeItems(g,u.login,u.uki,v);return await(0,i.updateDataAfterSpecialItemRemoved)(e,t,c.ws,u,E,v),{success:!0}}},77208:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setupSubscriptions=void 0;const n=r(97124),o=r(7344),i=r(58415);t.setupSubscriptions=async function(e,t){const{sessionService:r,storeService:a,localStorageService:s,wsService:c}=t,u=(0,n.makeSharingService)(a,c),d=(0,i.makeDirectorySyncController)({sessionService:r,sharingService:u,storeService:a,localStorageService:s,wsService:c});e.syncSuccess.on((()=>{const e=a.getSpaceData();(0,o.isDirectorySyncActivated)(e)&&d.directorySyncForAllTeams()}))}},31676:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.updateDataAfterSpecialItemRemoved=void 0;const n=r(1370),o=r(34433),i=r(43927),a=r(92310);t.updateDataAfterSpecialItemRemoved=async(e,t,r,s,c,u)=>{if(1!==u.items.length)throw new Error("Currently only supporting single item removal.");const d=(0,a.currentTeamIdSelector)(e.getState()),l=e.getTeamAdminData().teams[d],p=t.getInstance(),m=await(async(e,t,r)=>{const{items:n,...o}=await e.getSharingData(),i=n.filter((({itemId:e})=>e!==r.items[0])),a=o.itemGroups.filter((({groupId:e})=>e!==r.groupId)),s=t.itemGroups.find((({groupId:e})=>e===r.groupId)),c=a.concat(s);return{...o,itemGroups:c,items:i}})(p,c,u),g={teams:{[d]:await(0,i.syncAdminData)(r,s,l,m)}},f=(0,n.teamAdminDataUpdated)(g),S=e.dispatch(f),h=t.getInstance();await h.storeTeamAdminData(S.teamAdminData),e.dispatch((0,o.sharingDataUpdated)(m)),await p.storeSharingData(m)}},74042:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.updateAdminDataAfterItemAddedOrUpdated=void 0;const n=r(1370),o=r(43927),i=(e,t,r)=>t?e.filter((({[r]:e})=>e!==t[r])).concat([t]):e;t.updateAdminDataAfterItemAddedOrUpdated=async(e,t,r,a,s,{itemGroups:c,items:u})=>{const d=e.getSharingData(),{items:l,itemGroups:p,userGroups:m,...g}=d,f=e.getTeamAdminData().teams[s],[S]=c??[],[h]=u??[],{specialUserGroup:y}=f,v={...g,items:i(l,h,"itemId"),itemGroups:i(p,S,"groupId"),userGroups:i(m,y,"groupId")},E=await(0,o.syncAdminData)(r,a,f,v),A={teams:{[s]:E}},_=(0,n.teamAdminDataUpdated)(A),T=e.dispatch(_),I=t.getInstance();return await I.storeTeamAdminData(T.teamAdminData),E}},14432:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.updateSharingDataAfterItemAddedOrUpdated=void 0;const n=r(34433);t.updateSharingDataAfterItemAddedOrUpdated=async(e,t,r,o)=>{const i=t.getInstance(),{items:a,itemGroups:s,...c}=await i.getSharingData(),u=a.filter((({itemId:e})=>e!==r.itemId)).concat([r]),d={...c,itemGroups:o?s.filter((({groupId:e})=>e!==o.groupId)).concat([o]):s,items:u};e.dispatch((0,n.sharingDataUpdated)(d)),await i.storeSharingData(d)}},77627:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makeSessionService=void 0;const n=r(95551),o=r(97321),i=r(34186),a=r(27754),s=r(6623);t.makeSessionService=e=>{let t=null,r=null,c=null;return{isSessionStarted:()=>{const{storeService:t}=e,r=t.getState();return!!(0,a.sessionStartTimeSelector)(r)},setInstance:(a,s)=>{t=(0,n.makeUserSessionService)(e,a,s),r=(0,o.makeUserDeviceService)(e.storeService,e.wsService),c=(0,i.makeUserPaymentService)(e.storeService,e.wsService)},close:()=>(t?t.closeSession():Promise.resolve()).then((()=>{t=null,r=null,c=null})),lock:()=>(t?t.lockSession():Promise.resolve()).then((()=>{t=null,r=null,c=null})),tryRestoreInstance:()=>{const{storeService:u}=e,d=u.getState();(0,a.sessionIdSelector)(d)?(t=(0,n.makeResumedUserSessionService)(e),r=(0,o.makeUserDeviceService)(e.storeService,e.wsService),c=(0,i.makeUserPaymentService)(e.storeService,e.wsService)):(0,s.setupEncryptorServices)(e)},getInstance:()=>{if(!t)throw new Error("makeSessionService: You must call setInstance(login: string, password: string) before getting the instance");return{user:t,device:r,payment:c}}}}},97321:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makeUserDeviceService=void 0;const n=r(76089),o=r(58639),i=r(70252),a=r(90622);t.makeUserDeviceService=(e,t)=>({fetchDevicesList:()=>s(e,t),fetchTemporaryToken:()=>c(e,t),deactivateDevice:r=>u(e,t,r),changeDeviceName:(r,n)=>d(e,t,r,n)});const s=async(e,t)=>{const r=e.getAccountInfo().login,o=(0,a.ukiSelector)(e.getState()),i=(0,a.deviceKeysSelector)(e.getState()),s=(await t.devices.list({login:r,uki:o})).map((e=>({...e,isCurrentDevice:i&&e.deviceId===i.accessKey}))),c=s.find((e=>e.isCurrentDevice));return c&&e.getStore().dispatch((0,n.registerDeviceName)(c.deviceName)),s},c=(e,t)=>{const r=e.getAccountInfo().login,n=(0,a.ukiSelector)(e.getState());return t.authentication.getTemporaryToken({login:r,uki:n})},u=(e,t,r)=>{const n=e.getAccountInfo().login,c=(0,a.ukiSelector)(e.getState());return t.devices.deactivate({login:n,uki:c,deviceId:r}).then((n=>s(e,t).then((e=>{const t={devicesList:e,deviceId:r,success:"success"===n.status,reason:"success"!==n.status?`Deactivate Device Error - ${n.content}`:null};o.deactivateDeviceResult(t),t.success||(0,i.sendExceptionLog)({message:t.reason})}))))},d=(e,t,r,n)=>{const c=e.getAccountInfo().login,u=(0,a.ukiSelector)(e.getState());return t.devices.changeName({login:c,uki:u,deviceId:r,updatedDeviceName:n}).then((a=>s(e,t).then((e=>{const t={devicesList:e,deviceId:r,success:"success"===a.status,updatedName:n,reason:"success"!==a.status?`Change Device Name Error - ${a.content}`:null};o.changeDeviceNameResult(t),t.success||(0,i.sendExceptionLog)({message:t.reason})}))))}},34186:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makeUserPaymentService=void 0;const n=r(90622),o=r(36273),i=r(46298);t.makeUserPaymentService=(e,t)=>({fetchInvoices:()=>a(e),updatePaymentCard:(r,n)=>s(e,t,r,n),cancelPremiumSubscription:()=>c(e,t)});const a=async e=>{const t=e.getAccountInfo().login,r=await(0,o.listInvoices)(e,t);return(0,i.isApiError)(r)?[]:r.invoices},s=(e,t,r,o)=>{const i=e.getAccountInfo().login,a=(0,n.ukiSelector)(e.getState());return t.premium.updateCardToken({login:i,uki:a,tokenId:r,stripeAccount:o}).then((e=>({success:e.success&&!e.error,reason:e.error?e.error.message:null})))},c=(e,t)=>{const r=e.getAccountInfo().login,o=(0,n.ukiSelector)(e.getState());return t.premium.setAutoRenewal({login:r,uki:o,enabled:!1}).then((()=>{}))}},95551:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.generateRsaKeys=t.treatKeysResult=t.isSyncInProgress=t.storeSync=t.hasTreatProblems=t.makeResumedUserSessionService=t.makeUserSessionService=t.ON_USER_SESSION_CLOSED=void 0;const n=r(92233),o=r(53576),i=r(56668),a=r(58639),s=r(25576),c=r(48313),u=r(35924),d=r(95623),l=r(45291),p=r(27517),m=r(34433),g=r(37898),f=r(25963),S=r(82262),h=r(76089),y=r(78118),v=r(85784),E=r(36513),A=r(25576),_=r(70252),T=r(90503),I=r(16356),b=r(28445),w=r(1370),C=r(44197),D=r(33007),O=r(58217),P=r(59489),N=r(58582),R=r(41007),M=r(17936),L=r(60946),U=r(75226),k=r(56915),F=r(5689),B=r(6231),G=r(39408),x=r(43416),$=r(62627),j=r(16593),K=r(34287),V=r(8481),H=r(76901),W=r(12362),z=r(86691),q=r(40051),Y=r(72881),Z=r(95303),Q=r(44999),X=r(16661),J=r(14651),ee=r(46298),te=r(61740),re=r(10824),ne=r(35507),oe=r(64910),ie=r(16478),ae=r(71291),se=r(6623),ce=r(84827),ue=r(98260),de=r(57903),le=r(92263),pe=r(75199);t.ON_USER_SESSION_CLOSED="OnUserSessionClosed";const me=(e,t,r=!1)=>{e.localStorageService.setInstance(t),r&&e.storeService.dispatch((0,c.openSession)(t));const n=(0,oe.getNoDerivationCryptoConfig)();e.teamDeviceEncryptedConfigEncryptorService.setInstance({raw:e.storeService.getUserSession().masterPassword},e.storeService.getUserSession().serverKey,n),(0,se.setupEncryptorServices)(e),e.localStorageService.setInstance(t);const o=e.cryptoService||(0,E.makeCryptoService)(),i=new H.LocalStorageEventStore(e.localStorageService);(0,W.setInstance)(i),(0,z.setInstance)(i),(0,Q.setInstance)(e.storeService,e.localStorageService,e.wsService);let a=null;const s=()=>{clearInterval(a)};return(()=>{let t=e.storeService.getUserSession();e.storeService.getStore().subscribe((()=>{const r=e.storeService.getUserSession();r!==t&&(t.masterPassword===r.masterPassword&&t.serverKey===r.serverKey||""===r.masterPassword||(d.Debugger.log("Master Password || Server Key updated"),r.masterPassword||r.serverKey?e.masterPasswordEncryptorService.setInstance({raw:r.masterPassword},r.serverKey):e.masterPasswordEncryptorService.close(),t=r))}))})(),{loadSessionData:()=>be(e.localStorageService,e.storeService),loadNonResumableSessionData:()=>we(e.localStorageService,e.storeService),accountExistsLocally:()=>async function(e){const t=await(0,U.getLocalAccounts)(e.storeService,e.storageService),r=e.storeService.getUserLogin(),n=e.localStorageService.getInstance(),o=t.some((({login:e})=>r===e));if(o){const e=await n.doesPersonalDataExist();return Boolean(r&&o&&e)}const i=await n.doesLocalDataExist();return Boolean(r&&i)}(e),refreshSessionData:()=>async function(e,t){const{localStorageService:r,storeService:n,wsService:o}=e,i=(0,re.requestPairing)(n,t),a=(0,V.refreshUserABTest)(n,r.getInstance(),t),s=(0,k.ukiSelector)(n.getState()),c=(0,ne.refreshPremiumStatus)(n,o,t,s),u=(0,pe.refreshCredentialsDedupView)(n,t);await Promise.all([c,i,a,u])}(e,t),getSyncArgs:()=>_e(e.storeService,e.masterPasswordEncryptorService,e.wsService),sync:t=>Oe(e,o,s,t),attemptSync:t=>he(e,o,s,t),requestNewSync:t=>Ae(e,o,s,t),startPeriodic2FAInfoRefresh:()=>(()=>{if(null!==a)return;const{storeService:t,wsService:r}=e;a=setInterval((()=>{(0,ae.refreshTwoFactorAuthenticationInfoService)(t,r)}),ie.ENFORCE_2FA_POLICY_REFRESH_TIMER_INTERVAL)})(),stopPeriodic2FAInfoRefresh:()=>s(),fetchContactInfo:()=>ke(e.storeService,e.wsService),fetchSubscriptionCode:()=>function(e,t){const r=e.getAccountInfo().login,n=(0,k.ukiSelector)(e.getState()),o=e.getSubscriptionCode();return o?Promise.resolve(o):t.premium.getSubscriptionCode({login:r,uki:n}).then((t=>{const r=t&&t.content&&t.content.subscriptionCode;return e.dispatch((0,P.saveSubscriptionCode)(r)),r}))}(e.storeService,e.wsService),persistLocalSettings:()=>Ne(e.localStorageService,e.storeService),persistPersonalData:()=>Re(e.localStorageService,e.storeService),persistPersonalSettings:()=>Me(e.localStorageService,e.storeService),persistAllData:()=>Ue(e.localStorageService,e.storeService),persistTeamAdminData:()=>Le(e.localStorageService,e.storeService),persistLocalKey:t=>e.localStorageService.getInstance().storeLocalKey(t),closeSession:()=>fe(e,s),lockSession:()=>Se(e),fetchAccountInfo:()=>function(e,t){const r=e.getUserSession(),n=r.analyticsIds,o=r.publicUserId;return n.userAnalyticsId&&n.deviceAnalyticsId&&o?Promise.resolve({userAnalyticsId:n.userAnalyticsId,deviceAnalyticsId:n.deviceAnalyticsId,publicUserId:o}):(0,J.accountInfo)(e,t).then((t=>{if((0,ee.isApiError)(t)||"success"!==t.code)throw new Error("Unable to fetch updated account info");return e.dispatch((0,I.updateAnalyticsIds)(t.userAnalyticsId,t.deviceAnalyticsId)),e.dispatch((0,I.updatePublicUserId)(t.publicUserId)),{userAnalyticsId:t.userAnalyticsId,deviceAnalyticsId:t.deviceAnalyticsId,publicUserId:t.publicUserId}}))}(e.storeService,e.storeService.getUserLogin())}};t.makeUserSessionService=(e,t,r)=>{if(!t)throw new Error(s.AuthenticationCode[s.AuthenticationCode.EMPTY_LOGIN]);const n=t.toLowerCase();if(!(0,b.isValidLogin)(n))throw new Error(s.AuthenticationCode[s.AuthenticationCode.INVALID_LOGIN]);if(!r&&""===r)throw new Error(s.AuthenticationCode[s.AuthenticationCode.EMPTY_MASTER_PASSWORD]);return e.storeService.dispatch((0,I.updateMasterPassword)(r)),e.storeService.dispatch((0,I.updateServerKey)("")),me(e,n,!0)},t.makeResumedUserSessionService=e=>{const t=((0,j.userLoginSelector)(e.storeService.getState())??"").toLowerCase();if(!(0,b.isValidLogin)(t))throw new Error(a.SessionResumingCode[a.SessionResumingCode.INVALID_LOGIN_IN_STORE]);return me(e,t)};const ge=async(e,t)=>{const{storageService:r,storeService:n,eventBusService:o}=e;n.isAuthenticated()&&(t&&await(0,te.cleanRememberMeStorageData)(n,r),o.sessionClosed({login:null})),(0,Z.clearInstance)(),(0,z.clearInstance)(),(0,W.clearInstance)(),(0,Q.clearInstance)();const{anonymousPartnerId:i,dashlaneServerDeltaTimestamp:a,appKeys:s,styxKeys:d}=n.getSdkAuthentication();n.dispatch((0,u.resetLoginStepInfo)()),n.dispatch((0,I.updateSessionDidOpen)(!1)),n.dispatch((0,c.closeSession)()),n.dispatch((0,D.loadSdkAuthentication)({anonymousPartnerId:i,dashlaneServerDeltaTimestamp:a,appKeys:s,styxKeys:d}))},fe=async(e,t)=>{const{storeService:r}=e;r.isAuthenticated()&&(await(0,de.waitUntilSyncComplete)(e.storeService),t()),await ge(e,!0)},Se=async e=>{const{storeService:t}=e;if(!t.isAuthenticated()){const e=le.CarbonError.fromAnyError(new Error("No user session to lock")).addContextInfo("LOCK USER SESSION","UserSessionService");throw(0,_.sendExceptionLog)({error:e}),e}await ge(e,!1)},he=async(e,t,r,n)=>{try{return await Oe(e,t,r,n)}catch(e){const t=new Error(`Sync failed: ${e}`);(0,_.sendExceptionLog)({error:t,code:T.ExceptionCriticality.WARNING})}};let ye=!1,ve=()=>{},Ee=Promise.resolve();const Ae=async(e,t,r,n)=>{if(!ye)return ye=!0,await Ee,ye=!1,he(e,t,r,n)},_e=(e,t,r,o,i)=>{const a=e.getLocalSettings(),s=e.getAccountInfo().login,c=i===n.Trigger.InitialLogin?0:a.lastSync,u=i===n.Trigger.InitialLogin?g.SyncType.FIRST_SYNC:g.SyncType.LIGHT_SYNC;return{dataEncryptorService:t,storeService:e,login:s,uki:(0,k.ukiSelector)(e.getState()),lastSyncTimestamp:c,syncType:u,personalData:e.getPersonalData(),needsKeys:!e.getUserSession().keyPair,ws:r,announce:o||(e=>{})}},Te=(e,t,r)=>{const n=_e(e,t,r);return Object.assign(n,{lastSyncTimestamp:f.MAX_SYNC_TIMESTAMP})},Ie=e=>t=>(0,_.sendExceptionLog)({message:`[Crypto] unable to ${e}. ErrorMessage: ${t}`}),be=async(e,t)=>{const r=e.getInstance().getPersonalData().then((e=>(d.Debugger.log("Personal data has been deciphered successfully"),e))).catch((e=>({error:!0,logError:()=>Ie("loadPersonalData")(e)}))),n=e.getInstance().getLocalSettings().then((e=>(d.Debugger.log("Local settings have been deciphered successfully"),e))).catch((e=>({error:!0,logError:()=>Ie("loadLocalSettings")(e)}))),o=e.getInstance().getPersonalSettings().then((e=>(d.Debugger.log("Personal settings have been deciphered successfully"),e))).catch((e=>({error:!0,logError:()=>Ie("loadPersonalSettings")(e)}))),i=e.getInstance().doesNotificationStatusExist().then((r=>{r&&e.getInstance().getNotificationStatus().then((e=>(d.Debugger.log("Notifications status have been deciphered successfully"),t.dispatch((0,K.loadNotificationsStatus)(e)),e))).catch((e=>({error:!0,logError:()=>Ie("loadNotificationsStatus")(e)})))})),u=e.getInstance().getUserABTests().then((e=>(d.Debugger.log("User AB tests have been deciphered successfully"),e))).catch((e=>({error:!0,logError:()=>Ie("loadUserABTests")(e)}))),g=e.getInstance().getAnalyticsIds().then((e=>((0,d.logInfo)({message:"User Analytics IDs have been deciphered successfully"}),e))).catch((e=>({error:!0,logError:()=>Ie("loadAnalticsIds")(e)}))),f=(0,B.loadUserAuthenticationData)(e,t),S=[r,n,o];if(await e.getInstance().hasAuthenticationData()){const e=f.then((e=>(0,G.isLoadAuthenticationSuccess)(e)||e.message===G.FailedToRehydrateAuthenticationData?{error:!1}:{error:!0,logError:()=>Ie("loadAuthenticationData")(e.error)}));S.push(e)}const h=await Promise.all(S),y=h.every((e=>!!e&&e.error)),v=h.some((e=>!!e&&e.error));if(y)throw new Error(s.AuthenticationCode[s.AuthenticationCode.WRONG_PASSWORD]);if(v)throw h.forEach((e=>!!e&&e.logError instanceof Function&&e.logError())),new Error(s.AuthenticationCode[s.AuthenticationCode.DATA_TAMPERED_ERROR]);try{t.dispatch((0,l.loadStoredPersonalData)(await r));const e=await n;if(e){const r=(0,c.localSettingsUpdated)(e);t.dispatch(r),a.sendWebOnboardingModeUpdate(e.webOnboardingMode)}t.dispatch((0,p.loadStoredPersonalSettings)(await o)),t.dispatch((0,x.loadedStoredUserABTests)(await u)),t.dispatch((0,I.loadAnalyticsIds)(await g)),await f.then((e=>{if(!(0,G.isLoadAuthenticationSuccess)(e))throw e.error}))}catch(e){const t=`An error occurred when trying to write personalData, localSettings or personalSettings in Redux store ${e} `;throw d.Debugger.error(t),new Error(t)}const E=e.getInstance().getSharingData().then((e=>{d.Debugger.log(`sharingData loaded for ${t.getAccountInfo().login}`),t.dispatch((0,m.sharingDataUpdated)(e))})).catch(Ie("loadSharingDataPromise")),A=e.getInstance().getSharingSync().then((e=>{d.Debugger.log(`sharingSync loaded for ${t.getAccountInfo().login}`),t.dispatch((0,ce.setAllPendingAction)(e.pendingItemGroups,e.pendingUserGroups))})).catch(Ie("loadSharingSyncPromise")),_=e.getInstance().getTeamAdminData().then((e=>{d.Debugger.log(`teamAdminData loaded for ${t.getAccountInfo().login}`),t.dispatch((0,w.teamAdminDataUpdated)(e))})).catch(Ie("loadTeamAdminDataPromise")),T=e.getInstance().getIcons().then((e=>{if(null!==e){const r=(0,X.IconsCacheLoaded)(e);t.dispatch(r)}})).catch(Ie("loadIconsDataPromise")),b=e.getInstance().doesUserActivityExist().then((async r=>{if(r){const{lastSentAt:r}=await e.getInstance().getUserActivity();t.dispatch((0,q.userActivityLastSentAtUpdated)(r))}})).catch(Ie("loadUserActivity")),C=e.getInstance().doesVaultReportExist().then((async r=>{if(r){const{lastSentAt:r}=await e.getInstance().getVaultReport();t.dispatch((0,Y.vaultReportLastSentAtUpdated)(r))}})).catch(Ie("loadVaultReport"));return Promise.resolve().then((()=>{Promise.all([E,A,_,i,T,b,C])}))},we=async(e,t)=>{const r=e=>t=>{const r=`[Session] unable to ${e}. ErrorMessage: ${t}`;return d.Debugger.error(r),(0,_.sendExceptionLog)({message:r})},n=async(e,r)=>{await r;const n=(0,j.userLoginSelector)(t.getState());d.Debugger.log(`${e} loaded for ${n}`)},o=e.getInstance().getPersonalData().then((e=>{t.dispatch((0,l.loadStoredPersonalData)(e))})).catch(r("loadPersonalData")),i=e.getInstance().getSharingData().then((e=>{t.dispatch((0,m.sharingDataUpdated)(e))})).catch(r("loadSharingDataPromise")),a=e.getInstance().getSharingSync().then((e=>{t.dispatch((0,ce.setAllPendingAction)(e.pendingItemGroups,e.pendingUserGroups))})).catch(r("loadSharingSyncPromise")),s=e.getInstance().getTeamAdminData().then((e=>{t.dispatch((0,w.teamAdminDataUpdated)(e))})).catch(r("loadTeamAdminDataPromise")),c=e.getInstance().getIcons().then((e=>{if(null!==e){const r=(0,X.IconsCacheLoaded)(e);t.dispatch(r)}})).catch(r("loadIconsDataPromise"));try{await Promise.all([n("personalData",o),n("sharingData",i),n("sharingData",a),n("teamAdminData",s),n("iconsCacheData",c)])}catch(e){const t="Failed to load non resumable user session data",r=new Error(t);(0,d.logError)({message:t,tag:["resume"],details:{error:JSON.stringify(e)}}),(0,_.sendExceptionLog)({error:r})}};t.hasTreatProblems=(e,t,r)=>{if(!e.summary)return{transactionsToDownload:[],transactionsToUpload:[]};const n=t.getPersonalData(),{missingLocally:o,missingRemotely:i}=(0,O.getMissingIdentifiers)(r,n,e.summary);return{transactionsToUpload:[...i],transactionsToDownload:[...o]}};const Ce=async e=>{const t=(0,W.getInstance)(),r=(0,z.getInstance)();let n=null;try{const{storeService:s,applicationModulesAccess:u}=e,d=await(0,f.sync)(e),p=d.clearTransactions||[];if(0!==p.length){n=r.lockTopic("iconsUpdates");const d=p.filter((e=>"AUTHENTIFIANT"===e.type)).map((e=>e.identifier)),l=(e=>e.filter((e=>"SECURITYBREACH"===e.type)).map((e=>e.identifier)))(p),m=0===(i=d).length?null:{type:"credentialUpdates",credentialIds:i};null!==m&&await t.add("iconsUpdates",m);const g=0===(o=l).length?null:{type:"breachUpdates",breachesIds:o};null!==g&&await t.add("iconsUpdates",g),(await Promise.all(p.map(c.applyTransaction))).forEach((e=>{s.dispatch(e)})),a.reportDataUpdate(s);try{if(u&&(d.length>0||l.length>0)){const{commands:e}=u.createClients().passwordHealth;e.recalculatePasswordHealth()}}catch(e){const t=`Password Health update - sync: ${e}`,r=new Error(t);(0,_.sendExceptionLog)({error:r,code:T.ExceptionCriticality.WARNING})}}return d.uploadedTransactions.length>0&&s.dispatch((0,l.updateLastBackupTime)(d.uploadedTransactions,Math.floor(d.lastSyncTimestamp/1e3))),e.lastSyncTimestamp<f.MAX_SYNC_TIMESTAMP&&s.dispatch((0,h.registerLastSync)(d.lastSyncTimestamp)),d}catch(e){throw e}finally{n&&r.releaseTopic("iconsUpdates",n)}var o,i};t.storeSync=async(e,r)=>{const n=await(async e=>{const{announce:t,personalData:r}=e;try{t(N.announcements.chronologicalSyncStarted(r));const n=await Ce(e);return t(N.announcements.chronologicalSyncFinished(n.summary,n.fullBackupFileSize)),n}catch(e){throw t(N.announcements.chronologicalSyncFailed(e)),e}})(r);return(async(e,r,n)=>{const{announce:o}=r;o(N.announcements.treatProblemStarted());const{transactionsToDownload:i,transactionsToUpload:a}=(0,t.hasTreatProblems)(n,e,o),s=i.length,c=a.length;if(o(N.announcements.treatProblemDiffComputed(s,c)),s<=0&&c<=0)return o(N.announcements.treatProblemFinished()),n;try{c>0&&e.dispatch((0,l.storeChangesToUpload)(a));const t=await Ce({..._e(e,r.dataEncryptorService,r.ws,o),transactionIds:i}),s={...t,clearTransactions:[...t.clearTransactions,...n.clearTransactions]};return o(N.announcements.treatProblemFinished()),s}catch(e){throw o(N.announcements.treatProblemFailed(e)),e}})(e,r,n)};const De=async({storeService:e,dataEncryptorService:r,localStorageService:n,wsService:o,eventLoggerService:i,applicationModulesAccess:a},s,c,u)=>{if(!c.sharing2||!(0,k.ukiSelector)(e.getState()))return c;const d=async t=>{const r=await(async({storeService:e,wsService:t,localStorageService:r,eventLoggerService:n,applicationModulesAccess:o},i,a,s)=>{try{i(N.announcements.sharingSyncStarted());const c=(e,t)=>i(N.announcements.sharingSyncInvalidSyncData(e,t)),u=await(0,y.syncSharing)({storeService:e,wsService:t,localStorageService:r,eventLoggerService:n,applicationModulesAccess:o},a,c,s);return i(N.announcements.sharingSyncFinished()),u}catch(e){throw i(N.announcements.sharingSyncFailed(e)),e}})({storeService:e,wsService:o,localStorageService:n,eventLoggerService:i,applicationModulesAccess:a},s,t,u),c=await(async(e,t,r,n)=>{try{r(N.announcements.teamAdminDataSyncStarted());const o=await(0,C.syncUserGroupManagement)(e,t,n);return r(N.announcements.teamAdminDataSyncFinished()),o}catch(e){throw r(N.announcements.teamAdminDataSyncFailed(e)),e}})(e,o,s,r);return c};if(await d(c.sharing2)===v.SyncUserGroupManagementStatus.NEEDS_FRESH_SHARING_DATA){const n=Te(e,r,o),{sharing2:i}=await(0,t.storeSync)(e,{...n,applicationModulesAccess:a,announce:s});await d(i)}return c};t.isSyncInProgress=e=>{const t=e.getState(),r=(0,j.syncIsInProgressSelector)(t),{startTime:n}=(0,j.syncSelector)(t);return!!r&&(Date.now()-(n||0)<6e5?(d.Debugger.log("[Sync] Already in progress, skipping trigger…"),!0):(e.dispatch((0,S.syncFailure)()),(0,_.sendExceptionLog)({message:'[Sync] "inProgress" for more than 10 minutes'}),!1))};const Oe=async(e,r,n,i)=>{const{applicationModulesAccess:c,eventBusService:u,localStorageService:l,masterPasswordEncryptorService:p,remoteDataEncryptorService:m,storeService:g,wsService:f,eventLoggerService:h}=e,y=g.getState();if(!g.isAuthenticated())throw new Error("Impossible to Sync - user not authenticated");if((0,t.isSyncInProgress)(g))return;Ee=new Promise((e=>ve=e));const v=(0,F.twoFactorAuthenticationInfoSelector)(y);if(v.status===o.TwoFactorAuthenticationInfoRequestStatus.READY){const{shouldEnforceTwoFactorAuthentication:e}=v;if(e)return}const E=new ue.SyncTaskTracker(c);await E.startTracking();const A=(0,j.isRemoteKeyActivatedSelector)(y)?m:p,T=(0,L.setupProbe)((0,R.makeEventLoggerSyncMonitor)(h).monitor,(0,M.makeDiagnosticReportMonitor)()),I={..._e(g,A,f,T,i),applicationModulesAccess:c},{syncType:b}=I;try{T(N.announcements.syncStarted(i,b)),a.triggerSessionSyncStatus({status:"syncing"}),g.dispatch((0,S.syncStarted)());const e=await(0,t.storeSync)(g,I);return await(0,t.treatKeysResult)(A,g,r,f,T,e),await De({storeService:g,dataEncryptorService:A,localStorageService:l,wsService:f,eventLoggerService:h,applicationModulesAccess:c},T,e,i),await A.getInstance().prepareCrypto(),T(N.announcements.saveStarted()),await Ue(l,g),T(N.announcements.saveFinished()),u.syncSuccess({}),g.dispatch((0,S.syncSuccess)(e.isUploadEnabled)),a.triggerSessionSyncStatus({status:"success"}),T(N.announcements.syncFinished()),ve(),e.clearTransactions}catch(t){if(g.dispatch((0,S.syncFailure)()),a.triggerSessionSyncStatus({status:"error"}),T(N.announcements.syncFailed(t)),u.syncFailure({}),ve(),t.message===s.AuthenticationCode[s.AuthenticationCode.INVALID_UKI]){const t="[Sync] Device UKI is invalid, closing the session",r=new Error(t);return(0,d.logError)({message:t,details:{error:r}}),(0,_.sendExceptionLog)({error:r}),void fe(e,n)}throw t}finally{E.terminateTracking()}};t.treatKeysResult=async(e,r,n,o,a,s)=>{try{const a=async t=>{if(d.Debugger.log("[Sync] Extract Keys from Sync…"),!t)return null;d.Debugger.log("[Sync] Decipher  private key BEGIN");const r=await e.getInstance().decrypt(t),n=(0,i.deflatedUtf8ToUtf16)(r,{skipInflate:!0});return d.Debugger.log("[Sync] Decipher  private key SUCCESS"),n};if(s.keys&&s.keys.privateKey)try{const e=await a(s.keys.privateKey);r.dispatch((0,I.updateKeyPair)({privateKey:e,publicKey:s.keys.publicKey}))}catch(e){}if(!r.getUserSession().keyPair){const i=await(0,t.generateRsaKeys)(e,n),a=Te(r,e,o);a.needsKeys=!0,a.syncType=g.SyncType.FULL_SYNC,a.pushKeysToServer={private:i.encryptedPrivateKey,public:i.keys.publicKey},d.Debugger.log("SYNC RSA Keys - BEGIN"),await Ce(a),d.Debugger.log("SYNC RSA Keys - END"),r.dispatch((0,I.updateKeyPair)({privateKey:i.keys.privateKey,publicKey:i.keys.publicKey}))}}catch(e){throw a(N.announcements.treatSharingKeysFailed(e)),e}},t.generateRsaKeys=async(e,t,r={})=>{try{const n=await t.asymmetricEncryption.generateRsaKeyPair();d.Debugger.log("Generating RSA Keys");const o=(0,i.utf16ToDeflatedUtf8)(n.privateKey,{skipDeflate:!0}),a=await e.getInstance().encrypt(o,r);return d.Debugger.log("Encrypt RSA Keys"),{keys:{publicKey:n.publicKey,privateKey:n.privateKey},encryptedPrivateKey:a}}catch(e){throw d.Debugger.log("Error while Generating RSA KEY: "+e),e}};const Pe=e=>e.persistData===A.PersistData.PERSIST_DATA_NO,Ne=(e,t)=>{const r=t.getLocalSettings(),n=t.getAccountInfo();return Pe(n)||!n.isAuthenticated?Promise.resolve():e.getInstance().storeLocalSettings(r)},Re=async(e,t)=>{const r=t.getPersonalData(),n=t.getAccountInfo();return Pe(n)||!n.isAuthenticated?Promise.resolve():e.getInstance().storePersonalData(r)},Me=async(e,t)=>{const r=t.getPersonalSettings(),n=t.getAccountInfo();return Pe(n)||!n.isAuthenticated?Promise.resolve():e.getInstance().storePersonalSettings(r)},Le=(e,t)=>{const r=t.getTeamAdminData(),n=t.getAccountInfo();return Pe(n)||!n.isAuthenticated?Promise.resolve():e.getInstance().storeTeamAdminData(r).then((()=>{}))},Ue=async(e,t)=>{const r=(0,$.userABTestsSelector)(t.getState()),n=t.getLocalSettings(),o=t.getPersonalSettings(),i=t.getSharingData(),a=(0,j.sharingSyncSelector)(t.getState()),s=t.getAccountInfo(),c=t.getNotificationStatus(),u=t.getTeamAdminData(),d=t.getState(),l=(0,k.sessionKeysSelector)(d),p=(0,j.analyticsIdsSelector)(d);if(Pe(s)||!s.isAuthenticated)return Promise.resolve();isNaN(n.lastSync)&&(0,_.sendExceptionLog)({message:"Persisting localSettings with a NaN lastSyncTimestamp",code:T.ExceptionCriticality.WARNING});const m=u?.teams??{},g=Object.keys(m).reduce(((e,t)=>{const r=u.teams[t],n=r.specialItemGroup?(r.specialItemGroup.items||[]).map((e=>e.itemId)):[];return e.concat(n)}),[]),f={...i,items:i.items.map((e=>!e.content||g.includes(e.itemId)?e:{...e,content:""}))};await Promise.all([Re(e,t),Ne(e,t),e.getInstance().storePersonalSettings(o),e.getInstance().storeSharingData(f),e.getInstance().storeSharingSync(a),e.getInstance().storeNotificationsStatus(c),l?e.getInstance().storeAuthenticationKeys(l):Promise.resolve(),e.getInstance().storeTeamAdminData(u),(0,B.persistUserAuthenticationData)(e,t),e.getInstance().storeUserABTests(r),e.getInstance().storeAnalyticsIds(p)])},ke=(e,t)=>{const r=e.getAccountInfo().login,n=(0,k.ukiSelector)(e.getState());return t.contactInfo.getContactInfo({login:r,uki:n}).then((e=>{const{result:t,...r}=e;return r}))}},6623:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setupEncryptorServices=void 0;const n=r(16593),o=r(38981),i=(0,r(64910).getNoDerivationCryptoConfig)();t.setupEncryptorServices=function(e){const{storeService:t}=e,r=t.getState(),a=(0,n.sessionEncryptorKeysSelector)(r);!function(e,t,r){const{masterPassword:n,serverKey:o}=t;if(!n)return;const[a,s,c]=r?[n,"",i]:[n,o,void 0];e.masterPasswordEncryptorService.setInstance({raw:a},s,c)}(e,a,(0,o.isSSOUserSelector)(r)),function(e,t){const{masterPassword:r,remoteKey:n,serverKey:o}=t;if(!n&&!r)return;const[a,s,c]=n?[n,"",i]:[r,o,void 0];e.remoteDataEncryptorService.setInstance({raw:a},s,c)}(e,a),function(e,t){const{localKey:r,masterPassword:n,serverKey:o}=t;if(!r&&!n)return;const[a,s,c]=r?[r,"",i]:[n,o,void 0];e.localDataEncryptorService.setInstance({raw:a},s,c)}(e,a)}},83060:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setupSubscriptions=void 0;const n=r(92233),o=r(18216),i=r(82262),a=r(95551);t.setupSubscriptions=function(e,t){e.appInitialized.on((async e=>{const{sessionService:r,storeService:s}=t;(0,a.isSyncInProgress)(s)&&(s.dispatch((0,i.syncFailure)()),e.initMode===o.InitMode.Resume&&await r.getInstance().user.attemptSync(n.Trigger.Wake))}))}},98260:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SyncTaskTracker=void 0;const n=r(77478),o=r(61475),i=r(92233);t.SyncTaskTracker=class{constructor(e){this.taskTrackingId=null,this.taskTrackingClient=null,this.applicationModulesAccess=e}async startTracking(){if((0,n.isMv3Environment)()){this.taskTrackingClient=this.applicationModulesAccess.createClients().taskTracking;const e=await this.taskTrackingClient.commands.startTaskTracking({businessDomain:i.BusinessDomain.Sync,feature:"sync",taskName:"sync"});(0,o.isSuccess)(e)&&(this.taskTrackingId=(0,o.getSuccess)(e).id)}}terminateTracking(){const{taskTrackingId:e}=this;(0,n.isMv3Environment)()&&e&&this.taskTrackingClient.commands.terminateTaskTracking({taskTrackingId:e})}}},57903:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.waitUntilSyncComplete=void 0;const n=r(95551);t.waitUntilSyncComplete=async e=>!1===(0,n.isSyncInProgress)(e)||new Promise((t=>{const r=Date.now(),o=setInterval((()=>!1===(0,n.isSyncInProgress)(e)?(clearInterval(o),t(!0)):Date.now()-r>6e4?t(!1):void 0),1e3)}))},1965:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.wipeOutLocalAccounts=t.deviceRemoteDeletion=void 0;const n=r(2246),o=r(63739),i=r(56915),a=r(90622),s=r(46298),c=r(70252);async function u(e,t,r){const i=r.map((r=>(0,o.deleteAllLocalUserData)(e,t,r))).concat((0,n.deleteUsersPublicSettings)(r));await Promise.all(i)}t.deviceRemoteDeletion=async function(e,t,r){let n=[];try{const o=await(0,a.getLocalAccounts)(e,t);if(0===o.length)return;const c=o.map((({login:e})=>e));n=await async function(e,t){const r=t.map((t=>({deviceAccessKey:(0,i.getDeviceAccessKeySelector)(e.getState(),t),login:t}))),n=await(0,s.getUnauthorizedProfiles)(e,{profiles:r});return(0,s.isApiError)(n)?[]:n.unauthorizedProfiles.map((e=>e.login))}(e,c),await u(t,r,n)}catch(e){const t=new Error(`[UserManagement]: deviceRemoteDeletion - ${e}`);(0,c.sendExceptionLog)({error:t})}},t.wipeOutLocalAccounts=u},41265:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isInternalTestUser=void 0,t.isInternalTestUser=function(e){const t=e.trim();return t.startsWith("{9a9b9c9d-")||t.startsWith("kw_test_")&&(t.endsWith("@mailinator.com")||t.endsWith("@yopmail.com")||t.endsWith(".kwtest.io"))}},72807:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const n=r(54642),o=r(6637),i=r(82258),a=r(12121);t.config={commands:{dismissUserMessages:{handler:i.dismissUserMessagesHandler},addUserMessage:{handler:a.addUserMessageHandler}},queries:{getVisibleUserMessages:{selector:n.getVisibleUserMessagesSelector},getUserMessages:{selector:n.getUserMessagesSelector}},liveQueries:{liveVisibleUserMessages:{operator:o.liveVisibleUserMessages$},liveUserMessages:{operator:o.liveUserMessages$}}}},42331:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UserMessageTypes=void 0;var n=r(53576);Object.defineProperty(t,"UserMessageTypes",{enumerable:!0,get:function(){return n.UserMessageTypes}})},50571:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.userMessagesDismissed=t.userMessageAdded=t.USER_MESSAGES_DISMISSED=t.USER_MESSAGE_ADDED=void 0,t.USER_MESSAGE_ADDED="USER_MESSAGE_ADDED",t.USER_MESSAGES_DISMISSED="USER_MESSAGES_DISMISSED",t.userMessageAdded=e=>({type:t.USER_MESSAGE_ADDED,userMessage:e}),t.userMessagesDismissed=e=>({type:t.USER_MESSAGES_DISMISSED,predicate:e})},54642:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getVisibleUserMessagesSelector=t.getUserMessagesByTypeSelector=t.getUserMessagesSelector=void 0;const n=r(32034);t.getUserMessagesSelector=e=>e.userSession.localSettings.userMessages,t.getUserMessagesByTypeSelector=(e,t)=>e.userSession.localSettings.userMessages.filter((e=>e.type===t)),t.getVisibleUserMessagesSelector=(0,n.createSelector)(t.getUserMessagesSelector,(e=>e.filter((({dismissedAt:e})=>!e))))},86649:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0;const n=r(72807);t.bootstrap=e=>{e.register(n.config)}},12121:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addUserMessageHandler=void 0;const n=r(50571);t.addUserMessageHandler=(e,t)=>(e.storeService.dispatch((0,n.userMessageAdded)({type:t.type})),e.sessionService.getInstance().user.persistLocalSettings(),Promise.resolve())},82258:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.dismissUserMessagesHandler=void 0;const n=r(50571);t.dismissUserMessagesHandler=(e,t)=>(e.storeService.dispatch((0,n.userMessagesDismissed)(t)),e.sessionService.getInstance().user.persistLocalSettings(),Promise.resolve())},75004:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createTrialExpiredUserMessage=t.isTrialExpired=void 0;const n=r(53576);t.isTrialExpired=function({premiumStatus:e,currentDate:t=Date.now()}){switch(e?.statusCode){case n.PremiumStatusCode.PREMIUM:case n.PremiumStatusCode.OLD_ACCOUNT:case n.PremiumStatusCode.NEW_USER:case n.PremiumStatusCode.GRACE_PERIOD:return!1;case n.PremiumStatusCode.PREMIUM_CANCELLED:{const r=1e3*(e.endDate??0);return!!r&&r-t<0}case n.PremiumStatusCode.NO_PREMIUM:default:return!0}},t.createTrialExpiredUserMessage=function(){return{type:n.UserMessageTypes.TRIAL_EXPIRED}}},53156:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0;var n=r(86649);Object.defineProperty(t,"bootstrap",{enumerable:!0,get:function(){return n.bootstrap}})},6637:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.liveUserMessages$=t.liveVisibleUserMessages$=void 0;const n=r(18948),o=r(3343),i=r(54642);t.liveVisibleUserMessages$=()=>(0,n.pipe)((0,o.map)(i.getVisibleUserMessagesSelector),(0,o.distinctUntilChanged)()),t.liveUserMessages$=()=>(0,n.pipe)((0,o.map)(i.getUserMessagesSelector),(0,o.distinctUntilChanged)())},21614:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createUserSettingsLogContent=void 0;const n=r(56915),o=r(16593);t.createUserSettingsLogContent=e=>{const t=(0,n.webAuthnAuthenticationOptedInSelector)(e),r=(0,n.rememberMeFor14DaysOptedInSelector)(e);return{hasAuthenticationWithWebauthn:t,hasCredentialsProtectWithMasterPassword:(0,o.personalSettingsSelector)(e).SecuredDataShowPassword,hasAuthenticationWithRememberMe:r}}},86903:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sendUserSettingsLog=void 0;const n=r(92233),o=r(66102),i=r(21614);t.sendUserSettingsLog=async e=>{const t=(0,i.createUserSettingsLogContent)(e.storeService.getState());await(0,o.logEvent)(e,{event:new n.UserUserSettingsEvent({hasAuthenticationWithWebauthn:t.hasAuthenticationWithWebauthn,hasCredentialsProtectWithMasterPassword:t.hasCredentialsProtectWithMasterPassword,hasAuthenticationWithRememberMe:t.hasAuthenticationWithRememberMe})})}},3149:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setupUserSettingsLogSubscriptions=void 0;const n=r(86903);t.setupUserSettingsLogSubscriptions=async function(e,t){e.sessionOpened.on((()=>{(0,n.sendUserSettingsLog)(t)}))}},35587:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.asyncMap=void 0,t.asyncMap=(e,t)=>Promise.all(e.map((e=>t(e))))},30144:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.canonizeText=void 0,t.canonizeText=function(e){if(!e)return"";let t=e.trim();return t.normalize&&(t=t.normalize("NFD").replace(/[\u0300-\u036f]/g,"")),t=t.toLowerCase().replace(/[\+_\\\/\?\.\-_{}\[\]\(\)\*&!@#\$~`%\^=\|:,;"'<>]/g," "),t.replace(/\s+/g," ")}},78320:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.generateItemUuid=void 0;const n=r(28354);t.generateItemUuid=function(){return`{${(0,n.v4)().toUpperCase()}}`}},96997:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return Math.ceil(2e9*Math.random())}},47408:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getUnixTimestamp=void 0,t.getUnixTimestamp=function(){return Math.round(Date.now()/1e3)}},28445:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.checkOrigin=t.removeNonDigitCharacters=t.looksLikeUuid=t.normalizeEmail=t.looksLikeEmail=t.isValidLogin=t.postDataToUrl=t.getClientAgentHeader=void 0;const n=r(66319),o=r(16516),i=r(14656),a=r(86056),s=e=>n.stringify(o.map((e=>Array.isArray(e)?JSON.stringify(e):e),e));function c(e){return`version:${e.appVersion},platform:${e.platformName}}`}t.getClientAgentHeader=c,t.postDataToUrl=async function(e,t,r){const n={headers:{"Client-Agent":c((0,a.getPlatformInfo)()),"Content-Type":"application/x-www-form-urlencoded",...r?.headers??{}},transformRequest:[s],responseType:r?.responseType??"json"};return(0,i.post)(e,t,n)},t.isValidLogin=e=>d(e)||m(e);const u=/^[^\s@]+@([^\s@])+\.([^\s@])+$/i;function d(e){return u.test(e)}t.looksLikeEmail=d;const l=/[<>]/g;t.normalizeEmail=function(e){return e?e.trim().toLowerCase().replace(l,""):""};const p="^{?[a-fA-F0-9]{8}-[a-fA-F0-9]{4}-[a-fA-F0-9]{4}-[a-fA-F0-9]{4}-[a-fA-F0-9]{12}}?$";function m(e){return new RegExp(p).test(e)}t.looksLikeUuid=m,t.removeNonDigitCharacters=function(e){return"string"==typeof e?e.replace(/\D/g,""):""},t.checkOrigin=e=>{const t=(r=e)?r?.location?.origin:void 0;var r;return!t||!t.endsWith(("LmRhc2hsYW5lLmNvbQ==",atob("LmRhc2hsYW5lLmNvbQ==")))}},54218:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=Function.prototype.toString,n=r.call(Object),o=Object.prototype,i=o.hasOwnProperty,a=o.toString,s="undefined"!=typeof Symbol?Symbol.toStringTag:void 0;t.default=function(e){if(!(e=>"object"==typeof e&&null!==e)(e)||"[object Object]"!==function(e){if(null===e)return void 0===e?"[object Undefined]":"[object Null]";if(!s||!(s in Object(e)))return a.call(e);const t=i.call(e,s),r=e[s];let n=!1;try{e[s]=void 0,n=!0}catch(e){}const o=a.call(e);return n&&(t?e[s]=r:delete e[s]),o}(e))return!1;const t=Object.getPrototypeOf(e);if(null===t)return!0;const o=i.call(t,"constructor")&&t.constructor;return"function"==typeof o&&o instanceof o&&r.call(o)===n}},22376:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.vpnApiConfig=void 0;const n=r(53041),o=r(97657),i=r(25838),a=r(83419),s=r(8522);t.vpnApiConfig={commands:{activateVpnAccount:{handler:n.activateVpnAccountHandler},clearVpnAccountErrors:{handler:o.clearVpnAccountErrorsHandler},completeVpnAccountActivation:{handler:i.completeVpnAccountActivationHandler}},queries:{getVpnAccount:{selector:s.vpnAccountStatusSelector},getVpnCapabilitySetting:{selector:s.vpnCapabilitySettingSelector}},liveQueries:{liveVpnAccount:{operator:a.vpnAccountStatus$}}}},3790:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VpnDisabledReason=t.VpnAccountActivationErrorType=t.VpnAccountStatusType=void 0,function(e){e.Activated="Activated",e.Activating="Activating",e.Error="Error",e.NotFound="NotFound",e.Ready="Ready"}(t.VpnAccountStatusType||(t.VpnAccountStatusType={})),function(e){e.ServerError="ServerError",e.AccountAlreadyExistError="AccountAlreadyExist"}(t.VpnAccountActivationErrorType||(t.VpnAccountActivationErrorType={})),function(e){e.InTeam="InTeam",e.NotPremium="NotPremium",e.NoPayment="NoPayment",e.Other="Other"}(t.VpnDisabledReason||(t.VpnDisabledReason={}))},94922:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.openDashlaneVpnAPI=void 0;const n=r(46298),o=r(29301);t.openDashlaneVpnAPI=e=>({generateCredential:async(t,r)=>{const i=await(0,n.generateCredential)(e,t,{email:r});return(0,n.isApiError)(i)?{success:!1,error:i.code===n.GetVpnCredentialBusinessErrors.USER_ALREADY_HAS_AN_ACCOUNT_FOR_PROVIDER?o.VpnErrorType.AccountAlreadyExistError:o.VpnErrorType.ServerError}:{success:!0,password:i.password}}})},29301:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VpnErrorType=void 0,function(e){e.AccountAlreadyExistError="AccountAlreadyExist",e.ServerError="ServerError"}(t.VpnErrorType||(t.VpnErrorType={}))},2749:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makeVpnLogger=void 0;const n=r(92233),o=r(66102),i=r(29301),a={[i.VpnErrorType.AccountAlreadyExistError]:n.ActivateVpnError.EmailAlreadyInUse,[i.VpnErrorType.ServerError]:n.ActivateVpnError.ServerError};t.makeVpnLogger=e=>({logComplete:async()=>{await(0,o.logEvent)(e,{event:new n.UserActivateVpnEvent({flowStep:n.FlowStep.Complete})})},logError:async t=>{await(0,o.logEvent)(e,{event:new n.UserActivateVpnEvent({flowStep:n.FlowStep.Error,errorName:a[t]})})},logStart:async()=>{await(0,o.logEvent)(e,{event:new n.UserActivateVpnEvent({flowStep:n.FlowStep.Start})})}})},42238:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.vpnAccountNotFoundAction=t.vpnAccountActivationCompleteAction=t.vpnAccountGenerationErrorAction=t.vpnAccountGenerationDoneAction=t.vpnAccountActivatingAction=t.VPN_ACCOUNT_NOT_FOUND=t.VPN_ACCOUNT_GENERATION_ERROR=t.VPN_ACCOUNT_ACTIVATION_COMPLETE=t.VPN_ACCOUNT_GENERATION_DONE=t.VPN_ACCOUNT_ACTIVATING=void 0,t.VPN_ACCOUNT_ACTIVATING="VPN_ACCOUNT_ACTIVATING",t.VPN_ACCOUNT_GENERATION_DONE="VPN_ACCOUNT_GENERATION_DONE",t.VPN_ACCOUNT_ACTIVATION_COMPLETE="VPN_ACCOUNT_ACTIVATION_COMPLETE",t.VPN_ACCOUNT_GENERATION_ERROR="VPN_ACCOUNT_GENERATION_ERROR",t.VPN_ACCOUNT_NOT_FOUND="VPN_ACCOUNT_NOT_FOUND",t.vpnAccountActivatingAction=()=>({type:t.VPN_ACCOUNT_ACTIVATING}),t.vpnAccountGenerationDoneAction=()=>({type:t.VPN_ACCOUNT_GENERATION_DONE}),t.vpnAccountGenerationErrorAction=e=>({type:t.VPN_ACCOUNT_GENERATION_ERROR,error:e}),t.vpnAccountActivationCompleteAction=()=>({type:t.VPN_ACCOUNT_ACTIVATION_COMPLETE}),t.vpnAccountNotFoundAction=()=>({type:t.VPN_ACCOUNT_NOT_FOUND})},16667:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.vpnApiBootstrap=void 0;const n=r(22376);t.vpnApiBootstrap=e=>{e.register(n.vpnApiConfig)}},90731:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VPN_CREDENTIAL_NAME=t.VPN_CREDENTIAL_URL=t.VPN_DASHLANE_HOTSPOTSHIELD_SUBDOMAIN=t.VPN_HOTSPOTSHIELD_DOMAIN=void 0,t.VPN_HOTSPOTSHIELD_DOMAIN="hotspotshield.com",t.VPN_DASHLANE_HOTSPOTSHIELD_SUBDOMAIN="dashlane",t.VPN_CREDENTIAL_URL=`https://${t.VPN_DASHLANE_HOTSPOTSHIELD_SUBDOMAIN}.${t.VPN_HOTSPOTSHIELD_DOMAIN}`,t.VPN_CREDENTIAL_NAME="VPN Hotspot Shield"},53041:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.activateVpnAccountHandler=void 0;const n=r(2749),o=r(94922),i=r(17842);t.activateVpnAccountHandler=async(e,t)=>{const r=(0,i.CreateVpnService)({generator:(0,o.openDashlaneVpnAPI)(e.storeService),logger:(0,n.makeVpnLogger)(e)},e);await r.generateCredential(t.email)}},97657:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.clearVpnAccountErrorsHandler=void 0;const n=r(42238);t.clearVpnAccountErrorsHandler=e=>(e.storeService.dispatch((0,n.vpnAccountNotFoundAction)()),Promise.resolve())},25838:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.completeVpnAccountActivationHandler=void 0;const n=r(42238);t.completeVpnAccountActivationHandler=e=>(e.storeService.dispatch((0,n.vpnAccountActivationCompleteAction)()),Promise.resolve())},7995:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.vpnCredentialMatcher=void 0;const n=r(21178),o=r(90731);t.vpnCredentialMatcher=e=>{const t=new n.ParsedURL(e.Url);return e.Password&&e.Email&&t&&t.getRootDomain()===o.VPN_HOTSPOTSHIELD_DOMAIN&&t.getSubdomain()===o.VPN_DASHLANE_HOTSPOTSHIELD_SUBDOMAIN}},83419:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.vpnAccountStatus$=void 0;const n=r(18948),o=r(3343),i=r(8522);t.vpnAccountStatus$=function(){const e=i.vpnAccountStatusSelector;return(0,n.pipe)((0,o.map)(e),(0,o.distinctUntilChanged)())}},24827:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VPNReducers=void 0;const n=r(42238),o=r(3790);t.VPNReducers=(e,t)=>{switch(t.type){case n.VPN_ACCOUNT_ACTIVATING:return{accountStatus:{status:o.VpnAccountStatusType.Activating}};case n.VPN_ACCOUNT_GENERATION_DONE:return{accountStatus:{status:o.VpnAccountStatusType.Ready}};case n.VPN_ACCOUNT_GENERATION_ERROR:return{accountStatus:{status:o.VpnAccountStatusType.Error,error:t.error}};case n.VPN_ACCOUNT_ACTIVATION_COMPLETE:return{accountStatus:{status:o.VpnAccountStatusType.Activated}};case n.VPN_ACCOUNT_NOT_FOUND:return{accountStatus:{status:o.VpnAccountStatusType.NotFound}};default:return e??{accountStatus:{status:o.VpnAccountStatusType.NotFound}}}}},8522:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.vpnCapabilitySettingSelector=t.getVpnCapabilitySetting=t.vpnAccountStatusSelector=t.vpnCredentialSelector=void 0;const n=r(51319),o=r(32034),i=r(16593),a=r(3790),s=r(7995),c=(e,t)=>(t.CreationDatetime??0)-(e.CreationDatetime??0);var u;t.vpnCredentialSelector=e=>(0,n.credentialsSelector)(e).filter((e=>(0,s.vpnCredentialMatcher)(e))).sort(c)[0]??null,t.vpnAccountStatusSelector=(0,o.createSelector)((e=>{const{vpnData:t}=e.userSession;return t||{accountStatus:{status:a.VpnAccountStatusType.NotFound}}}),t.vpnCredentialSelector,((e,t)=>{switch(e.accountStatus.status){case a.VpnAccountStatusType.Error:return{status:a.VpnAccountStatusType.Error,error:e.accountStatus.error};case a.VpnAccountStatusType.Activating:return{status:a.VpnAccountStatusType.Activating};case a.VpnAccountStatusType.Activated:case a.VpnAccountStatusType.NotFound:return t?{status:a.VpnAccountStatusType.Activated,email:t.Email,password:t.Password,credentialId:t.Id}:{status:a.VpnAccountStatusType.NotFound};case a.VpnAccountStatusType.Ready:return t?{status:a.VpnAccountStatusType.Ready,email:t.Email,password:t.Password,credentialId:t.Id}:{status:a.VpnAccountStatusType.NotFound}}})),function(e){e.IN_TEAM="in_team",e.NOT_PREMIUM="not_premium",e.NO_PAYMENT="no_payment"}(u||(u={}));const d={in_team:a.VpnDisabledReason.InTeam,not_premium:a.VpnDisabledReason.NotPremium,no_payment:a.VpnDisabledReason.NoPayment};t.getVpnCapabilitySetting=e=>{const t=e?.capabilities?.secureWiFi;return t.enabled?{hasVpnEnabled:!0}:{hasVpnEnabled:!1,vpnDisabledReason:d[t.info.reason]||a.VpnDisabledReason.Other}},t.vpnCapabilitySettingSelector=(0,o.createSelector)(i.premiumStatusSelector,t.getVpnCapabilitySetting)},17842:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CreateVpnService=void 0;const n=r(88544),o=r(38250),i=r(9763),a=r(88779),s=r(92263),c=r(95623),u=r(70252),d=r(16593),l=r(42238),p=r(90731),m=r(29301),g=r(8522),f=({update:{title:e}})=>({Title:e}),S=({title:e})=>({Title:e});t.CreateVpnService=(e,t)=>{const r=async r=>{t.storeService.dispatch((0,l.vpnAccountGenerationErrorAction)(r===m.VpnErrorType.AccountAlreadyExistError?o.VpnAccountActivationErrorType.AccountAlreadyExistError:o.VpnAccountActivationErrorType.ServerError)),await e.logger.logError(r??m.VpnErrorType.ServerError)};return{generateCredential:async o=>{await e.logger.logStart(),t.storeService.dispatch((0,l.vpnAccountActivatingAction)());try{const s=(0,n.contactInfoSelector)(t.storeService.getState()),c=(0,d.userLoginSelector)(t.storeService.getState()),u=o??s.email??c,m=await e.generator.generateCredential(c,u);switch(m.success){case!0:await(async(e,r,n)=>{const o=(0,g.vpnCredentialSelector)(t.storeService.getState()),s={email:e,password:r,url:p.VPN_CREDENTIAL_URL,login:n,title:p.VPN_CREDENTIAL_NAME};if(o){const e={id:o.Id,update:{...s}};await(0,a.updateCredential)({storeService:t.storeService,sessionService:t.sessionService,eventLoggerService:t.eventLoggerService,applicationModulesAccess:t.applicationModulesAccess},e,f)}else await(0,i.createCredential)({storeService:t.storeService,sessionService:t.sessionService,eventLoggerService:t.eventLoggerService,applicationModulesAccess:t.applicationModulesAccess},s,S)})(u,m.password,c),t.storeService.dispatch((0,l.vpnAccountGenerationDoneAction)()),await e.logger.logComplete();break;case!1:r(m.error)}}catch(e){r();const t="VPN",n=s.CarbonError.fromAnyError(e).addContextInfo(t,"saveCredential");(0,c.logError)({tag:[t],message:`${n}`,details:{error:e}}),(0,u.sendExceptionLog)({error:n})}}}}},71012:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.minAcceptablePasswordStrength=void 0,t.minAcceptablePasswordStrength=2},46866:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mockCarbon=void 0;const n=r(53576),o=r(18948),i=r(45619),a=r(46937),s={userSession:{account:{login:"user"}}},c=()=>{};t.mockCarbon=({mockApiEvents:e,stateFn:t=(e=>e),mockEvents:r})=>{const u=new a.CarbonLegacyInfrastructure;return u.ready({apiEvents:Object.keys(n.CarbonApiConnector).reduce(((e,t)=>{if(!(t in e)){const r=Object.assign(jest.fn(),{on:jest.fn()});e[t]=r}return e}),{...e}),leelooEventsCommands:Object.keys(n.CarbonLeelooConnector).reduce(((e,t)=>(e[t]=jest.fn(),e)),{}),leelooEvents:{...i.LEGACY_LEELOO_EVENTS_TO_SUBSCRIBE.reduce(((e,t)=>({...e,[t]:{on:jest.fn((()=>c))}})),{}),...r},state$:new o.BehaviorSubject(t(s))}),u}},61657:function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var o,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,r,a):o(t,r))||a);return i>3&&a&&Object.defineProperty(t,r,a),a};Object.defineProperty(t,"__esModule",{value:!0}),t.CarbonEventEmitter=void 0;const o=r(91854);let i=class extends o.ContextlessBaseEventEmitter{};i=n([(0,o.Injectable)()],i),t.CarbonEventEmitter=i},18955:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LEGACY_LEELOO_SLOTS_TO_IGNORE=void 0;const n=r(53576),o=r(61475),i=r(45619),a=r(46937);t.LEGACY_LEELOO_SLOTS_TO_IGNORE=(0,o.safeCast)(a.LEGACY_LEELOO_SLOTS_ALL.filter((e=>!i.LEGACY_LEELOO_EVENTS_TO_SUBSCRIBE.includes(e)&&!(0,o.safeCast)(n.LEGACY_CARBON_LEELOO_USED_COMMANDS).includes(e))))},45619:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.relayLeelooLegacyEvents=t.LEGACY_LEELOO_EVENTS_TO_SUBSCRIBE=void 0,t.LEGACY_LEELOO_EVENTS_TO_SUBSCRIBE=["loginStatusChanged","openSessionTokenSent","openSessionAskMasterPassword","openSessionDashlaneAuthenticator","openSessionOTPSent","openSessionOTPForNewDeviceRequired","openSessionFailed","openSessionSsoRedirectionToIdpRequired","openSessionMasterPasswordLess"],t.relayLeelooLegacyEvents=function(e,r){const n=t.LEGACY_LEELOO_EVENTS_TO_SUBSCRIBE.map((t=>e[t].on((async e=>{await r.sendEvent("carbonLegacy",{eventData:e,eventName:t})}))));return()=>{n.forEach((e=>{e()}))}}},46937:function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var o,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,r,a):o(t,r))||a);return i>3&&a&&Object.defineProperty(t,r,a),a};Object.defineProperty(t,"__esModule",{value:!0}),t.LEGACY_LEELOO_SLOTS_ALL=t.CarbonLegacyInfrastructure=void 0;const o=r(18948),i=r(53576),a=r(91854);let s=class{constructor(){this.carbon$=new o.ReplaySubject(1),this.carbonState$=this.carbon$.pipe((0,o.switchMap)((e=>e.state$)))}ready(e){this.carbon$.next(e)}getCarbon(){return(0,o.firstValueFrom)(this.carbon$)}};s=n([(0,a.Injectable)()],s),t.CarbonLegacyInfrastructure=s,t.LEGACY_LEELOO_SLOTS_ALL=Object.keys(i.CarbonLeelooConnector)},87026:function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var o,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,r,a):o(t,r))||a);return i>3&&a&&Object.defineProperty(t,r,a),a},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0}),t.CarbonLegacyBootstrap=void 0;const i=r(91854),a=r(90693),s=r(18948),c=r(61657),u=r(45619),d=r(46937),l=r(96160);let p=class{constructor(e,t,r,n){this.infra=t,this.lifeCycle=r,this.eventEmitter=n;const{setActiveUser:o}=e.getClient(a.requestContextApi).commands;this.setActiveUser=o}onFrameworkInit(){this.lifeCycle.addExternalComponentReadyCondition((async()=>await this.infra.getCarbon())),this.lifeCycle.addAppReadyHook((async()=>{const e=this.infra.carbonState$.pipe((0,s.map)((e=>({account:(0,l.getCarbonLegacyStateSelector)(e,"userSession.account")}))),(0,s.map)((e=>{var t;if((t=e)&&"object"==typeof t&&"account"in t&&t.account&&"object"==typeof t.account&&"login"in t.account&&t.account.login&&"string"==typeof t.account.login&&"isAuthenticated"in t.account&&t.account.isAuthenticated)return e.account.login})),(0,s.distinctUntilChanged)(),(0,s.switchMap)((async e=>{await this.setActiveUser({userName:e})}))).subscribe(),t=await this.infra.getCarbon(),r=(0,u.relayLeelooLegacyEvents)(t.leelooEvents,this.eventEmitter);return()=>{e.unsubscribe(),r()}}))}};p=n([(0,i.FrameworkInit)(),o("design:paramtypes",[i.CqrsClient,d.CarbonLegacyInfrastructure,i.AppLifeCycle,c.CarbonEventEmitter])],p),t.CarbonLegacyBootstrap=p},49112:function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var o,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,r,a):o(t,r))||a);return i>3&&a&&Object.defineProperty(t,r,a),a};Object.defineProperty(t,"__esModule",{value:!0}),t.CarbonLegacyModule=void 0;const o=r(53576),i=r(91854),a=r(92910),s=r(76559),c=r(61657),u=r(46937),d=r(87026),l=r(85642),p=r(50582),m=r(52948),g=r(17459),f=r(13950);let S=class{};S=n([(0,i.Module)({api:o.carbonLegacyApi,handlers:{commands:{carbon:a.CarbonCommandHandler,carbonLegacyLeeloo:s.CarbonLegacyLeelooCommandHandler,mitigationDeleteGrapheneUserData:m.DeleteGrapheneUserDataCommandHandler,...(0,f.createHandlersConfigForConnectorCommands)(o.carbonCommandsSlots,f.CarbonApiCommandsHandler)},events:{},queries:{carbonState:l.CarbonGetStateQueryHandler,carbonStateList:p.CarbonStateListQueryHandler,...(0,g.createHandlersConfigForCarbonApiQueries)(o.carbonQueriesSlots,o.carbonLiveQueriesSlots)}},configurations:{infrastructure:{token:u.CarbonLegacyInfrastructure}},onFrameworkInit:d.CarbonLegacyBootstrap,providers:[c.CarbonEventEmitter],requiredFeatureFlips:["audit_logs_vault","autofill_web_linkedWebsites","autofill_web_linkedWebsites_dev","breachesFetchWeb","itadmin_SAEX_CryptoMigration_Phase1","itadmin_SAEX_CryptoMigration_Phase2","masterPasswordLeakCheckLog","ptu_web_MPprotect_phase3","SAEXAccountRecoveryv3","sharing_web_invalidSignatureAutoRevoke_prod"]})],S),t.CarbonLegacyModule=S},96160:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getCarbonLegacyStateSelector=void 0,t.getCarbonLegacyStateSelector=(e,t)=>t?t.split(".").reduce(((e,t)=>{return"object"==typeof(r=e)&&r&&t in r?e[t]:e;var r}),e):e},13950:function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var o,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,r,a):o(t,r))||a);return i>3&&a&&Object.defineProperty(t,r,a),a},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0}),t.createHandlersConfigForConnectorCommands=t.CarbonApiCommandsHandler=void 0;const i=r(18948),a=r(53576),s=r(61475),c=r(91854),u=r(46937);let d=class{constructor(e){this.infrastructure=e}async execute(e,{name:t}){const{apiEvents:r}=await(0,i.firstValueFrom)((0,i.from)(this.infrastructure.getCarbon())),{body:n}=e;return(0,i.firstValueFrom)((0,i.from)(r[t](n)).pipe((0,i.map)((e=>(0,s.success)(e)))))}};d=n([(0,c.Injectable)(),o("design:paramtypes",[u.CarbonLegacyInfrastructure])],d),t.CarbonApiCommandsHandler=d,Object.values(a.commandsFromCarbonAPI).forEach((e=>(0,c.CommandHandler)(e)(d))),t.createHandlersConfigForConnectorCommands=function(e,t){return Object.keys(e).reduce(((e,r)=>({...e,[r]:t})),{})}},17459:function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var o,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,r,a):o(t,r))||a);return i>3&&a&&Object.defineProperty(t,r,a),a},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0}),t.createHandlersConfigForCarbonApiQueries=t.CarbonApiQueriesHandler=void 0;const i=r(18948),a=r(71796),s=r(61475),c=r(91854),u=r(53576),d=r(46937);let l=class{constructor(e){this.infrastructure=e}execute(e,{name:t}){const{carbonQueryName:r,carbonLiveQueryName:n}=this.getMaybeCarbonQueryNames(t);return(0,i.from)(this.infrastructure.getCarbon()).pipe((0,i.concatMap)((({apiEvents:t})=>(0,i.concat)((0,i.iif)((()=>!!r&&r in t),(0,i.from)(t[r](e.body)),i.EMPTY),(0,i.iif)((()=>!!n&&n in t),new i.Observable((r=>{const o=t[n].on(void 0===e.body?a.DEFAULT_PARAM:e.body,(e=>r.next(e)));return()=>{o()}})),i.EMPTY)))),(0,i.map)((e=>(0,s.success)(e))))}getMaybeCarbonQueryNames(e){let t,r;return e.startsWith("live")?(r=e,t=`get${e.substring("live".length)}`):t=e,{carbonQueryName:t,carbonLiveQueryName:r}}};l=n([(0,c.Injectable)(),o("design:paramtypes",[d.CarbonLegacyInfrastructure])],l),t.CarbonApiQueriesHandler=l,Object.values(u.queriesFromCarbonAPI).forEach((e=>(0,c.QueryHandler)(e)(l))),t.createHandlersConfigForCarbonApiQueries=function(e,t){return[...Object.keys(e),...Object.keys(t)].reduce(((e,t)=>({...e,[t]:l})),{})}},92910:function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var o,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,r,a):o(t,r))||a);return i>3&&a&&Object.defineProperty(t,r,a),a},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0}),t.CarbonCommandHandler=void 0;const i=r(53576),a=r(91854),s=r(61475),c=r(46937),u=r(61657);let d=class{constructor(e,t,r){this.infra=e,this.eventsEmitter=t,this.context=r}async execute({body:{args:e,name:t,fireEvent:r}}){const n=(await this.infra.getCarbon()).apiEvents[t],o=await n(...e),i=(e=>!(!e||"object"!=typeof e)&&"success"in e&&!1===e.success)(a=o)?(0,s.failure)({tag:"",error:a.error}):(0,s.success)({id:"",carbonResult:a});var a;return r&&await this.eventsEmitter.sendEvent("carbonCommandResult",{result:o},this.context),i}};d=n([(0,a.CommandHandler)(i.CarbonCommand),o("design:paramtypes",[c.CarbonLegacyInfrastructure,u.CarbonEventEmitter,a.RequestContext])],d),t.CarbonCommandHandler=d},76559:function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var o,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,r,a):o(t,r))||a);return i>3&&a&&Object.defineProperty(t,r,a),a},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0}),t.CarbonLegacyLeelooCommandHandler=void 0;const i=r(53576),a=r(91854),s=r(61475),c=r(46937),u=r(61657);let d=class{constructor(e,t){this.infra=e,this.eventsEmitter=t}async execute({body:{arg:e,name:t,fireEvent:r}}){const n=(await this.infra.getCarbon()).leelooEventsCommands[t],o=await n(...e);return r?(await this.eventsEmitter.sendEvent("carbonCommandResult",{result:o}),(0,s.success)({id:"",carbonResult:o})):(0,s.success)({id:"",carbonResult:o})}};d=n([(0,a.CommandHandler)(i.CarbonLegacyLeelooCommand),o("design:paramtypes",[c.CarbonLegacyInfrastructure,u.CarbonEventEmitter])],d),t.CarbonLegacyLeelooCommandHandler=d},85642:function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var o,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,r,a):o(t,r))||a);return i>3&&a&&Object.defineProperty(t,r,a),a},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0}),t.CarbonGetStateQueryHandler=void 0;const i=r(53576),a=r(91854),s=r(61475),c=r(18948),u=r(46937),d=r(96160);let l=class{constructor(e){this.infrastructure=e}execute({body:{path:e}}){const{carbonState$:t}=this.infrastructure;return t.pipe((0,c.map)((t=>(0,d.getCarbonLegacyStateSelector)(t,e))),(0,c.distinctUntilChanged)(),(0,c.map)((e=>(0,s.success)(e))))}};l=n([(0,a.QueryHandler)(i.CarbonStateQuery),o("design:paramtypes",[u.CarbonLegacyInfrastructure])],l),t.CarbonGetStateQueryHandler=l},50582:function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var o,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,r,a):o(t,r))||a);return i>3&&a&&Object.defineProperty(t,r,a),a},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0}),t.CarbonStateListQueryHandler=void 0;const i=r(53576),a=r(91854),s=r(61475),c=r(18948),u=r(46937),d=r(96160);let l=class{constructor(e){this.infrastructure=e}execute({body:{paths:e}}){const{carbonState$:t}=this.infrastructure;return t.pipe((0,c.map)((t=>(0,s.success)(e.map((e=>(0,d.getCarbonLegacyStateSelector)(t,e)))))))}};l=n([(0,a.QueryHandler)(i.CarbonStateListQuery),o("design:paramtypes",[u.CarbonLegacyInfrastructure])],l),t.CarbonStateListQueryHandler=l},52948:function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var o,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,r,a):o(t,r))||a);return i>3&&a&&Object.defineProperty(t,r,a),a},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0}),t.DeleteGrapheneUserDataCommandHandler=void 0;const i=r(53576),a=r(91854),s=r(61475);let c=class{constructor(e){this.infra=e}async execute({body:{login:e}}){const t=await this.infra.getAllKeys(),r=`.${e}`,n=t.filter((e=>e.endsWith(r))).map((async e=>await this.infra.remove(e)));return await Promise.allSettled(n),(0,s.success)(null)}};c=n([(0,a.CommandHandler)(i.MitigationDeleteGrapheneUserDataCommand),o("design:paramtypes",[a.KeyValueStorageInfrastructure])],c),t.DeleteGrapheneUserDataCommandHandler=c},71439:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LEGACY_LEELOO_SLOTS_TO_IGNORE=t.Mocks=t.CarbonLegacyInfrastructure=t.CarbonLegacyModule=void 0;var n=r(49112);Object.defineProperty(t,"CarbonLegacyModule",{enumerable:!0,get:function(){return n.CarbonLegacyModule}});var o=r(46937);Object.defineProperty(t,"CarbonLegacyInfrastructure",{enumerable:!0,get:function(){return o.CarbonLegacyInfrastructure}}),t.Mocks=r(46866);var i=r(18955);Object.defineProperty(t,"LEGACY_LEELOO_SLOTS_TO_IGNORE",{enumerable:!0,get:function(){return i.LEGACY_LEELOO_SLOTS_TO_IGNORE}})},48749:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setConfig=t.config=t.DashlaneAPISchemesNames=void 0;const n=r(4407);var o;!function(e){e.DASHLANE_API_HOST_WITH_SCHEME="DASHLANE_API_HOST_WITH_SCHEME",e.DASHLANE_WS_HOST_WITH_SCHEME="DASHLANE_WS_HOST_WITH_SCHEME"}(o=t.DashlaneAPISchemesNames||(t.DashlaneAPISchemesNames={}));const i={LOG_LEVEL:n.Silent,LOG_TAGS:[],DASHLANE_API_HOST_WITH_SCHEME:"https://api.dashlane.com",DASHLANE_WS_HOST_WITH_SCHEME:"https://ws1.dashlane.com",DASHLANE_STYX_HOST_WITH_SCHEME:"https://styx.data.dashlane.com",CODE_NAME:null,MANIFEST_VERSION:null};t.config=i;const a=e=>(Object.values(o).forEach((t=>{t in e&&!e[t]&&(e[t]=i[t])})),e);t.setConfig=e=>{t.config={...t.config,...a(e)}}},92912:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createAccount=t.getCreateAccountRequest=t.defaultCreateAccountRequestParams=t.AUTOMATION_MP_GRACE_PERIOD=t.DEFAULT_E2E_ACCOUNT_PASSWORD=void 0;const n=r(78320),o=r(78955),i=r(56292);function a(e,r,n){return{login:e,anonymousUserId:n,password:r,...t.defaultCreateAccountRequestParams}}t.DEFAULT_E2E_ACCOUNT_PASSWORD="Azerty12",t.AUTOMATION_MP_GRACE_PERIOD=5e3,t.defaultCreateAccountRequestParams={format:"US",language:"en",subscribe:!1,deviceName:"INTEGRATION_TEST"},t.getCreateAccountRequest=a,t.createAccount=async function(e,r,s){const c=r??{},u={...a((0,o.getLogin)(),t.DEFAULT_E2E_ACCOUNT_PASSWORD,(0,n.generateItemUuid)()),...c},d={createAccountResult:await e.createAccountStep1(u),options:{flowIndicator:"webAccount"},isStandAlone:!0,...s??{}},l=await e.createAccountStep2(d);return await(0,i.sync)(e),l}},78955:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getLogin=t.defaultTestAccountOptions=void 0;const n=r(28354),o=r(55995);t.defaultTestAccountOptions={abTests:{},automationAccount:!1,featureFlips:[],throttling:o.TestAccountThrottlingBehaviour.Unthrottled,type:o.TestAccountType.FreePremiumTrial},t.getLogin=function(e=t.defaultTestAccountOptions){const{abTests:r=t.defaultTestAccountOptions.abTests,featureFlips:i=t.defaultTestAccountOptions.featureFlips,throttling:a=t.defaultTestAccountOptions.throttling,type:s=t.defaultTestAccountOptions.type,automationAccount:c=t.defaultTestAccountOptions.automationAccount}=e,u=(0,n.v4)(),d=u.substr(0,u.indexOf("-")),l=function(e){switch(e){case o.TestAccountThrottlingBehaviour.Unthrottled:return"ut_";case o.TestAccountThrottlingBehaviour.Normal:default:return""}}(a),p=function(e){switch(e){case o.TestAccountType.Free:return"freefree_";case o.TestAccountType.PremiumPaid:return"premiumpaid_";case o.TestAccountType.Family:return"family_";case o.TestAccountType.FreePremiumTrial:default:return""}}(s),m=!1===(g=r)?"noabtest_":Object.keys(g).reduce(((e,t)=>{const r=`${t}_${g[t]}_`;return e.concat(r)}),"");var g;const f=function(e){return e.reduce(((e,t)=>{const r=`${t}_`;return e.concat(r)}),"")}(i);return("kw_test_"+function(e){return e?"auto_":""}(c)+l+p+"carbon_e2e_"+m+f+d+"@mailinator.com").toLocaleLowerCase()}},55995:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TestAccountThrottlingBehaviour=t.TestAccountType=void 0,function(e){e[e.Free=0]="Free",e[e.FreePremiumTrial=1]="FreePremiumTrial",e[e.Legacy=2]="Legacy",e[e.PremiumPaid=3]="PremiumPaid",e[e.PremiumPlus=4]="PremiumPlus",e[e.Family=5]="Family"}(t.TestAccountType||(t.TestAccountType={})),function(e){e[e.Normal=0]="Normal",e[e.Unthrottled=1]="Unthrottled"}(t.TestAccountThrottlingBehaviour||(t.TestAccountThrottlingBehaviour={}))},70420:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(92912),t),o(r(78955),t),o(r(55995),t)},76506:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e=2e3){return new Promise((t=>setTimeout(t,e)))}},71602:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getServiceProviderToken=void 0;const n=r(43739),o=r(46298),i=r(97343),a=r(25576);t.getServiceProviderToken=async(e,t)=>{const{storeService:r}=e;!function(e,t){e.dispatch((0,n.deviceRegistered)((0,n.makeDeviceRegistrationKeys)(t.deviceAccessKey,t.deviceSecretKey),a.PersistData.PERSIST_DATA_YES,t.login))}(r,t);const{login:s,teamUuid:c}=t,u=`${c}%${t.userServiceProviderKey}`,d=await(0,i.getUserSSOInfo)(r,{login:s,teamUuid:c,userServiceProviderKey:u});if((0,o.isApiError)(d))throw new Error(`Error: ${d.code}`);return d}},32006:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.forceBreachRefreshHandler=void 0;const n=r(95303);t.forceBreachRefreshHandler=async({applicationModulesAccess:e,storeService:t,wsService:r})=>{const o=(0,n.getInstance)(e,t,r);await o.refresh({forceRefresh:!0})}},79734:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createPublicBreachHelper=t.addPrivateBreachHelper=t.createOrUpdateDarkWebBreachHelper=t.saveBankAccount=t.updateCredential=t.removeCredential=t.getNotes=t.getCredentials=t.saveCredential=void 0;const n=r(28354),o=r(53576),i=r(46298),a=r(77074),s=r(31197),c=r(72579),u=r(76506),d=r(70420);async function l(e,t,r={}){const n=function({title:e,email:t,password:r,url:n,...i}){return{kwType:"KWAuthentifiant",origin:o.SaveOrigin.MANUAL,content:{category:"",email:t,login:t,onlyForThisSubdomain:!1,password:r,protectWithMasterPassword:!1,secondaryLogin:"",url:n??"",title:e,autoLogin:!1,note:"",spaceId:"",linkedWebsites:{addedByDashlane:[],addedByUser:[]},...i}}}({title:"title",email:"email@domain.com",password:d.DEFAULT_E2E_ACCOUNT_PASSWORD,...r}),i=t??n;await e.savePersonalDataItem(i),await(0,u.default)(100)}t.saveCredential=l,t.getCredentials=async function(e){return(await e.getDataModel(null)).credentials},t.getNotes=async function(e){return(await e.getDataModel(null)).notes},t.removeCredential=async function(e,t){return await e.removePersonalDataItem({id:t})},t.updateCredential=function(e,{Id:t,Title:r,Email:n,Url:o,Password:i},a){return l(e,void 0,{id:t,title:r,email:n,password:i,url:o,...a})},t.saveBankAccount=async function(e,t,r={}){const n={kwType:"KWBankStatement",origin:o.SaveOrigin.MANUAL,content:{name:"name",owner:"owner",IBAN:"",BIC:"",bank:"",...r,...t}},i=t??n;await e.savePersonalDataItem(i),await(0,u.default)(100)},t.createOrUpdateDarkWebBreachHelper=async({storeService:e},t)=>{t.databreach.uuid||(t.databreach.uuid=(0,n.v4)());const r=await(0,a.createOrUpdateDarkWebBreach)(e,t);if((0,i.isApiError)(r))throw new Error(`Error when creating / updating test data breach: ${r.message}`);return t.databreach.uuid},t.addPrivateBreachHelper=async({storeService:e},t)=>await(0,s.addPrivateBreach)(e,t),t.createPublicBreachHelper=async({storeService:e},t)=>{const r=await(0,c.createPublicBreach)(e,t);if((0,i.isApiError)(r))throw new Error(`Error when creating test breach: ${r.code}, ${r.message}`);return r}},56292:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sync=t.waitForSync=void 0;const n=r(76506),o=3e4;function i(e,t={timeout:o}){let r,n;const i=setTimeout((()=>{n(new Error("Sync timed out"))}),t.timeout),a=new Promise(((e,t)=>{r=e,n=t})),s=e.sessionSyncStatus.on((({status:e})=>{"syncing"!==e&&(clearTimeout(i),s(),"success"===e?r():"error"===e&&n(new Error("Sync failed")))}));return a}t.waitForSync=i,t.sync=async function(e){await e.sessionForceSync({}),await i(e),await(0,n.default)()}},25601:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),t.DashlaneAPISchemesNames=t.HttpErrorCode=t.init=t.ApplicationBuildType=t.CarbonStorage=t.apiEvents=t.decipherDatabaseRules=t.interfaces=void 0,t.interfaces=r(92231);var i=r(5851);Object.defineProperty(t,"decipherDatabaseRules",{enumerable:!0,get:function(){return i.decipherDatabaseRules}});var a=r(50643);Object.defineProperty(t,"apiEvents",{enumerable:!0,get:function(){return a.apiEvents}}),o(r(4673),t);var s=r(18539);Object.defineProperty(t,"CarbonStorage",{enumerable:!0,get:function(){return s.CarbonLocalStorage}});var c=r(59600);Object.defineProperty(t,"ApplicationBuildType",{enumerable:!0,get:function(){return c.ApplicationBuildType}});var u=r(9265);Object.defineProperty(t,"init",{enumerable:!0,get:function(){return u.init}});var d=r(14656);Object.defineProperty(t,"HttpErrorCode",{enumerable:!0,get:function(){return d.HttpErrorCode}});var l=r(48749);Object.defineProperty(t,"DashlaneAPISchemesNames",{enumerable:!0,get:function(){return l.DashlaneAPISchemesNames}}),o(r(71439),t)},9265:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.init=void 0;const n=r(48749),o=r(95623),i=r(17338),a=r(74318);t.init=async function(e){e.config&&(0,n.setConfig)(e.config);const t=await(0,a.initCarbon)(e),r=(0,i.getCoreServices)(t);return(0,o.logInfo)({message:"init carbon done"}),r}},95343:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_USER_CAPABILITIES=t.makePremiumStatusTrial=t.makePremiumStatusWithPreviousPlan=t.makePremiumStatusWithFamilyMembership=t.makePremiumStatusWithBillingInfo=t.makePremiumStatusWithSpaces=t.makePremiumStatusBillingInfo=t.makeSpace=t.makeSpaceData=t.makePremiumStatusSpace=void 0;const n=r(53576);function o(e){return{associatedEmail:"kw_test_a13e5r4er357er@mailinator.com",billingAdmins:[{login:"kw_test_a13e5r4er357er@mailinator.com"}],color:"#adadad",companyName:"KWTEAM",info:{setting1:!0},invitationDate:987654321,isBillingAdmin:!0,isSSOUser:!1,isTeamAdmin:!0,joinDate:123456789,letter:"K",membersNumber:150,planType:"awesomeType",revokeDate:6872476587,status:n.SpaceStatus.Accepted,teamAdmins:[{login:"kw_test_a13e5r4er357er@mailinator.com"}],teamId:"123456",teamName:"KWTEAM",tier:n.SpaceTier.Legacy,shouldDelete:!1,...e}}function i(e){return{teamId:"123456",details:{associatedEmail:"kw_test_a13e5r4er357er@mailinator.com",billingAdmins:[{login:"kw_test_a13e5r4er357er@mailinator.com"}],color:"#adadad",companyName:"KWTEAM",info:{setting1:!0},invitationDate:987654321,isBillingAdmin:!0,isSSOUser:!1,isTeamAdmin:!0,joinDate:123456789,letter:"K",membersNumber:150,planType:"awesomeType",revokeDate:6872476587,status:n.SpaceStatus.Accepted,teamAdmins:[{login:"kw_test_a13e5r4er357er@mailinator.com"}],teamId:"123456",teamName:"KWTEAM",tier:n.SpaceTier.Legacy,shouldDelete:!1},...e}}t.makePremiumStatusSpace=o,t.makeSpaceData=function(e){return{spaces:e||[i()]}},t.makeSpace=i,t.makePremiumStatusBillingInfo=function(){return{cardExpirationYear:2157,cardExpirationMonth:12,cardLast4Digits:713,cardType:"VISA"}},t.makePremiumStatusWithSpaces=function(e){return{statusCode:n.PremiumStatusCode.NEW_USER,billingInformation:void 0,planName:"stripe",planType:"stripe",endDate:1478536851,autoRenewal:void 0,spaces:e||[o()],capabilities:void 0}},t.makePremiumStatusWithBillingInfo=function(){return{statusCode:n.PremiumStatusCode.NEW_USER,billingInformation:{cardExpirationYear:2157,cardExpirationMonth:12,cardLast4Digits:713,cardType:"VISA"},planName:"stripe",planType:"stripe",endDate:1478536851,autoRenewal:void 0,spaces:void 0,capabilities:void 0}},t.makePremiumStatusWithFamilyMembership=function(){return{statusCode:n.PremiumStatusCode.NEW_USER,billingInformation:void 0,planName:"stripe",planType:"stripe",endDate:1478536851,autoRenewal:void 0,spaces:void 0,capabilities:void 0,familyMembership:{familyId:1,isAdmin:!0,name:"Family"}}},t.makePremiumStatusWithPreviousPlan=function(){return{statusCode:n.PremiumStatusCode.NEW_USER,billingInformation:void 0,planName:"stripe",planType:"stripe",endDate:1478536851,autoRenewal:void 0,spaces:void 0,capabilities:void 0,previousPlan:{planId:"stripeAnnualROWWebsite",endDate:1478536851,startDate:1478536851,statusCode:2,planFeature:"premiumplus"}}},t.makePremiumStatusTrial=function(){return{statusCode:n.PremiumStatusCode.NEW_USER,billingInformation:void 0,planName:"stripe",planType:"stripe",endDate:1478536851,autoRenewal:!1,spaces:void 0,capabilities:void 0}},t.DEFAULT_USER_CAPABILITIES=[{capability:"identityTheftProtection",enabled:!0,info:{}},{capability:"passwordsLimit",enabled:!0,info:{limit:50}},{capability:"secureFiles",enabled:!0,info:{quota:{max:123,remaining:1},maxFileSize:52428800}},{capability:"secureWiFi",enabled:!0,info:{}},{capability:"securityBreach",enabled:!0,info:{}},{capability:"sharingLimit",enabled:!1},{capability:"creditMonitoring",enabled:!1},{capability:"dataLeak",enabled:!1},{capability:"devicesLimit",enabled:!1},{capability:"identityRestoration",enabled:!1},{capability:"multipleAccounts",enabled:!1},{capability:"secureNotes",enabled:!1},{capability:"sync",enabled:!1},{capability:"yubikey",enabled:!1}]},82353:(e,t,r)=>{"use strict";r.r(t),r.d(t,{AuthenticationFlowContracts:()=>n,DeviceTransferContracts:()=>i,IdentityVerificationFlowContracts:()=>o});var n={};r.r(n),r.d(n,{AuthenticationFlowStatusQuery:()=>d.DW,ChangeAccountEmailCommand:()=>u.hW,ChangeTwoFactorAuthenticationOtpTypeCommand:()=>u.eG,ClearErrorCommand:()=>u.jq,GetSsoProviderInfoQuery:()=>d.L2,GetSsoUserSettingsQuery:()=>d.Dc,InitiateAutologinWithSSOCommand:()=>u.x2,InitiateLoginWithSSOCommand:()=>u.Hr,LockCommand:()=>u.Y$,LoginViaSSOCommand:()=>u.yv,LogoutCommand:()=>u.N5,ResendEmailTokenCommand:()=>u.Gc,ResendPushNotificationCommand:()=>u.rF,RetryWebAuthnAuthenticationCommand:()=>u.M6,SSOMigrationType:()=>s,SendAccountEmailCommand:()=>u.A,SendMasterPasswordCommand:()=>u.rT,SsoMigrationServerMethod:()=>a,SubmitBackupCodeCommand:()=>u.sH,SubmitEmailTokenCommand:()=>u.XH,SubmitTotpCommand:()=>u.ad,SwitchToDashlaneAuthenticatorCommand:()=>u.K1,SwitchToEmailTokenCommand:()=>u.v5,UseMasterPasswordCommand:()=>u.Cc,WebAuthnAuthenticationFailCommand:()=>u.O3,authenticationFlowApi:()=>c.V});var o={};r.r(o),r.d(o,{CancelIdentityVerificationCommand:()=>p.Vs,ChangeTwoFactorAuthenticationOtpTypeCommand:()=>p.eG,ClearIdentityVerificationErrorCommand:()=>p.$5,IdentityVerificationClient:()=>g.l,IdentityVerificationCompletedEvent:()=>f.w,IdentityVerificationFlowStatusQuery:()=>m.O,ResendEmailTokenCommand:()=>p.Gc,ResendPushNotificationCommand:()=>p.rF,StartIdentityVerificationCommand:()=>p.qw,SubmitBackupCodeCommand:()=>p.sH,SubmitEmailTokenCommand:()=>p.XH,SubmitTotpCommand:()=>p.ad,SwitchToDashlaneAuthenticatorCommand:()=>p.K1,SwitchToEmailTokenCommand:()=>p.v5,identityVerificationFlowApi:()=>l.i});var i={};r.r(i),r.d(i,{RefreshRequestCommand:()=>h.V,TrustedDeviceFlowStatusQuery:()=>y.N,TrustedDeviceFlowStep:()=>v.T,deviceTransferApi:()=>S.F});var a,s,c=r(29986),u=r(75203),d=r(28096);!function(e){e.SSO="sso",e.MP="master_password"}(a||(a={})),function(e){e[e.MP_TO_SSO=0]="MP_TO_SSO",e[e.MP_TO_SSO_WITH_INFO=1]="MP_TO_SSO_WITH_INFO",e[e.SSO_TO_MP=2]="SSO_TO_MP"}(s||(s={}));var l=r(11433),p=r(13744),m=r(41025),g=r(81822),f=r(13089),S=r(6218),h=r(33969),y=r(53835),v=r(70486)},74127:(e,t,r)=>{"use strict";r.r(t),r.d(t,{AddDisabledSourceTypesCommand:()=>D.g,AnalysisStatus:()=>b._,CREDENTIAL_DATA_MODELS:()=>p.q_,DisableAnalysisCommand:()=>O.u,DisableAutofillOnFormsCommand:()=>N.t,DisableAutofillOnLoginsCommand:()=>R.f,DisableAutologinCommand:()=>P.T,DisableFollowUpNotificationCommand:()=>M.y,DisablePhishingPreventionForUrlCommand:()=>T.z,EnableAnalysisCommand:()=>L.c,EnableAutofillOnFormsCommand:()=>k.a,EnableAutofillOnLoginsCommand:()=>F.I,EnableAutologinCommand:()=>U.i,EnableFollowUpNotificationCommand:()=>B.B,FORM_DATA_MODELS:()=>p.up,GetAnalysisStatusOnUrlQuery:()=>b.h,GetAutofillDisabledOnLoginsAndFormsNotificationStatusQuery:()=>h.z,GetAutofillProtectionContextQuery:()=>v.u,GetAutofillSettingsQuery:()=>w.T,GetDashlaneDefinedLinkedWebsitesQuery:()=>K.J,GetUserAutofillCorrectionsQuery:()=>C.w,OtherSourceType:()=>n,PasswordAutofillPerformedEvent:()=>a.p,PhishingPreventionDisabledForUrlQuery:()=>A.v,PhishingPreventionEnabledQuery:()=>E.i,RemoveDisabledSourceTypesCommand:()=>G.v,ResetProtectedItemAutofillTimerCommand:()=>_.y,SetAutofillDisabledOnLoginsAndFormsNotificationStatusCommand:()=>S.a,SetUserAutofillCorrectionsCommand:()=>$.S,TemporaryEmitPasswordAutofillPerformedEventCommand:()=>s.q,ToggleDashlaneCommand:()=>x.r,UpdateLinkedWebsitesCommand:()=>V.A,VaultItemDisableProtectionMode:()=>g.M,VaultSourceType:()=>c.k,autofillDataApi:()=>o.c,autofillNotificationsApi:()=>f._,autofillSecurityApi:()=>y.V,autofillSettingsApi:()=>I.I,autofillTrackingApi:()=>i.Y,isArrayOfAutofillableDataModel:()=>p.rF,isArrayOfUserAutofillCorrections:()=>m.P,isAutofillableDataModel:()=>p.Pw,isCredentialsArray:()=>l.A,isDashlaneDisabledPermanently:()=>m.w,isOtherSourceType:()=>u,isVaultSourceType:()=>d,linkedWebsitesApi:()=>j.G});var n,o=r(15403),i=r(92018),a=r(11564),s=r(73581),c=r(78364);!function(e){e.NewPassword="newPassword",e.SubmitButton="submitButton",e.WebauthnConditionalUI="WebauthnConditionalUI"}(n||(n={}));const u=e=>Object.values(n).includes(e),d=e=>e in c.k;var l=r(85449),p=r(46154),m=r(3124),g=r(52434),f=r(45714),S=r(61933),h=r(63208),y=r(38554),v=r(51730),E=r(5282),A=r(63212),_=r(93555),T=r(94370),I=r(69029),b=r(68573),w=r(63267),C=r(3414),D=r(99682),O=r(3909),P=r(34962),N=r(65791),R=r(56e3),M=r(11232),L=r(54405),U=r(4924),k=r(38018),F=r(69643),B=r(82796),G=r(46918),x=r(50163),$=r(29641),j=r(46097),K=r(66608),V=r(9446)},97494:(e,t,r)=>{"use strict";r.r(t),r.d(t,{ActivityLogCategory:()=>o,ActivityLogType:()=>n,StoreActivityLogsCommand:()=>a.M,StoreActivityLogsInvalidLogsError:()=>a.W,activityLogsApi:()=>i.g});var n,o,i=r(89193),a=r(98976);!function(e){e.UserInvited="user_invited",e.UserReinvited="user_reinvited",e.UserRemoved="user_removed",e.TeamCaptainAdded="team_captain_added",e.TeamCaptainRemoved="team_captain_removed",e.GroupManagerAdded="group_manager_added",e.GroupManagerRemoved="group_manager_removed",e.MasterPasswordResetAccepted="master_password_reset_accepted",e.MasterPasswordResetRefused="master_password_reset_refused",e.BillingAdminAdded="billing_admin_added",e.BillingAdminRemoved="billing_admin_removed",e.UserGroupCreated="user_group_created",e.UserGroupRenamed="user_group_renamed",e.UserGroupDeleted="user_group_deleted",e.UserJoinedUserGroup="user_joined_user_group",e.UserLeftUserGroup="user_left_user_group",e.UserInvitedToUserGroup="user_invited_to_user_group",e.UserDeclinedInviteToUserGroup="user_declined_invite_to_user_group",e.UserRemovedFromUserGroup="user_removed_from_user_group",e.DomainRequested="domain_requested",e.DomainValidated="domain_validated",e.SensitiveLogsEnabled="collect_sensitive_data_audit_logs_enabled",e.SensitiveLogsDisabled="collect_sensitive_data_audit_logs_disabled",e.SsoIdpMetadataSet="sso_idp_metadata_set",e.SsoServiceProviderUrlSet="sso_service_provider_url_set",e.SsoEnabled="sso_enabled",e.SsoDisabled="sso_disabled",e.NitroSsoDomainProvisioned="nitro_sso_domain_provisioned",e.NitroSsoDomainRemoved="nitro_sso_domain_removed",e.NitroSsoDomainVerified="nitro_sso_domain_verified",e.NitroSsoSetupStarted="nitro_sso_setup_started",e.TeamNameChanged="team_name_changed",e.NewBillingPeriodCreated="new_billing_period_created",e.SeatsAdded="seats_added",e.ContactEmailChanged="contact_email_changed",e.MasterPasswordMobileResetEnabled="master_password_mobile_reset_enabled",e.MasterPasswordMobileResetDisabled="master_password_mobile_reset_disabled",e.MasterPasswordMobileReset="master_password_mobile_reset",e.MasterPasswordChanged="master_password_changed",e.MpToViewPasswordsEnabled="mp_to_view_passwords_enabled",e.MpToViewPasswordsDisabled="mp_to_view_passwords_disabled",e.TwoFactorAuthenticationLoginMethodAdded="two_factor_authentication_login_method_added",e.TwoFactorAuthenticationLoginMethodRemoved="two_factor_authentication_login_method_removed",e.BiometricSignInDisabled="biometric_sign_in_disabled",e.DWMEmailAdded="dwm_email_added",e.DWMEmailRemoved="dwm_email_removed",e.DWMAlertReceived="dwm_alert_received",e.UserDeviceAdded="user_device_added",e.UserDeviceRemoved="user_device_removed",e.UserDeviceLogin="user_device_login",e.MasterPasswordReset="master_password_reset",e.RequestedAccountRecovery="requested_account_recovery",e.CompletedAccountRecovery="completed_account_recovery",e.UserSharedCredentialWithGroup="user_shared_credential_with_group",e.UserSharedCredentialWithEmail="user_shared_credential_with_email",e.UserSharedCredentialWithExternal="user_shared_credential_with_external",e.UserSharedSecureNoteWithGroup="user_shared_secure_note_with_group",e.UserSharedSecureNoteWithEmail="user_shared_secure_note_with_email",e.UserSharedSecureNoteWithExternal="user_shared_secure_note_with_external",e.UserRevokedSharedCredentialGroup="user_revoked_shared_credential_group",e.UserRevokedSharedCredentialEmail="user_revoked_shared_credential_email",e.UserRevokedSharedCredentialExternal="user_revoked_shared_credential_external",e.UserRevokedSharedSecureNoteGroup="user_revoked_shared_secure_note_group",e.UserRevokedSharedSecureNoteEmail="user_revoked_shared_secure_note_email",e.UserRevokedSharedSecureNoteExternal="user_revoked_shared_secure_note_external",e.UserAcceptedSharingInviteSecureNote="user_accepted_sharing_invite_secure_note",e.UserRejectedSharingInviteSecureNote="user_rejected_sharing_invite_secure_note",e.UserAcceptedSharingInviteCredential="user_accepted_sharing_invite_credential",e.UserRejectedSharingInviteCredential="user_rejected_sharing_invite_credential",e.UserCreatedCredential="user_created_credential",e.UserModifiedCredential="user_modified_credential",e.UserDeletedCredential="user_deleted_credential",e.UserImportedCredentials="user_imported_credentials",e.UserCreatedSecureNote="user_created_secure_note",e.UserModifiedSecureNote="user_modified_secure_note",e.UserDeletedSecureNote="user_deleted_secure_note"}(n||(n={})),function(e){e.Account="account",e.Authentication="authentication",e.DarkWebMonitoring="dark_web_monitoring",e.Groups="groups",e.ImportExport="import_export",e.TeamSettings="team_settings",e.TeamSettingsActiveDirectory="team_settings_activedirectory",e.TeamSettingsPolicies="team_settings_policies",e.TeamSettingsSAMLProvisioning="team_settings_samlprovisioning",e.TeamSettingsSCIM="team_settings_scim",e.TeamSettingsSSO="team_settings_sso",e.Sharing="sharing",e.UserSettings="user_settings",e.UserSettingsAccountRecovery="user_settings_accountrecovery",e.Users="users",e.VaultIDs="vault_ids",e.VaultPasswords="vault_passwords",e.VaultPayments="vault_payments",e.VaultPersonalInfo="vault_personalinfo",e.VaultSecureNotes="vault_securenotes"}(o||(o={}))},86392:(e,t,r)=>{"use strict";r.r(t),r.d(t,{CollectionsQuery:()=>M.I,Country:()=>n,CreateCollectionCommand:()=>P.e,CreateVaultItemCommand:()=>i._,CreatedEvent:()=>u.J,DeleteCollectionCommand:()=>O.T,DeleteVaultItemsCommand:()=>a.c,DeletedEvent:()=>d.s,DomainIconDetailsMapSchema:()=>y.x,DomainIconDetailsQuery:()=>p.s,DomainIconDetailsSchema:()=>y.N,EmailType:()=>h,EmitTemporaryVaultItemEventCommand:()=>c.c,EventType:()=>c.t,FilterOperators:()=>m.l,GetVaultNotificationsStatusQuery:()=>C.M,IdentityTitle:()=>E.t,MigrateCategoriesCommand:()=>R._,NoteColors:()=>_.L,OperationType:()=>N.C,PaymentCardColorType:()=>v.X,PhoneType:()=>A.z,SetVaultNotificationsStatusCommand:()=>w.x,SortDirection:()=>g.S,TempCredentialPreferencesQuery:()=>S.M,UpdateCollectionCommand:()=>N.s,UpdateVaultItemCommand:()=>s.K,UpdatedEvent:()=>l.V,VaultItemType:()=>T.U,VaultItemTypeToResultDictionary:()=>I,VaultItemsQuery:()=>f.W,VaultOrganizationClient:()=>L.C,VaultSearchQuery:()=>k.W,vaultItemsCrudApi:()=>o.L,vaultNotificationsApi:()=>b.e,vaultOrganizationApi:()=>D.v,vaultSearchApi:()=>U.R});var n,o=r(48430),i=r(273),a=r(31154),s=r(54547),c=r(47412),u=r(3137),d=r(49135),l=r(72989),p=r(55713),m=r(9531),g=r(24652),f=r(96342),S=r(11907);!function(e){e.NO_TYPE="NO_TYPE",e.UNIVERSAL="UNIVERSAL",e.AD="AD",e.AE="AE",e.AF="AF",e.AG="AG",e.AI="AI",e.AL="AL",e.AM="AM",e.AO="AO",e.AQ="AQ",e.AR="AR",e.AS="AS",e.AT="AT",e.AU="AU",e.AW="AW",e.AX="AX",e.AZ="AZ",e.BA="BA",e.BB="BB",e.BD="BD",e.BE="BE",e.BF="BF",e.BG="BG",e.BH="BH",e.BI="BI",e.BJ="BJ",e.BL="BL",e.BM="BM",e.BN="BN",e.BO="BO",e.BR="BR",e.BS="BS",e.BT="BT",e.BV="BV",e.BW="BW",e.BY="BY",e.BZ="BZ",e.CA="CA",e.CC="CC",e.CD="CD",e.CF="CF",e.CG="CG",e.CH="CH",e.CI="CI",e.CK="CK",e.CL="CL",e.CM="CM",e.CN="CN",e.CO="CO",e.CR="CR",e.CU="CU",e.CV="CV",e.CX="CX",e.CY="CY",e.CZ="CZ",e.DE="DE",e.DJ="DJ",e.DK="DK",e.DM="DM",e.DO="DO",e.DZ="DZ",e.EC="EC",e.EE="EE",e.EG="EG",e.EH="EH",e.ER="ER",e.ES="ES",e.ET="ET",e.FI="FI",e.FJ="FJ",e.FK="FK",e.FM="FM",e.FO="FO",e.FR="FR",e.GA="GA",e.GB="GB",e.GD="GD",e.GE="GE",e.GF="GF",e.GG="GG",e.GH="GH",e.GI="GI",e.GL="GL",e.GM="GM",e.GN="GN",e.GP="GP",e.GQ="GQ",e.GR="GR",e.GS="GS",e.GT="GT",e.GU="GU",e.GW="GW",e.GY="GY",e.HK="HK",e.HM="HM",e.HN="HN",e.HR="HR",e.HT="HT",e.HU="HU",e.ID="ID",e.IE="IE",e.IL="IL",e.IM="IM",e.IN="IN",e.IO="IO",e.IQ="IQ",e.IR="IR",e.IS="IS",e.IT="IT",e.JE="JE",e.JM="JM",e.JO="JO",e.JP="JP",e.KE="KE",e.KG="KG",e.KH="KH",e.KI="KI",e.KM="KM",e.KN="KN",e.KP="KP",e.KR="KR",e.KW="KW",e.KY="KY",e.KZ="KZ",e.LA="LA",e.LB="LB",e.LC="LC",e.LI="LI",e.LK="LK",e.LR="LR",e.LS="LS",e.LT="LT",e.LU="LU",e.LV="LV",e.LY="LY",e.MA="MA",e.MC="MC",e.MD="MD",e.ME="ME",e.MF="MF",e.MG="MG",e.MH="MH",e.MK="MK",e.ML="ML",e.MM="MM",e.MN="MN",e.MO="MO",e.MP="MP",e.MQ="MQ",e.MR="MR",e.MS="MS",e.MT="MT",e.MU="MU",e.MV="MV",e.MW="MW",e.MX="MX",e.MY="MY",e.MZ="MZ",e.NA="NA",e.NC="NC",e.NE="NE",e.NF="NF",e.NG="NG",e.NI="NI",e.NL="NL",e.NO="NO",e.NP="NP",e.NR="NR",e.NU="NU",e.NZ="NZ",e.OM="OM",e.PA="PA",e.PE="PE",e.PF="PF",e.PG="PG",e.PH="PH",e.PK="PK",e.PL="PL",e.PM="PM",e.PN="PN",e.PR="PR",e.PS="PS",e.PT="PT",e.PW="PW",e.PY="PY",e.QA="QA",e.RE="RE",e.RO="RO",e.RS="RS",e.RU="RU",e.RW="RW",e.SA="SA",e.SB="SB",e.SC="SC",e.SD="SD",e.SE="SE",e.SG="SG",e.SH="SH",e.SI="SI",e.SJ="SJ",e.SK="SK",e.SL="SL",e.SM="SM",e.SN="SN",e.SO="SO",e.SR="SR",e.ST="ST",e.SV="SV",e.SY="SY",e.SZ="SZ",e.TC="TC",e.TD="TD",e.TF="TF",e.TG="TG",e.TH="TH",e.TJ="TJ",e.TK="TK",e.TL="TL",e.TM="TM",e.TN="TN",e.TO="TO",e.TR="TR",e.TT="TT",e.TV="TV",e.TW="TW",e.TZ="TZ",e.UA="UA",e.UG="UG",e.UM="UM",e.US="US",e.UY="UY",e.UZ="UZ",e.VA="VA",e.VC="VC",e.VE="VE",e.VG="VG",e.VI="VI",e.VN="VN",e.VU="VU",e.WF="WF",e.WS="WS",e.XK="XK",e.YE="YE",e.YT="YT",e.ZA="ZA",e.ZM="ZM",e.ZW="ZW"}(n||(n={}));var h,y=r(19074),v=r(45146);!function(e){e.Perso="PERSO",e.Pro="PRO",e.NoType="NO_TYPE"}(h||(h={}));var E=r(11329),A=r(17058),_=r(7149),T=r(82706);const I={[T.U.Address]:"addressesResult",[T.U.BankAccount]:"bankAccountsResult",[T.U.Company]:"companiesResult",[T.U.Credential]:"credentialsResult",[T.U.DriversLicense]:"driversLicensesResult",[T.U.Email]:"emailsResult",[T.U.FiscalId]:"fiscalIdsResult",[T.U.IdCard]:"idCardsResult",[T.U.Identity]:"identitiesResult",[T.U.Passkey]:"passkeysResult",[T.U.Passport]:"passportsResult",[T.U.PaymentCard]:"paymentCardsResult",[T.U.Phone]:"phonesResult",[T.U.SecureNote]:"secureNotesResult",[T.U.SocialSecurityId]:"socialSecurityIdsResult",[T.U.Website]:"websitesResult"};var b=r(22499),w=r(12338),C=r(42160),D=r(99074),O=r(25041),P=r(533),N=r(96862),R=r(65378),M=r(6519),L=r(87969),U=r(73883),k=r(88994)},91854:(e,t,r)=>{"use strict";r.r(t),r.d(t,{AcknowledgedChannel:()=>N.N,AllowedToFail:()=>ae.J,AppLifeCycle:()=>a.d,AppLogger:()=>o.V,AppTimers:()=>s.O,BadStatus:()=>A.R,BaseEventEmitter:()=>V.f,ChannelMessageBroker:()=>D.U,ChannelState:()=>O.D,CommandHandler:()=>L.W,CommandRefresherFactory:()=>F.u1,ContextLessCqrsClient:()=>K.m,ContextlessBaseEventEmitter:()=>V.C,CqrsBroker:()=>B.d,CqrsClient:()=>K.w,CqrsCommandRefresher:()=>F.Tx,CronLowLevelSource:()=>Ee.R_,DefaultEncryptionCodecForDeviceData:()=>ne.h,DefaultEncryptionCodecForUserData:()=>ne.s,EventHandler:()=>k.b,ExceptionCriticality:()=>I.w,ExceptionLogger:()=>w.v,ExceptionLoggingSink:()=>b.q,FetchFailedError:()=>A.a,FrameworkInit:()=>l.ar,FrameworkRequestContextValues:()=>W.l,Global:()=>l.xB,HttpClient:()=>_.e,HttpHeaders:()=>S.W,HttpModule:()=>T.X,HttpParams:()=>h.L,HttpRequest:()=>y.a,HttpResponse:()=>v.Z,HttpStatusCode:()=>E.W,Injectable:()=>l.GS,JsonApplicationResourceFetcher:()=>Ae.X,JsonApplicationResourceLoader:()=>_e.K,KeyValueStorageFactory:()=>re.u,KeyValueStorageInfrastructure:()=>te.QI,ManualTriggeredTimers:()=>s.r,MemoryChannel:()=>O.q,MemoryKeyValueStorageInfrastructure:()=>oe.s,MemoryStoreInfrastructureFactory:()=>ie.N,MockJsonApplicationResourceFetcher:()=>Ae.W,Module:()=>d.Y,NoDynamicChannels:()=>P.y,NodeConfiguration:()=>M.$,NodeEventBroker:()=>G.a,NodeModulesIntrospection:()=>p.Q1,NodeToModuleEventBroker:()=>$,NullCronTaskHandler:()=>Ee.ql,NullLogger:()=>o.W,NullStorage:()=>te.hL,ParameterProviderType:()=>c.j,QueryHandler:()=>U.e,RequestContext:()=>W.f,RequestContextModule:()=>ee.q,SingleNodeAppBuilder:()=>i.u,Store:()=>ge.y,StoreCapacity:()=>le.Y,StoreFlusher:()=>me.X,StoreInfrastructureFactory:()=>ie.G,TaskTrackingModule:()=>C.c,TimerBasedCronSource:()=>Ee._C,createApplicationClient:()=>q,createClientFactory:()=>z,createCqrsClient:()=>j.c,createCqrsClients:()=>j.R,createNullAllowedToFail:()=>ae.f,createSingleChannelListener:()=>P.v,defineApplication:()=>i.t,defineBatchExecutor:()=>ve,defineStore:()=>de.Q,deviceScopedSingletonProvider:()=>f.H,getQueryValue:()=>J,getStoresProviders:()=>pe.N,isExceptionLogEntry:()=>I.h,isSendMessageRequest:()=>R.F,isVersionedData:()=>te.Ot,mockStore:()=>ue,provideClass:()=>u.$,provideValue:()=>u.z,refresherCreationToken:()=>F.b2,scopedSingleton:()=>g.B,sendMessageRequest:()=>R.k,startApplicationNode:()=>n.u,startSingleApplicationNode:()=>n.W,useEventsOfModule:()=>d.g,userScopedSingletonProvider:()=>m.M});var n=r(93417),o=r(26457),i=r(96259),a=r(43866),s=r(21904),c=r(17321),u=r(31638),d=r(99634),l=r(57924),p=r(22838),m=r(97956),g=r(63411),f=r(38679),S=r(4607),h=r(69912),y=r(4043),v=r(12964),E=r(25994),A=r(73155),_=r(73774),T=r(25504),I=r(43004),b=r(63364),w=r(37920),C=r(7876),D=r(35962),O=r(15572),P=r(54452),N=r(58649),R=r(45244),M=r(16855),L=r(63663),U=r(20754),k=r(68307),F=r(11053),B=r(42949),G=r(96917),x=r(28489);class ${constructor(e){this.publishEvent=(e,t,r,n)=>this.broker.publishEvent(e,t,r,n),this.broker=new G.a(e);const t=e.getModuleNames().reduce(((t,r)=>({...t,[r]:Object.keys(e.appDefinition[r].api.events).reduce(((e,t)=>(e[t]=[],e)),(0,x.Ay)({}))})),(0,x.Ay)({}));this.localSubscribersMap=Object.keys(e.subscriptions).map((e=>e)).reduce(((t,r)=>{const n=e.subscriptions[r];return Object.keys(n).map((e=>e)).forEach((e=>{const o=n[e]??[],i=t[e];o.forEach((e=>{i[e].push(r)}))})),t}),t)}connect(e){const{localSubscribersMap:t,broker:r}=this;return r.connect({onLocalEvent:async(r,n,o,i,a,s)=>{const c=t[r][o];await Promise.all(c.map((async t=>{await e.onEvent(r,t,o,i,a,s)})))}})}}var j=r(40945),K=r(94189),V=r(81459);function H(e){const t=e=>({build:()=>e,withMockedCommand:(r,n)=>(e.commands[r]=n,t(e)),withMockedQuery:(r,n)=>(e.queries[r]=n,t(e))}),r={commands:{},queries:{}};for(const t of Object.keys(e.commands))r.commands[t]=jest.fn((()=>{throw new Error(`command ${t} of module ${e.name} is called but not mocked`)}));for(const t of Object.keys(e.queries))r.queries[t]=jest.fn((()=>{throw new Error(`query ${t} of module ${e.name} is called but not mocked`)}));return t(r)}var W=r(21869);const z=()=>{const e=(t,r)=>{const n=new M.$({appDefinition:t,channels:{},channelsListener:P.y,currentNode:"",subscriptions:{}}),o=new B.d(n);let i;const a=async()=>{if(i)return i;const e=r.build(),t=o.connect({onCommand:(t,r,n)=>{if(!(t in e))throw new Error(`${t} is not mocked`);return e[t].commands[r](n)},onQuery:(t,r,n)=>{if(!(t in e))throw new Error(`${t} is not mocked`);return e[t].queries[r](n)}});return i=await t.start(),i};return{buildClient:async e=>{const t=new K.w(o,n,e??new W.f);return await a(),t},buildContextlessClient:async()=>{const e=new K.m(n,o);return await a(),e},withMock:(n,o)=>{const i={...t,...(0,x.Ay)({[n.name]:{api:n,main:"",queryOnly:[]}})},a=r.withModule(n,o);return e(i,a)}}};return e({},function(){const e=new Map,t={withModule:(r,n)=>{const o=r.name;if(void 0===n){const n=H(r).build();return e.set(o,n),t}if("function"==typeof n){const i=H(r);return e.set(o,n(i).build()),t}return e.set(o,n),t},build:t=>{const r=t?Object.keys(t):[...e.keys()];return Array.from(r).reduce(((r,n)=>({...r,[n]:e.get(n)??H(t?t[n].api:{name:"",commands:{},events:{},queries:{}}).build()})),{})}};return t}())};function q({appDefinition:e,channels:t,channelsListener:r}){const n=new M.$({appDefinition:e,channels:t,channelsListener:r,currentNode:null,subscriptions:{}}),o=new B.d(n),i=()=>{throw new Error("Unexpected request received by detached application client")},a=o.connect({onCommand:i,onQuery:i}).start();return{client:(0,j.R)(e,o),stop:async()=>(await a).stop()}}var Y=r(58376),Z=r(40923),Q=r(60399),X=r(89618);async function J(e,t=1e4){if(!(r=e)||!(r instanceof Y.y||(0,Z.m)(r.lift)&&(0,Z.m)(r.subscribe)))throw new Error("Error in getQueryValue: the argument is not an observable");var r;try{return await(0,Q.z)(e.pipe((0,X.V)({first:t})))}catch(e){throw new Error("Error in getQueryValue: "+e)}}var ee=r(14463),te=r(91199),re=r(4603),ne=r(38144),oe=r(15524),ie=r(83081),ae=r(9671),se=r(10722);const ce=new ie.N;async function ue(e,t){const r=new e("mockedModuleName",e.Definition,ce,"user",(0,ae.f)(),te.hL,new se.E);return t&&await r.set(t),r}var de=r(95681),le=r(23347),pe=r(5711),me=r(71949),ge=r(49959),fe=r(64987);const Se=16,he=.5,ye=1.3;function ve(e){var t;const{chunkControl:{decrement:r=he,increment:n=ye,initialSize:o=Se}={decrement:he,increment:ye,initialSize:Se}}=e,i=new fe.WU;return(t=class{constructor(e,t){this.repository=e,this.processor=t}async dispatchBatch(e){await i.runExclusive((async()=>{const t=await this.pushItemsInQueue(e);for(;t.queue.length>0;)await this.processOneChunkFromQueue(t)}))}async pushItemsInQueue(t){const r=await this.repository.getBatchState(e.name),n=t.filter((e=>!r.queue.find((t=>t===e))));return n.length&&(r.queue.push(...n),await this.repository.setBatchState(e.name,r)),r}async processOneChunkFromQueue(t){const i=function(e){const{lastStartedChunkFirstId:t,lastStartedChunkSize:i=o}=e;if(!t)return o;const a=!e.queue.find((e=>e===t));return Math.max(1,a?Math.ceil(i*n):Math.floor(i*r))}(t),a=Math.min(i,t.queue.length);if(!a)throw new Error("Should have something to process");await this.repository.setBatchState(e.name,{...t,lastStartedChunkSize:a,lastStartedChunkFirstId:t.queue[0]});const s=t.queue.splice(0,a);await this.processor.processChunk(s),await this.repository.setBatchState(e.name,t)}}).Definition=e,t}var Ee=r(69594),Ae=r(75994),_e=r(67978)},77478:(e,t,r)=>{"use strict";r.r(t),r.d(t,{BrowserCronSource:()=>Le.u,BrowserPortConnector:()=>Qe,BrowserPortListener:()=>qe,BrowserPortListenerChannel:()=>et,BufferedEventStream:()=>s.j,ExtensionCronSource:()=>Ge,ExtensionLocalStorageInfrastructure:()=>Ne,HttpFetchBackend:()=>D.A,IndexDbKeyValueStorage:()=>Me.I,IndexDbStorage:()=>Re.u,JsonExtensionResourceFetcher:()=>a,JsonWebAppResourceFetcher:()=>n.W,PageToWorkerChannel:()=>$e.f,computeHash:()=>c.x,computeHashSynchronous:()=>c.O,cookieRemoveByDomain:()=>z,decryptAes256:()=>u.$,decryptAesEcb256:()=>m,decryptRsaOaep:()=>g.G,deriveKeyArgon2d:()=>f.f,deriveKeyPbkdf2:()=>S.x,disableBrowserNativeAutofill:()=>$,enablePrivacyService:()=>x,encryptAes256:()=>h.P,encryptRsaOaep:()=>y.b,generateKeyAes256:()=>v.o,generateKeyPairRsaOaep:()=>E.Y,getLanguage:()=>M,getRandomValues:()=>A.P,getShortcutValues:()=>ne,isMv3Environment:()=>xe,makeStoreInfrastructure:()=>Pe,signHmacSha:()=>_.n,signRsassaPkcs1:()=>T.f,storageLocalItemExists:()=>ie,unsafeComputeMd5Hash:()=>I.H,updateToolbarIcon:()=>H,verifyHmacSha:()=>b.o,verifyRsassaPkcs1:()=>C,webappClose:()=>fe,webappOpen:()=>me});var n=r(31939),o=r(75994),i=r(92204);class a extends o.X{async fetch(e){const t=(0,i.A)(e);return(await fetch(t)).json()}}var s=r(37298),c=r(64391),u=r(86381),d=r(89685),l=r(68376),p=r(69806);function m(e,t){const r=(0,d.v)(t),n=(0,l.L)(e);return(0,p.o)(CryptoJS.AES.decrypt(r,n,{mode:CryptoJS.mode.ECB}))}var g=r(39560),f=r(76254),S=r(80954),h=r(48264),y=r(64396),v=r(420),E=r(26857),A=r(39911),_=r(43838),T=r(39387),I=r(396),b=r(57487),w=r(83407);async function C(e,t,r,n){const o={name:w.x,hash:{name:n}},i=await self.crypto.subtle.importKey("spki",e,o,!1,["verify"]);return self.crypto.subtle.verify(o,i,t,r)}var D=r(47047);const O=new Set(["en","fr","es","ja","de","pt","it","ko","zh","nl","sv"]),P="en";function N(e){return e.substr(0,2)}function R(e){const t=N(e);return O.has(t)}function M(){const e=[navigator.language].concat(navigator.languages).find(R);return e?e.includes("-")?N(e):e:P}var L,U=r(839);!function(e){e.RuntimeError="runtimeError",e.SettingNotSupported="settingNotSupported"}(L||(L={}));const k={reason:L.SettingNotSupported};function F(e){return!("object"!=typeof e||!e)&&(!!("reason"in e)&&e.reason===L.RuntimeError)}const B={reason:L.SettingNotSupported},G=" ";async function x(e,t){try{const{levelOfControl:t}=await function(e){return new Promise(((t,r)=>{(0,U.qX)(["privacy"])&&(0,U.Ez)(`privacy.services.${e}.get`)?chrome.privacy.services[e].get({},(e=>{if(chrome.runtime.lastError){const e=chrome.runtime.lastError.message??"Unknown chrome.runtime.lastError",t={reason:L.RuntimeError,runtimeError:new Error(e)};r(t)}else t(e)})):r(k)}))}(e);if("controllable_by_this_extension"!==t&&"controlled_by_this_extension"!==t){const r=[`Impossible to change browser setting: ${e}.`,`Extension prevented from changing: ${t}`].join(G);throw new Error(r)}}catch(t){if(function(e){return!("object"!=typeof e||!e||!("reason"in e)||e.reason!==L.SettingNotSupported)}(t))throw new Error(`Browser setting not supported: ${e}`);if(F(t))throw t.runtimeError;throw t}try{await function(e,t){return new Promise(((r,n)=>{(0,U.qX)(["privacy"])&&(0,U.Ez)(`privacy.services.${e}.set`)?chrome.privacy.services[e].set({value:t},(()=>{if(chrome.runtime.lastError){const e=chrome.runtime.lastError.message??"Unknown chrome.runtime.lastError",t={reason:L.RuntimeError,runtimeError:new Error(e)};n(t)}else r()})):n(B)}))}(e,t)}catch(e){throw F(e)?e.runtimeError:e}}async function $(){const e=["autofillAddressEnabled","autofillCreditCardEnabled","passwordSavingEnabled"].map((e=>x(e,!1)));await Promise.all(e)}var j=r(84318);const K={nightly:"icon_nightly_auth",mv2:"icon_auth",mv3:"icon_mv3_auth"},V="icon_not_auth";async function H({isUserAuthenticated:e}){const t=`icons/action/${e?function(){const e=(0,j.W)();return e.name.includes("Nightly")?K.nightly:e.name.includes("Beta")||3===e.manifest_version?K.mv3:K.mv2}():V}`,r={16:`${t}.png`,32:`${t}@2x.png`};await function(e,t){return new Promise(((t,r)=>{(0,U.Ez)("action.setIcon")||(0,U.Ez)("browserAction.setIcon")?(chrome.action?.setIcon??chrome.browserAction.setIcon)({path:e,tabId:undefined},(()=>{if(chrome.runtime.lastError){const e=chrome.runtime.lastError.message??"Unknown chrome.runtime.lastError",t=new Error(`action/setIcon: ${e}`);r(t)}else t()})):r(new Error("No action.setIcon support"))}))}(r)}function W(e){return`${"http"+(e.secure?"s":"")}://${e.domain.startsWith(".")?e.domain.substring(1):e.domain}${e.path}`}async function z(e){const t=await function(e={}){return new Promise(((t,r)=>{(0,U.qX)(["cookies"])?(0,U.Ez)("cookies.getAll")?chrome.cookies.getAll(e,(e=>{if(chrome.runtime.lastError){const e=chrome.runtime.lastError.message??"Unknown chrome.runtime.lastError",t=new Error(`cookies/getAll: ${e}`);r(t)}else t(e)})):r(new Error("No cookies.getAll support")):r(new Error("No cookies.getAll support, permission is missing"))}))}({domain:e});return Promise.all(t.map((e=>{return t={url:W(e),name:e.name},new Promise(((e,r)=>{(0,U.qX)(["cookies"])?(0,U.Ez)("cookies.remove")?chrome.cookies.remove(t,(t=>{if(chrome.runtime.lastError){const e=chrome.runtime.lastError.message??"Unknown chrome.runtime.lastError",t=new Error(`cookies/remove: ${e}`);r(t)}else e(t)})):r(new Error("No cookies.remove support")):r(new Error("No cookies.remove support, permission is missing"))}));var t})))}var q=r(57323);const Y=/^_execute(_browser){0,1}_action$/,Z="+";var Q;function X(e){return Y.test(e.name??"")}function J(e){const t=e.toUpperCase();switch(t){case"⌃":case"CTRL":return q.os.isMacOS()?Q.Command:Q.Ctrl;case"SHIFT":case"⇧":return Q.Shift;case"COMMAND":case"⌘":return Q.Command;case"MACCTRL":return Q.MacCtrl;default:return t}}function ee(e){const t=Object.values(Q),r=t.indexOf(e);return-1===r?t.length:r}function te(e,t){return ee(e)-ee(t)}function re(e){switch(e){case Q.Ctrl:case Q.MacCtrl:return"Ctrl";case Q.Shift:return"⇧";case Q.Command:return"⌘";default:return e}}async function ne(){const e=await new Promise(((e,t)=>{(0,U.Ez)("commands.getAll")?chrome.commands.getAll((r=>{if(chrome.runtime.lastError){const e=chrome.runtime.lastError.message??"Unknown chrome.runtime.lastError",r=new Error(`commands/getAll: ${e}`);t(r)}else e(r)})):t(new Error("No commands.getAll support"))})),t=e.find(X)?.shortcut;if(!t)return;const r=function(e){return e.split(e.includes(Z)?Z:"")}(t);return r.map(J).sort(te).map(re)}function oe(e){return new Promise(((t,r)=>{(0,U.qX)(["storage"])?(0,U.Ez)("storage.local.get")?chrome.storage.local.get(e,(e=>{if(chrome.runtime.lastError){const e=chrome.runtime.lastError.message??"Unknown chrome.runtime.lastError",t=new Error(`storage/local/get: ${e}`);r(t)}else t(e)})):r(new Error("No storage.local.get support")):r(new Error("No storage.local.get support, permission is missing"))}))}async function ie(e){if(chrome.storage?.local.getBytesInUse)return await(t=e,new Promise(((e,r)=>{(0,U.qX)(["storage"])?(0,U.Ez)("storage.local.getBytesInUse")?chrome.storage.local.getBytesInUse(t,(t=>{if(chrome.runtime.lastError){const e=chrome.runtime.lastError.message??"Unknown chrome.runtime.lastError",t=new Error(`storage/local/getBytesInUse: ${e}`);r(t)}else e(t)})):r(new Error("No storage.local.getBytesInUse support")):r(new Error("No storage.local.getBytesInUse support, permission is missing"))})))>0;var t;const r=await oe(e),n=void 0===r[e],o=null===r[e];return!n&&!o}!function(e){e.Command="Command",e.Ctrl="Ctrl",e.MacCtrl="MacCtrl",e.Shift="Shift"}(Q||(Q={}));var ae=r(24715),se=r(72733),ce=r(31460),ue=r(61222);async function de(){const e=await(0,ue.I)({}),t=(0,i.A)("");return e.filter((e=>"string"==typeof e.url&&e.url.startsWith(t))).filter((e=>""!==e.url))}const le="index.html";function pe(){return`${(0,i.A)("")}${le}`}async function me({id:e,query:t,route:r}){const n=function({identifier:e,queryInfo:t,name:r}){const n=pe();if(!r)return n;const o=e?`#${r}/${e}`:`#${r}`,i=t?`?${function(e){return Object.keys(e).map((t=>`${t}=${e[t]}`)).join("&")}(t)}`:"";return encodeURI(`${n}${o}${i}`)}({identifier:e,queryInfo:t,name:r}),o=await de();o.length?await async function({path:e,tabs:t}){const r=await(0,se.T)(),n=function({existingTabs:e,focusedWindow:t}){const r=e.filter((e=>e.active)),n=r.find((e=>e.windowId===t.id)),o=r.pop(),i=e.pop();return n??o??i}({existingTabs:t,focusedWindow:r});if(!n)return;var o,i;if(n.windowId!==r.id&&(o=n.windowId,i={focused:!0},new Promise(((e,t)=>{(0,U.Ez)("windows.update")?chrome.windows.update(o,i,(r=>{if(chrome.runtime.lastError){const e=chrome.runtime.lastError.message??"Unknown chrome.runtime.lastError",r=new Error(`windows/update: ${e}`);t(r)}else e(r)})):t(new Error("No windows.update support"))}))),!n.id)return;const a={active:!0,...e===pe()?{}:{url:e}};await(0,ce.V)(n.id,a)}({path:n,tabs:o}):await async function(e){const t={url:e};await(0,ae.U)(t)}(n)}var ge=r(49259);async function fe(){const e=await de();if(!e.length)return;const t=chrome.tabs.TAB_ID_NONE,r=e.map((e=>e.id)).filter((e=>"number"==typeof e&&e!==t));await(0,ge.O)(r)}var Se=r(83081),he=r(58376),ye=r(7074),ve=r(24966),Ee=r(85390),Ae=r(15023),_e=r(87065);const Te=function(e){if(!(0,U.qX)(["storage"]))throw new Error("No storage.session.onChanged.addListener support, permission is missing");if(!(0,U.Ez)("storage.session.onChanged.addListener"))throw new Error("No storage.session.onChanged.addListener support");const t=t=>{if(chrome.runtime.lastError){const e=chrome.runtime.lastError.message??"Unknown chrome.runtime.lastError";throw new Error(`storage/session/onChanged: ${e}`)}return e(t)};return chrome.storage.session.onChanged.addListener(t),t},Ie=function(e){if(!(0,U.qX)(["storage"]))throw new Error("No storage.session.onChanged.removeListener support, permission is missing");if(!(0,U.Ez)("storage.session.onChanged.removeListener"))throw new Error("No storage.session.onChanged.removeListener support");chrome.storage.session.onChanged.removeListener(e)};function be(e){return new Promise(((t,r)=>{(0,U.qX)(["storage"])?(0,U.Ez)("storage.session.set")?chrome.storage.session.set(e,(()=>{if(chrome.runtime.lastError){const e=chrome.runtime.lastError.message??"Unknown chrome.runtime.lastError",t=new Error(`storage/session/set: ${e}`);r(t)}t()})):r(new Error("No storage.session.set support")):r(new Error("No storage.session.set support, permission is missing"))}))}function we(e){return JSON.parse(JSON.stringify(e))}class Ce{constructor(){this.events$=new he.y((e=>{const t=t=>{e.next(t)};return Te(t),()=>Ie(t)})).pipe((0,ye.B)())}}class De{constructor(e,t,r){this.stopped$=new ve.X(!1),this.key=t,this.typeGuard=r??(e=>!0);const n=new he.y((r=>{this.getState().then((e=>{r.next(e)}));const n=e.events$.subscribe((e=>{if(t in e){const{newValue:n}=e[t];return r.next(this.asDataWithTimestamp(n))}}));return()=>n.unsubscribe()}));this.state$=(0,Ee.a)({state:n,isStopped:this.stopped$}).pipe((0,Ae.o)((({isStopped:e})=>!e),!1),(0,_e.U)((({state:e})=>e)))}async update(e){return this.set(e(await this.getState()))}persist(){return Promise.resolve()}load(){return Promise.resolve()}set(e){return be(we({[this.key]:e}))}init(e){return be(we({[this.key]:e}))}clear(){return e=this.key,new Promise(((t,r)=>{(0,U.qX)(["storage"])?(0,U.Ez)("storage.session.remove")?chrome.storage.session.remove(e,(()=>{if(chrome.runtime.lastError){const e=chrome.runtime.lastError.message??"Unknown chrome.runtime.lastError",t=new Error(`storage/session/remove: ${e}`);r(t)}t()})):r(new Error("No storage.session.remove support")):r(new Error("No storage.session.remove support, permission is missing"))}));var e}stop(){this.stopped$.next(!0)}async getState(){var e;const t=(await(e=this.key,new Promise(((t,r)=>{(0,U.qX)(["storage"])?(0,U.Ez)("storage.session.get")?chrome.storage.session.get(e,(e=>{if(chrome.runtime.lastError){const e=chrome.runtime.lastError.message??"Unknown chrome.runtime.lastError",t=new Error(`storage/session/get: ${e}`);r(t)}t(e)})):r(new Error("No storage.session.get support")):r(new Error("No storage.session.get support, permission is missing"))}))))[this.key];return this.asDataWithTimestamp(t)}asDataWithTimestamp(e){return e&&"object"==typeof e&&"timestamp"in e&&"number"==typeof e.timestamp&&e.timestamp&&"data"in e&&this.typeGuard(e.data)?{timestamp:e.timestamp,data:e.data}:{timestamp:void 0}}}class Oe extends Se.G{constructor(){super(...arguments),this.source=new Ce}createUserScopedInfrastructure(e,t,r,n){const o=`graphene.${e}.${t}.${r}`;return new De(this.source,o,n)}createDeviceScopedInfrastructure(e,t,r){const n=`graphene.${e}.${t}`;return new De(this.source,n,r)}}function Pe(){return(0,U.Ez)("storage.session")&&(0,U.qX)(["storage"])&&3===(0,j.W)().manifest_version?new Oe:new Se.N}class Ne{async getAllKeys(){return Object.keys(await oe(null))}async get(e){const t=(await oe([e]))[e];if(t){if("string"!=typeof t)throw new Error(`[ChromeLocalStorage] - cannot read content of ${e} properly. Type is\n        ${typeof t} but should be 'string'`);return t}}async set(e,t){var r;await(r={[e]:t},new Promise(((e,t)=>{(0,U.qX)(["storage"])?(0,U.Ez)("storage.local.set")?chrome.storage.local.set(r,(()=>{if(chrome.runtime.lastError){const e=chrome.runtime.lastError.message??"Unknown chrome.runtime.lastError",r=new Error(`storage/local/set: ${e}`);t(r)}else e()})):t(new Error("No storage.local.set support")):t(new Error("No storage.local.set support, permission is missing"))})))}async remove(e){var t;await(t=[e],new Promise(((e,r)=>{(0,U.qX)(["storage"])?(0,U.Ez)("storage.local.remove")?chrome.storage.local.remove(t,(()=>{if(chrome.runtime.lastError){const e=chrome.runtime.lastError.message??"Unknown chrome.runtime.lastError",t=new Error(`storage/local/remove: ${e}`);r(t)}else e()})):r(new Error("No storage.local.remove support")):r(new Error("No storage.local.remove support, permission is missing"))})))}}var Re=r(12635),Me=r(89705),Le=r(45822),Ue=r(69594),ke=r(97280);const Fe="cron-source",Be=()=>new he.y((e=>{const t=t=>{t.name===Fe&&e.next()};return((e,t)=>{if(!(0,U.qX)(["alarms"]))throw new Error("No alarms.create support, permission is missing");if(!(0,U.Ez)("alarms.create"))throw new Error("No alarms.create support");chrome.alarms.create(e,{delayInMinutes:1,periodInMinutes:1})})(Fe),(e=>{if(!(0,U.qX)(["alarms"]))throw new Error("No alarms.onAlarm.addListener support, permission is missing");if(!(0,U.Ez)("alarms.onAlarm.addListener"))throw new Error("No alarms.onAlarm.addListener support");chrome.alarms.onAlarm.addListener(e);const t=chrome.runtime.lastError?.message;if(t)throw new Error("alarms/onAlarm error:"+t)})(t),()=>{(e=>{if(!(0,U.qX)(["alarms"]))throw new Error("No alarms.onAlarm.removeListener support, permission is missing");if(!(0,U.Ez)("alarms.onAlarm.removeListener"))throw new Error("No alarms.onAlarm.removeListener support");chrome.alarms.onAlarm.removeListener(e);const t=chrome.runtime.lastError?.message;if(t)throw new Error("alarms/onAlarm error:"+t)})(t)}}));class Ge extends Ue.R_{constructor(){super(...arguments),this.alarm$=((0,U.Ez)("alarms.clear")&&(0,U.qX)(["alarms"])?Be():new he.y((e=>{const t=self.setInterval((()=>{e.next()}),6e4);return()=>{self.clearInterval(t)}}))).pipe((0,ke.d)(1)),this.subscription=this.alarm$.subscribe()}stop(){this.subscription.unsubscribe()}}function xe(){return"undefined"!=typeof chrome&&void 0!==chrome.runtime&&void 0!==chrome.runtime.getManifest&&3===(0,j.W)().manifest_version}var $e=r(67720),je=r(69183),Ke=r(45244),Ve=r(15572),He=r(58649);const We=function(e){if(!(0,U.Ez)("runtime.onConnect.addListener"))throw new Error("No runtime.onConnect.addListener support");const t=t=>{if(chrome.runtime.lastError){const e=chrome.runtime.lastError.message??"Unknown chrome.runtime.lastError";throw new Error(`runtime/onConnect: ${e}`)}return e(t)};return chrome.runtime.onConnect.addListener(t),t},ze=function(e){if(!(0,U.Ez)("runtime.onConnect.removeListener"))throw new Error("No runtime.onConnect.removeListener support");chrome.runtime.onConnect.removeListener(e)};class qe{constructor(e){this.connectedChannels$=new ve.X({});const t=new he.y((t=>{const r={},n=n=>{const o=(0,je.Z)();if(n.name!==e)return;const i=new s.j({addListener:e=>n.onMessage.addListener(e),removeListener:e=>n.onMessage.removeListener(e)},(t=>(0,Ke.F)(t)&&t.channelName===e)),a=new Promise((e=>{const t=()=>{n.onDisconnect.removeListener(t),e(null)};n.onDisconnect.addListener(t)})),c=new ve.X(Ve.D.Connected);a.then((()=>{i.stop(),c.next(Ve.D.Disconnected),delete r[o],t.next(r)}));const u={messages$:i.events$.pipe((0,_e.U)((([e])=>e.message))),sendMessage:t=>(n.postMessage((0,Ke.k)({channelName:e,message:t})),Promise.resolve()),stop:()=>(n.disconnect(),Promise.resolve()),status$:c},d=new He.N(u);r[o]=d,t.next(r)};return We(n),()=>{ze(n)}}));this.subscription=t.subscribe((e=>this.connectedChannels$.next(e)))}stop(){this.subscription.unsubscribe()}}var Ye=r(6220),Ze=r(60399);class Qe{constructor(e){this.status$=new ve.X(Ve.D.Connected),this.port$=new he.y((t=>{let r;const n=this.status$;function o(){r?.onDisconnect.removeListener(o);const i=function(e){if(!(0,U.Ez)("runtime.connect"))throw new Error("No runtime.connect support");return chrome.runtime.connect(e)}({name:e});n.next(Ve.D.Disconnected),i.onDisconnect.addListener(o),t.next(i),n.next(Ve.D.Connected),r=i}return o(),()=>{r?.onDisconnect.removeListener(o),r?.disconnect()}})).pipe((0,ke.d)(1)),this.portSubscription=this.port$.subscribe(),this.messages$=this.port$.pipe((0,Ye.z)((t=>new he.y((r=>{const n=t=>{(0,Ke.F)(t)&&t.channelName===e&&r.next(t.message)};return t.onMessage.addListener(n),()=>{t.onMessage.removeListener(n)}})))))}async sendMessage(e){const t=await(0,Ze.z)(this.port$);t.postMessage((0,Ke.k)({channelName:t.name,message:e}))}stop(){return this.portSubscription.unsubscribe(),this.status$.next(Ve.D.Disconnected),Promise.resolve()}}var Xe=r(43978),Je=r(17350);class et{constructor(e){this.listener=new qe(e),this.channel$=this.listener.connectedChannels$.pipe((0,_e.U)((e=>{const t=Object.values(e);if(t.length)return t[0]})),(0,ke.d)(1)),this.receivedMessages$=this.channel$.pipe((0,Xe.w)((e=>e?e.receivedMessages$:Je.E))),this.channelState$=this.channel$.pipe((0,_e.U)((e=>e?Ve.D.Connected:Ve.D.Disconnected)))}async send(e){const t=await(0,Ze.z)(this.channel$);if(!t)throw new Error("Channel is not connected");await t.send(e)}stop(){this.listener.stop()}}},61475:(e,t,r)=>{"use strict";r.r(t),r.d(t,{FunctionalError:()=>n.Hu,assertUnreachable:()=>i.U,concatMapFailure:()=>c.Tc,concatMapSuccess:()=>c.Gx,concatMatchResult:()=>c.RW,createMatchable:()=>a.H6,failure:()=>s.Rn,getBrander:()=>u.zq,getFailure:()=>s.Yv,getSuccess:()=>s.db,hasProperty:()=>u.l$,isFailure:()=>s.hx,isFunctionalErrorOfType:()=>n.As,isMatchable:()=>a.cw,isResult:()=>s.AZ,isSuccess:()=>s.d6,mapFailure:()=>s.SN,mapFailureObservable:()=>c.DZ,mapResultObservable:()=>c.vg,mapSuccess:()=>s.ty,mapSuccessObservable:()=>c.Qn,mapSuccessResultObservable:()=>c.lk,match:()=>a.EQ,matchResultObservable:()=>c.nb,panic:()=>o.j,safeCast:()=>u.Ay,success:()=>s.Vp,switchMapFailure:()=>c.pr,switchMapSuccess:()=>c.CP,switchMatchResult:()=>c.bM,toFunctionalErrorCode:()=>n.BU});var n=r(96168),o=r(20195),i=r(95087),a=r(18533),s=r(87279),c=r(48844),u=r(28489)},21178:(e,t,r)=>{"use strict";r.r(t),r.d(t,{ParsedURL:()=>n.Y});var n=r(12562)},49267:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=15,o=30,i=19,a=256,s=a+1+29,c=2*s+1,u=256,d=16,l=17,p=18,m=16,g=-1,f=1,S=2,h=0,y=0,v=1,E=3,A=4,_=0,T=1,I=2,b=-2,w=-3,C=-5;function D(e){return O(e.map((([e,t])=>new Array(e).fill(t,0,e))))}function O(e){return e.reduce(((e,t)=>e.concat(Array.isArray(t)?O(t):t)),[])}const P=[0,1,2,3].concat(...D([[2,4],[2,5],[4,6],[4,7],[8,8],[8,9],[16,10],[16,11],[32,12],[32,13],[64,14],[64,15],[2,0],[1,16],[1,17],[2,18],[2,19],[4,20],[4,21],[8,22],[8,23],[16,24],[16,25],[32,26],[32,27],[64,28],[64,29]]));function N(){const e=this;function t(e,t){let r=0;do{r|=1&e,e>>>=1,r<<=1}while(--t>0);return r>>>1}e.build_tree=function(r){const o=e.dyn_tree,i=e.stat_desc.static_tree,a=e.stat_desc.elems;let s,u,d,l=-1;for(r.heap_len=0,r.heap_max=c,s=0;s<a;s++)0!==o[2*s]?(r.heap[++r.heap_len]=l=s,r.depth[s]=0):o[2*s+1]=0;for(;r.heap_len<2;)d=r.heap[++r.heap_len]=l<2?++l:0,o[2*d]=1,r.depth[d]=0,r.opt_len--,i&&(r.static_len-=i[2*d+1]);for(e.max_code=l,s=Math.floor(r.heap_len/2);s>=1;s--)r.pqdownheap(o,s);d=a;do{s=r.heap[1],r.heap[1]=r.heap[r.heap_len--],r.pqdownheap(o,1),u=r.heap[1],r.heap[--r.heap_max]=s,r.heap[--r.heap_max]=u,o[2*d]=o[2*s]+o[2*u],r.depth[d]=Math.max(r.depth[s],r.depth[u])+1,o[2*s+1]=o[2*u+1]=d,r.heap[1]=d++,r.pqdownheap(o,1)}while(r.heap_len>=2);r.heap[--r.heap_max]=r.heap[1],function(t){const r=e.dyn_tree,o=e.stat_desc.static_tree,i=e.stat_desc.extra_bits,a=e.stat_desc.extra_base,s=e.stat_desc.max_length;let u,d,l,p,m,g,f=0;for(p=0;p<=n;p++)t.bl_count[p]=0;for(r[2*t.heap[t.heap_max]+1]=0,u=t.heap_max+1;u<c;u++)d=t.heap[u],p=r[2*r[2*d+1]+1]+1,p>s&&(p=s,f++),r[2*d+1]=p,d>e.max_code||(t.bl_count[p]++,m=0,d>=a&&(m=i[d-a]),g=r[2*d],t.opt_len+=g*(p+m),o&&(t.static_len+=g*(o[2*d+1]+m)));if(0!==f){do{for(p=s-1;0===t.bl_count[p];)p--;t.bl_count[p]--,t.bl_count[p+1]+=2,t.bl_count[s]--,f-=2}while(f>0);for(p=s;0!==p;p--)for(d=t.bl_count[p];0!==d;)l=t.heap[--u],l>e.max_code||(r[2*l+1]!=p&&(t.opt_len+=(p-r[2*l+1])*r[2*l],r[2*l+1]=p),d--)}}(r),function(e,r,o){const i=[];let a,s,c,u=0;for(a=1;a<=n;a++)i[a]=u=u+o[a-1]<<1;for(s=0;s<=r;s++)c=e[2*s+1],0!==c&&(e[2*s]=t(i[c]++,c))}(o,e.max_code,r.bl_count)}}function R(e,t,r,n,o){const i=this;i.static_tree=e,i.extra_bits=t,i.extra_base=r,i.elems=n,i.max_length=o}N._length_code=[0,1,2,3,4,5,6,7].concat(...D([[2,8],[2,9],[2,10],[2,11],[4,12],[4,13],[4,14],[4,15],[8,16],[8,17],[8,18],[8,19],[16,20],[16,21],[16,22],[16,23],[32,24],[32,25],[32,26],[31,27],[1,28]])),N.base_length=[0,1,2,3,4,5,6,7,8,10,12,14,16,20,24,28,32,40,48,56,64,80,96,112,128,160,192,224,0],N.base_dist=[0,1,2,3,4,6,8,12,16,24,32,48,64,96,128,192,256,384,512,768,1024,1536,2048,3072,4096,6144,8192,12288,16384,24576],N.d_code=function(e){return e<256?P[e]:P[256+(e>>>7)]},N.extra_lbits=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],N.extra_dbits=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],N.extra_blbits=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],N.bl_order=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];const M=D([[144,8],[112,9],[24,7],[8,8]]);R.static_ltree=O([12,140,76,204,44,172,108,236,28,156,92,220,60,188,124,252,2,130,66,194,34,162,98,226,18,146,82,210,50,178,114,242,10,138,74,202,42,170,106,234,26,154,90,218,58,186,122,250,6,134,70,198,38,166,102,230,22,150,86,214,54,182,118,246,14,142,78,206,46,174,110,238,30,158,94,222,62,190,126,254,1,129,65,193,33,161,97,225,17,145,81,209,49,177,113,241,9,137,73,201,41,169,105,233,25,153,89,217,57,185,121,249,5,133,69,197,37,165,101,229,21,149,85,213,53,181,117,245,13,141,77,205,45,173,109,237,29,157,93,221,61,189,125,253,19,275,147,403,83,339,211,467,51,307,179,435,115,371,243,499,11,267,139,395,75,331,203,459,43,299,171,427,107,363,235,491,27,283,155,411,91,347,219,475,59,315,187,443,123,379,251,507,7,263,135,391,71,327,199,455,39,295,167,423,103,359,231,487,23,279,151,407,87,343,215,471,55,311,183,439,119,375,247,503,15,271,143,399,79,335,207,463,47,303,175,431,111,367,239,495,31,287,159,415,95,351,223,479,63,319,191,447,127,383,255,511,0,64,32,96,16,80,48,112,8,72,40,104,24,88,56,120,4,68,36,100,20,84,52,116,3,131,67,195,35,163,99,227].map(((e,t)=>[e,M[t]])));const L=D([[30,5]]);R.static_dtree=O([0,16,8,24,4,20,12,28,2,18,10,26,6,22,14,30,1,17,9,25,5,21,13,29,3,19,11,27,7,23].map(((e,t)=>[e,L[t]]))),R.static_l_desc=new R(R.static_ltree,N.extra_lbits,a+1,s,n),R.static_d_desc=new R(R.static_dtree,N.extra_dbits,0,o,n),R.static_bl_desc=new R(null,N.extra_blbits,0,i,7);const U=9,k=8;function F(e,t,r,n,o){const i=this;i.good_length=e,i.max_lazy=t,i.nice_length=r,i.max_chain=n,i.func=o}const B=0,G=1,x=2,$=[new F(0,0,0,0,B),new F(4,4,8,4,G),new F(4,5,16,8,G),new F(4,6,32,32,G),new F(4,4,16,16,x),new F(8,16,32,32,x),new F(8,16,128,128,x),new F(8,32,128,256,x),new F(32,128,258,1024,x),new F(32,258,258,4096,x)],j=["need dictionary","stream end","","","stream error","data error","","buffer error","",""],K=0,V=1,H=2,W=3,z=32,q=42,Y=113,Z=666,Q=8,X=0,J=1,ee=2,te=3,re=258,ne=re+te+1;function oe(e,t,r,n){const o=e[2*t],i=e[2*r];return o<i||o==i&&n[t]<=n[r]}function ie(){const e=this;let t,r,n,c,D,O,P,M,L,F,ie,ae,se,ce,ue,de,le,pe,me,ge,fe,Se,he,ye,ve,Ee,Ae,_e,Te,Ie,be,we,Ce;const De=new N,Oe=new N,Pe=new N;let Ne,Re,Me,Le,Ue,ke;function Fe(){let t;for(t=0;t<s;t++)be[2*t]=0;for(t=0;t<o;t++)we[2*t]=0;for(t=0;t<i;t++)Ce[2*t]=0;be[2*u]=1,e.opt_len=e.static_len=0,Re=Me=0}function Be(e,t){let r,n=-1,o=e[1],i=0,a=7,s=4;0===o&&(a=138,s=3),e[2*(t+1)+1]=65535;for(let c=0;c<=t;c++)r=o,o=e[2*(c+1)+1],++i<a&&r==o||(i<s?Ce[2*r]+=i:0!==r?(r!=n&&Ce[2*r]++,Ce[2*d]++):i<=10?Ce[2*l]++:Ce[2*p]++,i=0,n=r,0===o?(a=138,s=3):r==o?(a=6,s=3):(a=7,s=4))}function Ge(t){e.pending_buf[e.pending++]=t}function xe(e){Ge(255&e),Ge(e>>>8&255)}function $e(e,t){let r;const n=t;ke>m-n?(r=e,Ue|=r<<ke&65535,xe(Ue),Ue=r>>>m-ke,ke+=n-m):(Ue|=e<<ke&65535,ke+=n)}function je(e,t){const r=2*e;$e(65535&t[r],65535&t[r+1])}function Ke(e,t){let r,n,o=-1,i=e[1],a=0,s=7,c=4;for(0===i&&(s=138,c=3),r=0;r<=t;r++)if(n=i,i=e[2*(r+1)+1],!(++a<s&&n==i)){if(a<c)do{je(n,Ce)}while(0!=--a);else 0!==n?(n!=o&&(je(n,Ce),a--),je(d,Ce),$e(a-3,2)):a<=10?(je(l,Ce),$e(a-3,3)):(je(p,Ce),$e(a-11,7));a=0,o=n,0===i?(s=138,c=3):n==i?(s=6,c=3):(s=7,c=4)}}function Ve(){16==ke?(xe(Ue),Ue=0,ke=0):ke>=8&&(Ge(255&Ue),Ue>>>=8,ke-=8)}function He(t,r){let n,i,s;if(e.dist_buf[Re]=t,e.lc_buf[Re]=255&r,Re++,0===t?be[2*r]++:(Me++,t--,be[2*(N._length_code[r]+a+1)]++,we[2*N.d_code(t)]++),0==(8191&Re)&&Ae>2){for(n=8*Re,i=fe-le,s=0;s<o;s++)n+=we[2*s]*(5+N.extra_dbits[s]);if(n>>>=3,Me<Math.floor(Re/2)&&n<Math.floor(i/2))return!0}return Re==Ne-1}function We(t,r){let n,o,i,s,c=0;if(0!==Re)do{n=e.dist_buf[c],o=e.lc_buf[c],c++,0===n?je(o,t):(i=N._length_code[o],je(i+a+1,t),s=N.extra_lbits[i],0!==s&&(o-=N.base_length[i],$e(o,s)),n--,i=N.d_code(n),je(i,r),s=N.extra_dbits[i],0!==s&&(n-=N.base_dist[i],$e(n,s)))}while(c<Re);je(u,t),Le=t[2*u+1]}function ze(){ke>8?xe(Ue):ke>0&&Ge(255&Ue),Ue=0,ke=0}function qe(t,r,n){$e((X<<1)+(n?1:0),3),function(t,r,n){ze(),Le=8,xe(r),xe(~r),e.pending_buf.set(M.subarray(t,t+r),e.pending),e.pending+=r}(t,r)}function Ye(t,r,n){let o,a,s=0;Ae>0?(De.build_tree(e),Oe.build_tree(e),s=function(){let t;for(Be(be,De.max_code),Be(we,Oe.max_code),Pe.build_tree(e),t=i-1;t>=3&&0===Ce[2*N.bl_order[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t}(),o=e.opt_len+3+7>>>3,a=e.static_len+3+7>>>3,a<=o&&(o=a)):o=a=r+5,r+4<=o&&-1!=t?qe(t,r,n):a==o?($e((J<<1)+(n?1:0),3),We(R.static_ltree,R.static_dtree)):($e((ee<<1)+(n?1:0),3),function(e,t,r){let n;for($e(e-257,5),$e(t-1,5),$e(r-4,4),n=0;n<r;n++)$e(Ce[2*N.bl_order[n]+1],3);Ke(be,e-1),Ke(we,t-1)}(De.max_code+1,Oe.max_code+1,s+1),We(be,we)),Fe(),n&&ze()}function Ze(e){Ye(le>=0?le:-1,fe-le,e),le=fe,t.flush_pending()}function Qe(){let e,r,n,o;do{if(o=L-he-fe,0===o&&0===fe&&0===he)o=D;else if(-1==o)o--;else if(fe>=D+D-ne){M.set(M.subarray(D,D+D),0),Se-=D,fe-=D,le-=D,e=se,n=e;do{r=65535&ie[--n],ie[n]=r>=D?r-D:0}while(0!=--e);e=D,n=e;do{r=65535&F[--n],F[n]=r>=D?r-D:0}while(0!=--e);o+=D}if(0===t.avail_in)return;e=t.read_buf(M,fe+he,o),he+=e,he>=te&&(ae=255&M[fe],ae=(ae<<de^255&M[fe+1])&ue)}while(he<ne&&0!==t.avail_in)}function Xe(e){let t,r,n=ve,o=fe,i=ye;const a=fe>D-ne?fe-(D-ne):0;let s=Ie;const c=P,u=fe+re;let d=M[o+i-1],l=M[o+i];ye>=Te&&(n>>=2),s>he&&(s=he);do{if(t=e,M[t+i]==l&&M[t+i-1]==d&&M[t]==M[o]&&M[++t]==M[o+1]){o+=2,t++;do{}while(M[++o]==M[++t]&&M[++o]==M[++t]&&M[++o]==M[++t]&&M[++o]==M[++t]&&M[++o]==M[++t]&&M[++o]==M[++t]&&M[++o]==M[++t]&&M[++o]==M[++t]&&o<u);if(r=re-(u-o),o=u-re,r>i){if(Se=e,i=r,r>=s)break;d=M[o+i-1],l=M[o+i]}}}while((e=65535&F[e&c])>a&&0!=--n);return i<=he?i:he}function Je(t){return t.total_in=t.total_out=0,t.msg=null,e.pending=0,e.pending_out=0,r=Y,c=y,De.dyn_tree=be,De.stat_desc=R.static_l_desc,Oe.dyn_tree=we,Oe.stat_desc=R.static_d_desc,Pe.dyn_tree=Ce,Pe.stat_desc=R.static_bl_desc,Ue=0,ke=0,Le=8,Fe(),function(){L=2*D,ie[se-1]=0;for(let e=0;e<se-1;e++)ie[e]=0;Ee=$[Ae].max_lazy,Te=$[Ae].good_length,Ie=$[Ae].nice_length,ve=$[Ae].max_chain,fe=0,le=0,he=0,pe=ye=te-1,ge=0,ae=0}(),_}e.depth=[],e.bl_count=[],e.heap=[],be=[],we=[],Ce=[],e.pqdownheap=function(t,r){const n=e.heap,o=n[r];let i=r<<1;for(;i<=e.heap_len&&(i<e.heap_len&&oe(t,n[i+1],n[i],e.depth)&&i++,!oe(t,o,n[i],e.depth));)n[r]=n[i],r=i,i<<=1;n[r]=o},e.deflateInit=function(t,r,o,i,a,s){return i||(i=Q),a||(a=k),s||(s=h),t.msg=null,r==g&&(r=6),a<1||a>U||i!=Q||o<9||o>15||r<0||r>9||s<0||s>S?b:(t.dstate=e,O=o,D=1<<O,P=D-1,ce=a+7,se=1<<ce,ue=se-1,de=Math.floor((ce+te-1)/te),M=new Uint8Array(2*D),F=[],ie=[],Ne=1<<a+6,e.pending_buf=new Uint8Array(4*Ne),n=4*Ne,e.dist_buf=new Uint16Array(Ne),e.lc_buf=new Uint8Array(Ne),Ae=r,_e=s,Je(t))},e.deflateEnd=function(){return r!=q&&r!=Y&&r!=Z?b:(e.lc_buf=null,e.dist_buf=null,e.pending_buf=null,ie=null,F=null,M=null,e.dstate=null,r==Y?w:_)},e.deflateParams=function(e,t,r){let n=_;return t==g&&(t=6),t<0||t>9||r<0||r>S?b:($[Ae].func!=$[t].func&&0!==e.total_in&&(n=e.deflate(v)),Ae!=t&&(Ae=t,Ee=$[Ae].max_lazy,Te=$[Ae].good_length,Ie=$[Ae].nice_length,ve=$[Ae].max_chain),_e=r,n)},e.deflateSetDictionary=function(e,t,n){let o,i=n,a=0;if(!t||r!=q)return b;if(i<te)return _;for(i>D-ne&&(i=D-ne,a=n-i),M.set(t.subarray(a,a+i),0),fe=i,le=i,ae=255&M[0],ae=(ae<<de^255&M[1])&ue,o=0;o<=i-te;o++)ae=(ae<<de^255&M[o+(te-1)])&ue,F[o&P]=ie[ae],ie[ae]=o;return _},e.deflate=function(o,i){let a,s,d,l,p;if(i>A||i<0)return b;if(!o.next_out||!o.next_in&&0!==o.avail_in||r==Z&&i!=A)return o.msg=j[I-b],b;if(0===o.avail_out)return o.msg=j[I-C],C;var m;if(t=o,l=c,c=i,r==q&&(s=Q+(O-8<<4)<<8,d=(Ae-1&255)>>1,d>3&&(d=3),s|=d<<6,0!==fe&&(s|=z),s+=31-s%31,r=Y,Ge((m=s)>>8&255),Ge(255&m)),0!==e.pending){if(t.flush_pending(),0===t.avail_out)return c=-1,_}else if(0===t.avail_in&&i<=l&&i!=A)return t.msg=j[I-C],C;if(r==Z&&0!==t.avail_in)return o.msg=j[I-C],C;if(0!==t.avail_in||0!==he||i!=y&&r!=Z){switch(p=-1,$[Ae].func){case B:p=function(e){let r,o=65535;for(o>n-5&&(o=n-5);;){if(he<=1){if(Qe(),0===he&&e==y)return K;if(0===he)break}if(fe+=he,he=0,r=le+o,(0===fe||fe>=r)&&(he=fe-r,fe=r,Ze(!1),0===t.avail_out))return K;if(fe-le>=D-ne&&(Ze(!1),0===t.avail_out))return K}return Ze(e==A),0===t.avail_out?e==A?H:K:e==A?W:V}(i);break;case G:p=function(e){let r,n=0;for(;;){if(he<ne){if(Qe(),he<ne&&e==y)return K;if(0===he)break}if(he>=te&&(ae=(ae<<de^255&M[fe+(te-1)])&ue,n=65535&ie[ae],F[fe&P]=ie[ae],ie[ae]=fe),0!==n&&(fe-n&65535)<=D-ne&&_e!=S&&(pe=Xe(n)),pe>=te)if(r=He(fe-Se,pe-te),he-=pe,pe<=Ee&&he>=te){pe--;do{fe++,ae=(ae<<de^255&M[fe+(te-1)])&ue,n=65535&ie[ae],F[fe&P]=ie[ae],ie[ae]=fe}while(0!=--pe);fe++}else fe+=pe,pe=0,ae=255&M[fe],ae=(ae<<de^255&M[fe+1])&ue;else r=He(0,255&M[fe]),he--,fe++;if(r&&(Ze(!1),0===t.avail_out))return K}return Ze(e==A),0===t.avail_out?e==A?H:K:e==A?W:V}(i);break;case x:p=function(e){let r,n,o=0;for(;;){if(he<ne){if(Qe(),he<ne&&e==y)return K;if(0===he)break}if(he>=te&&(ae=(ae<<de^255&M[fe+(te-1)])&ue,o=65535&ie[ae],F[fe&P]=ie[ae],ie[ae]=fe),ye=pe,me=Se,pe=te-1,0!==o&&ye<Ee&&(fe-o&65535)<=D-ne&&(_e!=S&&(pe=Xe(o)),pe<=5&&(_e==f||pe==te&&fe-Se>4096)&&(pe=te-1)),ye>=te&&pe<=ye){n=fe+he-te,r=He(fe-1-me,ye-te),he-=ye-1,ye-=2;do{++fe<=n&&(ae=(ae<<de^255&M[fe+(te-1)])&ue,o=65535&ie[ae],F[fe&P]=ie[ae],ie[ae]=fe)}while(0!=--ye);if(ge=0,pe=te-1,fe++,r&&(Ze(!1),0===t.avail_out))return K}else if(0!==ge){if(r=He(0,255&M[fe-1]),r&&Ze(!1),fe++,he--,0===t.avail_out)return K}else ge=1,fe++,he--}return 0!==ge&&(r=He(0,255&M[fe-1]),ge=0),Ze(e==A),0===t.avail_out?e==A?H:K:e==A?W:V}(i)}if(p!=H&&p!=W||(r=Z),p==K||p==H)return 0===t.avail_out&&(c=-1),_;if(p==V){if(i==v)$e(J<<1,3),je(u,R.static_ltree),Ve(),1+Le+10-ke<9&&($e(J<<1,3),je(u,R.static_ltree),Ve()),Le=7;else if(qe(0,0,!1),i==E)for(a=0;a<se;a++)ie[a]=0;if(t.flush_pending(),0===t.avail_out)return c=-1,_}}return i!=A?_:T}}function ae(){const e=this;e.next_in_index=0,e.next_out_index=0,e.avail_in=0,e.total_in=0,e.avail_out=0,e.total_out=0}ae.prototype={deflateInit(e,t){const r=this;return r.dstate=new ie,t||(t=n),r.dstate.deflateInit(r,e,t)},deflate(e){const t=this;return t.dstate?t.dstate.deflate(t,e):b},deflateEnd(){const e=this;if(!e.dstate)return b;const t=e.dstate.deflateEnd();return e.dstate=null,t},deflateParams(e,t){const r=this;return r.dstate?r.dstate.deflateParams(r,e,t):b},deflateSetDictionary(e,t){const r=this;return r.dstate?r.dstate.deflateSetDictionary(r,e,t):b},read_buf(e,t,r){const n=this;let o=n.avail_in;return o>r&&(o=r),0===o?0:(n.avail_in-=o,e.set(n.next_in.subarray(n.next_in_index,n.next_in_index+o),t),n.next_in_index+=o,n.total_in+=o,o)},flush_pending(){const e=this;let t=e.dstate.pending;t>e.avail_out&&(t=e.avail_out),0!==t&&(e.next_out.set(e.dstate.pending_buf.subarray(e.dstate.pending_out,e.dstate.pending_out+t),e.next_out_index),e.next_out_index+=t,e.dstate.pending_out+=t,e.total_out+=t,e.avail_out-=t,e.dstate.pending-=t,0===e.dstate.pending&&(e.dstate.pending_out=0))}};const se=0,ce=1,ue=2,de=-2,le=-3,pe=-4,me=-5,ge=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535],fe=1440,Se=4,he=[96,7,256,0,8,80,0,8,16,84,8,115,82,7,31,0,8,112,0,8,48,0,9,192,80,7,10,0,8,96,0,8,32,0,9,160,0,8,0,0,8,128,0,8,64,0,9,224,80,7,6,0,8,88,0,8,24,0,9,144,83,7,59,0,8,120,0,8,56,0,9,208,81,7,17,0,8,104,0,8,40,0,9,176,0,8,8,0,8,136,0,8,72,0,9,240,80,7,4,0,8,84,0,8,20,85,8,227,83,7,43,0,8,116,0,8,52,0,9,200,81,7,13,0,8,100,0,8,36,0,9,168,0,8,4,0,8,132,0,8,68,0,9,232,80,7,8,0,8,92,0,8,28,0,9,152,84,7,83,0,8,124,0,8,60,0,9,216,82,7,23,0,8,108,0,8,44,0,9,184,0,8,12,0,8,140,0,8,76,0,9,248,80,7,3,0,8,82,0,8,18,85,8,163,83,7,35,0,8,114,0,8,50,0,9,196,81,7,11,0,8,98,0,8,34,0,9,164,0,8,2,0,8,130,0,8,66,0,9,228,80,7,7,0,8,90,0,8,26,0,9,148,84,7,67,0,8,122,0,8,58,0,9,212,82,7,19,0,8,106,0,8,42,0,9,180,0,8,10,0,8,138,0,8,74,0,9,244,80,7,5,0,8,86,0,8,22,192,8,0,83,7,51,0,8,118,0,8,54,0,9,204,81,7,15,0,8,102,0,8,38,0,9,172,0,8,6,0,8,134,0,8,70,0,9,236,80,7,9,0,8,94,0,8,30,0,9,156,84,7,99,0,8,126,0,8,62,0,9,220,82,7,27,0,8,110,0,8,46,0,9,188,0,8,14,0,8,142,0,8,78,0,9,252,96,7,256,0,8,81,0,8,17,85,8,131,82,7,31,0,8,113,0,8,49,0,9,194,80,7,10,0,8,97,0,8,33,0,9,162,0,8,1,0,8,129,0,8,65,0,9,226,80,7,6,0,8,89,0,8,25,0,9,146,83,7,59,0,8,121,0,8,57,0,9,210,81,7,17,0,8,105,0,8,41,0,9,178,0,8,9,0,8,137,0,8,73,0,9,242,80,7,4,0,8,85,0,8,21,80,8,258,83,7,43,0,8,117,0,8,53,0,9,202,81,7,13,0,8,101,0,8,37,0,9,170,0,8,5,0,8,133,0,8,69,0,9,234,80,7,8,0,8,93,0,8,29,0,9,154,84,7,83,0,8,125,0,8,61,0,9,218,82,7,23,0,8,109,0,8,45,0,9,186,0,8,13,0,8,141,0,8,77,0,9,250,80,7,3,0,8,83,0,8,19,85,8,195,83,7,35,0,8,115,0,8,51,0,9,198,81,7,11,0,8,99,0,8,35,0,9,166,0,8,3,0,8,131,0,8,67,0,9,230,80,7,7,0,8,91,0,8,27,0,9,150,84,7,67,0,8,123,0,8,59,0,9,214,82,7,19,0,8,107,0,8,43,0,9,182,0,8,11,0,8,139,0,8,75,0,9,246,80,7,5,0,8,87,0,8,23,192,8,0,83,7,51,0,8,119,0,8,55,0,9,206,81,7,15,0,8,103,0,8,39,0,9,174,0,8,7,0,8,135,0,8,71,0,9,238,80,7,9,0,8,95,0,8,31,0,9,158,84,7,99,0,8,127,0,8,63,0,9,222,82,7,27,0,8,111,0,8,47,0,9,190,0,8,15,0,8,143,0,8,79,0,9,254,96,7,256,0,8,80,0,8,16,84,8,115,82,7,31,0,8,112,0,8,48,0,9,193,80,7,10,0,8,96,0,8,32,0,9,161,0,8,0,0,8,128,0,8,64,0,9,225,80,7,6,0,8,88,0,8,24,0,9,145,83,7,59,0,8,120,0,8,56,0,9,209,81,7,17,0,8,104,0,8,40,0,9,177,0,8,8,0,8,136,0,8,72,0,9,241,80,7,4,0,8,84,0,8,20,85,8,227,83,7,43,0,8,116,0,8,52,0,9,201,81,7,13,0,8,100,0,8,36,0,9,169,0,8,4,0,8,132,0,8,68,0,9,233,80,7,8,0,8,92,0,8,28,0,9,153,84,7,83,0,8,124,0,8,60,0,9,217,82,7,23,0,8,108,0,8,44,0,9,185,0,8,12,0,8,140,0,8,76,0,9,249,80,7,3,0,8,82,0,8,18,85,8,163,83,7,35,0,8,114,0,8,50,0,9,197,81,7,11,0,8,98,0,8,34,0,9,165,0,8,2,0,8,130,0,8,66,0,9,229,80,7,7,0,8,90,0,8,26,0,9,149,84,7,67,0,8,122,0,8,58,0,9,213,82,7,19,0,8,106,0,8,42,0,9,181,0,8,10,0,8,138,0,8,74,0,9,245,80,7,5,0,8,86,0,8,22,192,8,0,83,7,51,0,8,118,0,8,54,0,9,205,81,7,15,0,8,102,0,8,38,0,9,173,0,8,6,0,8,134,0,8,70,0,9,237,80,7,9,0,8,94,0,8,30,0,9,157,84,7,99,0,8,126,0,8,62,0,9,221,82,7,27,0,8,110,0,8,46,0,9,189,0,8,14,0,8,142,0,8,78,0,9,253,96,7,256,0,8,81,0,8,17,85,8,131,82,7,31,0,8,113,0,8,49,0,9,195,80,7,10,0,8,97,0,8,33,0,9,163,0,8,1,0,8,129,0,8,65,0,9,227,80,7,6,0,8,89,0,8,25,0,9,147,83,7,59,0,8,121,0,8,57,0,9,211,81,7,17,0,8,105,0,8,41,0,9,179,0,8,9,0,8,137,0,8,73,0,9,243,80,7,4,0,8,85,0,8,21,80,8,258,83,7,43,0,8,117,0,8,53,0,9,203,81,7,13,0,8,101,0,8,37,0,9,171,0,8,5,0,8,133,0,8,69,0,9,235,80,7,8,0,8,93,0,8,29,0,9,155,84,7,83,0,8,125,0,8,61,0,9,219,82,7,23,0,8,109,0,8,45,0,9,187,0,8,13,0,8,141,0,8,77,0,9,251,80,7,3,0,8,83,0,8,19,85,8,195,83,7,35,0,8,115,0,8,51,0,9,199,81,7,11,0,8,99,0,8,35,0,9,167,0,8,3,0,8,131,0,8,67,0,9,231,80,7,7,0,8,91,0,8,27,0,9,151,84,7,67,0,8,123,0,8,59,0,9,215,82,7,19,0,8,107,0,8,43,0,9,183,0,8,11,0,8,139,0,8,75,0,9,247,80,7,5,0,8,87,0,8,23,192,8,0,83,7,51,0,8,119,0,8,55,0,9,207,81,7,15,0,8,103,0,8,39,0,9,175,0,8,7,0,8,135,0,8,71,0,9,239,80,7,9,0,8,95,0,8,31,0,9,159,84,7,99,0,8,127,0,8,63,0,9,223,82,7,27,0,8,111,0,8,47,0,9,191,0,8,15,0,8,143,0,8,79,0,9,255],ye=[80,5,1,87,5,257,83,5,17,91,5,4097,81,5,5,89,5,1025,85,5,65,93,5,16385,80,5,3,88,5,513,84,5,33,92,5,8193,82,5,9,90,5,2049,86,5,129,192,5,24577,80,5,2,87,5,385,83,5,25,91,5,6145,81,5,7,89,5,1537,85,5,97,93,5,24577,80,5,4,88,5,769,84,5,49,92,5,12289,82,5,13,90,5,3073,86,5,193,192,5,24577],ve=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],Ee=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,112,112],Ae=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577],_e=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],Te=15;function Ie(){let e,t,r,n,o,i;function a(e,t,a,s,c,u,d,l,p,m,g){let f,S,h,y,v,E,A,_,T,I,b,w,C,D,O;I=0,v=a;do{r[e[t+I]]++,I++,v--}while(0!==v);if(r[0]==a)return d[0]=-1,l[0]=0,se;for(_=l[0],E=1;E<=Te&&0===r[E];E++);for(A=E,_<E&&(_=E),v=Te;0!==v&&0===r[v];v--);for(h=v,_>v&&(_=v),l[0]=_,D=1<<E;E<v;E++,D<<=1)if((D-=r[E])<0)return le;if((D-=r[v])<0)return le;for(r[v]+=D,i[1]=E=0,I=1,C=2;0!=--v;)i[C]=E+=r[I],C++,I++;v=0,I=0;do{0!==(E=e[t+I])&&(g[i[E]++]=v),I++}while(++v<a);for(a=i[h],i[0]=v=0,I=0,y=-1,w=-_,o[0]=0,b=0,O=0;A<=h;A++)for(f=r[A];0!=f--;){for(;A>w+_;){if(y++,w+=_,O=h-w,O=O>_?_:O,(S=1<<(E=A-w))>f+1&&(S-=f+1,C=A,E<O))for(;++E<O&&!((S<<=1)<=r[++C]);)S-=r[C];if(O=1<<E,m[0]+O>fe)return le;o[y]=b=m[0],m[0]+=O,0!==y?(i[y]=v,n[0]=E,n[1]=_,E=v>>>w-_,n[2]=b-o[y-1]-E,p.set(n,3*(o[y-1]+E))):d[0]=b}for(n[1]=A-w,I>=a?n[0]=192:g[I]<s?(n[0]=g[I]<256?0:96,n[2]=g[I++]):(n[0]=u[g[I]-s]+16+64,n[2]=c[g[I++]-s]),S=1<<A-w,E=v>>>w;E<O;E+=S)p.set(n,3*(b+E));for(E=1<<A-1;0!=(v&E);E>>>=1)v^=E;for(v^=E,T=(1<<w)-1;(v&T)!=i[y];)y--,w-=_,T=(1<<w)-1}return 0!==D&&1!=h?me:se}function s(a){let s;for(e||(e=[],t=[],r=new Int32Array(Te+1),n=[],o=new Int32Array(Te),i=new Int32Array(Te+1)),t.length<a&&(t=[]),s=0;s<a;s++)t[s]=0;for(s=0;s<Te+1;s++)r[s]=0;for(s=0;s<3;s++)n[s]=0;o.set(r.subarray(0,Te),0),i.set(r.subarray(0,Te+1),0)}this.inflate_trees_bits=function(r,n,o,i,c){let u;return s(19),e[0]=0,u=a(r,0,19,19,null,null,o,n,i,e,t),u==le?c.msg="oversubscribed dynamic bit lengths tree":u!=me&&0!==n[0]||(c.msg="incomplete dynamic bit lengths tree",u=le),u},this.inflate_trees_dynamic=function(r,n,o,i,c,u,d,l,p){let m;return s(288),e[0]=0,m=a(o,0,r,257,ve,Ee,u,i,l,e,t),m!=se||0===i[0]?(m==le?p.msg="oversubscribed literal/length tree":m!=pe&&(p.msg="incomplete literal/length tree",m=le),m):(s(288),m=a(o,r,n,0,Ae,_e,d,c,l,e,t),m!=se||0===c[0]&&r>257?(m==le?p.msg="oversubscribed distance tree":m==me?(p.msg="incomplete distance tree",m=le):m!=pe&&(p.msg="empty distance tree with lengths",m=le),m):se)}}Ie.inflate_trees_fixed=function(e,t,r,n){return e[0]=9,t[0]=5,r[0]=he,n[0]=ye,se};const be=0,we=1,Ce=2,De=3,Oe=4,Pe=5,Ne=6,Re=7,Me=8,Le=9;function Ue(){const e=this;let t,r,n,o,i=0,a=0,s=0,c=0,u=0,d=0,l=0,p=0,m=0,g=0;function f(e,t,r,n,o,i,a,s){let c,u,d,l,p,m,g,f,S,h,y,v,E,A,_,T;g=s.next_in_index,f=s.avail_in,p=a.bitb,m=a.bitk,S=a.write,h=S<a.read?a.read-S-1:a.end-S,y=ge[e],v=ge[t];do{for(;m<20;)f--,p|=(255&s.read_byte(g++))<<m,m+=8;if(c=p&y,u=r,d=n,T=3*(d+c),0!==(l=u[T]))for(;;){if(p>>=u[T+1],m-=u[T+1],0!=(16&l)){for(l&=15,E=u[T+2]+(p&ge[l]),p>>=l,m-=l;m<15;)f--,p|=(255&s.read_byte(g++))<<m,m+=8;for(c=p&v,u=o,d=i,T=3*(d+c),l=u[T];;){if(p>>=u[T+1],m-=u[T+1],0!=(16&l)){for(l&=15;m<l;)f--,p|=(255&s.read_byte(g++))<<m,m+=8;if(A=u[T+2]+(p&ge[l]),p>>=l,m-=l,h-=E,S>=A)_=S-A,S-_>0&&2>S-_?(a.win[S++]=a.win[_++],a.win[S++]=a.win[_++],E-=2):(a.win.set(a.win.subarray(_,_+2),S),S+=2,_+=2,E-=2);else{_=S-A;do{_+=a.end}while(_<0);if(l=a.end-_,E>l){if(E-=l,S-_>0&&l>S-_)do{a.win[S++]=a.win[_++]}while(0!=--l);else a.win.set(a.win.subarray(_,_+l),S),S+=l,_+=l,l=0;_=0}}if(S-_>0&&E>S-_)do{a.win[S++]=a.win[_++]}while(0!=--E);else a.win.set(a.win.subarray(_,_+E),S),S+=E,_+=E,E=0;break}if(0!=(64&l))return s.msg="invalid distance code",E=s.avail_in-f,E=m>>3<E?m>>3:E,f+=E,g-=E,m-=E<<3,a.bitb=p,a.bitk=m,s.avail_in=f,s.total_in+=g-s.next_in_index,s.next_in_index=g,a.write=S,le;c+=u[T+2],c+=p&ge[l],T=3*(d+c),l=u[T]}break}if(0!=(64&l))return 0!=(32&l)?(E=s.avail_in-f,E=m>>3<E?m>>3:E,f+=E,g-=E,m-=E<<3,a.bitb=p,a.bitk=m,s.avail_in=f,s.total_in+=g-s.next_in_index,s.next_in_index=g,a.write=S,ce):(s.msg="invalid literal/length code",E=s.avail_in-f,E=m>>3<E?m>>3:E,f+=E,g-=E,m-=E<<3,a.bitb=p,a.bitk=m,s.avail_in=f,s.total_in+=g-s.next_in_index,s.next_in_index=g,a.write=S,le);if(c+=u[T+2],c+=p&ge[l],T=3*(d+c),0===(l=u[T])){p>>=u[T+1],m-=u[T+1],a.win[S++]=u[T+2],h--;break}}else p>>=u[T+1],m-=u[T+1],a.win[S++]=u[T+2],h--}while(h>=258&&f>=10);return E=s.avail_in-f,E=m>>3<E?m>>3:E,f+=E,g-=E,m-=E<<3,a.bitb=p,a.bitk=m,s.avail_in=f,s.total_in+=g-s.next_in_index,s.next_in_index=g,a.write=S,se}e.init=function(e,i,a,s,c,u){t=be,l=e,p=i,n=a,m=s,o=c,g=u,r=null},e.proc=function(e,S,h){let y,v,E,A,_,T,I,b=0,w=0,C=0;for(C=S.next_in_index,A=S.avail_in,b=e.bitb,w=e.bitk,_=e.write,T=_<e.read?e.read-_-1:e.end-_;;)switch(t){case be:if(T>=258&&A>=10&&(e.bitb=b,e.bitk=w,S.avail_in=A,S.total_in+=C-S.next_in_index,S.next_in_index=C,e.write=_,h=f(l,p,n,m,o,g,e,S),C=S.next_in_index,A=S.avail_in,b=e.bitb,w=e.bitk,_=e.write,T=_<e.read?e.read-_-1:e.end-_,h!=se)){t=h==ce?Re:Le;break}s=l,r=n,a=m,t=we;case we:for(y=s;w<y;){if(0===A)return e.bitb=b,e.bitk=w,S.avail_in=A,S.total_in+=C-S.next_in_index,S.next_in_index=C,e.write=_,e.inflate_flush(S,h);h=se,A--,b|=(255&S.read_byte(C++))<<w,w+=8}if(v=3*(a+(b&ge[y])),b>>>=r[v+1],w-=r[v+1],E=r[v],0===E){c=r[v+2],t=Ne;break}if(0!=(16&E)){u=15&E,i=r[v+2],t=Ce;break}if(0==(64&E)){s=E,a=v/3+r[v+2];break}if(0!=(32&E)){t=Re;break}return t=Le,S.msg="invalid literal/length code",h=le,e.bitb=b,e.bitk=w,S.avail_in=A,S.total_in+=C-S.next_in_index,S.next_in_index=C,e.write=_,e.inflate_flush(S,h);case Ce:for(y=u;w<y;){if(0===A)return e.bitb=b,e.bitk=w,S.avail_in=A,S.total_in+=C-S.next_in_index,S.next_in_index=C,e.write=_,e.inflate_flush(S,h);h=se,A--,b|=(255&S.read_byte(C++))<<w,w+=8}i+=b&ge[y],b>>=y,w-=y,s=p,r=o,a=g,t=De;case De:for(y=s;w<y;){if(0===A)return e.bitb=b,e.bitk=w,S.avail_in=A,S.total_in+=C-S.next_in_index,S.next_in_index=C,e.write=_,e.inflate_flush(S,h);h=se,A--,b|=(255&S.read_byte(C++))<<w,w+=8}if(v=3*(a+(b&ge[y])),b>>=r[v+1],w-=r[v+1],E=r[v],0!=(16&E)){u=15&E,d=r[v+2],t=Oe;break}if(0==(64&E)){s=E,a=v/3+r[v+2];break}return t=Le,S.msg="invalid distance code",h=le,e.bitb=b,e.bitk=w,S.avail_in=A,S.total_in+=C-S.next_in_index,S.next_in_index=C,e.write=_,e.inflate_flush(S,h);case Oe:for(y=u;w<y;){if(0===A)return e.bitb=b,e.bitk=w,S.avail_in=A,S.total_in+=C-S.next_in_index,S.next_in_index=C,e.write=_,e.inflate_flush(S,h);h=se,A--,b|=(255&S.read_byte(C++))<<w,w+=8}d+=b&ge[y],b>>=y,w-=y,t=Pe;case Pe:for(I=_-d;I<0;)I+=e.end;for(;0!==i;){if(0===T&&(_==e.end&&0!==e.read&&(_=0,T=_<e.read?e.read-_-1:e.end-_),0===T&&(e.write=_,h=e.inflate_flush(S,h),_=e.write,T=_<e.read?e.read-_-1:e.end-_,_==e.end&&0!==e.read&&(_=0,T=_<e.read?e.read-_-1:e.end-_),0===T)))return e.bitb=b,e.bitk=w,S.avail_in=A,S.total_in+=C-S.next_in_index,S.next_in_index=C,e.write=_,e.inflate_flush(S,h);e.win[_++]=e.win[I++],T--,I==e.end&&(I=0),i--}t=be;break;case Ne:if(0===T&&(_==e.end&&0!==e.read&&(_=0,T=_<e.read?e.read-_-1:e.end-_),0===T&&(e.write=_,h=e.inflate_flush(S,h),_=e.write,T=_<e.read?e.read-_-1:e.end-_,_==e.end&&0!==e.read&&(_=0,T=_<e.read?e.read-_-1:e.end-_),0===T)))return e.bitb=b,e.bitk=w,S.avail_in=A,S.total_in+=C-S.next_in_index,S.next_in_index=C,e.write=_,e.inflate_flush(S,h);h=se,e.win[_++]=c,T--,t=be;break;case Re:if(w>7&&(w-=8,A++,C--),e.write=_,h=e.inflate_flush(S,h),_=e.write,T=_<e.read?e.read-_-1:e.end-_,e.read!=e.write)return e.bitb=b,e.bitk=w,S.avail_in=A,S.total_in+=C-S.next_in_index,S.next_in_index=C,e.write=_,e.inflate_flush(S,h);t=Me;case Me:return h=ce,e.bitb=b,e.bitk=w,S.avail_in=A,S.total_in+=C-S.next_in_index,S.next_in_index=C,e.write=_,e.inflate_flush(S,h);case Le:return h=le,e.bitb=b,e.bitk=w,S.avail_in=A,S.total_in+=C-S.next_in_index,S.next_in_index=C,e.write=_,e.inflate_flush(S,h);default:return h=de,e.bitb=b,e.bitk=w,S.avail_in=A,S.total_in+=C-S.next_in_index,S.next_in_index=C,e.write=_,e.inflate_flush(S,h)}},e.free=function(){}}const ke=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],Fe=0,Be=1,Ge=2,xe=3,$e=4,je=5,Ke=6,Ve=7,He=8,We=9;function ze(e,t){const r=this;let n,o=Fe,i=0,a=0,s=0;const c=[0],u=[0],d=new Ue;let l=0,p=new Int32Array(3*fe);const m=new Ie;r.bitk=0,r.bitb=0,r.win=new Uint8Array(t),r.end=t,r.read=0,r.write=0,r.reset=function(e,t){t&&(t[0]=0),o==Ke&&d.free(e),o=Fe,r.bitk=0,r.bitb=0,r.read=r.write=0},r.reset(e,null),r.inflate_flush=function(e,t){let n,o,i;return o=e.next_out_index,i=r.read,n=(i<=r.write?r.write:r.end)-i,n>e.avail_out&&(n=e.avail_out),0!==n&&t==me&&(t=se),e.avail_out-=n,e.total_out+=n,e.next_out.set(r.win.subarray(i,i+n),o),o+=n,i+=n,i==r.end&&(i=0,r.write==r.end&&(r.write=0),n=r.write-i,n>e.avail_out&&(n=e.avail_out),0!==n&&t==me&&(t=se),e.avail_out-=n,e.total_out+=n,e.next_out.set(r.win.subarray(i,i+n),o),o+=n,i+=n),e.next_out_index=o,r.read=i,t},r.proc=function(e,t){let g,f,S,h,y,v,E,A;for(h=e.next_in_index,y=e.avail_in,f=r.bitb,S=r.bitk,v=r.write,E=v<r.read?r.read-v-1:r.end-v;;){let _,T,I,b,w,C,D,O;switch(o){case Fe:for(;S<3;){if(0===y)return r.bitb=f,r.bitk=S,e.avail_in=y,e.total_in+=h-e.next_in_index,e.next_in_index=h,r.write=v,r.inflate_flush(e,t);t=se,y--,f|=(255&e.read_byte(h++))<<S,S+=8}switch(g=7&f,l=1&g,g>>>1){case 0:f>>>=3,S-=3,g=7&S,f>>>=g,S-=g,o=Be;break;case 1:_=[],T=[],I=[[]],b=[[]],Ie.inflate_trees_fixed(_,T,I,b),d.init(_[0],T[0],I[0],0,b[0],0),f>>>=3,S-=3,o=Ke;break;case 2:f>>>=3,S-=3,o=xe;break;case 3:return f>>>=3,S-=3,o=We,e.msg="invalid block type",t=le,r.bitb=f,r.bitk=S,e.avail_in=y,e.total_in+=h-e.next_in_index,e.next_in_index=h,r.write=v,r.inflate_flush(e,t)}break;case Be:for(;S<32;){if(0===y)return r.bitb=f,r.bitk=S,e.avail_in=y,e.total_in+=h-e.next_in_index,e.next_in_index=h,r.write=v,r.inflate_flush(e,t);t=se,y--,f|=(255&e.read_byte(h++))<<S,S+=8}if((~f>>>16&65535)!=(65535&f))return o=We,e.msg="invalid stored block lengths",t=le,r.bitb=f,r.bitk=S,e.avail_in=y,e.total_in+=h-e.next_in_index,e.next_in_index=h,r.write=v,r.inflate_flush(e,t);i=65535&f,f=S=0,o=0!==i?Ge:0!==l?Ve:Fe;break;case Ge:if(0===y)return r.bitb=f,r.bitk=S,e.avail_in=y,e.total_in+=h-e.next_in_index,e.next_in_index=h,r.write=v,r.inflate_flush(e,t);if(0===E&&(v==r.end&&0!==r.read&&(v=0,E=v<r.read?r.read-v-1:r.end-v),0===E&&(r.write=v,t=r.inflate_flush(e,t),v=r.write,E=v<r.read?r.read-v-1:r.end-v,v==r.end&&0!==r.read&&(v=0,E=v<r.read?r.read-v-1:r.end-v),0===E)))return r.bitb=f,r.bitk=S,e.avail_in=y,e.total_in+=h-e.next_in_index,e.next_in_index=h,r.write=v,r.inflate_flush(e,t);if(t=se,g=i,g>y&&(g=y),g>E&&(g=E),r.win.set(e.read_buf(h,g),v),h+=g,y-=g,v+=g,E-=g,0!=(i-=g))break;o=0!==l?Ve:Fe;break;case xe:for(;S<14;){if(0===y)return r.bitb=f,r.bitk=S,e.avail_in=y,e.total_in+=h-e.next_in_index,e.next_in_index=h,r.write=v,r.inflate_flush(e,t);t=se,y--,f|=(255&e.read_byte(h++))<<S,S+=8}if(a=g=16383&f,(31&g)>29||(g>>5&31)>29)return o=We,e.msg="too many length or distance symbols",t=le,r.bitb=f,r.bitk=S,e.avail_in=y,e.total_in+=h-e.next_in_index,e.next_in_index=h,r.write=v,r.inflate_flush(e,t);if(g=258+(31&g)+(g>>5&31),!n||n.length<g)n=[];else for(A=0;A<g;A++)n[A]=0;f>>>=14,S-=14,s=0,o=$e;case $e:for(;s<4+(a>>>10);){for(;S<3;){if(0===y)return r.bitb=f,r.bitk=S,e.avail_in=y,e.total_in+=h-e.next_in_index,e.next_in_index=h,r.write=v,r.inflate_flush(e,t);t=se,y--,f|=(255&e.read_byte(h++))<<S,S+=8}n[ke[s++]]=7&f,f>>>=3,S-=3}for(;s<19;)n[ke[s++]]=0;if(c[0]=7,g=m.inflate_trees_bits(n,c,u,p,e),g!=se)return(t=g)==le&&(n=null,o=We),r.bitb=f,r.bitk=S,e.avail_in=y,e.total_in+=h-e.next_in_index,e.next_in_index=h,r.write=v,r.inflate_flush(e,t);s=0,o=je;case je:for(;g=a,!(s>=258+(31&g)+(g>>5&31));){let i,d;for(g=c[0];S<g;){if(0===y)return r.bitb=f,r.bitk=S,e.avail_in=y,e.total_in+=h-e.next_in_index,e.next_in_index=h,r.write=v,r.inflate_flush(e,t);t=se,y--,f|=(255&e.read_byte(h++))<<S,S+=8}if(g=p[3*(u[0]+(f&ge[g]))+1],d=p[3*(u[0]+(f&ge[g]))+2],d<16)f>>>=g,S-=g,n[s++]=d;else{for(A=18==d?7:d-14,i=18==d?11:3;S<g+A;){if(0===y)return r.bitb=f,r.bitk=S,e.avail_in=y,e.total_in+=h-e.next_in_index,e.next_in_index=h,r.write=v,r.inflate_flush(e,t);t=se,y--,f|=(255&e.read_byte(h++))<<S,S+=8}if(f>>>=g,S-=g,i+=f&ge[A],f>>>=A,S-=A,A=s,g=a,A+i>258+(31&g)+(g>>5&31)||16==d&&A<1)return n=null,o=We,e.msg="invalid bit length repeat",t=le,r.bitb=f,r.bitk=S,e.avail_in=y,e.total_in+=h-e.next_in_index,e.next_in_index=h,r.write=v,r.inflate_flush(e,t);d=16==d?n[A-1]:0;do{n[A++]=d}while(0!=--i);s=A}}if(u[0]=-1,w=[],C=[],D=[],O=[],w[0]=9,C[0]=6,g=a,g=m.inflate_trees_dynamic(257+(31&g),1+(g>>5&31),n,w,C,D,O,p,e),g!=se)return g==le&&(n=null,o=We),t=g,r.bitb=f,r.bitk=S,e.avail_in=y,e.total_in+=h-e.next_in_index,e.next_in_index=h,r.write=v,r.inflate_flush(e,t);d.init(w[0],C[0],p,D[0],p,O[0]),o=Ke;case Ke:if(r.bitb=f,r.bitk=S,e.avail_in=y,e.total_in+=h-e.next_in_index,e.next_in_index=h,r.write=v,(t=d.proc(r,e,t))!=ce)return r.inflate_flush(e,t);if(t=se,d.free(e),h=e.next_in_index,y=e.avail_in,f=r.bitb,S=r.bitk,v=r.write,E=v<r.read?r.read-v-1:r.end-v,0===l){o=Fe;break}o=Ve;case Ve:if(r.write=v,t=r.inflate_flush(e,t),v=r.write,E=v<r.read?r.read-v-1:r.end-v,r.read!=r.write)return r.bitb=f,r.bitk=S,e.avail_in=y,e.total_in+=h-e.next_in_index,e.next_in_index=h,r.write=v,r.inflate_flush(e,t);o=He;case He:return t=ce,r.bitb=f,r.bitk=S,e.avail_in=y,e.total_in+=h-e.next_in_index,e.next_in_index=h,r.write=v,r.inflate_flush(e,t);case We:return t=le,r.bitb=f,r.bitk=S,e.avail_in=y,e.total_in+=h-e.next_in_index,e.next_in_index=h,r.write=v,r.inflate_flush(e,t);default:return t=de,r.bitb=f,r.bitk=S,e.avail_in=y,e.total_in+=h-e.next_in_index,e.next_in_index=h,r.write=v,r.inflate_flush(e,t)}}},r.free=function(e){r.reset(e,null),r.win=null,p=null},r.set_dictionary=function(e,t,n){r.win.set(e.subarray(t,t+n),0),r.read=r.write=n},r.sync_point=function(){return o==Be?1:0}}const qe=32,Ye=8,Ze=0,Qe=1,Xe=2,Je=3,et=4,tt=5,rt=6,nt=7,ot=12,it=13,at=[0,0,255,255];function st(){const e=this;function t(e){return e&&e.istate?(e.total_in=e.total_out=0,e.msg=null,e.istate.mode=nt,e.istate.blocks.reset(e,null),se):de}e.mode=0,e.method=0,e.was=[0],e.need=0,e.marker=0,e.wbits=0,e.inflateEnd=function(t){return e.blocks&&e.blocks.free(t),e.blocks=null,se},e.inflateInit=function(r,n){return r.msg=null,e.blocks=null,n<8||n>15?(e.inflateEnd(r),de):(e.wbits=n,r.istate.blocks=new ze(r,1<<n),t(r),se)},e.inflate=function(e,t){let r,n;if(!e||!e.istate||!e.next_in)return de;const o=e.istate;for(t=t==Se?me:se,r=me;;)switch(o.mode){case Ze:if(0===e.avail_in)return r;if(r=t,e.avail_in--,e.total_in++,(15&(o.method=e.read_byte(e.next_in_index++)))!=Ye){o.mode=it,e.msg="unknown compression method",o.marker=5;break}if(8+(o.method>>4)>o.wbits){o.mode=it,e.msg="invalid win size",o.marker=5;break}o.mode=Qe;case Qe:if(0===e.avail_in)return r;if(r=t,e.avail_in--,e.total_in++,n=255&e.read_byte(e.next_in_index++),((o.method<<8)+n)%31!=0){o.mode=it,e.msg="incorrect header check",o.marker=5;break}if(0==(n&qe)){o.mode=nt;break}o.mode=Xe;case Xe:if(0===e.avail_in)return r;r=t,e.avail_in--,e.total_in++,o.need=(255&e.read_byte(e.next_in_index++))<<24&4278190080,o.mode=Je;case Je:if(0===e.avail_in)return r;r=t,e.avail_in--,e.total_in++,o.need+=(255&e.read_byte(e.next_in_index++))<<16&16711680,o.mode=et;case et:if(0===e.avail_in)return r;r=t,e.avail_in--,e.total_in++,o.need+=(255&e.read_byte(e.next_in_index++))<<8&65280,o.mode=tt;case tt:return 0===e.avail_in?r:(r=t,e.avail_in--,e.total_in++,o.need+=255&e.read_byte(e.next_in_index++),o.mode=rt,ue);case rt:return o.mode=it,e.msg="need dictionary",o.marker=0,de;case nt:if(r=o.blocks.proc(e,r),r==le){o.mode=it,o.marker=0;break}if(r==se&&(r=t),r!=ce)return r;r=t,o.blocks.reset(e,o.was),o.mode=ot;case ot:return e.avail_in=0,ce;case it:return le;default:return de}},e.inflateSetDictionary=function(e,t,r){let n=0,o=r;if(!e||!e.istate||e.istate.mode!=rt)return de;const i=e.istate;return o>=1<<i.wbits&&(o=(1<<i.wbits)-1,n=r-o),i.blocks.set_dictionary(t,n,o),i.mode=nt,se},e.inflateSync=function(e){let r,n,o,i,a;if(!e||!e.istate)return de;const s=e.istate;if(s.mode!=it&&(s.mode=it,s.marker=0),0===(r=e.avail_in))return me;for(n=e.next_in_index,o=s.marker;0!==r&&o<4;)e.read_byte(n)==at[o]?o++:o=0!==e.read_byte(n)?0:4-o,n++,r--;return e.total_in+=n-e.next_in_index,e.next_in_index=n,e.avail_in=r,s.marker=o,4!=o?le:(i=e.total_in,a=e.total_out,t(e),e.total_in=i,e.total_out=a,s.mode=nt,se)},e.inflateSyncPoint=function(e){return e&&e.istate&&e.istate.blocks?e.istate.blocks.sync_point():de}}function ct(){}ct.prototype={inflateInit(e){const t=this;return t.istate=new st,e||(e=15),t.istate.inflateInit(t,e)},inflate(e){const t=this;return t.istate?t.istate.inflate(t,e):de},inflateEnd(){const e=this;if(!e.istate)return de;const t=e.istate.inflateEnd(e);return e.istate=null,t},inflateSync(){const e=this;return e.istate?e.istate.inflateSync(e):de},inflateSetDictionary(e,t){const r=this;return r.istate?r.istate.inflateSetDictionary(r,e,t):de},read_byte(e){return this.next_in[e]},read_buf(e,t){return this.next_in.subarray(e,e+t)}};const ut=4294967295,dt=65535,lt=67324752,pt=134695760,mt=33639248,gt=101010256,ft=101075792,St=117853008,ht=22,yt=1,vt=39169,Et=10,At=1,_t=21589,Tt=28789,It=25461,bt=1,wt=6,Ct=8,Dt=2048,Ot="/",Pt=new Date(2107,11,31),Nt=new Date(1980,0,1),Rt=void 0,Mt="undefined",Lt="function";class Ut{constructor(e){return class extends TransformStream{constructor(t,r){const n=new e(r);super({transform(e,t){t.enqueue(n.append(e))},flush(e){const t=n.flush();t&&e.enqueue(t)}})}}}}const kt=64;let Ft=2;try{typeof navigator!=Mt&&navigator.hardwareConcurrency&&(Ft=navigator.hardwareConcurrency)}catch(e){}const Bt={chunkSize:524288,maxWorkers:Ft,terminateWorkerTimeout:5e3,useWebWorkers:!0,useCompressionStream:!0,workerScripts:Rt,CompressionStreamNative:typeof CompressionStream!=Mt&&CompressionStream,DecompressionStreamNative:typeof DecompressionStream!=Mt&&DecompressionStream},Gt=Object.assign({},Bt);function xt(){return Gt}function $t(e){return Math.max(e.chunkSize,kt)}function jt(e){const{baseURL:t,chunkSize:r,maxWorkers:n,terminateWorkerTimeout:o,useCompressionStream:i,useWebWorkers:a,Deflate:s,Inflate:c,CompressionStream:u,DecompressionStream:d,workerScripts:l}=e;if(Kt("baseURL",t),Kt("chunkSize",r),Kt("maxWorkers",n),Kt("terminateWorkerTimeout",o),Kt("useCompressionStream",i),Kt("useWebWorkers",a),s&&(Gt.CompressionStream=new Ut(s)),c&&(Gt.DecompressionStream=new Ut(c)),Kt("CompressionStream",u),Kt("DecompressionStream",d),l!==Rt){const{deflate:e,inflate:t}=l;if((e||t)&&(Gt.workerScripts||(Gt.workerScripts={})),e){if(!Array.isArray(e))throw new Error("workerScripts.deflate must be an array");Gt.workerScripts.deflate=e}if(t){if(!Array.isArray(t))throw new Error("workerScripts.inflate must be an array");Gt.workerScripts.inflate=t}}}function Kt(e,t){t!==Rt&&(Gt[e]=t)}const Vt={application:{"andrew-inset":"ez",annodex:"anx","atom+xml":"atom","atomcat+xml":"atomcat","atomserv+xml":"atomsrv",bbolin:"lin",cap:["cap","pcap"],"cu-seeme":"cu","davmount+xml":"davmount",dsptype:"tsp",ecmascript:["es","ecma"],futuresplash:"spl",hta:"hta","java-archive":"jar","java-serialized-object":"ser","java-vm":"class",javascript:"js",m3g:"m3g","mac-binhex40":"hqx",mathematica:["nb","ma","mb"],msaccess:"mdb",msword:["doc","dot"],mxf:"mxf",oda:"oda",ogg:"ogx",pdf:"pdf","pgp-keys":"key","pgp-signature":["asc","sig"],"pics-rules":"prf",postscript:["ps","ai","eps","epsi","epsf","eps2","eps3"],rar:"rar","rdf+xml":"rdf","rss+xml":"rss",rtf:"rtf",smil:["smi","smil"],"xhtml+xml":["xhtml","xht"],xml:["xml","xsl","xsd"],"xspf+xml":"xspf",zip:"zip","vnd.android.package-archive":"apk","vnd.cinderella":"cdy","vnd.google-earth.kml+xml":"kml","vnd.google-earth.kmz":"kmz","vnd.mozilla.xul+xml":"xul","vnd.ms-excel":["xls","xlb","xlt","xlm","xla","xlc","xlw"],"vnd.ms-pki.seccat":"cat","vnd.ms-pki.stl":"stl","vnd.ms-powerpoint":["ppt","pps","pot"],"vnd.oasis.opendocument.chart":"odc","vnd.oasis.opendocument.database":"odb","vnd.oasis.opendocument.formula":"odf","vnd.oasis.opendocument.graphics":"odg","vnd.oasis.opendocument.graphics-template":"otg","vnd.oasis.opendocument.image":"odi","vnd.oasis.opendocument.presentation":"odp","vnd.oasis.opendocument.presentation-template":"otp","vnd.oasis.opendocument.spreadsheet":"ods","vnd.oasis.opendocument.spreadsheet-template":"ots","vnd.oasis.opendocument.text":"odt","vnd.oasis.opendocument.text-master":"odm","vnd.oasis.opendocument.text-template":"ott","vnd.oasis.opendocument.text-web":"oth","vnd.openxmlformats-officedocument.spreadsheetml.sheet":"xlsx","vnd.openxmlformats-officedocument.spreadsheetml.template":"xltx","vnd.openxmlformats-officedocument.presentationml.presentation":"pptx","vnd.openxmlformats-officedocument.presentationml.slideshow":"ppsx","vnd.openxmlformats-officedocument.presentationml.template":"potx","vnd.openxmlformats-officedocument.wordprocessingml.document":"docx","vnd.openxmlformats-officedocument.wordprocessingml.template":"dotx","vnd.smaf":"mmf","vnd.stardivision.calc":"sdc","vnd.stardivision.chart":"sds","vnd.stardivision.draw":"sda","vnd.stardivision.impress":"sdd","vnd.stardivision.math":["sdf","smf"],"vnd.stardivision.writer":["sdw","vor"],"vnd.stardivision.writer-global":"sgl","vnd.sun.xml.calc":"sxc","vnd.sun.xml.calc.template":"stc","vnd.sun.xml.draw":"sxd","vnd.sun.xml.draw.template":"std","vnd.sun.xml.impress":"sxi","vnd.sun.xml.impress.template":"sti","vnd.sun.xml.math":"sxm","vnd.sun.xml.writer":"sxw","vnd.sun.xml.writer.global":"sxg","vnd.sun.xml.writer.template":"stw","vnd.symbian.install":["sis","sisx"],"vnd.visio":["vsd","vst","vss","vsw"],"vnd.wap.wbxml":"wbxml","vnd.wap.wmlc":"wmlc","vnd.wap.wmlscriptc":"wmlsc","vnd.wordperfect":"wpd","vnd.wordperfect5.1":"wp5","x-123":"wk","x-7z-compressed":"7z","x-abiword":"abw","x-apple-diskimage":"dmg","x-bcpio":"bcpio","x-bittorrent":"torrent","x-cbr":["cbr","cba","cbt","cb7"],"x-cbz":"cbz","x-cdf":["cdf","cda"],"x-cdlink":"vcd","x-chess-pgn":"pgn","x-cpio":"cpio","x-csh":"csh","x-debian-package":["deb","udeb"],"x-director":["dcr","dir","dxr","cst","cct","cxt","w3d","fgd","swa"],"x-dms":"dms","x-doom":"wad","x-dvi":"dvi","x-httpd-eruby":"rhtml","x-font":"pcf.Z","x-freemind":"mm","x-gnumeric":"gnumeric","x-go-sgf":"sgf","x-graphing-calculator":"gcf","x-gtar":["gtar","taz"],"x-hdf":"hdf","x-httpd-php":["phtml","pht","php"],"x-httpd-php-source":"phps","x-httpd-php3":"php3","x-httpd-php3-preprocessed":"php3p","x-httpd-php4":"php4","x-httpd-php5":"php5","x-ica":"ica","x-info":"info","x-internet-signup":["ins","isp"],"x-iphone":"iii","x-iso9660-image":"iso","x-java-jnlp-file":"jnlp","x-jmol":"jmz","x-killustrator":"kil","x-koan":["skp","skd","skt","skm"],"x-kpresenter":["kpr","kpt"],"x-kword":["kwd","kwt"],"x-latex":"latex","x-lha":"lha","x-lyx":"lyx","x-lzh":"lzh","x-lzx":"lzx","x-maker":["frm","maker","frame","fm","fb","book","fbdoc"],"x-ms-wmd":"wmd","x-ms-wmz":"wmz","x-msdos-program":["com","exe","bat","dll"],"x-msi":"msi","x-netcdf":["nc","cdf"],"x-ns-proxy-autoconfig":["pac","dat"],"x-nwc":"nwc","x-object":"o","x-oz-application":"oza","x-pkcs7-certreqresp":"p7r","x-python-code":["pyc","pyo"],"x-qgis":["qgs","shp","shx"],"x-quicktimeplayer":"qtl","x-redhat-package-manager":"rpm","x-ruby":"rb","x-sh":"sh","x-shar":"shar","x-shockwave-flash":["swf","swfl"],"x-silverlight":"scr","x-stuffit":"sit","x-sv4cpio":"sv4cpio","x-sv4crc":"sv4crc","x-tar":"tar","x-tcl":"tcl","x-tex-gf":"gf","x-tex-pk":"pk","x-texinfo":["texinfo","texi"],"x-trash":["~","%","bak","old","sik"],"x-troff":["t","tr","roff"],"x-troff-man":"man","x-troff-me":"me","x-troff-ms":"ms","x-ustar":"ustar","x-wais-source":"src","x-wingz":"wz","x-x509-ca-cert":["crt","der","cer"],"x-xcf":"xcf","x-xfig":"fig","x-xpinstall":"xpi",applixware:"aw","atomsvc+xml":"atomsvc","ccxml+xml":"ccxml","cdmi-capability":"cdmia","cdmi-container":"cdmic","cdmi-domain":"cdmid","cdmi-object":"cdmio","cdmi-queue":"cdmiq","docbook+xml":"dbk","dssc+der":"dssc","dssc+xml":"xdssc","emma+xml":"emma","epub+zip":"epub",exi:"exi","font-tdpfr":"pfr","gml+xml":"gml","gpx+xml":"gpx",gxf:"gxf",hyperstudio:"stk","inkml+xml":["ink","inkml"],ipfix:"ipfix",json:"json","jsonml+json":"jsonml","lost+xml":"lostxml","mads+xml":"mads",marc:"mrc","marcxml+xml":"mrcx","mathml+xml":"mathml",mbox:"mbox","mediaservercontrol+xml":"mscml","metalink+xml":"metalink","metalink4+xml":"meta4","mets+xml":"mets","mods+xml":"mods",mp21:["m21","mp21"],mp4:"mp4s","oebps-package+xml":"opf","omdoc+xml":"omdoc",onenote:["onetoc","onetoc2","onetmp","onepkg"],oxps:"oxps","patch-ops-error+xml":"xer","pgp-encrypted":"pgp",pkcs10:"p10","pkcs7-mime":["p7m","p7c"],"pkcs7-signature":"p7s",pkcs8:"p8","pkix-attr-cert":"ac","pkix-crl":"crl","pkix-pkipath":"pkipath",pkixcmp:"pki","pls+xml":"pls","prs.cww":"cww","pskc+xml":"pskcxml","reginfo+xml":"rif","relax-ng-compact-syntax":"rnc","resource-lists+xml":"rl","resource-lists-diff+xml":"rld","rls-services+xml":"rs","rpki-ghostbusters":"gbr","rpki-manifest":"mft","rpki-roa":"roa","rsd+xml":"rsd","sbml+xml":"sbml","scvp-cv-request":"scq","scvp-cv-response":"scs","scvp-vp-request":"spq","scvp-vp-response":"spp",sdp:"sdp","set-payment-initiation":"setpay","set-registration-initiation":"setreg","shf+xml":"shf","sparql-query":"rq","sparql-results+xml":"srx",srgs:"gram","srgs+xml":"grxml","sru+xml":"sru","ssdl+xml":"ssdl","ssml+xml":"ssml","tei+xml":["tei","teicorpus"],"thraud+xml":"tfi","timestamped-data":"tsd","vnd.3gpp.pic-bw-large":"plb","vnd.3gpp.pic-bw-small":"psb","vnd.3gpp.pic-bw-var":"pvb","vnd.3gpp2.tcap":"tcap","vnd.3m.post-it-notes":"pwn","vnd.accpac.simply.aso":"aso","vnd.accpac.simply.imp":"imp","vnd.acucobol":"acu","vnd.acucorp":["atc","acutc"],"vnd.adobe.air-application-installer-package+zip":"air","vnd.adobe.formscentral.fcdt":"fcdt","vnd.adobe.fxp":["fxp","fxpl"],"vnd.adobe.xdp+xml":"xdp","vnd.adobe.xfdf":"xfdf","vnd.ahead.space":"ahead","vnd.airzip.filesecure.azf":"azf","vnd.airzip.filesecure.azs":"azs","vnd.amazon.ebook":"azw","vnd.americandynamics.acc":"acc","vnd.amiga.ami":"ami","vnd.anser-web-certificate-issue-initiation":"cii","vnd.anser-web-funds-transfer-initiation":"fti","vnd.antix.game-component":"atx","vnd.apple.installer+xml":"mpkg","vnd.apple.mpegurl":"m3u8","vnd.aristanetworks.swi":"swi","vnd.astraea-software.iota":"iota","vnd.audiograph":"aep","vnd.blueice.multipass":"mpm","vnd.bmi":"bmi","vnd.businessobjects":"rep","vnd.chemdraw+xml":"cdxml","vnd.chipnuts.karaoke-mmd":"mmd","vnd.claymore":"cla","vnd.cloanto.rp9":"rp9","vnd.clonk.c4group":["c4g","c4d","c4f","c4p","c4u"],"vnd.cluetrust.cartomobile-config":"c11amc","vnd.cluetrust.cartomobile-config-pkg":"c11amz","vnd.commonspace":"csp","vnd.contact.cmsg":"cdbcmsg","vnd.cosmocaller":"cmc","vnd.crick.clicker":"clkx","vnd.crick.clicker.keyboard":"clkk","vnd.crick.clicker.palette":"clkp","vnd.crick.clicker.template":"clkt","vnd.crick.clicker.wordbank":"clkw","vnd.criticaltools.wbs+xml":"wbs","vnd.ctc-posml":"pml","vnd.cups-ppd":"ppd","vnd.curl.car":"car","vnd.curl.pcurl":"pcurl","vnd.dart":"dart","vnd.data-vision.rdz":"rdz","vnd.dece.data":["uvf","uvvf","uvd","uvvd"],"vnd.dece.ttml+xml":["uvt","uvvt"],"vnd.dece.unspecified":["uvx","uvvx"],"vnd.dece.zip":["uvz","uvvz"],"vnd.denovo.fcselayout-link":"fe_launch","vnd.dna":"dna","vnd.dolby.mlp":"mlp","vnd.dpgraph":"dpg","vnd.dreamfactory":"dfac","vnd.ds-keypoint":"kpxx","vnd.dvb.ait":"ait","vnd.dvb.service":"svc","vnd.dynageo":"geo","vnd.ecowin.chart":"mag","vnd.enliven":"nml","vnd.epson.esf":"esf","vnd.epson.msf":"msf","vnd.epson.quickanime":"qam","vnd.epson.salt":"slt","vnd.epson.ssf":"ssf","vnd.eszigno3+xml":["es3","et3"],"vnd.ezpix-album":"ez2","vnd.ezpix-package":"ez3","vnd.fdf":"fdf","vnd.fdsn.mseed":"mseed","vnd.fdsn.seed":["seed","dataless"],"vnd.flographit":"gph","vnd.fluxtime.clip":"ftc","vnd.framemaker":["fm","frame","maker","book"],"vnd.frogans.fnc":"fnc","vnd.frogans.ltf":"ltf","vnd.fsc.weblaunch":"fsc","vnd.fujitsu.oasys":"oas","vnd.fujitsu.oasys2":"oa2","vnd.fujitsu.oasys3":"oa3","vnd.fujitsu.oasysgp":"fg5","vnd.fujitsu.oasysprs":"bh2","vnd.fujixerox.ddd":"ddd","vnd.fujixerox.docuworks":"xdw","vnd.fujixerox.docuworks.binder":"xbd","vnd.fuzzysheet":"fzs","vnd.genomatix.tuxedo":"txd","vnd.geogebra.file":"ggb","vnd.geogebra.tool":"ggt","vnd.geometry-explorer":["gex","gre"],"vnd.geonext":"gxt","vnd.geoplan":"g2w","vnd.geospace":"g3w","vnd.gmx":"gmx","vnd.grafeq":["gqf","gqs"],"vnd.groove-account":"gac","vnd.groove-help":"ghf","vnd.groove-identity-message":"gim","vnd.groove-injector":"grv","vnd.groove-tool-message":"gtm","vnd.groove-tool-template":"tpl","vnd.groove-vcard":"vcg","vnd.hal+xml":"hal","vnd.handheld-entertainment+xml":"zmm","vnd.hbci":"hbci","vnd.hhe.lesson-player":"les","vnd.hp-hpgl":"hpgl","vnd.hp-hpid":"hpid","vnd.hp-hps":"hps","vnd.hp-jlyt":"jlt","vnd.hp-pcl":"pcl","vnd.hp-pclxl":"pclxl","vnd.hydrostatix.sof-data":"sfd-hdstx","vnd.ibm.minipay":"mpy","vnd.ibm.modcap":["afp","listafp","list3820"],"vnd.ibm.rights-management":"irm","vnd.ibm.secure-container":"sc","vnd.iccprofile":["icc","icm"],"vnd.igloader":"igl","vnd.immervision-ivp":"ivp","vnd.immervision-ivu":"ivu","vnd.insors.igm":"igm","vnd.intercon.formnet":["xpw","xpx"],"vnd.intergeo":"i2g","vnd.intu.qbo":"qbo","vnd.intu.qfx":"qfx","vnd.ipunplugged.rcprofile":"rcprofile","vnd.irepository.package+xml":"irp","vnd.is-xpr":"xpr","vnd.isac.fcs":"fcs","vnd.jam":"jam","vnd.jcp.javame.midlet-rms":"rms","vnd.jisp":"jisp","vnd.joost.joda-archive":"joda","vnd.kahootz":["ktz","ktr"],"vnd.kde.karbon":"karbon","vnd.kde.kchart":"chrt","vnd.kde.kformula":"kfo","vnd.kde.kivio":"flw","vnd.kde.kontour":"kon","vnd.kde.kpresenter":["kpr","kpt"],"vnd.kde.kspread":"ksp","vnd.kde.kword":["kwd","kwt"],"vnd.kenameaapp":"htke","vnd.kidspiration":"kia","vnd.kinar":["kne","knp"],"vnd.koan":["skp","skd","skt","skm"],"vnd.kodak-descriptor":"sse","vnd.las.las+xml":"lasxml","vnd.llamagraphics.life-balance.desktop":"lbd","vnd.llamagraphics.life-balance.exchange+xml":"lbe","vnd.lotus-1-2-3":"123","vnd.lotus-approach":"apr","vnd.lotus-freelance":"pre","vnd.lotus-notes":"nsf","vnd.lotus-organizer":"org","vnd.lotus-screencam":"scm","vnd.lotus-wordpro":"lwp","vnd.macports.portpkg":"portpkg","vnd.mcd":"mcd","vnd.medcalcdata":"mc1","vnd.mediastation.cdkey":"cdkey","vnd.mfer":"mwf","vnd.mfmp":"mfm","vnd.micrografx.flo":"flo","vnd.micrografx.igx":"igx","vnd.mif":"mif","vnd.mobius.daf":"daf","vnd.mobius.dis":"dis","vnd.mobius.mbk":"mbk","vnd.mobius.mqy":"mqy","vnd.mobius.msl":"msl","vnd.mobius.plc":"plc","vnd.mobius.txf":"txf","vnd.mophun.application":"mpn","vnd.mophun.certificate":"mpc","vnd.ms-artgalry":"cil","vnd.ms-cab-compressed":"cab","vnd.ms-excel.addin.macroenabled.12":"xlam","vnd.ms-excel.sheet.binary.macroenabled.12":"xlsb","vnd.ms-excel.sheet.macroenabled.12":"xlsm","vnd.ms-excel.template.macroenabled.12":"xltm","vnd.ms-fontobject":"eot","vnd.ms-htmlhelp":"chm","vnd.ms-ims":"ims","vnd.ms-lrm":"lrm","vnd.ms-officetheme":"thmx","vnd.ms-powerpoint.addin.macroenabled.12":"ppam","vnd.ms-powerpoint.presentation.macroenabled.12":"pptm","vnd.ms-powerpoint.slide.macroenabled.12":"sldm","vnd.ms-powerpoint.slideshow.macroenabled.12":"ppsm","vnd.ms-powerpoint.template.macroenabled.12":"potm","vnd.ms-project":["mpp","mpt"],"vnd.ms-word.document.macroenabled.12":"docm","vnd.ms-word.template.macroenabled.12":"dotm","vnd.ms-works":["wps","wks","wcm","wdb"],"vnd.ms-wpl":"wpl","vnd.ms-xpsdocument":"xps","vnd.mseq":"mseq","vnd.musician":"mus","vnd.muvee.style":"msty","vnd.mynfc":"taglet","vnd.neurolanguage.nlu":"nlu","vnd.nitf":["ntf","nitf"],"vnd.noblenet-directory":"nnd","vnd.noblenet-sealer":"nns","vnd.noblenet-web":"nnw","vnd.nokia.n-gage.data":"ngdat","vnd.nokia.n-gage.symbian.install":"n-gage","vnd.nokia.radio-preset":"rpst","vnd.nokia.radio-presets":"rpss","vnd.novadigm.edm":"edm","vnd.novadigm.edx":"edx","vnd.novadigm.ext":"ext","vnd.oasis.opendocument.chart-template":"otc","vnd.oasis.opendocument.formula-template":"odft","vnd.oasis.opendocument.image-template":"oti","vnd.olpc-sugar":"xo","vnd.oma.dd2+xml":"dd2","vnd.openofficeorg.extension":"oxt","vnd.openxmlformats-officedocument.presentationml.slide":"sldx","vnd.osgeo.mapguide.package":"mgp","vnd.osgi.dp":"dp","vnd.osgi.subsystem":"esa","vnd.palm":["pdb","pqa","oprc"],"vnd.pawaafile":"paw","vnd.pg.format":"str","vnd.pg.osasli":"ei6","vnd.picsel":"efif","vnd.pmi.widget":"wg","vnd.pocketlearn":"plf","vnd.powerbuilder6":"pbd","vnd.previewsystems.box":"box","vnd.proteus.magazine":"mgz","vnd.publishare-delta-tree":"qps","vnd.pvi.ptid1":"ptid","vnd.quark.quarkxpress":["qxd","qxt","qwd","qwt","qxl","qxb"],"vnd.realvnc.bed":"bed","vnd.recordare.musicxml":"mxl","vnd.recordare.musicxml+xml":"musicxml","vnd.rig.cryptonote":"cryptonote","vnd.rn-realmedia":"rm","vnd.rn-realmedia-vbr":"rmvb","vnd.route66.link66+xml":"link66","vnd.sailingtracker.track":"st","vnd.seemail":"see","vnd.sema":"sema","vnd.semd":"semd","vnd.semf":"semf","vnd.shana.informed.formdata":"ifm","vnd.shana.informed.formtemplate":"itp","vnd.shana.informed.interchange":"iif","vnd.shana.informed.package":"ipk","vnd.simtech-mindmapper":["twd","twds"],"vnd.smart.teacher":"teacher","vnd.solent.sdkm+xml":["sdkm","sdkd"],"vnd.spotfire.dxp":"dxp","vnd.spotfire.sfs":"sfs","vnd.stepmania.package":"smzip","vnd.stepmania.stepchart":"sm","vnd.sus-calendar":["sus","susp"],"vnd.svd":"svd","vnd.syncml+xml":"xsm","vnd.syncml.dm+wbxml":"bdm","vnd.syncml.dm+xml":"xdm","vnd.tao.intent-module-archive":"tao","vnd.tcpdump.pcap":["pcap","cap","dmp"],"vnd.tmobile-livetv":"tmo","vnd.trid.tpt":"tpt","vnd.triscape.mxs":"mxs","vnd.trueapp":"tra","vnd.ufdl":["ufd","ufdl"],"vnd.uiq.theme":"utz","vnd.umajin":"umj","vnd.unity":"unityweb","vnd.uoml+xml":"uoml","vnd.vcx":"vcx","vnd.visionary":"vis","vnd.vsf":"vsf","vnd.webturbo":"wtb","vnd.wolfram.player":"nbp","vnd.wqd":"wqd","vnd.wt.stf":"stf","vnd.xara":"xar","vnd.xfdl":"xfdl","vnd.yamaha.hv-dic":"hvd","vnd.yamaha.hv-script":"hvs","vnd.yamaha.hv-voice":"hvp","vnd.yamaha.openscoreformat":"osf","vnd.yamaha.openscoreformat.osfpvg+xml":"osfpvg","vnd.yamaha.smaf-audio":"saf","vnd.yamaha.smaf-phrase":"spf","vnd.yellowriver-custom-menu":"cmp","vnd.zul":["zir","zirz"],"vnd.zzazz.deck+xml":"zaz","voicexml+xml":"vxml",widget:"wgt",winhlp:"hlp","wsdl+xml":"wsdl","wspolicy+xml":"wspolicy","x-ace-compressed":"ace","x-authorware-bin":["aab","x32","u32","vox"],"x-authorware-map":"aam","x-authorware-seg":"aas","x-blorb":["blb","blorb"],"x-bzip":"bz","x-bzip2":["bz2","boz"],"x-cfs-compressed":"cfs","x-chat":"chat","x-conference":"nsc","x-dgc-compressed":"dgc","x-dtbncx+xml":"ncx","x-dtbook+xml":"dtb","x-dtbresource+xml":"res","x-eva":"eva","x-font-bdf":"bdf","x-font-ghostscript":"gsf","x-font-linux-psf":"psf","x-font-otf":"otf","x-font-pcf":"pcf","x-font-snf":"snf","x-font-ttf":["ttf","ttc"],"x-font-type1":["pfa","pfb","pfm","afm"],"x-font-woff":"woff","x-freearc":"arc","x-gca-compressed":"gca","x-glulx":"ulx","x-gramps-xml":"gramps","x-install-instructions":"install","x-lzh-compressed":["lzh","lha"],"x-mie":"mie","x-mobipocket-ebook":["prc","mobi"],"x-ms-application":"application","x-ms-shortcut":"lnk","x-ms-xbap":"xbap","x-msbinder":"obd","x-mscardfile":"crd","x-msclip":"clp","x-msdownload":["exe","dll","com","bat","msi"],"x-msmediaview":["mvb","m13","m14"],"x-msmetafile":["wmf","wmz","emf","emz"],"x-msmoney":"mny","x-mspublisher":"pub","x-msschedule":"scd","x-msterminal":"trm","x-mswrite":"wri","x-nzb":"nzb","x-pkcs12":["p12","pfx"],"x-pkcs7-certificates":["p7b","spc"],"x-research-info-systems":"ris","x-silverlight-app":"xap","x-sql":"sql","x-stuffitx":"sitx","x-subrip":"srt","x-t3vm-image":"t3","x-tads":"gam","x-tex":"tex","x-tex-tfm":"tfm","x-tgif":"obj","x-xliff+xml":"xlf","x-xz":"xz","x-zmachine":["z1","z2","z3","z4","z5","z6","z7","z8"],"xaml+xml":"xaml","xcap-diff+xml":"xdf","xenc+xml":"xenc","xml-dtd":"dtd","xop+xml":"xop","xproc+xml":"xpl","xslt+xml":"xslt","xv+xml":["mxml","xhvml","xvml","xvm"],yang:"yang","yin+xml":"yin",envoy:"evy",fractals:"fif","internet-property-stream":"acx",olescript:"axs","vnd.ms-outlook":"msg","vnd.ms-pkicertstore":"sst","x-compress":"z","x-compressed":"tgz","x-gzip":"gz","x-perfmon":["pma","pmc","pml","pmr","pmw"],"x-pkcs7-mime":["p7c","p7m"],"ynd.ms-pkipko":"pko"},audio:{amr:"amr","amr-wb":"awb",annodex:"axa",basic:["au","snd"],flac:"flac",midi:["mid","midi","kar","rmi"],mpeg:["mpga","mpega","mp2","mp3","m4a","mp2a","m2a","m3a"],mpegurl:"m3u",ogg:["oga","ogg","spx"],"prs.sid":"sid","x-aiff":["aif","aiff","aifc"],"x-gsm":"gsm","x-ms-wma":"wma","x-ms-wax":"wax","x-pn-realaudio":"ram","x-realaudio":"ra","x-sd2":"sd2","x-wav":"wav",adpcm:"adp",mp4:"mp4a",s3m:"s3m",silk:"sil","vnd.dece.audio":["uva","uvva"],"vnd.digital-winds":"eol","vnd.dra":"dra","vnd.dts":"dts","vnd.dts.hd":"dtshd","vnd.lucent.voice":"lvp","vnd.ms-playready.media.pya":"pya","vnd.nuera.ecelp4800":"ecelp4800","vnd.nuera.ecelp7470":"ecelp7470","vnd.nuera.ecelp9600":"ecelp9600","vnd.rip":"rip",webm:"weba","x-aac":"aac","x-caf":"caf","x-matroska":"mka","x-pn-realaudio-plugin":"rmp",xm:"xm",mid:["mid","rmi"]},chemical:{"x-alchemy":"alc","x-cache":["cac","cache"],"x-cache-csf":"csf","x-cactvs-binary":["cbin","cascii","ctab"],"x-cdx":"cdx","x-chem3d":"c3d","x-cif":"cif","x-cmdf":"cmdf","x-cml":"cml","x-compass":"cpa","x-crossfire":"bsd","x-csml":["csml","csm"],"x-ctx":"ctx","x-cxf":["cxf","cef"],"x-embl-dl-nucleotide":["emb","embl"],"x-gamess-input":["inp","gam","gamin"],"x-gaussian-checkpoint":["fch","fchk"],"x-gaussian-cube":"cub","x-gaussian-input":["gau","gjc","gjf"],"x-gaussian-log":"gal","x-gcg8-sequence":"gcg","x-genbank":"gen","x-hin":"hin","x-isostar":["istr","ist"],"x-jcamp-dx":["jdx","dx"],"x-kinemage":"kin","x-macmolecule":"mcm","x-macromodel-input":["mmd","mmod"],"x-mdl-molfile":"mol","x-mdl-rdfile":"rd","x-mdl-rxnfile":"rxn","x-mdl-sdfile":["sd","sdf"],"x-mdl-tgf":"tgf","x-mmcif":"mcif","x-mol2":"mol2","x-molconn-Z":"b","x-mopac-graph":"gpt","x-mopac-input":["mop","mopcrt","mpc","zmt"],"x-mopac-out":"moo","x-ncbi-asn1":"asn","x-ncbi-asn1-ascii":["prt","ent"],"x-ncbi-asn1-binary":["val","aso"],"x-pdb":["pdb","ent"],"x-rosdal":"ros","x-swissprot":"sw","x-vamas-iso14976":"vms","x-vmd":"vmd","x-xtel":"xtel","x-xyz":"xyz"},image:{gif:"gif",ief:"ief",jpeg:["jpeg","jpg","jpe"],pcx:"pcx",png:"png","svg+xml":["svg","svgz"],tiff:["tiff","tif"],"vnd.djvu":["djvu","djv"],"vnd.wap.wbmp":"wbmp","x-canon-cr2":"cr2","x-canon-crw":"crw","x-cmu-raster":"ras","x-coreldraw":"cdr","x-coreldrawpattern":"pat","x-coreldrawtemplate":"cdt","x-corelphotopaint":"cpt","x-epson-erf":"erf","x-icon":"ico","x-jg":"art","x-jng":"jng","x-nikon-nef":"nef","x-olympus-orf":"orf","x-photoshop":"psd","x-portable-anymap":"pnm","x-portable-bitmap":"pbm","x-portable-graymap":"pgm","x-portable-pixmap":"ppm","x-rgb":"rgb","x-xbitmap":"xbm","x-xpixmap":"xpm","x-xwindowdump":"xwd",bmp:"bmp",cgm:"cgm",g3fax:"g3",ktx:"ktx","prs.btif":"btif",sgi:"sgi","vnd.dece.graphic":["uvi","uvvi","uvg","uvvg"],"vnd.dwg":"dwg","vnd.dxf":"dxf","vnd.fastbidsheet":"fbs","vnd.fpx":"fpx","vnd.fst":"fst","vnd.fujixerox.edmics-mmr":"mmr","vnd.fujixerox.edmics-rlc":"rlc","vnd.ms-modi":"mdi","vnd.ms-photo":"wdp","vnd.net-fpx":"npx","vnd.xiff":"xif",webp:"webp","x-3ds":"3ds","x-cmx":"cmx","x-freehand":["fh","fhc","fh4","fh5","fh7"],"x-pict":["pic","pct"],"x-tga":"tga","cis-cod":"cod",pipeg:"jfif"},message:{rfc822:["eml","mime","mht","mhtml","nws"]},model:{iges:["igs","iges"],mesh:["msh","mesh","silo"],vrml:["wrl","vrml"],"x3d+vrml":["x3dv","x3dvz"],"x3d+xml":["x3d","x3dz"],"x3d+binary":["x3db","x3dbz"],"vnd.collada+xml":"dae","vnd.dwf":"dwf","vnd.gdl":"gdl","vnd.gtw":"gtw","vnd.mts":"mts","vnd.vtu":"vtu"},text:{"cache-manifest":["manifest","appcache"],calendar:["ics","icz","ifb"],css:"css",csv:"csv",h323:"323",html:["html","htm","shtml","stm"],iuls:"uls",mathml:"mml",plain:["txt","text","brf","conf","def","list","log","in","bas"],richtext:"rtx",scriptlet:["sct","wsc"],texmacs:["tm","ts"],"tab-separated-values":"tsv","vnd.sun.j2me.app-descriptor":"jad","vnd.wap.wml":"wml","vnd.wap.wmlscript":"wmls","x-bibtex":"bib","x-boo":"boo","x-c++hdr":["h++","hpp","hxx","hh"],"x-c++src":["c++","cpp","cxx","cc"],"x-component":"htc","x-dsrc":"d","x-diff":["diff","patch"],"x-haskell":"hs","x-java":"java","x-literate-haskell":"lhs","x-moc":"moc","x-pascal":["p","pas"],"x-pcs-gcd":"gcd","x-perl":["pl","pm"],"x-python":"py","x-scala":"scala","x-setext":"etx","x-tcl":["tcl","tk"],"x-tex":["tex","ltx","sty","cls"],"x-vcalendar":"vcs","x-vcard":"vcf",n3:"n3","prs.lines.tag":"dsc",sgml:["sgml","sgm"],troff:["t","tr","roff","man","me","ms"],turtle:"ttl","uri-list":["uri","uris","urls"],vcard:"vcard","vnd.curl":"curl","vnd.curl.dcurl":"dcurl","vnd.curl.scurl":"scurl","vnd.curl.mcurl":"mcurl","vnd.dvb.subtitle":"sub","vnd.fly":"fly","vnd.fmi.flexstor":"flx","vnd.graphviz":"gv","vnd.in3d.3dml":"3dml","vnd.in3d.spot":"spot","x-asm":["s","asm"],"x-c":["c","cc","cxx","cpp","h","hh","dic"],"x-fortran":["f","for","f77","f90"],"x-opml":"opml","x-nfo":"nfo","x-sfv":"sfv","x-uuencode":"uu",webviewhtml:"htt"},video:{avif:".avif","3gpp":"3gp",annodex:"axv",dl:"dl",dv:["dif","dv"],fli:"fli",gl:"gl",mpeg:["mpeg","mpg","mpe","m1v","m2v","mp2","mpa","mpv2"],mp4:["mp4","mp4v","mpg4"],quicktime:["qt","mov"],ogg:"ogv","vnd.mpegurl":["mxu","m4u"],"x-flv":"flv","x-la-asf":["lsf","lsx"],"x-mng":"mng","x-ms-asf":["asf","asx","asr"],"x-ms-wm":"wm","x-ms-wmv":"wmv","x-ms-wmx":"wmx","x-ms-wvx":"wvx","x-msvideo":"avi","x-sgi-movie":"movie","x-matroska":["mpv","mkv","mk3d","mks"],"3gpp2":"3g2",h261:"h261",h263:"h263",h264:"h264",jpeg:"jpgv",jpm:["jpm","jpgm"],mj2:["mj2","mjp2"],"vnd.dece.hd":["uvh","uvvh"],"vnd.dece.mobile":["uvm","uvvm"],"vnd.dece.pd":["uvp","uvvp"],"vnd.dece.sd":["uvs","uvvs"],"vnd.dece.video":["uvv","uvvv"],"vnd.dvb.file":"dvb","vnd.fvt":"fvt","vnd.ms-playready.media.pyv":"pyv","vnd.uvvu.mp4":["uvu","uvvu"],"vnd.vivo":"viv",webm:"webm","x-f4v":"f4v","x-m4v":"m4v","x-ms-vob":"vob","x-smv":"smv"},"x-conference":{"x-cooltalk":"ice"},"x-world":{"x-vrml":["vrm","vrml","wrl","flr","wrz","xaf","xof"]}},Ht=(()=>{const e={};for(const t in Vt)if(Vt.hasOwnProperty(t))for(const r in Vt[t])if(Vt[t].hasOwnProperty(r)){const n=Vt[t][r];if("string"==typeof n)e[n]=t+"/"+r;else for(let o=0;o<n.length;o++)e[n[o]]=t+"/"+r}return e})(),Wt=[];for(let e=0;e<256;e++){let t=e;for(let e=0;e<8;e++)1&t?t=t>>>1^3988292384:t>>>=1;Wt[e]=t}class zt{constructor(e){this.crc=e||-1}append(e){let t=0|this.crc;for(let r=0,n=0|e.length;r<n;r++)t=t>>>8^Wt[255&(t^e[r])];this.crc=t}get(){return~this.crc}}class qt extends TransformStream{constructor(){const e=new zt;super({transform(t){e.append(t)},flush(t){const r=new Uint8Array(4);new DataView(r.buffer).setUint32(0,e.get()),t.enqueue(r)}})}}function Yt(e){if("undefined"==typeof TextEncoder){e=unescape(encodeURIComponent(e));const t=new Uint8Array(e.length);for(let r=0;r<t.length;r++)t[r]=e.charCodeAt(r);return t}return(new TextEncoder).encode(e)}const Zt={concat(e,t){if(0===e.length||0===t.length)return e.concat(t);const r=e[e.length-1],n=Zt.getPartial(r);return 32===n?e.concat(t):Zt._shiftRight(t,n,0|r,e.slice(0,e.length-1))},bitLength(e){const t=e.length;if(0===t)return 0;const r=e[t-1];return 32*(t-1)+Zt.getPartial(r)},clamp(e,t){if(32*e.length<t)return e;const r=(e=e.slice(0,Math.ceil(t/32))).length;return t&=31,r>0&&t&&(e[r-1]=Zt.partial(t,e[r-1]&2147483648>>t-1,1)),e},partial:(e,t,r)=>32===e?t:(r?0|t:t<<32-e)+1099511627776*e,getPartial:e=>Math.round(e/1099511627776)||32,_shiftRight(e,t,r,n){for(void 0===n&&(n=[]);t>=32;t-=32)n.push(r),r=0;if(0===t)return n.concat(e);for(let o=0;o<e.length;o++)n.push(r|e[o]>>>t),r=e[o]<<32-t;const o=e.length?e[e.length-1]:0,i=Zt.getPartial(o);return n.push(Zt.partial(t+i&31,t+i>32?r:n.pop(),1)),n}},Qt={bytes:{fromBits(e){const t=Zt.bitLength(e)/8,r=new Uint8Array(t);let n;for(let o=0;o<t;o++)0==(3&o)&&(n=e[o/4]),r[o]=n>>>24,n<<=8;return r},toBits(e){const t=[];let r,n=0;for(r=0;r<e.length;r++)n=n<<8|e[r],3==(3&r)&&(t.push(n),n=0);return 3&r&&t.push(Zt.partial(8*(3&r),n)),t}}},Xt=class{constructor(e){const t=this;t.blockSize=512,t._init=[1732584193,4023233417,2562383102,271733878,3285377520],t._key=[1518500249,1859775393,2400959708,3395469782],e?(t._h=e._h.slice(0),t._buffer=e._buffer.slice(0),t._length=e._length):t.reset()}reset(){const e=this;return e._h=e._init.slice(0),e._buffer=[],e._length=0,e}update(e){const t=this;"string"==typeof e&&(e=Qt.utf8String.toBits(e));const r=t._buffer=Zt.concat(t._buffer,e),n=t._length,o=t._length=n+Zt.bitLength(e);if(o>9007199254740991)throw new Error("Cannot hash more than 2^53 - 1 bits");const i=new Uint32Array(r);let a=0;for(let e=t.blockSize+n-(t.blockSize+n&t.blockSize-1);e<=o;e+=t.blockSize)t._block(i.subarray(16*a,16*(a+1))),a+=1;return r.splice(0,16*a),t}finalize(){const e=this;let t=e._buffer;const r=e._h;t=Zt.concat(t,[Zt.partial(1,1)]);for(let e=t.length+2;15&e;e++)t.push(0);for(t.push(Math.floor(e._length/4294967296)),t.push(0|e._length);t.length;)e._block(t.splice(0,16));return e.reset(),r}_f(e,t,r,n){return e<=19?t&r|~t&n:e<=39?t^r^n:e<=59?t&r|t&n|r&n:e<=79?t^r^n:void 0}_S(e,t){return t<<e|t>>>32-e}_block(e){const t=this,r=t._h,n=Array(80);for(let t=0;t<16;t++)n[t]=e[t];let o=r[0],i=r[1],a=r[2],s=r[3],c=r[4];for(let e=0;e<=79;e++){e>=16&&(n[e]=t._S(1,n[e-3]^n[e-8]^n[e-14]^n[e-16]));const r=t._S(5,o)+t._f(e,i,a,s)+c+n[e]+t._key[Math.floor(e/20)]|0;c=s,s=a,a=t._S(30,i),i=o,o=r}r[0]=r[0]+o|0,r[1]=r[1]+i|0,r[2]=r[2]+a|0,r[3]=r[3]+s|0,r[4]=r[4]+c|0}},Jt=class{constructor(e){const t=this;t._tables=[[[],[],[],[],[]],[[],[],[],[],[]]],t._tables[0][0][0]||t._precompute();const r=t._tables[0][4],n=t._tables[1],o=e.length;let i,a,s,c=1;if(4!==o&&6!==o&&8!==o)throw new Error("invalid aes key size");for(t._key=[a=e.slice(0),s=[]],i=o;i<4*o+28;i++){let e=a[i-1];(i%o==0||8===o&&i%o==4)&&(e=r[e>>>24]<<24^r[e>>16&255]<<16^r[e>>8&255]<<8^r[255&e],i%o==0&&(e=e<<8^e>>>24^c<<24,c=c<<1^283*(c>>7))),a[i]=a[i-o]^e}for(let e=0;i;e++,i--){const t=a[3&e?i:i-4];s[e]=i<=4||e<4?t:n[0][r[t>>>24]]^n[1][r[t>>16&255]]^n[2][r[t>>8&255]]^n[3][r[255&t]]}}encrypt(e){return this._crypt(e,0)}decrypt(e){return this._crypt(e,1)}_precompute(){const e=this._tables[0],t=this._tables[1],r=e[4],n=t[4],o=[],i=[];let a,s,c,u;for(let e=0;e<256;e++)i[(o[e]=e<<1^283*(e>>7))^e]=e;for(let d=a=0;!r[d];d^=s||1,a=i[a]||1){let i=a^a<<1^a<<2^a<<3^a<<4;i=i>>8^255&i^99,r[d]=i,n[i]=d,u=o[c=o[s=o[d]]];let l=16843009*u^65537*c^257*s^16843008*d,p=257*o[i]^16843008*i;for(let r=0;r<4;r++)e[r][d]=p=p<<24^p>>>8,t[r][i]=l=l<<24^l>>>8}for(let r=0;r<5;r++)e[r]=e[r].slice(0),t[r]=t[r].slice(0)}_crypt(e,t){if(4!==e.length)throw new Error("invalid aes block size");const r=this._key[t],n=r.length/4-2,o=[0,0,0,0],i=this._tables[t],a=i[0],s=i[1],c=i[2],u=i[3],d=i[4];let l,p,m,g=e[0]^r[0],f=e[t?3:1]^r[1],S=e[2]^r[2],h=e[t?1:3]^r[3],y=4;for(let e=0;e<n;e++)l=a[g>>>24]^s[f>>16&255]^c[S>>8&255]^u[255&h]^r[y],p=a[f>>>24]^s[S>>16&255]^c[h>>8&255]^u[255&g]^r[y+1],m=a[S>>>24]^s[h>>16&255]^c[g>>8&255]^u[255&f]^r[y+2],h=a[h>>>24]^s[g>>16&255]^c[f>>8&255]^u[255&S]^r[y+3],y+=4,g=l,f=p,S=m;for(let e=0;e<4;e++)o[t?3&-e:e]=d[g>>>24]<<24^d[f>>16&255]<<16^d[S>>8&255]<<8^d[255&h]^r[y++],l=g,g=f,f=S,S=h,h=l;return o}},er={getRandomValues(e){const t=new Uint32Array(e.buffer),r=e=>{let t=987654321;const r=4294967295;return function(){return t=36969*(65535&t)+(t>>16)&r,(((t<<16)+(e=18e3*(65535&e)+(e>>16)&r)&r)/4294967296+.5)*(Math.random()>.5?1:-1)}};for(let n,o=0;o<e.length;o+=4){const e=r(4294967296*(n||Math.random()));n=987654071*e(),t[o/4]=4294967296*e()|0}return e}},tr=class{constructor(e,t){this._prf=e,this._initIv=t,this._iv=t}reset(){this._iv=this._initIv}update(e){return this.calculate(this._prf,e,this._iv)}incWord(e){if(255==(e>>24&255)){let t=e>>16&255,r=e>>8&255,n=255&e;255===t?(t=0,255===r?(r=0,255===n?n=0:++n):++r):++t,e=0,e+=t<<16,e+=r<<8,e+=n}else e+=1<<24;return e}incCounter(e){0===(e[0]=this.incWord(e[0]))&&(e[1]=this.incWord(e[1]))}calculate(e,t,r){let n;if(!(n=t.length))return[];const o=Zt.bitLength(t);for(let o=0;o<n;o+=4){this.incCounter(r);const n=e.encrypt(r);t[o]^=n[0],t[o+1]^=n[1],t[o+2]^=n[2],t[o+3]^=n[3]}return Zt.clamp(t,o)}},rr={importKey:e=>new rr.hmacSha1(Qt.bytes.toBits(e)),pbkdf2(e,t,r,n){if(r=r||1e4,n<0||r<0)throw new Error("invalid params to pbkdf2");const o=1+(n>>5)<<2;let i,a,s,c,u;const d=new ArrayBuffer(o),l=new DataView(d);let p=0;const m=Zt;for(t=Qt.bytes.toBits(t),u=1;p<(o||1);u++){for(i=a=e.encrypt(m.concat(t,[u])),s=1;s<r;s++)for(a=e.encrypt(a),c=0;c<a.length;c++)i[c]^=a[c];for(s=0;p<(o||1)&&s<i.length;s++)l.setInt32(p,i[s]),p+=4}return d.slice(0,n/8)},hmacSha1:class{constructor(e){const t=this,r=t._hash=Xt,n=[[],[]];t._baseHash=[new r,new r];const o=t._baseHash[0].blockSize/32;e.length>o&&(e=(new r).update(e).finalize());for(let t=0;t<o;t++)n[0][t]=909522486^e[t],n[1][t]=1549556828^e[t];t._baseHash[0].update(n[0]),t._baseHash[1].update(n[1]),t._resultHash=new r(t._baseHash[0])}reset(){const e=this;e._resultHash=new e._hash(e._baseHash[0]),e._updated=!1}update(e){this._updated=!0,this._resultHash.update(e)}digest(){const e=this,t=e._resultHash.finalize(),r=new e._hash(e._baseHash[1]).update(t).finalize();return e.reset(),r}encrypt(e){if(this._updated)throw new Error("encrypt on already updated hmac called!");return this.update(e),this.digest(e)}}},nr="undefined"!=typeof crypto&&"function"==typeof crypto.getRandomValues,or="Invalid password",ir="Invalid signature",ar="zipjs-abort-check-password";function sr(e){return nr?crypto.getRandomValues(e):er.getRandomValues(e)}const cr=16,ur="raw",dr={name:"PBKDF2"},lr=Object.assign({hash:{name:"HMAC"}},dr),pr=Object.assign({iterations:1e3,hash:{name:"SHA-1"}},dr),mr=["deriveBits"],gr=[8,12,16],fr=[16,24,32],Sr=10,hr=[0,0,0,0],yr="undefined",vr="function",Er=typeof crypto!=yr,Ar=Er&&crypto.subtle,_r=Er&&typeof Ar!=yr,Tr=Qt.bytes,Ir=Jt,br=tr,wr=rr.hmacSha1;let Cr=Er&&_r&&typeof Ar.importKey==vr,Dr=Er&&_r&&typeof Ar.deriveBits==vr;class Or extends TransformStream{constructor({password:e,signed:t,encryptionStrength:r,checkPasswordOnly:n}){super({start(){Object.assign(this,{ready:new Promise((e=>this.resolveReady=e)),password:e,signed:t,strength:r-1,pending:new Uint8Array})},async transform(e,t){const r=this,{password:o,strength:i,resolveReady:a,ready:s}=r;o?(await async function(e,t,r,n){const o=await Rr(e,t,r,Lr(n,0,gr[t])),i=Lr(n,gr[t]);if(o[0]!=i[0]||o[1]!=i[1])throw new Error(or)}(r,i,o,Lr(e,0,gr[i]+2)),e=Lr(e,gr[i]+2),n?t.error(new Error(ar)):a()):await s;const c=new Uint8Array(e.length-Sr-(e.length-Sr)%cr);t.enqueue(Nr(r,e,c,0,Sr,!0))},async flush(e){const{signed:t,ctr:r,hmac:n,pending:o,ready:i}=this;await i;const a=Lr(o,0,o.length-Sr),s=Lr(o,o.length-Sr);let c=new Uint8Array;if(a.length){const e=kr(Tr,a);n.update(e);const t=r.update(e);c=Ur(Tr,t)}if(t){const e=Lr(Ur(Tr,n.digest()),0,Sr);for(let t=0;t<Sr;t++)if(e[t]!=s[t])throw new Error(ir)}e.enqueue(c)}})}}class Pr extends TransformStream{constructor({password:e,encryptionStrength:t}){let r;super({start(){Object.assign(this,{ready:new Promise((e=>this.resolveReady=e)),password:e,strength:t-1,pending:new Uint8Array})},async transform(e,t){const r=this,{password:n,strength:o,resolveReady:i,ready:a}=r;let s=new Uint8Array;n?(s=await async function(e,t,r){const n=sr(new Uint8Array(gr[t]));return Mr(n,await Rr(e,t,r,n))}(r,o,n),i()):await a;const c=new Uint8Array(s.length+e.length-e.length%cr);c.set(s,0),t.enqueue(Nr(r,e,c,s.length,0))},async flush(e){const{ctr:t,hmac:n,pending:o,ready:i}=this;await i;let a=new Uint8Array;if(o.length){const e=t.update(kr(Tr,o));n.update(e),a=Ur(Tr,e)}r.signature=Ur(Tr,n.digest()).slice(0,Sr),e.enqueue(Mr(a,r.signature))}}),r=this}}function Nr(e,t,r,n,o,i){const{ctr:a,hmac:s,pending:c}=e,u=t.length-o;let d;for(c.length&&(t=Mr(c,t),r=function(e,t){if(t&&t>e.length){const r=e;(e=new Uint8Array(t)).set(r,0)}return e}(r,u-u%cr)),d=0;d<=u-cr;d+=cr){const e=kr(Tr,Lr(t,d,d+cr));i&&s.update(e);const o=a.update(e);i||s.update(o),r.set(Ur(Tr,o),d+n)}return e.pending=Lr(t,d),r}async function Rr(e,t,r,n){e.password=null;const o=Yt(r),i=await async function(e,t,r,n,o){if(!Cr)return rr.importKey(t);try{return await Ar.importKey(e,t,r,!1,o)}catch(e){return Cr=!1,rr.importKey(t)}}(ur,o,lr,0,mr),a=await async function(e,t,r){if(!Dr)return rr.pbkdf2(t,e.salt,pr.iterations,r);try{return await Ar.deriveBits(e,t,r)}catch(n){return Dr=!1,rr.pbkdf2(t,e.salt,pr.iterations,r)}}(Object.assign({salt:n},pr),i,8*(2*fr[t]+2)),s=new Uint8Array(a),c=kr(Tr,Lr(s,0,fr[t])),u=kr(Tr,Lr(s,fr[t],2*fr[t])),d=Lr(s,2*fr[t]);return Object.assign(e,{keys:{key:c,authentication:u,passwordVerification:d},ctr:new br(new Ir(c),Array.from(hr)),hmac:new wr(u)}),d}function Mr(e,t){let r=e;return e.length+t.length&&(r=new Uint8Array(e.length+t.length),r.set(e,0),r.set(t,e.length)),r}function Lr(e,t,r){return e.subarray(t,r)}function Ur(e,t){return e.fromBits(t)}function kr(e,t){return e.toBits(t)}class Fr extends TransformStream{constructor({password:e,passwordVerification:t,checkPasswordOnly:r}){super({start(){Object.assign(this,{password:e,passwordVerification:t}),$r(this,e)},transform(e,t){const n=this;if(n.password){const t=Gr(n,e.subarray(0,12));if(n.password=null,t[11]!=n.passwordVerification)throw new Error(or);e=e.subarray(12)}r?t.error(new Error(ar)):t.enqueue(Gr(n,e))}})}}class Br extends TransformStream{constructor({password:e,passwordVerification:t}){super({start(){Object.assign(this,{password:e,passwordVerification:t}),$r(this,e)},transform(e,t){const r=this;let n,o;if(r.password){r.password=null;const t=sr(new Uint8Array(12));t[11]=r.passwordVerification,n=new Uint8Array(e.length+t.length),n.set(xr(r,t),0),o=12}else n=new Uint8Array(e.length),o=0;n.set(xr(r,e),o),t.enqueue(n)}})}}function Gr(e,t){const r=new Uint8Array(t.length);for(let n=0;n<t.length;n++)r[n]=Kr(e)^t[n],jr(e,r[n]);return r}function xr(e,t){const r=new Uint8Array(t.length);for(let n=0;n<t.length;n++)r[n]=Kr(e)^t[n],jr(e,t[n]);return r}function $r(e,t){const r=[305419896,591751049,878082192];Object.assign(e,{keys:r,crcKey0:new zt(r[0]),crcKey2:new zt(r[2])});for(let r=0;r<t.length;r++)jr(e,t.charCodeAt(r))}function jr(e,t){let[r,n,o]=e.keys;e.crcKey0.append([t]),r=~e.crcKey0.get(),n=Hr(Math.imul(Hr(n+Vr(r)),134775813)+1),e.crcKey2.append([n>>>24]),o=~e.crcKey2.get(),e.keys=[r,n,o]}function Kr(e){const t=2|e.keys[2];return Vr(Math.imul(t,1^t)>>>8)}function Vr(e){return 255&e}function Hr(e){return 4294967295&e}const Wr="deflate-raw";class zr extends TransformStream{constructor(e,{chunkSize:t,CompressionStream:r,CompressionStreamNative:n}){super({});const{compressed:o,encrypted:i,useCompressionStream:a,zipCrypto:s,signed:c,level:u}=e,d=this;let l,p,m=Yr(super.readable);i&&!s||!c||([m,l]=m.tee(),l=Xr(l,new qt)),o&&(m=Qr(m,a,{level:u,chunkSize:t},n,r)),i&&(s?m=Xr(m,new Br(e)):(p=new Pr(e),m=Xr(m,p))),Zr(d,m,(async()=>{let e;i&&!s&&(e=p.signature),i&&!s||!c||(e=await l.getReader().read(),e=new DataView(e.value.buffer).getUint32(0)),d.signature=e}))}}class qr extends TransformStream{constructor(e,{chunkSize:t,DecompressionStream:r,DecompressionStreamNative:n}){super({});const{zipCrypto:o,encrypted:i,signed:a,signature:s,compressed:c,useCompressionStream:u}=e;let d,l,p=Yr(super.readable);i&&(o?p=Xr(p,new Fr(e)):(l=new Or(e),p=Xr(p,l))),c&&(p=Qr(p,u,{chunkSize:t},n,r)),i&&!o||!a||([p,d]=p.tee(),d=Xr(d,new qt)),Zr(this,p,(async()=>{if((!i||o)&&a){const e=await d.getReader().read(),t=new DataView(e.value.buffer);if(s!=t.getUint32(0,!1))throw new Error(ir)}}))}}function Yr(e){return Xr(e,new TransformStream({transform(e,t){e&&e.length&&t.enqueue(e)}}))}function Zr(e,t,r){t=Xr(t,new TransformStream({flush:r})),Object.defineProperty(e,"readable",{get:()=>t})}function Qr(e,t,r,n,o){try{e=Xr(e,new(t&&n?n:o)(Wr,r))}catch(n){if(!t)throw n;e=Xr(e,new o(Wr,r))}return e}function Xr(e,t){return e.pipeThrough(t)}const Jr="message",en="start",tn="pull",rn="data",nn="ack",on="close",an="deflate",sn="inflate";class cn extends TransformStream{constructor(e,t){super({});const r=this,{codecType:n}=e;let o;n.startsWith(an)?o=zr:n.startsWith(sn)&&(o=qr);let i=0;const a=new o(e,t),s=super.readable,c=new TransformStream({transform(e,t){e&&e.length&&(i+=e.length,t.enqueue(e))},flush(){const{signature:e}=a;Object.assign(r,{signature:e,size:i})}});Object.defineProperty(r,"readable",{get:()=>s.pipeThrough(a).pipeThrough(c)})}}const un=typeof Worker!=Mt;class dn{constructor(e,{readable:t,writable:r},{options:n,config:o,streamOptions:i,useWebWorkers:a,transferStreams:s,scripts:c},u){const{signal:d}=i;return Object.assign(e,{busy:!0,readable:t.pipeThrough(new ln(t,i,o),{signal:d}),writable:r,options:Object.assign({},n),scripts:c,transferStreams:s,terminate(){const{worker:t,busy:r}=e;t&&!r&&(t.terminate(),e.interface=null)},onTaskFinished(){e.busy=!1,u(e)}}),(a&&un?gn:mn)(e,o)}}class ln extends TransformStream{constructor(e,{onstart:t,onprogress:r,size:n,onend:o},{chunkSize:i}){let a=0;super({start(){t&&pn(t,n)},async transform(e,t){a+=e.length,r&&await pn(r,a,n),t.enqueue(e)},flush(){e.size=a,o&&pn(o,a)}},{highWaterMark:1,size:()=>i})}}async function pn(e,...t){try{await e(...t)}catch(e){}}function mn(e,t){return{run:()=>async function({options:e,readable:t,writable:r,onTaskFinished:n},o){const i=new cn(e,o);try{await t.pipeThrough(i).pipeTo(r,{preventClose:!0,preventAbort:!0});const{signature:e,size:n}=i;return{signature:e,size:n}}finally{n()}}(e,t)}}function gn(e,{baseURL:t,chunkSize:r}){return e.interface||Object.assign(e,{worker:hn(e.scripts[0],t,e),interface:{run:()=>async function(e,t){let r,n;const o=new Promise(((e,t)=>{r=e,n=t}));Object.assign(e,{reader:null,writer:null,resolveResult:r,rejectResult:n,result:o});const{readable:i,options:a,scripts:s}=e,{writable:c,closed:u}=function(e){const t=e.getWriter();let r;const n=new Promise((e=>r=e)),o=new WritableStream({async write(e){await t.ready,await t.write(e)},close(){t.releaseLock(),r()},abort:e=>t.abort(e)});return{writable:o,closed:n}}(e.writable);yn({type:en,scripts:s.slice(1),options:a,config:t,readable:i,writable:c},e)||Object.assign(e,{reader:i.getReader(),writer:c.getWriter()});const d=await o;try{await c.close()}catch(e){}return await u,d}(e,{chunkSize:r})}}),e.interface}let fn=!0,Sn=!0;function hn(e,t,r){const n={type:"module"};let o,i;typeof e==Lt&&(e=e());try{o=new URL(e,t)}catch(t){o=e}if(fn)try{i=new Worker(o)}catch(e){fn=!1,i=new Worker(o,n)}else i=new Worker(o,n);return i.addEventListener(Jr,(e=>async function({data:e},t){const{type:r,value:n,messageId:o,result:i,error:a}=e,{reader:s,writer:c,resolveResult:u,rejectResult:d,onTaskFinished:l}=t;try{if(a){const{message:e,stack:t,code:r,name:n}=a,o=new Error(e);Object.assign(o,{stack:t,code:r,name:n}),p(o)}else{if(r==tn){const{value:e,done:r}=await s.read();yn({type:rn,value:e,done:r,messageId:o},t)}r==rn&&(await c.ready,await c.write(new Uint8Array(n)),yn({type:nn,messageId:o},t)),r==on&&p(null,i)}}catch(a){p(a)}function p(e,t){e?d(e):u(t),c&&c.releaseLock(),l()}}(e,r))),i}function yn(e,{worker:t,writer:r,onTaskFinished:n,transferStreams:o}){try{let{value:n,readable:i,writable:a}=e;const s=[];if(n){const{buffer:t,length:r}=n;r!=t.byteLength&&(n=new Uint8Array(n)),e.value=n.buffer,s.push(e.value)}if(o&&Sn?(i&&s.push(i),a&&s.push(a)):e.readable=e.writable=null,s.length)try{return t.postMessage(e,s),!0}catch(r){Sn=!1,e.readable=e.writable=null,t.postMessage(e)}else t.postMessage(e)}catch(e){throw r&&r.releaseLock(),n(),e}}let vn=[];const En=[];let An=0;async function _n(e,t){const{options:r,config:n}=t,{transferStreams:o,useWebWorkers:i,useCompressionStream:a,codecType:s,compressed:c,signed:u,encrypted:d}=r,{workerScripts:l,maxWorkers:p,terminateWorkerTimeout:m}=n;t.transferStreams=o||o===Rt;const g=!(c||u||d||t.transferStreams);let f;t.useWebWorkers=!g&&(i||i===Rt&&n.useWebWorkers),t.scripts=t.useWebWorkers&&l?l[s]:[],r.useCompressionStream=a||a===Rt&&n.useCompressionStream;const S=vn.find((e=>!e.busy));if(S)Tn(S),f=new dn(S,e,t,h);else if(vn.length<p){const r={indexWorker:An};An++,vn.push(r),f=new dn(r,e,t,h)}else f=await new Promise((r=>En.push({resolve:r,stream:e,workerOptions:t})));return f.run();function h(e){if(En.length){const[{resolve:t,stream:r,workerOptions:n}]=En.splice(0,1);t(new dn(e,r,n,h))}else e.worker?(Tn(e),Number.isFinite(m)&&m>=0&&(e.terminateTimeout=setTimeout((()=>{vn=vn.filter((t=>t!=e)),e.terminate()}),m))):vn=vn.filter((t=>t!=e))}}function Tn(e){const{terminateTimeout:t}=e;t&&(clearTimeout(t),e.terminateTimeout=null)}function In(e,t,r){return class{constructor(n){const o=this;Object.hasOwn(n,"level")&&void 0===n.level&&delete n.level,o.codec=new e(Object.assign({},t,n)),r(o.codec,(e=>{if(o.pendingData){const t=o.pendingData;o.pendingData=new Uint8Array(t.length+e.length);const{pendingData:r}=o;r.set(t,0),r.set(e,t.length)}else o.pendingData=new Uint8Array(e)}))}append(e){return this.codec.push(e),n(this)}flush(){return this.codec.push(new Uint8Array,!0),n(this)}};function n(e){if(e.pendingData){const t=e.pendingData;return e.pendingData=null,t}return new Uint8Array}}const bn="HTTP error ",wn="HTTP Range not supported",Cn="Writer iterator completed too soon",Dn="Content-Length",On="Content-Range",Pn="Accept-Ranges",Nn="Range",Rn="HEAD",Mn="GET",Ln="bytes",Un=65536,kn="writable";class Fn{constructor(){this.size=0}init(){this.initialized=!0}}class Bn extends Fn{get readable(){const e=this,{chunkSize:t=Un}=e,r=new ReadableStream({start(){this.chunkOffset=0},async pull(n){const{offset:o=0,size:i,diskNumberStart:a}=r,{chunkOffset:s}=this;n.enqueue(await go(e,o+s,Math.min(t,i-s),a)),s+t>i?n.close():this.chunkOffset+=t}});return r}}class Gn extends Fn{constructor(){super();const e=this,t=new WritableStream({write:t=>e.writeUint8Array(t)});Object.defineProperty(e,kn,{get:()=>t})}writeUint8Array(){}}class xn extends Bn{constructor(e){super();let t=e.length;for(;"="==e.charAt(t-1);)t--;const r=e.indexOf(",")+1;Object.assign(this,{dataURI:e,dataStart:r,size:Math.floor(.75*(t-r))})}readUint8Array(e,t){const{dataStart:r,dataURI:n}=this,o=new Uint8Array(t),i=4*Math.floor(e/3),a=atob(n.substring(i+r,4*Math.ceil((e+t)/3)+r)),s=e-3*Math.floor(i/4);for(let e=s;e<s+t;e++)o[e-s]=a.charCodeAt(e);return o}}class $n extends Gn{constructor(e){super(),Object.assign(this,{data:"data:"+(e||"")+";base64,",pending:[]})}writeUint8Array(e){const t=this;let r=0,n=t.pending;const o=t.pending.length;for(t.pending="",r=0;r<3*Math.floor((o+e.length)/3)-o;r++)n+=String.fromCharCode(e[r]);for(;r<e.length;r++)t.pending+=String.fromCharCode(e[r]);n.length>2?t.data+=btoa(n):t.pending=n}getData(){return this.data+btoa(this.pending)}}class jn extends Bn{constructor(e){super(),Object.assign(this,{blob:e,size:e.size})}async readUint8Array(e,t){const r=this,n=e+t,o=e||n<r.size?r.blob.slice(e,n):r.blob;return new Uint8Array(await o.arrayBuffer())}}class Kn extends Fn{constructor(e){super();const t=new TransformStream,r=[];e&&r.push(["Content-Type",e]),Object.defineProperty(this,kn,{get:()=>t.writable}),this.blob=new Response(t.readable,{headers:r}).blob()}getData(){return this.blob}}class Vn extends jn{constructor(e){super(new Blob([e],{type:"text/plain"}))}}class Hn extends Kn{constructor(e){super(e),Object.assign(this,{encoding:e,utf8:!e||"utf-8"==e.toLowerCase()})}async getData(){const{encoding:e,utf8:t}=this,r=await super.getData();if(r.text&&t)return r.text();{const t=new FileReader;return new Promise(((n,o)=>{Object.assign(t,{onload:({target:e})=>n(e.result),onerror:()=>o(t.error)}),t.readAsText(r,e)}))}}}class Wn extends Bn{constructor(e,t){super(),qn(this,e,t)}async init(){await Yn(this,no,Jn),super.init()}readUint8Array(e,t){return Zn(this,e,t,no,Jn)}}class zn extends Bn{constructor(e,t){super(),qn(this,e,t)}async init(){await Yn(this,oo,eo),super.init()}readUint8Array(e,t){return Zn(this,e,t,oo,eo)}}function qn(e,t,r){const{preventHeadRequest:n,useRangeHeader:o,forceRangeRequests:i}=r;delete(r=Object.assign({},r)).preventHeadRequest,delete r.useRangeHeader,delete r.forceRangeRequests,delete r.useXHR,Object.assign(e,{url:t,options:r,preventHeadRequest:n,useRangeHeader:o,forceRangeRequests:i})}async function Yn(e,t,r){const{url:n,useRangeHeader:o,forceRangeRequests:i}=e;if(function(e){const{baseURL:t}=xt(),{protocol:r}=new URL(e,t);return"http:"==r||"https:"==r}(n)&&(o||i)){const{headers:n}=await t(Mn,e,Qn(e));if(!i&&n.get(Pn)!=Ln)throw new Error(wn);{let o;const i=n.get(On);if(i){const e=i.trim().split(/\s*\/\s*/);if(e.length){const t=e[1];t&&"*"!=t&&(o=Number(t))}}o===Rt?await ro(e,t,r):e.size=o}}else await ro(e,t,r)}async function Zn(e,t,r,n,o){const{useRangeHeader:i,forceRangeRequests:a,options:s}=e;if(i||a){const o=await n(Mn,e,Qn(e,t,r));if(206!=o.status)throw new Error(wn);return new Uint8Array(await o.arrayBuffer())}{const{data:n}=e;return n||await o(e,s),new Uint8Array(e.data.subarray(t,t+r))}}function Qn(e,t=0,r=1){return Object.assign({},Xn(e),{[Nn]:Ln+"="+t+"-"+(t+r-1)})}function Xn({options:e}){const{headers:t}=e;if(t)return Symbol.iterator in t?Object.fromEntries(t):t}async function Jn(e){await to(e,no)}async function eo(e){await to(e,oo)}async function to(e,t){const r=await t(Mn,e,Xn(e));e.data=new Uint8Array(await r.arrayBuffer()),e.size||(e.size=e.data.length)}async function ro(e,t,r){if(e.preventHeadRequest)await r(e,e.options);else{const n=(await t(Rn,e,Xn(e))).headers.get(Dn);n?e.size=Number(n):await r(e,e.options)}}async function no(e,{options:t,url:r},n){const o=await fetch(r,Object.assign({},t,{method:e,headers:n}));if(o.status<400)return o;throw 416==o.status?new Error(wn):new Error(bn+(o.statusText||o.status))}function oo(e,{url:t},r){return new Promise(((n,o)=>{const i=new XMLHttpRequest;if(i.addEventListener("load",(()=>{if(i.status<400){const e=[];i.getAllResponseHeaders().trim().split(/[\r\n]+/).forEach((t=>{const r=t.trim().split(/\s*:\s*/);r[0]=r[0].trim().replace(/^[a-z]|-[a-z]/g,(e=>e.toUpperCase())),e.push(r)})),n({status:i.status,arrayBuffer:()=>i.response,headers:new Map(e)})}else o(416==i.status?new Error(wn):new Error(bn+(i.statusText||i.status)))}),!1),i.addEventListener("error",(e=>o(e.detail.error)),!1),i.open(e,t),r)for(const e of Object.entries(r))i.setRequestHeader(e[0],e[1]);i.responseType="arraybuffer",i.send()}))}class io extends Bn{constructor(e,t={}){super(),Object.assign(this,{url:e,reader:t.useXHR?new zn(e,t):new Wn(e,t)})}set size(e){}get size(){return this.reader.size}async init(){await this.reader.init(),super.init()}readUint8Array(e,t){return this.reader.readUint8Array(e,t)}}class ao extends Bn{constructor(e){super(),Object.assign(this,{array:e,size:e.length})}readUint8Array(e,t){return this.array.slice(e,e+t)}}class so extends Gn{init(e=0){Object.assign(this,{offset:0,array:new Uint8Array(e)}),super.init()}writeUint8Array(e){const t=this;if(t.offset+e.length>t.array.length){const r=t.array;t.array=new Uint8Array(r.length+e.length),t.array.set(r)}t.array.set(e,t.offset),t.offset+=e.length}getData(){return this.array}}class co extends Bn{constructor(e){super(),this.readers=e}async init(){const e=this,{readers:t}=e;e.lastDiskNumber=0,await Promise.all(t.map((async t=>{await t.init(),e.size+=t.size}))),super.init()}async readUint8Array(e,t,r=0){const n=this,{readers:o}=this;let i,a=r;-1==a&&(a=o.length-1);let s=e;for(;s>=o[a].size;)s-=o[a].size,a++;const c=o[a],u=c.size;if(s+t<=u)i=await go(c,s,t);else{const o=u-s;i=new Uint8Array(t),i.set(await go(c,s,o)),i.set(await n.readUint8Array(e+o,t-o,r),o)}return n.lastDiskNumber=Math.max(a,n.lastDiskNumber),i}}class uo extends Fn{constructor(e,t=4294967295){super();const r=this;let n,o,i;Object.assign(r,{diskNumber:0,diskOffset:0,size:0,maxSize:t,availableSize:t});const a=new WritableStream({async write(t){const{availableSize:a}=r;if(i)t.length>=a?(await s(t.slice(0,a)),await c(),r.diskOffset+=n.size,r.diskNumber++,i=null,await this.write(t.slice(a))):await s(t);else{const{value:a,done:s}=await e.next();if(s&&!a)throw new Error(Cn);n=a,n.size=0,n.maxSize&&(r.maxSize=n.maxSize),r.availableSize=r.maxSize,await lo(n),o=a.writable,i=o.getWriter(),await this.write(t)}},async close(){await i.ready,await c()}});async function s(e){const t=e.length;t&&(await i.ready,await i.write(e),n.size+=t,r.size+=t,r.availableSize-=t)}async function c(){o.size=n.size,await i.close()}Object.defineProperty(r,kn,{get:()=>a})}}async function lo(e,t){e.init&&!e.initialized&&await e.init(t)}function po(e){return Array.isArray(e)&&(e=new co(e)),e instanceof ReadableStream&&(e={readable:e}),e}function mo(e){e.writable===Rt&&typeof e.next==Lt&&(e=new uo(e)),e instanceof WritableStream&&(e={writable:e});const{writable:t}=e;return t.size===Rt&&(t.size=0),e instanceof uo||Object.assign(e,{diskNumber:0,diskOffset:0,availableSize:1/0,maxSize:1/0}),e}function go(e,t,r,n){return e.readUint8Array(t,r,n)}const fo=co,So=uo,ho="\0☺☻♥♦♣♠•◘○◙♂♀♪♫☼►◄↕‼¶§▬↨↑↓→←∟↔▲▼ !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~⌂ÇüéâäàåçêëèïîìÄÅÉæÆôöòûùÿÖÜ¢£¥₧ƒáíóúñÑªº¿⌐¬½¼¡«»░▒▓│┤╡╢╖╕╣║╗╝╜╛┐└┴┬├─┼╞╟╚╔╩╦╠═╬╧╨╤╥╙╘╒╓╫╪┘┌█▄▌▐▀αßΓπΣσµτΦΘΩδ∞φε∩≡±≥≤⌠⌡÷≈°∙·√ⁿ²■ ".split(""),yo=256==ho.length;function vo(e,t){return t&&"cp437"==t.trim().toLowerCase()?function(e){if(yo){let t="";for(let r=0;r<e.length;r++)t+=ho[e[r]];return t}return(new TextDecoder).decode(e)}(e):new TextDecoder(t).decode(e)}const Eo="filename",Ao="rawFilename",_o="comment",To="rawComment",Io="uncompressedSize",bo="compressedSize",wo="offset",Co="diskNumberStart",Do="lastModDate",Oo="rawLastModDate",Po="lastAccessDate",No="rawLastAccessDate",Ro="creationDate",Mo="rawCreationDate",Lo="internalFileAttribute",Uo="externalFileAttribute",ko="msDosCompatible",Fo="zip64",Bo=[Eo,Ao,bo,Io,Do,Oo,_o,To,Po,Ro,wo,Co,Co,Lo,Uo,ko,Fo,"directory","bitFlag","encrypted","signature","filenameUTF8","commentUTF8","compressionMethod","version","versionMadeBy","extraField","rawExtraField","extraFieldZip64","extraFieldUnicodePath","extraFieldUnicodeComment","extraFieldAES","extraFieldNTFS","extraFieldExtendedTimestamp"];class Go{constructor(e){Bo.forEach((t=>this[t]=e[t]))}}const xo="File format is not recognized",$o="End of central directory not found",jo="End of Zip64 central directory not found",Ko="End of Zip64 central directory locator not found",Vo="Central directory header not found",Ho="Local file header not found",Wo="Zip64 extra field not found",zo="File contains encrypted entry",qo="Encryption method not supported",Yo="Compression method not supported",Zo="Split zip file",Qo="utf-8",Xo="cp437",Jo=[[Io,ut],[bo,ut],[wo,ut],[Co,dt]],ei={[dt]:{getValue:li,bytes:4},[ut]:{getValue:pi,bytes:8}};class ti{constructor(e,t={}){Object.assign(this,{reader:po(e),options:t,config:xt()})}async*getEntriesGenerator(e={}){const t=this;let{reader:r}=t;const{config:n}=t;if(await lo(r),r.size!==Rt&&r.readUint8Array||(r=new jn(await new Response(r.readable).blob()),await lo(r)),r.size<ht)throw new Error(xo);r.chunkSize=$t(n);const o=await async function(e,t,r,n,o){const i=new Uint8Array(4);!function(e,t,r){e.setUint32(0,101010256,!0)}(mi(i));return await a(22)||await a(Math.min(1048582,r));async function a(t){const n=r-t,o=await go(e,n,t);for(let e=o.length-22;e>=0;e--)if(o[e]==i[0]&&o[e+1]==i[1]&&o[e+2]==i[2]&&o[e+3]==i[3])return{offset:n+e,buffer:o.slice(e,e+22).buffer}}}(r,0,r.size);if(!o)throw li(mi(await go(r,0,4)))==pt?new Error(Zo):new Error($o);const i=mi(o);let a=li(i,12),s=li(i,16);const c=o.offset,u=di(i,20),d=c+ht+u;let l=di(i,4);const p=r.lastDiskNumber||0;let m=di(i,6),g=di(i,8),f=0,S=0;if(s==ut||a==ut||g==dt||m==dt){const e=mi(await go(r,o.offset-20,20));if(li(e,0)!=St)throw new Error(jo);s=pi(e,8);let t=await go(r,s,56,-1),n=mi(t);const i=o.offset-20-56;if(li(n,0)!=ft&&s!=i){const e=s;s=i,f=s-e,t=await go(r,s,56,-1),n=mi(t)}if(li(n,0)!=ft)throw new Error(Ko);l==dt&&(l=li(n,16)),m==dt&&(m=li(n,20)),g==dt&&(g=pi(n,32)),a==ut&&(a=pi(n,40)),s-=a}if(p!=l)throw new Error(Zo);if(s<0||s>=r.size)throw new Error(xo);let h=0,y=await go(r,s,a,m),v=mi(y);if(a){const e=o.offset-a;if(li(v,h)!=mt&&s!=e){const t=s;s=e,f=s-t,y=await go(r,s,a,m),v=mi(y)}}if(s<0||s>=r.size)throw new Error(xo);const E=ai(t,e,"filenameEncoding"),A=ai(t,e,"commentEncoding");for(let o=0;o<g;o++){const i=new ri(r,n,t.options);if(li(v,h)!=mt)throw new Error(Vo);ni(i,v,h+6);const a=Boolean(i.bitFlag.languageEncodingFlag),s=h+46,c=s+i.filenameLength,u=c+i.extraFieldLength,d=di(v,h+4),l=0==(0&d),p=y.subarray(s,c),m=di(v,h+32),_=u+m,T=y.subarray(u,_),I=a,b=a,w=l&&16==(16&ui(v,h+38)),C=li(v,h+42)+f;Object.assign(i,{versionMadeBy:d,msDosCompatible:l,compressedSize:0,uncompressedSize:0,commentLength:m,directory:w,offset:C,diskNumberStart:di(v,h+34),internalFileAttribute:di(v,h+36),externalFileAttribute:li(v,h+38),rawFilename:p,filenameUTF8:I,commentUTF8:b,rawExtraField:y.subarray(c,u)});const[D,O]=await Promise.all([vo(p,I?Qo:E||Xo),vo(T,b?Qo:A||Xo)]);Object.assign(i,{rawComment:T,filename:D,comment:O,directory:w||D.endsWith(Ot)}),S=Math.max(C,S),await oi(i,i,v,h+6);const P=new Go(i);P.getData=(e,t)=>i.getData(e,P,t),h=_;const{onprogress:N}=e;if(N)try{await N(o+1,g,new Go(i))}catch(e){}yield P}const _=ai(t,e,"extractPrependedData"),T=ai(t,e,"extractAppendedData");return _&&(t.prependedData=S>0?await go(r,0,S):new Uint8Array),t.comment=u?await go(r,c+ht,u):new Uint8Array,T&&(t.appendedData=d<r.size?await go(r,d,r.size-d):new Uint8Array),!0}async getEntries(e={}){const t=[];for await(const r of this.getEntriesGenerator(e))t.push(r);return t}async close(){}}class ri{constructor(e,t,r){Object.assign(this,{reader:e,config:t,options:r})}async getData(e,t,r={}){const n=this,{reader:o,offset:i,diskNumberStart:a,extraFieldAES:s,compressionMethod:c,config:u,bitFlag:d,signature:l,rawLastModDate:p,uncompressedSize:m,compressedSize:g}=n,f=n.localDirectory={},S=mi(await go(o,i,30,a));let h=ai(n,r,"password");if(h=h&&h.length&&h,s&&99!=s.originalCompressionMethod)throw new Error(Yo);if(0!=c&&8!=c)throw new Error(Yo);if(li(S,0)!=lt)throw new Error(Ho);ni(f,S,4),f.rawExtraField=f.extraFieldLength?await go(o,i+30+f.filenameLength,f.extraFieldLength,a):new Uint8Array,await oi(n,f,S,4),Object.assign(t,{lastAccessDate:f.lastAccessDate,creationDate:f.creationDate});const y=n.encrypted&&f.encrypted,v=y&&!s;if(y){if(!v&&s.strength===Rt)throw new Error(qo);if(!h)throw new Error(zo)}const E=i+30+f.filenameLength+f.extraFieldLength,A=o.readable;A.diskNumberStart=a,A.offset=E;let _=A.size=g;const T=ai(n,r,"signal"),I=ai(n,r,"checkPasswordOnly");I&&(e=new WritableStream),e=mo(e),await lo(e,m);const{writable:b}=e,{onstart:w,onprogress:C,onend:D}=r,O={options:{codecType:sn,password:h,zipCrypto:v,encryptionStrength:s&&s.strength,signed:ai(n,r,"checkSignature"),passwordVerification:v&&(d.dataDescriptor?p>>>8&255:l>>>24&255),signature:l,compressed:0!=c,encrypted:y,useWebWorkers:ai(n,r,"useWebWorkers"),useCompressionStream:ai(n,r,"useCompressionStream"),transferStreams:ai(n,r,"transferStreams"),checkPasswordOnly:I},config:u,streamOptions:{signal:T,size:_,onstart:w,onprogress:C,onend:D}};let P=0;try{({outputSize:P}=await _n({readable:A,writable:b},O))}catch(e){if(!I||e.message!=ar)throw e}finally{const e=ai(n,r,"preventClose");b.size+=P,e||b.locked||await b.close()}return I?void 0:e.getData?e.getData():b}}function ni(e,t,r){const n=e.rawBitFlag=di(t,r+2),o=(n&bt)==bt,i=li(t,r+6);Object.assign(e,{encrypted:o,version:di(t,r),bitFlag:{level:(n&wt)>>1,dataDescriptor:(n&Ct)==Ct,languageEncodingFlag:(n&Dt)==Dt},rawLastModDate:i,lastModDate:si(i),filenameLength:di(t,r+22),extraFieldLength:di(t,r+24)})}async function oi(e,t,r,n){const{rawExtraField:o}=t,i=t.extraField=new Map,a=mi(new Uint8Array(o));let s=0;try{for(;s<o.length;){const e=di(a,s),t=di(a,s+2);i.set(e,{type:e,data:o.slice(s+4,s+4+t)}),s+=4+t}}catch(e){}const c=di(r,n+4);Object.assign(t,{signature:li(r,n+10),uncompressedSize:li(r,n+18),compressedSize:li(r,n+14)});const u=i.get(yt);u&&(function(e,t){t.zip64=!0;const r=mi(e.data),n=Jo.filter((([e,r])=>t[e]==r));for(let o=0,i=0;o<n.length;o++){const[a,s]=n[o];if(t[a]==s){const n=ei[s];t[a]=e[a]=n.getValue(r,i),i+=n.bytes}else if(e[a])throw new Error(Wo)}}(u,t),t.extraFieldZip64=u);const d=i.get(Tt);d&&(await ii(d,Eo,Ao,t,e),t.extraFieldUnicodePath=d);const l=i.get(It);l&&(await ii(l,_o,To,t,e),t.extraFieldUnicodeComment=l);const p=i.get(vt);p?(function(e,t,r){const n=mi(e.data),o=ui(n,4);Object.assign(e,{vendorVersion:ui(n,0),vendorId:ui(n,2),strength:o,originalCompressionMethod:r,compressionMethod:di(n,5)}),t.compressionMethod=e.compressionMethod}(p,t,c),t.extraFieldAES=p):t.compressionMethod=c;const m=i.get(Et);m&&(function(e,t){const r=mi(e.data);let n,o=4;try{for(;o<e.data.length&&!n;){const t=di(r,o),i=di(r,o+2);t==At&&(n=e.data.slice(o+4,o+4+i)),o+=4+i}}catch(e){}try{if(n&&24==n.length){const r=mi(n),o=r.getBigUint64(0,!0),i=r.getBigUint64(8,!0),a=r.getBigUint64(16,!0);Object.assign(e,{rawLastModDate:o,rawLastAccessDate:i,rawCreationDate:a});const s=ci(o),c={lastModDate:s,lastAccessDate:ci(i),creationDate:ci(a)};Object.assign(e,c),Object.assign(t,c)}}catch(e){}}(m,t),t.extraFieldNTFS=m);const g=i.get(_t);g&&(function(e,t){const r=mi(e.data),n=ui(r,0),o=[],i=[];1==(1&n)&&(o.push(Do),i.push(Oo)),2==(2&n)&&(o.push(Po),i.push(No)),4==(4&n)&&(o.push(Ro),i.push(Mo));let a=1;o.forEach(((n,o)=>{if(e.data.length>=a+4){const s=li(r,a);t[n]=e[n]=new Date(1e3*s);const c=i[o];e[c]=s}a+=4}))}(g,t),t.extraFieldExtendedTimestamp=g)}async function ii(e,t,r,n,o){const i=mi(e.data),a=new zt;a.append(o[r]);const s=mi(new Uint8Array(4));s.setUint32(0,a.get(),!0),Object.assign(e,{version:ui(i,0),signature:li(i,1),[t]:await vo(e.data.subarray(5)),valid:!o.bitFlag.languageEncodingFlag&&e.signature==li(s,0)}),e.valid&&(n[t]=e[t],n[t+"UTF8"]=!0)}function ai(e,t,r){return t[r]===Rt?e.options[r]:t[r]}function si(e){const t=(4294901760&e)>>16,r=65535&e;try{return new Date(1980+((65024&t)>>9),((480&t)>>5)-1,31&t,(63488&r)>>11,(2016&r)>>5,2*(31&r),0)}catch(e){}}function ci(e){return new Date(Number(e/BigInt(1e4)-BigInt(116444736e5)))}function ui(e,t){return e.getUint8(t)}function di(e,t){return e.getUint16(t,!0)}function li(e,t){return e.getUint32(t,!0)}function pi(e,t){return Number(e.getBigUint64(t,!0))}function mi(e){return new DataView(e.buffer)}const gi="File already exists",fi="Zip file comment exceeds 64KB",Si="File entry comment exceeds 64KB",hi="File entry name exceeds 64KB",yi="Version exceeds 65535",vi="The strength must equal 1, 2, or 3",Ei="Extra field type exceeds 65535",Ai="Extra field data exceeds 64KB",_i="Zip64 is not supported (make sure 'keepOrder' is set to 'true')",Ti=new Uint8Array([7,0,2,0,65,69,3,0,0]);let Ii=0;const bi=[];class wi{constructor(e,t={}){e=mo(e),Object.assign(this,{writer:e,addSplitZipSignature:e instanceof uo,options:t,config:xt(),files:new Map,filenames:new Set,offset:e.writable.size,pendingEntriesSize:0,pendingAddFileCalls:new Set,bufferedWrites:0})}async add(e="",t,r={}){const n=this,{pendingAddFileCalls:o,config:i}=n;let a;Ii<i.maxWorkers?Ii++:await new Promise((e=>bi.push(e)));try{if(e=e.trim(),n.filenames.has(e))throw new Error(gi);return n.filenames.add(e),a=async function(e,t,r,n){t=t.trim(),n.directory&&!t.endsWith(Ot)?t+=Ot:n.directory=t.endsWith(Ot);const o=Yt(t);if(ki(o)>dt)throw new Error(hi);const i=n.comment||"",a=Yt(i);if(ki(a)>dt)throw new Error(Si);const s=Oi(e,n,"version",20);if(s>dt)throw new Error(yi);const c=Oi(e,n,"versionMadeBy",20);if(c>dt)throw new Error(yi);const u=Oi(e,n,Do,new Date),d=Oi(e,n,Po),l=Oi(e,n,Ro),p=Oi(e,n,ko,!0),m=Oi(e,n,Lo,0),g=Oi(e,n,Uo,0),f=Oi(e,n,"password"),S=Oi(e,n,"encryptionStrength",3),h=Oi(e,n,"zipCrypto"),y=Oi(e,n,"extendedTimestamp",!0),v=Oi(e,n,"keepOrder",!0),E=Oi(e,n,"level"),A=Oi(e,n,"useWebWorkers"),_=Oi(e,n,"bufferedWrite"),T=Oi(e,n,"dataDescriptorSignature",!1),I=Oi(e,n,"signal"),b=Oi(e,n,"useCompressionStream");let w=Oi(e,n,"dataDescriptor",!0),C=Oi(e,n,Fo);if(f!==Rt&&S!==Rt&&(S<1||S>3))throw new Error(vi);let D=new Uint8Array;const{extraField:O}=n;if(O){let e=0,t=0;O.forEach((t=>e+=4+ki(t))),D=new Uint8Array(e),O.forEach(((e,r)=>{if(r>dt)throw new Error(Ei);if(ki(e)>dt)throw new Error(Ai);Li(D,new Uint16Array([r]),t),Li(D,new Uint16Array([ki(e)]),t+2),Li(D,e,t+4),t+=4+ki(e)}))}let P=0,N=0,R=0;const M=!0===C;r&&(r=po(r),await lo(r),r.size===Rt?(w=!0,(C||C===Rt)&&(C=!0,P=ut)):(R=r.size,P=function(e){return e+5*(Math.floor(e/16383)+1)}(R)));const{diskOffset:L,diskNumber:U,maxSize:k}=e.writer,F=M||R>=ut,B=M||P>=ut,G=M||e.offset+e.pendingEntriesSize-L>=ut,x=Oi(e,n,"supportZip64SplitFile",!0)&&M||U+Math.ceil(e.pendingEntriesSize/k)>=dt;if(G||F||B||x){if(!1===C||!v)throw new Error(_i);C=!0}C=C||!1;const $=function(e){const{rawFilename:t,lastModDate:r,lastAccessDate:n,creationDate:o,password:i,level:a,zip64:s,zipCrypto:c,dataDescriptor:u,directory:d,rawExtraField:l,encryptionStrength:p,extendedTimestamp:m}=e,g=0!==a&&!d,f=Boolean(i&&ki(i));let S,h,y,v=e.version;if(f&&!c){S=new Uint8Array(ki(Ti)+2);const e=Ui(S);Ni(e,0,vt),Li(S,Ti,2),Pi(e,8,p)}else S=new Uint8Array;if(m){y=new Uint8Array(9+(n?4:0)+(o?4:0));const t=Ui(y);Ni(t,0,_t),Ni(t,2,ki(y)-4),Pi(t,4,1+(n?2:0)+(o?4:0)),Ri(t,5,Math.floor(r.getTime()/1e3)),n&&Ri(t,9,Math.floor(n.getTime()/1e3)),o&&Ri(t,13,Math.floor(o.getTime()/1e3));try{h=new Uint8Array(36);const e=Ui(h),t=Di(r);Ni(e,0,Et),Ni(e,2,32),Ni(e,8,At),Ni(e,10,24),Mi(e,12,t),Mi(e,20,Di(n)||t),Mi(e,28,Di(o)||t)}catch(e){h=new Uint8Array}}else h=y=new Uint8Array;let E=Dt;u&&(E|=Ct);let A=0;g&&(A=8),s&&(v=v>45?v:45),f&&(E|=bt,c||(v=v>51?v:51,A=99,g&&(S[9]=8)));const _=new Uint8Array(26),T=Ui(_);Ni(T,0,v),Ni(T,2,E),Ni(T,4,A);const I=new Uint32Array(1),b=Ui(I);let w;w=r<Nt?Nt:r>Pt?Pt:r,Ni(b,0,(w.getHours()<<6|w.getMinutes())<<5|w.getSeconds()/2),Ni(b,2,(w.getFullYear()-1980<<4|w.getMonth()+1)<<5|w.getDate());const C=I[0];Ri(T,6,C),Ni(T,22,ki(t));const D=ki(S,y,h,l);Ni(T,24,D);const O=new Uint8Array(30+ki(t)+D);return Ri(Ui(O),0,lt),Li(O,_,4),Li(O,t,30),Li(O,S,30+ki(t)),Li(O,y,30+ki(t,S)),Li(O,h,30+ki(t,S,y)),Li(O,l,30+ki(t,S,y,h)),{localHeaderArray:O,headerArray:_,headerView:T,lastModDate:r,rawLastModDate:C,encrypted:f,compressed:g,version:v,compressionMethod:A,rawExtraFieldExtendedTimestamp:y,rawExtraFieldNTFS:h,rawExtraFieldAES:S}}(n=Object.assign({},n,{rawFilename:o,rawComment:a,version:s,versionMadeBy:c,lastModDate:u,lastAccessDate:d,creationDate:l,rawExtraField:D,zip64:C,zip64UncompressedSize:F,zip64CompressedSize:B,zip64Offset:G,zip64DiskNumberStart:x,password:f,level:E,useWebWorkers:A,encryptionStrength:S,extendedTimestamp:y,zipCrypto:h,bufferedWrite:_,keepOrder:v,dataDescriptor:w,dataDescriptorSignature:T,signal:I,msDosCompatible:p,internalFileAttribute:m,externalFileAttribute:g,useCompressionStream:b})),j=function(e){const{zip64:t,dataDescriptor:r,dataDescriptorSignature:n}=e;let o,i=new Uint8Array,a=0;return r&&(i=new Uint8Array(t?n?24:20:n?16:12),o=Ui(i),n&&(a=4,Ri(o,0,134695760))),{dataDescriptorArray:i,dataDescriptorView:o,dataDescriptorOffset:a}}(n);let K;N=ki($.localHeaderArray,j.dataDescriptorArray)+P,e.pendingEntriesSize+=N;try{K=await async function(e,t,r,n,o){const{files:i,writer:a}=e,{keepOrder:s,dataDescriptor:c,signal:u}=o,{headerInfo:d}=n,l=Array.from(i.values()).pop();let p,m,g,f,S,h,y={};i.set(t,y);try{let d;s&&(d=l&&l.lock,v()),o.bufferedWrite||e.writerLocked||e.bufferedWrites&&s||!c?(h=new Kn,h.writable.size=0,p=!0,e.bufferedWrites++,await lo(a)):(h=a,await E()),await lo(h);const{writable:m}=a;let{diskOffset:g}=a;if(e.addSplitZipSignature){delete e.addSplitZipSignature;const t=new Uint8Array(4);Ri(Ui(t),0,pt),await Ci(m,t),e.offset+=4}p||(await d,await A(m));const{diskNumber:_}=a;if(S=!0,y.diskNumberStart=_,y=await async function(e,t,{diskNumberStart:r,lock:n},o,i,a){const{headerInfo:s,dataDescriptorInfo:c}=o,{localHeaderArray:u,headerArray:d,lastModDate:l,rawLastModDate:p,encrypted:m,compressed:g,version:f,compressionMethod:S,rawExtraFieldExtendedTimestamp:h,rawExtraFieldNTFS:y,rawExtraFieldAES:v}=s,{dataDescriptorArray:E}=c,{rawFilename:A,lastAccessDate:_,creationDate:T,password:I,level:b,zip64:w,zip64UncompressedSize:C,zip64CompressedSize:D,zip64Offset:O,zip64DiskNumberStart:P,zipCrypto:N,dataDescriptor:R,directory:M,versionMadeBy:L,rawComment:U,rawExtraField:k,useWebWorkers:F,onstart:B,onprogress:G,onend:x,signal:$,encryptionStrength:j,extendedTimestamp:K,msDosCompatible:V,internalFileAttribute:H,externalFileAttribute:W,useCompressionStream:z}=a,q={lock:n,versionMadeBy:L,zip64:w,directory:Boolean(M),filenameUTF8:!0,rawFilename:A,commentUTF8:!0,rawComment:U,rawExtraFieldExtendedTimestamp:h,rawExtraFieldNTFS:y,rawExtraFieldAES:v,rawExtraField:k,extendedTimestamp:K,msDosCompatible:V,internalFileAttribute:H,externalFileAttribute:W,diskNumberStart:r};let Y,Z=0,Q=0;const{writable:X}=t;if(e){e.chunkSize=$t(i),await Ci(X,u);const t=e.readable,r=t.size=e.size,n={options:{codecType:an,level:b,password:I,encryptionStrength:j,zipCrypto:m&&N,passwordVerification:m&&N&&p>>8&255,signed:!0,compressed:g,encrypted:m,useWebWorkers:F,useCompressionStream:z,transferStreams:!1},config:i,streamOptions:{signal:$,size:r,onstart:B,onprogress:G,onend:x}},o=await _n({readable:t,writable:X},n);X.size+=o.size,Y=o.signature,Q=e.size=t.size,Z=o.size}else await Ci(X,u);let J;if(w){let e=4;C&&(e+=8),D&&(e+=8),O&&(e+=8),P&&(e+=4),J=new Uint8Array(e)}else J=new Uint8Array;return function(e,t){const{signature:r,rawExtraFieldZip64:n,compressedSize:o,uncompressedSize:i,headerInfo:a,dataDescriptorInfo:s}=e,{headerView:c,encrypted:u}=a,{dataDescriptorView:d,dataDescriptorOffset:l}=s,{zip64:p,zip64UncompressedSize:m,zip64CompressedSize:g,zipCrypto:f,dataDescriptor:S}=t;if(u&&!f||r===Rt||(Ri(c,10,r),S&&Ri(d,l,r)),p){const e=Ui(n);Ni(e,0,yt),Ni(e,2,n.length-4);let t=4;m&&(Ri(c,18,ut),Mi(e,t,BigInt(i)),t+=8),g&&(Ri(c,14,ut),Mi(e,t,BigInt(o))),S&&(Mi(d,l+4,BigInt(o)),Mi(d,l+12,BigInt(i)))}else Ri(c,14,o),Ri(c,18,i),S&&(Ri(d,l+4,o),Ri(d,l+8,i))}({signature:Y,rawExtraFieldZip64:J,compressedSize:Z,uncompressedSize:Q,headerInfo:s,dataDescriptorInfo:c},a),R&&await Ci(X,E),Object.assign(q,{uncompressedSize:Q,compressedSize:Z,lastModDate:l,rawLastModDate:p,creationDate:T,lastAccessDate:_,encrypted:m,length:ki(u,E)+Z,compressionMethod:S,version:f,headerArray:d,signature:Y,rawExtraFieldZip64:J,zip64UncompressedSize:C,zip64CompressedSize:D,zip64Offset:O,zip64DiskNumberStart:P}),q}(r,h,y,n,e.config,o),S=!1,i.set(t,y),y.filename=t,p){await h.writable.close();let e=await h.getData();await d,await E(),f=!0,c||(e=await async function(e,t,r,{zipCrypto:n}){const o=await function(e,t,r){return e.slice(0,26).arrayBuffer()}(t),i=new DataView(o);return e.encrypted&&!n||Ri(i,14,e.signature),e.zip64?(Ri(i,18,ut),Ri(i,22,ut)):(Ri(i,18,e.compressedSize),Ri(i,22,e.uncompressedSize)),await Ci(r,new Uint8Array(o)),t.slice(o.byteLength)}(y,e,m,o)),await A(m),y.diskNumberStart=a.diskNumber,g=a.diskOffset,await e.stream().pipeTo(m,{preventClose:!0,preventAbort:!0,signal:u}),m.size+=e.size,f=!1}if(y.offset=e.offset-g,y.zip64)!function(e,t){const{rawExtraFieldZip64:r,offset:n,diskNumberStart:o}=e,{zip64UncompressedSize:i,zip64CompressedSize:a,zip64Offset:s,zip64DiskNumberStart:c}=t,u=Ui(r);let d=4;i&&(d+=8),a&&(d+=8),s&&(Mi(u,d,BigInt(n)),d+=8),c&&Ri(u,d,o)}(y,o);else if(y.offset>=ut)throw new Error(_i);return e.offset+=y.length,y}catch(r){if(p&&f||!p&&S){if(e.hasCorruptedEntries=!0,r)try{r.corruptedEntry=!0}catch(e){}p?e.offset+=h.writable.size:e.offset=h.writable.size}throw i.delete(t),r}finally{p&&e.bufferedWrites--,g&&g(),m&&m()}function v(){y.lock=new Promise((e=>g=e))}async function E(){e.writerLocked=!0;const{lockWriter:t}=e;e.lockWriter=new Promise((t=>m=()=>{e.writerLocked=!1,t()})),await t}async function A(e){d.localHeaderArray.length>a.availableSize&&(a.availableSize=0,await Ci(e,new Uint8Array))}}(e,t,r,{headerInfo:$,dataDescriptorInfo:j},n)}finally{e.pendingEntriesSize-=N}return Object.assign(K,{name:t,comment:i,extraField:O}),new Go(K)}(n,e,t,r),o.add(a),await a}catch(t){throw n.filenames.delete(e),t}finally{o.delete(a);const e=bi.shift();e?e():Ii--}}async close(e=new Uint8Array,t={}){const{pendingAddFileCalls:r,writer:n}=this,{writable:o}=n;for(;r.size;)await Promise.all(Array.from(r));return await async function(e,t,r){const{files:n,writer:o}=e,{diskOffset:i,writable:a}=o;let{diskNumber:s}=o,c=0,u=0,d=e.offset-i,l=n.size;for(const[,{rawFilename:e,rawExtraFieldZip64:t,rawExtraFieldAES:r,rawExtraField:o,rawComment:i,rawExtraFieldExtendedTimestamp:a,rawExtraFieldNTFS:s}]of n)u+=46+ki(e,i,t,r,a,s,o);const p=new Uint8Array(u),m=Ui(p);await lo(o);let g=0;for(const[t,i]of Array.from(n.values()).entries()){const{offset:s,rawFilename:u,rawExtraFieldZip64:d,rawExtraFieldAES:l,rawExtraFieldNTFS:f,rawExtraField:S,rawComment:h,versionMadeBy:y,headerArray:v,directory:E,zip64:A,zip64UncompressedSize:_,zip64CompressedSize:T,zip64DiskNumberStart:I,zip64Offset:b,msDosCompatible:w,internalFileAttribute:C,externalFileAttribute:D,extendedTimestamp:O,lastModDate:P,diskNumberStart:N,uncompressedSize:R,compressedSize:M}=i;let L;if(O){L=new Uint8Array(9);const e=Ui(L);Ni(e,0,_t),Ni(e,2,ki(L)-4),Pi(e,4,1),Ri(e,5,Math.floor(P.getTime()/1e3))}else L=new Uint8Array;const U=ki(d,l,L,f,S);Ri(m,c,mt),Ni(m,c+4,y);const k=Ui(v);_||Ri(k,18,R),T||Ri(k,14,M),Li(p,v,c+6),Ni(m,c+30,U),Ni(m,c+32,ki(h)),Ni(m,c+34,A&&I?dt:N),Ni(m,c+36,C),D?Ri(m,c+38,D):E&&w&&Pi(m,c+38,16),Ri(m,c+42,A&&b?ut:s),Li(p,u,c+46),Li(p,d,c+46+ki(u)),Li(p,l,c+46+ki(u,d)),Li(p,L,c+46+ki(u,d,l)),Li(p,f,c+46+ki(u,d,l,L)),Li(p,S,c+46+ki(u,d,l,L,f)),Li(p,h,c+46+ki(u)+U);const F=46+ki(u,h)+U;if(c-g>o.availableSize&&(o.availableSize=0,await Ci(a,p.slice(g,c)),g=c),c+=F,r.onprogress)try{await r.onprogress(t+1,n.size,new Go(i))}catch(e){}}await Ci(a,g?p.slice(g):p);let f=o.diskNumber;const{availableSize:S}=o;S<ht&&f++;let h=Oi(e,r,"zip64");if(d>=ut||u>=ut||l>=dt||f>=dt){if(!1===h)throw new Error(_i);h=!0}const y=new Uint8Array(h?98:ht),v=Ui(y);c=0,h&&(Ri(v,0,ft),Mi(v,4,BigInt(44)),Ni(v,12,45),Ni(v,14,45),Ri(v,16,f),Ri(v,20,s),Mi(v,24,BigInt(l)),Mi(v,32,BigInt(l)),Mi(v,40,BigInt(u)),Mi(v,48,BigInt(d)),Ri(v,56,St),Mi(v,64,BigInt(d)+BigInt(u)),Ri(v,72,f+1),Oi(e,r,"supportZip64SplitFile",!0)&&(f=dt,s=dt),l=dt,d=ut,u=ut,c+=76),Ri(v,c,gt),Ni(v,c+4,f),Ni(v,c+6,s),Ni(v,c+8,l),Ni(v,c+10,l),Ri(v,c+12,u),Ri(v,c+16,d);const E=ki(t);if(E){if(!(E<=dt))throw new Error(fi);Ni(v,c+20,E)}await Ci(a,y),E&&await Ci(a,t)}(this,e,t),Oi(this,t,"preventClose")||await o.close(),n.getData?n.getData():o}}async function Ci(e,t){const r=e.getWriter();await r.ready,e.size+=ki(t),await r.write(t),r.releaseLock()}function Di(e){if(e)return(BigInt(e.getTime())+BigInt(116444736e5))*BigInt(1e4)}function Oi(e,t,r,n){const o=t[r]===Rt?e.options[r]:t[r];return o===Rt?n:o}function Pi(e,t,r){e.setUint8(t,r)}function Ni(e,t,r){e.setUint16(t,r,!0)}function Ri(e,t,r){e.setUint32(t,r,!0)}function Mi(e,t,r){e.setBigUint64(t,r,!0)}function Li(e,t,r){e.set(t,r)}function Ui(e){return new DataView(e.buffer)}function ki(...e){let t=0;return e.forEach((e=>e&&(t+=e.length))),t}class Fi{constructor(e,t,r,n){const o=this;if(e.root&&n&&n.getChildByName(t))throw new Error("Entry filename already exists");r||(r={}),Object.assign(o,{fs:e,name:t,data:r.data,options:r.options,id:e.entries.length,parent:n,children:[],uncompressedSize:0}),e.entries.push(o),n&&o.parent.children.push(o)}moveTo(e){this.fs.move(this,e)}getFullname(){return this.getRelativeName()}getRelativeName(e=this.fs.root){let t=this.name,r=this.parent;for(;r&&r!=e;)t=(r.name?r.name+"/":"")+t,r=r.parent;return t}isDescendantOf(e){let t=this.parent;for(;t&&t.id!=e.id;)t=t.parent;return Boolean(t)}rename(e){const t=this.parent;if(t&&t.getChildByName(e))throw new Error("Entry filename already exists");this.name=e}}class Bi extends Fi{constructor(e,t,r,n){super(e,t,r,n);const o=this;o.Reader=r.Reader,o.Writer=r.Writer,r.getData&&(o.getData=r.getData)}clone(){return new Bi(this.fs,this.name,this)}async getData(e,t={}){const r=this;if(!e||e.constructor==r.Writer&&r.data)return r.data;{const n=r.reader=new r.Reader(r.data,t);await Promise.all([lo(n),lo(e,r.data.uncompressedSize)]);const o=n.readable;return o.size=r.uncompressedSize=n.size,await o.pipeTo(e.writable),e.getData?e.getData():e.writable}}isPasswordProtected(){return this.data.encrypted}async checkPassword(e,t={}){const r=this;if(!r.isPasswordProtected())return!0;t.password=e,t.checkPasswordOnly=!0;try{return await r.data.getData(null,t),!0}catch(e){if(e.message==or)return!1;throw e}}getText(e,t){return this.getData(new Hn(e),t)}getBlob(e,t){return this.getData(new Kn(e),t)}getData64URI(e,t){return this.getData(new $n(e),t)}getUint8Array(e){return this.getData(new so,e)}getWritable(e=new WritableStream,t){return this.getData({writable:e},t)}replaceBlob(e){Object.assign(this,{data:e,Reader:jn,Writer:Kn,reader:null})}replaceText(e){Object.assign(this,{data:e,Reader:Vn,Writer:Hn,reader:null})}replaceData64URI(e){Object.assign(this,{data:e,Reader:xn,Writer:$n,reader:null})}replaceUint8Array(e){Object.assign(this,{data:e,Reader:ao,Writer:so,reader:null})}replaceReadable(e){Object.assign(this,{data:null,Reader:function(){return{readable:e}},Writer:null,reader:null})}}class Gi extends Fi{constructor(e,t,r,n){super(e,t,r,n),this.directory=!0}clone(e){const t=this,r=new Gi(t.fs,t.name);return e&&(r.children=t.children.map((t=>{const n=t.clone(e);return n.parent=r,n}))),r}addDirectory(e,t){return Hi(this,e,{options:t},!0)}addText(e,t,r={}){return Hi(this,e,{data:t,Reader:Vn,Writer:Hn,options:r})}addBlob(e,t,r={}){return Hi(this,e,{data:t,Reader:jn,Writer:Kn,options:r})}addData64URI(e,t,r={}){return Hi(this,e,{data:t,Reader:xn,Writer:$n,options:r})}addUint8Array(e,t,r={}){return Hi(this,e,{data:t,Reader:ao,Writer:so,options:r})}addHttpContent(e,t,r={}){return Hi(this,e,{data:t,Reader:class extends io{constructor(e){super(e,r)}},options:r})}addReadable(e,t,r={}){return Hi(this,e,{Reader:function(){return{readable:t}},options:r})}addFileSystemEntry(e,t={}){return async function(e,t,r){if(t.isDirectory){const o=e.addDirectory(t.name,r);return await n(o,t),o}return new Promise(((n,o)=>t.file((o=>n(e.addBlob(t.name,o,r))),o)));async function n(e,t){const o=await function(e){return new Promise(((t,r)=>{let n=[];function o(e){e.readEntries((r=>{r.length?(n=n.concat(r),o(e)):t(n)}),r)}e.isDirectory&&o(e.createReader()),e.isFile&&t(n)}))}(t);for(const t of o)t.isDirectory?await n(e.addDirectory(t.name,r),t):await new Promise(((n,o)=>{t.file((o=>{const i=e.addBlob(t.name,o,r);i.uncompressedSize=o.size,n(i)}),o)}))}}(this,e,t)}addData(e,t){return Hi(this,e,t)}importBlob(e,t){return this.importZip(new jn(e),t)}importData64URI(e,t){return this.importZip(new xn(e),t)}importUint8Array(e,t){return this.importZip(new ao(e),t)}importHttpContent(e,t){return this.importZip(new io(e,t),t)}importReadable(e,t){return this.importZip({readable:e},t)}exportBlob(e={}){return this.exportZip(new Kn(e.mimeType||"application/zip"),e)}exportData64URI(e={}){return this.exportZip(new $n(e.mimeType||"application/zip"),e)}exportUint8Array(e={}){return this.exportZip(new so,e)}async exportWritable(e=new WritableStream,t={}){return await this.exportZip({writable:e},t),e}async importZip(e,t={}){await lo(e);const r=new ti(e,t),n=[];return(await r.getEntries()).forEach((e=>{let r=this;const o=e.filename.split("/"),i=o.pop();o.forEach(((t,i)=>{const a=r;r=r.getChildByName(t),r||(r=new Gi(this.fs,t,{data:i==o.length-1?e:null},a),n.push(r))})),e.directory||n.push(Hi(r,i,{data:e,Reader:$i(Object.assign({},t))}))})),n}async exportZip(e,t){const r=this;await Promise.all([ji(r,t.readerOptions),lo(e)]);const n=new wi(e,t);return await async function(e,t,r,n){const o=t,i=new Map;await async function e(t,a){async function s(a){const s=n.relativePath?a.getRelativeName(o):a.getFullname();let c,u,d,l,p=a.options||{};a.data instanceof Go&&({externalFileAttribute:c,versionMadeBy:u,comment:d,lastModDate:l}=a.data),await t.add(s,a.reader,Object.assign({directory:a.directory},Object.assign({},n,{externalFileAttribute:c,versionMadeBy:u,comment:d,lastModDate:l,onprogress:async e=>{if(n.onprogress){i.set(s,e);try{await n.onprogress(Array.from(i.values()).reduce(((e,t)=>e+t)),r)}catch(e){}}}},p))),await e(t,a)}await async function(){if(n.bufferedWrite)await Promise.all(a.children.map(s));else for(const e of a.children)await s(e)}()}(e,t)}(n,r,function(e,t){let r=0;return e.forEach((function e(t){r+=t.uncompressedSize,t.children&&t.children.forEach(e)})),r}([r]),t),await n.close(),e.getData?e.getData():e.writable}getChildByName(e){const t=this.children;for(let r=0;r<t.length;r++){const n=t[r];if(n.name==e)return n}}isPasswordProtected(){const e=this.children;for(let t=0;t<e.length;t++)if(e[t].isPasswordProtected())return!0;return!1}async checkPassword(e,t={}){const r=this.children;return!(await Promise.all(r.map((r=>r.checkPassword(e,t))))).includes(!1)}}const xi={FS:class{constructor(){Vi(this)}get children(){return this.root.children}remove(e){Ki(e),this.entries[e.id]=null}move(e,t){if(e==this.root)throw new Error("Root directory cannot be moved");if(!t.directory)throw new Error("Target entry is not a directory");if(t.isDescendantOf(e))throw new Error("Entry is a ancestor of target entry");if(e!=t){if(t.getChildByName(e.name))throw new Error("Entry filename already exists");Ki(e),e.parent=t,t.children.push(e)}}find(e){const t=e.split("/");let r=this.root;for(let e=0;r&&e<t.length;e++)r=r.getChildByName(t[e]);return r}getById(e){return this.entries[e]}getChildByName(e){return this.root.getChildByName(e)}addDirectory(e,t){return this.root.addDirectory(e,t)}addText(e,t,r){return this.root.addText(e,t,r)}addBlob(e,t,r){return this.root.addBlob(e,t,r)}addData64URI(e,t,r){return this.root.addData64URI(e,t,r)}addHttpContent(e,t,r){return this.root.addHttpContent(e,t,r)}addReadable(e,t,r){return this.root.addReadable(e,t,r)}addFileSystemEntry(e,t){return this.root.addFileSystemEntry(e,t)}addData(e,t){return this.root.addData(e,t)}importBlob(e,t){return Vi(this),this.root.importBlob(e,t)}importData64URI(e,t){return Vi(this),this.root.importData64URI(e,t)}importUint8Array(e,t){return Vi(this),this.root.importUint8Array(e,t)}importHttpContent(e,t){return Vi(this),this.root.importHttpContent(e,t)}importReadable(e,t){return Vi(this),this.root.importReadable(e,t)}importZip(e,t){return this.root.importZip(e,t)}exportBlob(e){return this.root.exportBlob(e)}exportData64URI(e){return this.root.exportData64URI(e)}exportUint8Array(e){return this.root.exportUint8Array(e)}exportWritable(e,t){return this.root.exportWritable(e,t)}isPasswordProtected(){return this.root.isPasswordProtected()}async checkPassword(e,t){return this.root.checkPassword(e,t)}},ZipDirectoryEntry:Gi,ZipFileEntry:Bi};function $i(e){return class extends Bn{constructor(e,t={}){super(),this.entry=e,this.options=t}async init(){const t=this;t.size=t.entry.uncompressedSize;const r=await t.entry.getData(new Kn,Object.assign({},t.options,e));t.data=r,t.blobReader=new jn(r),super.init()}readUint8Array(e,t){return this.blobReader.readUint8Array(e,t)}}}async function ji(e,t){e.children.length&&await Promise.all(e.children.map((async e=>{if(e.directory)await ji(e,t);else{const r=e.reader=new e.Reader(e.data,t);try{await lo(r)}catch(t){try{t.entryId=e.id}catch(e){}throw t}e.uncompressedSize=r.size}})))}function Ki(e){if(e.parent){const t=e.parent.children;t.forEach(((r,n)=>{r.id==e.id&&t.splice(n,1)}))}}function Vi(e){e.entries=[],e.root=new Gi(e)}function Hi(e,t,r,n){if(e.directory)return n?new Gi(e.fs,t,r,e):new Bi(e.fs,t,r,e);throw new Error("Parent entry is not a directory")}let Wi;try{Wi="undefined"==typeof document?new(r(51121).URL)("file:/index.js").href:document.currentScript&&document.currentScript.src||new URL("index.cjs",document.baseURI).href}catch(e){}jt({baseURL:Wi}),function(e){const t=()=>URL.createObjectURL(new Blob(['const{Array:e,Object:t,Number:n,Math:r,Error:s,Uint8Array:i,Uint16Array:o,Uint32Array:c,Int32Array:f,Map:a,DataView:l,Promise:u,TextEncoder:w,crypto:h,postMessage:d,TransformStream:p,ReadableStream:y,WritableStream:m,CompressionStream:b,DecompressionStream:g}=self;class k{constructor(e){return class extends p{constructor(t,n){const r=new e(n);super({transform(e,t){t.enqueue(r.append(e))},flush(e){const t=r.flush();t&&e.enqueue(t)}})}}}}const v=[];for(let e=0;256>e;e++){let t=e;for(let e=0;8>e;e++)1&t?t=t>>>1^3988292384:t>>>=1;v[e]=t}class S{constructor(e){this.t=e||-1}append(e){let t=0|this.t;for(let n=0,r=0|e.length;r>n;n++)t=t>>>8^v[255&(t^e[n])];this.t=t}get(){return~this.t}}class z extends p{constructor(){const e=new S;super({transform(t){e.append(t)},flush(t){const n=new i(4);new l(n.buffer).setUint32(0,e.get()),t.enqueue(n)}})}}const C={concat(e,t){if(0===e.length||0===t.length)return e.concat(t);const n=e[e.length-1],r=C.i(n);return 32===r?e.concat(t):C.o(t,r,0|n,e.slice(0,e.length-1))},l(e){const t=e.length;if(0===t)return 0;const n=e[t-1];return 32*(t-1)+C.i(n)},u(e,t){if(32*e.length<t)return e;const n=(e=e.slice(0,r.ceil(t/32))).length;return t&=31,n>0&&t&&(e[n-1]=C.h(t,e[n-1]&2147483648>>t-1,1)),e},h:(e,t,n)=>32===e?t:(n?0|t:t<<32-e)+1099511627776*e,i:e=>r.round(e/1099511627776)||32,o(e,t,n,r){for(void 0===r&&(r=[]);t>=32;t-=32)r.push(n),n=0;if(0===t)return r.concat(e);for(let s=0;s<e.length;s++)r.push(n|e[s]>>>t),n=e[s]<<32-t;const s=e.length?e[e.length-1]:0,i=C.i(s);return r.push(C.h(t+i&31,t+i>32?n:r.pop(),1)),r}},x={p:{m(e){const t=C.l(e)/8,n=new i(t);let r;for(let s=0;t>s;s++)0==(3&s)&&(r=e[s/4]),n[s]=r>>>24,r<<=8;return n},g(e){const t=[];let n,r=0;for(n=0;n<e.length;n++)r=r<<8|e[n],3==(3&n)&&(t.push(r),r=0);return 3&n&&t.push(C.h(8*(3&n),r)),t}}},_=class{constructor(e){const t=this;t.blockSize=512,t.k=[1732584193,4023233417,2562383102,271733878,3285377520],t.v=[1518500249,1859775393,2400959708,3395469782],e?(t.S=e.S.slice(0),t.C=e.C.slice(0),t._=e._):t.reset()}reset(){const e=this;return e.S=e.k.slice(0),e.C=[],e._=0,e}update(e){const t=this;"string"==typeof e&&(e=x.A.g(e));const n=t.C=C.concat(t.C,e),r=t._,i=t._=r+C.l(e);if(i>9007199254740991)throw new s("Cannot hash more than 2^53 - 1 bits");const o=new c(n);let f=0;for(let e=t.blockSize+r-(t.blockSize+r&t.blockSize-1);i>=e;e+=t.blockSize)t.I(o.subarray(16*f,16*(f+1))),f+=1;return n.splice(0,16*f),t}D(){const e=this;let t=e.C;const n=e.S;t=C.concat(t,[C.h(1,1)]);for(let e=t.length+2;15&e;e++)t.push(0);for(t.push(r.floor(e._/4294967296)),t.push(0|e._);t.length;)e.I(t.splice(0,16));return e.reset(),n}V(e,t,n,r){return e>19?e>39?e>59?e>79?void 0:t^n^r:t&n|t&r|n&r:t^n^r:t&n|~t&r}P(e,t){return t<<e|t>>>32-e}I(t){const n=this,s=n.S,i=e(80);for(let e=0;16>e;e++)i[e]=t[e];let o=s[0],c=s[1],f=s[2],a=s[3],l=s[4];for(let e=0;79>=e;e++){16>e||(i[e]=n.P(1,i[e-3]^i[e-8]^i[e-14]^i[e-16]));const t=n.P(5,o)+n.V(e,c,f,a)+l+i[e]+n.v[r.floor(e/20)]|0;l=a,a=f,f=n.P(30,c),c=o,o=t}s[0]=s[0]+o|0,s[1]=s[1]+c|0,s[2]=s[2]+f|0,s[3]=s[3]+a|0,s[4]=s[4]+l|0}},A={getRandomValues(e){const t=new c(e.buffer),n=e=>{let t=987654321;const n=4294967295;return()=>(t=36969*(65535&t)+(t>>16)&n,(((t<<16)+(e=18e3*(65535&e)+(e>>16)&n)&n)/4294967296+.5)*(r.random()>.5?1:-1))};for(let s,i=0;i<e.length;i+=4){const e=n(4294967296*(s||r.random()));s=987654071*e(),t[i/4]=4294967296*e()|0}return e}},I={importKey:e=>new I.R(x.p.g(e)),B(e,t,n,r){if(n=n||1e4,0>r||0>n)throw new s("invalid params to pbkdf2");const i=1+(r>>5)<<2;let o,c,f,a,u;const w=new ArrayBuffer(i),h=new l(w);let d=0;const p=C;for(t=x.p.g(t),u=1;(i||1)>d;u++){for(o=c=e.encrypt(p.concat(t,[u])),f=1;n>f;f++)for(c=e.encrypt(c),a=0;a<c.length;a++)o[a]^=c[a];for(f=0;(i||1)>d&&f<o.length;f++)h.setInt32(d,o[f]),d+=4}return w.slice(0,r/8)},R:class{constructor(e){const t=this,n=t.M=_,r=[[],[]];t.K=[new n,new n];const s=t.K[0].blockSize/32;e.length>s&&(e=(new n).update(e).D());for(let t=0;s>t;t++)r[0][t]=909522486^e[t],r[1][t]=1549556828^e[t];t.K[0].update(r[0]),t.K[1].update(r[1]),t.U=new n(t.K[0])}reset(){const e=this;e.U=new e.M(e.K[0]),e.N=!1}update(e){this.N=!0,this.U.update(e)}digest(){const e=this,t=e.U.D(),n=new e.M(e.K[1]).update(t).D();return e.reset(),n}encrypt(e){if(this.N)throw new s("encrypt on already updated hmac called!");return this.update(e),this.digest(e)}}},D=void 0!==h&&"function"==typeof h.getRandomValues,V="Invalid password",P="Invalid signature",R="zipjs-abort-check-password";function B(e){return D?h.getRandomValues(e):A.getRandomValues(e)}const E=16,M={name:"PBKDF2"},K=t.assign({hash:{name:"HMAC"}},M),U=t.assign({iterations:1e3,hash:{name:"SHA-1"}},M),N=["deriveBits"],O=[8,12,16],T=[16,24,32],W=10,j=[0,0,0,0],H="undefined",L="function",F=typeof h!=H,q=F&&h.subtle,G=F&&typeof q!=H,J=x.p,Q=class{constructor(e){const t=this;t.O=[[[],[],[],[],[]],[[],[],[],[],[]]],t.O[0][0][0]||t.T();const n=t.O[0][4],r=t.O[1],i=e.length;let o,c,f,a=1;if(4!==i&&6!==i&&8!==i)throw new s("invalid aes key size");for(t.v=[c=e.slice(0),f=[]],o=i;4*i+28>o;o++){let e=c[o-1];(o%i==0||8===i&&o%i==4)&&(e=n[e>>>24]<<24^n[e>>16&255]<<16^n[e>>8&255]<<8^n[255&e],o%i==0&&(e=e<<8^e>>>24^a<<24,a=a<<1^283*(a>>7))),c[o]=c[o-i]^e}for(let e=0;o;e++,o--){const t=c[3&e?o:o-4];f[e]=4>=o||4>e?t:r[0][n[t>>>24]]^r[1][n[t>>16&255]]^r[2][n[t>>8&255]]^r[3][n[255&t]]}}encrypt(e){return this.W(e,0)}decrypt(e){return this.W(e,1)}T(){const e=this.O[0],t=this.O[1],n=e[4],r=t[4],s=[],i=[];let o,c,f,a;for(let e=0;256>e;e++)i[(s[e]=e<<1^283*(e>>7))^e]=e;for(let l=o=0;!n[l];l^=c||1,o=i[o]||1){let i=o^o<<1^o<<2^o<<3^o<<4;i=i>>8^255&i^99,n[l]=i,r[i]=l,a=s[f=s[c=s[l]]];let u=16843009*a^65537*f^257*c^16843008*l,w=257*s[i]^16843008*i;for(let n=0;4>n;n++)e[n][l]=w=w<<24^w>>>8,t[n][i]=u=u<<24^u>>>8}for(let n=0;5>n;n++)e[n]=e[n].slice(0),t[n]=t[n].slice(0)}W(e,t){if(4!==e.length)throw new s("invalid aes block size");const n=this.v[t],r=n.length/4-2,i=[0,0,0,0],o=this.O[t],c=o[0],f=o[1],a=o[2],l=o[3],u=o[4];let w,h,d,p=e[0]^n[0],y=e[t?3:1]^n[1],m=e[2]^n[2],b=e[t?1:3]^n[3],g=4;for(let e=0;r>e;e++)w=c[p>>>24]^f[y>>16&255]^a[m>>8&255]^l[255&b]^n[g],h=c[y>>>24]^f[m>>16&255]^a[b>>8&255]^l[255&p]^n[g+1],d=c[m>>>24]^f[b>>16&255]^a[p>>8&255]^l[255&y]^n[g+2],b=c[b>>>24]^f[p>>16&255]^a[y>>8&255]^l[255&m]^n[g+3],g+=4,p=w,y=h,m=d;for(let e=0;4>e;e++)i[t?3&-e:e]=u[p>>>24]<<24^u[y>>16&255]<<16^u[m>>8&255]<<8^u[255&b]^n[g++],w=p,p=y,y=m,m=b,b=w;return i}},X=class{constructor(e,t){this.j=e,this.H=t,this.L=t}reset(){this.L=this.H}update(e){return this.F(this.j,e,this.L)}q(e){if(255==(e>>24&255)){let t=e>>16&255,n=e>>8&255,r=255&e;255===t?(t=0,255===n?(n=0,255===r?r=0:++r):++n):++t,e=0,e+=t<<16,e+=n<<8,e+=r}else e+=1<<24;return e}G(e){0===(e[0]=this.q(e[0]))&&(e[1]=this.q(e[1]))}F(e,t,n){let r;if(!(r=t.length))return[];const s=C.l(t);for(let s=0;r>s;s+=4){this.G(n);const r=e.encrypt(n);t[s]^=r[0],t[s+1]^=r[1],t[s+2]^=r[2],t[s+3]^=r[3]}return C.u(t,s)}},Y=I.R;let Z=F&&G&&typeof q.importKey==L,$=F&&G&&typeof q.deriveBits==L;class ee extends p{constructor({password:e,signed:n,encryptionStrength:r,checkPasswordOnly:o}){super({start(){t.assign(this,{ready:new u((e=>this.J=e)),password:e,signed:n,X:r-1,pending:new i})},async transform(e,t){const n=this,{password:r,X:c,J:f,ready:a}=n;r?(await(async(e,t,n,r)=>{const i=await re(e,t,n,ie(r,0,O[t])),o=ie(r,O[t]);if(i[0]!=o[0]||i[1]!=o[1])throw new s(V)})(n,c,r,ie(e,0,O[c]+2)),e=ie(e,O[c]+2),o?t.error(new s(R)):f()):await a;const l=new i(e.length-W-(e.length-W)%E);t.enqueue(ne(n,e,l,0,W,!0))},async flush(e){const{signed:t,Y:n,Z:r,pending:o,ready:c}=this;await c;const f=ie(o,0,o.length-W),a=ie(o,o.length-W);let l=new i;if(f.length){const e=ce(J,f);r.update(e);const t=n.update(e);l=oe(J,t)}if(t){const e=ie(oe(J,r.digest()),0,W);for(let t=0;W>t;t++)if(e[t]!=a[t])throw new s(P)}e.enqueue(l)}})}}class te extends p{constructor({password:e,encryptionStrength:n}){let r;super({start(){t.assign(this,{ready:new u((e=>this.J=e)),password:e,X:n-1,pending:new i})},async transform(e,t){const n=this,{password:r,X:s,J:o,ready:c}=n;let f=new i;r?(f=await(async(e,t,n)=>{const r=B(new i(O[t]));return se(r,await re(e,t,n,r))})(n,s,r),o()):await c;const a=new i(f.length+e.length-e.length%E);a.set(f,0),t.enqueue(ne(n,e,a,f.length,0))},async flush(e){const{Y:t,Z:n,pending:s,ready:o}=this;await o;let c=new i;if(s.length){const e=t.update(ce(J,s));n.update(e),c=oe(J,e)}r.signature=oe(J,n.digest()).slice(0,W),e.enqueue(se(c,r.signature))}}),r=this}}function ne(e,t,n,r,s,o){const{Y:c,Z:f,pending:a}=e,l=t.length-s;let u;for(a.length&&(t=se(a,t),n=((e,t)=>{if(t&&t>e.length){const n=e;(e=new i(t)).set(n,0)}return e})(n,l-l%E)),u=0;l-E>=u;u+=E){const e=ce(J,ie(t,u,u+E));o&&f.update(e);const s=c.update(e);o||f.update(s),n.set(oe(J,s),u+r)}return e.pending=ie(t,u),n}async function re(n,r,s,o){n.password=null;const c=(e=>{if(void 0===w){const t=new i((e=unescape(encodeURIComponent(e))).length);for(let n=0;n<t.length;n++)t[n]=e.charCodeAt(n);return t}return(new w).encode(e)})(s),f=await(async(e,t,n,r,s)=>{if(!Z)return I.importKey(t);try{return await q.importKey("raw",t,n,!1,s)}catch(e){return Z=!1,I.importKey(t)}})(0,c,K,0,N),a=await(async(e,t,n)=>{if(!$)return I.B(t,e.salt,U.iterations,n);try{return await q.deriveBits(e,t,n)}catch(r){return $=!1,I.B(t,e.salt,U.iterations,n)}})(t.assign({salt:o},U),f,8*(2*T[r]+2)),l=new i(a),u=ce(J,ie(l,0,T[r])),h=ce(J,ie(l,T[r],2*T[r])),d=ie(l,2*T[r]);return t.assign(n,{keys:{key:u,$:h,passwordVerification:d},Y:new X(new Q(u),e.from(j)),Z:new Y(h)}),d}function se(e,t){let n=e;return e.length+t.length&&(n=new i(e.length+t.length),n.set(e,0),n.set(t,e.length)),n}function ie(e,t,n){return e.subarray(t,n)}function oe(e,t){return e.m(t)}function ce(e,t){return e.g(t)}class fe extends p{constructor({password:e,passwordVerification:n,checkPasswordOnly:r}){super({start(){t.assign(this,{password:e,passwordVerification:n}),we(this,e)},transform(e,t){const n=this;if(n.password){const t=le(n,e.subarray(0,12));if(n.password=null,t[11]!=n.passwordVerification)throw new s(V);e=e.subarray(12)}r?t.error(new s(R)):t.enqueue(le(n,e))}})}}class ae extends p{constructor({password:e,passwordVerification:n}){super({start(){t.assign(this,{password:e,passwordVerification:n}),we(this,e)},transform(e,t){const n=this;let r,s;if(n.password){n.password=null;const t=B(new i(12));t[11]=n.passwordVerification,r=new i(e.length+t.length),r.set(ue(n,t),0),s=12}else r=new i(e.length),s=0;r.set(ue(n,e),s),t.enqueue(r)}})}}function le(e,t){const n=new i(t.length);for(let r=0;r<t.length;r++)n[r]=de(e)^t[r],he(e,n[r]);return n}function ue(e,t){const n=new i(t.length);for(let r=0;r<t.length;r++)n[r]=de(e)^t[r],he(e,t[r]);return n}function we(e,n){const r=[305419896,591751049,878082192];t.assign(e,{keys:r,ee:new S(r[0]),te:new S(r[2])});for(let t=0;t<n.length;t++)he(e,n.charCodeAt(t))}function he(e,t){let[n,s,i]=e.keys;e.ee.append([t]),n=~e.ee.get(),s=ye(r.imul(ye(s+pe(n)),134775813)+1),e.te.append([s>>>24]),i=~e.te.get(),e.keys=[n,s,i]}function de(e){const t=2|e.keys[2];return pe(r.imul(t,1^t)>>>8)}function pe(e){return 255&e}function ye(e){return 4294967295&e}const me="deflate-raw";class be extends p{constructor(e,{chunkSize:t,CompressionStream:n,CompressionStreamNative:r}){super({});const{compressed:s,encrypted:i,useCompressionStream:o,zipCrypto:c,signed:f,level:a}=e,u=this;let w,h,d=ke(super.readable);i&&!c||!f||([d,w]=d.tee(),w=ze(w,new z)),s&&(d=Se(d,o,{level:a,chunkSize:t},r,n)),i&&(c?d=ze(d,new ae(e)):(h=new te(e),d=ze(d,h))),ve(u,d,(async()=>{let e;i&&!c&&(e=h.signature),i&&!c||!f||(e=await w.getReader().read(),e=new l(e.value.buffer).getUint32(0)),u.signature=e}))}}class ge extends p{constructor(e,{chunkSize:t,DecompressionStream:n,DecompressionStreamNative:r}){super({});const{zipCrypto:i,encrypted:o,signed:c,signature:f,compressed:a,useCompressionStream:u}=e;let w,h,d=ke(super.readable);o&&(i?d=ze(d,new fe(e)):(h=new ee(e),d=ze(d,h))),a&&(d=Se(d,u,{chunkSize:t},r,n)),o&&!i||!c||([d,w]=d.tee(),w=ze(w,new z)),ve(this,d,(async()=>{if((!o||i)&&c){const e=await w.getReader().read(),t=new l(e.value.buffer);if(f!=t.getUint32(0,!1))throw new s(P)}}))}}function ke(e){return ze(e,new p({transform(e,t){e&&e.length&&t.enqueue(e)}}))}function ve(e,n,r){n=ze(n,new p({flush:r})),t.defineProperty(e,"readable",{get:()=>n})}function Se(e,t,n,r,s){try{e=ze(e,new(t&&r?r:s)(me,n))}catch(r){if(!t)throw r;e=ze(e,new s(me,n))}return e}function ze(e,t){return e.pipeThrough(t)}const Ce="data";class xe extends p{constructor(e,n){super({});const r=this,{codecType:s}=e;let i;s.startsWith("deflate")?i=be:s.startsWith("inflate")&&(i=ge);let o=0;const c=new i(e,n),f=super.readable,a=new p({transform(e,t){e&&e.length&&(o+=e.length,t.enqueue(e))},flush(){const{signature:e}=c;t.assign(r,{signature:e,size:o})}});t.defineProperty(r,"readable",{get:()=>f.pipeThrough(c).pipeThrough(a)})}}const _e=new a,Ae=new a;let Ie=0;async function De(e){try{const{options:t,scripts:r,config:s}=e;r&&r.length&&importScripts.apply(void 0,r),self.initCodec&&self.initCodec(),s.CompressionStreamNative=self.CompressionStream,s.DecompressionStreamNative=self.DecompressionStream,self.Deflate&&(s.CompressionStream=new k(self.Deflate)),self.Inflate&&(s.DecompressionStream=new k(self.Inflate));const i={highWaterMark:1,size:()=>s.chunkSize},o=e.readable||new y({async pull(e){const t=new u((e=>_e.set(Ie,e)));Ve({type:"pull",messageId:Ie}),Ie=(Ie+1)%n.MAX_SAFE_INTEGER;const{value:r,done:s}=await t;e.enqueue(r),s&&e.close()}},i),c=e.writable||new m({async write(e){let t;const r=new u((e=>t=e));Ae.set(Ie,t),Ve({type:Ce,value:e,messageId:Ie}),Ie=(Ie+1)%n.MAX_SAFE_INTEGER,await r}},i),f=new xe(t,s);await o.pipeThrough(f).pipeTo(c,{preventClose:!0,preventAbort:!0});try{await c.close()}catch(e){}const{signature:a,size:l}=f;Ve({type:"close",result:{signature:a,size:l}})}catch(e){Pe(e)}}function Ve(e){let{value:t}=e;if(t)if(t.length)try{t=new i(t),e.value=t.buffer,d(e,[e.value])}catch(t){d(e)}else d(e);else d(e)}function Pe(e){const{message:t,stack:n,code:r,name:s}=e;d({error:{message:t,stack:n,code:r,name:s}})}addEventListener("message",(({data:e})=>{const{type:t,messageId:n,value:r,done:s}=e;try{if("start"==t&&De(e),t==Ce){const e=_e.get(n);_e.delete(n),e({value:new i(r),done:s})}if("ack"==t){const e=Ae.get(n);Ae.delete(n),e()}}catch(e){Pe(e)}}));const Re=-2;function Be(t){return Ee(t.map((([t,n])=>new e(t).fill(n,0,t))))}function Ee(t){return t.reduce(((t,n)=>t.concat(e.isArray(n)?Ee(n):n)),[])}const Me=[0,1,2,3].concat(...Be([[2,4],[2,5],[4,6],[4,7],[8,8],[8,9],[16,10],[16,11],[32,12],[32,13],[64,14],[64,15],[2,0],[1,16],[1,17],[2,18],[2,19],[4,20],[4,21],[8,22],[8,23],[16,24],[16,25],[32,26],[32,27],[64,28],[64,29]]));function Ke(){const e=this;function t(e,t){let n=0;do{n|=1&e,e>>>=1,n<<=1}while(--t>0);return n>>>1}e.ne=n=>{const s=e.re,i=e.ie.se,o=e.ie.oe;let c,f,a,l=-1;for(n.ce=0,n.fe=573,c=0;o>c;c++)0!==s[2*c]?(n.ae[++n.ce]=l=c,n.le[c]=0):s[2*c+1]=0;for(;2>n.ce;)a=n.ae[++n.ce]=2>l?++l:0,s[2*a]=1,n.le[a]=0,n.ue--,i&&(n.we-=i[2*a+1]);for(e.he=l,c=r.floor(n.ce/2);c>=1;c--)n.de(s,c);a=o;do{c=n.ae[1],n.ae[1]=n.ae[n.ce--],n.de(s,1),f=n.ae[1],n.ae[--n.fe]=c,n.ae[--n.fe]=f,s[2*a]=s[2*c]+s[2*f],n.le[a]=r.max(n.le[c],n.le[f])+1,s[2*c+1]=s[2*f+1]=a,n.ae[1]=a++,n.de(s,1)}while(n.ce>=2);n.ae[--n.fe]=n.ae[1],(t=>{const n=e.re,r=e.ie.se,s=e.ie.pe,i=e.ie.ye,o=e.ie.me;let c,f,a,l,u,w,h=0;for(l=0;15>=l;l++)t.be[l]=0;for(n[2*t.ae[t.fe]+1]=0,c=t.fe+1;573>c;c++)f=t.ae[c],l=n[2*n[2*f+1]+1]+1,l>o&&(l=o,h++),n[2*f+1]=l,f>e.he||(t.be[l]++,u=0,i>f||(u=s[f-i]),w=n[2*f],t.ue+=w*(l+u),r&&(t.we+=w*(r[2*f+1]+u)));if(0!==h){do{for(l=o-1;0===t.be[l];)l--;t.be[l]--,t.be[l+1]+=2,t.be[o]--,h-=2}while(h>0);for(l=o;0!==l;l--)for(f=t.be[l];0!==f;)a=t.ae[--c],a>e.he||(n[2*a+1]!=l&&(t.ue+=(l-n[2*a+1])*n[2*a],n[2*a+1]=l),f--)}})(n),((e,n,r)=>{const s=[];let i,o,c,f=0;for(i=1;15>=i;i++)s[i]=f=f+r[i-1]<<1;for(o=0;n>=o;o++)c=e[2*o+1],0!==c&&(e[2*o]=t(s[c]++,c))})(s,e.he,n.be)}}function Ue(e,t,n,r,s){const i=this;i.se=e,i.pe=t,i.ye=n,i.oe=r,i.me=s}Ke.ge=[0,1,2,3,4,5,6,7].concat(...Be([[2,8],[2,9],[2,10],[2,11],[4,12],[4,13],[4,14],[4,15],[8,16],[8,17],[8,18],[8,19],[16,20],[16,21],[16,22],[16,23],[32,24],[32,25],[32,26],[31,27],[1,28]])),Ke.ke=[0,1,2,3,4,5,6,7,8,10,12,14,16,20,24,28,32,40,48,56,64,80,96,112,128,160,192,224,0],Ke.ve=[0,1,2,3,4,6,8,12,16,24,32,48,64,96,128,192,256,384,512,768,1024,1536,2048,3072,4096,6144,8192,12288,16384,24576],Ke.Se=e=>256>e?Me[e]:Me[256+(e>>>7)],Ke.ze=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],Ke.Ce=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],Ke.xe=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],Ke._e=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];const Ne=Be([[144,8],[112,9],[24,7],[8,8]]);Ue.Ae=Ee([12,140,76,204,44,172,108,236,28,156,92,220,60,188,124,252,2,130,66,194,34,162,98,226,18,146,82,210,50,178,114,242,10,138,74,202,42,170,106,234,26,154,90,218,58,186,122,250,6,134,70,198,38,166,102,230,22,150,86,214,54,182,118,246,14,142,78,206,46,174,110,238,30,158,94,222,62,190,126,254,1,129,65,193,33,161,97,225,17,145,81,209,49,177,113,241,9,137,73,201,41,169,105,233,25,153,89,217,57,185,121,249,5,133,69,197,37,165,101,229,21,149,85,213,53,181,117,245,13,141,77,205,45,173,109,237,29,157,93,221,61,189,125,253,19,275,147,403,83,339,211,467,51,307,179,435,115,371,243,499,11,267,139,395,75,331,203,459,43,299,171,427,107,363,235,491,27,283,155,411,91,347,219,475,59,315,187,443,123,379,251,507,7,263,135,391,71,327,199,455,39,295,167,423,103,359,231,487,23,279,151,407,87,343,215,471,55,311,183,439,119,375,247,503,15,271,143,399,79,335,207,463,47,303,175,431,111,367,239,495,31,287,159,415,95,351,223,479,63,319,191,447,127,383,255,511,0,64,32,96,16,80,48,112,8,72,40,104,24,88,56,120,4,68,36,100,20,84,52,116,3,131,67,195,35,163,99,227].map(((e,t)=>[e,Ne[t]])));const Oe=Be([[30,5]]);function Te(e,t,n,r,s){const i=this;i.Ie=e,i.De=t,i.Ve=n,i.Pe=r,i.Re=s}Ue.Be=Ee([0,16,8,24,4,20,12,28,2,18,10,26,6,22,14,30,1,17,9,25,5,21,13,29,3,19,11,27,7,23].map(((e,t)=>[e,Oe[t]]))),Ue.Ee=new Ue(Ue.Ae,Ke.ze,257,286,15),Ue.Me=new Ue(Ue.Be,Ke.Ce,0,30,15),Ue.Ke=new Ue(null,Ke.xe,0,19,7);const We=[new Te(0,0,0,0,0),new Te(4,4,8,4,1),new Te(4,5,16,8,1),new Te(4,6,32,32,1),new Te(4,4,16,16,2),new Te(8,16,32,32,2),new Te(8,16,128,128,2),new Te(8,32,128,256,2),new Te(32,128,258,1024,2),new Te(32,258,258,4096,2)],je=["need dictionary","stream end","","","stream error","data error","","buffer error","",""],He=113,Le=666,Fe=262;function qe(e,t,n,r){const s=e[2*t],i=e[2*n];return i>s||s==i&&r[t]<=r[n]}function Ge(){const e=this;let t,n,s,c,f,a,l,u,w,h,d,p,y,m,b,g,k,v,S,z,C,x,_,A,I,D,V,P,R,B,E,M,K;const U=new Ke,N=new Ke,O=new Ke;let T,W,j,H,L,F;function q(){let t;for(t=0;286>t;t++)E[2*t]=0;for(t=0;30>t;t++)M[2*t]=0;for(t=0;19>t;t++)K[2*t]=0;E[512]=1,e.ue=e.we=0,W=j=0}function G(e,t){let n,r=-1,s=e[1],i=0,o=7,c=4;0===s&&(o=138,c=3),e[2*(t+1)+1]=65535;for(let f=0;t>=f;f++)n=s,s=e[2*(f+1)+1],++i<o&&n==s||(c>i?K[2*n]+=i:0!==n?(n!=r&&K[2*n]++,K[32]++):i>10?K[36]++:K[34]++,i=0,r=n,0===s?(o=138,c=3):n==s?(o=6,c=3):(o=7,c=4))}function J(t){e.Ue[e.pending++]=t}function Q(e){J(255&e),J(e>>>8&255)}function X(e,t){let n;const r=t;F>16-r?(n=e,L|=n<<F&65535,Q(L),L=n>>>16-F,F+=r-16):(L|=e<<F&65535,F+=r)}function Y(e,t){const n=2*e;X(65535&t[n],65535&t[n+1])}function Z(e,t){let n,r,s=-1,i=e[1],o=0,c=7,f=4;for(0===i&&(c=138,f=3),n=0;t>=n;n++)if(r=i,i=e[2*(n+1)+1],++o>=c||r!=i){if(f>o)do{Y(r,K)}while(0!=--o);else 0!==r?(r!=s&&(Y(r,K),o--),Y(16,K),X(o-3,2)):o>10?(Y(18,K),X(o-11,7)):(Y(17,K),X(o-3,3));o=0,s=r,0===i?(c=138,f=3):r==i?(c=6,f=3):(c=7,f=4)}}function $(){16==F?(Q(L),L=0,F=0):8>F||(J(255&L),L>>>=8,F-=8)}function ee(t,n){let s,i,o;if(e.Ne[W]=t,e.Oe[W]=255&n,W++,0===t?E[2*n]++:(j++,t--,E[2*(Ke.ge[n]+256+1)]++,M[2*Ke.Se(t)]++),0==(8191&W)&&V>2){for(s=8*W,i=C-k,o=0;30>o;o++)s+=M[2*o]*(5+Ke.Ce[o]);if(s>>>=3,j<r.floor(W/2)&&s<r.floor(i/2))return!0}return W==T-1}function te(t,n){let r,s,i,o,c=0;if(0!==W)do{r=e.Ne[c],s=e.Oe[c],c++,0===r?Y(s,t):(i=Ke.ge[s],Y(i+256+1,t),o=Ke.ze[i],0!==o&&(s-=Ke.ke[i],X(s,o)),r--,i=Ke.Se(r),Y(i,n),o=Ke.Ce[i],0!==o&&(r-=Ke.ve[i],X(r,o)))}while(W>c);Y(256,t),H=t[513]}function ne(){F>8?Q(L):F>0&&J(255&L),L=0,F=0}function re(t,n,r){X(0+(r?1:0),3),((t,n)=>{ne(),H=8,Q(n),Q(~n),e.Ue.set(u.subarray(t,t+n),e.pending),e.pending+=n})(t,n)}function se(n){((t,n,r)=>{let s,i,o=0;V>0?(U.ne(e),N.ne(e),o=(()=>{let t;for(G(E,U.he),G(M,N.he),O.ne(e),t=18;t>=3&&0===K[2*Ke._e[t]+1];t--);return e.ue+=14+3*(t+1),t})(),s=e.ue+3+7>>>3,i=e.we+3+7>>>3,i>s||(s=i)):s=i=n+5,n+4>s||-1==t?i==s?(X(2+(r?1:0),3),te(Ue.Ae,Ue.Be)):(X(4+(r?1:0),3),((e,t,n)=>{let r;for(X(e-257,5),X(t-1,5),X(n-4,4),r=0;n>r;r++)X(K[2*Ke._e[r]+1],3);Z(E,e-1),Z(M,t-1)})(U.he+1,N.he+1,o+1),te(E,M)):re(t,n,r),q(),r&&ne()})(0>k?-1:k,C-k,n),k=C,t.Te()}function ie(){let e,n,r,s;do{if(s=w-_-C,0===s&&0===C&&0===_)s=f;else if(-1==s)s--;else if(C>=f+f-Fe){u.set(u.subarray(f,f+f),0),x-=f,C-=f,k-=f,e=y,r=e;do{n=65535&d[--r],d[r]=f>n?0:n-f}while(0!=--e);e=f,r=e;do{n=65535&h[--r],h[r]=f>n?0:n-f}while(0!=--e);s+=f}if(0===t.We)return;e=t.je(u,C+_,s),_+=e,3>_||(p=255&u[C],p=(p<<g^255&u[C+1])&b)}while(Fe>_&&0!==t.We)}function oe(e){let t,n,r=I,s=C,i=A;const o=C>f-Fe?C-(f-Fe):0;let c=B;const a=l,w=C+258;let d=u[s+i-1],p=u[s+i];R>A||(r>>=2),c>_&&(c=_);do{if(t=e,u[t+i]==p&&u[t+i-1]==d&&u[t]==u[s]&&u[++t]==u[s+1]){s+=2,t++;do{}while(u[++s]==u[++t]&&u[++s]==u[++t]&&u[++s]==u[++t]&&u[++s]==u[++t]&&u[++s]==u[++t]&&u[++s]==u[++t]&&u[++s]==u[++t]&&u[++s]==u[++t]&&w>s);if(n=258-(w-s),s=w-258,n>i){if(x=e,i=n,n>=c)break;d=u[s+i-1],p=u[s+i]}}}while((e=65535&h[e&a])>o&&0!=--r);return i>_?_:i}e.le=[],e.be=[],e.ae=[],E=[],M=[],K=[],e.de=(t,n)=>{const r=e.ae,s=r[n];let i=n<<1;for(;i<=e.ce&&(i<e.ce&&qe(t,r[i+1],r[i],e.le)&&i++,!qe(t,s,r[i],e.le));)r[n]=r[i],n=i,i<<=1;r[n]=s},e.He=(t,S,x,W,j,G)=>(W||(W=8),j||(j=8),G||(G=0),t.Le=null,-1==S&&(S=6),1>j||j>9||8!=W||9>x||x>15||0>S||S>9||0>G||G>2?Re:(t.Fe=e,a=x,f=1<<a,l=f-1,m=j+7,y=1<<m,b=y-1,g=r.floor((m+3-1)/3),u=new i(2*f),h=[],d=[],T=1<<j+6,e.Ue=new i(4*T),s=4*T,e.Ne=new o(T),e.Oe=new i(T),V=S,P=G,(t=>(t.qe=t.Ge=0,t.Le=null,e.pending=0,e.Je=0,n=He,c=0,U.re=E,U.ie=Ue.Ee,N.re=M,N.ie=Ue.Me,O.re=K,O.ie=Ue.Ke,L=0,F=0,H=8,q(),(()=>{w=2*f,d[y-1]=0;for(let e=0;y-1>e;e++)d[e]=0;D=We[V].De,R=We[V].Ie,B=We[V].Ve,I=We[V].Pe,C=0,k=0,_=0,v=A=2,z=0,p=0})(),0))(t))),e.Qe=()=>42!=n&&n!=He&&n!=Le?Re:(e.Oe=null,e.Ne=null,e.Ue=null,d=null,h=null,u=null,e.Fe=null,n==He?-3:0),e.Xe=(e,t,n)=>{let r=0;return-1==t&&(t=6),0>t||t>9||0>n||n>2?Re:(We[V].Re!=We[t].Re&&0!==e.qe&&(r=e.Ye(1)),V!=t&&(V=t,D=We[V].De,R=We[V].Ie,B=We[V].Ve,I=We[V].Pe),P=n,r)},e.Ze=(e,t,r)=>{let s,i=r,o=0;if(!t||42!=n)return Re;if(3>i)return 0;for(i>f-Fe&&(i=f-Fe,o=r-i),u.set(t.subarray(o,o+i),0),C=i,k=i,p=255&u[0],p=(p<<g^255&u[1])&b,s=0;i-3>=s;s++)p=(p<<g^255&u[s+2])&b,h[s&l]=d[p],d[p]=s;return 0},e.Ye=(r,i)=>{let o,w,m,I,R;if(i>4||0>i)return Re;if(!r.$e||!r.et&&0!==r.We||n==Le&&4!=i)return r.Le=je[4],Re;if(0===r.tt)return r.Le=je[7],-5;var B;if(t=r,I=c,c=i,42==n&&(w=8+(a-8<<4)<<8,m=(V-1&255)>>1,m>3&&(m=3),w|=m<<6,0!==C&&(w|=32),w+=31-w%31,n=He,J((B=w)>>8&255),J(255&B)),0!==e.pending){if(t.Te(),0===t.tt)return c=-1,0}else if(0===t.We&&I>=i&&4!=i)return t.Le=je[7],-5;if(n==Le&&0!==t.We)return r.Le=je[7],-5;if(0!==t.We||0!==_||0!=i&&n!=Le){switch(R=-1,We[V].Re){case 0:R=(e=>{let n,r=65535;for(r>s-5&&(r=s-5);;){if(1>=_){if(ie(),0===_&&0==e)return 0;if(0===_)break}if(C+=_,_=0,n=k+r,(0===C||C>=n)&&(_=C-n,C=n,se(!1),0===t.tt))return 0;if(C-k>=f-Fe&&(se(!1),0===t.tt))return 0}return se(4==e),0===t.tt?4==e?2:0:4==e?3:1})(i);break;case 1:R=(e=>{let n,r=0;for(;;){if(Fe>_){if(ie(),Fe>_&&0==e)return 0;if(0===_)break}if(3>_||(p=(p<<g^255&u[C+2])&b,r=65535&d[p],h[C&l]=d[p],d[p]=C),0===r||(C-r&65535)>f-Fe||2!=P&&(v=oe(r)),3>v)n=ee(0,255&u[C]),_--,C++;else if(n=ee(C-x,v-3),_-=v,v>D||3>_)C+=v,v=0,p=255&u[C],p=(p<<g^255&u[C+1])&b;else{v--;do{C++,p=(p<<g^255&u[C+2])&b,r=65535&d[p],h[C&l]=d[p],d[p]=C}while(0!=--v);C++}if(n&&(se(!1),0===t.tt))return 0}return se(4==e),0===t.tt?4==e?2:0:4==e?3:1})(i);break;case 2:R=(e=>{let n,r,s=0;for(;;){if(Fe>_){if(ie(),Fe>_&&0==e)return 0;if(0===_)break}if(3>_||(p=(p<<g^255&u[C+2])&b,s=65535&d[p],h[C&l]=d[p],d[p]=C),A=v,S=x,v=2,0!==s&&D>A&&f-Fe>=(C-s&65535)&&(2!=P&&(v=oe(s)),5>=v&&(1==P||3==v&&C-x>4096)&&(v=2)),3>A||v>A)if(0!==z){if(n=ee(0,255&u[C-1]),n&&se(!1),C++,_--,0===t.tt)return 0}else z=1,C++,_--;else{r=C+_-3,n=ee(C-1-S,A-3),_-=A-1,A-=2;do{++C>r||(p=(p<<g^255&u[C+2])&b,s=65535&d[p],h[C&l]=d[p],d[p]=C)}while(0!=--A);if(z=0,v=2,C++,n&&(se(!1),0===t.tt))return 0}}return 0!==z&&(n=ee(0,255&u[C-1]),z=0),se(4==e),0===t.tt?4==e?2:0:4==e?3:1})(i)}if(2!=R&&3!=R||(n=Le),0==R||2==R)return 0===t.tt&&(c=-1),0;if(1==R){if(1==i)X(2,3),Y(256,Ue.Ae),$(),9>1+H+10-F&&(X(2,3),Y(256,Ue.Ae),$()),H=7;else if(re(0,0,!1),3==i)for(o=0;y>o;o++)d[o]=0;if(t.Te(),0===t.tt)return c=-1,0}}return 4!=i?0:1}}function Je(){const e=this;e.nt=0,e.rt=0,e.We=0,e.qe=0,e.tt=0,e.Ge=0}function Qe(e){const t=new Je,n=(o=e&&e.chunkSize?e.chunkSize:65536)+5*(r.floor(o/16383)+1);var o;const c=new i(n);let f=e?e.level:-1;void 0===f&&(f=-1),t.He(f),t.$e=c,this.append=(e,r)=>{let o,f,a=0,l=0,u=0;const w=[];if(e.length){t.nt=0,t.et=e,t.We=e.length;do{if(t.rt=0,t.tt=n,o=t.Ye(0),0!=o)throw new s("deflating: "+t.Le);t.rt&&(t.rt==n?w.push(new i(c)):w.push(c.slice(0,t.rt))),u+=t.rt,r&&t.nt>0&&t.nt!=a&&(r(t.nt),a=t.nt)}while(t.We>0||0===t.tt);return w.length>1?(f=new i(u),w.forEach((e=>{f.set(e,l),l+=e.length}))):f=w[0]||new i,f}},this.flush=()=>{let e,r,o=0,f=0;const a=[];do{if(t.rt=0,t.tt=n,e=t.Ye(4),1!=e&&0!=e)throw new s("deflating: "+t.Le);n-t.tt>0&&a.push(c.slice(0,t.rt)),f+=t.rt}while(t.We>0||0===t.tt);return t.Qe(),r=new i(f),a.forEach((e=>{r.set(e,o),o+=e.length})),r}}Je.prototype={He(e,t){const n=this;return n.Fe=new Ge,t||(t=15),n.Fe.He(n,e,t)},Ye(e){const t=this;return t.Fe?t.Fe.Ye(t,e):Re},Qe(){const e=this;if(!e.Fe)return Re;const t=e.Fe.Qe();return e.Fe=null,t},Xe(e,t){const n=this;return n.Fe?n.Fe.Xe(n,e,t):Re},Ze(e,t){const n=this;return n.Fe?n.Fe.Ze(n,e,t):Re},je(e,t,n){const r=this;let s=r.We;return s>n&&(s=n),0===s?0:(r.We-=s,e.set(r.et.subarray(r.nt,r.nt+s),t),r.nt+=s,r.qe+=s,s)},Te(){const e=this;let t=e.Fe.pending;t>e.tt&&(t=e.tt),0!==t&&(e.$e.set(e.Fe.Ue.subarray(e.Fe.Je,e.Fe.Je+t),e.rt),e.rt+=t,e.Fe.Je+=t,e.Ge+=t,e.tt-=t,e.Fe.pending-=t,0===e.Fe.pending&&(e.Fe.Je=0))}};const Xe=-2,Ye=-3,Ze=-5,$e=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535],et=[96,7,256,0,8,80,0,8,16,84,8,115,82,7,31,0,8,112,0,8,48,0,9,192,80,7,10,0,8,96,0,8,32,0,9,160,0,8,0,0,8,128,0,8,64,0,9,224,80,7,6,0,8,88,0,8,24,0,9,144,83,7,59,0,8,120,0,8,56,0,9,208,81,7,17,0,8,104,0,8,40,0,9,176,0,8,8,0,8,136,0,8,72,0,9,240,80,7,4,0,8,84,0,8,20,85,8,227,83,7,43,0,8,116,0,8,52,0,9,200,81,7,13,0,8,100,0,8,36,0,9,168,0,8,4,0,8,132,0,8,68,0,9,232,80,7,8,0,8,92,0,8,28,0,9,152,84,7,83,0,8,124,0,8,60,0,9,216,82,7,23,0,8,108,0,8,44,0,9,184,0,8,12,0,8,140,0,8,76,0,9,248,80,7,3,0,8,82,0,8,18,85,8,163,83,7,35,0,8,114,0,8,50,0,9,196,81,7,11,0,8,98,0,8,34,0,9,164,0,8,2,0,8,130,0,8,66,0,9,228,80,7,7,0,8,90,0,8,26,0,9,148,84,7,67,0,8,122,0,8,58,0,9,212,82,7,19,0,8,106,0,8,42,0,9,180,0,8,10,0,8,138,0,8,74,0,9,244,80,7,5,0,8,86,0,8,22,192,8,0,83,7,51,0,8,118,0,8,54,0,9,204,81,7,15,0,8,102,0,8,38,0,9,172,0,8,6,0,8,134,0,8,70,0,9,236,80,7,9,0,8,94,0,8,30,0,9,156,84,7,99,0,8,126,0,8,62,0,9,220,82,7,27,0,8,110,0,8,46,0,9,188,0,8,14,0,8,142,0,8,78,0,9,252,96,7,256,0,8,81,0,8,17,85,8,131,82,7,31,0,8,113,0,8,49,0,9,194,80,7,10,0,8,97,0,8,33,0,9,162,0,8,1,0,8,129,0,8,65,0,9,226,80,7,6,0,8,89,0,8,25,0,9,146,83,7,59,0,8,121,0,8,57,0,9,210,81,7,17,0,8,105,0,8,41,0,9,178,0,8,9,0,8,137,0,8,73,0,9,242,80,7,4,0,8,85,0,8,21,80,8,258,83,7,43,0,8,117,0,8,53,0,9,202,81,7,13,0,8,101,0,8,37,0,9,170,0,8,5,0,8,133,0,8,69,0,9,234,80,7,8,0,8,93,0,8,29,0,9,154,84,7,83,0,8,125,0,8,61,0,9,218,82,7,23,0,8,109,0,8,45,0,9,186,0,8,13,0,8,141,0,8,77,0,9,250,80,7,3,0,8,83,0,8,19,85,8,195,83,7,35,0,8,115,0,8,51,0,9,198,81,7,11,0,8,99,0,8,35,0,9,166,0,8,3,0,8,131,0,8,67,0,9,230,80,7,7,0,8,91,0,8,27,0,9,150,84,7,67,0,8,123,0,8,59,0,9,214,82,7,19,0,8,107,0,8,43,0,9,182,0,8,11,0,8,139,0,8,75,0,9,246,80,7,5,0,8,87,0,8,23,192,8,0,83,7,51,0,8,119,0,8,55,0,9,206,81,7,15,0,8,103,0,8,39,0,9,174,0,8,7,0,8,135,0,8,71,0,9,238,80,7,9,0,8,95,0,8,31,0,9,158,84,7,99,0,8,127,0,8,63,0,9,222,82,7,27,0,8,111,0,8,47,0,9,190,0,8,15,0,8,143,0,8,79,0,9,254,96,7,256,0,8,80,0,8,16,84,8,115,82,7,31,0,8,112,0,8,48,0,9,193,80,7,10,0,8,96,0,8,32,0,9,161,0,8,0,0,8,128,0,8,64,0,9,225,80,7,6,0,8,88,0,8,24,0,9,145,83,7,59,0,8,120,0,8,56,0,9,209,81,7,17,0,8,104,0,8,40,0,9,177,0,8,8,0,8,136,0,8,72,0,9,241,80,7,4,0,8,84,0,8,20,85,8,227,83,7,43,0,8,116,0,8,52,0,9,201,81,7,13,0,8,100,0,8,36,0,9,169,0,8,4,0,8,132,0,8,68,0,9,233,80,7,8,0,8,92,0,8,28,0,9,153,84,7,83,0,8,124,0,8,60,0,9,217,82,7,23,0,8,108,0,8,44,0,9,185,0,8,12,0,8,140,0,8,76,0,9,249,80,7,3,0,8,82,0,8,18,85,8,163,83,7,35,0,8,114,0,8,50,0,9,197,81,7,11,0,8,98,0,8,34,0,9,165,0,8,2,0,8,130,0,8,66,0,9,229,80,7,7,0,8,90,0,8,26,0,9,149,84,7,67,0,8,122,0,8,58,0,9,213,82,7,19,0,8,106,0,8,42,0,9,181,0,8,10,0,8,138,0,8,74,0,9,245,80,7,5,0,8,86,0,8,22,192,8,0,83,7,51,0,8,118,0,8,54,0,9,205,81,7,15,0,8,102,0,8,38,0,9,173,0,8,6,0,8,134,0,8,70,0,9,237,80,7,9,0,8,94,0,8,30,0,9,157,84,7,99,0,8,126,0,8,62,0,9,221,82,7,27,0,8,110,0,8,46,0,9,189,0,8,14,0,8,142,0,8,78,0,9,253,96,7,256,0,8,81,0,8,17,85,8,131,82,7,31,0,8,113,0,8,49,0,9,195,80,7,10,0,8,97,0,8,33,0,9,163,0,8,1,0,8,129,0,8,65,0,9,227,80,7,6,0,8,89,0,8,25,0,9,147,83,7,59,0,8,121,0,8,57,0,9,211,81,7,17,0,8,105,0,8,41,0,9,179,0,8,9,0,8,137,0,8,73,0,9,243,80,7,4,0,8,85,0,8,21,80,8,258,83,7,43,0,8,117,0,8,53,0,9,203,81,7,13,0,8,101,0,8,37,0,9,171,0,8,5,0,8,133,0,8,69,0,9,235,80,7,8,0,8,93,0,8,29,0,9,155,84,7,83,0,8,125,0,8,61,0,9,219,82,7,23,0,8,109,0,8,45,0,9,187,0,8,13,0,8,141,0,8,77,0,9,251,80,7,3,0,8,83,0,8,19,85,8,195,83,7,35,0,8,115,0,8,51,0,9,199,81,7,11,0,8,99,0,8,35,0,9,167,0,8,3,0,8,131,0,8,67,0,9,231,80,7,7,0,8,91,0,8,27,0,9,151,84,7,67,0,8,123,0,8,59,0,9,215,82,7,19,0,8,107,0,8,43,0,9,183,0,8,11,0,8,139,0,8,75,0,9,247,80,7,5,0,8,87,0,8,23,192,8,0,83,7,51,0,8,119,0,8,55,0,9,207,81,7,15,0,8,103,0,8,39,0,9,175,0,8,7,0,8,135,0,8,71,0,9,239,80,7,9,0,8,95,0,8,31,0,9,159,84,7,99,0,8,127,0,8,63,0,9,223,82,7,27,0,8,111,0,8,47,0,9,191,0,8,15,0,8,143,0,8,79,0,9,255],tt=[80,5,1,87,5,257,83,5,17,91,5,4097,81,5,5,89,5,1025,85,5,65,93,5,16385,80,5,3,88,5,513,84,5,33,92,5,8193,82,5,9,90,5,2049,86,5,129,192,5,24577,80,5,2,87,5,385,83,5,25,91,5,6145,81,5,7,89,5,1537,85,5,97,93,5,24577,80,5,4,88,5,769,84,5,49,92,5,12289,82,5,13,90,5,3073,86,5,193,192,5,24577],nt=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],rt=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,112,112],st=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577],it=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13];function ot(){let e,t,n,r,s,i;function o(e,t,o,c,f,a,l,u,w,h,d){let p,y,m,b,g,k,v,S,z,C,x,_,A,I,D;C=0,g=o;do{n[e[t+C]]++,C++,g--}while(0!==g);if(n[0]==o)return l[0]=-1,u[0]=0,0;for(S=u[0],k=1;15>=k&&0===n[k];k++);for(v=k,k>S&&(S=k),g=15;0!==g&&0===n[g];g--);for(m=g,S>g&&(S=g),u[0]=S,I=1<<k;g>k;k++,I<<=1)if(0>(I-=n[k]))return Ye;if(0>(I-=n[g]))return Ye;for(n[g]+=I,i[1]=k=0,C=1,A=2;0!=--g;)i[A]=k+=n[C],A++,C++;g=0,C=0;do{0!==(k=e[t+C])&&(d[i[k]++]=g),C++}while(++g<o);for(o=i[m],i[0]=g=0,C=0,b=-1,_=-S,s[0]=0,x=0,D=0;m>=v;v++)for(p=n[v];0!=p--;){for(;v>_+S;){if(b++,_+=S,D=m-_,D=D>S?S:D,(y=1<<(k=v-_))>p+1&&(y-=p+1,A=v,D>k))for(;++k<D&&(y<<=1)>n[++A];)y-=n[A];if(D=1<<k,h[0]+D>1440)return Ye;s[b]=x=h[0],h[0]+=D,0!==b?(i[b]=g,r[0]=k,r[1]=S,k=g>>>_-S,r[2]=x-s[b-1]-k,w.set(r,3*(s[b-1]+k))):l[0]=x}for(r[1]=v-_,o>C?d[C]<c?(r[0]=256>d[C]?0:96,r[2]=d[C++]):(r[0]=a[d[C]-c]+16+64,r[2]=f[d[C++]-c]):r[0]=192,y=1<<v-_,k=g>>>_;D>k;k+=y)w.set(r,3*(x+k));for(k=1<<v-1;0!=(g&k);k>>>=1)g^=k;for(g^=k,z=(1<<_)-1;(g&z)!=i[b];)b--,_-=S,z=(1<<_)-1}return 0!==I&&1!=m?Ze:0}function c(o){let c;for(e||(e=[],t=[],n=new f(16),r=[],s=new f(15),i=new f(16)),t.length<o&&(t=[]),c=0;o>c;c++)t[c]=0;for(c=0;16>c;c++)n[c]=0;for(c=0;3>c;c++)r[c]=0;s.set(n.subarray(0,15),0),i.set(n.subarray(0,16),0)}this.st=(n,r,s,i,f)=>{let a;return c(19),e[0]=0,a=o(n,0,19,19,null,null,s,r,i,e,t),a==Ye?f.Le="oversubscribed dynamic bit lengths tree":a!=Ze&&0!==r[0]||(f.Le="incomplete dynamic bit lengths tree",a=Ye),a},this.it=(n,r,s,i,f,a,l,u,w)=>{let h;return c(288),e[0]=0,h=o(s,0,n,257,nt,rt,a,i,u,e,t),0!=h||0===i[0]?(h==Ye?w.Le="oversubscribed literal/length tree":-4!=h&&(w.Le="incomplete literal/length tree",h=Ye),h):(c(288),h=o(s,n,r,0,st,it,l,f,u,e,t),0!=h||0===f[0]&&n>257?(h==Ye?w.Le="oversubscribed distance tree":h==Ze?(w.Le="incomplete distance tree",h=Ye):-4!=h&&(w.Le="empty distance tree with lengths",h=Ye),h):0)}}function ct(){const e=this;let t,n,r,s,i=0,o=0,c=0,f=0,a=0,l=0,u=0,w=0,h=0,d=0;function p(e,t,n,r,s,i,o,c){let f,a,l,u,w,h,d,p,y,m,b,g,k,v,S,z;d=c.nt,p=c.We,w=o.ot,h=o.ct,y=o.write,m=y<o.read?o.read-y-1:o.end-y,b=$e[e],g=$e[t];do{for(;20>h;)p--,w|=(255&c.ft(d++))<<h,h+=8;if(f=w&b,a=n,l=r,z=3*(l+f),0!==(u=a[z]))for(;;){if(w>>=a[z+1],h-=a[z+1],0!=(16&u)){for(u&=15,k=a[z+2]+(w&$e[u]),w>>=u,h-=u;15>h;)p--,w|=(255&c.ft(d++))<<h,h+=8;for(f=w&g,a=s,l=i,z=3*(l+f),u=a[z];;){if(w>>=a[z+1],h-=a[z+1],0!=(16&u)){for(u&=15;u>h;)p--,w|=(255&c.ft(d++))<<h,h+=8;if(v=a[z+2]+(w&$e[u]),w>>=u,h-=u,m-=k,v>y){S=y-v;do{S+=o.end}while(0>S);if(u=o.end-S,k>u){if(k-=u,y-S>0&&u>y-S)do{o.lt[y++]=o.lt[S++]}while(0!=--u);else o.lt.set(o.lt.subarray(S,S+u),y),y+=u,S+=u,u=0;S=0}}else S=y-v,y-S>0&&2>y-S?(o.lt[y++]=o.lt[S++],o.lt[y++]=o.lt[S++],k-=2):(o.lt.set(o.lt.subarray(S,S+2),y),y+=2,S+=2,k-=2);if(y-S>0&&k>y-S)do{o.lt[y++]=o.lt[S++]}while(0!=--k);else o.lt.set(o.lt.subarray(S,S+k),y),y+=k,S+=k,k=0;break}if(0!=(64&u))return c.Le="invalid distance code",k=c.We-p,k=k>h>>3?h>>3:k,p+=k,d-=k,h-=k<<3,o.ot=w,o.ct=h,c.We=p,c.qe+=d-c.nt,c.nt=d,o.write=y,Ye;f+=a[z+2],f+=w&$e[u],z=3*(l+f),u=a[z]}break}if(0!=(64&u))return 0!=(32&u)?(k=c.We-p,k=k>h>>3?h>>3:k,p+=k,d-=k,h-=k<<3,o.ot=w,o.ct=h,c.We=p,c.qe+=d-c.nt,c.nt=d,o.write=y,1):(c.Le="invalid literal/length code",k=c.We-p,k=k>h>>3?h>>3:k,p+=k,d-=k,h-=k<<3,o.ot=w,o.ct=h,c.We=p,c.qe+=d-c.nt,c.nt=d,o.write=y,Ye);if(f+=a[z+2],f+=w&$e[u],z=3*(l+f),0===(u=a[z])){w>>=a[z+1],h-=a[z+1],o.lt[y++]=a[z+2],m--;break}}else w>>=a[z+1],h-=a[z+1],o.lt[y++]=a[z+2],m--}while(m>=258&&p>=10);return k=c.We-p,k=k>h>>3?h>>3:k,p+=k,d-=k,h-=k<<3,o.ot=w,o.ct=h,c.We=p,c.qe+=d-c.nt,c.nt=d,o.write=y,0}e.init=(e,i,o,c,f,a)=>{t=0,u=e,w=i,r=o,h=c,s=f,d=a,n=null},e.ut=(e,y,m)=>{let b,g,k,v,S,z,C,x=0,_=0,A=0;for(A=y.nt,v=y.We,x=e.ot,_=e.ct,S=e.write,z=S<e.read?e.read-S-1:e.end-S;;)switch(t){case 0:if(z>=258&&v>=10&&(e.ot=x,e.ct=_,y.We=v,y.qe+=A-y.nt,y.nt=A,e.write=S,m=p(u,w,r,h,s,d,e,y),A=y.nt,v=y.We,x=e.ot,_=e.ct,S=e.write,z=S<e.read?e.read-S-1:e.end-S,0!=m)){t=1==m?7:9;break}c=u,n=r,o=h,t=1;case 1:for(b=c;b>_;){if(0===v)return e.ot=x,e.ct=_,y.We=v,y.qe+=A-y.nt,y.nt=A,e.write=S,e.wt(y,m);m=0,v--,x|=(255&y.ft(A++))<<_,_+=8}if(g=3*(o+(x&$e[b])),x>>>=n[g+1],_-=n[g+1],k=n[g],0===k){f=n[g+2],t=6;break}if(0!=(16&k)){a=15&k,i=n[g+2],t=2;break}if(0==(64&k)){c=k,o=g/3+n[g+2];break}if(0!=(32&k)){t=7;break}return t=9,y.Le="invalid literal/length code",m=Ye,e.ot=x,e.ct=_,y.We=v,y.qe+=A-y.nt,y.nt=A,e.write=S,e.wt(y,m);case 2:for(b=a;b>_;){if(0===v)return e.ot=x,e.ct=_,y.We=v,y.qe+=A-y.nt,y.nt=A,e.write=S,e.wt(y,m);m=0,v--,x|=(255&y.ft(A++))<<_,_+=8}i+=x&$e[b],x>>=b,_-=b,c=w,n=s,o=d,t=3;case 3:for(b=c;b>_;){if(0===v)return e.ot=x,e.ct=_,y.We=v,y.qe+=A-y.nt,y.nt=A,e.write=S,e.wt(y,m);m=0,v--,x|=(255&y.ft(A++))<<_,_+=8}if(g=3*(o+(x&$e[b])),x>>=n[g+1],_-=n[g+1],k=n[g],0!=(16&k)){a=15&k,l=n[g+2],t=4;break}if(0==(64&k)){c=k,o=g/3+n[g+2];break}return t=9,y.Le="invalid distance code",m=Ye,e.ot=x,e.ct=_,y.We=v,y.qe+=A-y.nt,y.nt=A,e.write=S,e.wt(y,m);case 4:for(b=a;b>_;){if(0===v)return e.ot=x,e.ct=_,y.We=v,y.qe+=A-y.nt,y.nt=A,e.write=S,e.wt(y,m);m=0,v--,x|=(255&y.ft(A++))<<_,_+=8}l+=x&$e[b],x>>=b,_-=b,t=5;case 5:for(C=S-l;0>C;)C+=e.end;for(;0!==i;){if(0===z&&(S==e.end&&0!==e.read&&(S=0,z=S<e.read?e.read-S-1:e.end-S),0===z&&(e.write=S,m=e.wt(y,m),S=e.write,z=S<e.read?e.read-S-1:e.end-S,S==e.end&&0!==e.read&&(S=0,z=S<e.read?e.read-S-1:e.end-S),0===z)))return e.ot=x,e.ct=_,y.We=v,y.qe+=A-y.nt,y.nt=A,e.write=S,e.wt(y,m);e.lt[S++]=e.lt[C++],z--,C==e.end&&(C=0),i--}t=0;break;case 6:if(0===z&&(S==e.end&&0!==e.read&&(S=0,z=S<e.read?e.read-S-1:e.end-S),0===z&&(e.write=S,m=e.wt(y,m),S=e.write,z=S<e.read?e.read-S-1:e.end-S,S==e.end&&0!==e.read&&(S=0,z=S<e.read?e.read-S-1:e.end-S),0===z)))return e.ot=x,e.ct=_,y.We=v,y.qe+=A-y.nt,y.nt=A,e.write=S,e.wt(y,m);m=0,e.lt[S++]=f,z--,t=0;break;case 7:if(_>7&&(_-=8,v++,A--),e.write=S,m=e.wt(y,m),S=e.write,z=S<e.read?e.read-S-1:e.end-S,e.read!=e.write)return e.ot=x,e.ct=_,y.We=v,y.qe+=A-y.nt,y.nt=A,e.write=S,e.wt(y,m);t=8;case 8:return m=1,e.ot=x,e.ct=_,y.We=v,y.qe+=A-y.nt,y.nt=A,e.write=S,e.wt(y,m);case 9:return m=Ye,e.ot=x,e.ct=_,y.We=v,y.qe+=A-y.nt,y.nt=A,e.write=S,e.wt(y,m);default:return m=Xe,e.ot=x,e.ct=_,y.We=v,y.qe+=A-y.nt,y.nt=A,e.write=S,e.wt(y,m)}},e.ht=()=>{}}ot.dt=(e,t,n,r)=>(e[0]=9,t[0]=5,n[0]=et,r[0]=tt,0);const ft=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];function at(e,t){const n=this;let r,s=0,o=0,c=0,a=0;const l=[0],u=[0],w=new ct;let h=0,d=new f(4320);const p=new ot;n.ct=0,n.ot=0,n.lt=new i(t),n.end=t,n.read=0,n.write=0,n.reset=(e,t)=>{t&&(t[0]=0),6==s&&w.ht(e),s=0,n.ct=0,n.ot=0,n.read=n.write=0},n.reset(e,null),n.wt=(e,t)=>{let r,s,i;return s=e.rt,i=n.read,r=(i>n.write?n.end:n.write)-i,r>e.tt&&(r=e.tt),0!==r&&t==Ze&&(t=0),e.tt-=r,e.Ge+=r,e.$e.set(n.lt.subarray(i,i+r),s),s+=r,i+=r,i==n.end&&(i=0,n.write==n.end&&(n.write=0),r=n.write-i,r>e.tt&&(r=e.tt),0!==r&&t==Ze&&(t=0),e.tt-=r,e.Ge+=r,e.$e.set(n.lt.subarray(i,i+r),s),s+=r,i+=r),e.rt=s,n.read=i,t},n.ut=(e,t)=>{let i,f,y,m,b,g,k,v;for(m=e.nt,b=e.We,f=n.ot,y=n.ct,g=n.write,k=g<n.read?n.read-g-1:n.end-g;;){let S,z,C,x,_,A,I,D;switch(s){case 0:for(;3>y;){if(0===b)return n.ot=f,n.ct=y,e.We=b,e.qe+=m-e.nt,e.nt=m,n.write=g,n.wt(e,t);t=0,b--,f|=(255&e.ft(m++))<<y,y+=8}switch(i=7&f,h=1&i,i>>>1){case 0:f>>>=3,y-=3,i=7&y,f>>>=i,y-=i,s=1;break;case 1:S=[],z=[],C=[[]],x=[[]],ot.dt(S,z,C,x),w.init(S[0],z[0],C[0],0,x[0],0),f>>>=3,y-=3,s=6;break;case 2:f>>>=3,y-=3,s=3;break;case 3:return f>>>=3,y-=3,s=9,e.Le="invalid block type",t=Ye,n.ot=f,n.ct=y,e.We=b,e.qe+=m-e.nt,e.nt=m,n.write=g,n.wt(e,t)}break;case 1:for(;32>y;){if(0===b)return n.ot=f,n.ct=y,e.We=b,e.qe+=m-e.nt,e.nt=m,n.write=g,n.wt(e,t);t=0,b--,f|=(255&e.ft(m++))<<y,y+=8}if((~f>>>16&65535)!=(65535&f))return s=9,e.Le="invalid stored block lengths",t=Ye,n.ot=f,n.ct=y,e.We=b,e.qe+=m-e.nt,e.nt=m,n.write=g,n.wt(e,t);o=65535&f,f=y=0,s=0!==o?2:0!==h?7:0;break;case 2:if(0===b)return n.ot=f,n.ct=y,e.We=b,e.qe+=m-e.nt,e.nt=m,n.write=g,n.wt(e,t);if(0===k&&(g==n.end&&0!==n.read&&(g=0,k=g<n.read?n.read-g-1:n.end-g),0===k&&(n.write=g,t=n.wt(e,t),g=n.write,k=g<n.read?n.read-g-1:n.end-g,g==n.end&&0!==n.read&&(g=0,k=g<n.read?n.read-g-1:n.end-g),0===k)))return n.ot=f,n.ct=y,e.We=b,e.qe+=m-e.nt,e.nt=m,n.write=g,n.wt(e,t);if(t=0,i=o,i>b&&(i=b),i>k&&(i=k),n.lt.set(e.je(m,i),g),m+=i,b-=i,g+=i,k-=i,0!=(o-=i))break;s=0!==h?7:0;break;case 3:for(;14>y;){if(0===b)return n.ot=f,n.ct=y,e.We=b,e.qe+=m-e.nt,e.nt=m,n.write=g,n.wt(e,t);t=0,b--,f|=(255&e.ft(m++))<<y,y+=8}if(c=i=16383&f,(31&i)>29||(i>>5&31)>29)return s=9,e.Le="too many length or distance symbols",t=Ye,n.ot=f,n.ct=y,e.We=b,e.qe+=m-e.nt,e.nt=m,n.write=g,n.wt(e,t);if(i=258+(31&i)+(i>>5&31),!r||r.length<i)r=[];else for(v=0;i>v;v++)r[v]=0;f>>>=14,y-=14,a=0,s=4;case 4:for(;4+(c>>>10)>a;){for(;3>y;){if(0===b)return n.ot=f,n.ct=y,e.We=b,e.qe+=m-e.nt,e.nt=m,n.write=g,n.wt(e,t);t=0,b--,f|=(255&e.ft(m++))<<y,y+=8}r[ft[a++]]=7&f,f>>>=3,y-=3}for(;19>a;)r[ft[a++]]=0;if(l[0]=7,i=p.st(r,l,u,d,e),0!=i)return(t=i)==Ye&&(r=null,s=9),n.ot=f,n.ct=y,e.We=b,e.qe+=m-e.nt,e.nt=m,n.write=g,n.wt(e,t);a=0,s=5;case 5:for(;i=c,258+(31&i)+(i>>5&31)>a;){let o,w;for(i=l[0];i>y;){if(0===b)return n.ot=f,n.ct=y,e.We=b,e.qe+=m-e.nt,e.nt=m,n.write=g,n.wt(e,t);t=0,b--,f|=(255&e.ft(m++))<<y,y+=8}if(i=d[3*(u[0]+(f&$e[i]))+1],w=d[3*(u[0]+(f&$e[i]))+2],16>w)f>>>=i,y-=i,r[a++]=w;else{for(v=18==w?7:w-14,o=18==w?11:3;i+v>y;){if(0===b)return n.ot=f,n.ct=y,e.We=b,e.qe+=m-e.nt,e.nt=m,n.write=g,n.wt(e,t);t=0,b--,f|=(255&e.ft(m++))<<y,y+=8}if(f>>>=i,y-=i,o+=f&$e[v],f>>>=v,y-=v,v=a,i=c,v+o>258+(31&i)+(i>>5&31)||16==w&&1>v)return r=null,s=9,e.Le="invalid bit length repeat",t=Ye,n.ot=f,n.ct=y,e.We=b,e.qe+=m-e.nt,e.nt=m,n.write=g,n.wt(e,t);w=16==w?r[v-1]:0;do{r[v++]=w}while(0!=--o);a=v}}if(u[0]=-1,_=[],A=[],I=[],D=[],_[0]=9,A[0]=6,i=c,i=p.it(257+(31&i),1+(i>>5&31),r,_,A,I,D,d,e),0!=i)return i==Ye&&(r=null,s=9),t=i,n.ot=f,n.ct=y,e.We=b,e.qe+=m-e.nt,e.nt=m,n.write=g,n.wt(e,t);w.init(_[0],A[0],d,I[0],d,D[0]),s=6;case 6:if(n.ot=f,n.ct=y,e.We=b,e.qe+=m-e.nt,e.nt=m,n.write=g,1!=(t=w.ut(n,e,t)))return n.wt(e,t);if(t=0,w.ht(e),m=e.nt,b=e.We,f=n.ot,y=n.ct,g=n.write,k=g<n.read?n.read-g-1:n.end-g,0===h){s=0;break}s=7;case 7:if(n.write=g,t=n.wt(e,t),g=n.write,k=g<n.read?n.read-g-1:n.end-g,n.read!=n.write)return n.ot=f,n.ct=y,e.We=b,e.qe+=m-e.nt,e.nt=m,n.write=g,n.wt(e,t);s=8;case 8:return t=1,n.ot=f,n.ct=y,e.We=b,e.qe+=m-e.nt,e.nt=m,n.write=g,n.wt(e,t);case 9:return t=Ye,n.ot=f,n.ct=y,e.We=b,e.qe+=m-e.nt,e.nt=m,n.write=g,n.wt(e,t);default:return t=Xe,n.ot=f,n.ct=y,e.We=b,e.qe+=m-e.nt,e.nt=m,n.write=g,n.wt(e,t)}}},n.ht=e=>{n.reset(e,null),n.lt=null,d=null},n.yt=(e,t,r)=>{n.lt.set(e.subarray(t,t+r),0),n.read=n.write=r},n.bt=()=>1==s?1:0}const lt=13,ut=[0,0,255,255];function wt(){const e=this;function t(e){return e&&e.gt?(e.qe=e.Ge=0,e.Le=null,e.gt.mode=7,e.gt.kt.reset(e,null),0):Xe}e.mode=0,e.method=0,e.vt=[0],e.St=0,e.marker=0,e.zt=0,e.Ct=t=>(e.kt&&e.kt.ht(t),e.kt=null,0),e.xt=(n,r)=>(n.Le=null,e.kt=null,8>r||r>15?(e.Ct(n),Xe):(e.zt=r,n.gt.kt=new at(n,1<<r),t(n),0)),e._t=(e,t)=>{let n,r;if(!e||!e.gt||!e.et)return Xe;const s=e.gt;for(t=4==t?Ze:0,n=Ze;;)switch(s.mode){case 0:if(0===e.We)return n;if(n=t,e.We--,e.qe++,8!=(15&(s.method=e.ft(e.nt++)))){s.mode=lt,e.Le="unknown compression method",s.marker=5;break}if(8+(s.method>>4)>s.zt){s.mode=lt,e.Le="invalid win size",s.marker=5;break}s.mode=1;case 1:if(0===e.We)return n;if(n=t,e.We--,e.qe++,r=255&e.ft(e.nt++),((s.method<<8)+r)%31!=0){s.mode=lt,e.Le="incorrect header check",s.marker=5;break}if(0==(32&r)){s.mode=7;break}s.mode=2;case 2:if(0===e.We)return n;n=t,e.We--,e.qe++,s.St=(255&e.ft(e.nt++))<<24&4278190080,s.mode=3;case 3:if(0===e.We)return n;n=t,e.We--,e.qe++,s.St+=(255&e.ft(e.nt++))<<16&16711680,s.mode=4;case 4:if(0===e.We)return n;n=t,e.We--,e.qe++,s.St+=(255&e.ft(e.nt++))<<8&65280,s.mode=5;case 5:return 0===e.We?n:(n=t,e.We--,e.qe++,s.St+=255&e.ft(e.nt++),s.mode=6,2);case 6:return s.mode=lt,e.Le="need dictionary",s.marker=0,Xe;case 7:if(n=s.kt.ut(e,n),n==Ye){s.mode=lt,s.marker=0;break}if(0==n&&(n=t),1!=n)return n;n=t,s.kt.reset(e,s.vt),s.mode=12;case 12:return e.We=0,1;case lt:return Ye;default:return Xe}},e.At=(e,t,n)=>{let r=0,s=n;if(!e||!e.gt||6!=e.gt.mode)return Xe;const i=e.gt;return s<1<<i.zt||(s=(1<<i.zt)-1,r=n-s),i.kt.yt(t,r,s),i.mode=7,0},e.It=e=>{let n,r,s,i,o;if(!e||!e.gt)return Xe;const c=e.gt;if(c.mode!=lt&&(c.mode=lt,c.marker=0),0===(n=e.We))return Ze;for(r=e.nt,s=c.marker;0!==n&&4>s;)e.ft(r)==ut[s]?s++:s=0!==e.ft(r)?0:4-s,r++,n--;return e.qe+=r-e.nt,e.nt=r,e.We=n,c.marker=s,4!=s?Ye:(i=e.qe,o=e.Ge,t(e),e.qe=i,e.Ge=o,c.mode=7,0)},e.Dt=e=>e&&e.gt&&e.gt.kt?e.gt.kt.bt():Xe}function ht(){}function dt(e){const t=new ht,n=e&&e.chunkSize?r.floor(2*e.chunkSize):131072,o=new i(n);let c=!1;t.xt(),t.$e=o,this.append=(e,r)=>{const f=[];let a,l,u=0,w=0,h=0;if(0!==e.length){t.nt=0,t.et=e,t.We=e.length;do{if(t.rt=0,t.tt=n,0!==t.We||c||(t.nt=0,c=!0),a=t._t(0),c&&a===Ze){if(0!==t.We)throw new s("inflating: bad input")}else if(0!==a&&1!==a)throw new s("inflating: "+t.Le);if((c||1===a)&&t.We===e.length)throw new s("inflating: bad input");t.rt&&(t.rt===n?f.push(new i(o)):f.push(o.slice(0,t.rt))),h+=t.rt,r&&t.nt>0&&t.nt!=u&&(r(t.nt),u=t.nt)}while(t.We>0||0===t.tt);return f.length>1?(l=new i(h),f.forEach((e=>{l.set(e,w),w+=e.length}))):l=f[0]||new i,l}},this.flush=()=>{t.Ct()}}ht.prototype={xt(e){const t=this;return t.gt=new wt,e||(e=15),t.gt.xt(t,e)},_t(e){const t=this;return t.gt?t.gt._t(t,e):Xe},Ct(){const e=this;if(!e.gt)return Xe;const t=e.gt.Ct(e);return e.gt=null,t},It(){const e=this;return e.gt?e.gt.It(e):Xe},At(e,t){const n=this;return n.gt?n.gt.At(n,e,t):Xe},ft(e){return this.et[e]},je(e,t){return this.et.subarray(e,e+t)}},self.initCodec=()=>{self.Deflate=Qe,self.Inflate=dt};\n'],{type:"text/javascript"}));e({workerScripts:{inflate:[t],deflate:[t]}})}(jt),jt({Deflate:function(e){const t=new ae,r=(n=e&&e.chunkSize?e.chunkSize:65536)+5*(Math.floor(n/16383)+1);var n;const o=y,i=new Uint8Array(r);let a=e?e.level:g;void 0===a&&(a=g),t.deflateInit(a),t.next_out=i,this.append=function(e,n){let a,s,c=0,u=0,d=0;const l=[];if(e.length){t.next_in_index=0,t.next_in=e,t.avail_in=e.length;do{if(t.next_out_index=0,t.avail_out=r,a=t.deflate(o),a!=_)throw new Error("deflating: "+t.msg);t.next_out_index&&(t.next_out_index==r?l.push(new Uint8Array(i)):l.push(i.slice(0,t.next_out_index))),d+=t.next_out_index,n&&t.next_in_index>0&&t.next_in_index!=c&&(n(t.next_in_index),c=t.next_in_index)}while(t.avail_in>0||0===t.avail_out);return l.length>1?(s=new Uint8Array(d),l.forEach((function(e){s.set(e,u),u+=e.length}))):s=l[0]||new Uint8Array,s}},this.flush=function(){let e,n,o=0,a=0;const s=[];do{if(t.next_out_index=0,t.avail_out=r,e=t.deflate(A),e!=T&&e!=_)throw new Error("deflating: "+t.msg);r-t.avail_out>0&&s.push(i.slice(0,t.next_out_index)),a+=t.next_out_index}while(t.avail_in>0||0===t.avail_out);return t.deflateEnd(),n=new Uint8Array(a),s.forEach((function(e){n.set(e,o),o+=e.length})),n}},Inflate:function(e){const t=new ct,r=e&&e.chunkSize?Math.floor(2*e.chunkSize):131072,n=new Uint8Array(r);let o=!1;t.inflateInit(),t.next_out=n,this.append=function(e,i){const a=[];let s,c,u=0,d=0,l=0;if(0!==e.length){t.next_in_index=0,t.next_in=e,t.avail_in=e.length;do{if(t.next_out_index=0,t.avail_out=r,0!==t.avail_in||o||(t.next_in_index=0,o=!0),s=t.inflate(0),o&&s===me){if(0!==t.avail_in)throw new Error("inflating: bad input")}else if(s!==se&&s!==ce)throw new Error("inflating: "+t.msg);if((o||s===ce)&&t.avail_in===e.length)throw new Error("inflating: bad input");t.next_out_index&&(t.next_out_index===r?a.push(new Uint8Array(n)):a.push(n.slice(0,t.next_out_index))),l+=t.next_out_index,i&&t.next_in_index>0&&t.next_in_index!=u&&(i(t.next_in_index),u=t.next_in_index)}while(t.avail_in>0||0===t.avail_out);return a.length>1?(c=new Uint8Array(l),a.forEach((function(e){c.set(e,d),d+=e.length}))):c=a[0]||new Uint8Array,c}},this.flush=function(){t.inflateEnd()}}}),t.BlobReader=jn,t.BlobWriter=Kn,t.Data64URIReader=xn,t.Data64URIWriter=$n,t.ERR_BAD_FORMAT=xo,t.ERR_CENTRAL_DIRECTORY_NOT_FOUND=Vo,t.ERR_DUPLICATED_NAME=gi,t.ERR_ENCRYPTED=zo,t.ERR_EOCDR_LOCATOR_ZIP64_NOT_FOUND=Ko,t.ERR_EOCDR_NOT_FOUND=$o,t.ERR_EOCDR_ZIP64_NOT_FOUND=jo,t.ERR_EXTRAFIELD_ZIP64_NOT_FOUND=Wo,t.ERR_HTTP_RANGE=wn,t.ERR_INVALID_COMMENT=fi,t.ERR_INVALID_ENCRYPTION_STRENGTH=vi,t.ERR_INVALID_ENTRY_COMMENT=Si,t.ERR_INVALID_ENTRY_NAME=hi,t.ERR_INVALID_EXTRAFIELD_DATA=Ai,t.ERR_INVALID_EXTRAFIELD_TYPE=Ei,t.ERR_INVALID_PASSWORD=or,t.ERR_INVALID_SIGNATURE=ir,t.ERR_INVALID_VERSION=yi,t.ERR_ITERATOR_COMPLETED_TOO_SOON=Cn,t.ERR_LOCAL_FILE_HEADER_NOT_FOUND=Ho,t.ERR_SPLIT_ZIP_FILE=Zo,t.ERR_UNSUPPORTED_COMPRESSION=Yo,t.ERR_UNSUPPORTED_ENCRYPTION=qo,t.ERR_UNSUPPORTED_FORMAT=_i,t.HttpRangeReader=class extends io{constructor(e,t={}){t.useRangeHeader=!0,super(e,t)}},t.HttpReader=io,t.Reader=Bn,t.SplitDataReader=co,t.SplitDataWriter=uo,t.SplitZipReader=fo,t.SplitZipWriter=So,t.TextReader=Vn,t.TextWriter=Hn,t.Uint8ArrayReader=ao,t.Uint8ArrayWriter=so,t.Writer=Gn,t.ZipReader=ti,t.ZipWriter=wi,t.configure=jt,t.fs=xi,t.getMimeType=function(e){return e&&Ht[e.split(".").pop().toLowerCase()]||"application/octet-stream"},t.initShimAsyncCodec=function(e,t={},r){return{Deflate:In(e.Deflate,t.deflate,r),Inflate:In(e.Inflate,t.inflate,r)}},t.terminateWorkers=function(){vn.forEach((e=>{Tn(e),e.terminate()}))}}}]);