"use strict";(globalThis.webpackChunk_dashlane_leeloo=globalThis.webpackChunk_dashlane_leeloo||[]).push([[7577],{15735:(e,t,i)=>{i.r(t),i.d(t,{CredentialEditPanel:()=>Ie});var a=i(696832),n=i(799852),s=i(133354),r=i(448430),l=i(846097),o=i(66941),d=i(947843),c=i(988799),p=i(889483),u=i(383849),m=i.n(u),_=i(453576),h=i(299074),g=i(96862),b=i(886025),k=i(482598),w=i(441217),y=i(787268),S=i(915970),f=i(201389),v=i(635164),C=i(796446),E=i(702394),x=i(905586),D=i(372814),I=i(159515),A=i(793071),P=i(880706),L=i(642844),W=i(846658),Z=i(849399),T=i(572108),N=i(592233),U=i(164718),G=i(62429);const B=async e=>await Promise.all(e.map((e=>(0,N.hashDomain)(new U.Y(e).getRootDomain()))));var R,q=i(38069),z=i(488856),V=i(159713);const H=a.memo((({credential:e,onClose:t,openWithNewUrlField:i,onUpdateLinkedWebsitesAddedByUser:n,hasLimitedRights:s,dashlaneDefinedLinkedWebsites:r})=>{const{translate:l}=(0,f.Z)(),[o,d]=a.useState(e.linkedWebsites.addedByUser),[c,p]=a.useState(i);return a.useEffect((()=>{const t=e.linkedWebsites.addedByUser,i=!(t.length===o.length&&t.every(((e,t)=>o[t]===e)));p(i),n(o)}),[o]),a.createElement("div",{className:z.Z.form,"data-testid":"linked-websites-tab"},a.createElement("div",{className:V.Z.header},a.createElement("button",{className:V.Z.backButton,onClick:t},R||(R=a.createElement(w.wyc,{size:12}))),a.createElement(w.X6q,{size:"small"},l("webapp_credential_linked_websites_title"))),a.createElement("div",{className:z.Z.containerBlock},a.createElement(q.a,{label:"webapp_credential_linked_websites_section_primary",linkedWebsitesList:[e.url],areItemsLocked:s,credentialId:e.id,isEditing:!1})),a.createElement("div",{className:z.Z.containerBlock},a.createElement(q.a,{label:"webapp_credential_linked_websites_section_added_by_user",linkedWebsitesList:o,areItemsLocked:s,credentialId:e.id,isListEditable:!s,isEditing:c,showUrlProtocol:!0,updateLinkedWebsitesList:d})),r&&r.length>1?a.createElement("div",{className:z.Z.containerBlock},a.createElement(q.a,{label:"webapp_credential_linked_websites_section_added_by_dashlane",linkedWebsitesList:r,areItemsLocked:!0,credentialId:e.id,isEditing:!1})):null)})),O=({onClose:e,setDisplayLinkedWebsitesDataSavedAlert:t})=>{const{translate:i}=(0,f.Z)();return(0,a.useRef)(null).current=window.setTimeout((()=>t(!1)),5e3),a.createElement(w.YcA,null,a.createElement(w.bZj,{size:w.k3y.SMALL,severity:w.BLW.SUCCESS,closeIconName:i("_common_alert_dismiss_button"),onClose:e},i("_common_toast_changes_saved")))};var F=i(542293);const M=({onCancel:e,onLeavePageWithoutSaving:t})=>{const{translate:i}=(0,f.Z)();return a.createElement(F.o,{isOpen:!0,showCloseIcon:!0,title:i("webapp_credential_linked_websites_discard_dialog_title"),onRequestClose:e,footer:a.createElement(w.Ejs,{justifyContent:"end",gap:"8px"},a.createElement(w.zxk,{type:"button",nature:"secondary",onClick:e},i("webapp_credential_linked_websites_discard_dialog_cancel")),a.createElement(w.zxk,{type:"button",onClick:t},i("webapp_credential_linked_websites_discard_dialog_discard")))},a.createElement(w.Ejs,{flexDirection:"column",gap:"8px",sx:{width:"576px"}},a.createElement(w.nvN,null,i.markup("webapp_credential_linked_websites_discard_dialog_description_markup"))))},J=({duplicateData:e,onCancel:t,onSave:i})=>{const{translate:n}=(0,f.Z)(),s=e.length>1,r=s?n("webapp_credential_linked_websites_duplicate_prevention_dialog_title_multiple"):n("webapp_credential_linked_websites_duplicate_prevention_dialog_title_one",{url:e[0].linkedWebsite}),l=s?n("webapp_credential_linked_websites_duplicate_prevention_dialog_description_multiple"):n("webapp_credential_linked_websites_duplicate_prevention_dialog_description_one",{credentialName:e[0].credentialName}),o=n(s?"webapp_credential_linked_websites_duplicate_prevention_dialog_add_websites_multiple":"webapp_credential_linked_websites_duplicate_prevention_dialog_add_websites_one");return a.createElement(F.o,{isOpen:!0,showCloseIcon:!0,title:r,onRequestClose:t,footer:a.createElement(w.Ejs,{justifyContent:"end",gap:"8px"},a.createElement(w.zxk,{type:"button",nature:"secondary",onClick:t},n("webapp_credential_linked_websites_duplicate_prevention_dialog_cancel")),a.createElement(w.zxk,{type:"button",onClick:i},o))},a.createElement("div",null,a.createElement("p",null,l),s?a.createElement("ul",{className:"duplicatesList--SwGmL5ftwe"},e.map((e=>a.createElement("li",{key:e.linkedWebsite,className:"duplicateItem--mPX5urdfL2"},e.linkedWebsite)))):null))};var j,K=i(111768);const X="webapp_password_history_detailed_password_view_button",Y=({credentialId:e,credHasPasswordHistory:t})=>{const{translate:i}=(0,f.Z)(),{routes:n}=(0,v.Xo)(),s=n.userPasswordHistoryFilteredByCredential(e);return t?a.createElement("div",null,a.createElement(v.rU,{to:s,tabIndex:-1},a.createElement(K.zx,{mood:"neutral",intensity:"quiet",title:i(X),icon:j||(j=a.createElement(w.tru,null)),layout:"iconLeading"},i(X)))):null};var $=i(60043),Q=i(121911),ee=i(102511),te=i(51119),ie=i(281086),ae=i(782038);const ne={exit:"exit--p4spwlkedE",exitActive:"exitActive--BIpaDF7MkX",exitDone:"exitDone--KzowOK4h4K",appear:"appear--OcvlWdq5He",appearActive:"appearActive--HVwCcEJzKz",appearDone:"appearDone--KgBJPzbyTA"},se=a.memo((({onPrimaryClick:e})=>{const{translate:t}=(0,f.Z)(),[i,n]=a.useState(!1);return a.createElement(ae.Z,{appear:!0,in:!i,timeout:600,classNames:ne,onExited:e},a.createElement("div",{className:"infoboxWrapper--wv1g66AwDu"},a.createElement(w.vDh,{title:a.createElement("div",{className:"boxTitle--OPmhjIjNsk"},t("webapp_credential_edition_health_box_excluded_title")),severity:"subtle",size:"descriptive",actions:[a.createElement(w.zxk,{nature:"primary",onClick:e=>{e.preventDefault(),n(!0)},key:"primaryAction",size:"small",type:"button"},t("webapp_credential_edition_health_box_include"))]},a.createElement("div",{className:"descriptionWarning--MZGXiyazU_"},t("webapp_credential_edition_health_box_excluded_description")))))}));var re=i(504253),le=i(151796);const oe={appear:"appear--MMCjEcRU3u",appearActive:"appearActive--LG103cUrNZ",appearDone:"appearDone--tuYaN3WTGO"},de=a.memo((({onPrimaryClick:e,onSecondaryClick:t,isLimitedSharingPassword:i,corruptionData:a})=>{const{translate:n}=(0,f.Z)();if(!a)return null;const s=((e,t)=>{const{riskType:i}=e;switch(i){case re.gI.Compromised:return{title:t("webapp_credential_edition_health_box_compromised_title"),description:t("webapp_credential_edition_health_box_compromised_description"),secondary:t("webapp_credential_edition_health_box_view_compromised")};case re.gI.Reused:return{title:t("webapp_credential_edition_health_box_reused_title"),description:t.markup("webapp_credential_edition_health_box_reused_description_markup",{count:e.reuseCount}),secondary:t("webapp_credential_edition_health_box_view_reused")};case re.gI.Weak:return{title:t("webapp_credential_edition_health_box_weak_title"),description:t("webapp_credential_edition_health_box_weak_description"),secondary:t("webapp_credential_edition_health_box_view_weak")};default:return(0,le.U)(i)}})(a,n),r=a.severity===re.bp.STRONG?"warning":"brand";return(0,K.tZ)(ae.Z,{in:!0,appear:!0,timeout:600,classNames:oe},(0,K.tZ)("div",{className:"infoboxWrapper--HmImoFEcPo",sx:{backgroundColor:"ds.background.default"}},(0,K.tZ)(K.ke,{title:s.title,description:s.description,mood:r,size:"large",actions:[(0,K.tZ)(K.zx,{onClick:t,intensity:"quiet",key:"view_health",size:"small"},s.secondary),(0,K.tZ)(w.ua7,{passThrough:!i,key:"change_password",content:n("webapp_credential_edition_health_box_change_limited"),placement:"left",sx:{maxWidth:"312px",fontSize:2}},(0,K.tZ)(K.zx,{size:"small",onClick:e,disabled:i},n("webapp_credential_edition_health_box_change_password")))]})))})),ce=JSON.parse('{"v":"5.7.0","fr":30,"ip":0,"op":26,"w":240,"h":240,"nm":"Loading Light Theme","ddd":0,"assets":[],"layers":[{"ddd":0,"ind":1,"ty":3,"nm":"Null 4","sr":1,"ks":{"o":{"a":0,"k":0,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[120,122,0],"ix":2},"a":{"a":0,"k":[0,0,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"ip":0,"op":150,"st":0,"bm":0},{"ddd":0,"ind":2,"ty":4,"nm":"load","parent":1,"sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[0,151,0],"ix":2},"a":{"a":0,"k":[0,0,0],"ix":1},"s":{"a":0,"k":[250,250,100],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"d":1,"ty":"el","s":{"a":0,"k":[88,88],"ix":2},"p":{"a":0,"k":[0,0],"ix":3},"nm":"Ellipse Path 1","mn":"ADBE Vector Shape - Ellipse","hd":false},{"ty":"st","c":{"a":0,"k":[0.05490196078,0.2078431373,0.2392156863,1],"ix":3},"o":{"a":0,"k":100,"ix":4},"w":{"a":0,"k":6,"ix":5},"lc":1,"lj":1,"ml":4,"bm":0,"nm":"Stroke 1","mn":"ADBE Vector Graphic - Stroke","hd":false},{"ty":"tr","p":{"a":0,"k":[0.5,-60.5],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Ellipse 1","np":3,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false},{"ty":"tm","s":{"a":0,"k":0,"ix":1},"e":{"a":1,"k":[{"i":{"x":[0.667],"y":[1]},"o":{"x":[0.167],"y":[0.167]},"t":0,"s":[10]},{"i":{"x":[0.833],"y":[0.833]},"o":{"x":[0.333],"y":[0]},"t":12.5,"s":[42]},{"t":25,"s":[10]}],"ix":2},"o":{"a":1,"k":[{"i":{"x":[0.833],"y":[0.833]},"o":{"x":[0.2],"y":[0]},"t":0,"s":[-19]},{"t":25,"s":[341]}],"ix":3},"m":1,"ix":2,"nm":"Trim Paths 1","mn":"ADBE Vector Filter - Trim","hd":false}],"ip":0,"op":106.197876042479,"st":0,"bm":0},{"ddd":0,"ind":3,"ty":4,"nm":"load 2","parent":1,"sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[0,151,0],"ix":2},"a":{"a":0,"k":[0,0,0],"ix":1},"s":{"a":0,"k":[250,250,100],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"d":1,"ty":"el","s":{"a":0,"k":[88,88],"ix":2},"p":{"a":0,"k":[0,0],"ix":3},"nm":"Ellipse Path 1","mn":"ADBE Vector Shape - Ellipse","hd":false},{"ty":"st","c":{"a":0,"k":[0.9058823529,0.9215686275,0.9254901961,1],"ix":3},"o":{"a":0,"k":100,"ix":4},"w":{"a":0,"k":6,"ix":5},"lc":2,"lj":1,"ml":4,"bm":0,"nm":".","mn":"ADBE Vector Graphic - Stroke","hd":false},{"ty":"tr","p":{"a":0,"k":[0.5,-60.5],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Ellipse 1","np":3,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":106.197876042479,"st":0,"bm":0}],"markers":[]}'),pe="healthInfoContainer--Oetnuw7mbu",ue="loader--q4x90RGHZr",me=({credential:e})=>{const t=(0,v.k6)(),{routes:i}=(0,$.Xo)(),[s,r]=(0,a.useState)(null),l=(0,a.useCallback)((e=>r(e)),[]),o=(0,a.useCallback)((()=>r(null)),[]),d=e.sharingStatus?.isShared&&"limited"===e.sharingStatus.permission||!1,c=(0,a.useCallback)((t=>{t.preventDefault(),l(e.id)}),[e.domainIcon,e.id,e.title,e.url,l]),p=(0,a.useCallback)((e=>{e.preventDefault(),t.push(i.userPasswordHealth)}),[t,i.userPasswordHealth]),{updateIsCredentialExcluded:u}=(0,ee.$)(),{healthData:m}=(e=>{const{data:t}=(0,n.k)(te.d,"credentialHealthData",{credentialId:e});return{healthData:t}})(e.id);return null===m?null:m?a.createElement("div",{className:pe},s?a.createElement(ie.R,{credentialId:s,dismissCallback:o}):null,a.createElement("div",{className:ue},a.createElement(Q.Z,{height:24,width:24,animationParams:{renderer:"svg",loop:!0,autoplay:!0,animationData:ce}})),m.excluded?a.createElement(se,{onPrimaryClick:()=>{u(e.id,!1)}}):a.createElement(de,{onPrimaryClick:c,onSecondaryClick:p,isLimitedSharingPassword:d,corruptionData:m.corruptionData})):a.createElement("div",{className:pe},a.createElement("div",{className:ue},a.createElement(Q.Z,{height:24,width:24,animationParams:{renderer:"svg",loop:!0,autoplay:!0,animationData:ce}})))};var _e=i(630912),he=i(417776),ge=i(509997),be=i(922487);const{SHARED_ACCESS:ke,ACCOUNT_DETAILS:we}=ge.CredentialTabs,ye=({activeTab:e,credential:t,displayTabs:i,changeTab:a})=>{const{translate:n}=(0,f.Z)(),s=t.sharingStatus,r=s.isShared&&"admin"===s.permission,{users:l,groups:o}=(0,be.r)(t.id,r),d=[{active:e===we,label:n("webapp_credential_edition_account_details"),onClick:()=>a(we)},{active:e===ke,label:`${n("webapp_credential_edition_shared_access")} (${l.length+o.length})`,onClick:()=>a(ke)}];return(0,K.tZ)(C.V9,{icon:(0,K.tZ)(he.h,{title:t.title,size:_e.o.LARGE,lightTheme:!1,domain:new U.Y(t.url).getRootDomain()}),title:t.title,tabs:i?d:void 0})},{SHARED_ACCESS:Se,ACCOUNT_DETAILS:fe,LINKED_WEBSITES:ve}=ge.CredentialTabs,Ce=({location:e,activeSpaces:t,credential:i,credentialPreferences:n,onClose:s,credHasPasswordHistory:r,protectedItemsUnlockerShown:d,dashlaneDefinedLinkedWebsites:c,areProtectedItemsUnlocked:p,openProtectedItemsUnlocker:u})=>{var R;const{translate:q}=(0,f.Z)(),{routes:V}=(0,v.Xo)(),F=(0,y.V)(),j=(()=>{const{updateLinkedWebsites:e}=(0,k.u)(l.G),t=(0,S.w)("autofill_web_grapheneMigration_dev"),i=(0,S.w)("autofill_web_grapheneMigration");return async(a,n)=>{t||i?e({credentialId:a,updatedLinkedWebsitesList:n}):await o.C.updateLinkedWebsites({credentialId:a,updatedLinkedWebsitesDomainList:n})}})(),{createCollection:K,updateCollection:X}=(0,k.u)(h.v),{addItemToCollections:$,removeItemFromCollections:Q}=(0,k.u)(b.a),ee=a.createRef(),te=a.useRef(null),[ie,ae]=a.useState((()=>{var e;const t=(0,v.CN)();return T.A[null!=(e=t.get("tab"))?e:"account-details"]})()),[ne,se]=a.useState(fe),[re,le]=a.useState(!1),[oe,de]=a.useState(null!=(R=i?.linkedWebsites.addedByUser)?R:[]),[ce,pe]=a.useState(!1),[ue,_e]=a.useState(!1),[he,ge]=a.useState([]),[be,ke]=a.useState(!1),[we,Ce]=a.useState(!1),[Ee,xe]=a.useState(!1),[De,Ie]=a.useState(null),[Ae,Pe]=a.useState(!1),[Le,We]=a.useState(!1),{current:Ze}=a.useRef({confirmDeleteConfirm:q("webapp_credential_edition_delete_confirm"),confirmDeleteDismiss:q("webapp_credential_edition_delete_dismiss"),confirmDeleteSubtitle:q("webapp_credential_edition_confirm_delete_subtitle"),confirmDeleteTitle:q("webapp_credential_edition_confirm_delete_title"),lastAdminActionLabel:q("webapp_credential_edition_change_permissions"),lastAdminTitle:q("webapp_credential_edition_last_admin_title"),lastAdminSubtitle:q("webapp_credential_edition_last_admin_subtitle"),groupSharingTitle:q("webapp_credential_edition_group_sharing_title"),groupSharingSubtitle:q("webapp_credential_edition_group_sharing_subtitle")});if(a.useEffect((()=>{i||s()}),[i]),a.useEffect((()=>()=>{te.current&&clearTimeout(te.current)}),[]),a.useEffect((()=>{var e,t,a;t=oe,a=null!=(e=i?.linkedWebsites.addedByUser)?e:[],[...t,...a].filter(Boolean).some((e=>!(t.includes(e)&&a.includes(e))))&&le(!0)}),[oe,i?.linkedWebsites.addedByUser]),!i)return null;const Te=e=>{re?(se(e),Ce(!0)):ae(e)},Ne=()=>{Ce(!1),ke(!1),ge([])},Ue=e=>{pe(e),Te(ve)},Ge=()=>{ae(fe),le(!1),Ne()},Be=e=>{e?.preventDefault(),re?(se(fe),ke(!0)):Ge()},Re=()=>{j(i.id,oe),xe(!0),(async(e,t)=>{const i=t.filter((t=>t&&!e.linkedWebsites.addedByUser.includes(t))),a=e.linkedWebsites.addedByUser.filter((e=>e&&!t.includes(e))),n=new U.Y(e.url).getRootDomain();(0,G.Kz)(new N.AnonymousUpdateCredentialEvent({action:N.Action.Edit,associatedWebsitesAddedList:await B(i),associatedWebsitesRemovedList:await B(a),fieldList:[N.Field.AssociatedWebsitesList],domain:{type:N.DomainType.Web,id:await(0,N.hashDomain)(n)},space:e.spaceId?N.Space.Professional:N.Space.Personal})),(0,G.Kz)(new N.UserUpdateVaultItemEvent({action:N.Action.Edit,itemId:e.id,itemType:N.ItemType.Credential,fieldsEdited:[N.Field.AssociatedWebsitesList],space:e.spaceId?N.Space.Professional:N.Space.Personal}))})(i,oe),Ge()},qe=e=>!e.initiallyExisting&&!e.hasBeenDeleted,ze=e=>e.initiallyExisting&&!e.hasBeenDeleted,Ve=ie===ve?(e,t)=>Be(t):()=>{e?.state?.entity?(0,P.d)({routes:V,location:e}):s()},He=ue||d;return a.createElement(C.zI,{isViewingExistingItem:!0,itemHasBeenEdited:re,isSomeDialogOpen:be||he.length>0||we||Le||!!De,onSubmit:async()=>{if(ie===ve)return void(async()=>{const e=await(async(e,t)=>{const i=t.filter((t=>t&&!e.linkedWebsites.addedByUser.includes(t))).map((e=>new U.Y(e).getRootDomain())),a=i.map((async t=>await o.C.getCredentialsByDomain(((e,t)=>({domain:e,sortToken:{sortCriteria:[{field:"lastUse",direction:"descend"}],uniqField:"id"},filterToken:{filterCriteria:[{field:"email",value:t,type:"equals"}]}}))(t,e.email))));return(await Promise.all(a)).map(((e,t)=>({...e,linkedWebsite:i[t]}))).filter((e=>e.matchingCount>0)).map((e=>({credentialName:e.items[0].title,linkedWebsite:e.linkedWebsite})))})(i,oe);ge(e),ie!==ve||e.length||Re()})();if(!ee.current?.isFormValid())return;const e=ee.current?.getState();if(!e)return;var t;Pe(!0),n&&e.autoProtected&&e.autoProtected!==n.requireMasterPassword&&(0,W.ih)(e.autoProtected,i.id,i.url,null!=(t=e.spaceId)?t:void 0);const a=ee.current?.getVaultItemCollections(),r={kwType:"KWAuthentifiant",origin:_.SaveOrigin.MANUAL,content:{...e,id:i.id},shouldSkipSync:a?.some((e=>e.isShared&&!ze(e)))},l=await o.C.savePersonalDataItem(r);if(l.success&&a)try{await(async(e,t)=>{const i=[],a=[];for(const n of t)ze(n)||(n.isShared?qe(n)?i.push(n.id):a.push(n.id):(n.vaultItems=[{id:e,type:_.DataModelType.KWAuthentifiant}],n.id?await X({id:n.id,collection:n,operationType:n.hasBeenDeleted?g.C.SUBSTRACT_VAULT_ITEMS:g.C.APPEND_VAULT_ITEMS}):await K({content:n})));i.length&&await $({collectionIds:i,itemId:e,shouldSkipSync:a.length>0}),a.length&&await Q({collectionIds:a,itemId:e})})(l.itemId,a)}catch(e){return F.showAlert(q("_common_generic_error"),w.BLW.ERROR),void s()}F.showAlert(q("_common_toast_changes_saved"),w.BLW.SUCCESS),s()},secondaryActions:ie===ve?[]:[a.createElement(Y,{key:"pwhist",credentialId:i.id,credHasPasswordHistory:r}),a.createElement(D.N,{item:i,getSharing:e=>(0,A.Ei)(e),key:"shareaction"})],onNavigateOut:Ve,onClickDelete:()=>{const{sharingStatus:e}=i;if(e.isShared){if(e.groupSharing)return void Ie({reason:I.J.GroupSharing});if(e.lastAdmin)return void Ie({reason:I.J.LastAdmin})}_e(!0)},withoutDeleteButton:ie===ve,withoutConfirmationDialog:ie===ve,ignoreCloseOnEscape:He,formId:"edit_credential_panel",submitPending:Ae,header:a.createElement(ye,{activeTab:ie,credential:i,displayTabs:i.sharingStatus.isShared,changeTab:Te})},i.sharingStatus.isShared&&ie===Se?a.createElement(L.u,{isAdmin:"admin"===i.sharingStatus.permission,id:i.id}):null,ie===fe?a.createElement("div",{className:"healthEditContainer--lJ8iSk3hnU"},a.createElement(me,{credential:i}),a.createElement("div",{className:m()(z.Z.form,"formWithHealth--rKaIE4Sw6v")},a.createElement(Z.S,{ref:ee,values:(()=>{var e,t;const a=i.sharingStatus.isShared&&"limited"===i.sharingStatus.permission;return{autoLogin:Boolean(n?.useAutoLogin),autoProtected:Boolean(n?.requireMasterPassword),category:null!=(e=i.category?.id)?e:"",email:i.email,id:i.id,forceCategorizedSpace:i.forceCategorizedSpace,limitedPermissions:a,login:i.login,note:i.note,onlyForThisSubdomain:Boolean(n?.onlyAutofillExactDomain),otpSecret:i.otpSecret,otpUrl:i.otpUrl,password:i.password,protectWithMasterPassword:Boolean(n?.requireMasterPassword),secondaryLogin:null!=(t=i.secondaryLogin)?t:"",spaceId:i.spaceId,subdomainOnly:Boolean(n?.onlyAutofillExactDomain),title:i.title,type:i.kwType,url:i.url,linkedWebsites:i.linkedWebsites}})(),signalEditedValues:e=>{le(e)},additionalProps:{activeSpaces:t,dashlaneDefinedLinkedWebsites:c,areProtectedItemsUnlocked:p,openProtectedItemsUnlocker:u,protectedItemsUnlockerShown:d,onClickLinkedWebsitesCount:()=>Ue(!1),onClickAddNewWebsite:()=>Ue(!0),setHasOpenedDialogs:We}}))):null,ie===ve?a.createElement(H,{credential:i,dashlaneDefinedLinkedWebsites:c,onClose:Be,openWithNewUrlField:ce,onUpdateLinkedWebsitesAddedByUser:de,hasLimitedRights:i.sharingStatus.isShared&&"limited"===i.sharingStatus.permission}):null,ue?a.createElement(E.h,{closeConfirmDeleteDialog:()=>_e(!1),onDeleteConfirm:async()=>{const e=ee.current?.getState();e&&await o.C.removePersonalDataItem({id:i.id})},translations:Ze}):null,De?a.createElement(E.Z,{reason:De.reason,translations:Ze,goToSharingAccess:()=>{Ie(null),Te(Se)},closeCantDeleteDialog:()=>Ie(null)}):null,be?a.createElement(M,{onCancel:()=>ke(!1),onLeavePageWithoutSaving:Ge}):null,he.length>0?a.createElement(J,{duplicateData:he,onCancel:()=>ge([]),onSave:Re}):null,we?a.createElement(x.a,{onDismissClick:()=>Ce(!1),onConfirmClick:()=>{ae(ne),le(!1),Ne()}}):null,Ee?a.createElement(O,{onClose:()=>xe(!1),setDisplayLinkedWebsitesDataSavedAlert:xe}):null)},Ee=e=>`{${e.match.params?.uuid||""}}`,xe={activeSpaces:{query:o.C.getActiveSpaces},credential:{live:o.C.liveCredential,liveParam:Ee,query:o.C.getCredential,queryParam:Ee},credHasPasswordHistory:{query:o.C.getHasPasswordHistory,queryParam:Ee}},De={strategies:xe},Ie=(0,d.$)((0,c.i)((e=>{const t=(0,p.tY)(),i=(0,n.k)(l.G,"getDashlaneDefinedLinkedWebsites",{url:e.credential.url}),o=(0,n.k)(r.L,"tempCredentialPreferences",{credentialId:e.credential.id});return o.status===s.rq.Loading?null:a.createElement(Ce,{...e,...t,dashlaneDefinedLinkedWebsites:i.data,credentialPreferences:o.data})}),De),xe)},702394:(e,t,i)=>{i.d(t,{Z:()=>c,h:()=>d});var a=i(696832),n=i(111768),s=i(159515),r=i(151796),l=i(201389),o=i(177704);const d=({closeConfirmDeleteDialog:e,onDeleteConfirm:t,translations:i})=>{const{translate:s}=(0,l.Z)(),{confirmDeleteSubtitle:r,confirmDeleteTitle:d,confirmDeleteDismiss:c,confirmDeleteConfirm:p}=i;return a.createElement(n.Vq,{title:d,onClose:e,isOpen:!0,dialogClassName:o.Ht,closeActionLabel:s("_common_dialog_dismiss_button"),isDestructive:!0,actions:{primary:{children:p,onClick:t,id:"deletion-dialog-confirm-button"},secondary:{children:c,onClick:e,autoFocus:!0,id:"deletion-dialog-dismiss-button"}}},r)},c=({reason:e,translations:t,goToSharingAccess:i,closeCantDeleteDialog:o})=>{const{translate:d}=(0,l.Z)(),c=((e,t)=>{const{groupSharingTitle:i,lastAdminTitle:a,genericErrorTitle:n}=e;switch(t){case s.J.LastAdmin:return a;case s.J.GroupSharing:return i;case s.J.Generic:return n;default:return(0,r.U)(t)}})(t,e),p=((e,t)=>{const{groupSharingSubtitle:i,lastAdminSubtitle:a,genericErrorSubtitle:n}=e;switch(t){case s.J.LastAdmin:return a;case s.J.GroupSharing:return i;case s.J.Generic:return n;default:return(0,r.U)(t)}})(t,e);return a.createElement(n.Vq,{isOpen:!0,onClose:o,title:null!=c?c:"",closeActionLabel:d("_common_dialog_dismiss_button"),actions:e===s.J.LastAdmin?{primary:{children:t.lastAdminActionLabel,onClick:i}}:void 0},p)}},372814:(e,t,i)=>{i.d(t,{N:()=>l});var a=i(696832),n=i(592233),s=i(201389),r=i(508461);const l=({item:e,getSharing:t})=>{const{translate:i}=(0,s.Z)();if(!(e=>e&&(!e.sharingStatus.isShared||"admin"===e.sharingStatus.permission)&&!e.attachments.length)(e))return null;const l=t(e.id);return a.createElement(r.Z,{tooltipPlacement:"top-start",sharing:l,text:i("webapp_sharing_invite_share"),origin:n.Origin.ItemDetailView})}},159515:(e,t,i)=>{let a;i.d(t,{J:()=>a}),function(e){e[e.LastAdmin=0]="LastAdmin",e[e.GroupSharing=1]="GroupSharing",e[e.Generic=2]="Generic"}(a||(a={}))},922487:(e,t,i)=>{i.d(t,{r:()=>g});var a=i(133354),n=i(242542),s=i(463164),r=i(148038),l=i(66941),o=i(604400),d=i(526849);const c=(e,t,i=!1)=>({recipientId:e.groupId,recipientName:e.name,isGroup:!0,permission:e.permission,status:e.status,isAdmin:t,isInSharedCollection:i}),p=(e,t,i=!1)=>({recipientId:e.userId,recipientName:e.alias,isGroup:!1,permission:e.permission,status:e.status,isAdmin:t,isInSharedCollection:i}),u=(e,t)=>{if(!e)return null;const i=t?e.userGroups:e.users;return i?.length?i.map((e=>{return a=t,{recipientId:(i=e).id,recipientName:i.label,isGroup:a,permission:o.y3.Admin,status:i.status,isAdmin:!0,isInSharedCollection:!0};var i,a})):null},m=(e,t)=>e?t?e.permission===o.y3.Admin?e:t:e:t,_=(0,d.sortBy)((0,d.compose)(d.toLower,(0,d.prop)("recipientName"))),h=(e,t)=>{if(!t)return _(e);const i=[...new Set(t.concat(e).map((e=>e.recipientId)))].map((i=>{const a=t.filter((e=>e.recipientId===i)).reduce(m,void 0),n=e?.find((e=>e.recipientId===i));return{...m(n,a),isInSharedCollection:!!a}})).filter((e=>!!e));return _(i)};function g(e,t){const{collectionIds:i,itemGroupId:o,isReady:d}=(0,n.b)(e),m=function(e){return(0,r.qr)({queryConfig:{query:l.C.getGroupRecipients,queryParam:e},liveConfig:{live:l.C.liveGroupRecipients,liveParam:e}},[])}(e),_=function(e){return(0,r.qr)({queryConfig:{query:l.C.getUserRecipients,queryParam:e},liveConfig:{live:l.C.liveUserRecipients,liveParam:e}},[])}(e),g=(0,s.F)(i);if(_.status!==a.rq.Success||m.status!==a.rq.Success||g.status!==a.rq.Success||!d)return{isReady:!1,users:[],groups:[]};const b=g.data,k=_.data.map((e=>p(e,t))),w=m.data.map((e=>c(e,t)));return{users:h(k,u(b,!1)),groups:h(w,u(b,!0)),itemGroupId:o,isReady:!0}}},642844:(e,t,i)=>{i.d(t,{u:()=>v});var a,n,s=i(696832),r=i(111768),l=i(441217),o=i(453576),d=i(66941),c=i(427658),p=i(993026),u=i(351433),m=i(683773),_=i(360592),h=i(220315),g=i(716514),b=i(201389);const k=({cancelStatus:e,itemGroupId:t,setCancelStatus:i,recipientId:o})=>{const{translate:c}=(0,b.Z)(),u=e===p.V.Loading,m={type:"user",alias:o};(0,s.useEffect)((()=>{let t;return e===p.V.Failure&&(t=window.setTimeout((()=>i(null)),2e3)),()=>{clearTimeout(t)}}),[e,i]);const _=e?()=>i(null):()=>i(p.V.Confirm);return e===p.V.Failure?(0,r.tZ)("div",{sx:{color:"ds.text.danger.standard",display:"flex",alignItems:"center"}},a||(a=(0,r.tZ)(l.aNP,{color:"ds.text.danger.standard"}))," ",c("webapp_shared_access_cancel_failure")):(0,r.tZ)("div",null,(0,r.tZ)(r.zx,{intensity:e?"quiet":"supershy",disabled:u,onClick:_},c(e?"webapp_shared_access_cancel":"webapp_shared_access_cancel_invitation")),e?(0,r.tZ)(r.zx,{mood:"danger",intensity:"catchy",sx:{ml:"16px"},disabled:u,onClick:()=>(async()=>{i(p.V.Loading);const e=await(async()=>{try{const{success:e}=await d.C.revokeSharing({itemGroupId:t,recipient:m});return e}catch(e){return!1}})();i(e?p.V.Success:p.V.Failure)})()},u?n||(n=(0,r.tZ)(l.HoD,null)):c("webapp_shared_access_confirm")):null)};var w;const y=e=>{const{status:t,permission:i}=e;return"pending"===t?"webapp_shared_access_pending_invitation":"accepted"===t?"admin"===i?"webapp_sharing_permissions_full_rights":"webapp_sharing_permissions_limited_rights":""},S=({itemGroupId:e,openEditPermissionsDialog:t,member:i})=>{const[a,n]=(0,s.useState)(null),l=(0,g.j)()?.login,{translate:o}=(0,b.Z)();if(a===p.V.Success)return null;const{permission:d,status:c}=i,S=i.isAdmin&&l!==i.recipientId,f="pending"===c?(0,r.tZ)(k,{recipientId:i.recipientId,itemGroupId:e,cancelStatus:a,setCancelStatus:n}):(0,r.tZ)(_.M,{disabled:i.isInSharedCollection,intensity:"supershy",onClick:()=>t((e=>e.isGroup?{type:"userGroup",groupId:e.recipientId,name:e.recipientName}:{type:"user",alias:e.recipientId})(i),d),content:o("webapp_sharing_collection_access_description_tooltip"),tooltipSx:{textWrap:"wrap",maxWidth:"240px"}},o("webapp_shared_access_edit_permissions"));return(0,r.tZ)("li",{key:i.recipientId,sx:{alignItems:"center",borderStyle:"solid",borderBottomWidth:"1px",borderColor:"ds.border.neutral.standard.idle",display:"flex",minHeight:"64px",position:"relative"}},(0,r.tZ)(m.r,{infoAction:S?f:null,logo:i.isGroup?w||(w=(0,r.tZ)(h.Z,null)):(0,r.tZ)(u.q,{email:i.recipientName,size:36}),text:o(y(i)),title:i.recipientName,disabled:a===p.V.Loading}))};var f=i(922487);const v=({id:e,isAdmin:t})=>{const[i,a]=(0,s.useState)(!1),[n,u]=(0,s.useState)(null),{isReady:m,itemGroupId:_,users:h,groups:g}=(0,f.r)(e,t);if(!m)return(0,r.tZ)(l.HoD,{color:"ds.container.expressive.brand.catchy.idle",size:50,sx:{alignSelf:"center",m:"20px"}});const b=e=>{n&&u({...n,step:e})},k=async()=>{if(!n)return;const{recipient:e,permission:t}=n;a(!0);const i="revoke"===t?await(async e=>{try{const{success:t}=await d.C.revokeSharing({itemGroupId:null!=_?_:"",recipient:e});return t}catch(e){return!1}})(e):await(async(e,t)=>{try{const{success:i}=await d.C.updateSharingPermission({itemGroupId:null!=_?_:"",recipient:e,permission:t});return i}catch(e){return!1}})(e,t);if(i){const e="revoke"===t?p.PermissionDialogStep.RevokeSuccess:p.PermissionDialogStep.Success;b(e)}else b(p.PermissionDialogStep.Failure);a(!1)},w=(e,t)=>{const i={recipient:e,permission:t,originPermission:t,step:p.PermissionDialogStep.Permission,name:(0,o.isGroupRecipient)(e)?e.name:e.alias};u(i)};return(0,r.tZ)("div",{sx:{flex:"1",overflowY:"auto",p:"24px"}},(0,r.tZ)("ul",{sx:{flex:"1"}},g.map((e=>(0,r.tZ)(S,{key:e.recipientId,member:e,itemGroupId:null!=_?_:"",openEditPermissionsDialog:w}))),h.map((e=>(0,r.tZ)(S,{key:e.recipientId,member:e,itemGroupId:null!=_?_:"",openEditPermissionsDialog:w})))),n&&(0,r.tZ)(c.E,{isOpen:!0,loading:i,onCancelRevoke:()=>{n&&u({...n,step:p.PermissionDialogStep.Permission})},onConfirmRevoke:k,onDismiss:()=>u(null),onSelectPermission:e=>{n&&u({...n,permission:e})},onValidatePermission:()=>{"revoke"===n?.permission?u({...n,step:p.PermissionDialogStep.ConfirmRevoke}):k()},originPermission:n.originPermission,permission:n.permission,recipient:n.recipient,step:n.step}))}},880706:(e,t,i)=>{i.d(t,{d:()=>s});var a=i(528144),n=i(635164);const s=({routes:e,location:t})=>{t?.state?.entity?(0,a.yy)(t?.state?.entity)?(0,n.uX)(e.userSharingGroupInfo(t?.state?.entity?.groupId)):(0,n.uX)(e.userSharingUserInfo(t?.state?.entity?.alias)):(0,n.uX)(e.userSharingCenter)}}}]);