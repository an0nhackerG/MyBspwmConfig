"use strict";(globalThis.webpackChunk_dashlane_leeloo=globalThis.webpackChunk_dashlane_leeloo||[]).push([[2716],{941768:(e,t,n)=>{n.r(t),n.d(t,{Connected:()=>y});var a,r=n(696832),o=n(799852),c=n(448430),i=n(382706),s=n(238250),l=n(441217),u=n(592233),m=n(787268),d=n(201389),_=n(62429),p=n(66941),b=n(635164),k=n(60043),g=n(796446),h=n(702394),C=n(887982),f=n(103181),S=n(995544),E=n(192783),A=n(461201);const w=({item:e,lee:t})=>{const{translate:n}=(0,d.Z)(),{routes:o}=(0,k.Xo)(),{current:c}=r.useRef([]),[i,w]=r.useState(!1),[y,D]=r.useState(!1),[L,N]=r.useState(new Set),[B,I]=r.useState(e),[U,T]=r.useState(!1),{areProtectedItemsUnlocked:v,openProtectedItemsUnlocker:V,protectedItemsUnlockerShown:G}=(0,E.t)(),J=(0,S.B)(),P=(0,m.V)();r.useEffect((()=>((0,_.Nc)(u.PageView.ItemBankStatementDetails),()=>{c.forEach((e=>e()))})),[]);const Z=()=>{(0,_.Nc)(u.PageView.ItemPaymentList),(0,b.uX)(o.userPayments)},W=r.useRef({}),M=r.useCallback((t=>{Object.entries(t).forEach((([t,n])=>{e[t]!==n?W.current[t]=n:delete W.current[t]})),w(Object.keys(W.current).length>0),I(t)}),[e]),O={confirmDeleteConfirm:n("webapp_payment_edition_bank_account_delete_confirm"),confirmDeleteDismiss:n("webapp_payment_edition_bank_account_delete_dismiss"),confirmDeleteSubtitle:n("webapp_payment_edition_bank_account_delete_subtitle"),confirmDeleteTitle:n("webapp_payment_edition_bank_account_delete_title")},R=G||U;return r.createElement(g.zI,{onNavigateOut:()=>{Z()},ignoreCloseOnEscape:R,formId:"bank-account-edit-form",onSubmit:async()=>{if(!y){D(!0);try{const{accountName:a,ownerName:r,bankCode:o}=W.current,c=await p.C.updateBankAccount({...W.current,name:a,owner:r,bank:o,id:e.id});if(c.success){const e=""===B.accountName?n("webapp_payment_edition_bank_account_generic_update_alert"):n("webapp_payment_edition_bank_account_name_update_alert",{accountName:B.accountName});P.showAlert(e,l.BLW.SUCCESS),Z()}else D(!1),c.error?.code===s.UpdateBankAccountResultErrorCode.EMPTY_BIC_AND_IBAN?N(new Set(["BIC","IBAN"])):t.reportError(new Error("[payments][edit-bank-account] Unable to update bank account"),c.error?.code)}catch(e){D(!1),t.reportError(e,"[payments][edit-bank-account] Unexpected exception while updating bank account")}}},header:r.createElement(g.V9,{icon:a||(a=r.createElement(C.L,null)),iconBackgroundColor:l.colors.dashGreen06,title:e.accountName}),onClickDelete:()=>{T(!0)},itemHasBeenEdited:i,isViewingExistingItem:!0},r.createElement(f.o,{itemId:e.id,bankAccount:B,errors:L,onCopy:e=>{J.setAlertMessage(e),J.show()},reportError:t.reportError,signalEditedValues:M,areProtectedItemsUnlocked:v,openProtectedItemsUnlocker:V,variant:"edit"}),J.isAlertVisible&&r.createElement("div",{className:A.Z.alertWrapper},r.createElement(l.bZj,{size:l.k3y.SMALL,severity:l.BLW.SUCCESS,closeIconName:n("_common_alert_dismiss_button"),onClose:()=>{J.hide()}},J.alertMessage)),U&&r.createElement(h.h,{closeConfirmDeleteDialog:()=>{T(!1)},onDeleteConfirm:()=>{c.push((()=>p.C.deleteBankAccount({id:e.id})));const t=""===B.accountName?n("webapp_payment_edition_bank_account_generic_delete_alert"):n("webapp_payment_edition_bank_account_name_delete_alert",{accountName:B.accountName});P.showAlert(r.createElement("strong",null,t),l.BLW.SUBTLE),Z()},translations:O}))},y=e=>{const{data:t}=(0,o.k)(c.L,"query",{vaultItemTypes:[i.U.BankAccount],ids:[`{${e.match.params.uuid}}`]});return t?.bankAccountsResult.items.length?r.createElement(w,{...e,item:t.bankAccountsResult.items[0]}):null}},995544:(e,t,n)=>{n.d(t,{B:()=>r});var a=n(696832);const r=()=>{const[e,t]=a.useState(""),[n,r]=a.useState(!1),o=()=>{r(!1)};return a.useEffect((()=>{if(!n)return;const e=setTimeout(o,5e3);return()=>clearTimeout(e)}),[n,e]),{isAlertVisible:n,alertMessage:e,setAlertMessage:t,hide:o,show:()=>{r(!0)}}}},702394:(e,t,n)=>{n.d(t,{Z:()=>u,h:()=>l});var a=n(696832),r=n(111768),o=n(159515),c=n(151796),i=n(201389),s=n(177704);const l=({closeConfirmDeleteDialog:e,onDeleteConfirm:t,translations:n})=>{const{translate:o}=(0,i.Z)(),{confirmDeleteSubtitle:c,confirmDeleteTitle:l,confirmDeleteDismiss:u,confirmDeleteConfirm:m}=n;return a.createElement(r.Vq,{title:l,onClose:e,isOpen:!0,dialogClassName:s.Ht,closeActionLabel:o("_common_dialog_dismiss_button"),isDestructive:!0,actions:{primary:{children:m,onClick:t,id:"deletion-dialog-confirm-button"},secondary:{children:u,onClick:e,autoFocus:!0,id:"deletion-dialog-dismiss-button"}}},c)},u=({reason:e,translations:t,goToSharingAccess:n,closeCantDeleteDialog:s})=>{const{translate:l}=(0,i.Z)(),u=((e,t)=>{const{groupSharingTitle:n,lastAdminTitle:a,genericErrorTitle:r}=e;switch(t){case o.J.LastAdmin:return a;case o.J.GroupSharing:return n;case o.J.Generic:return r;default:return(0,c.U)(t)}})(t,e),m=((e,t)=>{const{groupSharingSubtitle:n,lastAdminSubtitle:a,genericErrorSubtitle:r}=e;switch(t){case o.J.LastAdmin:return a;case o.J.GroupSharing:return n;case o.J.Generic:return r;default:return(0,c.U)(t)}})(t,e);return a.createElement(r.Vq,{isOpen:!0,onClose:s,title:null!=u?u:"",closeActionLabel:l("_common_dialog_dismiss_button"),actions:e===o.J.LastAdmin?{primary:{children:t.lastAdminActionLabel,onClick:n}}:void 0},m)}},159515:(e,t,n)=>{let a;n.d(t,{J:()=>a}),function(e){e[e.LastAdmin=0]="LastAdmin",e[e.GroupSharing=1]="GroupSharing",e[e.Generic=2]="Generic"}(a||(a={}))},461201:(e,t,n)=>{n.d(t,{Z:()=>a});const a={alertWrapper:"alertWrapper--JLZLLWrHCo"}}}]);