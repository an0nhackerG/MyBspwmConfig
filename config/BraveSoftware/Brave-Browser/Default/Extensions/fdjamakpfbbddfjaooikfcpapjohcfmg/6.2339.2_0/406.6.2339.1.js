(globalThis.webpackChunk_dashlane_leeloo=globalThis.webpackChunk_dashlane_leeloo||[]).push([[406],{59896:(e,t,n)=>{"use strict";n.d(t,{Z:()=>p});var i=n(696832),a=n(111768),s=n(526849),o=n(383849),r=n.n(o),l=n(769183);var c=n(255990);function d(e,t){const n=e.find((e=>String(e.value)===String(t)));return null!=n?n:null}class p extends i.Component{constructor(e){super(e),this.select=i.createRef(),this.handleChange=e=>{const t=e.target;if(!t)return;const n=t.value,i=d(this.props.options,n);this.setState({optionSelected:i}),this.props.onChange&&this.props.onChange(e)},this.handleKeyDown=e=>{"Enter"===e.key&&e.preventDefault(),this.props.onFieldKeyDown?.(e)},this.handleFocus=()=>{this.setState({isSelectFocused:!0})},this.handleBlur=()=>{this.setState({isSelectFocused:!1})};let t=null;this.props.options.length&&(t=d(this.props.options,null===this.props.defaultOption?(0,s.head)(this.props.options).value:this.props.defaultOption.value)),this.state={fieldHtmlId:(0,l.Z)(),optionSelected:t,isSelectFocused:!1}}getValue(){if(!this.select.current)throw new Error("select ref not initialized");return this.select.current.value}render(){var e;const t=this.props.marginSide||"none",n=r()("selectContainer--mo5uz0qo56",c.Z[t],{"transparent--pz8wb74Jmh":this.props.isTransparent,"disabled--I9BAM7Vdre":this.props.disabled,"focused--ietgHqFLIm":this.state.isSelectFocused}),i=r()("selector--fgNHKzkAC3",this.props.classNames);let o;this.state.optionSelected?o=this.state.optionSelected.value:this.props.options.length&&(o=null===this.props.defaultOption?(0,s.head)(this.props.options).value:this.props.defaultOption.value);const l=this.state.optionSelected?this.state.optionSelected.selectedLabel?this.state.optionSelected.selectedLabel:this.state.optionSelected.label:this.props.placeholder;return(0,a.tZ)("div",{className:"container--KChkEdb4YV"},this.props.label&&(0,a.tZ)("label",{className:c.Z.label,color:"ds.text.neutral.catchy",htmlFor:this.state.fieldHtmlId,title:this.props.label},this.props.label),(0,a.tZ)("div",{className:n},(0,a.tZ)("div",{className:i},this.state.optionSelected&&this.state.optionSelected.icon&&(0,a.tZ)("span",{className:"icon--p3a7nsSbg9"},this.state.optionSelected.icon),(0,a.tZ)("span",{className:"text--SjkXyB7Kyp",sx:{color:"ds.text.neutral.catchy"}},l)),(0,a.tZ)("select",{key:this.state.fieldHtmlId,className:c.Z.select,ref:this.select,id:this.state.fieldHtmlId,value:o,name:this.props.name,disabled:this.props.disabled,"data-name":this.props.dataName,onKeyDown:this.handleKeyDown,onChange:this.handleChange,onFocus:this.handleFocus,onBlur:this.handleBlur,"aria-label":null!=(e=this.props.ariaLabel)?e:this.props.label},this.props.options.map((e=>(0,a.tZ)("option",{key:e.value,disabled:e.disabled,value:String(e.value)},e.label))))))}}},507525:(e,t,n)=>{"use strict";n.d(t,{d:()=>E});var i=n(696832),a=n(111768),s=n(441217),o=n(592233),r=n(201389),l=(n(416702),n(842403),n(798849),n(238250)),c=n(66941),d=n(62429),p=n(787268),u=n(979442),_=n(233248),m=n(924969);const f=15*Math.pow(1024,2),h={PROGRESS_CIPHERING:"webapp_secure_file_upload_progress_ciphering_markup"};function b(e){const[t,n]=(0,i.useState)(!1),a=(0,p.V)(),{translateWithMarkup:r}=(0,u.Y)();return{isUploading:t,upload:(t,i)=>{if(t)if(t.size>f)i?.({success:!1,error:{code:l.SecureFileResultErrorCode.MAX_CONTENT_LENGTH_EXCEEDED}});else{const p=(0,_.K)(t.name);a.showAlert((0,m.b)(r({key:h.PROGRESS_CIPHERING,params:{fileName:p}})),s.BLW.SUBTLE,!1),n(!0);const u=new FileReader,b=e=>{i?.(e),n(!1)};u.onloadend=async()=>async function(e,t,n,i){if(2===e.readyState){const a=e.result,s=new Uint8Array(a),r=JSON.stringify(Array.from(s));if(t.size>f)i?.({success:!1,error:{code:l.SecureFileResultErrorCode.MAX_CONTENT_LENGTH_EXCEEDED}});else{const e=await c.C.addSecureFile({fileName:t.name,fileType:t.type,serializedContent:r});e.success&&(0,d.Kz)(new o.UserUpdateVaultItemAttachmentEvent({attachmentAction:o.Action.Add,itemId:e.secureFileInfo.Id,itemType:n})),i?.(e)}}return null}(u,t,e,b),u.readAsArrayBuffer(t)}}}}var g=n(919663),S=n(553966);const E=({onFileUploadStarted:e,onFileUploadDone:t,isQuotaReached:n,isShared:l,itemId:p,dataType:u,disabled:_=!1})=>{var m;const f=(0,g.ml)("KWIDCard"===u)&&!l,h=null!=(m=S.dataModelTypeToItemType[u])?m:function(e){throw new Error(e)}(`Unsupported Type ${u}`),{translate:E}=(0,r.Z)(),{upload:y,isUploading:w}=b(h),[C,v]=(0,i.useState)(""),{showErrorAlert:x}=(0,g.Pw)(C),I=(0,g.yK)(),N=e=>{t?.(e),e.success||x(e.error?.code)},R=async t=>{const n=await(async e=>await c.C.validateSecureFile({fileName:e.name,fileType:e.type,contentLength:e.size}))(t);n.success?(e(),v(t.name),y(t,N)):x(n?.error?.code)};return f?(0,a.tZ)(s.Ejs,null,(0,a.tZ)("input",{type:"file",id:"secureFileInput",sx:{display:"none"},onChange:e=>{e?.target?.files?.length&&R(e.target.files[0]),e.target.value=""},accept:I?.join(",")}),(0,a.tZ)(a.zx,{key:"attach",mood:"neutral",intensity:"quiet",icon:"AttachmentOutlined",layout:"iconLeading",onClick:e=>{p&&(0,d.Kz)(new o.UserUpdateVaultItemAttachmentEvent({attachmentAction:o.Action.Add,itemId:p,itemType:h})),document.getElementById("secureFileInput")?.click(),e.preventDefault()},disabled:n||w||_},E("webapp_secure_notes_add_attachment_action_name"))):null}},924969:(e,t,n)=>{"use strict";n.d(t,{b:()=>s});var i=n(5727),a=n(441217);const s=e=>(0,i.tZ)(a.Ejs,{justifyContent:"center"},(0,i.tZ)(a.HoD,{sx:{mr:"8px"},color:a.colors.dashGreen00,size:18}),e)},97242:(e,t,n)=>{"use strict";n.d(t,{w:()=>i});const i=e=>({id:e.Id,type:e.Type,version:1,filename:e.Filename,downloadKey:e.DownloadKey,cryptoKey:e.CryptoKey,localSize:e.LocalSize,remoteSize:e.RemoteSize,creationDatetime:e.CreationDatetime,userModificationDatetime:e.UserModificationDatetime,owner:e.Owner})},233248:(e,t,n)=>{"use strict";n.d(t,{K:()=>i});const i=e=>e.length<=32?e:e.substring(0,32)},919663:(e,t,n)=>{"use strict";n.d(t,{ml:()=>g,aV:()=>h,yK:()=>N,vN:()=>r,gF:()=>_,Ce:()=>c,Pw:()=>I});var i=n(238250),a=n(66941),s=n(62429),o=n(592233);function r(e,t,n,r){return{deleteFile:()=>{a.C.deleteSecureFile({id:e}).then((a=>{var l;a.success||!a.success&&a.error?.code===i.SecureFileResultErrorCode.FILE_NOT_FOUND?(r?.(e),(0,s.Kz)(new o.UserUpdateVaultItemAttachmentEvent({attachmentAction:o.Action.Delete,itemId:e,itemType:n}))):t(null!=(l=a.error?.code)?l:i.SecureFileResultErrorCode.INTERNAL_ERROR)}))}}}var l=n(148038);function c(e){const t=(0,l.qr)({queryConfig:{query:a.C.getFileDownloadProgress,queryParam:e},liveConfig:{live:a.C.liveFileDownloadProgress,liveParam:e}},[e]);return t.status===l.rq.Success?t.data:null}n(416702),n(842403),n(798849);var d=n(696832);const p=(e,t)=>{try{const t=JSON.parse(e);return new Uint8Array(t).buffer}catch(e){return t(i.SecureFileResultErrorCode.INTERNAL_ERROR),null}},u=(e,t,n)=>{if(e){const i=new Blob([e],{type:n}),a=document.createElement("a");a.href=window.URL.createObjectURL(i),a.download=t,a.click()}};function _({id:e,filename:t,downloadKey:n,cryptoKey:r,type:l},_,m){const f=c(n),h=(0,d.useRef)("");return(0,d.useEffect)((()=>{f?.status===i.FileDownloadStatus.ChunkReady&&(h.current=h.current.concat(f.chunk),a.C.chunkTransferDone(n))}),[f,n]),(0,d.useEffect)((()=>{f?.status===i.FileDownloadStatus.TransferComplete&&(u(p(h.current,_),t,l),h.current="",a.C.clearSecureFilesState(n),(0,s.Kz)(new o.UserDownloadVaultItemAttachmentEvent({itemId:e,itemType:m})))}),[f,_,t,l,n,e,m]),{download:()=>{a.C.downloadSecureFile({downloadKey:n,cryptoKey:r})}}}n(509144);var m=n(65255),f=n(915970);function h(){return(0,f.w)(m.w.SaexSecureNoteAttachmentsForrelease)}var b=n(377160);function g(e){const t=(0,f.w)(m.w.TechweekWebAttachmentsForIdsV1),n=h(),i=(0,b.rp)(["secureFiles"]),a=n&&i;return e?a&&t:a}var S=n(441217),E=n(787268),y=n(979442),w=n(924969),C=n(233248);const v={PROGRESS_UPLOADING:"webapp_secure_file_upload_progress_loading_markup",PROGRESS_CIPHERING:"webapp_secure_file_upload_progress_ciphering_markup",UPLOAD_SUCCESS:"webapp_secure_file_upload_success_markup",UNKNOWN_ERROR:"webapp_secure_file_error_unknown",MAX_CONTENT_LENGTH_EXCEEDED:"webapp_secure_file_error_upload_max_length_excedeed",QUOTA_EXCEDEED:"webapp_secure_file_error_upload_quota_excedeed",INVALID_FILE_TYPE:"webapp_secure_file_error_file_type_not_allowed"},x=e=>{var t;return e&&null!=(t=v[e])?t:v.UNKNOWN_ERROR},I=e=>{const t=(0,E.V)(),{translateWithMarkup:n}=(0,y.Y)(),s=function(){const e=(0,l.qr)({queryConfig:{query:a.C.getFileUploadProgress},liveConfig:{live:a.C.liveFileUploadProgress}},[]);return e.status===l.rq.Success?e.data:null}(),o=(0,C.K)(e);return(0,d.useEffect)((()=>{var e,a;const r=e=>t.showAlert((0,w.b)(n(e)),S.BLW.SUBTLE,!1);switch(s?.status){case i.FileUploadStatus.Uploading:r({key:v.PROGRESS_UPLOADING,params:{fileName:o,progress:Math.round(null!=(e=(null!=(a=100*s?.bytesSent)?a:0)/s?.contentLength)?e:1)}});break;case i.FileUploadStatus.Ciphering:r({key:v.PROGRESS_CIPHERING,params:{fileName:o}});break;case i.FileUploadStatus.Done:t.showAlert(n({key:v.UPLOAD_SUCCESS,params:{fileName:o}}),S.BLW.SUCCESS)}}),[t,e,s,n]),{showErrorAlert:e=>{t.showAlert(n({key:x(null!=e?e:"")}),S.BLW.ERROR)}}};function N(){const e=(0,l.qr)({queryConfig:{query:a.C.getSecureDocumentsExtensionsList}},[]);return e.status===l.rq.Success?e.data:void 0}},509144:(e,t,n)=>{"use strict";n.d(t,{I:()=>s});var i=n(66941),a=n(148038);function s(){const e=(0,a.qr)({queryConfig:{query:i.C.getSecureFilesQuota},liveConfig:{live:i.C.liveSecureFilesQuota}},[]);return e.status===a.rq.Success?e.data:{max:0,remaining:0}}},396119:(e,t,n)=>{"use strict";n.d(t,{z:()=>a});var i=n(66941);const a=async e=>await i.C.clearSecureFilesState(e)},234931:(e,t,n)=>{"use strict";let i;n.d(t,{SecureNoteTabs:()=>i}),function(e){e[e.CONTENT=0]="CONTENT",e[e.DOCUMENT_STORAGE=1]="DOCUMENT_STORAGE",e[e.MORE_OPTIONS=2]="MORE_OPTIONS",e[e.SHARED_ACCESS=3]="SHARED_ACCESS"}(i||(i={}))},925394:(e,t,n)=>{"use strict";n.d(t,{h:()=>Z});var i=n(111768),a=n(441217),s=n(696832),o=n(383849),r=n.n(o),l=n(151796);var c,d,p=n(15567),u=n.n(p),_=n(102730),m=n.n(_);const f=312,h="info";class b extends s.Component{constructor(e){super(e),this.showTooltip=()=>{this.setState({isTooltipVisible:!0})},this.hideTooltip=()=>{this.setState({isTooltipVisible:!1})},this.renderIcon=()=>{const{type:e=h}=this.props;switch(e){case"info":return c||(c=s.createElement(m(),null));case"question":return d||(d=s.createElement(u(),null));default:(0,l.U)(e)}return null},this.state={isTooltipVisible:!1}}render(){const{iconClassNames:e=[],maxWidth:t=f,children:n}=this.props,i=this.renderIcon();return s.createElement("div",{className:"container--nIJjYvifKn",onMouseEnter:this.showTooltip,onMouseLeave:this.hideTooltip},s.createElement("div",{className:r()("iconContainer--Qd32ya5v0T",...e)},i),s.createElement("div",{className:r()("tooltipContainer--Yos9HnS8si",{"tooltipDisplayed--ibyWhutbpT":this.state.isTooltipVisible}),style:{maxWidth:`${t}px`}},n,s.createElement("div",{className:"triangle--n9NwQgxSAc"})))}}var g=n(234931),S=n(53915),E=n(201389),y=n(919663),w=n(796446),C=n(654);const v=({title:e,disabled:t=!1,onChange:n})=>{const{translate:a}=(0,E.Z)(),s=a("webapp_secure_notes_addition_field_placeholder_no_title");return(0,i.tZ)(C.Z,{sx:{display:"block",width:"100%"},tooltipText:e||s},(0,i.tZ)("input",{sx:{color:"ds.text.neutral.catchy",backgroundColor:"transparent",border:"none",fontSize:"24px",lineHeight:"30px",fontWeight:"600",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap",width:"100%",fontFamily:"'GT Walsheim Pro', 'Helvetica', 'Arial', 'sans-serif'","&:focus":{outline:"none",border:"none"}},placeholder:s,value:e||"",disabled:t,onChange:n}))};var x;const{CONTENT:I,DOCUMENT_STORAGE:N,MORE_OPTIONS:R,SHARED_ACCESS:T}=g.SecureNoteTabs,Z=({activeTab:e,setActiveTab:t,backgroundColor:n,disabled:s,displayDocumentStorage:o,displaySharedAccess:r,recipientsCount:l,title:c,setTitle:d})=>{const{translate:p}=(0,E.Z)(),u=(0,y.aV)(),_=[{active:e===I,label:p("webapp_secure_notes_edition_field_tab_title_details"),onClick:()=>t(I)}];if(r&&_.push({active:e===T,label:`${p("webapp_secure_notes_edition_field_tab_title_shared_access")} (${l})`,onClick:()=>t(T)}),o){const n=u?void 0:(0,i.tZ)(b,null,(0,i.tZ)("p",null,p("webapp_secure_notes_edition_field_tab_title_attachments_tooltips")));_.push({active:e===N,label:p("webapp_secure_notes_edition_field_tab_title_attachments"),onClick:()=>t(N),tabIconElement:n})}return _.push({active:e===R,label:p("webapp_secure_notes_edition_field_tab_title_options"),onClick:()=>t(R)}),(0,i.tZ)(w.V9,{icon:(0,i.tZ)("div",{className:"iconWrapper--d4t5P9vl4W"},x||(x=(0,i.tZ)(a.uHY,{size:40,color:"white"}))),iconBackgroundColor:(0,S.Z)(n),title:(0,i.tZ)(v,{title:c,disabled:s,onChange:e=>d(e.target.value)}),tabs:_})}},885131:(e,t,n)=>{"use strict";n.d(t,{i:()=>Ie,T:()=>Ne});var i=n(696832),a=n(5727),s=n(441217),o=n(65255),r=n(915970),l=n(201389),c=n(210994),d=n(238250),p=n(787268),u=n(979442),_=n(919663),m=n(924969);var f=n(592233),h=n(62429),b=n(233248),g=n(177704);const S="webapp_secure_file_error_unknown",E="webapp_secure_file_delete_button_title",y="webapp_secure_file_download_button_title",w={cursor:"pointer",margin:"0px 10px",padding:"5px",border:"1px solid transparent","&:hover":{border:`1px solid ${s.colors.grey05}`},borderRadius:"4px"},C={opacity:.6},v=({attachment:e,disableActions:t,handleFileInfoDetached:n,onModalDisplayStateChange:o,parentId:r,parentType:c})=>{const{translate:d}=(0,l.Z)(),{translateWithMarkup:m}=(0,u.Y)(),y=(0,p.V)(),[v,x]=(0,i.useState)(!1),I=(0,i.useCallback)((()=>y.showAlert(m(S),s.BLW.ERROR)),[y,m]),{deleteFile:N}=(0,_.vN)(e.id,I,c,n),R=()=>{x(!1),o?.(!1)};return(0,a.tZ)(i.Fragment,null,(0,a.tZ)(s.ua7,{placement:"left",trigger:"hover",content:m(t?"webapp_secure_file_delete_button_tooltip_content_disable":"webapp_secure_file_delete_button_tooltip_content_enable")},(0,a.tZ)("div",{sx:t?(0,s.jMf)([w,C]):w,onClick:()=>{x(!0),o?.(!0)}},(0,a.tZ)(s.XHJ,{color:s.colors.dashGreen00,"aria-hidden":"true",title:d(E),"aria-label":d(E)}))),(0,a.tZ)(s.VqE,{isOpen:v&&!t,onClose:R,closeIconName:"CloseIcon",modalContentClassName:g.jK},(0,a.tZ)(s.a7O,null,(0,a.tZ)(s.X6q,{size:"small",sx:{margin:"16px 0px",fontWeight:"bolder"}},m("webapp_secure_file_delete_confirm_dialog_heading")),(0,a.tZ)(s.nvN,{sx:{margin:"8px 0px"},color:s.colors.grey00},m("webapp_secure_file_delete_confirm_dialog_paragraph"))),(0,a.tZ)(s.cNS,{primaryButtonTitle:m("webapp_secure_file_delete_confirm_dialog_action_primary_button_title"),primaryButtonOnClick:()=>{r&&(0,h.Kz)(new f.UserUpdateVaultItemAttachmentEvent({attachmentAction:f.Action.Delete,itemId:r,itemType:c})),N(),y.showAlert(d("webapp_secure_file_delete_success",{fileName:(0,b.K)(e.filename)}),s.BLW.SUCCESS),x(!1)},secondaryButtonTitle:m("webapp_secure_file_delete_confirm_dialog_action_secondary_button_title"),secondaryButtonOnClick:R,intent:"danger"})))},x=({attachment:e,disableActions:t,setDisableActions:n,progress:o,parentId:r,parentType:c})=>{const{translate:m}=(0,l.Z)(),{translateWithMarkup:b}=(0,u.Y)(),g=(0,p.V)(),E=(0,i.useCallback)((()=>g.showAlert(b(S),s.BLW.ERROR)),[g,b]),{download:v}=(0,_.gF)(e,E,c);return(0,i.useEffect)((()=>{switch(o?.status){case d.FileDownloadStatus.Downloading:n(!0);break;case d.FileDownloadStatus.TransferComplete:case d.FileDownloadStatus.Error:n(!1)}}),[o,n,b]),(0,a.tZ)(s.ua7,{placement:"left",trigger:"hover",content:b(t?"webapp_secure_file_download_button_tooltip_content_disable":"webapp_secure_file_download_button_tooltip_content_enable")},(0,a.tZ)("div",{sx:t?(0,s.jMf)([w,C]):w,onClick:t?void 0:()=>{r&&(0,h.Kz)(new f.UserDownloadVaultItemAttachmentEvent({itemId:r,itemType:c})),v()}},(0,a.tZ)(s._8t,{sx:t?C:void 0,color:s.colors.dashGreen00,"aria-hidden":"true","aria-label":m(y),title:m(y)})))},I=e=>{const t=(0,_.Ce)(e.attachment.downloadKey);return i.createElement(s.Ejs,{alignItems:"center",justifyContent:"flex-end"},i.createElement(x,{progress:t,...e}),i.createElement(v,{...e}))},N=n(816583),R={color:`${s.colors.grey00}`,minHeight:"60px",borderBottom:`solid 1px ${s.colors.grey05}`,position:"relative","&:hover":{"& > *:last-child":{opacity:1}}},T={width:36,minWidth:36,height:36,borderRadius:"50%",border:"1px solid rgba(0, 0, 0, 0.1)",background:s.colors.dashGreen06},Z={padding:"0px 8px",overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis",fontWeight:"bold"},O=({attachment:e})=>(0,a.tZ)(s.Ejs,{alignItems:"center",flexWrap:"nowrap"},(0,a.tZ)(s.Ejs,{sx:T,alignItems:"center",justifyContent:"center"},(0,a.tZ)(s.Ujz,{size:25,color:s.colors.midGreen00})),(0,a.tZ)(s.nvN,{sx:Z},e.filename)),k=e=>{const{attachment:t}=e,{translate:n}=(0,l.Z)();return(e=>{const{showAlert:t}=(0,p.V)(),{translateWithMarkup:n}=(0,u.Y)(),a=(0,_.Ce)(e.downloadKey);(0,i.useEffect)((()=>{var i,o;const r=e=>t((0,m.b)(n(e)),s.BLW.SUBTLE,!1);if(a?.status)switch(a.status){case d.FileDownloadStatus.Downloading:r({key:"webapp_secure_file_download_progress_downloading_markup",params:{fileName:e.filename,progress:Math.round(null!=(i=(null!=(o=100*a?.bytesReceived)?o:0)/a?.contentLength)?i:1)}});break;case d.FileDownloadStatus.Deciphering:r({key:"webapp_secure_file_download_progress_deciphering_markup",params:{fileName:e.filename}});break;case d.FileDownloadStatus.TransferComplete:t(n({key:"webapp_secure_file_download_progress_success_markup",params:{fileName:e.filename}}),s.BLW.SUCCESS);break;case d.FileDownloadStatus.Error:t(n({key:"webapp_secure_file_error_unknown"}),s.BLW.ERROR)}}),[alert,e,a,n])})(t),(0,a.tZ)(s.Ejs,{fullWidth:!0,alignItems:"center",sx:R},(0,a.tZ)(s.k$b,{sx:{width:"45%"}},(0,a.tZ)(O,{...e})),(0,a.tZ)(s.k$b,{sx:{width:"25%"}},n.shortDate((0,c.Z)(t.creationDatetime))),(0,a.tZ)(s.k$b,{sx:{width:"10%"}},(o=t.localSize,N(o,{decimalPlaces:0,unitSeparator:" "}))),e.isAttachmentEnabled?(0,a.tZ)(I,{parentType:f.ItemType.SecureNote,parentId:e.noteId,...e}):null);var o};var A=n(509144);const D=n(816583),L={padding:"16px 16px 16px 0px",borderBottom:`1px solid ${s.colors.grey06}`,color:"ds.text.neutral.quiet",alignSelf:"center",fontSize:"12px",textTransform:"uppercase"},F=({currentValues:e,additionalProps:t})=>{const{translate:n}=(0,l.Z)(),o=(0,_.aV)(),[r,c]=(0,i.useState)(!1),d=(0,A.I)(),p=d.max>0&&d.remaining<78643200&&o,u=e.attachments;return(0,i.useEffect)((()=>{c(t.isUploading)}),[t.isUploading]),(0,a.tZ)(s.Ejs,{flexDirection:"column",sx:{padding:"12px 0px",flex:1,overflow:"hidden"}},(0,a.tZ)(s.Ejs,{flexDirection:"column",alignItems:"center",fullWidth:!0,sx:{flex:1,overflowY:"auto",flexWrap:"nowrap"}},u.length>0?(0,a.tZ)(s.Ejs,{fullWidth:!0,alignItems:"center"},(0,a.tZ)(s.nvN,{sx:{...L,width:"45%"}},n("webapp_secure_notes_addition_field_tab_attachments_table_title_name")),(0,a.tZ)(s.nvN,{sx:{...L,width:"25%"}},n("webapp_secure_notes_addition_field_tab_attachments_table_title_creation_date")),(0,a.tZ)(s.nvN,{sx:{...L,width:"30%"}},n("webapp_secure_notes_addition_field_tab_attachments_table_title_file_size"))):(0,a.tZ)(s.Ejs,{justifyContent:"center",flexDirection:"column",alignItems:"center",sx:{flex:1}},(0,a.tZ)(s.Ujz,{size:70,color:s.colors.dashGreen04,sx:{marginBottom:"24px"}}),(0,a.tZ)(s.nvN,{sx:{textAlign:"center",color:"ds.text.neutral.catchy"}},n.markup("webapp_secure_file_empty_attachments_markup"))),u?u.map((e=>(0,a.tZ)(k,{key:e.id,attachment:e,handleFileInfoDetached:t?.handleFileInfoDetached,isAttachmentEnabled:o,disableActions:r,setDisableActions:c,onModalDisplayStateChange:t.onModalDisplayStateChange,noteId:t?.noteId}))):null),p?(0,a.tZ)(s.vDh,{severity:"warning",title:n("webapp_secure_file_storage_quota_info",(m=d.remaining,f=d.max,{usedQuota:D(m,{decimalPlaces:0,unitSeparator:" "}),maxQuota:D(f,{decimalPlaces:0,unitSeparator:" "})})),sx:{flex:0,marginTop:"16px"}}):null);var m,f};var P=n(234931),U=n(642844),G=n(526849),B=n(111768),W=n(605961),z=n.n(W),K=n(361607),q=n(133354);const M="textarea--Ix1kh7fRYF",V="markdown--ARo1hBXSLa";let H;!function(e){e.BOLD="bold",e.CODE="code",e.ITALIC="italic",e.LINK="link",e.SUBSUBTITLE="subsubtitle",e.SUBTITLE="subtitle",e.TITLE="title"}(H||(H={}));const j=e=>(t,n)=>{var i;const{formatPrefix:a,cursorOffsetStart:s,cursorOffsetEnd:o}=e,r=null!=(i=e.formatSuffix)?i:"",{start:l,end:c}=n,d=t.slice(l,c),p=((e,t,n)=>{const i=!n||e.endsWith(n);return e.startsWith(t)&&i})(d,a,r),u=((e,t,n,i)=>e.start===e.end?(e.start=e.start+n,e.end=e.end+n,e):(e.end=t?e.end-n-i:e.end+n+i,e))(n,p,s,o);return p?{updatedContent:[t.slice(0,l),t.slice(l+a.length,c-r.length),t.slice(c)].join(""),updatedSelectionRange:u}:{updatedContent:[t.slice(0,l),a,d,r,t.slice(c)].join(""),updatedSelectionRange:u}},Y={[H.TITLE]:{icon:(0,B.tZ)(B.JO,{name:"FormattingHeading1Outlined"}),label:"Heading",format:j({formatPrefix:"# ",cursorOffsetStart:2,cursorOffsetEnd:0})},[H.SUBTITLE]:{icon:(0,B.tZ)(B.JO,{name:"FormattingHeading2Outlined"}),label:"Subheading",format:j({formatPrefix:"## ",cursorOffsetStart:3,cursorOffsetEnd:0})},[H.SUBSUBTITLE]:{icon:(0,B.tZ)(B.JO,{name:"FormattingHeading3Outlined"}),label:"Subsubheading",format:j({formatPrefix:"### ",cursorOffsetStart:4,cursorOffsetEnd:0})},[H.BOLD]:{icon:(0,B.tZ)(B.JO,{name:"FormattingBoldOutlined"}),label:"Bold",format:j({formatPrefix:"**",formatSuffix:"**",cursorOffsetStart:2,cursorOffsetEnd:2})},[H.ITALIC]:{icon:(0,B.tZ)(B.JO,{name:"FormattingItalicOutlined"}),label:"Italic",format:j({formatPrefix:"_",formatSuffix:"_",cursorOffsetStart:1,cursorOffsetEnd:1})},[H.CODE]:{icon:(0,B.tZ)(B.JO,{name:"FormattingCodeOutlined"}),label:"Code",format:j({formatPrefix:"`",formatSuffix:"`",cursorOffsetStart:1,cursorOffsetEnd:1})},[H.LINK]:{icon:(0,B.tZ)(B.JO,{name:"LinkOutlined"}),label:"Link",format:(e,t)=>{const{start:n,end:i}=t,a=e.slice(n,i),s=((e,t,n)=>(e.start===e.end?(e.start=e.start+1,e.end=e.end+1):(e.start=e.end+3,e.end=e.end+6),e))(t);return{updatedContent:[e.slice(0,n),"[",a,"](url)",e.slice(i)].join(""),updatedSelectionRange:s}}}},X=({fieldRef:e,content:t,isPreviewing:n,setContent:a,setIsPreviewing:o})=>{const r=n=>()=>{var i,s;const o=Y[n].format,{updatedContent:r,updatedSelectionRange:l}=o(t,{start:null!=(i=e.current?.selectionStart)?i:0,end:null!=(s=e.current?.selectionEnd)?s:0});a(r),setTimeout((()=>{e.current&&(e.current.focus(),e.current.selectionStart=l.start,e.current.selectionEnd=l.end)}),200)};return(0,B.tZ)(i.Fragment,null,(0,B.tZ)(s.Ejs,{gap:"6px"},Object.keys(Y).map((e=>(0,B.tZ)(B.zx,{key:e,mood:"neutral",intensity:"supershy",layout:"iconOnly",icon:Y[e].icon,onClick:r(e),disabled:n,"aria-label":Y[e].label,title:Y[e].label,name:Y[e].label}))),t?(0,B.tZ)(s.k$b,{sx:{marginLeft:"auto"}},(0,B.tZ)(B.zx,{"aria-label":"Preview",onClick:()=>o(!n),layout:"iconTrailing",intensity:"quiet",mood:"neutral",icon:n?"ActionHideFilled":"ActionRevealFilled"},"Preview")):null),(0,B.tZ)("hr",{sx:{width:"100%"}}))};var $=n(128050);const J=o.w.SupportMarkdownInSecureNotes,Q=({fieldRef:e,value:t,name:n,placeholder:a,disabled:s,readonly:o,isEditing:r,setContent:l,setIsEditing:c,onChange:d})=>{const[p,u]=(0,i.useState)(!1),_=(0,K._)(),m=()=>_.status===q.rq.Success&&!!_.data[J];return(0,B.tZ)("div",{className:"content--AFh9bUjHyR",onClick:m()?()=>{c(!0)}:void 0},m()?!r&&t?(0,B.tZ)("div",{className:V},(0,B.tZ)(z(),{source:(0,$.z)(t),softBreak:"br"})):(0,B.tZ)("div",{sx:{display:"flex",flexDirection:"column",flexGrow:1},onClick:()=>{p&&u(!1)}},(0,B.tZ)(X,{content:t,setContent:l,fieldRef:e,isPreviewing:p,setIsPreviewing:e=>u(e)}),p?(0,B.tZ)("div",{className:V},(0,B.tZ)(z(),{source:(0,$.z)(t),softBreak:"br"})):(0,B.tZ)("textarea",{ref:e,name:n,className:M,sx:{color:"ds.text.neutral.catchy"},placeholder:a,value:t||"",disabled:s,readOnly:o,onChange:e=>{d&&d(e)}})):(0,B.tZ)("textarea",{ref:e,name:n,className:M,sx:{color:"ds.text.neutral.catchy"},placeholder:a,value:t||"",disabled:s,readOnly:o,onChange:e=>{d&&d(e)}}))};var ee=n(443455);const te=({content:e,setContent:t,isEditing:n,setIsEditing:a,limitedPermissions:o,readonly:r})=>{const{translate:c}=(0,l.Z)(),[d,p]=(0,i.useState)(!1),u=(0,i.useRef)(null);return i.createElement(i.Fragment,null,i.createElement(Q,{fieldRef:u,placeholder:c(r?"webapp_secure_notes_edition_disabled_label":"webapp_secure_notes_addition_field_placeholder_no_content"),value:e,disabled:o,readonly:r,onChange:({target:{value:n}})=>{const i=n.length>e.length,a=e.length>=Ie;if(i&&a)return;const s=i&&n.length>Ie,o=s?e:n;p(s),t(o)},isEditing:n,setIsEditing:a,setContent:t}),d&&i.createElement("div",{className:"alertContainer--aKDAFWKb1l"},i.createElement(ee.n,{id:Math.floor(1e6*Math.random()),message:c("webapp_secure_notes_addition_field_copy_past_error"),onHide:()=>{p(!1)},severity:s.BLW.WARNING})))};var ne=n(383849),ie=n.n(ne);const ae=({maxAuthorizedSize:e,currentSize:t})=>{const{translate:n}=(0,l.Z)(),a=.95*e,s=.995*e,o=e-t,r=t>e?n("webapp_secure_notes_edition_field_text_over_limit",{overLimit:-o}):n("webapp_secure_notes_edition_field_text_max_size_reached",{charLeft:o});return t>=a?i.createElement("div",{className:ie()("greyWarningCharLeft--kX7GKkrKTa",t>=s?"redWarningCharLeft--XWRHnpjz2e":{})},r):null};function se(e,t){return{label:t,value:("credential"===e?"":"noCategory")||""}}function oe(e,t,n,i){const a=t.find((e=>e.label===n));return null!=a?a:se(e,i)}const re=["BLUE","GRAY","PURPLE","PINK","RED","BROWN","GREEN","ORANGE","YELLOW"];function le(e,t,n){return t.filter((t=>e[t])).map((t=>({icon:n,label:`${e[t]}`,value:t})))}function ce(e,t){const n=le(e,[t],null);return n.length?n[0]:{}}var de=n(53915);var pe=n(839434),ue=n(59896),_e=n(826771),me=n(889483),fe=n(749446),he=n(364776);const be={NO_CATEGORY:"webapp_secure_notes_addition_no_category",CATEGORY_LABEL:"webapp_secure_notes_addition_field_tab_option_category_label",COLOR_LABEL:"webapp_secure_notes_addition_field_tab_option_color_label",SECURITY_LABEL:"webapp_secure_notes_addition_field_tab_option_security_label",SECURITY_TITLE:"webapp_secure_notes_addition_field_tab_option_security_title",SECURITY_DESCRIPTION:"webapp_secure_notes_addition_field_tab_option_security_description",COLORS:{BLUE:"webapp_secure_notes_addition_field_type_option_blue",BROWN:"webapp_secure_notes_addition_field_type_option_brown",GRAY:"webapp_secure_notes_addition_field_type_option_gray",GREEN:"webapp_secure_notes_addition_field_type_option_green",ORANGE:"webapp_secure_notes_addition_field_type_option_orange",PINK:"webapp_secure_notes_addition_field_type_option_pink",PURPLE:"webapp_secure_notes_addition_field_type_option_purple",RED:"webapp_secure_notes_addition_field_type_option_red",YELLOW:"webapp_secure_notes_addition_field_type_option_yellow"}},ge={NO_CATEGORY:"webapp_secure_notes_edition_no_category",CATEGORY_LABEL:"webapp_secure_notes_edition_field_tab_option_category_label",COLOR_LABEL:"webapp_secure_notes_edition_field_tab_option_color_label",SECURITY_LABEL:"webapp_secure_notes_edition_field_tab_option_security_label",SECURITY_TITLE:"webapp_secure_notes_edition_field_tab_option_security_title",SECURITY_DESCRIPTION:"webapp_secure_notes_edition_field_tab_option_security_description",COLORS:{BLUE:"webapp_secure_notes_edition_field_type_option_blue",BROWN:"webapp_secure_notes_edition_field_type_option_brown",GRAY:"webapp_secure_notes_edition_field_type_option_gray",GREEN:"webapp_secure_notes_edition_field_type_option_green",ORANGE:"webapp_secure_notes_edition_field_type_option_orange",PINK:"webapp_secure_notes_edition_field_type_option_pink",PURPLE:"webapp_secure_notes_edition_field_type_option_purple",RED:"webapp_secure_notes_edition_field_type_option_red",YELLOW:"webapp_secure_notes_edition_field_type_option_yellow"},CHANGE_SECURED_SETTING_ON:"webapp_secure_notes_edition_unlocker_on_success",CHANGE_SECURED_SETTING_OFF:"webapp_secure_notes_edition_unlocker_off_success"},Se={title:"webapp_secure_notes_edition_unlocker_title_on",subtitle:"webapp_secure_notes_edition_unlocker_description_on"},Ee={title:"webapp_secure_notes_edition_unlocker_title_off",subtitle:"webapp_secure_notes_edition_unlocker_description_off"},ye=({noteCategories:e,disabled:t,data:n,isNewItem:a,saveSecureNoteOptions:o})=>{var r,c,d,u;const{translate:_}=(0,l.Z)(),m=(0,p.V)(),{areProtectedItemsUnlocked:f,openProtectedItemsUnlocker:h}=(0,me.tY)(),b=(0,fe.F)(),g=(0,he.Z)(),S=!b&&!g,E=a?be:ge,y=_(E.NO_CATEGORY),[w,C]=(0,i.useState)(null!=(r=n?.category)?r:y),[v,x]=(0,i.useState)(null!=(c=n?.type)?c:"BLUE"),[I,N]=(0,i.useState)(null!=(d=n?.spaceId)?d:""),[R,T]=(0,i.useState)(null!=(u=n?.secured)&&u),Z=(e=>e.map((e=>({name:e.categoryName,id:e.id}))))(e),O=function(e,t,n){const i=t.map((e=>({label:e.name,value:e.id})));return[se("note",n)].concat(i)}(0,Z,y),k=e.find((e=>e.id===w)),A=k?k.categoryName:y,D=re.reduce(((e,t)=>(e[t]=_(E.COLORS[t]),e)),{}),L=le(D,re,(F=v,i.createElement("span",{className:"icon--eBGJiUqyZ5",style:{backgroundColor:(0,de.Z)(F)}})));var F;const P=e=>{T(e),o({category:w,type:v,spaceId:I,secured:e}),m.showAlert(_(e?ge.CHANGE_SECURED_SETTING_ON:ge.CHANGE_SECURED_SETTING_OFF),s.BLW.SUCCESS)};return(0,B.tZ)(s.Ejs,{flexDirection:"column"},e&&e.length>1?(0,B.tZ)(ue.Z,{key:A,disabled:t,label:_(E.CATEGORY_LABEL),placeholder:"",dataName:"category",options:O,defaultOption:oe("note",O,A,y),onChange:e=>{C(e.currentTarget.value),o({category:e.currentTarget.value,type:v,spaceId:I,secured:R})}}):null,(0,B.tZ)(pe.M,{labelSx:pe.e,spaceId:null!=I?I:"",onChange:e=>{N(e),o({category:w,type:v,secured:R,spaceId:e})}}),(0,B.tZ)(ue.Z,{key:v,disabled:t,label:_(E.COLOR_LABEL),placeholder:"",dataName:"type",options:L,defaultOption:ce(D,v),onChange:e=>{x(e.currentTarget.value),o({category:w,type:e.currentTarget.value,spaceId:I,secured:R})}}),S?(0,B.tZ)(s.Ejs,{sx:{mt:"12px"},flexDirection:"row",flexWrap:"nowrap"},(0,B.tZ)(s.k$b,{sx:{fontWeight:"600",width:"173px",textAlign:"right",fontSize:"16px",justifyContent:"flex-end",pr:"24px"},as:B.nv,innerAs:"label",htmlFor:"securityToggle",size:"medium"},_(E.SECURITY_LABEL)),(0,B.tZ)(s.Ejs,{flexDirection:"row",gap:"8px",flexWrap:"nowrap"},(0,B.tZ)(s.Ejs,{as:s.dDn,flexDirection:"column"},(0,B.tZ)(B.nv,null,_(E.SECURITY_TITLE)),(0,B.tZ)(B.nv,{color:"ds.text.neutral.quiet"},_(E.SECURITY_DESCRIPTION))),(0,B.tZ)(B.ZD,{id:"securityToggle",disabled:t,checked:R,onChange:()=>{const e=!R;f||a?P(e):((0,me.jF)(),h({itemType:_e.R.SecureNoteSetting,options:{fieldsKeys:e?Se:Ee,translated:!1},successCallback:()=>P(e)}))}}))):null)},{CONTENT:we,DOCUMENT_STORAGE:Ce,MORE_OPTIONS:ve,SHARED_ACCESS:xe}=P.SecureNoteTabs,Ie=1e4,Ne=({activeTab:e,data:t,content:n,setContent:c,handleFileInfoDetached:d,hasAttachment:p,isAdmin:u,isSecureNoteAttachmentEnabled:_,isShared:m,isUploading:f,isEditing:h,setIsEditing:b,lee:g,noteCategories:S,onModifyData:E,onModalDisplayStateChange:y,saveSecureNoteOptions:w})=>{var C;const{translate:v}=(0,l.Z)(),x=(0,r.w)(o.w.DisableSecureNotes);return(0,a.tZ)(i.Fragment,null,e===we&&(0,a.tZ)(i.Fragment,null,(0,a.tZ)("div",{className:"formContent--TCNgoQopo1"},(0,a.tZ)(te,{content:n,setContent:e=>{E(),c(e)},isEditing:h,setIsEditing:b,limitedPermissions:t.limitedPermissions,readonly:x})),(0,a.tZ)(ae,{maxAuthorizedSize:Ie,currentSize:n.length}),_&&(m||p)&&(0,a.tZ)(s.vDh,{severity:"subtle",size:"small",title:v(m?"webapp_secure_notes_infobox_shared":"webapp_secure_notes_infobox_has_attachments"),sx:{margin:"0px 32px 0px 8px"}})),e===xe&&(0,a.tZ)(U.u,{isAdmin:u,id:t.id}),e===Ce&&(0,a.tZ)(F,{currentValues:(0,G.pick)(["attachments"],t),lee:g,signalEditedValues:E,additionalProps:{handleFileInfoDetached:e=>{d(e)},onModalDisplayStateChange:y,noteId:t.id,isUploading:f}}),e===ve&&(0,a.tZ)(ye,{data:{category:t.category,spaceId:null!=(C=t.spaceId)?C:"",type:t.type,secured:t.secured},noteCategories:S,isNewItem:!1,saveSecureNoteOptions:e=>{w(e)}}))}},922487:(e,t,n)=>{"use strict";n.d(t,{r:()=>h});var i=n(133354),a=n(242542),s=n(463164),o=n(148038),r=n(66941),l=n(604400),c=n(526849);const d=(e,t,n=!1)=>({recipientId:e.groupId,recipientName:e.name,isGroup:!0,permission:e.permission,status:e.status,isAdmin:t,isInSharedCollection:n}),p=(e,t,n=!1)=>({recipientId:e.userId,recipientName:e.alias,isGroup:!1,permission:e.permission,status:e.status,isAdmin:t,isInSharedCollection:n}),u=(e,t)=>{if(!e)return null;const n=t?e.userGroups:e.users;return n?.length?n.map((e=>{return i=t,{recipientId:(n=e).id,recipientName:n.label,isGroup:i,permission:l.y3.Admin,status:n.status,isAdmin:!0,isInSharedCollection:!0};var n,i})):null},_=(e,t)=>e?t?e.permission===l.y3.Admin?e:t:e:t,m=(0,c.sortBy)((0,c.compose)(c.toLower,(0,c.prop)("recipientName"))),f=(e,t)=>{if(!t)return m(e);const n=[...new Set(t.concat(e).map((e=>e.recipientId)))].map((n=>{const i=t.filter((e=>e.recipientId===n)).reduce(_,void 0),a=e?.find((e=>e.recipientId===n));return{..._(a,i),isInSharedCollection:!!i}})).filter((e=>!!e));return m(n)};function h(e,t){const{collectionIds:n,itemGroupId:l,isReady:c}=(0,a.b)(e),_=function(e){return(0,o.qr)({queryConfig:{query:r.C.getGroupRecipients,queryParam:e},liveConfig:{live:r.C.liveGroupRecipients,liveParam:e}},[])}(e),m=function(e){return(0,o.qr)({queryConfig:{query:r.C.getUserRecipients,queryParam:e},liveConfig:{live:r.C.liveUserRecipients,liveParam:e}},[])}(e),h=(0,s.F)(n);if(m.status!==i.rq.Success||_.status!==i.rq.Success||h.status!==i.rq.Success||!c)return{isReady:!1,users:[],groups:[]};const b=h.data,g=m.data.map((e=>p(e,t))),S=_.data.map((e=>d(e,t)));return{users:f(g,u(b,!1)),groups:f(S,u(b,!0)),itemGroupId:l,isReady:!0}}},642844:(e,t,n)=>{"use strict";n.d(t,{u:()=>C});var i,a,s=n(696832),o=n(111768),r=n(441217),l=n(453576),c=n(66941),d=n(427658),p=n(993026),u=n(351433),_=n(683773),m=n(360592),f=n(220315),h=n(716514),b=n(201389);const g=({cancelStatus:e,itemGroupId:t,setCancelStatus:n,recipientId:l})=>{const{translate:d}=(0,b.Z)(),u=e===p.V.Loading,_={type:"user",alias:l};(0,s.useEffect)((()=>{let t;return e===p.V.Failure&&(t=window.setTimeout((()=>n(null)),2e3)),()=>{clearTimeout(t)}}),[e,n]);const m=e?()=>n(null):()=>n(p.V.Confirm);return e===p.V.Failure?(0,o.tZ)("div",{sx:{color:"ds.text.danger.standard",display:"flex",alignItems:"center"}},i||(i=(0,o.tZ)(r.aNP,{color:"ds.text.danger.standard"})),"Â ",d("webapp_shared_access_cancel_failure")):(0,o.tZ)("div",null,(0,o.tZ)(o.zx,{intensity:e?"quiet":"supershy",disabled:u,onClick:m},d(e?"webapp_shared_access_cancel":"webapp_shared_access_cancel_invitation")),e?(0,o.tZ)(o.zx,{mood:"danger",intensity:"catchy",sx:{ml:"16px"},disabled:u,onClick:()=>(async()=>{n(p.V.Loading);const e=await(async()=>{try{const{success:e}=await c.C.revokeSharing({itemGroupId:t,recipient:_});return e}catch(e){return!1}})();n(e?p.V.Success:p.V.Failure)})()},u?a||(a=(0,o.tZ)(r.HoD,null)):d("webapp_shared_access_confirm")):null)};var S;const E=e=>{const{status:t,permission:n}=e;return"pending"===t?"webapp_shared_access_pending_invitation":"accepted"===t?"admin"===n?"webapp_sharing_permissions_full_rights":"webapp_sharing_permissions_limited_rights":""},y=({itemGroupId:e,openEditPermissionsDialog:t,member:n})=>{const[i,a]=(0,s.useState)(null),r=(0,h.j)()?.login,{translate:l}=(0,b.Z)();if(i===p.V.Success)return null;const{permission:c,status:d}=n,y=n.isAdmin&&r!==n.recipientId,w="pending"===d?(0,o.tZ)(g,{recipientId:n.recipientId,itemGroupId:e,cancelStatus:i,setCancelStatus:a}):(0,o.tZ)(m.M,{disabled:n.isInSharedCollection,intensity:"supershy",onClick:()=>t((e=>e.isGroup?{type:"userGroup",groupId:e.recipientId,name:e.recipientName}:{type:"user",alias:e.recipientId})(n),c),content:l("webapp_sharing_collection_access_description_tooltip"),tooltipSx:{textWrap:"wrap",maxWidth:"240px"}},l("webapp_shared_access_edit_permissions"));return(0,o.tZ)("li",{key:n.recipientId,sx:{alignItems:"center",borderStyle:"solid",borderBottomWidth:"1px",borderColor:"ds.border.neutral.standard.idle",display:"flex",minHeight:"64px",position:"relative"}},(0,o.tZ)(_.r,{infoAction:y?w:null,logo:n.isGroup?S||(S=(0,o.tZ)(f.Z,null)):(0,o.tZ)(u.q,{email:n.recipientName,size:36}),text:l(E(n)),title:n.recipientName,disabled:i===p.V.Loading}))};var w=n(922487);const C=({id:e,isAdmin:t})=>{const[n,i]=(0,s.useState)(!1),[a,u]=(0,s.useState)(null),{isReady:_,itemGroupId:m,users:f,groups:h}=(0,w.r)(e,t);if(!_)return(0,o.tZ)(r.HoD,{color:"ds.container.expressive.brand.catchy.idle",size:50,sx:{alignSelf:"center",m:"20px"}});const b=e=>{a&&u({...a,step:e})},g=async()=>{if(!a)return;const{recipient:e,permission:t}=a;i(!0);const n="revoke"===t?await(async e=>{try{const{success:t}=await c.C.revokeSharing({itemGroupId:null!=m?m:"",recipient:e});return t}catch(e){return!1}})(e):await(async(e,t)=>{try{const{success:n}=await c.C.updateSharingPermission({itemGroupId:null!=m?m:"",recipient:e,permission:t});return n}catch(e){return!1}})(e,t);if(n){const e="revoke"===t?p.PermissionDialogStep.RevokeSuccess:p.PermissionDialogStep.Success;b(e)}else b(p.PermissionDialogStep.Failure);i(!1)},S=(e,t)=>{const n={recipient:e,permission:t,originPermission:t,step:p.PermissionDialogStep.Permission,name:(0,l.isGroupRecipient)(e)?e.name:e.alias};u(n)};return(0,o.tZ)("div",{sx:{flex:"1",overflowY:"auto",p:"24px"}},(0,o.tZ)("ul",{sx:{flex:"1"}},h.map((e=>(0,o.tZ)(y,{key:e.recipientId,member:e,itemGroupId:null!=m?m:"",openEditPermissionsDialog:S}))),f.map((e=>(0,o.tZ)(y,{key:e.recipientId,member:e,itemGroupId:null!=m?m:"",openEditPermissionsDialog:S})))),a&&(0,o.tZ)(d.E,{isOpen:!0,loading:n,onCancelRevoke:()=>{a&&u({...a,step:p.PermissionDialogStep.Permission})},onConfirmRevoke:g,onDismiss:()=>u(null),onSelectPermission:e=>{a&&u({...a,permission:e})},onValidatePermission:()=>{"revoke"===a?.permission?u({...a,step:p.PermissionDialogStep.ConfirmRevoke}):g()},originPermission:a.originPermission,permission:a.permission,recipient:a.recipient,step:a.step}))}},255990:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});const i={left:"left--jltGqC2ld6",right:"right--r4mXfTZRXo",select:"select--ivbO452zoA",disable:"disable--F2KcdR2ssV",label:"label--EhkwVb63v9"}},102730:(e,t,n)=>{var i=n(696832);function a(e){return i.createElement("svg",e,i.createElement("g",{fill:"none",fillRule:"evenodd"},[i.createElement("path",{className:"tooltip-modern-icon-stroke",d:"M.5 8.5a8 8 0 1 1 16 0 8 8 0 0 1-16 0zm8-1v5",key:0}),i.createElement("path",{className:"tooltip-modern-icon-fill",d:"M9.5 4.5a1 1 0 1 0-2 0 1 1 0 1 0 2 0",key:1})]))}a.defaultProps={width:"17",height:"17"},e.exports=a,a.default=a},15567:(e,t,n)=>{var i=n(696832);function a(e){return i.createElement("svg",e,i.createElement("path",{d:"M6.547 7.25c0-1 1-2 2.5-2s2.5.75 2.5 2c0 1-.5 1.5-1.5 2.25s-1 1.25-1 1.75m-8.5-1.5a8.5 8.5 0 1 1 17 0 8.5 8.5 0 0 1-17 0Zm9 4a.5.5 0 1 1-1 0 .5.5 0 0 1 1 0Z",className:"tooltip-modern-icon-stroke"}))}a.defaultProps={width:"17",height:"17",viewBox:"0 0 19 19",fill:"none"},e.exports=a,a.default=a}}]);